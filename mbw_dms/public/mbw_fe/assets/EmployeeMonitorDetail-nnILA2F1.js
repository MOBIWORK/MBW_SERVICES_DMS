import{Z as a,a2 as c,aX as u,N as s,b2 as g,ac as j}from"./index-l-BlZMhk.js";function f({employee:r}){a.useState("");const[h,m]=a.useState([]),[_,d]=a.useState(""),[n,l]=a.useState({apiKey:"w1Dlh2wRon7mE6sL196TgvLS45fw02uon74pJ0rc",projectId:"",objectId:"",date:"2024-08-03"}),p=a.useCallback(async e=>{let t=await c.get("/api/method/mbw_dms.api.user.get_list_employees");if(t.message=="Thành công"){let i=t.result.map(function(o){return{value:o.name,label:o.employee_name,object_id:o.object_id}});m(i);for(let o=0;o<i.length;o++)if(r!=null&&i[o].object_id==r){setTimeout(()=>{d(i[o].value)},500);break}}},[]);return a.useEffect(()=>{(async()=>{if(r==null||r==""){const e=await c.get("/api/method/mbw_dms.api.user.get_projectID");l(t=>({...t,projectId:e.result["Project ID"],objectId:""})),p(e.result["Project ID"]);return}try{const e=await c.get("/api/method/mbw_dms.api.user.get_projectID");l(t=>({...t,projectId:e.result["Project ID"],objectId:r}))}catch(e){u.error(e?.message||"Something was wrong!!!")}})()},[r]),a.useEffect(()=>{var e="";return n.projectId&&(e=document.createElement("script"),e.src="https://files.ekgis.vn/sdks/tracking/v2/ekmapplf-history-map.min.js",e.async=!0,document.body.appendChild(e),e.onload=async()=>{try{console.log("loading...");let t=await new window.ekmapplf_Tracking.HistoryMap().init("map_history_1sss",n);console.log("results...",t)}catch(t){console.log("error......",t)}}),()=>{e&&document.body.removeChild(e)}},[n]),s.jsx("div",{id:"map_history_1sss",className:" h-full"})}function y(){a.useState("list");const{employee_id:r}=g();return s.jsx(s.Fragment,{children:s.jsx(f,{employee:r})})}function b(){return s.jsxs(s.Fragment,{children:[s.jsx(j,{children:s.jsx("title",{children:" EmployeeMonitor Detail"})}),s.jsx(y,{})]})}export{b as default};
