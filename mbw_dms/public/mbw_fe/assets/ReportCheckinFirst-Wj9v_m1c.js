import{Y as n,a2 as I,L as e,R as y,P as g,ac as S,ae as N}from"./index-Nr-aOhNl.js";import{C}from"./index-wGim9TZp.js";import{u as D}from"./index-bewdzdiQ.js";import{a as R,u as j,P as _,m as b}from"./useMediaQuery-iwLaZ1FU.js";import{R as F,F as T}from"./ReportHeader-HnfgwXnF.js";import{D as E}from"./dropDownFilter-5GaKSbuj.js";import"./VerticalAlignBottomOutlined-gvY3yypE.js";import"./index.esm-xzfmr6j7.js";import"./data-u-VkVTNg.js";import"./index-tK5S8JnW.js";const M=[{title:"STT",dataIndex:"stt",key:"stt",width:60,render:(r,t,a)=>e.jsx("div",{className:"text-center",children:a+1})},{title:"Nhóm bán hàng",dataIndex:"sales_team",key:"sales_team",render:(r,t)=>e.jsx("div",{children:t.sales_team})},{title:"Mã nhân viên",dataIndex:"employee_id",key:"employee_id",render:(r,t)=>e.jsx("div",{children:t.employee_id})},{title:"Tên nhân viên",dataIndex:"sales_person",key:"sales_person",render:(r,t)=>e.jsx("div",{children:t.sales_person})},{title:"Mã khách hàng",dataIndex:"customer_code",key:"customer_code",render:(r,t)=>e.jsx("div",{children:t.customer_code})},{title:"Tên khách hàng",dataIndex:"customer_name",key:"customer_name",render:(r,t)=>e.jsx("div",{children:t.customer_name})},{title:"Loại khách hàng",dataIndex:"customer_type",key:"customer_type",render:(r,t)=>e.jsx("div",{children:t.customer_type})},{title:"Nhóm khách hàng",dataIndex:"customer_group",key:"customer_group",render:(r,t)=>e.jsx("div",{children:t.customer_group})},{title:"Người liên hệ",dataIndex:"contact_person",key:"contact_person",render:(r,t)=>e.jsx("div",{className:"!w-[175px] truncate hover:whitespace-normal",children:t.contact_person})},{title:"SDT",dataIndex:"phone",key:"phone",render:(r,t)=>e.jsx("div",{children:t.phone})},{title:"Mã số thuế",dataIndex:"tax_id",key:"tax_id",render:(r,t)=>e.jsx("div",{children:t.tax_id})},{title:"Khu vực",dataIndex:"territory",key:"territory",render:(r,t)=>e.jsx("div",{children:t.territory})},{title:"Địa chỉ",dataIndex:"address",key:"address",render:(r,t)=>e.jsx("div",{className:"!w-[175px] truncate hover:whitespace-normal",children:t.address})},{title:"Ngày viếng thăm",dataIndex:"date_checkin",key:"date_checkin",render:(r,t)=>e.jsx("div",{children:t.date_checkin?.split("-")?.reverse()?.toString()?.replaceAll(",","-")})}];function z(){const[r,t]=n.useState([]),[a,k]=n.useState(0),[i,o]=n.useState(1),v=D(),d=R(`${b}`),[f,w]=n.useState(!1),{startDate:c,endDate:l}=j(s=>s.date),{sales_team:P,employee:m,customer_type:p,customer_group:u,territory:h}=j(s=>s.group);return n.useEffect(()=>{(async()=>{const s=await I.get("/api/method/mbw_dms.api.report.first_checkin_rp.first_checkin_report",{params:{page_size:_,page_number:i,sales_person:m,customer_group:u,customer_type:p,territory:h,from_date:c,to_date:l}});let{result:x}=s;t(x),k(x?.totals)})()},[i,m,u,p,h,c,l,f]),e.jsx(e.Fragment,{children:e.jsx(C,{header:e.jsx(F,{setRefresh:w,title:e.jsx("div",{className:"min-w-[230px] ",children:"Báo cáo thống kê khách hàng viếng thăm lần đầu"}),params:{report_type:"Report Customer Checkin",data_filter:{sales_person:m,customer_group:u,customer_type:p,territory:h,from_date:c,to_date:l}},file_name:"Report Customer Checkin.xlsx"}),children:e.jsxs("div",{className:"bg-white rounded-2xl pt-4 pb-7 border-[#DFE3E8] border-[0.2px] border-solid",children:[e.jsxs(y,{gutter:[16,16],className:`flex ${d?"justify-end":"justify-between"} items-center w-full`,children:[!d&&e.jsx(g,{className:"ml-4 w-[78%]",children:e.jsx(y,{gutter:[8,8],className:"space-x-4",children:e.jsx(T,{setPage:o,inputFromDate:!0,inputToDate:!0,inputSaleGroup:!0,inputEmployee:!0})})}),e.jsx(g,{className:"!ml-4",children:e.jsx(E,{inputCustomerType:!0,inputCustomerGroup:!0,inputTerritory:!0,inputFromDate:!0,inputToDate:!0,inputSaleGroup:!0,inputEmployee:!0,setPage:o,matchMedia:!d})})]}),e.jsx("div",{className:"pt-5",children:e.jsx(S,{dataSource:r?.data?.map(s=>({...s,key:s.name})),bordered:!0,scroll:{x:3e3,y:r?.data?.length>0?v?.h*.55:void 0},pagination:a&&a>_?{pageSize:_,showSizeChanger:!1,total:a,current:i,onChange(s){o(s)}}:!1,columns:M})})]})})})}function q(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:" ReportCheckinFirst"})}),e.jsx(z,{})]})}export{q as default};
