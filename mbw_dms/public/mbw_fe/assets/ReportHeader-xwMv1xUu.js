import{Y as c,cK as g,cL as A,cM as M,V as f,L as s,P as h,a2 as v,cy as H,a1 as S,a6 as z,aa as K,cA as G,cz as Q,cu as k,cF as N,cG as D,aZ as U,cw as $,cv as R,cx as Y,a7 as W,bD as Z}from"./index-CEN6Mloe.js";import{D as E}from"./index-EDjyQfko.js";import{S as q}from"./index-hFT6F5Gr.js";import{V as X}from"./VerticalAlignBottomOutlined-s50zueXj.js";function I(){var e=c.useContext(g);return e}function L(e){e===void 0&&(e=g);var a=e===g?I:function(){return c.useContext(e)};return function(){var t=a(),l=t.store;return l}}var J=L();function P(e){e===void 0&&(e=g);var a=e===g?J:L(e);return function(){var t=a();return t.dispatch}}var m=P(),ee=function(a,r){return a===r};function te(e,a,r,t){var l=c.useReducer(function(x){return x+1},0),u=l[1],o=c.useMemo(function(){return A(r,t)},[r,t]),n=c.useRef(),i=c.useRef(),p=c.useRef(),d=c.useRef(),j=r.getState(),y;try{if(e!==i.current||j!==p.current||n.current){var F=e(j);d.current===void 0||!a(F,d.current)?y=F:y=d.current}else y=d.current}catch(x){throw n.current&&(x.message+=`
The error may be correlated with this previous error:
`+n.current.stack+`

`),x}return M(function(){i.current=e,p.current=j,d.current=y,n.current=void 0}),M(function(){function x(){try{var C=r.getState();if(C===p.current)return;var T=i.current(C);if(a(T,d.current))return;d.current=T,p.current=C}catch(V){n.current=V}u()}return o.onStateChange=x,o.trySubscribe(),x(),function(){return o.tryUnsubscribe()}},[r,o]),y}function se(e){e===void 0&&(e=g);var a=e===g?I:function(){return c.useContext(e)};return function(t,l){l===void 0&&(l=ee);var u=a(),o=u.store,n=u.subscription,i=te(t,l,o,n);return c.useDebugValue(i),i}}var _=se();const w="(max-width: 1062px)",Se="(min-width: 1200px)",ae=[{label:"Tháng 1",value:"1"},{label:"Tháng 2",value:"2"},{label:"Tháng 3",value:"3"},{label:"Tháng 4",value:"4"},{label:"Tháng 5",value:"5"},{label:"Tháng 6",value:"6"},{label:"Tháng 7",value:"7"},{label:"Tháng 8",value:"8"},{label:"Tháng 9",value:"9"},{label:"Tháng 10",value:"10"},{label:"Tháng 11",value:"11"},{label:"Tháng 12",value:"12"}],we=20,b=e=>{const[a,r]=c.useState(!1);return c.useEffect(()=>{const t=window.matchMedia(e);t.matches!==a&&r(t.matches);const l=()=>r(t.matches);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[a,e]),a},re=(f().month()+1).toString(),ne=({setPage:e})=>{const a=m(),r=b(`${w}`);return s.jsxs(h,{className:`min-w-[130px] ${r?"w-full":" w-[20%]"}`,children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Tháng"}),s.jsx(v,{className:"!bg-[#F4F6F8] ",defaultValue:re,options:ae,onChange:t=>{a(H(t)),e&&e(1)}})]})},le=()=>{const e=m(),[a,r]=c.useState([]);return c.useEffect(()=>{(async()=>{let t=await S.get("/api/method/mbw_dms.api.router.get_team_sale");r(z({data:t.result.map(l=>({title:l.name,value:l.name,...l})),keyValue:"value",parentField:"parent_sales_person"}))})()},[]),s.jsxs(h,{className:"min-w-[130px]  w-[20%]",children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Nhóm bán hàng"}),s.jsx(K,{placeholder:"Tất cả nhóm bán hàng",allowClear:!0,showSearch:!0,treeData:a,onChange:t=>{e(G(t))},dropdownStyle:{maxHeight:400,overflow:"auto",minWidth:350}})]})},oe=()=>{const e=m(),a=t=>{e(Q(t?.$y.toString()))},r=b(`${w}`);return s.jsxs(h,{className:`min-w-[130px] ${r?"w-full":" w-[20%]"}`,children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Năm"}),s.jsx(E,{className:"!bg-[#F4F6F8] w-full rounded-lg h-7",onChange:a,placeholder:"Chọn năm",picker:"year",allowClear:!1,defaultValue:f().startOf("year")})]})},ce=({setPage:e,matchMedia:a})=>{const[r,t]=c.useState([]),[l,u]=c.useState(""),o=m(),{sales_team:n}=_(i=>i.group);return c.useEffect(()=>{(async()=>{let i=await S.get("/api/method/mbw_dms.api.router.get_sale_person",{params:{team_sale:n,key_search:l}}),{message:p}=i;t(p.map(d=>({value:d.employee_code,label:d.employee_name||d.employee_code})))})()},[l,n]),s.jsxs(h,{className:`min-w-[130px] ${a?"w-full":"w-[20%]"}`,children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Nhân viên"}),s.jsx(v,{filterOption:!0,allowClear:!0,showSearch:!0,placeholder:"Tất cả nhân viên",onSearch:i=>{u(i)},options:r,onSelect:i=>{o(k(i)),e(1)},onClear:()=>{o(k(""))}})]})},O=f().startOf("month"),ie=()=>{const e=m();_(t=>t.date);const a=b(`${w}`),r=t=>{if(t==null)e(N(t));else{let l=Date.parse(t.$d)/1e3;e(N(l))}};return c.useEffect(()=>{e(N(Date.parse(O.$d)/1e3))},[]),s.jsxs(h,{className:`min-w-[130px]  ${a?"w-full":" w-[20%]"}`,children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Từ ngày"}),s.jsx(E,{format:"DD-MM-YYYY",className:"!bg-[#F4F6F8] w-full rounded-lg h-7",placeholder:"Từ ngày",onChange:r,defaultValue:O,allowClear:!1})]})},B=f().endOf("month"),ue=()=>{const e=m(),{startDate:a,endDate:r}=_(n=>n.date),t=n=>{if(a){const i=f.unix(a).month();return n&&n.month()!==i}},l=n=>{if(n==null)e(D(n));else if(a&&n&&n.isBefore(f.unix(a),"day"))U.error("Đến ngày phải lớn hơn hoặc bằng Từ ngày");else{let i=Date.parse(n.$d)/1e3;e(D(i))}},u=b(`${w}`),o=f(r*1e3);return c.useEffect(()=>{e(D(Date.parse(B.$d)/1e3))},[]),s.jsxs(h,{className:`min-w-[130px] ${u?"w-full":" w-[20%]"}`,children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Đến ngày"}),s.jsx(E,{format:"DD-MM-YYYY",className:"!bg-[#F4F6F8] w-full rounded-lg h-7",onChange:l,placeholder:"Đến ngày",defaultValue:B,disabledDate:t,value:o,allowClear:!1})]})},pe=({setPage:e})=>{const[a,r]=c.useState([]),[t,l]=c.useState(""),u=m();return c.useEffect(()=>{(async()=>{let o=await S.get("/api/method/frappe.desk.search.search_link",{params:{txt:t,doctype:"Supplier",ignore_user_permissions:0,query:""}}),{message:n}=o;r(n.map(i=>({value:i?.value,label:i.description.split(",")[0].trim()})))})()},[t]),s.jsxs(h,{className:"min-w-[130px] w-[20%]",children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Nhà Cung cấp"}),s.jsx(v,{filterOption:!1,allowClear:!0,showSearch:!0,placeholder:"Tất cả nhà cung cấp",onSearch:o=>{l&&l(o)},options:a,onSelect:o=>{u($(o)),e(1)},onClear:()=>{u($(""))}})]})},de=({setPage:e,matchMedia:a})=>{const[r,t]=c.useState([]),[l,u]=c.useState(""),o=m();return c.useEffect(()=>{(async()=>{let n=await S.get("/api/method/frappe.desk.search.search_link",{params:{txt:l,doctype:"Brand",ignore_user_permissions:0,query:""}}),{message:i}=n;t(i.map(p=>({value:p?.value,description:p?.description})))})()},[l]),s.jsxs(h,{className:`min-w-[130px] ${a?"w-full":"w-[20%]"}`,children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Nhãn hiệu"}),s.jsx(v,{filterOption:!1,allowClear:!0,showSearch:!0,placeholder:"Tất cả nhãn hiệu",onSearch:n=>{u(n)},options:r,onSelect:n=>{o(R(n)),e(1)},onClear:()=>{o(R(""))}})]})},he=({setPage:e})=>{const[a,r]=c.useState([]),[t,l]=c.useState(""),u=m();return c.useEffect(()=>{(async()=>{let o=await S.get("/api/method/frappe.desk.search.search_link",{params:{txt:t,doctype:"DMS Industry",ignore_user_permissions:0,query:""}}),{message:n}=o;r(n.map(i=>({value:i?.value,description:i?.description})))})()},[t]),s.jsxs(h,{className:"min-w-[130px] w-[20%]",children:[s.jsx("label",{className:"text-xs font-normal leading-[21px] pl-1 ",children:"Ngành hàng"}),s.jsx(v,{filterOption:!1,allowClear:!0,showSearch:!0,placeholder:"Tất cả ngành hàng",onSearch:o=>{l(o)},options:a,onSelect:o=>{u(Y(o)),e(1)},onClear:()=>{u(Y(""))}})]})},me=({setPage:e,inputMonth:a,inputYear:r,inputFromDate:t,inputToDate:l,inputSaleGroup:u,inputEmployee:o,inputSupplier:n,inputIndustry:i,inpitBrand:p})=>s.jsxs(s.Fragment,{children:[a&&s.jsx(ne,{setPage:e}),r&&s.jsx(oe,{}),t&&s.jsx(ie,{}),l&&s.jsx(ue,{}),u&&s.jsx(le,{}),o&&s.jsx(ce,{setPage:e}),n&&s.jsx(pe,{setPage:e}),i&&s.jsx(he,{setPage:e}),p&&s.jsx(de,{setPage:e})]}),be=me,xe=({setRefresh:e,title:a,params:r,file_name:t})=>{const[l,u]=c.useState(!1);return s.jsx(W,{title:a,buttons:[{icon:s.jsx(q,{className:"text-xl size-4 mb-1 mr-[2px]"}),className:"flex mr-2 h-7 mt-6",action:()=>{e(o=>!o)}},{disabled:l,label:"Xuất dữ liệu",type:"primary",icon:s.jsx(X,{className:"text-xl"}),size:"18px",className:"flex items-center h-7 mt-6",action:Z.bind(null,{url:"/api/method/mbw_dms.api.exports.export_excel.export_excel",params:r,file_name:t},u)}]})},je=xe;export{be as F,ne as M,we as P,je as R,ue as T,oe as Y,b as a,Se as b,m as c,ie as d,w as m,_ as u};
