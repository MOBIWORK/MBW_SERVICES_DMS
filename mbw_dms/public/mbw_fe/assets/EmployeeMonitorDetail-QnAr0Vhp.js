import{ad as G,ag as Ne,ah as Le,ax as ye,aj as be,bH as we,ak as Pe,ai as Re,h as P,W as d,av as We,aK as Me,bw as _e,bk as Ae,ap as he,ac as fe,L as e,bC as Ve,R as ve,P as q,af as ie,Q as me,a3 as ze,bI as qe,aT as ne,a1 as pe,a0 as Ge,bJ as Xe,a7 as Ze,b3 as Ye,a8 as Ue}from"./index-CDPkkl-i.js";import{D as Je}from"./date-picker-6wqqxS_h.js";import{a as ge,T as Ce}from"./index-Rg92wpq9.js";import{H as Ke}from"./header-page-iGtCYyM6.js";import{W as re,c as Qe,d as _,r as et,l as tt,p as U,f as je,s as it,g as $e,e as nt,b as rt}from"./WrapperCard-VNpvcWcv.js";import"./index-UxmYvgBE.js";const Ie=["wrap","nowrap","wrap-reverse"],Fe=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],Ee=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],st=(t,n)=>{const s={};return Ie.forEach(i=>{s[`${t}-wrap-${i}`]=n.wrap===i}),s},at=(t,n)=>{const s={};return Ee.forEach(i=>{s[`${t}-align-${i}`]=n.align===i}),s[`${t}-align-stretch`]=!n.align&&!!n.vertical,s},ot=(t,n)=>{const s={};return Fe.forEach(i=>{s[`${t}-justify-${i}`]=n.justify===i}),s};function lt(t,n){return G(Object.assign(Object.assign(Object.assign({},st(t,n)),at(t,n)),ot(t,n)))}const ct=t=>{const{componentCls:n}=t;return{[n]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},dt=t=>{const{componentCls:n}=t;return{[n]:{"&-gap-small":{gap:t.flexGapSM},"&-gap-middle":{gap:t.flexGap},"&-gap-large":{gap:t.flexGapLG}}}},mt=t=>{const{componentCls:n}=t,s={};return Ie.forEach(i=>{s[`${n}-wrap-${i}`]={flexWrap:i}}),s},pt=t=>{const{componentCls:n}=t,s={};return Ee.forEach(i=>{s[`${n}-align-${i}`]={alignItems:i}}),s},gt=t=>{const{componentCls:n}=t,s={};return Fe.forEach(i=>{s[`${n}-justify-${i}`]={justifyContent:i}}),s},ut=()=>({}),ht=Ne("Flex",t=>{const{paddingXS:n,padding:s,paddingLG:i}=t,o=Le(t,{flexGapSM:n,flexGap:s,flexGapLG:i});return[ct(o),dt(o),mt(o),pt(o),gt(o)]},ut,{resetStyle:!1});var ft=function(t,n){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(s[i[o]]=t[i[o]]);return s};const xt=ye.forwardRef((t,n)=>{const{prefixCls:s,rootClassName:i,className:o,style:k,flex:g,gap:S,children:y,vertical:v=!1,component:M="div"}=t,c=ft(t,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:w,direction:h,getPrefixCls:u}=ye.useContext(be),r=u("flex",s),[H,N,x]=ht(r),T=v??w?.vertical,p=G(o,i,w?.className,r,N,x,lt(r,t),{[`${r}-rtl`]:h==="rtl",[`${r}-gap-${S}`]:we(S),[`${r}-vertical`]:T}),l=Object.assign(Object.assign({},w?.style),k);return g&&(l.flex=g),S&&!we(S)&&(l.gap=S),H(ye.createElement(M,Object.assign({ref:n,className:p,style:l},Pe(c,["justify","wrap","align"])),y))}),ke=xt,yt=t=>{const{componentCls:n,calc:s}=t;return{[n]:Object.assign(Object.assign({},Re(t)),{margin:0,padding:0,listStyle:"none",[`${n}-item`]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:s(s(t.itemHeadSize).sub(t.tailWidth)).div(2).equal(),height:`calc(100% - ${P(t.itemHeadSize)})`,borderInlineStart:`${P(t.tailWidth)} ${t.lineType} ${t.tailColor}`},"&-pending":{[`${n}-item-head`]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},[`${n}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:`${P(t.dotBorderWidth)} ${t.lineType} transparent`,borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:s(t.itemHeadSize).div(2).equal(),insetInlineStart:s(t.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:s(s(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.lineWidth).equal(),marginInlineStart:s(t.margin).add(t.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${n}-item-tail`]:{display:"none"},[`> ${n}-item-content`]:{minHeight:s(t.controlHeightLG).mul(1.2).equal()}}},[`&${n}-alternate,
        &${n}-right,
        &${n}-label`]:{[`${n}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:s(t.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:s(t.tailWidth).div(2).equal()}},"&-left":{[`${n}-item-content`]:{insetInlineStart:`calc(50% - ${P(t.marginXXS)})`,width:`calc(50% - ${P(t.marginSM)})`,textAlign:"start"}},"&-right":{[`${n}-item-content`]:{width:`calc(50% - ${P(t.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${n}-right`]:{[`${n}-item-right`]:{[`${n}-item-tail,
            ${n}-item-head,
            ${n}-item-head-custom`]:{insetInlineStart:`calc(100% - ${P(s(s(t.itemHeadSize).add(t.tailWidth)).div(2).equal())})`},[`${n}-item-content`]:{width:`calc(100% - ${P(s(t.itemHeadSize).add(t.marginXS).equal())})`}}},[`&${n}-pending
        ${n}-item-last
        ${n}-item-tail`]:{display:"block",height:`calc(100% - ${P(t.margin)})`,borderInlineStart:`${P(t.tailWidth)} dotted ${t.tailColor}`},[`&${n}-reverse
        ${n}-item-last
        ${n}-item-tail`]:{display:"none"},[`&${n}-reverse ${n}-item-pending`]:{[`${n}-item-tail`]:{insetBlockStart:t.margin,display:"block",height:`calc(100% - ${P(t.margin)})`,borderInlineStart:`${P(t.tailWidth)} dotted ${t.tailColor}`},[`${n}-item-content`]:{minHeight:s(t.controlHeightLG).mul(1.2).equal()}},[`&${n}-label`]:{[`${n}-item-label`]:{position:"absolute",insetBlockStart:s(s(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.tailWidth).equal(),width:`calc(50% - ${P(t.marginSM)})`,textAlign:"end"},[`${n}-item-right`]:{[`${n}-item-label`]:{insetInlineStart:`calc(50% + ${P(t.marginSM)})`,width:`calc(50% - ${P(t.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${n}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},vt=t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:t.lineWidth*3,dotBg:t.colorBgContainer,itemPaddingBottom:t.padding*1.25}),jt=Ne("Timeline",t=>{const n=Le(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2});return[yt(n)]},vt);var kt=function(t,n){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(s[i[o]]=t[i[o]]);return s};const bt=t=>{var{prefixCls:n,className:s,color:i="blue",dot:o,pending:k=!1,position:g,label:S,children:y}=t,v=kt(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:M}=d.useContext(be),c=M("timeline",n),w=G(`${c}-item`,{[`${c}-item-pending`]:k},s),h=/blue|red|green|gray/.test(i||"")?void 0:i,u=G(`${c}-item-head`,{[`${c}-item-head-custom`]:!!o,[`${c}-item-head-${i}`]:!h});return d.createElement("li",Object.assign({},v,{className:w}),S&&d.createElement("div",{className:`${c}-item-label`},S),d.createElement("div",{className:`${c}-item-tail`}),d.createElement("div",{className:u,style:{borderColor:h,color:h}},o),d.createElement("div",{className:`${c}-item-content`},y))},Be=bt;var Te=function(t,n){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(s[i[o]]=t[i[o]]);return s};const St=t=>{var{prefixCls:n,className:s,pending:i=!1,children:o,items:k,rootClassName:g,reverse:S=!1,direction:y,hashId:v,pendingDot:M,mode:c=""}=t,w=Te(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const h=(l,D)=>c==="alternate"?l==="right"?`${n}-item-right`:l==="left"?`${n}-item-left`:D%2===0?`${n}-item-left`:`${n}-item-right`:c==="left"?`${n}-item-left`:c==="right"?`${n}-item-right`:l==="right"?`${n}-item-right`:"",u=We(k||[]),r=typeof i=="boolean"?null:i;i&&u.push({pending:!!i,dot:M||d.createElement(Me,null),children:r}),S&&u.reverse();const H=u.length,N=`${n}-item-last`,x=u.filter(l=>!!l).map((l,D)=>{var V;const J=D===H-2?N:"",K=D===H-1?N:"",{className:Q}=l,ee=Te(l,["className"]);return d.createElement(Be,Object.assign({},ee,{className:G([Q,!S&&i?J:K,h((V=l?.position)!==null&&V!==void 0?V:"",D)]),key:l?.key||D}))}),T=u.some(l=>!!l?.label),p=G(n,{[`${n}-pending`]:!!i,[`${n}-reverse`]:!!S,[`${n}-${c}`]:!!c&&!T,[`${n}-label`]:T,[`${n}-rtl`]:y==="rtl"},s,g,v);return d.createElement("ul",Object.assign({},w,{className:p}),x)},wt=St;function Ct(t,n){return t&&Array.isArray(t)?t:_e(n).map(s=>{var i,o;return Object.assign({children:(o=(i=s?.props)===null||i===void 0?void 0:i.children)!==null&&o!==void 0?o:""},s.props)})}var $t=function(t,n){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(s[i[o]]=t[i[o]]);return s};const He=t=>{const{getPrefixCls:n,direction:s,timeline:i}=d.useContext(be),{prefixCls:o,children:k,items:g,className:S,style:y}=t,v=$t(t,["prefixCls","children","items","className","style"]),M=n("timeline",o),c=Ae(M),[w,h,u]=jt(M,c),r=Ct(g,k);return w(d.createElement(wt,Object.assign({},v,{className:G(i?.className,S,u,c),style:Object.assign(Object.assign({},i?.style),y),prefixCls:M,direction:s,items:r,hashId:h})))};He.Item=Be;const Tt=He;var Nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"border",theme:"outlined"};const Lt=Nt;var Mt=function(n,s){return d.createElement(he,fe({},n,{ref:s,icon:Lt}))};const zt=d.forwardRef(Mt);var It={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const Ft=It;var Et=function(n,s){return d.createElement(he,fe({},n,{ref:s,icon:Ft}))};const Bt=d.forwardRef(Et);var Ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"};const Dt=Ht;var Ot=function(n,s){return d.createElement(he,fe({},n,{ref:s,icon:Dt}))};const Pt=d.forwardRef(Ot);var Rt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 552h63.6c4.4 0 8-3.6 8-8V288.7h528.6v72.6c0 1.9.6 3.7 1.8 5.2a8.3 8.3 0 0011.7 1.4L893 255.4c4.3-5 3.6-10.3 0-13.2L749.7 129.8a8.22 8.22 0 00-5.2-1.8c-4.6 0-8.4 3.8-8.4 8.4V209H199.7c-39.5 0-71.7 32.2-71.7 71.8V544c0 4.4 3.6 8 8 8zm752-80h-63.6c-4.4 0-8 3.6-8 8v255.3H287.8v-72.6c0-1.9-.6-3.7-1.8-5.2a8.3 8.3 0 00-11.7-1.4L131 768.6c-4.3 5-3.6 10.3 0 13.2l143.3 112.4c1.5 1.2 3.3 1.8 5.2 1.8 4.6 0 8.4-3.8 8.4-8.4V815h536.6c39.5 0 71.7-32.2 71.7-71.8V480c-.2-4.4-3.8-8-8.2-8z"}}]},name:"retweet",theme:"outlined"};const Wt=Rt;var _t=function(n,s){return d.createElement(he,fe({},n,{ref:s,icon:Wt}))};const At=d.forwardRef(_t),Vt=({size:t=16})=>e.jsx("svg",{width:t,height:t+12,viewBox:"0 0 16 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M14 27.3438C13.8125 27.3438 13.6406 27.3073 13.4844 27.2344C13.3281 27.1615 13.1875 27.0729 13.0625 26.9688L1.0625 14.9375C0.9375 14.8333 0.838542 14.6979 0.765625 14.5312C0.692708 14.3646 0.65625 14.1875 0.65625 14C0.65625 13.8125 0.692708 13.6406 0.765625 13.4844C0.838542 13.3281 0.9375 13.1875 1.0625 13.0625L13.0625 1.0625C13.1875 0.9375 13.3281 0.838541 13.4844 0.765625C13.6406 0.692709 13.8229 0.65625 14.0312 0.65625C14.3854 0.65625 14.6927 0.786459 14.9531 1.04688C15.2135 1.30729 15.3438 1.625 15.3438 2C15.3438 2.1875 15.3073 2.36458 15.2344 2.53125C15.1615 2.69792 15.0625 2.83333 14.9375 2.9375L3.875 14L14.9375 25.0625C15.0625 25.1875 15.1615 25.3333 15.2344 25.5C15.3073 25.6667 15.3438 25.8333 15.3438 26C15.3438 26.375 15.2135 26.6927 14.9531 26.9531C14.6927 27.2135 14.375 27.3438 14 27.3438Z",fill:"#ABABAB"})});function qt(){return e.jsx(e.Fragment,{children:e.jsx("div",{style:{height:"36px",width:"36px",borderRadius:"32px",border:"1px solid #DFE3E8",gap:"8px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"20px",height:"20px",backgroundSize:"Cover"},className:"icon_starting"})})})}function Gt({data:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{style:{color:"#212B36",fontWeight:500,fontSize:"15px",lineHeight:"21px",marginLeft:"5px"},children:"Bắt đầu"})}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_clock_default"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.time_start})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_marker"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.address})]})]})}function Xt(){return e.jsx(e.Fragment,{children:e.jsx("div",{style:{height:"36px",width:"36px",borderRadius:"32px",border:"1px solid #DFE3E8",gap:"8px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"20px",height:"20px",backgroundSize:"Cover"},className:"icon_ending"})})})}function Zt({data:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{style:{color:"#212B36",fontWeight:500,fontSize:"15px",lineHeight:"21px",marginLeft:"5px"},children:"Kết thúc"})}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_clock_default"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.time_end})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_marker"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.address})]})]})}function Yt(){return e.jsx(e.Fragment,{children:e.jsx("div",{style:{height:"36px",width:"36px",borderRadius:"32px",border:"1px solid #DFE3E8",gap:"8px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"20px",height:"20px",backgroundSize:"Cover"},className:"icon_checking"})})})}function Ut({data:t}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{style:{color:"#212B36",fontWeight:500,fontSize:"15px",lineHeight:"21px",marginLeft:"5px"},children:"Viếng thăm"}),e.jsx("div",{className:"mx-3 h-2 w-2 rounded-full bg-black"}),e.jsx("div",{style:{color:"#212B36",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.total_time})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_clock_default"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.time_checking})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_user"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.retail_name})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_marker"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.address})]})]})}function Jt(){return e.jsx(e.Fragment,{children:e.jsx("div",{style:{height:"36px",width:"36px",borderRadius:"32px",border:"1px solid #DFE3E8",gap:"8px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"20px",height:"20px",backgroundSize:"Cover"},className:"icon_distance"})})})}function Kt({data:t}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{style:{color:"#212B36",fontWeight:500,fontSize:"15px",lineHeight:"21px",marginLeft:"5px"},children:"Di chuyển"}),e.jsx("div",{className:"mx-3 h-2 w-2 rounded-full bg-black"}),e.jsx("div",{style:{color:"#212B36",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.total_time})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_clock_default"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.time_moving})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"18px",height:"20px",backgroundSize:"Cover",color:"#1877F2"},className:"icon_marker_blue"})}),e.jsxs("div",{style:{color:"#1877F2",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:[t.total_distance," Trip"]})]})]})}function Qt(){return e.jsx(e.Fragment,{children:e.jsx("div",{style:{height:"36px",width:"36px",borderRadius:"32px",border:"1px solid #DFE3E8",gap:"8px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"20px",height:"20px",backgroundSize:"Cover"},className:"icon_parking"})})})}function ei({data:t}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{style:{color:"#212B36",fontWeight:500,fontSize:"15px",lineHeight:"21px",marginLeft:"5px"},children:"Dừng"}),e.jsx("div",{className:"mx-3 h-2 w-2 rounded-full bg-black"}),e.jsx("div",{style:{color:"#212B36",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.total_time})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_clock_default"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.time_stop})]}),e.jsxs("div",{className:"flex",style:{marginTop:"5px"},children:[e.jsx("div",{style:{height:"20px",width:"20px",marginLeft:"5px",marginRight:"5px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"15px",height:"18px",backgroundSize:"Cover"},className:"icon_marker"})}),e.jsx("div",{style:{color:"#637381",fontWeight:400,fontSize:"14px",lineHeight:"21px"},children:t.address})]})]})}function ti({options:t}){const[n,s]=d.useState([]),[i,o]=d.useState({summary:null,details:[]}),[k,g]=d.useState(!0);d.useEffect(()=>{g(!0)},[t]),d.useEffect(()=>{let h=[];if(i.details!=null)for(let u=0;u<i.details.length;u++){let r=i.details[u];r.type=="start"?h.push({dot:e.jsx(qt,{}),children:e.jsx(Gt,{data:{time_start:w(r.timestamp),address:r.address}})}):r.type=="checkin"?h.push({dot:e.jsx(Yt,{}),children:e.jsx(Ut,{data:{time_checking:`${w(r.startTime)} - ${w(r.endTime)}`,retail_name:r.storeName,address:r.address,total_time:`${y(r.startTime,r.endTime)}`}})}):r.type=="move"?h.push({dot:e.jsx(Jt,{}),children:e.jsx(Kt,{data:{time_moving:`${w(r.startTime)} - ${w(r.endTime)}`,total_distance:`${v(r.distance)}`,total_time:`${y(r.startTime,r.endTime)}`}})}):r.type=="stop"?h.push({dot:e.jsx(Qt,{}),children:e.jsx(ei,{data:{time_stop:`${w(r.startTime)} - ${w(r.endTime)}`,address:r.address,total_time:`${y(r.startTime,r.endTime)}`}})}):r.type=="end"&&h.push({dot:e.jsx(Xt,{}),children:e.jsx(Zt,{data:{time_end:`${w(r.timestamp)}`,address:r.address}})})}s(h)},[i]);const S=h=>{h!=null?o(h):o({summary:null,details:[]}),g(!1)},y=(h,u)=>{const r=new Date(h),N=new Date(u)-r;if(N<6e4)return`${Math.round(N/1e3)} giây`;if(N>=6e4&&N<6e4*60)return`${Math.round(N/6e4)} phút`;{const x=Math.floor(N/36e5),T=Math.floor(N%(1e3*60*60)/(1e3*60));return`${x} giờ ${T} phút`}},v=h=>h<1e3?`${Math.round(h)} m`:`${Math.round(h/1e3)} km`,M=h=>h<60?`${Math.round(h)} giây`:h>=60&&h<3600?`${Math.round(h/60)} phút`:`${Math.round(h/3600)} giờ`,c=h=>Math.round(h*3.6),w=h=>{var u=new Date(h);return u.setUTCHours(u.getUTCHours()+7),`${u.getUTCHours()}:${u.getUTCMinutes()}`};return e.jsxs(e.Fragment,{children:[k&&e.jsx("div",{style:{position:"fixed",width:"100%",height:"85%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Ve,{indicator:e.jsx(Me,{style:{fontSize:30,color:"#fff"},spin:!0})})}),e.jsxs(ve,{gutter:20,children:[e.jsx(q,{span:4,className:"card-container",children:e.jsx(re,{children:e.jsx("div",{className:"wrap-card-container",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center",style:{width:"64px",height:"64px",backgroundColor:"#8E33FF1F",gap:"8px",borderRadius:"15px"},children:e.jsx("div",{style:{width:"44px",height:"44px",backgroundSize:"Cover"},className:"icon_distance"})}),e.jsxs("div",{style:{marginLeft:"10px"},children:[e.jsx("div",{style:{opacity:"70%",color:"#212B36",fontSize:"14px",fontWeight:500},children:"Quãng đường di chuyển"}),i.summary!=null?e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:i.summary&&v(i.summary.move.distance)}):e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:"0 m"})]})]})})})}),e.jsx(q,{span:4,className:"card-container",children:e.jsx(re,{children:e.jsx("div",{className:"wrap-card-container",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center",style:{width:"64px",height:"64px",backgroundColor:"#00B8D91F",gap:"8px",borderRadius:"15px"},children:e.jsx("div",{style:{width:"44px",height:"44px",backgroundSize:"Cover"},className:"icon_clock"})}),e.jsxs("div",{style:{marginLeft:"10px"},children:[e.jsx("div",{style:{opacity:"70%",color:"#212B36",fontSize:"14px",fontWeight:500},children:"Thời gian di chuyển"}),i.summary!=null?e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:i.summary&&M(i.summary.move.totalTime)}):e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:"0 giây"})]})]})})})}),e.jsx(q,{span:4,className:"card-container",children:e.jsx(re,{children:e.jsx("div",{className:"wrap-card-container",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center",style:{width:"64px",height:"64px",backgroundColor:"#FFAB001F",gap:"8px",borderRadius:"15px"},children:e.jsx("div",{style:{width:"44px",height:"30px",backgroundSize:"contain"},className:"icon_speeding"})}),e.jsxs("div",{style:{marginLeft:"10px"},children:[e.jsx("div",{style:{opacity:"70%",color:"#212B36",fontSize:"14px",fontWeight:500},children:"Tốc độ trung bình"}),i.summary!=null?e.jsxs("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:[i.summary&&c(i.summary.move.avgSpeed)," km/h"]}):e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:"0 km/h"})]})]})})})}),e.jsx(q,{span:6,className:"card-container",children:e.jsx(re,{children:e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"flex items-center justify-center",style:{width:"64px",height:"64px",backgroundColor:"#1877F21F",gap:"8px",borderRadius:"15px"},children:e.jsx("div",{style:{width:"44px",height:"44px",backgroundSize:"Cover"},className:"icon_parking"})}),e.jsxs("div",{style:{marginLeft:"10px",width:"100%"},className:"flex items-center",children:[e.jsxs("div",{style:{marginRight:"40px"},children:[e.jsx("div",{style:{opacity:"70%",color:"#212B36",fontSize:"14px",fontWeight:500},children:"Số lần dừng"}),e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:i.summary&&i.summary.stop.count?i.summary.stop.count:0})]}),e.jsx("div",{style:{border:"1px solid #D9D9D9",height:"100%"}}),e.jsxs("div",{style:{marginLeft:"25px"},children:[e.jsx("div",{style:{opacity:"70%",color:"#212B36",fontSize:"14px",fontWeight:500},children:"Thời gian dừng"}),e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:i.summary&&M(i.summary.stop.totalTime)?M(i.summary.stop.totalTime):e.jsx("span",{children:"0 giây"})})]})]})]})})}),e.jsx(q,{span:6,className:"card-container",children:e.jsx(re,{children:e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"flex items-center justify-center",style:{width:"64px",height:"64px",backgroundColor:"#FF56301F",gap:"8px",borderRadius:"15px"},children:e.jsx("div",{style:{width:"44px",height:"44px",backgroundSize:"Cover"},className:"icon_checking"})}),e.jsxs("div",{style:{marginLeft:"10px",width:"100%"},className:"flex items-center ",children:[e.jsxs("div",{style:{marginRight:"13px"},children:[e.jsx("div",{style:{opacity:"70%",color:"#212B36",fontSize:"14px",fontWeight:500},children:"Số lần viếng thăm"}),e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:i.summary&&i.summary.checkin.count?i.summary.checkin.count:0})]}),e.jsx("div",{style:{border:"1px solid #D9D9D9",height:"100%"}}),e.jsxs("div",{style:{marginLeft:"25px"},children:[e.jsx("div",{style:{opacity:"70%",color:"#212B36",fontSize:"14px",fontWeight:500},children:"Thời gian viếng thăm"}),e.jsx("div",{style:{fontWeight:600,fontSize:"22px",color:"#212B36",marginTop:"8px"},children:i.summary&&M(i.summary.checkin.totalTime)?M(i.summary.checkin.totalTime):e.jsx("span",{children:"0 giây"})})]})]})]})})})]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(ve,{gutter:20,style:{marginLeft:"0px",marginRight:"0px"},children:e.jsx(Qe,{children:e.jsxs(ve,{children:[e.jsxs(q,{span:6,style:{paddingTop:"1rem",paddingLeft:"1rem"},children:[e.jsx("div",{style:{fontWeight:500,fontSize:"16px",color:"#000000",height:"45px"},children:"Quãng đường di chuyển"}),e.jsx("div",{style:{padding:"8px 16px 8px 16px",maxHeight:"530px",overflowY:"auto"},children:n.length>0?e.jsx(Tt,{mode:"left",items:n}):e.jsx("div",{children:"Chưa có lộ trình"})})]}),e.jsx(q,{span:18,style:{height:"615px"},children:e.jsx(ci,{options:t,onLoad:S})})]})})})})]})}function ii(){const[t,n]=d.useState(!1),s=()=>{n(!t)},i={iconStart:"https://files.ekgis.vn/sdks/tracking/assets/start-icon.png",iconEnd:"https://files.ekgis.vn/sdks/tracking/assets/end-icon.png",iconCheckin:"https://files.ekgis.vn/sdks/tracking/assets/check-icon.png",iconStop:"https://files.ekgis.vn/sdks/tracking/assets/stop-icon.png"};return e.jsxs("div",{id:"ekmapplf_tracking_legend",className:"ekmapplf_tracking-map-legend",children:[e.jsxs("div",{className:"ekmapplf_tracking-legend-title",onClick:s,children:[e.jsx("span",{className:`icon ${t?"ekmapplf_tracking-icon-square-minus":"ekmapplf_tracking-icon-square-plus"}`,style:{filter:"invert(100%) sepia(100%) saturate(0%) hue-rotate(187deg) brightness(105%) contrast(103%)"}}),e.jsx("span",{children:"Chú giải bản đồ"})]}),e.jsx("div",{className:`ekmapplf_tracking-legend-body ${t?"open":""}`,style:{maxHeight:t?"none":"0"},children:e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("span",{className:"ekmapplf_tracking-legend-icon",style:{backgroundImage:`url(${i.iconStart})`}}),"Vị trí bắt đầu"]}),e.jsxs("li",{children:[e.jsx("span",{className:"ekmapplf_tracking-legend-icon",style:{backgroundImage:`url(${i.iconEnd})`}}),"Vị trí kết thúc"]}),e.jsxs("li",{children:[e.jsx("span",{className:"ekmapplf_tracking-legend-icon",style:{backgroundImage:`url(${i.iconCheckin})`}}),"Vị trí khách hàng"]}),e.jsxs("li",{children:[e.jsx("span",{className:"ekmapplf_tracking-legend-icon",style:{backgroundImage:`url(${i.iconStop})`}}),"Vị trí điểm dừng"]})]})})]})}function se(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ni(t){return t.type==="Feature"?t.geometry:t}function De(t,n,s){s===void 0&&(s={});var i=se(t),o=se(n),k=_(o[1]-i[1]),g=_(o[0]-i[0]),S=_(i[1]),y=_(o[1]),v=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(S)*Math.cos(y);return et(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),s.units)}function ri(t,n,s,i){i===void 0&&(i={});var o=se(t),k=_(o[0]),g=_(o[1]),S=_(s),y=tt(n,i.units),v=Math.asin(Math.sin(g)*Math.cos(y)+Math.cos(g)*Math.sin(y)*Math.cos(S)),M=k+Math.atan2(Math.sin(S)*Math.sin(y)*Math.cos(g),Math.cos(y)-Math.sin(g)*Math.sin(v)),c=je(M),w=je(v);return U([c,w],i.properties)}function Se(t,n,s){if(s===void 0&&(s={}),s.final===!0)return si(t,n);var i=se(t),o=se(n),k=_(i[0]),g=_(o[0]),S=_(i[1]),y=_(o[1]),v=Math.sin(g-k)*Math.cos(y),M=Math.cos(S)*Math.sin(y)-Math.sin(S)*Math.cos(y)*Math.cos(g-k);return je(Math.atan2(v,M))}function si(t,n){var s=Se(n,t);return s=(s+180)%360,s}function ai(t,n,s){s===void 0&&(s={});for(var i=ni(t),o=i.coordinates,k=0,g=0;g<o.length&&!(n>=k&&g===o.length-1);g++)if(k>=n){var S=n-k;if(S){var y=Se(o[g],o[g-1])-180,v=ri(o[g],S,y,s);return v}else return U(o[g])}else k+=De(o[g],o[g+1],s);return U(o[o.length-1])}function oi(t,n){return n===void 0&&(n={}),it(t,function(s,i){var o=i.geometry.coordinates;return s+De(o[0],o[1],n)},0)}const li=({_map:t,segmentData:n,options:s,currentInfo:i})=>{const o=d.useRef(null),k=d.useRef(null),[g,S]=d.useState(s.animation.follow),[y,v]=d.useState(!1),[M,c]=d.useState(10),[w,h]=d.useState(!0),u=[{value:1,label:"x1"},{value:2,label:"x2"},{value:5,label:"x5"},{value:10,label:"x10"},{value:20,label:"x20"},{value:100,label:"x100"}],[r,H]=d.useState(!0),N=d.useRef(0),x=d.useRef(0),T=d.useRef([]),p=d.useRef(t);var l=p.current.getContainer();function D(j,I){x.current=j;const f=I[j];if(!f){if(w){x.current=0,T.current=[];try{p.current&&p.current.getSource("LocationHistory")&&p.current.getSource("LocationHistory").setData({type:"FeatureCollection",features:[]})}catch(F){v(!1),console.log(F)}n.length&&n[0].computed.time&&(k.current=setTimeout(D.bind(this),1e3,x.current,n))}else x.current=j-1,oe();i(I[x.current]);return}if(i(f),f.computed.time){let F=f.computed.time*1e3/M;if(f.computed.speed){let W=function(le){z||(L=f.loc1.loc,z=le);const xe=(le-z)/(Number(f.computed.time?.toString())*1e3/M);if(!(xe>1||!y)){var b=$e([f.loc1.loc,f.loc2.loc]),a=oi(b),$=ai(b,a*xe).geometry.coordinates,m=Se(U(L),U($));L[0]!==$[0]&&L[1]!==$[1]&&(N.current=m),L=$,T.current=T.current.concat([$]);try{p.current&&g&&p.current.panTo($,{animate:!0,essential:!0,curve:1.42,duration:100,pitch:60,bearing:N.current}),p.current&&p.current.getSource("locationMarker")&&p.current.getSource("locationMarker").setData({type:"FeatureCollection",features:[U($,{bearing:N.current})]}),p.current&&T.current.length>1&&p.current.getSource("LocationHistory")&&p.current.getSource("LocationHistory").setData({type:"FeatureCollection",features:[$e(T.current)]}),o.current=window.requestAnimationFrame(W)}catch(B){v(!1),console.log(B)}}};var z,L;o.current=window.requestAnimationFrame(W)}j++,T.current=I.slice(0,j).map(W=>W.loc1.loc),k.current=setTimeout(D.bind(this),F,j,I)}}d.useEffect(()=>{v(!1),o.current&&cancelAnimationFrame(o.current),k.current&&clearTimeout(k.current),x.current=0,n.length&&s.animation.animate&&v(!0)},[t,n,s]),d.useEffect(()=>{if(y){x.current===0&&(T.current=[],p.current.getSource("LocationHistory").setData({type:"FeatureCollection",features:[]})),n.length&&n[0].computed.time&&(k.current=setTimeout(D.bind(void 0),500,x.current,n));try{p.current.setPaintProperty(`ek-tracking-his-${l.id}-LineString`,"line-color","#b5b5b5"),p.current.setPaintProperty(`ek-tracking-his-${l.id}-LineString`,"line-opacity",.5),p.current.setLayoutProperty(`ek-tracking-his-${l.id}-LineString-arrow`,"visibility","none"),p.current.setLayoutProperty(`ek-tracking-his-${l.id}-LineString`,"visibility","none"),p.current.setLayoutProperty("locationMarker","visibility","visible"),p.current.setLayoutProperty("LocationHistory","visibility","visible")}catch(j){console.log(j)}}else{i(null),o.current&&cancelAnimationFrame(o.current);try{p.current.setPaintProperty(`ek-tracking-his-${l.id}-LineString`,"line-color",s.route.lineCorlor),p.current.setPaintProperty(`ek-tracking-his-${l.id}-LineString`,"line-opacity",s.route.lineOpacity),p.current.setLayoutProperty(`ek-tracking-his-${l.id}-LineString`,"visibility","visible"),p.current.setLayoutProperty(`ek-tracking-his-${l.id}-LineString-arrow`,"visibility","visible"),p.current.setLayoutProperty("locationMarker","visibility","none"),p.current.setLayoutProperty("LocationHistory","visibility","none")}catch(j){console.log(j)}}return()=>{o.current&&cancelAnimationFrame(o.current),k.current&&clearTimeout(k.current)}},[y,M,g,w]);const[V,J]=d.useState(s.animation.animate);d.useEffect(()=>{const j=()=>{H(document.visibilityState==="visible")};return document.addEventListener("visibilitychange",j),()=>{document.removeEventListener("visibilitychange",j)}},[]),d.useEffect(()=>{r?V===s.animation.animate?v(!0):v(!1):(J(y),v(!1))},[r]);const K=j=>{c(j)},Q=j=>{j.target.checked&&p.current.setZoom(17),S(!g)},ee=()=>{v(!0)},ae=()=>{v(!1)},oe=()=>{ae();try{p.current.getSource("locationMarker").setData({type:"FeatureCollection",features:[]}),p.current.getSource("LocationHistory").setData({type:"FeatureCollection",features:[]}),p.current.panTo(n[0].loc1.loc)}catch(j){console.log(j)}x.current=0},C=()=>{h(!w)};return e.jsx("div",{id:"ekmapplf_tracking_control",className:"ekmapplf_tracking-map-control",children:e.jsxs(ke,{gap:"small",align:"center",justify:"center",children:[e.jsx(ie,{title:"Play",children:e.jsx(me,{icon:e.jsx(Bt,{}),disabled:y,onClick:ee})}),e.jsx(ie,{title:"Pause",children:e.jsx(me,{icon:e.jsx(Pt,{}),disabled:!y,onClick:ae})}),e.jsx(ie,{title:"Stop",children:e.jsx(me,{icon:e.jsx(zt,{}),onClick:oe})}),e.jsx(ie,{title:"Replay",children:e.jsx(me,{type:w?"primary":"default",icon:e.jsx(At,{}),onClick:C})}),e.jsx(ie,{title:"Speed",children:e.jsx(ze,{defaultValue:M,style:{width:"75px"},onChange:K,options:u})}),e.jsx(qe,{onChange:Q,checked:g,children:"Theo dõi lộ trình"})]})})},ue=window.ekmapplf;function ci({options:t,onLoad:n}){const s=d.useRef(null),i=d.useState(null),[o,k]=d.useState({map:null,Data:[],options:null}),[g,S]=d.useState({date:null,time:null,speed:0}),y=d.useRef(null),v=d.useRef(null);d.useRef(null);const c=nt({},{center:[105,17],zoom:5,pageNumber:1,pageSize:5e3,icon:{track:"https://files.ekgis.vn/sdks/tracking/assets/custom_marker.png",navigation:"https://files.ekgis.vn/sdks/tracking/assets/arrow.png",checkin:"https://files.ekgis.vn/sdks/tracking/assets/check-icon.png",start:"https://files.ekgis.vn/sdks/tracking/assets/start-icon.png",end:"https://files.ekgis.vn/sdks/tracking/assets/end-icon.png",stop:"https://files.ekgis.vn/sdks/tracking/assets/stop-icon.png"},route:{visible:!0,lineCorlor:"#01579B",lineWidth:4,lineOpacity:.8},animation:{follow:!0,animate:!0}},t),w=()=>{try{let p=function(){var C={type:"FeatureCollection",features:[]};r.getSource("LocationHistory")?r.getSource("LocationHistory").setData(C):(r.addSource("LocationHistory",{type:"geojson",data:C}),r.addLayer({id:"LocationHistory",type:"line",source:"LocationHistory",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":c.route.lineCorlor,"line-width":c.route.lineWidth,"line-opacity":c.route.lineOpacity}}))};var u;i.current&&(i.animation_current&&cancelAnimationFrame(i.animation_current),i.timeout_current&&clearTimeout(i.timeout_current),i.current.remove()),i.current=new ne.Map({container:s.current,center:c.center,zoom:c.zoom,minZoom:1});var r=i.current;const l=r.getContainer();r.setPadding({top:100,bottom:100,left:100,right:100}),new ue.VectorBaseMap("OSM:Bright",c.apiKey).addTo(r);var H=new ue.control.BaseMap({id:"ekmapplf_tracking_ctrl_basemap_"+l.id,baseLayers:[{id:"OSM:Bright",title:"Bản đồ nền Sáng",thumbnail:"https://docs.ekgis.vn/assets/map-sang.png",width:"50px",height:"50px"},{id:"OSM:Standard",title:"Bản đồ nền Tiêu chuẩn",thumbnail:"https://docs.ekgis.vn/assets/map-chuan.png",width:"50px",height:"50px"},{id:"OSM:Gray",title:"Bản đồ nền Xám",thumbnail:"https://docs.ekgis.vn/assets/xam-map.png",width:"50px",height:"50px"},{id:"OSM:Night",title:"Bản đồ nền Đêm",thumbnail:"https://docs.ekgis.vn/assets/dem-map.png",width:"50px",height:"50px"},{id:"OSM:Dark",title:"Bản đồ nền Đêm xanh coban",thumbnail:"https://docs.ekgis.vn/assets/xanhcoban-map.png",width:"50px",height:"50px"},{id:"OSM:Pencil",title:"Bản đồ nền Bút chì",thumbnail:"https://docs.ekgis.vn/assets/chi-map.png",width:"50px",height:"50px"},{id:"OSM:Pirates",title:"Bản đồ nền Cổ điển",thumbnail:"https://docs.ekgis.vn/assets/dien-map.png",width:"50px",height:"50px"},{id:"OSM:Wood",title:"Bản đồ nền Gỗ",thumbnail:"https://docs.ekgis.vn/assets/go-map.png",width:"50px",height:"50px"}]});r.addControl(H,"bottom-left"),H.on("changeBaseLayer",async function(C){await new ue.VectorBaseMap(C.layer,c.apiKey).addTo(r),setTimeout(()=>{V(c.from_time,c.to_time,c.pageNumber,c.pageSize)},500)}),r.addControl(new ne.NavigationControl({visualizePitch:!0}),"bottom-right");var N=!1;r.getPitch()>0?N=!0:N=!1;var x="maplibregl-terrain2d-control",T="Hiển thị 2D";N||(x="maplibregl-terrain3d-control",T="Bản đồ 3D");let D=new ue.control.Button({className:"btn-ctl-group "+x,icon:"none",tooltip:T});D.on("click",C=>{N=!N,N?(C._div.className=C._div.className.replaceAll("maplibregl-terrain3d-control","maplibregl-terrain2d-control"),C._div.title="Hiển thị 2D"):(C._div.className=C._div.className.replaceAll("maplibregl-terrain2d-control","maplibregl-terrain3d-control"),C._div.title="Hiển thị 3D"),N?(r.easeTo({pitch:60}),r.setLayoutProperty("building-3d","visibility","visible")):(r.easeTo({pitch:0}),r.setLayoutProperty("building-3d","visibility","none"))}),r.addControl(D,"bottom-right"),r.addControl(new ne.FullscreenControl,"top-right"),r.on("load",()=>{try{if(!c.objectId||c.objectId===""||c.objectId==="null"||!c.from_time||c.from_time===""||c.from_time==="null"||!c.to_time||c.to_time===""||c.to_time==="null"){n(null);return}V(c.from_time,c.to_time,c.pageNumber,c.pageSize)}catch(C){console.error("Error:",C)}});const V=async(C,j,I,f)=>{let z=await J(C,j,I,f);await K(z);let L=await oe(z);z.length&&z[0].coordinates&&r.easeTo({center:z[0].coordinates,duration:100,zoom:16}),setTimeout(()=>k({map:i.current,Data:L,options:c}),200)},J=async(C,j,I,f)=>{let z=`https://api.ekgis.vn/v2/tracking/locationHistory/summary/${c.projectId}/${c.objectId}?api_key=${c.apiKey}&from_time=${C}&to_time=${j}`;const F=await(await fetch(z)).json();n(F);var W=F.details;return W||[]},K=async C=>{let j={type:"FeatureCollection",features:[]},I={type:"FeatureCollection",features:[]},f={type:"FeatureCollection",features:[]};if(C.forEach(L=>{const F={type:"Feature",properties:L.type!=="move"?L:{},geometry:L.type==="move"?L.route.geometry:{type:"Point",coordinates:L.coordinates}};j.features.push(F),L.type!=="move"&&(L.type==="checkin"?I.features.push(F):f.features.push(F))}),C.length){var z=rt(j);r.fitBounds(z,{padding:100,maxZoom:14,duration:1e3})}await Q(j),await ee(I,f),await p(),await ae()},Q=C=>{try{if(!r.getImage("icon_arrow")){var j='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.2901 9.1698L7.70015 3.0698C4.95015 1.6198 1.96015 4.5498 3.35015 7.3298L4.97015 10.5698C5.42015 11.4698 5.42015 12.5298 4.97015 13.4298L3.35015 16.6698C1.96015 19.4498 4.95015 22.3698 7.70015 20.9298L19.2901 14.8298C21.5701 13.6298 21.5701 10.3698 19.2901 9.1698Z" stroke="#292D32" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="#e50027"/></svg>',I=new Image;I.onload=function(){r.hasImage("icon_arrow")||r.addImage("icon_arrow",I)},I.src="data:image/svg+xml;charset=utf-8;base64,"+btoa(j)}r.getSource(`ek-tracking-his-${l.id}-line-source`)?r.getSource(`ek-tracking-his-${l.id}-line-source`).setData(C):(r.addSource(`ek-tracking-his-${l.id}-line-source`,{type:"geojson",data:C}),r.addLayer({id:`ek-tracking-his-${l.id}-LineString`,type:"line",source:`ek-tracking-his-${l.id}-line-source`,layout:{"line-join":"round","line-cap":"round",visibility:c.route.visible?"visible":"none"},paint:{"line-color":c.route.lineCorlor,"line-width":c.route.lineWidth,"line-opacity":c.route.lineOpacity},filter:["==","$type","LineString"]}),r.addLayer({id:`ek-tracking-his-${l.id}-LineString-arrow`,type:"symbol",source:`ek-tracking-his-${l.id}-line-source`,layout:{"symbol-placement":"line","icon-ignore-placement":!0,"symbol-spacing":100,"icon-image":"icon_arrow","icon-size":{stops:[[13,.35],[16,.5],[18,.625],[21,.75]]}}}))}catch(f){console.error("Error setLine:",f)}},ee=async(C,j)=>{try{let I=function(f){if(f||f!=""){const z=new Date(f);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Ho_Chi_Minh"}).format(z)}else return"Không có thông tin"};if(!r.getImage("marker-start")){const f=await r.loadImage(c.icon.start);r.addImage("marker-start",f.data)}if(!r.getImage("marker-end")){const f=await r.loadImage(c.icon.end);r.addImage("marker-end",f.data)}if(!r.getImage("marker-check")){const f=await r.loadImage(c.icon.checkin);r.addImage("marker-check",f.data)}if(!r.getImage("marker-stop")){const f=await r.loadImage(c.icon.stop);r.addImage("marker-stop",f.data)}r.getSource(`ek-tracking-his-${l.id}-track-source`)?r.getSource(`ek-tracking-his-${l.id}-track-source`).setData(j):(r.addSource(`ek-tracking-his-${l.id}-track-source`,{type:"geojson",data:j}),r.addLayer({id:`ek-tracking-his-${l.id}-track-point`,type:"symbol",source:`ek-tracking-his-${l.id}-track-source`,layout:{"icon-image":["match",["get","type"],"start","marker-start","end","marker-end","marker-stop"],"icon-overlap":"cooperative","icon-anchor":"bottom","icon-size":.7,"icon-offset":["case",["==",["get","type"],"start"],["literal",[20,5]],["==",["get","type"],"end"],["literal",[20,5]],["literal",[0,0]]]}}),r.on("mouseenter",`ek-tracking-his-${l.id}-track-point`,f=>{r.getCanvas().style.cursor="pointer";const z=[[f.point.x-5,f.point.y-5],[f.point.x+5,f.point.y+5]];let F=r.queryRenderedFeatures(z,{layers:[`ek-tracking-his-${l.id}-track-point`]})[0],W="default";F.properties.type!="stop"&&(W=F.properties.type),u&&u.remove(),u=new ne.Popup({className:"ek-tracking-his-popup",closeButton:!1,anchor:"bottom"}).setLngLat(F.geometry.coordinates).setHTML(`
                                        <div class="ek-tracking-his-popup-info">
                                            <span class="ek-tracking-his-popup-icon ekmapplf_tracking-icon-marker ekmapplf_tracking-icon-${W}-color"></span>
                                            <span>${F.properties.address}</span>
                                        </div>
                                        ${F.properties.type!=="stop"?`
                                            <div class="ek-tracking-his-popup-info">
                                                <span class="ek-tracking-his-popup-icon ekmapplf_tracking-icon-clock ekmapplf_tracking-icon-${W}-color"></span>
                                                <span>${I(F.properties.timestamp)}</span>
                                            </div>`:`
                                            <div class="ek-tracking-his-popup-info">
                                                <span class="ek-tracking-his-popup-icon">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                        <path d="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z" fill="#51CF66"/>
                                                    </svg>
                                                </span>
                                                <span>${I(F.properties.startTime)}</span>
                                            </div>
                                            ${F.properties.endTime!==""?`
                                                <div class="ek-tracking-his-popup-info">
                                                    <span class="ek-tracking-his-popup-icon">
                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                            <path d="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z" fill="#FF6B6B"/>
                                                        </svg>
                                                    </span>
                                                    <span>${I(F.properties.endTime)}</span>
                                                </div>`:""} `}
                                    `).setOffset([0,-20]).addTo(r)}),r.on("mouseleave",`ek-tracking-his-${l.id}-track-point`,()=>{r.getCanvas().style.cursor="",u&&u.remove()})),r.getSource(`ek-tracking-his-${l.id}-check-source`)?r.getSource(`ek-tracking-his-${l.id}-check-source`).setData(C):(r.addSource(`ek-tracking-his-${l.id}-check-source`,{type:"geojson",data:C,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),r.addLayer({id:`ek-tracking-his-${l.id}-check-clusters`,type:"circle",source:`ek-tracking-his-${l.id}-check-source`,paint:{"circle-color":["step",["get","point_count"],"#90D667",10,"#EFCD41",50,"#FF0012"],"circle-radius":12,"circle-stroke-color":["step",["get","point_count"],"#90D667",10,"#EFCD41",50,"#FF0012"],"circle-stroke-opacity":.7,"circle-stroke-width":5},filter:["all",["has","point_count"]]}),r.addLayer({id:`ek-tracking-his-${l.id}-check-cluster-count`,type:"symbol",source:`ek-tracking-his-${l.id}-check-source`,layout:{"text-field":"{point_count_abbreviated}","text-size":12},filter:["all",["has","point_count"]]}),r.addLayer({id:`ek-tracking-his-${l.id}-check-point`,type:"symbol",source:`ek-tracking-his-${l.id}-check-source`,layout:{"icon-image":"marker-check","icon-overlap":"always","icon-anchor":"bottom","icon-size":.7},filter:["all",["!has","point_count"]]}),r.on("mouseenter",`ek-tracking-his-${l.id}-check-clusters`,()=>{r.getCanvas().style.cursor="pointer"}),r.on("mouseleave",`ek-tracking-his-${l.id}-check-clusters`,()=>{r.getCanvas().style.cursor=""}),r.on("click",`ek-tracking-his-${l.id}-check-clusters`,async f=>{const z=r.queryRenderedFeatures(f.point,{layers:[`ek-tracking-his-${l.id}-check-clusters`]}),L=z[0].properties.cluster_id,F=await r.getSource(`ek-tracking-his-${l.id}-check-source`).getClusterExpansionZoom(L);r.easeTo({center:z[0].geometry.coordinates,zoom:F})}),r.on("mouseenter",`ek-tracking-his-${l.id}-check-point`,f=>{r.getCanvas().style.cursor="pointer";const z=[[f.point.x-5,f.point.y-5],[f.point.x+5,f.point.y+5]],L=r.queryRenderedFeatures(z,{layers:[`ek-tracking-his-${l.id}-check-point`]});u&&u.remove(),u=new ne.Popup({className:"ek-tracking-his-popup",closeButton:!1,anchor:"bottom"}).setLngLat(L[0].geometry.coordinates).setHTML(`<div class="ek-tracking-his-popup-info">
                                    <span class="ek-tracking-his-popup-icon ekmapplf_tracking-icon-marker ekmapplf_tracking-icon-default-color"></span>
                                    <span>${L[0].properties.address}</span>
                                </div>
                                <div class="ek-tracking-his-popup-info">
                                    <span class="ek-tracking-his-popup-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z" fill="#51CF66"/></svg>
                                    </span>
                                    <span>${I(L[0].properties.startTime)}</span>
                                </div>
                                ${L[0].properties.endTime!=""?`
                                    <div class="ek-tracking-his-popup-info">
                                        <span class="ek-tracking-his-popup-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z" fill="#FF6B6B"/></svg>
                                        </span>
                                        <span>${I(L[0].properties.endTime)}</span>
                                    </div>`:""}
                                `).setOffset([0,-20]).addTo(r)}),r.on("mouseleave",`ek-tracking-his-${l.id}-check-point`,()=>{r.getCanvas().style.cursor="",u&&u.remove()}))}catch(I){console.error("Error setPoints:",I)}};async function ae(){if(!r.getImage("marker-navigation")){const j=await r.loadImage(c.icon.navigation);r.addImage("marker-navigation",j.data)}var C={type:"FeatureCollection",features:[]};r.getSource("locationMarker")?r.getSource("locationMarker").setData(C):(r.addSource("locationMarker",{type:"geojson",data:C}),r.addLayer({id:"locationMarker",source:"locationMarker",type:"symbol",layout:{"icon-size":.7,"icon-offset":[0,-10],"icon-allow-overlap":!0,"icon-image":"marker-navigation","icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-overlap":"always","icon-ignore-placement":!0}}))}const oe=async C=>{var j,I,f,z={type:"FeatureCollection",features:[]};return C.forEach(b=>{if(b.type==="move")for(let a=0;a<b.route.locations.length;a++){let $=b.route.locations[a];if(new Date($.timestamp).getTime()>=new Date(b.startTime).getTime()&&new Date($.timestamp).getTime()<=new Date(b.endTime).getTime()){let m={type:"Feature",properties:{time:$.timestamp,ele:0,type:b.type},geometry:{type:"Point",coordinates:$.coordinates}};z.features.push(m)}}else if(b.type==="stop"||b.type==="checkin"){let a={type:"Feature",properties:{time:b.startTime,ele:0,type:b.type},geometry:{type:"Point",coordinates:b.coordinates}},$={type:"Feature",properties:{time:b.endTime,ele:0,type:b.type},geometry:{type:"Point",coordinates:b.coordinates}};z.features.push(a,$)}else{let a={type:"Feature",properties:{time:b.timestamp,ele:0,type:b.type},geometry:{type:"Point",coordinates:b.coordinates}};z.features.push(a)}}),j=L(z),I=F(j),I||[];function L(b){var a={segments:[],id:t.objectId};let $=[];a.segments.push($);for(let B=0;B<b.features.length;B++){var m=b.features[B];let O={loc:m.geometry.coordinates,time:new Date(m.properties.time).getTime(),ele:m.properties.ele};$.push(O)}return a}function F(b){const a=[];for(let ce=0;ce<b.segments.length;ce++){const te=b.segments[ce];for(let X=1;X<te.length;X++){const R=te[X-1],E=te[X];var $=R.time,m=E.time,B=new Date($),O=new Date(m);let Z=0;B.getDate()===O.getDate()&&B.getMonth()===O.getMonth()&&B.getFullYear()===O.getFullYear()&&(Z=W(R.loc[1],R.loc[0],E.loc[1],E.loc[0],R.ele,E.ele));const A={computed:{distance:Z},loc1:R,loc2:E};if(R.ele&&E.ele&&(A.computed.ele=E.ele),R.time&&E.time&&R.time!==E.time){const{speed:Y,time:de}=le(Z,R.time,E.time),Oe=Y;A.computed.speed=Y,A.computed.time=de,A.computed.filteredSpeed=Oe}R.temp&&E.temp&&(A.computed.temp=(R.temp+E.temp)/2),E.hr&&(A.computed.hr=E.hr),E.cad&&(A.computed.cad=E.cad),A.computed.speed&&a.push(A)}}return a}function W(b,a,$,m,B,O){const te=b*Math.PI/180,X=$*Math.PI/180,R=($-b)*Math.PI/180,E=(m-a)*Math.PI/180,Z=Math.sin(R/2)*Math.sin(R/2)+Math.cos(te)*Math.cos(X)*Math.sin(E/2)*Math.sin(E/2);let Y=6371e3*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)));if(B!==void 0&&O!==void 0){const de=O-B;de!==0&&(Y=Math.sqrt(Math.pow(Y,2)+Math.pow(de,2)))}return Y}function le(b,a,$){const m=$/1e3-a/1e3;return{speed:(b/m||0)*3.6,time:m}}function xe(b){let a={};a.distance=0;for(let $=0;$<b.length;$++){const m=b[$].computed;let B;if(b[$-1]&&(B=b[$-1].computed),a.distance+=m.distance,m.ele&&(a.maxEle=a.maxEle||0,a.minEle=a.minEle||0,a.gainEle=a.gainEle||0,a.totEle=a.totEle||0,m.ele>a.maxEle&&(a.maxEle=m.ele),m.ele<a.minEle&&(a.minEle=m.ele),B&&B.ele)){let O=m.ele-B.ele;O>0?(a.gainEle+=O,a.totEle+=O):O<0&&(a.totEle+=O)}m.time&&(a.totalTime=a.totalTime||0,a.totalTime+=m.time,m.speed&&m.filteredSpeed&&(a.avgSpeed=a.avgSpeed||0,a.avgMovingSpeed=a.avgMovingSpeed||0,a.movingTime=a.movingTime||0,a.maxSpeed=a.maxSpeed||0,a.avgSpeed+=m.speed*m.time,m.speed>5&&(a.avgMovingSpeed+=m.speed*m.time,a.movingTime+=m.time),m.filteredSpeed>a.maxSpeed&&m.filteredSpeed<200&&(a.maxSpeed=m.filteredSpeed,a.maxSpeedIndex=$)),m.temp&&(a.avgTemp=a.avgTemp||0,a.maxTemp=a.maxTemp||0,a.avgTemp+=m.temp*m.time,m.temp>a.maxTemp&&(a.maxTemp=m.temp)),m.hr&&(a.avgHr=a.avgHr||0,a.maxHr=a.maxHr||0,a.avgHr+=m.hr*m.time,m.hr>a.maxHr&&(a.maxHr=m.hr,a.maxHrIndex=$)),m.cad&&(a.avgCad=a.avgCad||0,a.maxCad=a.maxCad||0,a.avgCad+=m.cad*m.time,m.cad>a.maxCad&&(a.maxCad=m.cad,a.maxCadIndex=$)))}return a.totalTime&&(a.avgSpeed=a.avgSpeed||0,a.avgCad=a.avgCad||0,a.avgHr=a.avgHr||0,a.avgTemp=a.avgTemp||0,a.avgSpeed/=a.totalTime,a.avgCad/=a.totalTime,a.avgHr/=a.totalTime,a.avgTemp/=a.totalTime,a.totalTime/=3600),a.movingTime&&(a.avgMovingSpeed=a.avgMovingSpeed||0,a.avgMovingSpeed/=a.movingTime,a.movingTime/=3600),a}}}catch(p){console.error("Error initializing map:",p)}};d.useEffect(()=>(S({date:null,time:null,speed:0}),k({map:null,Data:[],options:null}),w(),()=>{y.current&&cancelAnimationFrame(y.current),v.current&&clearTimeout(v.current),i.current&&i.current.remove()}),[t]);const h=u=>{if(u){const r=new Date(u.loc1.time);r.setHours(r.getHours());const H=r.getDate(),N=r.getMonth()+1,x=r.getFullYear(),T=r.getHours(),p=r.getMinutes(),l=`${H}/${N}/${x}`,D=`${T.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`;S({date:l,time:D,speed:Math.ceil(u.computed.speed*10)/10})}else S({date:null,time:null,speed:0})};return e.jsx(e.Fragment,{children:e.jsxs("div",{ref:s,id:"ekmap-tracking-his-map",children:[o.map!=null&&e.jsx(li,{_map:o.map,segmentData:o.Data,options:o.options,currentInfo:h}),e.jsx(ii,{}),g.date!=null&&g.time!=null&&e.jsxs("div",{className:"ekmapplf_tracking-map-legend-his",children:[e.jsxs(ke,{vertical:"true",align:"center",justify:"center",wrap:"wrap",style:{width:"50%",fontWeight:600,textAlign:"center",borderRight:"1px solid"},children:[e.jsx("span",{style:{color:"rgb(132, 132, 132)"},children:g.date}),e.jsx("span",{style:{color:"rgb(68, 68, 68)"},children:g.time})]}),e.jsxs(ke,{vertical:"true",align:"center",justify:"center",wrap:"wrap",style:{width:"49%",fontWeight:600,textAlign:"center"},children:[e.jsx("span",{style:{color:"rgb(132, 132, 132)"},children:"Tốc độ"}),e.jsxs("span",{style:{color:"rgb(54, 153, 255)"},children:[g.speed," km/h"]})]})]})]})})}function di({employee:t}){const[n,s]=d.useState(new Date("03-29-2024")),[i,o]=d.useState(ge(new Date("03-29-2024").setHours(0,0,0).toString())),[k,g]=d.useState(ge(new Date("03-29-2024").setHours(24,0,0).toString())),[S,y]=d.useState(""),[v,M]=d.useState([]),[c,w]=d.useState(""),h=x=>{setTimeout(()=>{s(x),o(ge(Ce(x).today)),g(ge(Ce(x).nextday))},200)},[u,r]=d.useState({apiKey:"w1Dlh2wRon7mE6sL196TgvLS45fw02uon74pJ0rc",projectId:"",objectId:"",from_time:i,to_time:k}),H=async x=>{let T=await pe.get("/api/method/mbw_dms.api.user.get_list_employees");if(T.message=="Thành công"){let p=T.result.map(function(l){return{value:l.name,label:l.employee_name}});M(p)}},N=async(x,T)=>{r(p=>({...p,objectId:T.object_id})),y(`${T.label} - ${x}`)};return d.useEffect(()=>{(async()=>{if(t==null||t==""){const x=await pe.get("/api/method/mbw_dms.api.user.get_projectID");r(T=>({...T,projectId:x.result["Project ID"],objectId:""})),H(x.result["Project ID"]);return}try{const x=await pe.get("/api/method/mbw_dms.api.user.get_projectID");console.log(x),r(p=>({...p,projectId:x.result["Project ID"],objectId:t})),H(x.result["Project ID"]),console.log(u);const T=await pe.get(`/api/method/mbw_dms.api.user.get_employee_info_by_objid?object_id=${t}`);T.message=="Thành công"&&T.result.length>0&&(y(T.result[0].employee_name),w(T.result[0].name))}catch(x){Ge.error(x?.message||"Something was wrong!!!")}})()},[t]),d.useEffect(()=>{(async()=>r(x=>({...x,from_time:i,to_time:k})))()},[i,k]),e.jsxs(e.Fragment,{children:[e.jsx(Ke,{title:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Xe,{to:"/employee-monitor",children:[" ",e.jsx(Vt,{})]}),e.jsx("span",{className:"ml-4",children:S})]}),customButton:e.jsx("div",{className:"p-4 border border-solid border-transparent border-b-[#F5F5F5]",children:e.jsx(Je,{defaultValue:Ze(n),format:"DD-MM-YYYY",onChange:h})}),customSlect:e.jsx("div",{className:"py-4 border border-solid border-transparent border-b-[#F5F5F5]",children:e.jsx(ze,{defaultValue:c,style:{width:150},onChange:N,options:v})})}),e.jsx("div",{className:"border border-solid border-[#F5F5F5] rounded-lg",children:e.jsx("div",{id:"travel",className:"relative",children:u.projectId&&e.jsx(ti,{options:u})})})]})}function mi(){d.useState("list");const{employee_id:t}=Ye();return e.jsx(e.Fragment,{children:e.jsx(di,{employee:t})})}function yi(){return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{children:e.jsx("title",{children:" EmployeeMonitor Detail"})}),e.jsx(mi,{})]})}export{yi as default};
