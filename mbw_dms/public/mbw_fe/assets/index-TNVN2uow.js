var Ete=Object.defineProperty;var Tte=(t,n,o)=>n in t?Ete(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var Ef=(t,n,o)=>(Tte(t,typeof n!="symbol"?n+"":n,o),o);function uk(t,n){for(var o=0;o<n.length;o++){const s=n[o];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in t)){const m=Object.getOwnPropertyDescriptor(s,c);m&&Object.defineProperty(t,c,m.get?m:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const v of m.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function o(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(c){if(c.ep)return;c.ep=!0;const m=o(c);fetch(c.href,m)}})();var sI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function z3e(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var o=function s(){return this instanceof s?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};o.prototype=n.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var c=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(o,s,c.get?c:{enumerable:!0,get:function(){return t[s]}})}),o}var vj={exports:{}},lI={},_j={exports:{}},po={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb=Symbol.for("react.element"),Ite=Symbol.for("react.portal"),Mte=Symbol.for("react.fragment"),Pte=Symbol.for("react.strict_mode"),Ate=Symbol.for("react.profiler"),Rte=Symbol.for("react.provider"),kte=Symbol.for("react.context"),Ote=Symbol.for("react.forward_ref"),zte=Symbol.for("react.suspense"),Dte=Symbol.for("react.memo"),Lte=Symbol.for("react.lazy"),E$=Symbol.iterator;function $te(t){return t===null||typeof t!="object"?null:(t=E$&&t[E$]||t["@@iterator"],typeof t=="function"?t:null)}var xj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bj=Object.assign,wj={};function d0(t,n,o){this.props=t,this.context=n,this.refs=wj,this.updater=o||xj}d0.prototype.isReactComponent={};d0.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};d0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sj(){}Sj.prototype=d0.prototype;function hk(t,n,o){this.props=t,this.context=n,this.refs=wj,this.updater=o||xj}var dk=hk.prototype=new Sj;dk.constructor=hk;bj(dk,d0.prototype);dk.isPureReactComponent=!0;var T$=Array.isArray,Cj=Object.prototype.hasOwnProperty,fk={current:null},Ej={key:!0,ref:!0,__self:!0,__source:!0};function Tj(t,n,o){var s,c={},m=null,v=null;if(n!=null)for(s in n.ref!==void 0&&(v=n.ref),n.key!==void 0&&(m=""+n.key),n)Cj.call(n,s)&&!Ej.hasOwnProperty(s)&&(c[s]=n[s]);var d=arguments.length-2;if(d===1)c.children=o;else if(1<d){for(var C=Array(d),S=0;S<d;S++)C[S]=arguments[S+2];c.children=C}if(t&&t.defaultProps)for(s in d=t.defaultProps,d)c[s]===void 0&&(c[s]=d[s]);return{$$typeof:Jb,type:t,key:m,ref:v,props:c,_owner:fk.current}}function Bte(t,n){return{$$typeof:Jb,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function pk(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jb}function Fte(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(o){return n[o]})}var I$=/\/+/g;function I4(t,n){return typeof t=="object"&&t!==null&&t.key!=null?Fte(""+t.key):n.toString(36)}function SE(t,n,o,s,c){var m=typeof t;(m==="undefined"||m==="boolean")&&(t=null);var v=!1;if(t===null)v=!0;else switch(m){case"string":case"number":v=!0;break;case"object":switch(t.$$typeof){case Jb:case Ite:v=!0}}if(v)return v=t,c=c(v),t=s===""?"."+I4(v,0):s,T$(c)?(o="",t!=null&&(o=t.replace(I$,"$&/")+"/"),SE(c,n,o,"",function(S){return S})):c!=null&&(pk(c)&&(c=Bte(c,o+(!c.key||v&&v.key===c.key?"":(""+c.key).replace(I$,"$&/")+"/")+t)),n.push(c)),1;if(v=0,s=s===""?".":s+":",T$(t))for(var d=0;d<t.length;d++){m=t[d];var C=s+I4(m,d);v+=SE(m,n,o,C,c)}else if(C=$te(t),typeof C=="function")for(t=C.call(t),d=0;!(m=t.next()).done;)m=m.value,C=s+I4(m,d++),v+=SE(m,n,o,C,c);else if(m==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return v}function AC(t,n,o){if(t==null)return t;var s=[],c=0;return SE(t,s,"","",function(m){return n.call(o,m,c++)}),s}function Nte(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(o){(t._status===0||t._status===-1)&&(t._status=1,t._result=o)},function(o){(t._status===0||t._status===-1)&&(t._status=2,t._result=o)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var dc={current:null},CE={transition:null},jte={ReactCurrentDispatcher:dc,ReactCurrentBatchConfig:CE,ReactCurrentOwner:fk};po.Children={map:AC,forEach:function(t,n,o){AC(t,function(){n.apply(this,arguments)},o)},count:function(t){var n=0;return AC(t,function(){n++}),n},toArray:function(t){return AC(t,function(n){return n})||[]},only:function(t){if(!pk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};po.Component=d0;po.Fragment=Mte;po.Profiler=Ate;po.PureComponent=hk;po.StrictMode=Pte;po.Suspense=zte;po.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jte;po.cloneElement=function(t,n,o){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=bj({},t.props),c=t.key,m=t.ref,v=t._owner;if(n!=null){if(n.ref!==void 0&&(m=n.ref,v=fk.current),n.key!==void 0&&(c=""+n.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(C in n)Cj.call(n,C)&&!Ej.hasOwnProperty(C)&&(s[C]=n[C]===void 0&&d!==void 0?d[C]:n[C])}var C=arguments.length-2;if(C===1)s.children=o;else if(1<C){d=Array(C);for(var S=0;S<C;S++)d[S]=arguments[S+2];s.children=d}return{$$typeof:Jb,type:t.type,key:c,ref:m,props:s,_owner:v}};po.createContext=function(t){return t={$$typeof:kte,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rte,_context:t},t.Consumer=t};po.createElement=Tj;po.createFactory=function(t){var n=Tj.bind(null,t);return n.type=t,n};po.createRef=function(){return{current:null}};po.forwardRef=function(t){return{$$typeof:Ote,render:t}};po.isValidElement=pk;po.lazy=function(t){return{$$typeof:Lte,_payload:{_status:-1,_result:t},_init:Nte}};po.memo=function(t,n){return{$$typeof:Dte,type:t,compare:n===void 0?null:n}};po.startTransition=function(t){var n=CE.transition;CE.transition={};try{t()}finally{CE.transition=n}};po.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};po.useCallback=function(t,n){return dc.current.useCallback(t,n)};po.useContext=function(t){return dc.current.useContext(t)};po.useDebugValue=function(){};po.useDeferredValue=function(t){return dc.current.useDeferredValue(t)};po.useEffect=function(t,n){return dc.current.useEffect(t,n)};po.useId=function(){return dc.current.useId()};po.useImperativeHandle=function(t,n,o){return dc.current.useImperativeHandle(t,n,o)};po.useInsertionEffect=function(t,n){return dc.current.useInsertionEffect(t,n)};po.useLayoutEffect=function(t,n){return dc.current.useLayoutEffect(t,n)};po.useMemo=function(t,n){return dc.current.useMemo(t,n)};po.useReducer=function(t,n,o){return dc.current.useReducer(t,n,o)};po.useRef=function(t){return dc.current.useRef(t)};po.useState=function(t){return dc.current.useState(t)};po.useSyncExternalStore=function(t,n,o){return dc.current.useSyncExternalStore(t,n,o)};po.useTransition=function(){return dc.current.useTransition()};po.version="18.2.0";_j.exports=po;var E=_j.exports;const rr=Nd(E),f0=uk({__proto__:null,default:rr},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vte=E,Ute=Symbol.for("react.element"),Hte=Symbol.for("react.fragment"),Gte=Object.prototype.hasOwnProperty,qte=Vte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wte={key:!0,ref:!0,__self:!0,__source:!0};function Ij(t,n,o){var s,c={},m=null,v=null;o!==void 0&&(m=""+o),n.key!==void 0&&(m=""+n.key),n.ref!==void 0&&(v=n.ref);for(s in n)Gte.call(n,s)&&!Wte.hasOwnProperty(s)&&(c[s]=n[s]);if(t&&t.defaultProps)for(s in n=t.defaultProps,n)c[s]===void 0&&(c[s]=n[s]);return{$$typeof:Ute,type:t,key:m,ref:v,props:c,_owner:qte.current}}lI.Fragment=Hte;lI.jsx=Ij;lI.jsxs=Ij;vj.exports=lI;var $r=vj.exports,Mj={exports:{}},wu={},Pj={exports:{}},Aj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(Ce,Ye){var qe=Ce.length;Ce.push(Ye);e:for(;0<qe;){var rt=qe-1>>>1,Qe=Ce[rt];if(0<c(Qe,Ye))Ce[rt]=Ye,Ce[qe]=Qe,qe=rt;else break e}}function o(Ce){return Ce.length===0?null:Ce[0]}function s(Ce){if(Ce.length===0)return null;var Ye=Ce[0],qe=Ce.pop();if(qe!==Ye){Ce[0]=qe;e:for(var rt=0,Qe=Ce.length,St=Qe>>>1;rt<St;){var jt=2*(rt+1)-1,Ot=Ce[jt],Tt=jt+1,ct=Ce[Tt];if(0>c(Ot,qe))Tt<Qe&&0>c(ct,Ot)?(Ce[rt]=ct,Ce[Tt]=qe,rt=Tt):(Ce[rt]=Ot,Ce[jt]=qe,rt=jt);else if(Tt<Qe&&0>c(ct,qe))Ce[rt]=ct,Ce[Tt]=qe,rt=Tt;else break e}}return Ye}function c(Ce,Ye){var qe=Ce.sortIndex-Ye.sortIndex;return qe!==0?qe:Ce.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;t.unstable_now=function(){return m.now()}}else{var v=Date,d=v.now();t.unstable_now=function(){return v.now()-d}}var C=[],S=[],R=1,D=null,$=3,H=!1,Z=!1,X=!1,Q=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(Ce){for(var Ye=o(S);Ye!==null;){if(Ye.callback===null)s(S);else if(Ye.startTime<=Ce)s(S),Ye.sortIndex=Ye.expirationTime,n(C,Ye);else break;Ye=o(S)}}function re(Ce){if(X=!1,Y(Ce),!Z)if(o(C)!==null)Z=!0,Le(fe);else{var Ye=o(S);Ye!==null&&Me(re,Ye.startTime-Ce)}}function fe(Ce,Ye){Z=!1,X&&(X=!1,G(xe),xe=-1),H=!0;var qe=$;try{for(Y(Ye),D=o(C);D!==null&&(!(D.expirationTime>Ye)||Ce&&!Re());){var rt=D.callback;if(typeof rt=="function"){D.callback=null,$=D.priorityLevel;var Qe=rt(D.expirationTime<=Ye);Ye=t.unstable_now(),typeof Qe=="function"?D.callback=Qe:D===o(C)&&s(C),Y(Ye)}else s(C);D=o(C)}if(D!==null)var St=!0;else{var jt=o(S);jt!==null&&Me(re,jt.startTime-Ye),St=!1}return St}finally{D=null,$=qe,H=!1}}var me=!1,pe=null,xe=-1,Se=5,oe=-1;function Re(){return!(t.unstable_now()-oe<Se)}function Ve(){if(pe!==null){var Ce=t.unstable_now();oe=Ce;var Ye=!0;try{Ye=pe(!0,Ce)}finally{Ye?Oe():(me=!1,pe=null)}}else me=!1}var Oe;if(typeof K=="function")Oe=function(){K(Ve)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Fe=_e.port2;_e.port1.onmessage=Ve,Oe=function(){Fe.postMessage(null)}}else Oe=function(){Q(Ve,0)};function Le(Ce){pe=Ce,me||(me=!0,Oe())}function Me(Ce,Ye){xe=Q(function(){Ce(t.unstable_now())},Ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ce){Ce.callback=null},t.unstable_continueExecution=function(){Z||H||(Z=!0,Le(fe))},t.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<Ce?Math.floor(1e3/Ce):5},t.unstable_getCurrentPriorityLevel=function(){return $},t.unstable_getFirstCallbackNode=function(){return o(C)},t.unstable_next=function(Ce){switch($){case 1:case 2:case 3:var Ye=3;break;default:Ye=$}var qe=$;$=Ye;try{return Ce()}finally{$=qe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ce,Ye){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var qe=$;$=Ce;try{return Ye()}finally{$=qe}},t.unstable_scheduleCallback=function(Ce,Ye,qe){var rt=t.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?rt+qe:rt):qe=rt,Ce){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=qe+Qe,Ce={id:R++,callback:Ye,priorityLevel:Ce,startTime:qe,expirationTime:Qe,sortIndex:-1},qe>rt?(Ce.sortIndex=qe,n(S,Ce),o(C)===null&&Ce===o(S)&&(X?(G(xe),xe=-1):X=!0,Me(re,qe-rt))):(Ce.sortIndex=Qe,n(C,Ce),Z||H||(Z=!0,Le(fe))),Ce},t.unstable_shouldYield=Re,t.unstable_wrapCallback=function(Ce){var Ye=$;return function(){var qe=$;$=Ye;try{return Ce.apply(this,arguments)}finally{$=qe}}}})(Aj);Pj.exports=Aj;var Kte=Pj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rj=E,_u=Kte;function hn(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kj=new Set,mb={};function Sy(t,n){H_(t,n),H_(t+"Capture",n)}function H_(t,n){for(mb[t]=n,t=0;t<n.length;t++)kj.add(n[t])}var Ff=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RA=Object.prototype.hasOwnProperty,Zte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M$={},P$={};function Xte(t){return RA.call(P$,t)?!0:RA.call(M$,t)?!1:Zte.test(t)?P$[t]=!0:(M$[t]=!0,!1)}function Yte(t,n,o,s){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jte(t,n,o,s){if(n===null||typeof n>"u"||Yte(t,n,o,s))return!0;if(s)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function fc(t,n,o,s,c,m,v){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=m,this.removeEmptyString=v}var Tl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tl[t]=new fc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Tl[n]=new fc(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tl[t]=new fc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tl[t]=new fc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tl[t]=new fc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tl[t]=new fc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tl[t]=new fc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tl[t]=new fc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tl[t]=new fc(t,5,!1,t.toLowerCase(),null,!1,!1)});var mk=/[\-:]([a-z])/g;function gk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(mk,gk);Tl[n]=new fc(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(mk,gk);Tl[n]=new fc(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(mk,gk);Tl[n]=new fc(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tl[t]=new fc(t,1,!1,t.toLowerCase(),null,!1,!1)});Tl.xlinkHref=new fc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tl[t]=new fc(t,1,!1,t.toLowerCase(),null,!0,!0)});function yk(t,n,o,s){var c=Tl.hasOwnProperty(n)?Tl[n]:null;(c!==null?c.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Jte(n,o,c,s)&&(o=null),s||c===null?Xte(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):c.mustUseProperty?t[c.propertyName]=o===null?c.type===3?!1:"":o:(n=c.attributeName,s=c.attributeNamespace,o===null?t.removeAttribute(n):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,s?t.setAttributeNS(s,n,o):t.setAttribute(n,o))))}var qf=Rj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,RC=Symbol.for("react.element"),p_=Symbol.for("react.portal"),m_=Symbol.for("react.fragment"),vk=Symbol.for("react.strict_mode"),kA=Symbol.for("react.profiler"),Oj=Symbol.for("react.provider"),zj=Symbol.for("react.context"),_k=Symbol.for("react.forward_ref"),OA=Symbol.for("react.suspense"),zA=Symbol.for("react.suspense_list"),xk=Symbol.for("react.memo"),cm=Symbol.for("react.lazy"),Dj=Symbol.for("react.offscreen"),A$=Symbol.iterator;function bx(t){return t===null||typeof t!="object"?null:(t=A$&&t[A$]||t["@@iterator"],typeof t=="function"?t:null)}var ns=Object.assign,M4;function Vx(t){if(M4===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);M4=n&&n[1]||""}return`
`+M4+t}var P4=!1;function A4(t,n){if(!t||P4)return"";P4=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(S){var s=S}Reflect.construct(t,[],n)}else{try{n.call()}catch(S){s=S}t.call(n.prototype)}else{try{throw Error()}catch(S){s=S}t()}}catch(S){if(S&&s&&typeof S.stack=="string"){for(var c=S.stack.split(`
`),m=s.stack.split(`
`),v=c.length-1,d=m.length-1;1<=v&&0<=d&&c[v]!==m[d];)d--;for(;1<=v&&0<=d;v--,d--)if(c[v]!==m[d]){if(v!==1||d!==1)do if(v--,d--,0>d||c[v]!==m[d]){var C=`
`+c[v].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=v&&0<=d);break}}}finally{P4=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Vx(t):""}function Qte(t){switch(t.tag){case 5:return Vx(t.type);case 16:return Vx("Lazy");case 13:return Vx("Suspense");case 19:return Vx("SuspenseList");case 0:case 2:case 15:return t=A4(t.type,!1),t;case 11:return t=A4(t.type.render,!1),t;case 1:return t=A4(t.type,!0),t;default:return""}}function DA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m_:return"Fragment";case p_:return"Portal";case kA:return"Profiler";case vk:return"StrictMode";case OA:return"Suspense";case zA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zj:return(t.displayName||"Context")+".Consumer";case Oj:return(t._context.displayName||"Context")+".Provider";case _k:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xk:return n=t.displayName||null,n!==null?n:DA(t.type)||"Memo";case cm:n=t._payload,t=t._init;try{return DA(t(n))}catch{}}return null}function ere(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return DA(n);case 8:return n===vk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Rm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lj(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function tre(t){var n=Lj(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),s=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,m=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(v){s=""+v,m.call(this,v)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function kC(t){t._valueTracker||(t._valueTracker=tre(t))}function $j(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),s="";return t&&(s=Lj(t)?t.checked?"true":"false":t.value),t=s,t!==o?(n.setValue(t),!0):!1}function aT(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function LA(t,n){var o=n.checked;return ns({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function R$(t,n){var o=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;o=Rm(n.value!=null?n.value:o),t._wrapperState={initialChecked:s,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Bj(t,n){n=n.checked,n!=null&&yk(t,"checked",n,!1)}function $A(t,n){Bj(t,n);var o=Rm(n.value),s=n.type;if(o!=null)s==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?BA(t,n.type,o):n.hasOwnProperty("defaultValue")&&BA(t,n.type,Rm(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function k$(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function BA(t,n,o){(n!=="number"||aT(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Ux=Array.isArray;function A_(t,n,o,s){if(t=t.options,n){n={};for(var c=0;c<o.length;c++)n["$"+o[c]]=!0;for(o=0;o<t.length;o++)c=n.hasOwnProperty("$"+t[o].value),t[o].selected!==c&&(t[o].selected=c),c&&s&&(t[o].defaultSelected=!0)}else{for(o=""+Rm(o),n=null,c=0;c<t.length;c++){if(t[c].value===o){t[c].selected=!0,s&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function FA(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(hn(91));return ns({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O$(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(hn(92));if(Ux(o)){if(1<o.length)throw Error(hn(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:Rm(o)}}function Fj(t,n){var o=Rm(n.value),s=Rm(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),s!=null&&(t.defaultValue=""+s)}function z$(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Nj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NA(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Nj(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var OC,jj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,s,c){MSApp.execUnsafeLocalFunction(function(){return t(n,o,s,c)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(OC=OC||document.createElement("div"),OC.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=OC.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function gb(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var Xx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rre=["Webkit","ms","Moz","O"];Object.keys(Xx).forEach(function(t){rre.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Xx[n]=Xx[t]})});function Vj(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||Xx.hasOwnProperty(t)&&Xx[t]?(""+n).trim():n+"px"}function Uj(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var s=o.indexOf("--")===0,c=Vj(o,n[o],s);o==="float"&&(o="cssFloat"),s?t.setProperty(o,c):t[o]=c}}var nre=ns({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jA(t,n){if(n){if(nre[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(hn(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(hn(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(hn(61))}if(n.style!=null&&typeof n.style!="object")throw Error(hn(62))}}function VA(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UA=null;function bk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var HA=null,R_=null,k_=null;function D$(t){if(t=tw(t)){if(typeof HA!="function")throw Error(hn(280));var n=t.stateNode;n&&(n=fI(n),HA(t.stateNode,t.type,n))}}function Hj(t){R_?k_?k_.push(t):k_=[t]:R_=t}function Gj(){if(R_){var t=R_,n=k_;if(k_=R_=null,D$(t),n)for(t=0;t<n.length;t++)D$(n[t])}}function qj(t,n){return t(n)}function Wj(){}var R4=!1;function Kj(t,n,o){if(R4)return t(n,o);R4=!0;try{return qj(t,n,o)}finally{R4=!1,(R_!==null||k_!==null)&&(Wj(),Gj())}}function yb(t,n){var o=t.stateNode;if(o===null)return null;var s=fI(o);if(s===null)return null;o=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(hn(231,n,typeof o));return o}var GA=!1;if(Ff)try{var wx={};Object.defineProperty(wx,"passive",{get:function(){GA=!0}}),window.addEventListener("test",wx,wx),window.removeEventListener("test",wx,wx)}catch{GA=!1}function ire(t,n,o,s,c,m,v,d,C){var S=Array.prototype.slice.call(arguments,3);try{n.apply(o,S)}catch(R){this.onError(R)}}var Yx=!1,sT=null,lT=!1,qA=null,ore={onError:function(t){Yx=!0,sT=t}};function are(t,n,o,s,c,m,v,d,C){Yx=!1,sT=null,ire.apply(ore,arguments)}function sre(t,n,o,s,c,m,v,d,C){if(are.apply(this,arguments),Yx){if(Yx){var S=sT;Yx=!1,sT=null}else throw Error(hn(198));lT||(lT=!0,qA=S)}}function Cy(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function Zj(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function L$(t){if(Cy(t)!==t)throw Error(hn(188))}function lre(t){var n=t.alternate;if(!n){if(n=Cy(t),n===null)throw Error(hn(188));return n!==t?null:t}for(var o=t,s=n;;){var c=o.return;if(c===null)break;var m=c.alternate;if(m===null){if(s=c.return,s!==null){o=s;continue}break}if(c.child===m.child){for(m=c.child;m;){if(m===o)return L$(c),t;if(m===s)return L$(c),n;m=m.sibling}throw Error(hn(188))}if(o.return!==s.return)o=c,s=m;else{for(var v=!1,d=c.child;d;){if(d===o){v=!0,o=c,s=m;break}if(d===s){v=!0,s=c,o=m;break}d=d.sibling}if(!v){for(d=m.child;d;){if(d===o){v=!0,o=m,s=c;break}if(d===s){v=!0,s=m,o=c;break}d=d.sibling}if(!v)throw Error(hn(189))}}if(o.alternate!==s)throw Error(hn(190))}if(o.tag!==3)throw Error(hn(188));return o.stateNode.current===o?t:n}function Xj(t){return t=lre(t),t!==null?Yj(t):null}function Yj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=Yj(t);if(n!==null)return n;t=t.sibling}return null}var Jj=_u.unstable_scheduleCallback,$$=_u.unstable_cancelCallback,cre=_u.unstable_shouldYield,ure=_u.unstable_requestPaint,bs=_u.unstable_now,hre=_u.unstable_getCurrentPriorityLevel,wk=_u.unstable_ImmediatePriority,Qj=_u.unstable_UserBlockingPriority,cT=_u.unstable_NormalPriority,dre=_u.unstable_LowPriority,e9=_u.unstable_IdlePriority,cI=null,Ld=null;function fre(t){if(Ld&&typeof Ld.onCommitFiberRoot=="function")try{Ld.onCommitFiberRoot(cI,t,void 0,(t.current.flags&128)===128)}catch{}}var Dh=Math.clz32?Math.clz32:gre,pre=Math.log,mre=Math.LN2;function gre(t){return t>>>=0,t===0?32:31-(pre(t)/mre|0)|0}var zC=64,DC=4194304;function Hx(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uT(t,n){var o=t.pendingLanes;if(o===0)return 0;var s=0,c=t.suspendedLanes,m=t.pingedLanes,v=o&268435455;if(v!==0){var d=v&~c;d!==0?s=Hx(d):(m&=v,m!==0&&(s=Hx(m)))}else v=o&~c,v!==0?s=Hx(v):m!==0&&(s=Hx(m));if(s===0)return 0;if(n!==0&&n!==s&&!(n&c)&&(c=s&-s,m=n&-n,c>=m||c===16&&(m&4194240)!==0))return n;if(s&4&&(s|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=s;0<n;)o=31-Dh(n),c=1<<o,s|=t[o],n&=~c;return s}function yre(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vre(t,n){for(var o=t.suspendedLanes,s=t.pingedLanes,c=t.expirationTimes,m=t.pendingLanes;0<m;){var v=31-Dh(m),d=1<<v,C=c[v];C===-1?(!(d&o)||d&s)&&(c[v]=yre(d,n)):C<=n&&(t.expiredLanes|=d),m&=~d}}function WA(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t9(){var t=zC;return zC<<=1,!(zC&4194240)&&(zC=64),t}function k4(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function Qb(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Dh(n),t[n]=o}function _re(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<o;){var c=31-Dh(o),m=1<<c;n[c]=0,s[c]=-1,t[c]=-1,o&=~m}}function Sk(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var s=31-Dh(o),c=1<<s;c&n|t[s]&n&&(t[s]|=n),o&=~c}}var ea=0;function r9(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var n9,Ck,i9,o9,a9,KA=!1,LC=[],bm=null,wm=null,Sm=null,vb=new Map,_b=new Map,dm=[],xre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B$(t,n){switch(t){case"focusin":case"focusout":bm=null;break;case"dragenter":case"dragleave":wm=null;break;case"mouseover":case"mouseout":Sm=null;break;case"pointerover":case"pointerout":vb.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":_b.delete(n.pointerId)}}function Sx(t,n,o,s,c,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:o,eventSystemFlags:s,nativeEvent:m,targetContainers:[c]},n!==null&&(n=tw(n),n!==null&&Ck(n)),t):(t.eventSystemFlags|=s,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function bre(t,n,o,s,c){switch(n){case"focusin":return bm=Sx(bm,t,n,o,s,c),!0;case"dragenter":return wm=Sx(wm,t,n,o,s,c),!0;case"mouseover":return Sm=Sx(Sm,t,n,o,s,c),!0;case"pointerover":var m=c.pointerId;return vb.set(m,Sx(vb.get(m)||null,t,n,o,s,c)),!0;case"gotpointercapture":return m=c.pointerId,_b.set(m,Sx(_b.get(m)||null,t,n,o,s,c)),!0}return!1}function s9(t){var n=ry(t.target);if(n!==null){var o=Cy(n);if(o!==null){if(n=o.tag,n===13){if(n=Zj(o),n!==null){t.blockedOn=n,a9(t.priority,function(){i9(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function EE(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=ZA(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var s=new o.constructor(o.type,o);UA=s,o.target.dispatchEvent(s),UA=null}else return n=tw(o),n!==null&&Ck(n),t.blockedOn=o,!1;n.shift()}return!0}function F$(t,n,o){EE(t)&&o.delete(n)}function wre(){KA=!1,bm!==null&&EE(bm)&&(bm=null),wm!==null&&EE(wm)&&(wm=null),Sm!==null&&EE(Sm)&&(Sm=null),vb.forEach(F$),_b.forEach(F$)}function Cx(t,n){t.blockedOn===n&&(t.blockedOn=null,KA||(KA=!0,_u.unstable_scheduleCallback(_u.unstable_NormalPriority,wre)))}function xb(t){function n(c){return Cx(c,t)}if(0<LC.length){Cx(LC[0],t);for(var o=1;o<LC.length;o++){var s=LC[o];s.blockedOn===t&&(s.blockedOn=null)}}for(bm!==null&&Cx(bm,t),wm!==null&&Cx(wm,t),Sm!==null&&Cx(Sm,t),vb.forEach(n),_b.forEach(n),o=0;o<dm.length;o++)s=dm[o],s.blockedOn===t&&(s.blockedOn=null);for(;0<dm.length&&(o=dm[0],o.blockedOn===null);)s9(o),o.blockedOn===null&&dm.shift()}var O_=qf.ReactCurrentBatchConfig,hT=!0;function Sre(t,n,o,s){var c=ea,m=O_.transition;O_.transition=null;try{ea=1,Ek(t,n,o,s)}finally{ea=c,O_.transition=m}}function Cre(t,n,o,s){var c=ea,m=O_.transition;O_.transition=null;try{ea=4,Ek(t,n,o,s)}finally{ea=c,O_.transition=m}}function Ek(t,n,o,s){if(hT){var c=ZA(t,n,o,s);if(c===null)V4(t,n,s,dT,o),B$(t,s);else if(bre(c,t,n,o,s))s.stopPropagation();else if(B$(t,s),n&4&&-1<xre.indexOf(t)){for(;c!==null;){var m=tw(c);if(m!==null&&n9(m),m=ZA(t,n,o,s),m===null&&V4(t,n,s,dT,o),m===c)break;c=m}c!==null&&s.stopPropagation()}else V4(t,n,s,null,o)}}var dT=null;function ZA(t,n,o,s){if(dT=null,t=bk(s),t=ry(t),t!==null)if(n=Cy(t),n===null)t=null;else if(o=n.tag,o===13){if(t=Zj(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return dT=t,null}function l9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hre()){case wk:return 1;case Qj:return 4;case cT:case dre:return 16;case e9:return 536870912;default:return 16}default:return 16}}var pm=null,Tk=null,TE=null;function c9(){if(TE)return TE;var t,n=Tk,o=n.length,s,c="value"in pm?pm.value:pm.textContent,m=c.length;for(t=0;t<o&&n[t]===c[t];t++);var v=o-t;for(s=1;s<=v&&n[o-s]===c[m-s];s++);return TE=c.slice(t,1<s?1-s:void 0)}function IE(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function $C(){return!0}function N$(){return!1}function Su(t){function n(o,s,c,m,v){this._reactName=o,this._targetInst=c,this.type=s,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(o=t[d],this[d]=o?o(m):m[d]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?$C:N$,this.isPropagationStopped=N$,this}return ns(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$C)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$C)},persist:function(){},isPersistent:$C}),n}var p0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ik=Su(p0),ew=ns({},p0,{view:0,detail:0}),Ere=Su(ew),O4,z4,Ex,uI=ns({},ew,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ex&&(Ex&&t.type==="mousemove"?(O4=t.screenX-Ex.screenX,z4=t.screenY-Ex.screenY):z4=O4=0,Ex=t),O4)},movementY:function(t){return"movementY"in t?t.movementY:z4}}),j$=Su(uI),Tre=ns({},uI,{dataTransfer:0}),Ire=Su(Tre),Mre=ns({},ew,{relatedTarget:0}),D4=Su(Mre),Pre=ns({},p0,{animationName:0,elapsedTime:0,pseudoElement:0}),Are=Su(Pre),Rre=ns({},p0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kre=Su(Rre),Ore=ns({},p0,{data:0}),V$=Su(Ore),zre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $re(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Lre[t])?!!n[t]:!1}function Mk(){return $re}var Bre=ns({},ew,{key:function(t){if(t.key){var n=zre[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=IE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dre[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mk,charCode:function(t){return t.type==="keypress"?IE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?IE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fre=Su(Bre),Nre=ns({},uI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U$=Su(Nre),jre=ns({},ew,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mk}),Vre=Su(jre),Ure=ns({},p0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hre=Su(Ure),Gre=ns({},uI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qre=Su(Gre),Wre=[9,13,27,32],Pk=Ff&&"CompositionEvent"in window,Jx=null;Ff&&"documentMode"in document&&(Jx=document.documentMode);var Kre=Ff&&"TextEvent"in window&&!Jx,u9=Ff&&(!Pk||Jx&&8<Jx&&11>=Jx),H$=" ",G$=!1;function h9(t,n){switch(t){case"keyup":return Wre.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d9(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var g_=!1;function Zre(t,n){switch(t){case"compositionend":return d9(n);case"keypress":return n.which!==32?null:(G$=!0,H$);case"textInput":return t=n.data,t===H$&&G$?null:t;default:return null}}function Xre(t,n){if(g_)return t==="compositionend"||!Pk&&h9(t,n)?(t=c9(),TE=Tk=pm=null,g_=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return u9&&n.locale!=="ko"?null:n.data;default:return null}}var Yre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q$(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Yre[t.type]:n==="textarea"}function f9(t,n,o,s){Hj(s),n=fT(n,"onChange"),0<n.length&&(o=new Ik("onChange","change",null,o,s),t.push({event:o,listeners:n}))}var Qx=null,bb=null;function Jre(t){C9(t,0)}function hI(t){var n=__(t);if($j(n))return t}function Qre(t,n){if(t==="change")return n}var p9=!1;if(Ff){var L4;if(Ff){var $4="oninput"in document;if(!$4){var W$=document.createElement("div");W$.setAttribute("oninput","return;"),$4=typeof W$.oninput=="function"}L4=$4}else L4=!1;p9=L4&&(!document.documentMode||9<document.documentMode)}function K$(){Qx&&(Qx.detachEvent("onpropertychange",m9),bb=Qx=null)}function m9(t){if(t.propertyName==="value"&&hI(bb)){var n=[];f9(n,bb,t,bk(t)),Kj(Jre,n)}}function ene(t,n,o){t==="focusin"?(K$(),Qx=n,bb=o,Qx.attachEvent("onpropertychange",m9)):t==="focusout"&&K$()}function tne(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hI(bb)}function rne(t,n){if(t==="click")return hI(n)}function nne(t,n){if(t==="input"||t==="change")return hI(n)}function ine(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Fh=typeof Object.is=="function"?Object.is:ine;function wb(t,n){if(Fh(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var c=o[s];if(!RA.call(n,c)||!Fh(t[c],n[c]))return!1}return!0}function Z$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X$(t,n){var o=Z$(t);t=0;for(var s;o;){if(o.nodeType===3){if(s=t+o.textContent.length,t<=n&&s>=n)return{node:o,offset:n-t};t=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Z$(o)}}function g9(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?g9(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function y9(){for(var t=window,n=aT();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=aT(t.document)}return n}function Ak(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function one(t){var n=y9(),o=t.focusedElem,s=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&g9(o.ownerDocument.documentElement,o)){if(s!==null&&Ak(o)){if(n=s.start,t=s.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var c=o.textContent.length,m=Math.min(s.start,c);s=s.end===void 0?m:Math.min(s.end,c),!t.extend&&m>s&&(c=s,s=m,m=c),c=X$(o,m);var v=X$(o,s);c&&v&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),t.removeAllRanges(),m>s?(t.addRange(n),t.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ane=Ff&&"documentMode"in document&&11>=document.documentMode,y_=null,XA=null,eb=null,YA=!1;function Y$(t,n,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;YA||y_==null||y_!==aT(s)||(s=y_,"selectionStart"in s&&Ak(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),eb&&wb(eb,s)||(eb=s,s=fT(XA,"onSelect"),0<s.length&&(n=new Ik("onSelect","select",null,n,o),t.push({event:n,listeners:s}),n.target=y_)))}function BC(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var v_={animationend:BC("Animation","AnimationEnd"),animationiteration:BC("Animation","AnimationIteration"),animationstart:BC("Animation","AnimationStart"),transitionend:BC("Transition","TransitionEnd")},B4={},v9={};Ff&&(v9=document.createElement("div").style,"AnimationEvent"in window||(delete v_.animationend.animation,delete v_.animationiteration.animation,delete v_.animationstart.animation),"TransitionEvent"in window||delete v_.transitionend.transition);function dI(t){if(B4[t])return B4[t];if(!v_[t])return t;var n=v_[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in v9)return B4[t]=n[o];return t}var _9=dI("animationend"),x9=dI("animationiteration"),b9=dI("animationstart"),w9=dI("transitionend"),S9=new Map,J$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fm(t,n){S9.set(t,n),Sy(n,[t])}for(var F4=0;F4<J$.length;F4++){var N4=J$[F4],sne=N4.toLowerCase(),lne=N4[0].toUpperCase()+N4.slice(1);Fm(sne,"on"+lne)}Fm(_9,"onAnimationEnd");Fm(x9,"onAnimationIteration");Fm(b9,"onAnimationStart");Fm("dblclick","onDoubleClick");Fm("focusin","onFocus");Fm("focusout","onBlur");Fm(w9,"onTransitionEnd");H_("onMouseEnter",["mouseout","mouseover"]);H_("onMouseLeave",["mouseout","mouseover"]);H_("onPointerEnter",["pointerout","pointerover"]);H_("onPointerLeave",["pointerout","pointerover"]);Sy("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sy("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sy("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sy("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sy("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sy("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cne=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gx));function Q$(t,n,o){var s=t.type||"unknown-event";t.currentTarget=o,sre(s,n,void 0,t),t.currentTarget=null}function C9(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var s=t[o],c=s.event;s=s.listeners;e:{var m=void 0;if(n)for(var v=s.length-1;0<=v;v--){var d=s[v],C=d.instance,S=d.currentTarget;if(d=d.listener,C!==m&&c.isPropagationStopped())break e;Q$(c,d,S),m=C}else for(v=0;v<s.length;v++){if(d=s[v],C=d.instance,S=d.currentTarget,d=d.listener,C!==m&&c.isPropagationStopped())break e;Q$(c,d,S),m=C}}}if(lT)throw t=qA,lT=!1,qA=null,t}function Aa(t,n){var o=n[r5];o===void 0&&(o=n[r5]=new Set);var s=t+"__bubble";o.has(s)||(E9(n,t,2,!1),o.add(s))}function j4(t,n,o){var s=0;n&&(s|=4),E9(o,t,s,n)}var FC="_reactListening"+Math.random().toString(36).slice(2);function Sb(t){if(!t[FC]){t[FC]=!0,kj.forEach(function(o){o!=="selectionchange"&&(cne.has(o)||j4(o,!1,t),j4(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[FC]||(n[FC]=!0,j4("selectionchange",!1,n))}}function E9(t,n,o,s){switch(l9(n)){case 1:var c=Sre;break;case 4:c=Cre;break;default:c=Ek}o=c.bind(null,n,o,t),c=void 0,!GA||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),s?c!==void 0?t.addEventListener(n,o,{capture:!0,passive:c}):t.addEventListener(n,o,!0):c!==void 0?t.addEventListener(n,o,{passive:c}):t.addEventListener(n,o,!1)}function V4(t,n,o,s,c){var m=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var v=s.tag;if(v===3||v===4){var d=s.stateNode.containerInfo;if(d===c||d.nodeType===8&&d.parentNode===c)break;if(v===4)for(v=s.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===c||C.nodeType===8&&C.parentNode===c))return;v=v.return}for(;d!==null;){if(v=ry(d),v===null)return;if(C=v.tag,C===5||C===6){s=m=v;continue e}d=d.parentNode}}s=s.return}Kj(function(){var S=m,R=bk(o),D=[];e:{var $=S9.get(t);if($!==void 0){var H=Ik,Z=t;switch(t){case"keypress":if(IE(o)===0)break e;case"keydown":case"keyup":H=Fre;break;case"focusin":Z="focus",H=D4;break;case"focusout":Z="blur",H=D4;break;case"beforeblur":case"afterblur":H=D4;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=j$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ire;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Vre;break;case _9:case x9:case b9:H=Are;break;case w9:H=Hre;break;case"scroll":H=Ere;break;case"wheel":H=qre;break;case"copy":case"cut":case"paste":H=kre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=U$}var X=(n&4)!==0,Q=!X&&t==="scroll",G=X?$!==null?$+"Capture":null:$;X=[];for(var K=S,Y;K!==null;){Y=K;var re=Y.stateNode;if(Y.tag===5&&re!==null&&(Y=re,G!==null&&(re=yb(K,G),re!=null&&X.push(Cb(K,re,Y)))),Q)break;K=K.return}0<X.length&&($=new H($,Z,null,o,R),D.push({event:$,listeners:X}))}}if(!(n&7)){e:{if($=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",$&&o!==UA&&(Z=o.relatedTarget||o.fromElement)&&(ry(Z)||Z[Nf]))break e;if((H||$)&&($=R.window===R?R:($=R.ownerDocument)?$.defaultView||$.parentWindow:window,H?(Z=o.relatedTarget||o.toElement,H=S,Z=Z?ry(Z):null,Z!==null&&(Q=Cy(Z),Z!==Q||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(H=null,Z=S),H!==Z)){if(X=j$,re="onMouseLeave",G="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(X=U$,re="onPointerLeave",G="onPointerEnter",K="pointer"),Q=H==null?$:__(H),Y=Z==null?$:__(Z),$=new X(re,K+"leave",H,o,R),$.target=Q,$.relatedTarget=Y,re=null,ry(R)===S&&(X=new X(G,K+"enter",Z,o,R),X.target=Y,X.relatedTarget=Q,re=X),Q=re,H&&Z)t:{for(X=H,G=Z,K=0,Y=X;Y;Y=qv(Y))K++;for(Y=0,re=G;re;re=qv(re))Y++;for(;0<K-Y;)X=qv(X),K--;for(;0<Y-K;)G=qv(G),Y--;for(;K--;){if(X===G||G!==null&&X===G.alternate)break t;X=qv(X),G=qv(G)}X=null}else X=null;H!==null&&eB(D,$,H,X,!1),Z!==null&&Q!==null&&eB(D,Q,Z,X,!0)}}e:{if($=S?__(S):window,H=$.nodeName&&$.nodeName.toLowerCase(),H==="select"||H==="input"&&$.type==="file")var fe=Qre;else if(q$($))if(p9)fe=nne;else{fe=tne;var me=ene}else(H=$.nodeName)&&H.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(fe=rne);if(fe&&(fe=fe(t,S))){f9(D,fe,o,R);break e}me&&me(t,$,S),t==="focusout"&&(me=$._wrapperState)&&me.controlled&&$.type==="number"&&BA($,"number",$.value)}switch(me=S?__(S):window,t){case"focusin":(q$(me)||me.contentEditable==="true")&&(y_=me,XA=S,eb=null);break;case"focusout":eb=XA=y_=null;break;case"mousedown":YA=!0;break;case"contextmenu":case"mouseup":case"dragend":YA=!1,Y$(D,o,R);break;case"selectionchange":if(ane)break;case"keydown":case"keyup":Y$(D,o,R)}var pe;if(Pk)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else g_?h9(t,o)&&(xe="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(xe="onCompositionStart");xe&&(u9&&o.locale!=="ko"&&(g_||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&g_&&(pe=c9()):(pm=R,Tk="value"in pm?pm.value:pm.textContent,g_=!0)),me=fT(S,xe),0<me.length&&(xe=new V$(xe,t,null,o,R),D.push({event:xe,listeners:me}),pe?xe.data=pe:(pe=d9(o),pe!==null&&(xe.data=pe)))),(pe=Kre?Zre(t,o):Xre(t,o))&&(S=fT(S,"onBeforeInput"),0<S.length&&(R=new V$("onBeforeInput","beforeinput",null,o,R),D.push({event:R,listeners:S}),R.data=pe))}C9(D,n)})}function Cb(t,n,o){return{instance:t,listener:n,currentTarget:o}}function fT(t,n){for(var o=n+"Capture",s=[];t!==null;){var c=t,m=c.stateNode;c.tag===5&&m!==null&&(c=m,m=yb(t,o),m!=null&&s.unshift(Cb(t,m,c)),m=yb(t,n),m!=null&&s.push(Cb(t,m,c))),t=t.return}return s}function qv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eB(t,n,o,s,c){for(var m=n._reactName,v=[];o!==null&&o!==s;){var d=o,C=d.alternate,S=d.stateNode;if(C!==null&&C===s)break;d.tag===5&&S!==null&&(d=S,c?(C=yb(o,m),C!=null&&v.unshift(Cb(o,C,d))):c||(C=yb(o,m),C!=null&&v.push(Cb(o,C,d)))),o=o.return}v.length!==0&&t.push({event:n,listeners:v})}var une=/\r\n?/g,hne=/\u0000|\uFFFD/g;function tB(t){return(typeof t=="string"?t:""+t).replace(une,`
`).replace(hne,"")}function NC(t,n,o){if(n=tB(n),tB(t)!==n&&o)throw Error(hn(425))}function pT(){}var JA=null,QA=null;function e5(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var t5=typeof setTimeout=="function"?setTimeout:void 0,dne=typeof clearTimeout=="function"?clearTimeout:void 0,rB=typeof Promise=="function"?Promise:void 0,fne=typeof queueMicrotask=="function"?queueMicrotask:typeof rB<"u"?function(t){return rB.resolve(null).then(t).catch(pne)}:t5;function pne(t){setTimeout(function(){throw t})}function U4(t,n){var o=n,s=0;do{var c=o.nextSibling;if(t.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0){t.removeChild(c),xb(n);return}s--}else o!=="$"&&o!=="$?"&&o!=="$!"||s++;o=c}while(o);xb(n)}function Cm(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function nB(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var m0=Math.random().toString(36).slice(2),Dd="__reactFiber$"+m0,Eb="__reactProps$"+m0,Nf="__reactContainer$"+m0,r5="__reactEvents$"+m0,mne="__reactListeners$"+m0,gne="__reactHandles$"+m0;function ry(t){var n=t[Dd];if(n)return n;for(var o=t.parentNode;o;){if(n=o[Nf]||o[Dd]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=nB(t);t!==null;){if(o=t[Dd])return o;t=nB(t)}return n}t=o,o=t.parentNode}return null}function tw(t){return t=t[Dd]||t[Nf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function __(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(hn(33))}function fI(t){return t[Eb]||null}var n5=[],x_=-1;function Nm(t){return{current:t}}function ka(t){0>x_||(t.current=n5[x_],n5[x_]=null,x_--)}function _a(t,n){x_++,n5[x_]=t.current,t.current=n}var km={},ql=Nm(km),zc=Nm(!1),my=km;function G_(t,n){var o=t.type.contextTypes;if(!o)return km;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var c={},m;for(m in o)c[m]=n[m];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=c),c}function Dc(t){return t=t.childContextTypes,t!=null}function mT(){ka(zc),ka(ql)}function iB(t,n,o){if(ql.current!==km)throw Error(hn(168));_a(ql,n),_a(zc,o)}function T9(t,n,o){var s=t.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return o;s=s.getChildContext();for(var c in s)if(!(c in n))throw Error(hn(108,ere(t)||"Unknown",c));return ns({},o,s)}function gT(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||km,my=ql.current,_a(ql,t),_a(zc,zc.current),!0}function oB(t,n,o){var s=t.stateNode;if(!s)throw Error(hn(169));o?(t=T9(t,n,my),s.__reactInternalMemoizedMergedChildContext=t,ka(zc),ka(ql),_a(ql,t)):ka(zc),_a(zc,o)}var kf=null,pI=!1,H4=!1;function I9(t){kf===null?kf=[t]:kf.push(t)}function yne(t){pI=!0,I9(t)}function jm(){if(!H4&&kf!==null){H4=!0;var t=0,n=ea;try{var o=kf;for(ea=1;t<o.length;t++){var s=o[t];do s=s(!0);while(s!==null)}kf=null,pI=!1}catch(c){throw kf!==null&&(kf=kf.slice(t+1)),Jj(wk,jm),c}finally{ea=n,H4=!1}}return null}var b_=[],w_=0,yT=null,vT=0,Wu=[],Ku=0,gy=null,zf=1,Df="";function Xg(t,n){b_[w_++]=vT,b_[w_++]=yT,yT=t,vT=n}function M9(t,n,o){Wu[Ku++]=zf,Wu[Ku++]=Df,Wu[Ku++]=gy,gy=t;var s=zf;t=Df;var c=32-Dh(s)-1;s&=~(1<<c),o+=1;var m=32-Dh(n)+c;if(30<m){var v=c-c%5;m=(s&(1<<v)-1).toString(32),s>>=v,c-=v,zf=1<<32-Dh(n)+c|o<<c|s,Df=m+t}else zf=1<<m|o<<c|s,Df=t}function Rk(t){t.return!==null&&(Xg(t,1),M9(t,1,0))}function kk(t){for(;t===yT;)yT=b_[--w_],b_[w_]=null,vT=b_[--w_],b_[w_]=null;for(;t===gy;)gy=Wu[--Ku],Wu[Ku]=null,Df=Wu[--Ku],Wu[Ku]=null,zf=Wu[--Ku],Wu[Ku]=null}var vu=null,gu=null,Va=!1,kh=null;function P9(t,n){var o=Xu(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function aB(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,vu=t,gu=Cm(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,vu=t,gu=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=gy!==null?{id:zf,overflow:Df}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=Xu(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,vu=t,gu=null,!0):!1;default:return!1}}function i5(t){return(t.mode&1)!==0&&(t.flags&128)===0}function o5(t){if(Va){var n=gu;if(n){var o=n;if(!aB(t,n)){if(i5(t))throw Error(hn(418));n=Cm(o.nextSibling);var s=vu;n&&aB(t,n)?P9(s,o):(t.flags=t.flags&-4097|2,Va=!1,vu=t)}}else{if(i5(t))throw Error(hn(418));t.flags=t.flags&-4097|2,Va=!1,vu=t}}}function sB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vu=t}function jC(t){if(t!==vu)return!1;if(!Va)return sB(t),Va=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!e5(t.type,t.memoizedProps)),n&&(n=gu)){if(i5(t))throw A9(),Error(hn(418));for(;n;)P9(t,n),n=Cm(n.nextSibling)}if(sB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(hn(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){gu=Cm(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}gu=null}}else gu=vu?Cm(t.stateNode.nextSibling):null;return!0}function A9(){for(var t=gu;t;)t=Cm(t.nextSibling)}function q_(){gu=vu=null,Va=!1}function Ok(t){kh===null?kh=[t]:kh.push(t)}var vne=qf.ReactCurrentBatchConfig;function Ih(t,n){if(t&&t.defaultProps){n=ns({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}var _T=Nm(null),xT=null,S_=null,zk=null;function Dk(){zk=S_=xT=null}function Lk(t){var n=_T.current;ka(_T),t._currentValue=n}function a5(t,n,o){for(;t!==null;){var s=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),t===o)break;t=t.return}}function z_(t,n){xT=t,zk=S_=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(kc=!0),t.firstContext=null)}function Qu(t){var n=t._currentValue;if(zk!==t)if(t={context:t,memoizedValue:n,next:null},S_===null){if(xT===null)throw Error(hn(308));S_=t,xT.dependencies={lanes:0,firstContext:t}}else S_=S_.next=t;return n}var ny=null;function $k(t){ny===null?ny=[t]:ny.push(t)}function R9(t,n,o,s){var c=n.interleaved;return c===null?(o.next=o,$k(n)):(o.next=c.next,c.next=o),n.interleaved=o,jf(t,s)}function jf(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var um=!1;function Bk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k9(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $f(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Em(t,n,o){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Io&2){var c=s.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),s.pending=n,jf(t,o)}return c=s.interleaved,c===null?(n.next=n,$k(s)):(n.next=c.next,c.next=n),s.interleaved=n,jf(t,o)}function ME(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var s=n.lanes;s&=t.pendingLanes,o|=s,n.lanes=o,Sk(t,o)}}function lB(t,n){var o=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var c=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?c=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?c=m=n:m=m.next=n}else c=m=n;o={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:m,shared:s.shared,effects:s.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function bT(t,n,o,s){var c=t.updateQueue;um=!1;var m=c.firstBaseUpdate,v=c.lastBaseUpdate,d=c.shared.pending;if(d!==null){c.shared.pending=null;var C=d,S=C.next;C.next=null,v===null?m=S:v.next=S,v=C;var R=t.alternate;R!==null&&(R=R.updateQueue,d=R.lastBaseUpdate,d!==v&&(d===null?R.firstBaseUpdate=S:d.next=S,R.lastBaseUpdate=C))}if(m!==null){var D=c.baseState;v=0,R=S=C=null,d=m;do{var $=d.lane,H=d.eventTime;if((s&$)===$){R!==null&&(R=R.next={eventTime:H,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var Z=t,X=d;switch($=n,H=o,X.tag){case 1:if(Z=X.payload,typeof Z=="function"){D=Z.call(H,D,$);break e}D=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=X.payload,$=typeof Z=="function"?Z.call(H,D,$):Z,$==null)break e;D=ns({},D,$);break e;case 2:um=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,$=c.effects,$===null?c.effects=[d]:$.push(d))}else H={eventTime:H,lane:$,tag:d.tag,payload:d.payload,callback:d.callback,next:null},R===null?(S=R=H,C=D):R=R.next=H,v|=$;if(d=d.next,d===null){if(d=c.shared.pending,d===null)break;$=d,d=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);if(R===null&&(C=D),c.baseState=C,c.firstBaseUpdate=S,c.lastBaseUpdate=R,n=c.shared.interleaved,n!==null){c=n;do v|=c.lane,c=c.next;while(c!==n)}else m===null&&(c.shared.lanes=0);vy|=v,t.lanes=v,t.memoizedState=D}}function cB(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var s=t[n],c=s.callback;if(c!==null){if(s.callback=null,s=o,typeof c!="function")throw Error(hn(191,c));c.call(s)}}}var O9=new Rj.Component().refs;function s5(t,n,o,s){n=t.memoizedState,o=o(s,n),o=o==null?n:ns({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var mI={isMounted:function(t){return(t=t._reactInternals)?Cy(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var s=lc(),c=Im(t),m=$f(s,c);m.payload=n,o!=null&&(m.callback=o),n=Em(t,m,c),n!==null&&(Lh(n,t,c,s),ME(n,t,c))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var s=lc(),c=Im(t),m=$f(s,c);m.tag=1,m.payload=n,o!=null&&(m.callback=o),n=Em(t,m,c),n!==null&&(Lh(n,t,c,s),ME(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=lc(),s=Im(t),c=$f(o,s);c.tag=2,n!=null&&(c.callback=n),n=Em(t,c,s),n!==null&&(Lh(n,t,s,o),ME(n,t,s))}};function uB(t,n,o,s,c,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,m,v):n.prototype&&n.prototype.isPureReactComponent?!wb(o,s)||!wb(c,m):!0}function z9(t,n,o){var s=!1,c=km,m=n.contextType;return typeof m=="object"&&m!==null?m=Qu(m):(c=Dc(n)?my:ql.current,s=n.contextTypes,m=(s=s!=null)?G_(t,c):km),n=new n(o,m),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=mI,t.stateNode=n,n._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=m),n}function hB(t,n,o,s){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,s),n.state!==t&&mI.enqueueReplaceState(n,n.state,null)}function l5(t,n,o,s){var c=t.stateNode;c.props=o,c.state=t.memoizedState,c.refs=O9,Bk(t);var m=n.contextType;typeof m=="object"&&m!==null?c.context=Qu(m):(m=Dc(n)?my:ql.current,c.context=G_(t,m)),c.state=t.memoizedState,m=n.getDerivedStateFromProps,typeof m=="function"&&(s5(t,n,m,o),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&mI.enqueueReplaceState(c,c.state,null),bT(t,o,c,s),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function Tx(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(hn(309));var s=o.stateNode}if(!s)throw Error(hn(147,t));var c=s,m=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===m?n.ref:(n=function(v){var d=c.refs;d===O9&&(d=c.refs={}),v===null?delete d[m]:d[m]=v},n._stringRef=m,n)}if(typeof t!="string")throw Error(hn(284));if(!o._owner)throw Error(hn(290,t))}return t}function VC(t,n){throw t=Object.prototype.toString.call(n),Error(hn(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function dB(t){var n=t._init;return n(t._payload)}function D9(t){function n(G,K){if(t){var Y=G.deletions;Y===null?(G.deletions=[K],G.flags|=16):Y.push(K)}}function o(G,K){if(!t)return null;for(;K!==null;)n(G,K),K=K.sibling;return null}function s(G,K){for(G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function c(G,K){return G=Mm(G,K),G.index=0,G.sibling=null,G}function m(G,K,Y){return G.index=Y,t?(Y=G.alternate,Y!==null?(Y=Y.index,Y<K?(G.flags|=2,K):Y):(G.flags|=2,K)):(G.flags|=1048576,K)}function v(G){return t&&G.alternate===null&&(G.flags|=2),G}function d(G,K,Y,re){return K===null||K.tag!==6?(K=Y4(Y,G.mode,re),K.return=G,K):(K=c(K,Y),K.return=G,K)}function C(G,K,Y,re){var fe=Y.type;return fe===m_?R(G,K,Y.props.children,re,Y.key):K!==null&&(K.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===cm&&dB(fe)===K.type)?(re=c(K,Y.props),re.ref=Tx(G,K,Y),re.return=G,re):(re=zE(Y.type,Y.key,Y.props,null,G.mode,re),re.ref=Tx(G,K,Y),re.return=G,re)}function S(G,K,Y,re){return K===null||K.tag!==4||K.stateNode.containerInfo!==Y.containerInfo||K.stateNode.implementation!==Y.implementation?(K=J4(Y,G.mode,re),K.return=G,K):(K=c(K,Y.children||[]),K.return=G,K)}function R(G,K,Y,re,fe){return K===null||K.tag!==7?(K=uy(Y,G.mode,re,fe),K.return=G,K):(K=c(K,Y),K.return=G,K)}function D(G,K,Y){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Y4(""+K,G.mode,Y),K.return=G,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case RC:return Y=zE(K.type,K.key,K.props,null,G.mode,Y),Y.ref=Tx(G,null,K),Y.return=G,Y;case p_:return K=J4(K,G.mode,Y),K.return=G,K;case cm:var re=K._init;return D(G,re(K._payload),Y)}if(Ux(K)||bx(K))return K=uy(K,G.mode,Y,null),K.return=G,K;VC(G,K)}return null}function $(G,K,Y,re){var fe=K!==null?K.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return fe!==null?null:d(G,K,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case RC:return Y.key===fe?C(G,K,Y,re):null;case p_:return Y.key===fe?S(G,K,Y,re):null;case cm:return fe=Y._init,$(G,K,fe(Y._payload),re)}if(Ux(Y)||bx(Y))return fe!==null?null:R(G,K,Y,re,null);VC(G,Y)}return null}function H(G,K,Y,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number")return G=G.get(Y)||null,d(K,G,""+re,fe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case RC:return G=G.get(re.key===null?Y:re.key)||null,C(K,G,re,fe);case p_:return G=G.get(re.key===null?Y:re.key)||null,S(K,G,re,fe);case cm:var me=re._init;return H(G,K,Y,me(re._payload),fe)}if(Ux(re)||bx(re))return G=G.get(Y)||null,R(K,G,re,fe,null);VC(K,re)}return null}function Z(G,K,Y,re){for(var fe=null,me=null,pe=K,xe=K=0,Se=null;pe!==null&&xe<Y.length;xe++){pe.index>xe?(Se=pe,pe=null):Se=pe.sibling;var oe=$(G,pe,Y[xe],re);if(oe===null){pe===null&&(pe=Se);break}t&&pe&&oe.alternate===null&&n(G,pe),K=m(oe,K,xe),me===null?fe=oe:me.sibling=oe,me=oe,pe=Se}if(xe===Y.length)return o(G,pe),Va&&Xg(G,xe),fe;if(pe===null){for(;xe<Y.length;xe++)pe=D(G,Y[xe],re),pe!==null&&(K=m(pe,K,xe),me===null?fe=pe:me.sibling=pe,me=pe);return Va&&Xg(G,xe),fe}for(pe=s(G,pe);xe<Y.length;xe++)Se=H(pe,G,xe,Y[xe],re),Se!==null&&(t&&Se.alternate!==null&&pe.delete(Se.key===null?xe:Se.key),K=m(Se,K,xe),me===null?fe=Se:me.sibling=Se,me=Se);return t&&pe.forEach(function(Re){return n(G,Re)}),Va&&Xg(G,xe),fe}function X(G,K,Y,re){var fe=bx(Y);if(typeof fe!="function")throw Error(hn(150));if(Y=fe.call(Y),Y==null)throw Error(hn(151));for(var me=fe=null,pe=K,xe=K=0,Se=null,oe=Y.next();pe!==null&&!oe.done;xe++,oe=Y.next()){pe.index>xe?(Se=pe,pe=null):Se=pe.sibling;var Re=$(G,pe,oe.value,re);if(Re===null){pe===null&&(pe=Se);break}t&&pe&&Re.alternate===null&&n(G,pe),K=m(Re,K,xe),me===null?fe=Re:me.sibling=Re,me=Re,pe=Se}if(oe.done)return o(G,pe),Va&&Xg(G,xe),fe;if(pe===null){for(;!oe.done;xe++,oe=Y.next())oe=D(G,oe.value,re),oe!==null&&(K=m(oe,K,xe),me===null?fe=oe:me.sibling=oe,me=oe);return Va&&Xg(G,xe),fe}for(pe=s(G,pe);!oe.done;xe++,oe=Y.next())oe=H(pe,G,xe,oe.value,re),oe!==null&&(t&&oe.alternate!==null&&pe.delete(oe.key===null?xe:oe.key),K=m(oe,K,xe),me===null?fe=oe:me.sibling=oe,me=oe);return t&&pe.forEach(function(Ve){return n(G,Ve)}),Va&&Xg(G,xe),fe}function Q(G,K,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===m_&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case RC:e:{for(var fe=Y.key,me=K;me!==null;){if(me.key===fe){if(fe=Y.type,fe===m_){if(me.tag===7){o(G,me.sibling),K=c(me,Y.props.children),K.return=G,G=K;break e}}else if(me.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===cm&&dB(fe)===me.type){o(G,me.sibling),K=c(me,Y.props),K.ref=Tx(G,me,Y),K.return=G,G=K;break e}o(G,me);break}else n(G,me);me=me.sibling}Y.type===m_?(K=uy(Y.props.children,G.mode,re,Y.key),K.return=G,G=K):(re=zE(Y.type,Y.key,Y.props,null,G.mode,re),re.ref=Tx(G,K,Y),re.return=G,G=re)}return v(G);case p_:e:{for(me=Y.key;K!==null;){if(K.key===me)if(K.tag===4&&K.stateNode.containerInfo===Y.containerInfo&&K.stateNode.implementation===Y.implementation){o(G,K.sibling),K=c(K,Y.children||[]),K.return=G,G=K;break e}else{o(G,K);break}else n(G,K);K=K.sibling}K=J4(Y,G.mode,re),K.return=G,G=K}return v(G);case cm:return me=Y._init,Q(G,K,me(Y._payload),re)}if(Ux(Y))return Z(G,K,Y,re);if(bx(Y))return X(G,K,Y,re);VC(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,K!==null&&K.tag===6?(o(G,K.sibling),K=c(K,Y),K.return=G,G=K):(o(G,K),K=Y4(Y,G.mode,re),K.return=G,G=K),v(G)):o(G,K)}return Q}var W_=D9(!0),L9=D9(!1),rw={},$d=Nm(rw),Tb=Nm(rw),Ib=Nm(rw);function iy(t){if(t===rw)throw Error(hn(174));return t}function Fk(t,n){switch(_a(Ib,n),_a(Tb,t),_a($d,rw),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:NA(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=NA(n,t)}ka($d),_a($d,n)}function K_(){ka($d),ka(Tb),ka(Ib)}function $9(t){iy(Ib.current);var n=iy($d.current),o=NA(n,t.type);n!==o&&(_a(Tb,t),_a($d,o))}function Nk(t){Tb.current===t&&(ka($d),ka(Tb))}var ts=Nm(0);function wT(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var G4=[];function jk(){for(var t=0;t<G4.length;t++)G4[t]._workInProgressVersionPrimary=null;G4.length=0}var PE=qf.ReactCurrentDispatcher,q4=qf.ReactCurrentBatchConfig,yy=0,rs=null,Gs=null,ol=null,ST=!1,tb=!1,Mb=0,_ne=0;function Vl(){throw Error(hn(321))}function Vk(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!Fh(t[o],n[o]))return!1;return!0}function Uk(t,n,o,s,c,m){if(yy=m,rs=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,PE.current=t===null||t.memoizedState===null?Sne:Cne,t=o(s,c),tb){m=0;do{if(tb=!1,Mb=0,25<=m)throw Error(hn(301));m+=1,ol=Gs=null,n.updateQueue=null,PE.current=Ene,t=o(s,c)}while(tb)}if(PE.current=CT,n=Gs!==null&&Gs.next!==null,yy=0,ol=Gs=rs=null,ST=!1,n)throw Error(hn(300));return t}function Hk(){var t=Mb!==0;return Mb=0,t}function kd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ol===null?rs.memoizedState=ol=t:ol=ol.next=t,ol}function eh(){if(Gs===null){var t=rs.alternate;t=t!==null?t.memoizedState:null}else t=Gs.next;var n=ol===null?rs.memoizedState:ol.next;if(n!==null)ol=n,Gs=t;else{if(t===null)throw Error(hn(310));Gs=t,t={memoizedState:Gs.memoizedState,baseState:Gs.baseState,baseQueue:Gs.baseQueue,queue:Gs.queue,next:null},ol===null?rs.memoizedState=ol=t:ol=ol.next=t}return ol}function Pb(t,n){return typeof n=="function"?n(t):n}function W4(t){var n=eh(),o=n.queue;if(o===null)throw Error(hn(311));o.lastRenderedReducer=t;var s=Gs,c=s.baseQueue,m=o.pending;if(m!==null){if(c!==null){var v=c.next;c.next=m.next,m.next=v}s.baseQueue=c=m,o.pending=null}if(c!==null){m=c.next,s=s.baseState;var d=v=null,C=null,S=m;do{var R=S.lane;if((yy&R)===R)C!==null&&(C=C.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),s=S.hasEagerState?S.eagerState:t(s,S.action);else{var D={lane:R,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};C===null?(d=C=D,v=s):C=C.next=D,rs.lanes|=R,vy|=R}S=S.next}while(S!==null&&S!==m);C===null?v=s:C.next=d,Fh(s,n.memoizedState)||(kc=!0),n.memoizedState=s,n.baseState=v,n.baseQueue=C,o.lastRenderedState=s}if(t=o.interleaved,t!==null){c=t;do m=c.lane,rs.lanes|=m,vy|=m,c=c.next;while(c!==t)}else c===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function K4(t){var n=eh(),o=n.queue;if(o===null)throw Error(hn(311));o.lastRenderedReducer=t;var s=o.dispatch,c=o.pending,m=n.memoizedState;if(c!==null){o.pending=null;var v=c=c.next;do m=t(m,v.action),v=v.next;while(v!==c);Fh(m,n.memoizedState)||(kc=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),o.lastRenderedState=m}return[m,s]}function B9(){}function F9(t,n){var o=rs,s=eh(),c=n(),m=!Fh(s.memoizedState,c);if(m&&(s.memoizedState=c,kc=!0),s=s.queue,Gk(V9.bind(null,o,s,t),[t]),s.getSnapshot!==n||m||ol!==null&&ol.memoizedState.tag&1){if(o.flags|=2048,Ab(9,j9.bind(null,o,s,c,n),void 0,null),sl===null)throw Error(hn(349));yy&30||N9(o,n,c)}return c}function N9(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=rs.updateQueue,n===null?(n={lastEffect:null,stores:null},rs.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function j9(t,n,o,s){n.value=o,n.getSnapshot=s,U9(n)&&H9(t)}function V9(t,n,o){return o(function(){U9(n)&&H9(t)})}function U9(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!Fh(t,o)}catch{return!0}}function H9(t){var n=jf(t,1);n!==null&&Lh(n,t,1,-1)}function fB(t){var n=kd();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pb,lastRenderedState:t},n.queue=t,t=t.dispatch=wne.bind(null,rs,t),[n.memoizedState,t]}function Ab(t,n,o,s){return t={tag:t,create:n,destroy:o,deps:s,next:null},n=rs.updateQueue,n===null?(n={lastEffect:null,stores:null},rs.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(s=o.next,o.next=t,t.next=s,n.lastEffect=t)),t}function G9(){return eh().memoizedState}function AE(t,n,o,s){var c=kd();rs.flags|=t,c.memoizedState=Ab(1|n,o,void 0,s===void 0?null:s)}function gI(t,n,o,s){var c=eh();s=s===void 0?null:s;var m=void 0;if(Gs!==null){var v=Gs.memoizedState;if(m=v.destroy,s!==null&&Vk(s,v.deps)){c.memoizedState=Ab(n,o,m,s);return}}rs.flags|=t,c.memoizedState=Ab(1|n,o,m,s)}function pB(t,n){return AE(8390656,8,t,n)}function Gk(t,n){return gI(2048,8,t,n)}function q9(t,n){return gI(4,2,t,n)}function W9(t,n){return gI(4,4,t,n)}function K9(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Z9(t,n,o){return o=o!=null?o.concat([t]):null,gI(4,4,K9.bind(null,n,t),o)}function qk(){}function X9(t,n){var o=eh();n=n===void 0?null:n;var s=o.memoizedState;return s!==null&&n!==null&&Vk(n,s[1])?s[0]:(o.memoizedState=[t,n],t)}function Y9(t,n){var o=eh();n=n===void 0?null:n;var s=o.memoizedState;return s!==null&&n!==null&&Vk(n,s[1])?s[0]:(t=t(),o.memoizedState=[t,n],t)}function J9(t,n,o){return yy&21?(Fh(o,n)||(o=t9(),rs.lanes|=o,vy|=o,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,kc=!0),t.memoizedState=o)}function xne(t,n){var o=ea;ea=o!==0&&4>o?o:4,t(!0);var s=q4.transition;q4.transition={};try{t(!1),n()}finally{ea=o,q4.transition=s}}function Q9(){return eh().memoizedState}function bne(t,n,o){var s=Im(t);if(o={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null},eV(t))tV(n,o);else if(o=R9(t,n,o,s),o!==null){var c=lc();Lh(o,t,s,c),rV(o,n,s)}}function wne(t,n,o){var s=Im(t),c={lane:s,action:o,hasEagerState:!1,eagerState:null,next:null};if(eV(t))tV(n,c);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,d=m(v,o);if(c.hasEagerState=!0,c.eagerState=d,Fh(d,v)){var C=n.interleaved;C===null?(c.next=c,$k(n)):(c.next=C.next,C.next=c),n.interleaved=c;return}}catch{}finally{}o=R9(t,n,c,s),o!==null&&(c=lc(),Lh(o,t,s,c),rV(o,n,s))}}function eV(t){var n=t.alternate;return t===rs||n!==null&&n===rs}function tV(t,n){tb=ST=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function rV(t,n,o){if(o&4194240){var s=n.lanes;s&=t.pendingLanes,o|=s,n.lanes=o,Sk(t,o)}}var CT={readContext:Qu,useCallback:Vl,useContext:Vl,useEffect:Vl,useImperativeHandle:Vl,useInsertionEffect:Vl,useLayoutEffect:Vl,useMemo:Vl,useReducer:Vl,useRef:Vl,useState:Vl,useDebugValue:Vl,useDeferredValue:Vl,useTransition:Vl,useMutableSource:Vl,useSyncExternalStore:Vl,useId:Vl,unstable_isNewReconciler:!1},Sne={readContext:Qu,useCallback:function(t,n){return kd().memoizedState=[t,n===void 0?null:n],t},useContext:Qu,useEffect:pB,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,AE(4194308,4,K9.bind(null,n,t),o)},useLayoutEffect:function(t,n){return AE(4194308,4,t,n)},useInsertionEffect:function(t,n){return AE(4,2,t,n)},useMemo:function(t,n){var o=kd();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var s=kd();return n=o!==void 0?o(n):n,s.memoizedState=s.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},s.queue=t,t=t.dispatch=bne.bind(null,rs,t),[s.memoizedState,t]},useRef:function(t){var n=kd();return t={current:t},n.memoizedState=t},useState:fB,useDebugValue:qk,useDeferredValue:function(t){return kd().memoizedState=t},useTransition:function(){var t=fB(!1),n=t[0];return t=xne.bind(null,t[1]),kd().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var s=rs,c=kd();if(Va){if(o===void 0)throw Error(hn(407));o=o()}else{if(o=n(),sl===null)throw Error(hn(349));yy&30||N9(s,n,o)}c.memoizedState=o;var m={value:o,getSnapshot:n};return c.queue=m,pB(V9.bind(null,s,m,t),[t]),s.flags|=2048,Ab(9,j9.bind(null,s,m,o,n),void 0,null),o},useId:function(){var t=kd(),n=sl.identifierPrefix;if(Va){var o=Df,s=zf;o=(s&~(1<<32-Dh(s)-1)).toString(32)+o,n=":"+n+"R"+o,o=Mb++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=_ne++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Cne={readContext:Qu,useCallback:X9,useContext:Qu,useEffect:Gk,useImperativeHandle:Z9,useInsertionEffect:q9,useLayoutEffect:W9,useMemo:Y9,useReducer:W4,useRef:G9,useState:function(){return W4(Pb)},useDebugValue:qk,useDeferredValue:function(t){var n=eh();return J9(n,Gs.memoizedState,t)},useTransition:function(){var t=W4(Pb)[0],n=eh().memoizedState;return[t,n]},useMutableSource:B9,useSyncExternalStore:F9,useId:Q9,unstable_isNewReconciler:!1},Ene={readContext:Qu,useCallback:X9,useContext:Qu,useEffect:Gk,useImperativeHandle:Z9,useInsertionEffect:q9,useLayoutEffect:W9,useMemo:Y9,useReducer:K4,useRef:G9,useState:function(){return K4(Pb)},useDebugValue:qk,useDeferredValue:function(t){var n=eh();return Gs===null?n.memoizedState=t:J9(n,Gs.memoizedState,t)},useTransition:function(){var t=K4(Pb)[0],n=eh().memoizedState;return[t,n]},useMutableSource:B9,useSyncExternalStore:F9,useId:Q9,unstable_isNewReconciler:!1};function Z_(t,n){try{var o="",s=n;do o+=Qte(s),s=s.return;while(s);var c=o}catch(m){c=`
Error generating stack: `+m.message+`
`+m.stack}return{value:t,source:n,stack:c,digest:null}}function Z4(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function c5(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var Tne=typeof WeakMap=="function"?WeakMap:Map;function nV(t,n,o){o=$f(-1,o),o.tag=3,o.payload={element:null};var s=n.value;return o.callback=function(){TT||(TT=!0,_5=s),c5(t,n)},o}function iV(t,n,o){o=$f(-1,o),o.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var c=n.value;o.payload=function(){return s(c)},o.callback=function(){c5(t,n)}}var m=t.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){c5(t,n),typeof s!="function"&&(Tm===null?Tm=new Set([this]):Tm.add(this));var v=n.stack;this.componentDidCatch(n.value,{componentStack:v!==null?v:""})}),o}function mB(t,n,o){var s=t.pingCache;if(s===null){s=t.pingCache=new Tne;var c=new Set;s.set(n,c)}else c=s.get(n),c===void 0&&(c=new Set,s.set(n,c));c.has(o)||(c.add(o),t=Nne.bind(null,t,n,o),n.then(t,t))}function gB(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function yB(t,n,o,s,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=$f(-1,1),n.tag=2,Em(o,n,1))),o.lanes|=1),t)}var Ine=qf.ReactCurrentOwner,kc=!1;function sc(t,n,o,s){n.child=t===null?L9(n,null,o,s):W_(n,t.child,o,s)}function vB(t,n,o,s,c){o=o.render;var m=n.ref;return z_(n,c),s=Uk(t,n,o,s,m,c),o=Hk(),t!==null&&!kc?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Vf(t,n,c)):(Va&&o&&Rk(n),n.flags|=1,sc(t,n,s,c),n.child)}function _B(t,n,o,s,c){if(t===null){var m=o.type;return typeof m=="function"&&!eO(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=m,oV(t,n,m,s,c)):(t=zE(o.type,null,s,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!(t.lanes&c)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:wb,o(v,s)&&t.ref===n.ref)return Vf(t,n,c)}return n.flags|=1,t=Mm(m,s),t.ref=n.ref,t.return=n,n.child=t}function oV(t,n,o,s,c){if(t!==null){var m=t.memoizedProps;if(wb(m,s)&&t.ref===n.ref)if(kc=!1,n.pendingProps=s=m,(t.lanes&c)!==0)t.flags&131072&&(kc=!0);else return n.lanes=t.lanes,Vf(t,n,c)}return u5(t,n,o,s,c)}function aV(t,n,o){var s=n.pendingProps,c=s.children,m=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},_a(E_,fu),fu|=o;else{if(!(o&1073741824))return t=m!==null?m.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,_a(E_,fu),fu|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=m!==null?m.baseLanes:o,_a(E_,fu),fu|=s}else m!==null?(s=m.baseLanes|o,n.memoizedState=null):s=o,_a(E_,fu),fu|=s;return sc(t,n,c,o),n.child}function sV(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function u5(t,n,o,s,c){var m=Dc(o)?my:ql.current;return m=G_(n,m),z_(n,c),o=Uk(t,n,o,s,m,c),s=Hk(),t!==null&&!kc?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Vf(t,n,c)):(Va&&s&&Rk(n),n.flags|=1,sc(t,n,o,c),n.child)}function xB(t,n,o,s,c){if(Dc(o)){var m=!0;gT(n)}else m=!1;if(z_(n,c),n.stateNode===null)RE(t,n),z9(n,o,s),l5(n,o,s,c),s=!0;else if(t===null){var v=n.stateNode,d=n.memoizedProps;v.props=d;var C=v.context,S=o.contextType;typeof S=="object"&&S!==null?S=Qu(S):(S=Dc(o)?my:ql.current,S=G_(n,S));var R=o.getDerivedStateFromProps,D=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function";D||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(d!==s||C!==S)&&hB(n,v,s,S),um=!1;var $=n.memoizedState;v.state=$,bT(n,s,v,c),C=n.memoizedState,d!==s||$!==C||zc.current||um?(typeof R=="function"&&(s5(n,o,R,s),C=n.memoizedState),(d=um||uB(n,o,d,s,$,C,S))?(D||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(n.flags|=4194308)):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=C),v.props=s,v.state=C,v.context=S,s=d):(typeof v.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{v=n.stateNode,k9(t,n),d=n.memoizedProps,S=n.type===n.elementType?d:Ih(n.type,d),v.props=S,D=n.pendingProps,$=v.context,C=o.contextType,typeof C=="object"&&C!==null?C=Qu(C):(C=Dc(o)?my:ql.current,C=G_(n,C));var H=o.getDerivedStateFromProps;(R=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(d!==D||$!==C)&&hB(n,v,s,C),um=!1,$=n.memoizedState,v.state=$,bT(n,s,v,c);var Z=n.memoizedState;d!==D||$!==Z||zc.current||um?(typeof H=="function"&&(s5(n,o,H,s),Z=n.memoizedState),(S=um||uB(n,o,S,s,$,Z,C)||!1)?(R||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(s,Z,C),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(s,Z,C)),typeof v.componentDidUpdate=="function"&&(n.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof v.componentDidUpdate!="function"||d===t.memoizedProps&&$===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&$===t.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=Z),v.props=s,v.state=Z,v.context=C,s=S):(typeof v.componentDidUpdate!="function"||d===t.memoizedProps&&$===t.memoizedState||(n.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&$===t.memoizedState||(n.flags|=1024),s=!1)}return h5(t,n,o,s,m,c)}function h5(t,n,o,s,c,m){sV(t,n);var v=(n.flags&128)!==0;if(!s&&!v)return c&&oB(n,o,!1),Vf(t,n,m);s=n.stateNode,Ine.current=n;var d=v&&typeof o.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,t!==null&&v?(n.child=W_(n,t.child,null,m),n.child=W_(n,null,d,m)):sc(t,n,d,m),n.memoizedState=s.state,c&&oB(n,o,!0),n.child}function lV(t){var n=t.stateNode;n.pendingContext?iB(t,n.pendingContext,n.pendingContext!==n.context):n.context&&iB(t,n.context,!1),Fk(t,n.containerInfo)}function bB(t,n,o,s,c){return q_(),Ok(c),n.flags|=256,sc(t,n,o,s),n.child}var d5={dehydrated:null,treeContext:null,retryLane:0};function f5(t){return{baseLanes:t,cachePool:null,transitions:null}}function cV(t,n,o){var s=n.pendingProps,c=ts.current,m=!1,v=(n.flags&128)!==0,d;if((d=v)||(d=t!==null&&t.memoizedState===null?!1:(c&2)!==0),d?(m=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),_a(ts,c&1),t===null)return o5(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(v=s.children,t=s.fallback,m?(s=n.mode,m=n.child,v={mode:"hidden",children:v},!(s&1)&&m!==null?(m.childLanes=0,m.pendingProps=v):m=_I(v,s,0,null),t=uy(t,s,o,null),m.return=n,t.return=n,m.sibling=t,n.child=m,n.child.memoizedState=f5(o),n.memoizedState=d5,t):Wk(n,v));if(c=t.memoizedState,c!==null&&(d=c.dehydrated,d!==null))return Mne(t,n,v,s,d,c,o);if(m){m=s.fallback,v=n.mode,c=t.child,d=c.sibling;var C={mode:"hidden",children:s.children};return!(v&1)&&n.child!==c?(s=n.child,s.childLanes=0,s.pendingProps=C,n.deletions=null):(s=Mm(c,C),s.subtreeFlags=c.subtreeFlags&14680064),d!==null?m=Mm(d,m):(m=uy(m,v,o,null),m.flags|=2),m.return=n,s.return=n,s.sibling=m,n.child=s,s=m,m=n.child,v=t.child.memoizedState,v=v===null?f5(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=t.childLanes&~o,n.memoizedState=d5,s}return m=t.child,t=m.sibling,s=Mm(m,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=o),s.return=n,s.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=s,n.memoizedState=null,s}function Wk(t,n){return n=_I({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function UC(t,n,o,s){return s!==null&&Ok(s),W_(n,t.child,null,o),t=Wk(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Mne(t,n,o,s,c,m,v){if(o)return n.flags&256?(n.flags&=-257,s=Z4(Error(hn(422))),UC(t,n,v,s)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(m=s.fallback,c=n.mode,s=_I({mode:"visible",children:s.children},c,0,null),m=uy(m,c,v,null),m.flags|=2,s.return=n,m.return=n,s.sibling=m,n.child=s,n.mode&1&&W_(n,t.child,null,v),n.child.memoizedState=f5(v),n.memoizedState=d5,m);if(!(n.mode&1))return UC(t,n,v,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var d=s.dgst;return s=d,m=Error(hn(419)),s=Z4(m,s,void 0),UC(t,n,v,s)}if(d=(v&t.childLanes)!==0,kc||d){if(s=sl,s!==null){switch(v&-v){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|v)?0:c,c!==0&&c!==m.retryLane&&(m.retryLane=c,jf(t,c),Lh(s,t,c,-1))}return Qk(),s=Z4(Error(hn(421))),UC(t,n,v,s)}return c.data==="$?"?(n.flags|=128,n.child=t.child,n=jne.bind(null,t),c._reactRetry=n,null):(t=m.treeContext,gu=Cm(c.nextSibling),vu=n,Va=!0,kh=null,t!==null&&(Wu[Ku++]=zf,Wu[Ku++]=Df,Wu[Ku++]=gy,zf=t.id,Df=t.overflow,gy=n),n=Wk(n,s.children),n.flags|=4096,n)}function wB(t,n,o){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n),a5(t.return,n,o)}function X4(t,n,o,s,c){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:c}:(m.isBackwards=n,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=o,m.tailMode=c)}function uV(t,n,o){var s=n.pendingProps,c=s.revealOrder,m=s.tail;if(sc(t,n,s.children,o),s=ts.current,s&2)s=s&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wB(t,o,n);else if(t.tag===19)wB(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(_a(ts,s),!(n.mode&1))n.memoizedState=null;else switch(c){case"forwards":for(o=n.child,c=null;o!==null;)t=o.alternate,t!==null&&wT(t)===null&&(c=o),o=o.sibling;o=c,o===null?(c=n.child,n.child=null):(c=o.sibling,o.sibling=null),X4(n,!1,c,o,m);break;case"backwards":for(o=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&wT(t)===null){n.child=c;break}t=c.sibling,c.sibling=o,o=c,c=t}X4(n,!0,o,null,m);break;case"together":X4(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function RE(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Vf(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),vy|=n.lanes,!(o&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(hn(153));if(n.child!==null){for(t=n.child,o=Mm(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=Mm(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function Pne(t,n,o){switch(n.tag){case 3:lV(n),q_();break;case 5:$9(n);break;case 1:Dc(n.type)&&gT(n);break;case 4:Fk(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,c=n.memoizedProps.value;_a(_T,s._currentValue),s._currentValue=c;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(_a(ts,ts.current&1),n.flags|=128,null):o&n.child.childLanes?cV(t,n,o):(_a(ts,ts.current&1),t=Vf(t,n,o),t!==null?t.sibling:null);_a(ts,ts.current&1);break;case 19:if(s=(o&n.childLanes)!==0,t.flags&128){if(s)return uV(t,n,o);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_a(ts,ts.current),s)break;return null;case 22:case 23:return n.lanes=0,aV(t,n,o)}return Vf(t,n,o)}var hV,p5,dV,fV;hV=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};p5=function(){};dV=function(t,n,o,s){var c=t.memoizedProps;if(c!==s){t=n.stateNode,iy($d.current);var m=null;switch(o){case"input":c=LA(t,c),s=LA(t,s),m=[];break;case"select":c=ns({},c,{value:void 0}),s=ns({},s,{value:void 0}),m=[];break;case"textarea":c=FA(t,c),s=FA(t,s),m=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=pT)}jA(o,s);var v;o=null;for(S in c)if(!s.hasOwnProperty(S)&&c.hasOwnProperty(S)&&c[S]!=null)if(S==="style"){var d=c[S];for(v in d)d.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(mb.hasOwnProperty(S)?m||(m=[]):(m=m||[]).push(S,null));for(S in s){var C=s[S];if(d=c?.[S],s.hasOwnProperty(S)&&C!==d&&(C!=null||d!=null))if(S==="style")if(d){for(v in d)!d.hasOwnProperty(v)||C&&C.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in C)C.hasOwnProperty(v)&&d[v]!==C[v]&&(o||(o={}),o[v]=C[v])}else o||(m||(m=[]),m.push(S,o)),o=C;else S==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,d=d?d.__html:void 0,C!=null&&d!==C&&(m=m||[]).push(S,C)):S==="children"?typeof C!="string"&&typeof C!="number"||(m=m||[]).push(S,""+C):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(mb.hasOwnProperty(S)?(C!=null&&S==="onScroll"&&Aa("scroll",t),m||d===C||(m=[])):(m=m||[]).push(S,C))}o&&(m=m||[]).push("style",o);var S=m;(n.updateQueue=S)&&(n.flags|=4)}};fV=function(t,n,o,s){o!==s&&(n.flags|=4)};function Ix(t,n){if(!Va)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ul(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,s=0;if(n)for(var c=t.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=s,t.childLanes=o,n}function Ane(t,n,o){var s=n.pendingProps;switch(kk(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ul(n),null;case 1:return Dc(n.type)&&mT(),Ul(n),null;case 3:return s=n.stateNode,K_(),ka(zc),ka(ql),jk(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(jC(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,kh!==null&&(w5(kh),kh=null))),p5(t,n),Ul(n),null;case 5:Nk(n);var c=iy(Ib.current);if(o=n.type,t!==null&&n.stateNode!=null)dV(t,n,o,s,c),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(hn(166));return Ul(n),null}if(t=iy($d.current),jC(n)){s=n.stateNode,o=n.type;var m=n.memoizedProps;switch(s[Dd]=n,s[Eb]=m,t=(n.mode&1)!==0,o){case"dialog":Aa("cancel",s),Aa("close",s);break;case"iframe":case"object":case"embed":Aa("load",s);break;case"video":case"audio":for(c=0;c<Gx.length;c++)Aa(Gx[c],s);break;case"source":Aa("error",s);break;case"img":case"image":case"link":Aa("error",s),Aa("load",s);break;case"details":Aa("toggle",s);break;case"input":R$(s,m),Aa("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!m.multiple},Aa("invalid",s);break;case"textarea":O$(s,m),Aa("invalid",s)}jA(o,m),c=null;for(var v in m)if(m.hasOwnProperty(v)){var d=m[v];v==="children"?typeof d=="string"?s.textContent!==d&&(m.suppressHydrationWarning!==!0&&NC(s.textContent,d,t),c=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(m.suppressHydrationWarning!==!0&&NC(s.textContent,d,t),c=["children",""+d]):mb.hasOwnProperty(v)&&d!=null&&v==="onScroll"&&Aa("scroll",s)}switch(o){case"input":kC(s),k$(s,m,!0);break;case"textarea":kC(s),z$(s);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(s.onclick=pT)}s=c,n.updateQueue=s,s!==null&&(n.flags|=4)}else{v=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nj(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=v.createElement(o,{is:s.is}):(t=v.createElement(o),o==="select"&&(v=t,s.multiple?v.multiple=!0:s.size&&(v.size=s.size))):t=v.createElementNS(t,o),t[Dd]=n,t[Eb]=s,hV(t,n,!1,!1),n.stateNode=t;e:{switch(v=VA(o,s),o){case"dialog":Aa("cancel",t),Aa("close",t),c=s;break;case"iframe":case"object":case"embed":Aa("load",t),c=s;break;case"video":case"audio":for(c=0;c<Gx.length;c++)Aa(Gx[c],t);c=s;break;case"source":Aa("error",t),c=s;break;case"img":case"image":case"link":Aa("error",t),Aa("load",t),c=s;break;case"details":Aa("toggle",t),c=s;break;case"input":R$(t,s),c=LA(t,s),Aa("invalid",t);break;case"option":c=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},c=ns({},s,{value:void 0}),Aa("invalid",t);break;case"textarea":O$(t,s),c=FA(t,s),Aa("invalid",t);break;default:c=s}jA(o,c),d=c;for(m in d)if(d.hasOwnProperty(m)){var C=d[m];m==="style"?Uj(t,C):m==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&jj(t,C)):m==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&gb(t,C):typeof C=="number"&&gb(t,""+C):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(mb.hasOwnProperty(m)?C!=null&&m==="onScroll"&&Aa("scroll",t):C!=null&&yk(t,m,C,v))}switch(o){case"input":kC(t),k$(t,s,!1);break;case"textarea":kC(t),z$(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Rm(s.value));break;case"select":t.multiple=!!s.multiple,m=s.value,m!=null?A_(t,!!s.multiple,m,!1):s.defaultValue!=null&&A_(t,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=pT)}switch(o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ul(n),null;case 6:if(t&&n.stateNode!=null)fV(t,n,t.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(hn(166));if(o=iy(Ib.current),iy($d.current),jC(n)){if(s=n.stateNode,o=n.memoizedProps,s[Dd]=n,(m=s.nodeValue!==o)&&(t=vu,t!==null))switch(t.tag){case 3:NC(s.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&NC(s.nodeValue,o,(t.mode&1)!==0)}m&&(n.flags|=4)}else s=(o.nodeType===9?o:o.ownerDocument).createTextNode(s),s[Dd]=n,n.stateNode=s}return Ul(n),null;case 13:if(ka(ts),s=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Va&&gu!==null&&n.mode&1&&!(n.flags&128))A9(),q_(),n.flags|=98560,m=!1;else if(m=jC(n),s!==null&&s.dehydrated!==null){if(t===null){if(!m)throw Error(hn(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(hn(317));m[Dd]=n}else q_(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Ul(n),m=!1}else kh!==null&&(w5(kh),kh=null),m=!0;if(!m)return n.flags&65536?n:null}return n.flags&128?(n.lanes=o,n):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(t===null||ts.current&1?qs===0&&(qs=3):Qk())),n.updateQueue!==null&&(n.flags|=4),Ul(n),null);case 4:return K_(),p5(t,n),t===null&&Sb(n.stateNode.containerInfo),Ul(n),null;case 10:return Lk(n.type._context),Ul(n),null;case 17:return Dc(n.type)&&mT(),Ul(n),null;case 19:if(ka(ts),m=n.memoizedState,m===null)return Ul(n),null;if(s=(n.flags&128)!==0,v=m.rendering,v===null)if(s)Ix(m,!1);else{if(qs!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(v=wT(t),v!==null){for(n.flags|=128,Ix(m,!1),s=v.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=o,o=n.child;o!==null;)m=o,t=s,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=t,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,t=v.dependencies,m.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return _a(ts,ts.current&1|2),n.child}t=t.sibling}m.tail!==null&&bs()>X_&&(n.flags|=128,s=!0,Ix(m,!1),n.lanes=4194304)}else{if(!s)if(t=wT(v),t!==null){if(n.flags|=128,s=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Ix(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Va)return Ul(n),null}else 2*bs()-m.renderingStartTime>X_&&o!==1073741824&&(n.flags|=128,s=!0,Ix(m,!1),n.lanes=4194304);m.isBackwards?(v.sibling=n.child,n.child=v):(o=m.last,o!==null?o.sibling=v:n.child=v,m.last=v)}return m.tail!==null?(n=m.tail,m.rendering=n,m.tail=n.sibling,m.renderingStartTime=bs(),n.sibling=null,o=ts.current,_a(ts,s?o&1|2:o&1),n):(Ul(n),null);case 22:case 23:return Jk(),s=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?fu&1073741824&&(Ul(n),n.subtreeFlags&6&&(n.flags|=8192)):Ul(n),null;case 24:return null;case 25:return null}throw Error(hn(156,n.tag))}function Rne(t,n){switch(kk(n),n.tag){case 1:return Dc(n.type)&&mT(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return K_(),ka(zc),ka(ql),jk(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return Nk(n),null;case 13:if(ka(ts),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(hn(340));q_()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ka(ts),null;case 4:return K_(),null;case 10:return Lk(n.type._context),null;case 22:case 23:return Jk(),null;case 24:return null;default:return null}}var HC=!1,Gl=!1,kne=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function C_(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(s){ds(t,n,s)}else o.current=null}function m5(t,n,o){try{o()}catch(s){ds(t,n,s)}}var SB=!1;function One(t,n){if(JA=hT,t=y9(),Ak(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var c=s.anchorOffset,m=s.focusNode;s=s.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,d=-1,C=-1,S=0,R=0,D=t,$=null;t:for(;;){for(var H;D!==o||c!==0&&D.nodeType!==3||(d=v+c),D!==m||s!==0&&D.nodeType!==3||(C=v+s),D.nodeType===3&&(v+=D.nodeValue.length),(H=D.firstChild)!==null;)$=D,D=H;for(;;){if(D===t)break t;if($===o&&++S===c&&(d=v),$===m&&++R===s&&(C=v),(H=D.nextSibling)!==null)break;D=$,$=D.parentNode}D=H}o=d===-1||C===-1?null:{start:d,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(QA={focusedElem:t,selectionRange:o},hT=!1,Fn=n;Fn!==null;)if(n=Fn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Fn=t;else for(;Fn!==null;){n=Fn;try{var Z=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var X=Z.memoizedProps,Q=Z.memoizedState,G=n.stateNode,K=G.getSnapshotBeforeUpdate(n.elementType===n.type?X:Ih(n.type,X),Q);G.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var Y=n.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(hn(163))}}catch(re){ds(n,n.return,re)}if(t=n.sibling,t!==null){t.return=n.return,Fn=t;break}Fn=n.return}return Z=SB,SB=!1,Z}function rb(t,n,o){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&t)===t){var m=c.destroy;c.destroy=void 0,m!==void 0&&m5(n,o,m)}c=c.next}while(c!==s)}}function yI(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var s=o.create;o.destroy=s()}o=o.next}while(o!==n)}}function g5(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function pV(t){var n=t.alternate;n!==null&&(t.alternate=null,pV(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Dd],delete n[Eb],delete n[r5],delete n[mne],delete n[gne])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mV(t){return t.tag===5||t.tag===3||t.tag===4}function CB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function y5(t,n,o){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=pT));else if(s!==4&&(t=t.child,t!==null))for(y5(t,n,o),t=t.sibling;t!==null;)y5(t,n,o),t=t.sibling}function v5(t,n,o){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(v5(t,n,o),t=t.sibling;t!==null;)v5(t,n,o),t=t.sibling}var bl=null,Mh=!1;function om(t,n,o){for(o=o.child;o!==null;)gV(t,n,o),o=o.sibling}function gV(t,n,o){if(Ld&&typeof Ld.onCommitFiberUnmount=="function")try{Ld.onCommitFiberUnmount(cI,o)}catch{}switch(o.tag){case 5:Gl||C_(o,n);case 6:var s=bl,c=Mh;bl=null,om(t,n,o),bl=s,Mh=c,bl!==null&&(Mh?(t=bl,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):bl.removeChild(o.stateNode));break;case 18:bl!==null&&(Mh?(t=bl,o=o.stateNode,t.nodeType===8?U4(t.parentNode,o):t.nodeType===1&&U4(t,o),xb(t)):U4(bl,o.stateNode));break;case 4:s=bl,c=Mh,bl=o.stateNode.containerInfo,Mh=!0,om(t,n,o),bl=s,Mh=c;break;case 0:case 11:case 14:case 15:if(!Gl&&(s=o.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var m=c,v=m.destroy;m=m.tag,v!==void 0&&(m&2||m&4)&&m5(o,n,v),c=c.next}while(c!==s)}om(t,n,o);break;case 1:if(!Gl&&(C_(o,n),s=o.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=o.memoizedProps,s.state=o.memoizedState,s.componentWillUnmount()}catch(d){ds(o,n,d)}om(t,n,o);break;case 21:om(t,n,o);break;case 22:o.mode&1?(Gl=(s=Gl)||o.memoizedState!==null,om(t,n,o),Gl=s):om(t,n,o);break;default:om(t,n,o)}}function EB(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new kne),n.forEach(function(s){var c=Vne.bind(null,t,s);o.has(s)||(o.add(s),s.then(c,c))})}}function Eh(t,n){var o=n.deletions;if(o!==null)for(var s=0;s<o.length;s++){var c=o[s];try{var m=t,v=n,d=v;e:for(;d!==null;){switch(d.tag){case 5:bl=d.stateNode,Mh=!1;break e;case 3:bl=d.stateNode.containerInfo,Mh=!0;break e;case 4:bl=d.stateNode.containerInfo,Mh=!0;break e}d=d.return}if(bl===null)throw Error(hn(160));gV(m,v,c),bl=null,Mh=!1;var C=c.alternate;C!==null&&(C.return=null),c.return=null}catch(S){ds(c,n,S)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)yV(n,t),n=n.sibling}function yV(t,n){var o=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Eh(n,t),Ad(t),s&4){try{rb(3,t,t.return),yI(3,t)}catch(X){ds(t,t.return,X)}try{rb(5,t,t.return)}catch(X){ds(t,t.return,X)}}break;case 1:Eh(n,t),Ad(t),s&512&&o!==null&&C_(o,o.return);break;case 5:if(Eh(n,t),Ad(t),s&512&&o!==null&&C_(o,o.return),t.flags&32){var c=t.stateNode;try{gb(c,"")}catch(X){ds(t,t.return,X)}}if(s&4&&(c=t.stateNode,c!=null)){var m=t.memoizedProps,v=o!==null?o.memoizedProps:m,d=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{d==="input"&&m.type==="radio"&&m.name!=null&&Bj(c,m),VA(d,v);var S=VA(d,m);for(v=0;v<C.length;v+=2){var R=C[v],D=C[v+1];R==="style"?Uj(c,D):R==="dangerouslySetInnerHTML"?jj(c,D):R==="children"?gb(c,D):yk(c,R,D,S)}switch(d){case"input":$A(c,m);break;case"textarea":Fj(c,m);break;case"select":var $=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!m.multiple;var H=m.value;H!=null?A_(c,!!m.multiple,H,!1):$!==!!m.multiple&&(m.defaultValue!=null?A_(c,!!m.multiple,m.defaultValue,!0):A_(c,!!m.multiple,m.multiple?[]:"",!1))}c[Eb]=m}catch(X){ds(t,t.return,X)}}break;case 6:if(Eh(n,t),Ad(t),s&4){if(t.stateNode===null)throw Error(hn(162));c=t.stateNode,m=t.memoizedProps;try{c.nodeValue=m}catch(X){ds(t,t.return,X)}}break;case 3:if(Eh(n,t),Ad(t),s&4&&o!==null&&o.memoizedState.isDehydrated)try{xb(n.containerInfo)}catch(X){ds(t,t.return,X)}break;case 4:Eh(n,t),Ad(t);break;case 13:Eh(n,t),Ad(t),c=t.child,c.flags&8192&&(m=c.memoizedState!==null,c.stateNode.isHidden=m,!m||c.alternate!==null&&c.alternate.memoizedState!==null||(Xk=bs())),s&4&&EB(t);break;case 22:if(R=o!==null&&o.memoizedState!==null,t.mode&1?(Gl=(S=Gl)||R,Eh(n,t),Gl=S):Eh(n,t),Ad(t),s&8192){if(S=t.memoizedState!==null,(t.stateNode.isHidden=S)&&!R&&t.mode&1)for(Fn=t,R=t.child;R!==null;){for(D=Fn=R;Fn!==null;){switch($=Fn,H=$.child,$.tag){case 0:case 11:case 14:case 15:rb(4,$,$.return);break;case 1:C_($,$.return);var Z=$.stateNode;if(typeof Z.componentWillUnmount=="function"){s=$,o=$.return;try{n=s,Z.props=n.memoizedProps,Z.state=n.memoizedState,Z.componentWillUnmount()}catch(X){ds(s,o,X)}}break;case 5:C_($,$.return);break;case 22:if($.memoizedState!==null){IB(D);continue}}H!==null?(H.return=$,Fn=H):IB(D)}R=R.sibling}e:for(R=null,D=t;;){if(D.tag===5){if(R===null){R=D;try{c=D.stateNode,S?(m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(d=D.stateNode,C=D.memoizedProps.style,v=C!=null&&C.hasOwnProperty("display")?C.display:null,d.style.display=Vj("display",v))}catch(X){ds(t,t.return,X)}}}else if(D.tag===6){if(R===null)try{D.stateNode.nodeValue=S?"":D.memoizedProps}catch(X){ds(t,t.return,X)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===t)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===t)break e;for(;D.sibling===null;){if(D.return===null||D.return===t)break e;R===D&&(R=null),D=D.return}R===D&&(R=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:Eh(n,t),Ad(t),s&4&&EB(t);break;case 21:break;default:Eh(n,t),Ad(t)}}function Ad(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(mV(o)){var s=o;break e}o=o.return}throw Error(hn(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(gb(c,""),s.flags&=-33);var m=CB(t);v5(t,m,c);break;case 3:case 4:var v=s.stateNode.containerInfo,d=CB(t);y5(t,d,v);break;default:throw Error(hn(161))}}catch(C){ds(t,t.return,C)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function zne(t,n,o){Fn=t,vV(t)}function vV(t,n,o){for(var s=(t.mode&1)!==0;Fn!==null;){var c=Fn,m=c.child;if(c.tag===22&&s){var v=c.memoizedState!==null||HC;if(!v){var d=c.alternate,C=d!==null&&d.memoizedState!==null||Gl;d=HC;var S=Gl;if(HC=v,(Gl=C)&&!S)for(Fn=c;Fn!==null;)v=Fn,C=v.child,v.tag===22&&v.memoizedState!==null?MB(c):C!==null?(C.return=v,Fn=C):MB(c);for(;m!==null;)Fn=m,vV(m),m=m.sibling;Fn=c,HC=d,Gl=S}TB(t)}else c.subtreeFlags&8772&&m!==null?(m.return=c,Fn=m):TB(t)}}function TB(t){for(;Fn!==null;){var n=Fn;if(n.flags&8772){var o=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Gl||yI(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!Gl)if(o===null)s.componentDidMount();else{var c=n.elementType===n.type?o.memoizedProps:Ih(n.type,o.memoizedProps);s.componentDidUpdate(c,o.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var m=n.updateQueue;m!==null&&cB(n,m,s);break;case 3:var v=n.updateQueue;if(v!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}cB(n,v,o)}break;case 5:var d=n.stateNode;if(o===null&&n.flags&4){o=d;var C=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var S=n.alternate;if(S!==null){var R=S.memoizedState;if(R!==null){var D=R.dehydrated;D!==null&&xb(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(hn(163))}Gl||n.flags&512&&g5(n)}catch($){ds(n,n.return,$)}}if(n===t){Fn=null;break}if(o=n.sibling,o!==null){o.return=n.return,Fn=o;break}Fn=n.return}}function IB(t){for(;Fn!==null;){var n=Fn;if(n===t){Fn=null;break}var o=n.sibling;if(o!==null){o.return=n.return,Fn=o;break}Fn=n.return}}function MB(t){for(;Fn!==null;){var n=Fn;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{yI(4,n)}catch(C){ds(n,o,C)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var c=n.return;try{s.componentDidMount()}catch(C){ds(n,c,C)}}var m=n.return;try{g5(n)}catch(C){ds(n,m,C)}break;case 5:var v=n.return;try{g5(n)}catch(C){ds(n,v,C)}}}catch(C){ds(n,n.return,C)}if(n===t){Fn=null;break}var d=n.sibling;if(d!==null){d.return=n.return,Fn=d;break}Fn=n.return}}var Dne=Math.ceil,ET=qf.ReactCurrentDispatcher,Kk=qf.ReactCurrentOwner,Ju=qf.ReactCurrentBatchConfig,Io=0,sl=null,ks=null,Cl=0,fu=0,E_=Nm(0),qs=0,Rb=null,vy=0,vI=0,Zk=0,nb=null,Ac=null,Xk=0,X_=1/0,Pf=null,TT=!1,_5=null,Tm=null,GC=!1,mm=null,IT=0,ib=0,x5=null,kE=-1,OE=0;function lc(){return Io&6?bs():kE!==-1?kE:kE=bs()}function Im(t){return t.mode&1?Io&2&&Cl!==0?Cl&-Cl:vne.transition!==null?(OE===0&&(OE=t9()),OE):(t=ea,t!==0||(t=window.event,t=t===void 0?16:l9(t.type)),t):1}function Lh(t,n,o,s){if(50<ib)throw ib=0,x5=null,Error(hn(185));Qb(t,o,s),(!(Io&2)||t!==sl)&&(t===sl&&(!(Io&2)&&(vI|=o),qs===4&&fm(t,Cl)),Lc(t,s),o===1&&Io===0&&!(n.mode&1)&&(X_=bs()+500,pI&&jm()))}function Lc(t,n){var o=t.callbackNode;vre(t,n);var s=uT(t,t===sl?Cl:0);if(s===0)o!==null&&$$(o),t.callbackNode=null,t.callbackPriority=0;else if(n=s&-s,t.callbackPriority!==n){if(o!=null&&$$(o),n===1)t.tag===0?yne(PB.bind(null,t)):I9(PB.bind(null,t)),fne(function(){!(Io&6)&&jm()}),o=null;else{switch(r9(s)){case 1:o=wk;break;case 4:o=Qj;break;case 16:o=cT;break;case 536870912:o=e9;break;default:o=cT}o=TV(o,_V.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function _V(t,n){if(kE=-1,OE=0,Io&6)throw Error(hn(327));var o=t.callbackNode;if(D_()&&t.callbackNode!==o)return null;var s=uT(t,t===sl?Cl:0);if(s===0)return null;if(s&30||s&t.expiredLanes||n)n=MT(t,s);else{n=s;var c=Io;Io|=2;var m=bV();(sl!==t||Cl!==n)&&(Pf=null,X_=bs()+500,cy(t,n));do try{Bne();break}catch(d){xV(t,d)}while(!0);Dk(),ET.current=m,Io=c,ks!==null?n=0:(sl=null,Cl=0,n=qs)}if(n!==0){if(n===2&&(c=WA(t),c!==0&&(s=c,n=b5(t,c))),n===1)throw o=Rb,cy(t,0),fm(t,s),Lc(t,bs()),o;if(n===6)fm(t,s);else{if(c=t.current.alternate,!(s&30)&&!Lne(c)&&(n=MT(t,s),n===2&&(m=WA(t),m!==0&&(s=m,n=b5(t,m))),n===1))throw o=Rb,cy(t,0),fm(t,s),Lc(t,bs()),o;switch(t.finishedWork=c,t.finishedLanes=s,n){case 0:case 1:throw Error(hn(345));case 2:Yg(t,Ac,Pf);break;case 3:if(fm(t,s),(s&130023424)===s&&(n=Xk+500-bs(),10<n)){if(uT(t,0)!==0)break;if(c=t.suspendedLanes,(c&s)!==s){lc(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=t5(Yg.bind(null,t,Ac,Pf),n);break}Yg(t,Ac,Pf);break;case 4:if(fm(t,s),(s&4194240)===s)break;for(n=t.eventTimes,c=-1;0<s;){var v=31-Dh(s);m=1<<v,v=n[v],v>c&&(c=v),s&=~m}if(s=c,s=bs()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Dne(s/1960))-s,10<s){t.timeoutHandle=t5(Yg.bind(null,t,Ac,Pf),s);break}Yg(t,Ac,Pf);break;case 5:Yg(t,Ac,Pf);break;default:throw Error(hn(329))}}}return Lc(t,bs()),t.callbackNode===o?_V.bind(null,t):null}function b5(t,n){var o=nb;return t.current.memoizedState.isDehydrated&&(cy(t,n).flags|=256),t=MT(t,n),t!==2&&(n=Ac,Ac=o,n!==null&&w5(n)),t}function w5(t){Ac===null?Ac=t:Ac.push.apply(Ac,t)}function Lne(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var s=0;s<o.length;s++){var c=o[s],m=c.getSnapshot;c=c.value;try{if(!Fh(m(),c))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fm(t,n){for(n&=~Zk,n&=~vI,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-Dh(n),s=1<<o;t[o]=-1,n&=~s}}function PB(t){if(Io&6)throw Error(hn(327));D_();var n=uT(t,0);if(!(n&1))return Lc(t,bs()),null;var o=MT(t,n);if(t.tag!==0&&o===2){var s=WA(t);s!==0&&(n=s,o=b5(t,s))}if(o===1)throw o=Rb,cy(t,0),fm(t,n),Lc(t,bs()),o;if(o===6)throw Error(hn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Yg(t,Ac,Pf),Lc(t,bs()),null}function Yk(t,n){var o=Io;Io|=1;try{return t(n)}finally{Io=o,Io===0&&(X_=bs()+500,pI&&jm())}}function _y(t){mm!==null&&mm.tag===0&&!(Io&6)&&D_();var n=Io;Io|=1;var o=Ju.transition,s=ea;try{if(Ju.transition=null,ea=1,t)return t()}finally{ea=s,Ju.transition=o,Io=n,!(Io&6)&&jm()}}function Jk(){fu=E_.current,ka(E_)}function cy(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,dne(o)),ks!==null)for(o=ks.return;o!==null;){var s=o;switch(kk(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&mT();break;case 3:K_(),ka(zc),ka(ql),jk();break;case 5:Nk(s);break;case 4:K_();break;case 13:ka(ts);break;case 19:ka(ts);break;case 10:Lk(s.type._context);break;case 22:case 23:Jk()}o=o.return}if(sl=t,ks=t=Mm(t.current,null),Cl=fu=n,qs=0,Rb=null,Zk=vI=vy=0,Ac=nb=null,ny!==null){for(n=0;n<ny.length;n++)if(o=ny[n],s=o.interleaved,s!==null){o.interleaved=null;var c=s.next,m=o.pending;if(m!==null){var v=m.next;m.next=c,s.next=v}o.pending=s}ny=null}return t}function xV(t,n){do{var o=ks;try{if(Dk(),PE.current=CT,ST){for(var s=rs.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}ST=!1}if(yy=0,ol=Gs=rs=null,tb=!1,Mb=0,Kk.current=null,o===null||o.return===null){qs=1,Rb=n,ks=null;break}e:{var m=t,v=o.return,d=o,C=n;if(n=Cl,d.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var S=C,R=d,D=R.tag;if(!(R.mode&1)&&(D===0||D===11||D===15)){var $=R.alternate;$?(R.updateQueue=$.updateQueue,R.memoizedState=$.memoizedState,R.lanes=$.lanes):(R.updateQueue=null,R.memoizedState=null)}var H=gB(v);if(H!==null){H.flags&=-257,yB(H,v,d,m,n),H.mode&1&&mB(m,S,n),n=H,C=S;var Z=n.updateQueue;if(Z===null){var X=new Set;X.add(C),n.updateQueue=X}else Z.add(C);break e}else{if(!(n&1)){mB(m,S,n),Qk();break e}C=Error(hn(426))}}else if(Va&&d.mode&1){var Q=gB(v);if(Q!==null){!(Q.flags&65536)&&(Q.flags|=256),yB(Q,v,d,m,n),Ok(Z_(C,d));break e}}m=C=Z_(C,d),qs!==4&&(qs=2),nb===null?nb=[m]:nb.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,n&=-n,m.lanes|=n;var G=nV(m,C,n);lB(m,G);break e;case 1:d=C;var K=m.type,Y=m.stateNode;if(!(m.flags&128)&&(typeof K.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Tm===null||!Tm.has(Y)))){m.flags|=65536,n&=-n,m.lanes|=n;var re=iV(m,d,n);lB(m,re);break e}}m=m.return}while(m!==null)}SV(o)}catch(fe){n=fe,ks===o&&o!==null&&(ks=o=o.return);continue}break}while(!0)}function bV(){var t=ET.current;return ET.current=CT,t===null?CT:t}function Qk(){(qs===0||qs===3||qs===2)&&(qs=4),sl===null||!(vy&268435455)&&!(vI&268435455)||fm(sl,Cl)}function MT(t,n){var o=Io;Io|=2;var s=bV();(sl!==t||Cl!==n)&&(Pf=null,cy(t,n));do try{$ne();break}catch(c){xV(t,c)}while(!0);if(Dk(),Io=o,ET.current=s,ks!==null)throw Error(hn(261));return sl=null,Cl=0,qs}function $ne(){for(;ks!==null;)wV(ks)}function Bne(){for(;ks!==null&&!cre();)wV(ks)}function wV(t){var n=EV(t.alternate,t,fu);t.memoizedProps=t.pendingProps,n===null?SV(t):ks=n,Kk.current=null}function SV(t){var n=t;do{var o=n.alternate;if(t=n.return,n.flags&32768){if(o=Rne(o,n),o!==null){o.flags&=32767,ks=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qs=6,ks=null;return}}else if(o=Ane(o,n,fu),o!==null){ks=o;return}if(n=n.sibling,n!==null){ks=n;return}ks=n=t}while(n!==null);qs===0&&(qs=5)}function Yg(t,n,o){var s=ea,c=Ju.transition;try{Ju.transition=null,ea=1,Fne(t,n,o,s)}finally{Ju.transition=c,ea=s}return null}function Fne(t,n,o,s){do D_();while(mm!==null);if(Io&6)throw Error(hn(327));o=t.finishedWork;var c=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(hn(177));t.callbackNode=null,t.callbackPriority=0;var m=o.lanes|o.childLanes;if(_re(t,m),t===sl&&(ks=sl=null,Cl=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||GC||(GC=!0,TV(cT,function(){return D_(),null})),m=(o.flags&15990)!==0,o.subtreeFlags&15990||m){m=Ju.transition,Ju.transition=null;var v=ea;ea=1;var d=Io;Io|=4,Kk.current=null,One(t,o),yV(o,t),one(QA),hT=!!JA,QA=JA=null,t.current=o,zne(o),ure(),Io=d,ea=v,Ju.transition=m}else t.current=o;if(GC&&(GC=!1,mm=t,IT=c),m=t.pendingLanes,m===0&&(Tm=null),fre(o.stateNode),Lc(t,bs()),n!==null)for(s=t.onRecoverableError,o=0;o<n.length;o++)c=n[o],s(c.value,{componentStack:c.stack,digest:c.digest});if(TT)throw TT=!1,t=_5,_5=null,t;return IT&1&&t.tag!==0&&D_(),m=t.pendingLanes,m&1?t===x5?ib++:(ib=0,x5=t):ib=0,jm(),null}function D_(){if(mm!==null){var t=r9(IT),n=Ju.transition,o=ea;try{if(Ju.transition=null,ea=16>t?16:t,mm===null)var s=!1;else{if(t=mm,mm=null,IT=0,Io&6)throw Error(hn(331));var c=Io;for(Io|=4,Fn=t.current;Fn!==null;){var m=Fn,v=m.child;if(Fn.flags&16){var d=m.deletions;if(d!==null){for(var C=0;C<d.length;C++){var S=d[C];for(Fn=S;Fn!==null;){var R=Fn;switch(R.tag){case 0:case 11:case 15:rb(8,R,m)}var D=R.child;if(D!==null)D.return=R,Fn=D;else for(;Fn!==null;){R=Fn;var $=R.sibling,H=R.return;if(pV(R),R===S){Fn=null;break}if($!==null){$.return=H,Fn=$;break}Fn=H}}}var Z=m.alternate;if(Z!==null){var X=Z.child;if(X!==null){Z.child=null;do{var Q=X.sibling;X.sibling=null,X=Q}while(X!==null)}}Fn=m}}if(m.subtreeFlags&2064&&v!==null)v.return=m,Fn=v;else e:for(;Fn!==null;){if(m=Fn,m.flags&2048)switch(m.tag){case 0:case 11:case 15:rb(9,m,m.return)}var G=m.sibling;if(G!==null){G.return=m.return,Fn=G;break e}Fn=m.return}}var K=t.current;for(Fn=K;Fn!==null;){v=Fn;var Y=v.child;if(v.subtreeFlags&2064&&Y!==null)Y.return=v,Fn=Y;else e:for(v=K;Fn!==null;){if(d=Fn,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:yI(9,d)}}catch(fe){ds(d,d.return,fe)}if(d===v){Fn=null;break e}var re=d.sibling;if(re!==null){re.return=d.return,Fn=re;break e}Fn=d.return}}if(Io=c,jm(),Ld&&typeof Ld.onPostCommitFiberRoot=="function")try{Ld.onPostCommitFiberRoot(cI,t)}catch{}s=!0}return s}finally{ea=o,Ju.transition=n}}return!1}function AB(t,n,o){n=Z_(o,n),n=nV(t,n,1),t=Em(t,n,1),n=lc(),t!==null&&(Qb(t,1,n),Lc(t,n))}function ds(t,n,o){if(t.tag===3)AB(t,t,o);else for(;n!==null;){if(n.tag===3){AB(n,t,o);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Tm===null||!Tm.has(s))){t=Z_(o,t),t=iV(n,t,1),n=Em(n,t,1),t=lc(),n!==null&&(Qb(n,1,t),Lc(n,t));break}}n=n.return}}function Nne(t,n,o){var s=t.pingCache;s!==null&&s.delete(n),n=lc(),t.pingedLanes|=t.suspendedLanes&o,sl===t&&(Cl&o)===o&&(qs===4||qs===3&&(Cl&130023424)===Cl&&500>bs()-Xk?cy(t,0):Zk|=o),Lc(t,n)}function CV(t,n){n===0&&(t.mode&1?(n=DC,DC<<=1,!(DC&130023424)&&(DC=4194304)):n=1);var o=lc();t=jf(t,n),t!==null&&(Qb(t,n,o),Lc(t,o))}function jne(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),CV(t,o)}function Vne(t,n){var o=0;switch(t.tag){case 13:var s=t.stateNode,c=t.memoizedState;c!==null&&(o=c.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(hn(314))}s!==null&&s.delete(n),CV(t,o)}var EV;EV=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||zc.current)kc=!0;else{if(!(t.lanes&o)&&!(n.flags&128))return kc=!1,Pne(t,n,o);kc=!!(t.flags&131072)}else kc=!1,Va&&n.flags&1048576&&M9(n,vT,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;RE(t,n),t=n.pendingProps;var c=G_(n,ql.current);z_(n,o),c=Uk(null,n,s,t,c,o);var m=Hk();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Dc(s)?(m=!0,gT(n)):m=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Bk(n),c.updater=mI,n.stateNode=c,c._reactInternals=n,l5(n,s,t,o),n=h5(null,n,s,!0,m,o)):(n.tag=0,Va&&m&&Rk(n),sc(null,n,c,o),n=n.child),n;case 16:s=n.elementType;e:{switch(RE(t,n),t=n.pendingProps,c=s._init,s=c(s._payload),n.type=s,c=n.tag=Hne(s),t=Ih(s,t),c){case 0:n=u5(null,n,s,t,o);break e;case 1:n=xB(null,n,s,t,o);break e;case 11:n=vB(null,n,s,t,o);break e;case 14:n=_B(null,n,s,Ih(s.type,t),o);break e}throw Error(hn(306,s,""))}return n;case 0:return s=n.type,c=n.pendingProps,c=n.elementType===s?c:Ih(s,c),u5(t,n,s,c,o);case 1:return s=n.type,c=n.pendingProps,c=n.elementType===s?c:Ih(s,c),xB(t,n,s,c,o);case 3:e:{if(lV(n),t===null)throw Error(hn(387));s=n.pendingProps,m=n.memoizedState,c=m.element,k9(t,n),bT(n,s,null,o);var v=n.memoizedState;if(s=v.element,m.isDehydrated)if(m={element:s,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){c=Z_(Error(hn(423)),n),n=bB(t,n,s,o,c);break e}else if(s!==c){c=Z_(Error(hn(424)),n),n=bB(t,n,s,o,c);break e}else for(gu=Cm(n.stateNode.containerInfo.firstChild),vu=n,Va=!0,kh=null,o=L9(n,null,s,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(q_(),s===c){n=Vf(t,n,o);break e}sc(t,n,s,o)}n=n.child}return n;case 5:return $9(n),t===null&&o5(n),s=n.type,c=n.pendingProps,m=t!==null?t.memoizedProps:null,v=c.children,e5(s,c)?v=null:m!==null&&e5(s,m)&&(n.flags|=32),sV(t,n),sc(t,n,v,o),n.child;case 6:return t===null&&o5(n),null;case 13:return cV(t,n,o);case 4:return Fk(n,n.stateNode.containerInfo),s=n.pendingProps,t===null?n.child=W_(n,null,s,o):sc(t,n,s,o),n.child;case 11:return s=n.type,c=n.pendingProps,c=n.elementType===s?c:Ih(s,c),vB(t,n,s,c,o);case 7:return sc(t,n,n.pendingProps,o),n.child;case 8:return sc(t,n,n.pendingProps.children,o),n.child;case 12:return sc(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(s=n.type._context,c=n.pendingProps,m=n.memoizedProps,v=c.value,_a(_T,s._currentValue),s._currentValue=v,m!==null)if(Fh(m.value,v)){if(m.children===c.children&&!zc.current){n=Vf(t,n,o);break e}}else for(m=n.child,m!==null&&(m.return=n);m!==null;){var d=m.dependencies;if(d!==null){v=m.child;for(var C=d.firstContext;C!==null;){if(C.context===s){if(m.tag===1){C=$f(-1,o&-o),C.tag=2;var S=m.updateQueue;if(S!==null){S=S.shared;var R=S.pending;R===null?C.next=C:(C.next=R.next,R.next=C),S.pending=C}}m.lanes|=o,C=m.alternate,C!==null&&(C.lanes|=o),a5(m.return,o,n),d.lanes|=o;break}C=C.next}}else if(m.tag===10)v=m.type===n.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(hn(341));v.lanes|=o,d=v.alternate,d!==null&&(d.lanes|=o),a5(v,o,n),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===n){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}sc(t,n,c.children,o),n=n.child}return n;case 9:return c=n.type,s=n.pendingProps.children,z_(n,o),c=Qu(c),s=s(c),n.flags|=1,sc(t,n,s,o),n.child;case 14:return s=n.type,c=Ih(s,n.pendingProps),c=Ih(s.type,c),_B(t,n,s,c,o);case 15:return oV(t,n,n.type,n.pendingProps,o);case 17:return s=n.type,c=n.pendingProps,c=n.elementType===s?c:Ih(s,c),RE(t,n),n.tag=1,Dc(s)?(t=!0,gT(n)):t=!1,z_(n,o),z9(n,s,c),l5(n,s,c,o),h5(null,n,s,!0,t,o);case 19:return uV(t,n,o);case 22:return aV(t,n,o)}throw Error(hn(156,n.tag))};function TV(t,n){return Jj(t,n)}function Une(t,n,o,s){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xu(t,n,o,s){return new Une(t,n,o,s)}function eO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hne(t){if(typeof t=="function")return eO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_k)return 11;if(t===xk)return 14}return 2}function Mm(t,n){var o=t.alternate;return o===null?(o=Xu(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function zE(t,n,o,s,c,m){var v=2;if(s=t,typeof t=="function")eO(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case m_:return uy(o.children,c,m,n);case vk:v=8,c|=8;break;case kA:return t=Xu(12,o,n,c|2),t.elementType=kA,t.lanes=m,t;case OA:return t=Xu(13,o,n,c),t.elementType=OA,t.lanes=m,t;case zA:return t=Xu(19,o,n,c),t.elementType=zA,t.lanes=m,t;case Dj:return _I(o,c,m,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Oj:v=10;break e;case zj:v=9;break e;case _k:v=11;break e;case xk:v=14;break e;case cm:v=16,s=null;break e}throw Error(hn(130,t==null?t:typeof t,""))}return n=Xu(v,o,n,c),n.elementType=t,n.type=s,n.lanes=m,n}function uy(t,n,o,s){return t=Xu(7,t,s,n),t.lanes=o,t}function _I(t,n,o,s){return t=Xu(22,t,s,n),t.elementType=Dj,t.lanes=o,t.stateNode={isHidden:!1},t}function Y4(t,n,o){return t=Xu(6,t,null,n),t.lanes=o,t}function J4(t,n,o){return n=Xu(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Gne(t,n,o,s,c){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=k4(0),this.expirationTimes=k4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k4(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function tO(t,n,o,s,c,m,v,d,C){return t=new Gne(t,n,o,d,C),n===1?(n=1,m===!0&&(n|=8)):n=0,m=Xu(3,null,null,n),t.current=m,m.stateNode=t,m.memoizedState={element:s,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bk(m),t}function qne(t,n,o){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p_,key:s==null?null:""+s,children:t,containerInfo:n,implementation:o}}function IV(t){if(!t)return km;t=t._reactInternals;e:{if(Cy(t)!==t||t.tag!==1)throw Error(hn(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Dc(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(hn(171))}if(t.tag===1){var o=t.type;if(Dc(o))return T9(t,o,n)}return n}function MV(t,n,o,s,c,m,v,d,C){return t=tO(o,s,!0,t,c,m,v,d,C),t.context=IV(null),o=t.current,s=lc(),c=Im(o),m=$f(s,c),m.callback=n??null,Em(o,m,c),t.current.lanes=c,Qb(t,c,s),Lc(t,s),t}function xI(t,n,o,s){var c=n.current,m=lc(),v=Im(c);return o=IV(o),n.context===null?n.context=o:n.pendingContext=o,n=$f(m,v),n.payload={element:t},s=s===void 0?null:s,s!==null&&(n.callback=s),t=Em(c,n,v),t!==null&&(Lh(t,c,v,m),ME(t,c,v)),v}function PT(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function RB(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function rO(t,n){RB(t,n),(t=t.alternate)&&RB(t,n)}function Wne(){return null}var PV=typeof reportError=="function"?reportError:function(t){console.error(t)};function nO(t){this._internalRoot=t}bI.prototype.render=nO.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(hn(409));xI(t,n,null,null)};bI.prototype.unmount=nO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;_y(function(){xI(null,t,null,null)}),n[Nf]=null}};function bI(t){this._internalRoot=t}bI.prototype.unstable_scheduleHydration=function(t){if(t){var n=o9();t={blockedOn:null,target:t,priority:n};for(var o=0;o<dm.length&&n!==0&&n<dm[o].priority;o++);dm.splice(o,0,t),o===0&&s9(t)}};function iO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kB(){}function Kne(t,n,o,s,c){if(c){if(typeof s=="function"){var m=s;s=function(){var S=PT(v);m.call(S)}}var v=MV(n,s,t,0,null,!1,!1,"",kB);return t._reactRootContainer=v,t[Nf]=v.current,Sb(t.nodeType===8?t.parentNode:t),_y(),v}for(;c=t.lastChild;)t.removeChild(c);if(typeof s=="function"){var d=s;s=function(){var S=PT(C);d.call(S)}}var C=tO(t,0,!1,null,null,!1,!1,"",kB);return t._reactRootContainer=C,t[Nf]=C.current,Sb(t.nodeType===8?t.parentNode:t),_y(function(){xI(n,C,o,s)}),C}function SI(t,n,o,s,c){var m=o._reactRootContainer;if(m){var v=m;if(typeof c=="function"){var d=c;c=function(){var C=PT(v);d.call(C)}}xI(n,v,t,c)}else v=Kne(o,n,t,c,s);return PT(v)}n9=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=Hx(n.pendingLanes);o!==0&&(Sk(n,o|1),Lc(n,bs()),!(Io&6)&&(X_=bs()+500,jm()))}break;case 13:_y(function(){var s=jf(t,1);if(s!==null){var c=lc();Lh(s,t,1,c)}}),rO(t,1)}};Ck=function(t){if(t.tag===13){var n=jf(t,134217728);if(n!==null){var o=lc();Lh(n,t,134217728,o)}rO(t,134217728)}};i9=function(t){if(t.tag===13){var n=Im(t),o=jf(t,n);if(o!==null){var s=lc();Lh(o,t,n,s)}rO(t,n)}};o9=function(){return ea};a9=function(t,n){var o=ea;try{return ea=t,n()}finally{ea=o}};HA=function(t,n,o){switch(n){case"input":if($A(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var s=o[n];if(s!==t&&s.form===t.form){var c=fI(s);if(!c)throw Error(hn(90));$j(s),$A(s,c)}}}break;case"textarea":Fj(t,o);break;case"select":n=o.value,n!=null&&A_(t,!!o.multiple,n,!1)}};qj=Yk;Wj=_y;var Zne={usingClientEntryPoint:!1,Events:[tw,__,fI,Hj,Gj,Yk]},Mx={findFiberByHostInstance:ry,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Xne={bundleType:Mx.bundleType,version:Mx.version,rendererPackageName:Mx.rendererPackageName,rendererConfig:Mx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qf.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xj(t),t===null?null:t.stateNode},findFiberByHostInstance:Mx.findFiberByHostInstance||Wne,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qC.isDisabled&&qC.supportsFiber)try{cI=qC.inject(Xne),Ld=qC}catch{}}wu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zne;wu.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iO(n))throw Error(hn(200));return qne(t,n,null,o)};wu.createRoot=function(t,n){if(!iO(t))throw Error(hn(299));var o=!1,s="",c=PV;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=tO(t,1,!1,null,null,o,!1,s,c),t[Nf]=n.current,Sb(t.nodeType===8?t.parentNode:t),new nO(n)};wu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(hn(188)):(t=Object.keys(t).join(","),Error(hn(268,t)));return t=Xj(n),t=t===null?null:t.stateNode,t};wu.flushSync=function(t){return _y(t)};wu.hydrate=function(t,n,o){if(!wI(n))throw Error(hn(200));return SI(null,t,n,!0,o)};wu.hydrateRoot=function(t,n,o){if(!iO(t))throw Error(hn(405));var s=o!=null&&o.hydratedSources||null,c=!1,m="",v=PV;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),n=MV(n,null,t,1,o??null,c,!1,m,v),t[Nf]=n.current,Sb(t),s)for(t=0;t<s.length;t++)o=s[t],c=o._getVersion,c=c(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,c]:n.mutableSourceEagerHydrationData.push(o,c);return new bI(n)};wu.render=function(t,n,o){if(!wI(n))throw Error(hn(200));return SI(null,t,n,!1,o)};wu.unmountComponentAtNode=function(t){if(!wI(t))throw Error(hn(40));return t._reactRootContainer?(_y(function(){SI(null,null,t,!1,function(){t._reactRootContainer=null,t[Nf]=null})}),!0):!1};wu.unstable_batchedUpdates=Yk;wu.unstable_renderSubtreeIntoContainer=function(t,n,o,s){if(!wI(o))throw Error(hn(200));if(t==null||t._reactInternals===void 0)throw Error(hn(38));return SI(t,n,o,!1,s)};wu.version="18.2.0-next-9e3b772b8-20220608";function AV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AV)}catch(t){console.error(t)}}AV(),Mj.exports=wu;var Nh=Mj.exports;const AT=Nd(Nh),Yne=uk({__proto__:null,default:AT},[Nh]);/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},kb.apply(this,arguments)}var gm;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gm||(gm={}));const OB="popstate";function Jne(t){t===void 0&&(t={});function n(s,c){let{pathname:m,search:v,hash:d}=s.location;return S5("",{pathname:m,search:v,hash:d},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function o(s,c){return typeof c=="string"?c:RT(c)}return eie(n,o,null,t)}function ll(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function oO(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Qne(){return Math.random().toString(36).substr(2,8)}function zB(t,n){return{usr:t.state,key:t.key,idx:n}}function S5(t,n,o,s){return o===void 0&&(o=null),kb({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?g0(n):n,{state:o,key:n&&n.key||s||Qne()})}function RT(t){let{pathname:n="/",search:o="",hash:s=""}=t;return o&&o!=="?"&&(n+=o.charAt(0)==="?"?o:"?"+o),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function g0(t){let n={};if(t){let o=t.indexOf("#");o>=0&&(n.hash=t.substr(o),t=t.substr(0,o));let s=t.indexOf("?");s>=0&&(n.search=t.substr(s),t=t.substr(0,s)),t&&(n.pathname=t)}return n}function eie(t,n,o,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:m=!1}=s,v=c.history,d=gm.Pop,C=null,S=R();S==null&&(S=0,v.replaceState(kb({},v.state,{idx:S}),""));function R(){return(v.state||{idx:null}).idx}function D(){d=gm.Pop;let Q=R(),G=Q==null?null:Q-S;S=Q,C&&C({action:d,location:X.location,delta:G})}function $(Q,G){d=gm.Push;let K=S5(X.location,Q,G);o&&o(K,Q),S=R()+1;let Y=zB(K,S),re=X.createHref(K);try{v.pushState(Y,"",re)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;c.location.assign(re)}m&&C&&C({action:d,location:X.location,delta:1})}function H(Q,G){d=gm.Replace;let K=S5(X.location,Q,G);o&&o(K,Q),S=R();let Y=zB(K,S),re=X.createHref(K);v.replaceState(Y,"",re),m&&C&&C({action:d,location:X.location,delta:0})}function Z(Q){let G=c.location.origin!=="null"?c.location.origin:c.location.href,K=typeof Q=="string"?Q:RT(Q);return ll(G,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,G)}let X={get action(){return d},get location(){return t(c,v)},listen(Q){if(C)throw new Error("A history only accepts one active listener");return c.addEventListener(OB,D),C=Q,()=>{c.removeEventListener(OB,D),C=null}},createHref(Q){return n(c,Q)},createURL:Z,encodeLocation(Q){let G=Z(Q);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:$,replace:H,go(Q){return v.go(Q)}};return X}var DB;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(DB||(DB={}));function tie(t,n,o){o===void 0&&(o="/");let s=typeof n=="string"?g0(n):n,c=aO(s.pathname||"/",o);if(c==null)return null;let m=RV(t);rie(m);let v=null;for(let d=0;v==null&&d<m.length;++d)v=hie(m[d],pie(c));return v}function RV(t,n,o,s){n===void 0&&(n=[]),o===void 0&&(o=[]),s===void 0&&(s="");let c=(m,v,d)=>{let C={relativePath:d===void 0?m.path||"":d,caseSensitive:m.caseSensitive===!0,childrenIndex:v,route:m};C.relativePath.startsWith("/")&&(ll(C.relativePath.startsWith(s),'Absolute route path "'+C.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),C.relativePath=C.relativePath.slice(s.length));let S=Pm([s,C.relativePath]),R=o.concat(C);m.children&&m.children.length>0&&(ll(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),RV(m.children,n,R,S)),!(m.path==null&&!m.index)&&n.push({path:S,score:cie(S,m.index),routesMeta:R})};return t.forEach((m,v)=>{var d;if(m.path===""||!((d=m.path)!=null&&d.includes("?")))c(m,v);else for(let C of kV(m.path))c(m,v,C)}),n}function kV(t){let n=t.split("/");if(n.length===0)return[];let[o,...s]=n,c=o.endsWith("?"),m=o.replace(/\?$/,"");if(s.length===0)return c?[m,""]:[m];let v=kV(s.join("/")),d=[];return d.push(...v.map(C=>C===""?m:[m,C].join("/"))),c&&d.push(...v),d.map(C=>t.startsWith("/")&&C===""?"/":C)}function rie(t){t.sort((n,o)=>n.score!==o.score?o.score-n.score:uie(n.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}const nie=/^:[\w-]+$/,iie=3,oie=2,aie=1,sie=10,lie=-2,LB=t=>t==="*";function cie(t,n){let o=t.split("/"),s=o.length;return o.some(LB)&&(s+=lie),n&&(s+=oie),o.filter(c=>!LB(c)).reduce((c,m)=>c+(nie.test(m)?iie:m===""?aie:sie),s)}function uie(t,n){return t.length===n.length&&t.slice(0,-1).every((s,c)=>s===n[c])?t[t.length-1]-n[n.length-1]:0}function hie(t,n){let{routesMeta:o}=t,s={},c="/",m=[];for(let v=0;v<o.length;++v){let d=o[v],C=v===o.length-1,S=c==="/"?n:n.slice(c.length)||"/",R=die({path:d.relativePath,caseSensitive:d.caseSensitive,end:C},S);if(!R)return null;Object.assign(s,R.params);let D=d.route;m.push({params:s,pathname:Pm([c,R.pathname]),pathnameBase:_ie(Pm([c,R.pathnameBase])),route:D}),R.pathnameBase!=="/"&&(c=Pm([c,R.pathnameBase]))}return m}function die(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[o,s]=fie(t.path,t.caseSensitive,t.end),c=n.match(o);if(!c)return null;let m=c[0],v=m.replace(/(.)\/+$/,"$1"),d=c.slice(1);return{params:s.reduce((S,R,D)=>{let{paramName:$,isOptional:H}=R;if($==="*"){let X=d[D]||"";v=m.slice(0,m.length-X.length).replace(/(.)\/+$/,"$1")}const Z=d[D];return H&&!Z?S[$]=void 0:S[$]=mie(Z||"",$),S},{}),pathname:m,pathnameBase:v,pattern:t}}function fie(t,n,o){n===void 0&&(n=!1),o===void 0&&(o=!0),oO(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,d,C)=>(s.push({paramName:d,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),s]}function pie(t){try{return decodeURI(t)}catch(n){return oO(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function mie(t,n){try{return decodeURIComponent(t)}catch(o){return oO(!1,'The value for the URL param "'+n+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+o+").")),t}}function aO(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let o=n.endsWith("/")?n.length-1:n.length,s=t.charAt(o);return s&&s!=="/"?null:t.slice(o)||"/"}function gie(t,n){n===void 0&&(n="/");let{pathname:o,search:s="",hash:c=""}=typeof t=="string"?g0(t):t;return{pathname:o?o.startsWith("/")?o:yie(o,n):n,search:xie(s),hash:bie(c)}}function yie(t,n){let o=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function Q4(t,n,o,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vie(t){return t.filter((n,o)=>o===0||n.route.path&&n.route.path.length>0)}function sO(t,n){let o=vie(t);return n?o.map((s,c)=>c===t.length-1?s.pathname:s.pathnameBase):o.map(s=>s.pathnameBase)}function lO(t,n,o,s){s===void 0&&(s=!1);let c;typeof t=="string"?c=g0(t):(c=kb({},t),ll(!c.pathname||!c.pathname.includes("?"),Q4("?","pathname","search",c)),ll(!c.pathname||!c.pathname.includes("#"),Q4("#","pathname","hash",c)),ll(!c.search||!c.search.includes("#"),Q4("#","search","hash",c)));let m=t===""||c.pathname==="",v=m?"/":c.pathname,d;if(v==null)d=o;else{let D=n.length-1;if(!s&&v.startsWith("..")){let $=v.split("/");for(;$[0]==="..";)$.shift(),D-=1;c.pathname=$.join("/")}d=D>=0?n[D]:"/"}let C=gie(c,d),S=v&&v!=="/"&&v.endsWith("/"),R=(m||v===".")&&o.endsWith("/");return!C.pathname.endsWith("/")&&(S||R)&&(C.pathname+="/"),C}const Pm=t=>t.join("/").replace(/\/\/+/g,"/"),_ie=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xie=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bie=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wie(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OV=["post","put","patch","delete"];new Set(OV);const Sie=["get",...OV];new Set(Sie);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ob(){return Ob=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},Ob.apply(this,arguments)}const cO=E.createContext(null),Cie=E.createContext(null),Vm=E.createContext(null),CI=E.createContext(null),jd=E.createContext({outlet:null,matches:[],isDataRoute:!1}),zV=E.createContext(null);function Eie(t,n){let{relative:o}=n===void 0?{}:n;y0()||ll(!1);let{basename:s,navigator:c}=E.useContext(Vm),{hash:m,pathname:v,search:d}=$V(t,{relative:o}),C=v;return s!=="/"&&(C=v==="/"?s:Pm([s,v])),c.createHref({pathname:C,search:d,hash:m})}function y0(){return E.useContext(CI)!=null}function nw(){return y0()||ll(!1),E.useContext(CI).location}function DV(t){E.useContext(Vm).static||E.useLayoutEffect(t)}function LV(){let{isDataRoute:t}=E.useContext(jd);return t?Nie():Tie()}function Tie(){y0()||ll(!1);let t=E.useContext(cO),{basename:n,future:o,navigator:s}=E.useContext(Vm),{matches:c}=E.useContext(jd),{pathname:m}=nw(),v=JSON.stringify(sO(c,o.v7_relativeSplatPath)),d=E.useRef(!1);return DV(()=>{d.current=!0}),E.useCallback(function(S,R){if(R===void 0&&(R={}),!d.current)return;if(typeof S=="number"){s.go(S);return}let D=lO(S,JSON.parse(v),m,R.relative==="path");t==null&&n!=="/"&&(D.pathname=D.pathname==="/"?n:Pm([n,D.pathname])),(R.replace?s.replace:s.push)(D,R.state,R)},[n,s,v,m,t])}const Iie=E.createContext(null);function Mie(t){let n=E.useContext(jd).outlet;return n&&E.createElement(Iie.Provider,{value:t},n)}function D3e(){let{matches:t}=E.useContext(jd),n=t[t.length-1];return n?n.params:{}}function $V(t,n){let{relative:o}=n===void 0?{}:n,{future:s}=E.useContext(Vm),{matches:c}=E.useContext(jd),{pathname:m}=nw(),v=JSON.stringify(sO(c,s.v7_relativeSplatPath));return E.useMemo(()=>lO(t,JSON.parse(v),m,o==="path"),[t,v,m,o])}function Pie(t,n){return Aie(t,n)}function Aie(t,n,o,s){y0()||ll(!1);let{navigator:c}=E.useContext(Vm),{matches:m}=E.useContext(jd),v=m[m.length-1],d=v?v.params:{};v&&v.pathname;let C=v?v.pathnameBase:"/";v&&v.route;let S=nw(),R;if(n){var D;let Q=typeof n=="string"?g0(n):n;C==="/"||(D=Q.pathname)!=null&&D.startsWith(C)||ll(!1),R=Q}else R=S;let $=R.pathname||"/",H=C==="/"?$:$.slice(C.length)||"/",Z=tie(t,{pathname:H}),X=Die(Z&&Z.map(Q=>Object.assign({},Q,{params:Object.assign({},d,Q.params),pathname:Pm([C,c.encodeLocation?c.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?C:Pm([C,c.encodeLocation?c.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),m,o,s);return n&&X?E.createElement(CI.Provider,{value:{location:Ob({pathname:"/",search:"",hash:"",state:null,key:"default"},R),navigationType:gm.Pop}},X):X}function Rie(){let t=Fie(),n=wie(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),o=t instanceof Error?t.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},n),o?E.createElement("pre",{style:c},o):null,null)}const kie=E.createElement(Rie,null);class Oie extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,o){return o.location!==n.location||o.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:o.error,location:o.location,revalidation:n.revalidation||o.revalidation}}componentDidCatch(n,o){console.error("React Router caught the following error during render",n,o)}render(){return this.state.error!==void 0?E.createElement(jd.Provider,{value:this.props.routeContext},E.createElement(zV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zie(t){let{routeContext:n,match:o,children:s}=t,c=E.useContext(cO);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),E.createElement(jd.Provider,{value:n},s)}function Die(t,n,o,s){var c;if(n===void 0&&(n=[]),o===void 0&&(o=null),s===void 0&&(s=null),t==null){var m;if((m=o)!=null&&m.errors)t=o.matches;else return null}let v=t,d=(c=o)==null?void 0:c.errors;if(d!=null){let R=v.findIndex(D=>D.route.id&&d?.[D.route.id]);R>=0||ll(!1),v=v.slice(0,Math.min(v.length,R+1))}let C=!1,S=-1;if(o&&s&&s.v7_partialHydration)for(let R=0;R<v.length;R++){let D=v[R];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(S=R),D.route.id){let{loaderData:$,errors:H}=o,Z=D.route.loader&&$[D.route.id]===void 0&&(!H||H[D.route.id]===void 0);if(D.route.lazy||Z){C=!0,S>=0?v=v.slice(0,S+1):v=[v[0]];break}}}return v.reduceRight((R,D,$)=>{let H,Z=!1,X=null,Q=null;o&&(H=d&&D.route.id?d[D.route.id]:void 0,X=D.route.errorElement||kie,C&&(S<0&&$===0?(jie("route-fallback",!1),Z=!0,Q=null):S===$&&(Z=!0,Q=D.route.hydrateFallbackElement||null)));let G=n.concat(v.slice(0,$+1)),K=()=>{let Y;return H?Y=X:Z?Y=Q:D.route.Component?Y=E.createElement(D.route.Component,null):D.route.element?Y=D.route.element:Y=R,E.createElement(zie,{match:D,routeContext:{outlet:R,matches:G,isDataRoute:o!=null},children:Y})};return o&&(D.route.ErrorBoundary||D.route.errorElement||$===0)?E.createElement(Oie,{location:o.location,revalidation:o.revalidation,component:X,error:H,children:K(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):K()},null)}var BV=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BV||{}),kT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kT||{});function Lie(t){let n=E.useContext(cO);return n||ll(!1),n}function $ie(t){let n=E.useContext(Cie);return n||ll(!1),n}function Bie(t){let n=E.useContext(jd);return n||ll(!1),n}function FV(t){let n=Bie(),o=n.matches[n.matches.length-1];return o.route.id||ll(!1),o.route.id}function Fie(){var t;let n=E.useContext(zV),o=$ie(kT.UseRouteError),s=FV(kT.UseRouteError);return n!==void 0?n:(t=o.errors)==null?void 0:t[s]}function Nie(){let{router:t}=Lie(BV.UseNavigateStable),n=FV(kT.UseNavigateStable),o=E.useRef(!1);return DV(()=>{o.current=!0}),E.useCallback(function(c,m){m===void 0&&(m={}),o.current&&(typeof c=="number"?t.navigate(c):t.navigate(c,Ob({fromRouteId:n},m)))},[t,n])}const $B={};function jie(t,n,o){!n&&!$B[t]&&($B[t]=!0)}function Vie(t){let{to:n,replace:o,state:s,relative:c}=t;y0()||ll(!1);let{future:m,static:v}=E.useContext(Vm),{matches:d}=E.useContext(jd),{pathname:C}=nw(),S=LV(),R=lO(n,sO(d,m.v7_relativeSplatPath),C,c==="path"),D=JSON.stringify(R);return E.useEffect(()=>S(JSON.parse(D),{replace:o,state:s,relative:c}),[S,D,c,o,s]),null}function BB(t){return Mie(t.context)}function Uie(t){let{basename:n="/",children:o=null,location:s,navigationType:c=gm.Pop,navigator:m,static:v=!1,future:d}=t;y0()&&ll(!1);let C=n.replace(/^\/*/,"/"),S=E.useMemo(()=>({basename:C,navigator:m,static:v,future:Ob({v7_relativeSplatPath:!1},d)}),[C,d,m,v]);typeof s=="string"&&(s=g0(s));let{pathname:R="/",search:D="",hash:$="",state:H=null,key:Z="default"}=s,X=E.useMemo(()=>{let Q=aO(R,C);return Q==null?null:{location:{pathname:Q,search:D,hash:$,state:H,key:Z},navigationType:c}},[C,R,D,$,H,Z,c]);return X==null?null:E.createElement(Vm.Provider,{value:S},E.createElement(CI.Provider,{children:o,value:X}))}new Promise(()=>{});/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C5(){return C5=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},C5.apply(this,arguments)}function Hie(t,n){if(t==null)return{};var o={},s=Object.keys(t),c,m;for(m=0;m<s.length;m++)c=s[m],!(n.indexOf(c)>=0)&&(o[c]=t[c]);return o}function Gie(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qie(t,n){return t.button===0&&(!n||n==="_self")&&!Gie(t)}const Wie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Kie="6";try{window.__reactRouterVersion=Kie}catch{}const Zie="startTransition",FB=f0[Zie];function Xie(t){let{basename:n,children:o,future:s,window:c}=t,m=E.useRef();m.current==null&&(m.current=Jne({window:c,v5Compat:!0}));let v=m.current,[d,C]=E.useState({action:v.action,location:v.location}),{v7_startTransition:S}=s||{},R=E.useCallback(D=>{S&&FB?FB(()=>C(D)):C(D)},[C,S]);return E.useLayoutEffect(()=>v.listen(R),[v,R]),E.createElement(Uie,{basename:n,children:o,location:d.location,navigationType:d.action,navigator:v,future:s})}const Yie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hs=E.forwardRef(function(n,o){let{onClick:s,relative:c,reloadDocument:m,replace:v,state:d,target:C,to:S,preventScrollReset:R,unstable_viewTransition:D}=n,$=Hie(n,Wie),{basename:H}=E.useContext(Vm),Z,X=!1;if(typeof S=="string"&&Jie.test(S)&&(Z=S,Yie))try{let Y=new URL(window.location.href),re=S.startsWith("//")?new URL(Y.protocol+S):new URL(S),fe=aO(re.pathname,H);re.origin===Y.origin&&fe!=null?S=fe+re.search+re.hash:X=!0}catch{}let Q=Eie(S,{relative:c}),G=Qie(S,{replace:v,state:d,target:C,preventScrollReset:R,relative:c,unstable_viewTransition:D});function K(Y){s&&s(Y),Y.defaultPrevented||G(Y)}return E.createElement("a",C5({},$,{href:Z||Q,onClick:X||m?s:K,ref:o,target:C}))});var NB;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(NB||(NB={}));var jB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jB||(jB={}));function Qie(t,n){let{target:o,replace:s,state:c,preventScrollReset:m,relative:v,unstable_viewTransition:d}=n===void 0?{}:n,C=LV(),S=nw(),R=$V(t,{relative:v});return E.useCallback(D=>{if(qie(D,o)){D.preventDefault();let $=s!==void 0?s:RT(S)===RT(R);C(t,{replace:$,state:c,preventScrollReset:m,relative:v,unstable_viewTransition:d})}},[S,C,R,s,c,o,t,m,v,d])}var eoe=Object.defineProperty,toe=(t,n,o)=>n in t?eoe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,qg=(t,n,o)=>(toe(t,typeof n!="symbol"?n+"":n,o),o),aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VB={},Px={},iw={},Gu=aa&&aa.__assign||function(){return Gu=Object.assign||function(t){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Gu.apply(this,arguments)},WC=aa&&aa.__awaiter||function(t,n,o,s){function c(m){return m instanceof o?m:new o(function(v){v(m)})}return new(o||(o=Promise))(function(m,v){function d(R){try{S(s.next(R))}catch(D){v(D)}}function C(R){try{S(s.throw(R))}catch(D){v(D)}}function S(R){R.done?m(R.value):c(R.value).then(d,C)}S((s=s.apply(t,n||[])).next())})},KC=aa&&aa.__generator||function(t,n){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},s,c,m,v;return v={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function d(S){return function(R){return C([S,R])}}function C(S){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,c&&(m=S[0]&2?c.return:S[0]?c.throw||((m=c.return)&&m.call(c),0):c.next)&&!(m=m.call(c,S[1])).done)return m;switch(c=0,m&&(S=[S[0]&2,m.value]),S[0]){case 0:case 1:m=S;break;case 4:return o.label++,{value:S[1],done:!1};case 5:o.label++,c=S[1],S=[0];continue;case 7:S=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(S[0]===6||S[0]===2)){o=0;continue}if(S[0]===3&&(!m||S[1]>m[0]&&S[1]<m[3])){o.label=S[1];break}if(S[0]===6&&o.label<m[1]){o.label=m[1],m=S;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(S);break}m[2]&&o.ops.pop(),o.trys.pop();continue}S=n.call(t,o)}catch(R){S=[6,R],c=0}finally{s=m=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(iw,"__esModule",{value:!0});iw.FrappeCall=void 0;var roe=function(){function t(n,o,s,c,m){this.appURL=n,this.axios=o,this.useToken=s??!1,this.token=c,this.tokenType=m}return t.prototype.get=function(n,o){return WC(this,void 0,void 0,function(){return KC(this,function(s){return[2,this.axios.get("/api/method/".concat(n),{params:o}).then(function(c){return c.data}).catch(function(c){var m,v;throw Gu(Gu({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:(m=c.response.data.message)!==null&&m!==void 0?m:"There was an error.",exception:(v=c.response.data.exception)!==null&&v!==void 0?v:""})})]})})},t.prototype.post=function(n,o){return WC(this,void 0,void 0,function(){return KC(this,function(s){return[2,this.axios.post("/api/method/".concat(n),Gu({},o)).then(function(c){return c.data}).catch(function(c){var m,v;throw Gu(Gu({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:(m=c.response.data.message)!==null&&m!==void 0?m:"There was an error.",exception:(v=c.response.data.exception)!==null&&v!==void 0?v:""})})]})})},t.prototype.put=function(n,o){return WC(this,void 0,void 0,function(){return KC(this,function(s){return[2,this.axios.put("/api/method/".concat(n),Gu({},o)).then(function(c){return c.data}).catch(function(c){var m,v;throw Gu(Gu({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:(m=c.response.data.message)!==null&&m!==void 0?m:"There was an error.",exception:(v=c.response.data.exception)!==null&&v!==void 0?v:""})})]})})},t.prototype.delete=function(n,o){return WC(this,void 0,void 0,function(){return KC(this,function(s){return[2,this.axios.delete("/api/method/".concat(n),{params:o}).then(function(c){return c.data}).catch(function(c){var m,v;throw Gu(Gu({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:(m=c.response.data.message)!==null&&m!==void 0?m:"There was an error.",exception:(v=c.response.data.exception)!==null&&v!==void 0?v:""})})]})})},t}();iw.FrappeCall=roe;var ow={},Ps=aa&&aa.__assign||function(){return Ps=Object.assign||function(t){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Ps.apply(this,arguments)},Wg=aa&&aa.__awaiter||function(t,n,o,s){function c(m){return m instanceof o?m:new o(function(v){v(m)})}return new(o||(o=Promise))(function(m,v){function d(R){try{S(s.next(R))}catch(D){v(D)}}function C(R){try{S(s.throw(R))}catch(D){v(D)}}function S(R){R.done?m(R.value):c(R.value).then(d,C)}S((s=s.apply(t,n||[])).next())})},Kg=aa&&aa.__generator||function(t,n){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},s,c,m,v;return v={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function d(S){return function(R){return C([S,R])}}function C(S){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,c&&(m=S[0]&2?c.return:S[0]?c.throw||((m=c.return)&&m.call(c),0):c.next)&&!(m=m.call(c,S[1])).done)return m;switch(c=0,m&&(S=[S[0]&2,m.value]),S[0]){case 0:case 1:m=S;break;case 4:return o.label++,{value:S[1],done:!1};case 5:o.label++,c=S[1],S=[0];continue;case 7:S=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(S[0]===6||S[0]===2)){o=0;continue}if(S[0]===3&&(!m||S[1]>m[0]&&S[1]<m[3])){o.label=S[1];break}if(S[0]===6&&o.label<m[1]){o.label=m[1],m=S;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(S);break}m[2]&&o.ops.pop(),o.trys.pop();continue}S=n.call(t,o)}catch(R){S=[6,R],c=0}finally{s=m=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(ow,"__esModule",{value:!0});ow.FrappeDB=void 0;var noe=function(){function t(n,o,s,c,m){this.appURL=n,this.axios=o,this.useToken=s??!1,this.token=c,this.tokenType=m}return t.prototype.getDoc=function(n,o){return o===void 0&&(o=""),Wg(this,void 0,void 0,function(){return Kg(this,function(s){return[2,this.axios.get("/api/resource/".concat(n,"/").concat(o)).then(function(c){return c.data.data}).catch(function(c){var m,v;throw Ps(Ps({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:"There was an error while fetching the document.",exception:(v=(m=c.response.data.exception)!==null&&m!==void 0?m:c.response.data.exc_type)!==null&&v!==void 0?v:""})})]})})},t.prototype.getDocList=function(n,o){var s;return Wg(this,void 0,void 0,function(){var c,m,v,d,C,S,R,D,$,H,Z;return Kg(this,function(X){return c={},o&&(m=o.fields,v=o.filters,d=o.orFilters,C=o.orderBy,S=o.limit,R=o.limit_start,D=o.groupBy,$=o.asDict,H=$===void 0?!0:$,Z=C?"".concat(String(C?.field)," ").concat((s=C?.order)!==null&&s!==void 0?s:"asc"):"",c={fields:m?JSON.stringify(m):void 0,filters:v?JSON.stringify(v):void 0,or_filters:d?JSON.stringify(d):void 0,order_by:Z,group_by:D,limit:S,limit_start:R,as_dict:H}),[2,this.axios.get("/api/resource/".concat(n),{params:c}).then(function(Q){return Q.data.data}).catch(function(Q){var G,K;throw Ps(Ps({},Q.response.data),{httpStatus:Q.response.status,httpStatusText:Q.response.statusText,message:"There was an error while fetching the documents.",exception:(K=(G=Q.response.data.exception)!==null&&G!==void 0?G:Q.response.data.exc_type)!==null&&K!==void 0?K:""})})]})})},t.prototype.createDoc=function(n,o){return Wg(this,void 0,void 0,function(){return Kg(this,function(s){return[2,this.axios.post("/api/resource/".concat(n),Ps({},o)).then(function(c){return c.data.data}).catch(function(c){var m,v,d;throw Ps(Ps({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:(m=c.response.data.message)!==null&&m!==void 0?m:"There was an error while creating the document.",exception:(d=(v=c.response.data.exception)!==null&&v!==void 0?v:c.response.data.exc_type)!==null&&d!==void 0?d:""})})]})})},t.prototype.updateDoc=function(n,o,s){return Wg(this,void 0,void 0,function(){return Kg(this,function(c){return[2,this.axios.put("/api/resource/".concat(n,"/").concat(o),Ps({},s)).then(function(m){return m.data.data}).catch(function(m){var v,d,C;throw Ps(Ps({},m.response.data),{httpStatus:m.response.status,httpStatusText:m.response.statusText,message:(v=m.response.data.message)!==null&&v!==void 0?v:"There was an error while updating the document.",exception:(C=(d=m.response.data.exception)!==null&&d!==void 0?d:m.response.data.exc_type)!==null&&C!==void 0?C:""})})]})})},t.prototype.deleteDoc=function(n,o){return Wg(this,void 0,void 0,function(){return Kg(this,function(s){return[2,this.axios.delete("/api/resource/".concat(n,"/").concat(o)).then(function(c){return c.data}).catch(function(c){var m,v;throw Ps(Ps({},c.response.data),{httpStatus:c.response.status,httpStatusText:c.response.statusText,message:"There was an error while deleting the document.",exception:(v=(m=c.response.data.exception)!==null&&m!==void 0?m:c.response.data.exc_type)!==null&&v!==void 0?v:""})})]})})},t.prototype.getCount=function(n,o,s,c){return s===void 0&&(s=!1),c===void 0&&(c=!1),Wg(this,void 0,void 0,function(){var m;return Kg(this,function(v){return m={doctype:n,filters:[]},s&&(m.cache=s),c&&(m.debug=c),o&&(m.filters=o?JSON.stringify(o):void 0),[2,this.axios.get("/api/method/frappe.client.get_count",{params:m}).then(function(d){return d.data.message}).catch(function(d){var C,S;throw Ps(Ps({},d.response.data),{httpStatus:d.response.status,httpStatusText:d.response.statusText,message:"There was an error while getting the count.",exception:(S=(C=d.response.data.exception)!==null&&C!==void 0?C:d.response.data.exc_type)!==null&&S!==void 0?S:""})})]})})},t.prototype.getLastDoc=function(n,o){return Wg(this,void 0,void 0,function(){var s,c;return Kg(this,function(m){switch(m.label){case 0:return s={orderBy:{field:"creation",order:"desc"}},o&&(s=Ps(Ps({},s),o)),[4,this.getDocList(n,Ps(Ps({},s),{limit:1,fields:["name"]}))];case 1:return c=m.sent(),c.length>0?[2,this.getDoc(n,c[0].name)]:[2,{}]}})})},t}();ow.FrappeDB=noe;var aw={},OT=aa&&aa.__assign||function(){return OT=Object.assign||function(t){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},OT.apply(this,arguments)},ioe=aa&&aa.__awaiter||function(t,n,o,s){function c(m){return m instanceof o?m:new o(function(v){v(m)})}return new(o||(o=Promise))(function(m,v){function d(R){try{S(s.next(R))}catch(D){v(D)}}function C(R){try{S(s.throw(R))}catch(D){v(D)}}function S(R){R.done?m(R.value):c(R.value).then(d,C)}S((s=s.apply(t,n||[])).next())})},ooe=aa&&aa.__generator||function(t,n){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},s,c,m,v;return v={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function d(S){return function(R){return C([S,R])}}function C(S){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,c&&(m=S[0]&2?c.return:S[0]?c.throw||((m=c.return)&&m.call(c),0):c.next)&&!(m=m.call(c,S[1])).done)return m;switch(c=0,m&&(S=[S[0]&2,m.value]),S[0]){case 0:case 1:m=S;break;case 4:return o.label++,{value:S[1],done:!1};case 5:o.label++,c=S[1],S=[0];continue;case 7:S=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(S[0]===6||S[0]===2)){o=0;continue}if(S[0]===3&&(!m||S[1]>m[0]&&S[1]<m[3])){o.label=S[1];break}if(S[0]===6&&o.label<m[1]){o.label=m[1],m=S;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(S);break}m[2]&&o.ops.pop(),o.trys.pop();continue}S=n.call(t,o)}catch(R){S=[6,R],c=0}finally{s=m=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(aw,"__esModule",{value:!0});aw.FrappeFileUpload=void 0;var aoe=function(){function t(n,o,s,c,m){this.appURL=n,this.axios=o,this.useToken=s??!1,this.token=c,this.tokenType=m}return t.prototype.uploadFile=function(n,o,s,c){return c===void 0&&(c="upload_file"),ioe(this,void 0,void 0,function(){var m,v,d,C,S,R,D,$;return ooe(this,function(H){return m=new FormData,n&&m.append("file",n,n.name),v=o.isPrivate,d=o.folder,C=o.file_url,S=o.doctype,R=o.docname,D=o.fieldname,$=o.otherData,v&&m.append("is_private","1"),d&&m.append("folder",d),C&&m.append("file_url",C),S&&R&&(m.append("doctype",S),m.append("docname",R),D&&m.append("fieldname",D)),$&&Object.keys($).forEach(function(Z){var X=$[Z];m.append(Z,X)}),[2,this.axios.post("/api/method/".concat(c),m,{onUploadProgress:function(Z){s&&s(Z.loaded,Z.total)}}).catch(function(Z){var X,Q;throw OT(OT({},Z.response.data),{httpStatus:Z.response.status,httpStatusText:Z.response.statusText,message:(X=Z.response.data.message)!==null&&X!==void 0?X:"There was an error while uploading the file.",exception:(Q=Z.response.data.exception)!==null&&Q!==void 0?Q:""})})]})})},t}();aw.FrappeFileUpload=aoe;var Y_={},NV={exports:{}},uO={exports:{}},jV=function(t,n){return function(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];return t.apply(n,o)}},soe=jV,Um=Object.prototype.toString;function hO(t){return Array.isArray(t)}function E5(t){return typeof t>"u"}function loe(t){return t!==null&&!E5(t)&&t.constructor!==null&&!E5(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function VV(t){return Um.call(t)==="[object ArrayBuffer]"}function coe(t){return Um.call(t)==="[object FormData]"}function uoe(t){var n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&VV(t.buffer),n}function hoe(t){return typeof t=="string"}function doe(t){return typeof t=="number"}function UV(t){return t!==null&&typeof t=="object"}function DE(t){if(Um.call(t)!=="[object Object]")return!1;var n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}function foe(t){return Um.call(t)==="[object Date]"}function poe(t){return Um.call(t)==="[object File]"}function moe(t){return Um.call(t)==="[object Blob]"}function HV(t){return Um.call(t)==="[object Function]"}function goe(t){return UV(t)&&HV(t.pipe)}function yoe(t){return Um.call(t)==="[object URLSearchParams]"}function voe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function _oe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function dO(t,n){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),hO(t))for(var o=0,s=t.length;o<s;o++)n.call(null,t[o],o,t);else for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&n.call(null,t[c],c,t)}function T5(){var t={};function n(c,m){DE(t[m])&&DE(c)?t[m]=T5(t[m],c):DE(c)?t[m]=T5({},c):hO(c)?t[m]=c.slice():t[m]=c}for(var o=0,s=arguments.length;o<s;o++)dO(arguments[o],n);return t}function xoe(t,n,o){return dO(n,function(s,c){o&&typeof s=="function"?t[c]=soe(s,o):t[c]=s}),t}function boe(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Bc={isArray:hO,isArrayBuffer:VV,isBuffer:loe,isFormData:coe,isArrayBufferView:uoe,isString:hoe,isNumber:doe,isObject:UV,isPlainObject:DE,isUndefined:E5,isDate:foe,isFile:poe,isBlob:moe,isFunction:HV,isStream:goe,isURLSearchParams:yoe,isStandardBrowserEnv:_oe,forEach:dO,merge:T5,extend:xoe,trim:voe,stripBOM:boe},Wv=Bc;function UB(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var GV=function(t,n,o){if(!n)return t;var s;if(o)s=o(n);else if(Wv.isURLSearchParams(n))s=n.toString();else{var c=[];Wv.forEach(n,function(v,d){v===null||typeof v>"u"||(Wv.isArray(v)?d=d+"[]":v=[v],Wv.forEach(v,function(C){Wv.isDate(C)?C=C.toISOString():Wv.isObject(C)&&(C=JSON.stringify(C)),c.push(UB(d)+"="+UB(C))}))}),s=c.join("&")}if(s){var m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t},woe=Bc;function EI(){this.handlers=[]}EI.prototype.use=function(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};EI.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};EI.prototype.forEach=function(t){woe.forEach(this.handlers,function(n){n!==null&&t(n)})};var Soe=EI,Coe=Bc,Eoe=function(t,n){Coe.forEach(t,function(o,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(t[n]=o,delete t[s])})},qV=function(t,n,o,s,c){return t.config=n,o&&(t.code=o),t.request=s,t.response=c,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},WV={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eP,HB;function KV(){if(HB)return eP;HB=1;var t=qV;return eP=function(n,o,s,c,m){var v=new Error(n);return t(v,o,s,c,m)},eP}var tP,GB;function Toe(){if(GB)return tP;GB=1;var t=KV();return tP=function(n,o,s){var c=s.config.validateStatus;!s.status||!c||c(s.status)?n(s):o(t("Request failed with status code "+s.status,s.config,null,s.request,s))},tP}var rP,qB;function Ioe(){if(qB)return rP;qB=1;var t=Bc;return rP=t.isStandardBrowserEnv()?function(){return{write:function(n,o,s,c,m,v){var d=[];d.push(n+"="+encodeURIComponent(o)),t.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),t.isString(c)&&d.push("path="+c),t.isString(m)&&d.push("domain="+m),v===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),rP}var WB,KB;function Moe(){return KB||(KB=1,WB=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),WB}var ZB,XB;function Poe(){return XB||(XB=1,ZB=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),ZB}var nP,YB;function Aoe(){if(YB)return nP;YB=1;var t=Moe(),n=Poe();return nP=function(o,s){return o&&!t(s)?n(o,s):s},nP}var iP,JB;function Roe(){if(JB)return iP;JB=1;var t=Bc,n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return iP=function(o){var s={},c,m,v;return o&&t.forEach(o.split(`
`),function(d){if(v=d.indexOf(":"),c=t.trim(d.substr(0,v)).toLowerCase(),m=t.trim(d.substr(v+1)),c){if(s[c]&&n.indexOf(c)>=0)return;c==="set-cookie"?s[c]=(s[c]?s[c]:[]).concat([m]):s[c]=s[c]?s[c]+", "+m:m}}),s},iP}var oP,QB;function koe(){if(QB)return oP;QB=1;var t=Bc;return oP=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),s;function c(m){var v=m;return n&&(o.setAttribute("href",v),v=o.href),o.setAttribute("href",v),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return s=c(window.location.href),function(m){var v=t.isString(m)?c(m):m;return v.protocol===s.protocol&&v.host===s.host}}():function(){return function(){return!0}}(),oP}var aP,eF;function TI(){if(eF)return aP;eF=1;function t(n){this.message=n}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,aP=t,aP}var sP,tF;function Ooe(){if(tF)return sP;tF=1;var t=Bc,n=Toe(),o=Ioe(),s=GV,c=Aoe(),m=Roe(),v=koe(),d=KV(),C=WV,S=TI();return sP=function(R){return new Promise(function(D,$){var H=R.data,Z=R.headers,X=R.responseType,Q;function G(){R.cancelToken&&R.cancelToken.unsubscribe(Q),R.signal&&R.signal.removeEventListener("abort",Q)}t.isFormData(H)&&delete Z["Content-Type"];var K=new XMLHttpRequest;if(R.auth){var Y=R.auth.username||"",re=R.auth.password?unescape(encodeURIComponent(R.auth.password)):"";Z.Authorization="Basic "+btoa(Y+":"+re)}var fe=c(R.baseURL,R.url);K.open(R.method.toUpperCase(),s(fe,R.params,R.paramsSerializer),!0),K.timeout=R.timeout;function me(){if(K){var xe="getAllResponseHeaders"in K?m(K.getAllResponseHeaders()):null,Se=!X||X==="text"||X==="json"?K.responseText:K.response,oe={data:Se,status:K.status,statusText:K.statusText,headers:xe,config:R,request:K};n(function(Re){D(Re),G()},function(Re){$(Re),G()},oe),K=null}}if("onloadend"in K?K.onloadend=me:K.onreadystatechange=function(){!K||K.readyState!==4||K.status===0&&!(K.responseURL&&K.responseURL.indexOf("file:")===0)||setTimeout(me)},K.onabort=function(){!K||($(d("Request aborted",R,"ECONNABORTED",K)),K=null)},K.onerror=function(){$(d("Network Error",R,null,K)),K=null},K.ontimeout=function(){var xe=R.timeout?"timeout of "+R.timeout+"ms exceeded":"timeout exceeded",Se=R.transitional||C;R.timeoutErrorMessage&&(xe=R.timeoutErrorMessage),$(d(xe,R,Se.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",K)),K=null},t.isStandardBrowserEnv()){var pe=(R.withCredentials||v(fe))&&R.xsrfCookieName?o.read(R.xsrfCookieName):void 0;pe&&(Z[R.xsrfHeaderName]=pe)}"setRequestHeader"in K&&t.forEach(Z,function(xe,Se){typeof H>"u"&&Se.toLowerCase()==="content-type"?delete Z[Se]:K.setRequestHeader(Se,xe)}),t.isUndefined(R.withCredentials)||(K.withCredentials=!!R.withCredentials),X&&X!=="json"&&(K.responseType=R.responseType),typeof R.onDownloadProgress=="function"&&K.addEventListener("progress",R.onDownloadProgress),typeof R.onUploadProgress=="function"&&K.upload&&K.upload.addEventListener("progress",R.onUploadProgress),(R.cancelToken||R.signal)&&(Q=function(xe){!K||($(!xe||xe&&xe.type?new S("canceled"):xe),K.abort(),K=null)},R.cancelToken&&R.cancelToken.subscribe(Q),R.signal&&(R.signal.aborted?Q():R.signal.addEventListener("abort",Q))),H||(H=null),K.send(H)})},sP}var wl=Bc,rF=Eoe,zoe=qV,Doe=WV,Loe={"Content-Type":"application/x-www-form-urlencoded"};function nF(t,n){!wl.isUndefined(t)&&wl.isUndefined(t["Content-Type"])&&(t["Content-Type"]=n)}function $oe(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Ooe()),t}function Boe(t,n,o){if(wl.isString(t))try{return(n||JSON.parse)(t),wl.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(o||JSON.stringify)(t)}var II={transitional:Doe,adapter:$oe(),transformRequest:[function(t,n){return rF(n,"Accept"),rF(n,"Content-Type"),wl.isFormData(t)||wl.isArrayBuffer(t)||wl.isBuffer(t)||wl.isStream(t)||wl.isFile(t)||wl.isBlob(t)?t:wl.isArrayBufferView(t)?t.buffer:wl.isURLSearchParams(t)?(nF(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):wl.isObject(t)||n&&n["Content-Type"]==="application/json"?(nF(n,"application/json"),Boe(t)):t}],transformResponse:[function(t){var n=this.transitional||II.transitional,o=n&&n.silentJSONParsing,s=n&&n.forcedJSONParsing,c=!o&&this.responseType==="json";if(c||s&&wl.isString(t)&&t.length)try{return JSON.parse(t)}catch(m){if(c)throw m.name==="SyntaxError"?zoe(m,this,"E_JSON_PARSE"):m}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};wl.forEach(["delete","get","head"],function(t){II.headers[t]={}});wl.forEach(["post","put","patch"],function(t){II.headers[t]=wl.merge(Loe)});var fO=II,Foe=Bc,Noe=fO,joe=function(t,n,o){var s=this||Noe;return Foe.forEach(o,function(c){t=c.call(s,t,n)}),t},iF,oF;function ZV(){return oF||(oF=1,iF=function(t){return!!(t&&t.__CANCEL__)}),iF}var aF=Bc,lP=joe,Voe=ZV(),Uoe=fO,Hoe=TI();function cP(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hoe("canceled")}var Goe=function(t){cP(t),t.headers=t.headers||{},t.data=lP.call(t,t.data,t.headers,t.transformRequest),t.headers=aF.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),aF.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var n=t.adapter||Uoe.adapter;return n(t).then(function(o){return cP(t),o.data=lP.call(t,o.data,o.headers,t.transformResponse),o},function(o){return Voe(o)||(cP(t),o&&o.response&&(o.response.data=lP.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})},su=Bc,XV=function(t,n){n=n||{};var o={};function s(S,R){return su.isPlainObject(S)&&su.isPlainObject(R)?su.merge(S,R):su.isPlainObject(R)?su.merge({},R):su.isArray(R)?R.slice():R}function c(S){if(su.isUndefined(n[S])){if(!su.isUndefined(t[S]))return s(void 0,t[S])}else return s(t[S],n[S])}function m(S){if(!su.isUndefined(n[S]))return s(void 0,n[S])}function v(S){if(su.isUndefined(n[S])){if(!su.isUndefined(t[S]))return s(void 0,t[S])}else return s(void 0,n[S])}function d(S){if(S in n)return s(t[S],n[S]);if(S in t)return s(void 0,t[S])}var C={url:m,method:m,data:m,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:d};return su.forEach(Object.keys(t).concat(Object.keys(n)),function(S){var R=C[S]||c,D=R(S);su.isUndefined(D)&&R!==d||(o[S]=D)}),o},sF,lF;function YV(){return lF||(lF=1,sF={version:"0.26.1"}),sF}var qoe=YV().version,pO={};["object","boolean","number","function","string","symbol"].forEach(function(t,n){pO[t]=function(o){return typeof o===t||"a"+(n<1?"n ":" ")+t}});var cF={};pO.transitional=function(t,n,o){function s(c,m){return"[Axios v"+qoe+"] Transitional option '"+c+"'"+m+(o?". "+o:"")}return function(c,m,v){if(t===!1)throw new Error(s(m," has been removed"+(n?" in "+n:"")));return n&&!cF[m]&&(cF[m]=!0,console.warn(s(m," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,m,v):!0}};function Woe(t,n,o){if(typeof t!="object")throw new TypeError("options must be an object");for(var s=Object.keys(t),c=s.length;c-- >0;){var m=s[c],v=n[m];if(v){var d=t[m],C=d===void 0||v(d,m,t);if(C!==!0)throw new TypeError("option "+m+" must be "+C);continue}if(o!==!0)throw Error("Unknown option "+m)}}var Koe={assertOptions:Woe,validators:pO},JV=Bc,Zoe=GV,uF=Soe,hF=Goe,MI=XV,QV=Koe,Kv=QV.validators;function sw(t){this.defaults=t,this.interceptors={request:new uF,response:new uF}}sw.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=MI(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var o=n.transitional;o!==void 0&&QV.assertOptions(o,{silentJSONParsing:Kv.transitional(Kv.boolean),forcedJSONParsing:Kv.transitional(Kv.boolean),clarifyTimeoutError:Kv.transitional(Kv.boolean)},!1);var s=[],c=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(c=c&&D.synchronous,s.unshift(D.fulfilled,D.rejected))});var m=[];this.interceptors.response.forEach(function(D){m.push(D.fulfilled,D.rejected)});var v;if(!c){var d=[hF,void 0];for(Array.prototype.unshift.apply(d,s),d=d.concat(m),v=Promise.resolve(n);d.length;)v=v.then(d.shift(),d.shift());return v}for(var C=n;s.length;){var S=s.shift(),R=s.shift();try{C=S(C)}catch(D){R(D);break}}try{v=hF(C)}catch(D){return Promise.reject(D)}for(;m.length;)v=v.then(m.shift(),m.shift());return v};sw.prototype.getUri=function(t){return t=MI(this.defaults,t),Zoe(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};JV.forEach(["delete","get","head","options"],function(t){sw.prototype[t]=function(n,o){return this.request(MI(o||{},{method:t,url:n,data:(o||{}).data}))}});JV.forEach(["post","put","patch"],function(t){sw.prototype[t]=function(n,o,s){return this.request(MI(s||{},{method:t,url:n,data:o}))}});var Xoe=sw,uP,dF;function Yoe(){if(dF)return uP;dF=1;var t=TI();function n(o){if(typeof o!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(m){s=m});var c=this;this.promise.then(function(m){if(c._listeners){var v,d=c._listeners.length;for(v=0;v<d;v++)c._listeners[v](m);c._listeners=null}}),this.promise.then=function(m){var v,d=new Promise(function(C){c.subscribe(C),v=C}).then(m);return d.cancel=function(){c.unsubscribe(v)},d},o(function(m){c.reason||(c.reason=new t(m),s(c.reason))})}return n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]},n.prototype.unsubscribe=function(o){if(this._listeners){var s=this._listeners.indexOf(o);s!==-1&&this._listeners.splice(s,1)}},n.source=function(){var o,s=new n(function(c){o=c});return{token:s,cancel:o}},uP=n,uP}var fF,pF;function Joe(){return pF||(pF=1,fF=function(t){return function(n){return t.apply(null,n)}}),fF}var hP,mF;function Qoe(){if(mF)return hP;mF=1;var t=Bc;return hP=function(n){return t.isObject(n)&&n.isAxiosError===!0},hP}var gF=Bc,eae=jV,LE=Xoe,tae=XV,rae=fO;function eU(t){var n=new LE(t),o=eae(LE.prototype.request,n);return gF.extend(o,LE.prototype,n),gF.extend(o,n),o.create=function(s){return eU(tae(t,s))},o}var Vd=eU(rae);Vd.Axios=LE;Vd.Cancel=TI();Vd.CancelToken=Yoe();Vd.isCancel=ZV();Vd.VERSION=YV().version;Vd.all=function(t){return Promise.all(t)};Vd.spread=Joe();Vd.isAxiosError=Qoe();uO.exports=Vd;uO.exports.default=Vd;(function(t){t.exports=uO.exports})(NV);Object.defineProperty(Y_,"__esModule",{value:!0});Y_.getRequestHeaders=Y_.getAxiosClient=void 0;var nae=NV.exports;function iae(t,n,o,s){return nae.default.create({baseURL:t,headers:tU(n,s,o),withCredentials:!0})}Y_.getAxiosClient=iae;function tU(t,n,o){t===void 0&&(t=!1);var s={Accept:"application/json","Content-Type":"application/json; charset=utf-8"};return t&&n&&o&&(s.Authorization="".concat(n," ").concat(o())),typeof window<"u"&&typeof document<"u"&&(window.location&&(s["X-Frappe-Site-Name"]=window.location.hostname),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(s["X-Frappe-CSRF-Token"]=window.csrf_token)),s}Y_.getRequestHeaders=tU;var yF;function oae(){if(yF)return Px;yF=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.FrappeApp=void 0;var t=rU(),n=iw,o=ow,s=aw,c=Y_,m=function(){function v(d,C,S){var R,D;this.url=d,this.name=S??"FrappeApp",this.useToken=(R=C?.useToken)!==null&&R!==void 0?R:!1,this.token=C?.token,this.tokenType=(D=C?.type)!==null&&D!==void 0?D:"Bearer",this.axios=(0,c.getAxiosClient)(this.url,this.useToken,this.token,this.tokenType)}return v.prototype.auth=function(){return new t.FrappeAuth(this.url,this.axios,this.useToken,this.token,this.tokenType)},v.prototype.db=function(){return new o.FrappeDB(this.url,this.axios,this.useToken,this.token,this.tokenType)},v.prototype.file=function(){return new s.FrappeFileUpload(this.url,this.axios,this.useToken,this.token,this.tokenType)},v.prototype.call=function(){return new n.FrappeCall(this.url,this.axios,this.useToken,this.token,this.tokenType)},v}();return Px.FrappeApp=m,Px}var PI={},Od=aa&&aa.__assign||function(){return Od=Object.assign||function(t){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Od.apply(this,arguments)},ZC=aa&&aa.__awaiter||function(t,n,o,s){function c(m){return m instanceof o?m:new o(function(v){v(m)})}return new(o||(o=Promise))(function(m,v){function d(R){try{S(s.next(R))}catch(D){v(D)}}function C(R){try{S(s.throw(R))}catch(D){v(D)}}function S(R){R.done?m(R.value):c(R.value).then(d,C)}S((s=s.apply(t,n||[])).next())})},XC=aa&&aa.__generator||function(t,n){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},s,c,m,v;return v={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function d(S){return function(R){return C([S,R])}}function C(S){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,c&&(m=S[0]&2?c.return:S[0]?c.throw||((m=c.return)&&m.call(c),0):c.next)&&!(m=m.call(c,S[1])).done)return m;switch(c=0,m&&(S=[S[0]&2,m.value]),S[0]){case 0:case 1:m=S;break;case 4:return o.label++,{value:S[1],done:!1};case 5:o.label++,c=S[1],S=[0];continue;case 7:S=o.ops.pop(),o.trys.pop();continue;default:if(m=o.trys,!(m=m.length>0&&m[m.length-1])&&(S[0]===6||S[0]===2)){o=0;continue}if(S[0]===3&&(!m||S[1]>m[0]&&S[1]<m[3])){o.label=S[1];break}if(S[0]===6&&o.label<m[1]){o.label=m[1],m=S;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(S);break}m[2]&&o.ops.pop(),o.trys.pop();continue}S=n.call(t,o)}catch(R){S=[6,R],c=0}finally{s=m=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(PI,"__esModule",{value:!0});PI.FrappeAuth=void 0;var aae=function(){function t(n,o,s,c,m){this.appURL=n,this.axios=o,this.useToken=s??!1,this.token=c,this.tokenType=m}return t.prototype.loginWithUsernamePassword=function(n){return ZC(this,void 0,void 0,function(){return XC(this,function(o){return[2,this.axios.post("/api/method/login",{usr:n.username,pwd:n.password,otp:n.otp,tmp_id:n.tmp_id,device:n.device}).then(function(s){return s.data}).catch(function(s){var c,m;throw Od(Od({},s.response.data),{httpStatus:s.response.status,httpStatusText:s.response.statusText,message:(c=s.response.data.message)!==null&&c!==void 0?c:"There was an error while logging in",exception:(m=s.response.data.exception)!==null&&m!==void 0?m:""})})]})})},t.prototype.getLoggedInUser=function(){return ZC(this,void 0,void 0,function(){return XC(this,function(n){return[2,this.axios.get("/api/method/frappe.auth.get_logged_user").then(function(o){return o.data.message}).catch(function(o){var s;throw Od(Od({},o.response.data),{httpStatus:o.response.status,httpStatusText:o.response.statusText,message:"There was an error while fetching the logged in user",exception:(s=o.response.data.exception)!==null&&s!==void 0?s:""})})]})})},t.prototype.logout=function(){return ZC(this,void 0,void 0,function(){return XC(this,function(n){return[2,this.axios.post("/api/method/logout",{}).then(function(){}).catch(function(o){var s,c;throw Od(Od({},o.response.data),{httpStatus:o.response.status,httpStatusText:o.response.statusText,message:(s=o.response.data.message)!==null&&s!==void 0?s:"There was an error while logging out",exception:(c=o.response.data.exception)!==null&&c!==void 0?c:""})})]})})},t.prototype.forgetPassword=function(n){return ZC(this,void 0,void 0,function(){return XC(this,function(o){return[2,this.axios.post("/",{cmd:"frappe.core.doctype.user.user.reset_password",user:n}).then(function(){}).catch(function(s){var c,m;throw Od(Od({},s.response.data),{httpStatus:s.response.status,httpStatusText:s.response.statusText,message:(c=s.response.data.message)!==null&&c!==void 0?c:"There was an error sending password reset email.",exception:(m=s.response.data.exception)!==null&&m!==void 0?m:""})})]})})},t}();PI.FrappeAuth=aae;var vF;function rU(){return vF||(vF=1,function(t){var n=aa&&aa.__createBinding||(Object.create?function(s,c,m,v){v===void 0&&(v=m);var d=Object.getOwnPropertyDescriptor(c,m);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[m]}}),Object.defineProperty(s,v,d)}:function(s,c,m,v){v===void 0&&(v=m),s[v]=c[m]}),o=aa&&aa.__exportStar||function(s,c){for(var m in s)m!=="default"&&!Object.prototype.hasOwnProperty.call(c,m)&&n(c,s,m)};Object.defineProperty(t,"__esModule",{value:!0}),o(oae(),t),o(PI,t),o(ow,t),o(aw,t),o(iw,t)}(VB)),VB}var sae=rU(),nU={exports:{}},dP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _F;function lae(){if(_F)return dP;_F=1;var t=rr;function n(D,$){return D===$&&(D!==0||1/D===1/$)||D!==D&&$!==$}var o=typeof Object.is=="function"?Object.is:n,s=t.useState,c=t.useEffect,m=t.useLayoutEffect,v=t.useDebugValue;function d(D,$){var H=$(),Z=s({inst:{value:H,getSnapshot:$}}),X=Z[0].inst,Q=Z[1];return m(function(){X.value=H,X.getSnapshot=$,C(X)&&Q({inst:X})},[D,H,$]),c(function(){return C(X)&&Q({inst:X}),D(function(){C(X)&&Q({inst:X})})},[D]),v(H),H}function C(D){var $=D.getSnapshot;D=D.value;try{var H=$();return!o(D,H)}catch{return!0}}function S(D,$){return $()}var R=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:d;return dP.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:R,dP}(function(t){t.exports=lae()})(nU);const ym=()=>{},Rc=ym(),fP=Object,Oo=t=>t===Rc,Lf=t=>typeof t=="function",Om=(t,n)=>({...t,...n}),cae=t=>Lf(t.then),YC=new WeakMap;let uae=0;const zb=t=>{const n=typeof t,o=t&&t.constructor,s=o==Date;let c,m;if(fP(t)===t&&!s&&o!=RegExp){if(c=YC.get(t),c)return c;if(c=++uae+"~",YC.set(t,c),o==Array){for(c="@",m=0;m<t.length;m++)c+=zb(t[m])+",";YC.set(t,c)}if(o==fP){c="#";const v=fP.keys(t).sort();for(;!Oo(m=v.pop());)Oo(t[m])||(c+=m+":"+zb(t[m])+",");YC.set(t,c)}}else c=s?t.toJSON():n=="symbol"?t.toString():n=="string"?JSON.stringify(t):""+t;return c},Of=new WeakMap,pP={},JC={},mO="undefined",AI=typeof window!=mO,I5=typeof document!=mO,hae=()=>AI&&typeof window.requestAnimationFrame!=mO,iU=(t,n)=>{const o=Of.get(t);return[()=>!Oo(n)&&t.get(n)||pP,s=>{if(!Oo(n)){const c=t.get(n);n in JC||(JC[n]=c),o[5](n,Om(c,s),c||pP)}},o[6],()=>!Oo(n)&&n in JC?JC[n]:!Oo(n)&&t.get(n)||pP]};let M5=!0;const dae=()=>M5,[P5,A5]=AI&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ym,ym],fae=()=>{const t=I5&&document.visibilityState;return Oo(t)||t!=="hidden"},pae=t=>(I5&&document.addEventListener("visibilitychange",t),P5("focus",t),()=>{I5&&document.removeEventListener("visibilitychange",t),A5("focus",t)}),mae=t=>{const n=()=>{M5=!0,t()},o=()=>{M5=!1};return P5("online",n),P5("offline",o),()=>{A5("online",n),A5("offline",o)}},gae={isOnline:dae,isVisible:fae},yae={initFocus:pae,initReconnect:mae},xF=!rr.useId,Db=!AI||"Deno"in window,vae=t=>hae()?window.requestAnimationFrame(t):setTimeout(t,1),mP=Db?E.useEffect:E.useLayoutEffect,gP=typeof navigator<"u"&&navigator.connection,bF=!Db&&gP&&(["slow-2g","2g"].includes(gP.effectiveType)||gP.saveData),gO=t=>{if(Lf(t))try{t=t()}catch{t=""}const n=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?zb(t):"",[t,n]};let _ae=0;const R5=()=>++_ae,oU=0,aU=1,sU=2,xae=3;var Ax={__proto__:null,ERROR_REVALIDATE_EVENT:xae,FOCUS_EVENT:oU,MUTATE_EVENT:sU,RECONNECT_EVENT:aU};async function lU(...t){const[n,o,s,c]=t,m=Om({populateCache:!0,throwOnError:!0},typeof c=="boolean"?{revalidate:c}:c||{});let v=m.populateCache;const d=m.rollbackOnError;let C=m.optimisticData;const S=m.revalidate!==!1,R=H=>typeof d=="function"?d(H):d!==!1,D=m.throwOnError;if(Lf(o)){const H=o,Z=[],X=n.keys();for(const Q of X)!/^\$(inf|sub)\$/.test(Q)&&H(n.get(Q)._k)&&Z.push(Q);return Promise.all(Z.map($))}return $(o);async function $(H){const[Z]=gO(H);if(!Z)return;const[X,Q]=iU(n,Z),[G,K,Y,re]=Of.get(n),fe=()=>{const _e=G[Z];return S&&(delete Y[Z],delete re[Z],_e&&_e[0])?_e[0](sU).then(()=>X().data):X().data};if(t.length<3)return fe();let me=s,pe;const xe=R5();K[Z]=[xe,0];const Se=!Oo(C),oe=X(),Re=oe.data,Ve=oe._c,Oe=Oo(Ve)?Re:Ve;if(Se&&(C=Lf(C)?C(Oe,Re):C,Q({data:C,_c:Oe})),Lf(me))try{me=me(Oe)}catch(_e){pe=_e}if(me&&cae(me))if(me=await me.catch(_e=>{pe=_e}),xe!==K[Z][0]){if(pe)throw pe;return me}else pe&&Se&&R(pe)&&(v=!0,Q({data:Oe,_c:Rc}));if(v&&!pe)if(Lf(v)){const _e=v(me,Oe);Q({data:_e,error:Rc,_c:Rc})}else Q({data:me,error:Rc,_c:Rc});if(K[Z][1]=R5(),Promise.resolve(fe()).then(()=>{Q({_c:Rc})}),pe){if(D)throw pe;return}return me}}const wF=(t,n)=>{for(const o in t)t[o][0]&&t[o][0](n)},bae=(t,n)=>{if(!Of.has(t)){const o=Om(yae,n),s={},c=lU.bind(Rc,t);let m=ym;const v={},d=(R,D)=>{const $=v[R]||[];return v[R]=$,$.push(D),()=>$.splice($.indexOf(D),1)},C=(R,D,$)=>{t.set(R,D);const H=v[R];if(H)for(const Z of H)Z(D,$)},S=()=>{if(!Of.has(t)&&(Of.set(t,[s,{},{},{},c,C,d]),!Db)){const R=o.initFocus(setTimeout.bind(Rc,wF.bind(Rc,s,oU))),D=o.initReconnect(setTimeout.bind(Rc,wF.bind(Rc,s,aU)));m=()=>{R&&R(),D&&D(),Of.delete(t)}}};return S(),[t,c,S,m]}return[t,Of.get(t)[4]]},wae=(t,n,o,s,c)=>{const m=o.errorRetryCount,v=c.retryCount,d=~~((Math.random()+.5)*(1<<(v<8?v:8)))*o.errorRetryInterval;!Oo(m)&&v>m||setTimeout(s,d,c)},Sae=(t,n)=>zb(t)==zb(n),[cU,Cae]=bae(new Map),Eae=Om({onLoadingSlow:ym,onSuccess:ym,onError:ym,onErrorRetry:wae,onDiscarded:ym,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:bF?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:bF?5e3:3e3,compare:Sae,isPaused:()=>!1,cache:cU,mutate:Cae,fallback:{}},gae),Tae=(t,n)=>{const o=Om(t,n);if(n){const{use:s,fallback:c}=t,{use:m,fallback:v}=n;s&&m&&(o.use=s.concat(m)),c&&v&&(o.fallback=Om(c,v))}return o},Iae=E.createContext({}),Mae="$inf$",uU=AI&&window.__SWR_DEVTOOLS_USE__,Pae=uU?window.__SWR_DEVTOOLS_USE__:[],Aae=()=>{uU&&(window.__SWR_DEVTOOLS_REACT__=rr)},Rae=t=>Lf(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],kae=()=>Om(Eae,E.useContext(Iae)),Oae=t=>(n,o,s)=>t(n,o&&((...c)=>{const[m]=gO(n),[,,,v]=Of.get(cU);if(m.startsWith(Mae))return o(...c);const d=v[m];return Oo(d)?o(...c):(delete v[m],d)}),s),zae=Pae.concat(Oae),Dae=t=>function(...n){const o=kae(),[s,c,m]=Rae(n),v=Tae(o,m);let d=t;const{use:C}=v,S=(C||[]).concat(zae);for(let R=S.length;R--;)d=S[R](d);return d(s,c||v.fetcher||null,v)},Lae=(t,n,o)=>{const s=n[t]||(n[t]=[]);return s.push(o),()=>{const c=s.indexOf(o);c>=0&&(s[c]=s[s.length-1],s.pop())}};Aae();const SF=rr.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(n=>{t.status="fulfilled",t.value=n},n=>{t.status="rejected",t.reason=n}),t)}),yP={dedupe:!0},$ae=(t,n,o)=>{const{cache:s,compare:c,suspense:m,fallbackData:v,revalidateOnMount:d,revalidateIfStale:C,refreshInterval:S,refreshWhenHidden:R,refreshWhenOffline:D,keepPreviousData:$}=o,[H,Z,X,Q]=Of.get(s),[G,K]=gO(t),Y=E.useRef(!1),re=E.useRef(!1),fe=E.useRef(G),me=E.useRef(n),pe=E.useRef(o),xe=()=>pe.current,Se=()=>xe().isVisible()&&xe().isOnline(),[oe,Re,Ve,Oe]=iU(s,G),_e=E.useRef({}).current,Fe=Oo(v)?o.fallback[G]:v,Le=(Rt,Pt)=>{for(const Dt in _e){const Ut=Dt;if(Ut==="data"){if(!c(Rt[Ut],Pt[Ut])&&(!Oo(Rt[Ut])||!c(Ot,Pt[Ut])))return!1}else if(Pt[Ut]!==Rt[Ut])return!1}return!0},Me=E.useMemo(()=>{const Rt=!G||!n?!1:Oo(d)?xe().isPaused()||m?!1:Oo(C)?!0:C:d,Pt=ze=>{const ve=Om(ze);return delete ve._k,Rt?{isValidating:!0,isLoading:!0,...ve}:ve},Dt=oe(),Ut=Oe(),sr=Pt(Dt),vt=Dt===Ut?sr:Pt(Ut);let De=sr;return[()=>{const ze=Pt(oe());return Le(ze,De)?(De.data=ze.data,De.isLoading=ze.isLoading,De.isValidating=ze.isValidating,De.error=ze.error,De):(De=ze,ze)},()=>vt]},[s,G]),Ce=nU.exports.useSyncExternalStore(E.useCallback(Rt=>Ve(G,(Pt,Dt)=>{Le(Dt,Pt)||Rt()}),[s,G]),Me[0],Me[1]),Ye=!Y.current,qe=H[G]&&H[G].length>0,rt=Ce.data,Qe=Oo(rt)?Fe:rt,St=Ce.error,jt=E.useRef(Qe),Ot=$?Oo(rt)?jt.current:rt:Qe,Tt=qe&&!Oo(St)?!1:Ye&&!Oo(d)?d:xe().isPaused()?!1:m?Oo(Qe)?!1:C:Oo(Qe)||C,ct=!!(G&&n&&Ye&&Tt),Ct=Oo(Ce.isValidating)?ct:Ce.isValidating,kt=Oo(Ce.isLoading)?ct:Ce.isLoading,zt=E.useCallback(async Rt=>{const Pt=me.current;if(!G||!Pt||re.current||xe().isPaused())return!1;let Dt,Ut,sr=!0;const vt=Rt||{},De=!X[G]||!vt.dedupe,ze=()=>xF?!re.current&&G===fe.current&&Y.current:G===fe.current,ve={isValidating:!1,isLoading:!1},pt=()=>{Re(ve)},gt=()=>{const It=X[G];It&&It[1]===Ut&&delete X[G]},$t={isValidating:!0};Oo(oe().data)&&($t.isLoading=!0);try{if(De&&(Re($t),o.loadingTimeout&&Oo(oe().data)&&setTimeout(()=>{sr&&ze()&&xe().onLoadingSlow(G,o)},o.loadingTimeout),X[G]=[Pt(K),R5()]),[Dt,Ut]=X[G],Dt=await Dt,De&&setTimeout(gt,o.dedupingInterval),!X[G]||X[G][1]!==Ut)return De&&ze()&&xe().onDiscarded(G),!1;ve.error=Rc;const It=Z[G];if(!Oo(It)&&(Ut<=It[0]||Ut<=It[1]||It[1]===0))return pt(),De&&ze()&&xe().onDiscarded(G),!1;const Mt=oe().data;ve.data=c(Mt,Dt)?Mt:Dt,De&&ze()&&xe().onSuccess(Dt,G,o)}catch(It){gt();const Mt=xe(),{shouldRetryOnError:Qt}=Mt;Mt.isPaused()||(ve.error=It,De&&ze()&&(Mt.onError(It,G,Mt),(Qt===!0||Lf(Qt)&&Qt(It))&&Se()&&Mt.onErrorRetry(It,G,Mt,wr=>{const br=H[G];br&&br[0]&&br[0](Ax.ERROR_REVALIDATE_EVENT,wr)},{retryCount:(vt.retryCount||0)+1,dedupe:!0})))}return sr=!1,pt(),!0},[G,s]),Nt=E.useCallback((...Rt)=>lU(s,fe.current,...Rt),[]);if(mP(()=>{me.current=n,pe.current=o,Oo(rt)||(jt.current=rt)}),mP(()=>{if(!G)return;const Rt=zt.bind(Rc,yP);let Pt=0;const Dt=Lae(G,H,(Ut,sr={})=>{if(Ut==Ax.FOCUS_EVENT){const vt=Date.now();xe().revalidateOnFocus&&vt>Pt&&Se()&&(Pt=vt+xe().focusThrottleInterval,Rt())}else if(Ut==Ax.RECONNECT_EVENT)xe().revalidateOnReconnect&&Se()&&Rt();else{if(Ut==Ax.MUTATE_EVENT)return zt();if(Ut==Ax.ERROR_REVALIDATE_EVENT)return zt(sr)}});return re.current=!1,fe.current=G,Y.current=!0,Re({_k:K}),Tt&&(Oo(Qe)||Db?Rt():vae(Rt)),()=>{re.current=!0,Dt()}},[G]),mP(()=>{let Rt;function Pt(){const Ut=Lf(S)?S(oe().data):S;Ut&&Rt!==-1&&(Rt=setTimeout(Dt,Ut))}function Dt(){!oe().error&&(R||xe().isVisible())&&(D||xe().isOnline())?zt(yP).then(Pt):Pt()}return Pt(),()=>{Rt&&(clearTimeout(Rt),Rt=-1)}},[S,R,D,G]),E.useDebugValue(Ot),m&&Oo(Qe)&&G){if(!xF&&Db)throw new Error("Fallback data is required when using suspense in SSR.");me.current=n,pe.current=o,re.current=!1;const Rt=Q[G];if(!Oo(Rt)){const Pt=Nt(Rt);SF(Pt)}if(Oo(St)){const Pt=zt(yP);Oo(Ot)||(Pt.status="fulfilled",Pt.value=!0),SF(Pt)}else throw St}return{mutate:Nt,get data(){return _e.data=!0,Ot},get error(){return _e.error=!0,St},get isValidating(){return _e.isValidating=!0,Ct},get isLoading(){return _e.isLoading=!0,kt}}},hU=Dae($ae),Fd=Object.create(null);Fd.open="0";Fd.close="1";Fd.ping="2";Fd.pong="3";Fd.message="4";Fd.upgrade="5";Fd.noop="6";const $E=Object.create(null);Object.keys(Fd).forEach(t=>{$E[Fd[t]]=t});const k5={type:"error",data:"parser error"},dU=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",fU=typeof ArrayBuffer=="function",pU=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,yO=({type:t,data:n},o,s)=>dU&&n instanceof Blob?o?s(n):CF(n,s):fU&&(n instanceof ArrayBuffer||pU(n))?o?s(n):CF(new Blob([n]),s):s(Fd[t]+(n||"")),CF=(t,n)=>{const o=new FileReader;return o.onload=function(){const s=o.result.split(",")[1];n("b"+(s||""))},o.readAsDataURL(t)};function EF(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let vP;function Bae(t,n){if(dU&&t.data instanceof Blob)return t.data.arrayBuffer().then(EF).then(n);if(fU&&(t.data instanceof ArrayBuffer||pU(t.data)))return n(EF(t.data));yO(t,!1,o=>{vP||(vP=new TextEncoder),n(vP.encode(o))})}const TF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<TF.length;t++)qx[TF.charCodeAt(t)]=t;const Fae=t=>{let n=t.length*.75,o=t.length,s,c=0,m,v,d,C;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);const S=new ArrayBuffer(n),R=new Uint8Array(S);for(s=0;s<o;s+=4)m=qx[t.charCodeAt(s)],v=qx[t.charCodeAt(s+1)],d=qx[t.charCodeAt(s+2)],C=qx[t.charCodeAt(s+3)],R[c++]=m<<2|v>>4,R[c++]=(v&15)<<4|d>>2,R[c++]=(d&3)<<6|C&63;return S},Nae=typeof ArrayBuffer=="function",vO=(t,n)=>{if(typeof t!="string")return{type:"message",data:mU(t,n)};const o=t.charAt(0);return o==="b"?{type:"message",data:jae(t.substring(1),n)}:$E[o]?t.length>1?{type:$E[o],data:t.substring(1)}:{type:$E[o]}:k5},jae=(t,n)=>{if(Nae){const o=Fae(t);return mU(o,n)}else return{base64:!0,data:t}},mU=(t,n)=>{switch(n){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},gU="",Vae=(t,n)=>{const o=t.length,s=new Array(o);let c=0;t.forEach((m,v)=>{yO(m,!1,d=>{s[v]=d,++c===o&&n(s.join(gU))})})},Uae=(t,n)=>{const o=t.split(gU),s=[];for(let c=0;c<o.length;c++){const m=vO(o[c],n);if(s.push(m),m.type==="error")break}return s};function Hae(){return new TransformStream({transform(t,n){Bae(t,o=>{const s=o.length;let c;if(s<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,s);else if(s<65536){c=new Uint8Array(3);const m=new DataView(c.buffer);m.setUint8(0,126),m.setUint16(1,s)}else{c=new Uint8Array(9);const m=new DataView(c.buffer);m.setUint8(0,127),m.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(c[0]|=128),n.enqueue(c),n.enqueue(o)})}})}let _P;function QC(t){return t.reduce((n,o)=>n+o.length,0)}function eE(t,n){if(t[0].length===n)return t.shift();const o=new Uint8Array(n);let s=0;for(let c=0;c<n;c++)o[c]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),o}function Gae(t,n){_P||(_P=new TextDecoder);const o=[];let s=0,c=-1,m=!1;return new TransformStream({transform(v,d){for(o.push(v);;){if(s===0){if(QC(o)<1)break;const C=eE(o,1);m=(C[0]&128)===128,c=C[0]&127,c<126?s=3:c===126?s=1:s=2}else if(s===1){if(QC(o)<2)break;const C=eE(o,2);c=new DataView(C.buffer,C.byteOffset,C.length).getUint16(0),s=3}else if(s===2){if(QC(o)<8)break;const C=eE(o,8),S=new DataView(C.buffer,C.byteOffset,C.length),R=S.getUint32(0);if(R>Math.pow(2,21)-1){d.enqueue(k5);break}c=R*Math.pow(2,32)+S.getUint32(4),s=3}else{if(QC(o)<c)break;const C=eE(o,c);d.enqueue(vO(m?C:_P.decode(C),n)),s=0}if(c===0||c>t){d.enqueue(k5);break}}}})}const yU=4;function Os(t){if(t)return qae(t)}function qae(t){for(var n in Os.prototype)t[n]=Os.prototype[n];return t}Os.prototype.on=Os.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this};Os.prototype.once=function(t,n){function o(){this.off(t,o),n.apply(this,arguments)}return o.fn=n,this.on(t,o),this};Os.prototype.off=Os.prototype.removeListener=Os.prototype.removeAllListeners=Os.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+t];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,c=0;c<o.length;c++)if(s=o[c],s===n||s.fn===n){o.splice(c,1);break}return o.length===0&&delete this._callbacks["$"+t],this};Os.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),o=this._callbacks["$"+t],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(o){o=o.slice(0);for(var s=0,c=o.length;s<c;++s)o[s].apply(this,n)}return this};Os.prototype.emitReserved=Os.prototype.emit;Os.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Os.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Zu=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function vU(t,...n){return n.reduce((o,s)=>(t.hasOwnProperty(s)&&(o[s]=t[s]),o),{})}const Wae=Zu.setTimeout,Kae=Zu.clearTimeout;function RI(t,n){n.useNativeTimers?(t.setTimeoutFn=Wae.bind(Zu),t.clearTimeoutFn=Kae.bind(Zu)):(t.setTimeoutFn=Zu.setTimeout.bind(Zu),t.clearTimeoutFn=Zu.clearTimeout.bind(Zu))}const Zae=1.33;function Xae(t){return typeof t=="string"?Yae(t):Math.ceil((t.byteLength||t.size)*Zae)}function Yae(t){let n=0,o=0;for(let s=0,c=t.length;s<c;s++)n=t.charCodeAt(s),n<128?o+=1:n<2048?o+=2:n<55296||n>=57344?o+=3:(s++,o+=4);return o}function Jae(t){let n="";for(let o in t)t.hasOwnProperty(o)&&(n.length&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return n}function Qae(t){let n={},o=t.split("&");for(let s=0,c=o.length;s<c;s++){let m=o[s].split("=");n[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return n}class ese extends Error{constructor(n,o,s){super(n),this.description=o,this.context=s,this.type="TransportError"}}class _O extends Os{constructor(n){super(),this.writable=!1,RI(this,n),this.opts=n,this.query=n.query,this.socket=n.socket}onError(n,o,s){return super.emitReserved("error",new ese(n,o,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const o=vO(n,this.socket.binaryType);this.onPacket(o)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,o={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(o)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const o=Jae(n);return o.length?"?"+o:""}}const _U="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),O5=64,tse={};let IF=0,tE=0,MF;function PF(t){let n="";do n=_U[t%O5]+n,t=Math.floor(t/O5);while(t>0);return n}function xU(){const t=PF(+new Date);return t!==MF?(IF=0,MF=t):t+"."+PF(IF++)}for(;tE<O5;tE++)tse[_U[tE]]=tE;let bU=!1;try{bU=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const rse=bU;function wU(t){const n=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||rse))return new XMLHttpRequest}catch{}if(!n)try{return new Zu[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function nse(){}const ise=function(){return new wU({xdomain:!1}).responseType!=null}();class ose extends _O{constructor(n){if(super(n),this.polling=!1,typeof location<"u"){const s=location.protocol==="https:";let c=location.port;c||(c=s?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||c!==n.port}const o=n&&n.forceBase64;this.supportsBinary=ise&&!o,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(n){this.readyState="pausing";const o=()=>{this.readyState="paused",n()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||o()})),this.writable||(s++,this.once("drain",function(){--s||o()}))}else o()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const o=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Uae(n,this.socket.binaryType).forEach(o),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,Vae(n,o=>{this.doWrite(o,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",o=this.query||{};return this.opts.timestampRequests!==!1&&(o[this.opts.timestampParam]=xU()),!this.supportsBinary&&!o.sid&&(o.b64=1),this.createUri(n,o)}request(n={}){return Object.assign(n,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new L_(this.uri(),n)}doWrite(n,o){const s=this.request({method:"POST",data:n});s.on("success",o),s.on("error",(c,m)=>{this.onError("xhr post error",c,m)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(o,s)=>{this.onError("xhr poll error",o,s)}),this.pollXhr=n}}let L_=class BE extends Os{constructor(n,o){super(),RI(this,o),this.opts=o,this.method=o.method||"GET",this.uri=n,this.data=o.data!==void 0?o.data:null,this.create()}create(){var n;const o=vU(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");o.xdomain=!!this.opts.xd;const s=this.xhr=new wU(o);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let c in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(c)&&s.setRequestHeader(c,this.opts.extraHeaders[c])}}catch{}if(this.method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this.opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var c;s.readyState===3&&((c=this.opts.cookieJar)===null||c===void 0||c.parseCookies(s)),s.readyState===4&&(s.status===200||s.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof s.status=="number"?s.status:0)},0))},s.send(this.data)}catch(c){this.setTimeoutFn(()=>{this.onError(c)},0);return}typeof document<"u"&&(this.index=BE.requestsCount++,BE.requests[this.index]=this)}onError(n){this.emitReserved("error",n,this.xhr),this.cleanup(!0)}cleanup(n){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=nse,n)try{this.xhr.abort()}catch{}typeof document<"u"&&delete BE.requests[this.index],this.xhr=null}}onLoad(){const n=this.xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};L_.requestsCount=0;L_.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",AF);else if(typeof addEventListener=="function"){const t="onpagehide"in Zu?"pagehide":"unload";addEventListener(t,AF,!1)}}function AF(){for(let t in L_.requests)L_.requests.hasOwnProperty(t)&&L_.requests[t].abort()}const xO=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),rE=Zu.WebSocket||Zu.MozWebSocket,RF=!0,ase="arraybuffer",kF=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class sse extends _O{constructor(n){super(n),this.supportsBinary=!n.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const n=this.uri(),o=this.opts.protocols,s=kF?{}:vU(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=RF&&!kF?o?new rE(n,o):new rE(n):new rE(n,o,s)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let o=0;o<n.length;o++){const s=n[o],c=o===n.length-1;yO(s,this.supportsBinary,m=>{try{RF&&this.ws.send(m)}catch{}c&&xO(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",o=this.query||{};return this.opts.timestampRequests&&(o[this.opts.timestampParam]=xU()),this.supportsBinary||(o.b64=1),this.createUri(n,o)}check(){return!!rE}}class lse extends _O{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(n=>{const o=Gae(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(o).getReader(),c=Hae();c.readable.pipeTo(n.writable),this.writer=c.writable.getWriter();const m=()=>{s.read().then(({done:d,value:C})=>{d||(this.onPacket(C),m())}).catch(d=>{})};m();const v={type:"open"};this.query.sid&&(v.data=`{"sid":"${this.query.sid}"}`),this.writer.write(v).then(()=>this.onOpen())})}))}write(n){this.writable=!1;for(let o=0;o<n.length;o++){const s=n[o],c=o===n.length-1;this.writer.write(s).then(()=>{c&&xO(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this.transport)===null||n===void 0||n.close()}}const cse={websocket:sse,webtransport:lse,polling:ose},use=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hse=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function z5(t){const n=t,o=t.indexOf("["),s=t.indexOf("]");o!=-1&&s!=-1&&(t=t.substring(0,o)+t.substring(o,s).replace(/:/g,";")+t.substring(s,t.length));let c=use.exec(t||""),m={},v=14;for(;v--;)m[hse[v]]=c[v]||"";return o!=-1&&s!=-1&&(m.source=n,m.host=m.host.substring(1,m.host.length-1).replace(/;/g,":"),m.authority=m.authority.replace("[","").replace("]","").replace(/;/g,":"),m.ipv6uri=!0),m.pathNames=dse(m,m.path),m.queryKey=fse(m,m.query),m}function dse(t,n){const o=/\/{2,9}/g,s=n.replace(o,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function fse(t,n){const o={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,c,m){c&&(o[c]=m)}),o}let SU=class h_ extends Os{constructor(n,o={}){super(),this.binaryType=ase,this.writeBuffer=[],n&&typeof n=="object"&&(o=n,n=null),n?(n=z5(n),o.hostname=n.host,o.secure=n.protocol==="https"||n.protocol==="wss",o.port=n.port,n.query&&(o.query=n.query)):o.host&&(o.hostname=z5(o.host).host),RI(this,o),this.secure=o.secure!=null?o.secure:typeof location<"u"&&location.protocol==="https:",o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.hostname=o.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=o.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=o.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},o),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Qae(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(n){const o=Object.assign({},this.opts.query);o.EIO=yU,o.transport=n,this.id&&(o.sid=this.id);const s=Object.assign({},this.opts,{query:o,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new cse[n](s)}open(){let n;if(this.opts.rememberUpgrade&&h_.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)n="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else n=this.transports[0];this.readyState="opening";try{n=this.createTransport(n)}catch{this.transports.shift(),this.open();return}n.open(),this.setTransport(n)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",o=>this.onClose("transport close",o))}probe(n){let o=this.createTransport(n),s=!1;h_.priorWebsocketSuccess=!1;const c=()=>{s||(o.send([{type:"ping",data:"probe"}]),o.once("packet",D=>{if(!s)if(D.type==="pong"&&D.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",o),!o)return;h_.priorWebsocketSuccess=o.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(R(),this.setTransport(o),o.send([{type:"upgrade"}]),this.emitReserved("upgrade",o),o=null,this.upgrading=!1,this.flush())})}else{const $=new Error("probe error");$.transport=o.name,this.emitReserved("upgradeError",$)}}))};function m(){s||(s=!0,R(),o.close(),o=null)}const v=D=>{const $=new Error("probe error: "+D);$.transport=o.name,m(),this.emitReserved("upgradeError",$)};function d(){v("transport closed")}function C(){v("socket closed")}function S(D){o&&D.name!==o.name&&m()}const R=()=>{o.removeListener("open",c),o.removeListener("error",v),o.removeListener("close",d),this.off("close",C),this.off("upgrading",S)};o.once("open",c),o.once("error",v),o.once("close",d),this.once("close",C),this.once("upgrading",S),this.upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||o.open()},200):o.open()}onOpen(){if(this.readyState="open",h_.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let n=0;const o=this.upgrades.length;for(;n<o;n++)this.probe(this.upgrades[n])}}onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),this.resetPingTimeout(),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const o=new Error("server error");o.code=n.data,this.onError(o);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this.upgrades=this.filterUpgrades(n.upgrades),this.pingInterval=n.pingInterval,this.pingTimeout=n.pingTimeout,this.maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this.getWritablePackets();this.transport.send(n),this.prevBufferLen=n.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let o=0;o<this.writeBuffer.length;o++){const s=this.writeBuffer[o].data;if(s&&(n+=Xae(s)),o>0&&n>this.maxPayload)return this.writeBuffer.slice(0,o);n+=2}return this.writeBuffer}write(n,o,s){return this.sendPacket("message",n,o,s),this}send(n,o,s){return this.sendPacket("message",n,o,s),this}sendPacket(n,o,s,c){if(typeof o=="function"&&(c=o,o=void 0),typeof s=="function"&&(c=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const m={type:n,data:o,options:s};this.emitReserved("packetCreate",m),this.writeBuffer.push(m),c&&this.once("flush",c),this.flush()}close(){const n=()=>{this.onClose("forced close"),this.transport.close()},o=()=>{this.off("upgrade",o),this.off("upgradeError",o),n()},s=()=>{this.once("upgrade",o),this.once("upgradeError",o)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}onError(n){h_.priorWebsocketSuccess=!1,this.emitReserved("error",n),this.onClose("transport error",n)}onClose(n,o){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",n,o),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(n){const o=[];let s=0;const c=n.length;for(;s<c;s++)~this.transports.indexOf(n[s])&&o.push(n[s]);return o}};SU.protocol=yU;function pse(t,n="",o){let s=t;o=o||typeof location<"u"&&location,t==null&&(t=o.protocol+"//"+o.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=o.protocol+t:t=o.host+t),/^(https?|wss?):\/\//.test(t)||(typeof o<"u"?t=o.protocol+"//"+t:t="https://"+t),s=z5(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+n,s.href=s.protocol+"://"+c+(o&&o.port===s.port?"":":"+s.port),s}const mse=typeof ArrayBuffer=="function",gse=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,CU=Object.prototype.toString,yse=typeof Blob=="function"||typeof Blob<"u"&&CU.call(Blob)==="[object BlobConstructor]",vse=typeof File=="function"||typeof File<"u"&&CU.call(File)==="[object FileConstructor]";function bO(t){return mse&&(t instanceof ArrayBuffer||gse(t))||yse&&t instanceof Blob||vse&&t instanceof File}function FE(t,n){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let o=0,s=t.length;o<s;o++)if(FE(t[o]))return!0;return!1}if(bO(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return FE(t.toJSON(),!0);for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&FE(t[o]))return!0;return!1}function _se(t){const n=[],o=t.data,s=t;return s.data=D5(o,n),s.attachments=n.length,{packet:s,buffers:n}}function D5(t,n){if(!t)return t;if(bO(t)){const o={_placeholder:!0,num:n.length};return n.push(t),o}else if(Array.isArray(t)){const o=new Array(t.length);for(let s=0;s<t.length;s++)o[s]=D5(t[s],n);return o}else if(typeof t=="object"&&!(t instanceof Date)){const o={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=D5(t[s],n));return o}return t}function xse(t,n){return t.data=L5(t.data,n),delete t.attachments,t}function L5(t,n){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<n.length)return n[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let o=0;o<t.length;o++)t[o]=L5(t[o],n);else if(typeof t=="object")for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(t[o]=L5(t[o],n));return t}const bse=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],wse=5;var vo;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(vo||(vo={}));class Sse{constructor(n){this.replacer=n}encode(n){return(n.type===vo.EVENT||n.type===vo.ACK)&&FE(n)?this.encodeAsBinary({type:n.type===vo.EVENT?vo.BINARY_EVENT:vo.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let o=""+n.type;return(n.type===vo.BINARY_EVENT||n.type===vo.BINARY_ACK)&&(o+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(o+=n.nsp+","),n.id!=null&&(o+=n.id),n.data!=null&&(o+=JSON.stringify(n.data,this.replacer)),o}encodeAsBinary(n){const o=_se(n),s=this.encodeAsString(o.packet),c=o.buffers;return c.unshift(s),c}}function OF(t){return Object.prototype.toString.call(t)==="[object Object]"}class wO extends Os{constructor(n){super(),this.reviver=n}add(n){let o;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");o=this.decodeString(n);const s=o.type===vo.BINARY_EVENT;s||o.type===vo.BINARY_ACK?(o.type=s?vo.EVENT:vo.ACK,this.reconstructor=new Cse(o),o.attachments===0&&super.emitReserved("decoded",o)):super.emitReserved("decoded",o)}else if(bO(n)||n.base64)if(this.reconstructor)o=this.reconstructor.takeBinaryData(n),o&&(this.reconstructor=null,super.emitReserved("decoded",o));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let o=0;const s={type:Number(n.charAt(0))};if(vo[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===vo.BINARY_EVENT||s.type===vo.BINARY_ACK){const m=o+1;for(;n.charAt(++o)!=="-"&&o!=n.length;);const v=n.substring(m,o);if(v!=Number(v)||n.charAt(o)!=="-")throw new Error("Illegal attachments");s.attachments=Number(v)}if(n.charAt(o+1)==="/"){const m=o+1;for(;++o&&!(n.charAt(o)===","||o===n.length););s.nsp=n.substring(m,o)}else s.nsp="/";const c=n.charAt(o+1);if(c!==""&&Number(c)==c){const m=o+1;for(;++o;){const v=n.charAt(o);if(v==null||Number(v)!=v){--o;break}if(o===n.length)break}s.id=Number(n.substring(m,o+1))}if(n.charAt(++o)){const m=this.tryParse(n.substr(o));if(wO.isPayloadValid(s.type,m))s.data=m;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,o){switch(n){case vo.CONNECT:return OF(o);case vo.DISCONNECT:return o===void 0;case vo.CONNECT_ERROR:return typeof o=="string"||OF(o);case vo.EVENT:case vo.BINARY_EVENT:return Array.isArray(o)&&(typeof o[0]=="number"||typeof o[0]=="string"&&bse.indexOf(o[0])===-1);case vo.ACK:case vo.BINARY_ACK:return Array.isArray(o)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Cse{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const o=xse(this.reconPack,this.buffers);return this.finishedReconstruction(),o}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Ese=Object.freeze(Object.defineProperty({__proto__:null,protocol:wse,get PacketType(){return vo},Encoder:Sse,Decoder:wO},Symbol.toStringTag,{value:"Module"}));function Ph(t,n,o){return t.on(n,o),function(){t.off(n,o)}}const Tse=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class EU extends Os{constructor(n,o,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=o,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Ph(n,"open",this.onopen.bind(this)),Ph(n,"packet",this.onpacket.bind(this)),Ph(n,"error",this.onerror.bind(this)),Ph(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...o){if(Tse.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(o.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const s={type:vo.EVENT,data:o};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof o[o.length-1]=="function"){const m=this.ids++,v=o.pop();this._registerAckCallback(m,v),s.id=m}const c=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!c||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(n,o){var s;const c=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(c===void 0){this.acks[n]=o;return}const m=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let v=0;v<this.sendBuffer.length;v++)this.sendBuffer[v].id===n&&this.sendBuffer.splice(v,1);o.call(this,new Error("operation has timed out"))},c);this.acks[n]=(...v)=>{this.io.clearTimeoutFn(m),o.apply(this,[null,...v])}}emitWithAck(n,...o){const s=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((c,m)=>{o.push((v,d)=>s?v?m(v):c(d):c(v)),this.emit(n,...o)})}_addToQueue(n){let o;typeof n[n.length-1]=="function"&&(o=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((c,...m)=>s!==this._queue[0]?void 0:(c!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),o&&o(c)):(this._queue.shift(),o&&o(null,...m)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const o=this._queue[0];o.pending&&!n||(o.pending=!0,o.tryCount++,this.flags=o.flags,this.emit.apply(this,o.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:vo.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,o){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,o)}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case vo.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case vo.EVENT:case vo.BINARY_EVENT:this.onevent(n);break;case vo.ACK:case vo.BINARY_ACK:this.onack(n);break;case vo.DISCONNECT:this.ondisconnect();break;case vo.CONNECT_ERROR:this.destroy();const o=new Error(n.data.message);o.data=n.data.data,this.emitReserved("connect_error",o);break}}onevent(n){const o=n.data||[];n.id!=null&&o.push(this.ack(n.id)),this.connected?this.emitEvent(o):this.receiveBuffer.push(Object.freeze(o))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const o=this._anyListeners.slice();for(const s of o)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const o=this;let s=!1;return function(...c){s||(s=!0,o.packet({type:vo.ACK,id:n,data:c}))}}onack(n){const o=this.acks[n.id];typeof o=="function"&&(o.apply(this,n.data),delete this.acks[n.id])}onconnect(n,o){this.id=n,this.recovered=o&&this._pid===o,this._pid=o,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:vo.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const o=this._anyListeners;for(let s=0;s<o.length;s++)if(n===o[s])return o.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const o=this._anyOutgoingListeners;for(let s=0;s<o.length;s++)if(n===o[s])return o.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const o=this._anyOutgoingListeners.slice();for(const s of o)s.apply(this,n.data)}}}function v0(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}v0.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),o=Math.floor(n*this.jitter*t);t=Math.floor(n*10)&1?t+o:t-o}return Math.min(t,this.max)|0};v0.prototype.reset=function(){this.attempts=0};v0.prototype.setMin=function(t){this.ms=t};v0.prototype.setMax=function(t){this.max=t};v0.prototype.setJitter=function(t){this.jitter=t};class $5 extends Os{constructor(n,o){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(o=n,n=void 0),o=o||{},o.path=o.path||"/socket.io",this.opts=o,RI(this,o),this.reconnection(o.reconnection!==!1),this.reconnectionAttempts(o.reconnectionAttempts||1/0),this.reconnectionDelay(o.reconnectionDelay||1e3),this.reconnectionDelayMax(o.reconnectionDelayMax||5e3),this.randomizationFactor((s=o.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new v0({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(o.timeout==null?2e4:o.timeout),this._readyState="closed",this.uri=n;const c=o.parser||Ese;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=o.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var o;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(o=this.backoff)===null||o===void 0||o.setMin(n),this)}randomizationFactor(n){var o;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(o=this.backoff)===null||o===void 0||o.setJitter(n),this)}reconnectionDelayMax(n){var o;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(o=this.backoff)===null||o===void 0||o.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new SU(this.uri,this.opts);const o=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const c=Ph(o,"open",function(){s.onopen(),n&&n()}),m=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),n?n(d):this.maybeReconnectOnOpen()},v=Ph(o,"error",m);if(this._timeout!==!1){const d=this._timeout,C=this.setTimeoutFn(()=>{c(),m(new Error("timeout")),o.close()},d);this.opts.autoUnref&&C.unref(),this.subs.push(()=>{this.clearTimeoutFn(C)})}return this.subs.push(c),this.subs.push(v),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Ph(n,"ping",this.onping.bind(this)),Ph(n,"data",this.ondata.bind(this)),Ph(n,"error",this.onerror.bind(this)),Ph(n,"close",this.onclose.bind(this)),Ph(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(o){this.onclose("parse error",o)}}ondecoded(n){xO(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,o){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new EU(this,n,o),this.nsps[n]=s),s}_destroy(n){const o=Object.keys(this.nsps);for(const s of o)if(this.nsps[s].active)return;this._close()}_packet(n){const o=this.encoder.encode(n);for(let s=0;s<o.length;s++)this.engine.write(o[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(n,o){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,o),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const o=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(c=>{c?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",c)):n.onreconnect()}))},o);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const Rx={};function NE(t,n){typeof t=="object"&&(n=t,t=void 0),n=n||{};const o=pse(t,n.path||"/socket.io"),s=o.source,c=o.id,m=o.path,v=Rx[c]&&m in Rx[c].nsps,d=n.forceNew||n["force new connection"]||n.multiplex===!1||v;let C;return d?C=new $5(s,n):(Rx[c]||(Rx[c]=new $5(s,n)),C=Rx[c]),o.query&&!n.query&&(n.query=o.queryKey),C.socket(o.path,n)}Object.assign(NE,{Manager:$5,Socket:EU,io:NE,connect:NE});class Ise{constructor(n,o,s,c){qg(this,"socket_port"),qg(this,"host"),qg(this,"port"),qg(this,"protocol"),qg(this,"url"),qg(this,"site_name"),qg(this,"socket");var m,v;if(this.socket_port=s??"9000",this.host=(m=window.location)==null?void 0:m.hostname,this.port=(v=window.location)!=null&&v.port?`:${this.socket_port}`:"",this.protocol=this.port?"http":"https",n){let d=new URL(n);d.port="",s?(d.port=s,this.url=d.toString()):this.url=d.toString()}else this.url=`${this.protocol}://${this.host}${this.port}/`;o&&(this.url=`${this.url}${o}`),this.site_name=o,this.socket=NE(`${this.url}`,{withCredentials:!0,secure:this.protocol==="https",extraHeaders:c&&c.useToken===!0?{Authorization:`${c.type} ${c.token}`}:{}})}}var TU={exports:{}},kx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zF;function Mse(){if(zF)return kx;zF=1;var t=rr,n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function v(d,C,S){var R,D={},$=null,H=null;S!==void 0&&($=""+S),C.key!==void 0&&($=""+C.key),C.ref!==void 0&&(H=C.ref);for(R in C)s.call(C,R)&&!m.hasOwnProperty(R)&&(D[R]=C[R]);if(d&&d.defaultProps)for(R in C=d.defaultProps,C)D[R]===void 0&&(D[R]=C[R]);return{$$typeof:n,type:d,key:$,ref:H,props:D,_owner:c.current}}return kx.Fragment=o,kx.jsx=v,kx.jsxs=v,kx}(function(t){t.exports=Mse()})(TU);const Pse=TU.exports.jsx,SO=E.createContext(null),Ase=({url:t="",tokenParams:n,socketPort:o,siteName:s,enableSocket:c=!0,children:m})=>{const v=E.useMemo(()=>{const d=new sae.FrappeApp(t,n);return{url:t,tokenParams:n,app:d,auth:d.auth(),db:d.db(),call:d.call(),file:d.file(),socket:c?new Ise(t,s,o,n).socket:void 0,enableSocket:c,socketPort:o}},[t,n,o,c]);return Pse(SO.Provider,{value:v,children:m})},IU=t=>{const{url:n,auth:o,tokenParams:s}=E.useContext(SO),[c,m]=E.useState(),v=E.useCallback(()=>{const Z=document.cookie.split(";").find(X=>X.trim().startsWith("user_id="));if(Z){const X=Z.split("=")[1];m(X&&X!=="Guest"?X:null)}else m(null)},[]);E.useEffect(()=>{s&&s.useToken?m(null):v()},[]);const{data:d,error:C,isLoading:S,isValidating:R,mutate:D}=hU(()=>s&&s.useToken||c?`${n}/api/method/frappe.auth.get_logged_user`:null,()=>o.getLoggedInUser(),{onError:()=>{m(null)},shouldRetryOnError:!1,revalidateOnFocus:!1,...t}),$=E.useCallback(async Z=>o.loginWithUsernamePassword(Z).then(X=>(v(),X)),[]),H=E.useCallback(async()=>o.logout().then(()=>D(null)).then(()=>m(null)),[]);return{isLoading:c===void 0||S,currentUser:d,isValidating:R,error:C,login:$,logout:H,updateCurrentUser:D,getUserCookie:v}},Rse=(t,n,o)=>{let s=`${n}/api/resource/`;return o?s+=`${t}/${o}`:s+=`${t}`,s},kse=t=>{var n,o,s;let c="";if(t!=null&&t.fields&&(c+="fields="+JSON.stringify(t?.fields)+"&"),t!=null&&t.filters&&(c+="filters="+JSON.stringify(t?.filters)+"&"),t!=null&&t.orFilters&&(c+="or_filters="+JSON.stringify(t?.orFilters)+"&"),t!=null&&t.limit_start&&(c+="limit_start="+JSON.stringify(t?.limit_start)+"&"),t!=null&&t.limit&&(c+="limit="+JSON.stringify(t?.limit)+"&"),t!=null&&t.groupBy&&(c+="group_by="+String(t.groupBy)+"&"),t!=null&&t.orderBy){const m=`${String((n=t.orderBy)==null?void 0:n.field)} ${(s=(o=t.orderBy)==null?void 0:o.order)!=null?s:"asc"}`;c+="order_by="+m+"&"}return t!=null&&t.asDict&&(c+="as_dict="+t.asDict),c},Ose=(t,n,o,s)=>{const{url:c,db:m}=E.useContext(SO);return{...hU(o===void 0?`${Rse(t,c)}?${kse(n)}`:o,()=>m.getDocList(t,n),s)}};var zse=typeof Element<"u",Dse=typeof Map=="function",Lse=typeof Set=="function",$se=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function jE(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var o,s,c;if(Array.isArray(t)){if(o=t.length,o!=n.length)return!1;for(s=o;s--!==0;)if(!jE(t[s],n[s]))return!1;return!0}var m;if(Dse&&t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(m=t.entries();!(s=m.next()).done;)if(!n.has(s.value[0]))return!1;for(m=t.entries();!(s=m.next()).done;)if(!jE(s.value[1],n.get(s.value[0])))return!1;return!0}if(Lse&&t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(m=t.entries();!(s=m.next()).done;)if(!n.has(s.value[0]))return!1;return!0}if($se&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(o=t.length,o!=n.length)return!1;for(s=o;s--!==0;)if(t[s]!==n[s])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof n.valueOf=="function")return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof n.toString=="function")return t.toString()===n.toString();if(c=Object.keys(t),o=c.length,o!==Object.keys(n).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[s]))return!1;if(zse&&t instanceof Element)return!1;for(s=o;s--!==0;)if(!((c[s]==="_owner"||c[s]==="__v"||c[s]==="__o")&&t.$$typeof)&&!jE(t[c[s]],n[c[s]]))return!1;return!0}return t!==t&&n!==n}var Bse=function(n,o){try{return jE(n,o)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const Fse=Nd(Bse);var Nse=function(t,n,o,s,c,m,v,d){if(!t){var C;if(n===void 0)C=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var S=[o,s,c,m,v,d],R=0;C=new Error(n.replace(/%s/g,function(){return S[R++]})),C.name="Invariant Violation"}throw C.framesToPop=1,C}},jse=Nse;const DF=Nd(jse);var Vse=function(n,o,s,c){var m=s?s.call(c,n,o):void 0;if(m!==void 0)return!!m;if(n===o)return!0;if(typeof n!="object"||!n||typeof o!="object"||!o)return!1;var v=Object.keys(n),d=Object.keys(o);if(v.length!==d.length)return!1;for(var C=Object.prototype.hasOwnProperty.bind(o),S=0;S<v.length;S++){var R=v[S];if(!C(R))return!1;var D=n[R],$=o[R];if(m=s?s.call(c,D,$,R):void 0,m===!1||m===void 0&&D!==$)return!1}return!0};const Use=Nd(Vse);var MU=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(MU||{}),xP={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},LF=Object.values(MU),CO={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Hse=Object.entries(CO).reduce((t,[n,o])=>(t[o]=n,t),{}),Oh="data-rh",$_={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},B_=(t,n)=>{for(let o=t.length-1;o>=0;o-=1){const s=t[o];if(Object.prototype.hasOwnProperty.call(s,n))return s[n]}return null},Gse=t=>{let n=B_(t,"title");const o=B_(t,$_.TITLE_TEMPLATE);if(Array.isArray(n)&&(n=n.join("")),o&&n)return o.replace(/%s/g,()=>n);const s=B_(t,$_.DEFAULT_TITLE);return n||s||void 0},qse=t=>B_(t,$_.ON_CHANGE_CLIENT_STATE)||(()=>{}),bP=(t,n)=>n.filter(o=>typeof o[t]<"u").map(o=>o[t]).reduce((o,s)=>({...o,...s}),{}),Wse=(t,n)=>n.filter(o=>typeof o.base<"u").map(o=>o.base).reverse().reduce((o,s)=>{if(!o.length){const c=Object.keys(s);for(let m=0;m<c.length;m+=1){const d=c[m].toLowerCase();if(t.indexOf(d)!==-1&&s[d])return o.concat(s)}}return o},[]),Kse=t=>console&&typeof console.warn=="function"&&console.warn(t),Ox=(t,n,o)=>{const s={};return o.filter(c=>Array.isArray(c[t])?!0:(typeof c[t]<"u"&&Kse(`Helmet: ${t} should be of type "Array". Instead found type "${typeof c[t]}"`),!1)).map(c=>c[t]).reverse().reduce((c,m)=>{const v={};m.filter(C=>{let S;const R=Object.keys(C);for(let $=0;$<R.length;$+=1){const H=R[$],Z=H.toLowerCase();n.indexOf(Z)!==-1&&!(S==="rel"&&C[S].toLowerCase()==="canonical")&&!(Z==="rel"&&C[Z].toLowerCase()==="stylesheet")&&(S=Z),n.indexOf(H)!==-1&&(H==="innerHTML"||H==="cssText"||H==="itemprop")&&(S=H)}if(!S||!C[S])return!1;const D=C[S].toLowerCase();return s[S]||(s[S]={}),v[S]||(v[S]={}),s[S][D]?!1:(v[S][D]=!0,!0)}).reverse().forEach(C=>c.push(C));const d=Object.keys(v);for(let C=0;C<d.length;C+=1){const S=d[C],R={...s[S],...v[S]};s[S]=R}return c},[]).reverse()},Zse=(t,n)=>{if(Array.isArray(t)&&t.length){for(let o=0;o<t.length;o+=1)if(t[o][n])return!0}return!1},Xse=t=>({baseTag:Wse(["href"],t),bodyAttributes:bP("bodyAttributes",t),defer:B_(t,$_.DEFER),encode:B_(t,$_.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:bP("htmlAttributes",t),linkTags:Ox("link",["rel","href"],t),metaTags:Ox("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Ox("noscript",["innerHTML"],t),onChangeClientState:qse(t),scriptTags:Ox("script",["src","innerHTML"],t),styleTags:Ox("style",["cssText"],t),title:Gse(t),titleAttributes:bP("titleAttributes",t),prioritizeSeoTags:Zse(t,$_.PRIORITIZE_SEO_TAGS)}),PU=t=>Array.isArray(t)?t.join(""):t,Yse=(t,n)=>{const o=Object.keys(t);for(let s=0;s<o.length;s+=1)if(n[o[s]]&&n[o[s]].includes(t[o[s]]))return!0;return!1},wP=(t,n)=>Array.isArray(t)?t.reduce((o,s)=>(Yse(s,n)?o.priority.push(s):o.default.push(s),o),{priority:[],default:[]}):{default:t,priority:[]},$F=(t,n)=>({...t,[n]:void 0}),Jse=["noscript","script","style"],B5=(t,n=!0)=>n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),AU=t=>Object.keys(t).reduce((n,o)=>{const s=typeof t[o]<"u"?`${o}="${t[o]}"`:`${o}`;return n?`${n} ${s}`:s},""),Qse=(t,n,o,s)=>{const c=AU(o),m=PU(n);return c?`<${t} ${Oh}="true" ${c}>${B5(m,s)}</${t}>`:`<${t} ${Oh}="true">${B5(m,s)}</${t}>`},ele=(t,n,o=!0)=>n.reduce((s,c)=>{const m=c,v=Object.keys(m).filter(S=>!(S==="innerHTML"||S==="cssText")).reduce((S,R)=>{const D=typeof m[R]>"u"?R:`${R}="${B5(m[R],o)}"`;return S?`${S} ${D}`:D},""),d=m.innerHTML||m.cssText||"",C=Jse.indexOf(t)===-1;return`${s}<${t} ${Oh}="true" ${v}${C?"/>":`>${d}</${t}>`}`},""),RU=(t,n={})=>Object.keys(t).reduce((o,s)=>{const c=CO[s];return o[c||s]=t[s],o},n),tle=(t,n,o)=>{const s={key:n,[Oh]:!0},c=RU(o,s);return[rr.createElement("title",c,n)]},VE=(t,n)=>n.map((o,s)=>{const c={key:s,[Oh]:!0};return Object.keys(o).forEach(m=>{const d=CO[m]||m;if(d==="innerHTML"||d==="cssText"){const C=o.innerHTML||o.cssText;c.dangerouslySetInnerHTML={__html:C}}else c[d]=o[m]}),rr.createElement(t,c)}),qu=(t,n,o=!0)=>{switch(t){case"title":return{toComponent:()=>tle(t,n.title,n.titleAttributes),toString:()=>Qse(t,n.title,n.titleAttributes,o)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>RU(n),toString:()=>AU(n)};default:return{toComponent:()=>VE(t,n),toString:()=>ele(t,n,o)}}},rle=({metaTags:t,linkTags:n,scriptTags:o,encode:s})=>{const c=wP(t,xP.meta),m=wP(n,xP.link),v=wP(o,xP.script);return{priorityMethods:{toComponent:()=>[...VE("meta",c.priority),...VE("link",m.priority),...VE("script",v.priority)],toString:()=>`${qu("meta",c.priority,s)} ${qu("link",m.priority,s)} ${qu("script",v.priority,s)}`},metaTags:c.default,linkTags:m.default,scriptTags:v.default}},nle=t=>{const{baseTag:n,bodyAttributes:o,encode:s=!0,htmlAttributes:c,noscriptTags:m,styleTags:v,title:d="",titleAttributes:C,prioritizeSeoTags:S}=t;let{linkTags:R,metaTags:D,scriptTags:$}=t,H={toComponent:()=>{},toString:()=>""};return S&&({priorityMethods:H,linkTags:R,metaTags:D,scriptTags:$}=rle(t)),{priority:H,base:qu("base",n,s),bodyAttributes:qu("bodyAttributes",o,s),htmlAttributes:qu("htmlAttributes",c,s),link:qu("link",R,s),meta:qu("meta",D,s),noscript:qu("noscript",m,s),script:qu("script",$,s),style:qu("style",v,s),title:qu("title",{title:d,titleAttributes:C},s)}},F5=nle,nE=[],kU=!!(typeof window<"u"&&window.document&&window.document.createElement),N5=class{constructor(t,n){Ef(this,"instances",[]);Ef(this,"canUseDOM",kU);Ef(this,"context");Ef(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?nE:this.instances,add:t=>{(this.canUseDOM?nE:this.instances).push(t)},remove:t=>{const n=(this.canUseDOM?nE:this.instances).indexOf(t);(this.canUseDOM?nE:this.instances).splice(n,1)}}});this.context=t,this.canUseDOM=n||!1,n||(t.helmet=F5({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},ile={},OU=rr.createContext(ile),U_,zU=(U_=class extends E.Component{constructor(o){super(o);Ef(this,"helmetData");this.helmetData=new N5(this.props.context||{},U_.canUseDOM)}render(){return rr.createElement(OU.Provider,{value:this.helmetData.value},this.props.children)}},Ef(U_,"canUseDOM",kU),U_),Zv=(t,n)=>{const o=document.head||document.querySelector("head"),s=o.querySelectorAll(`${t}[${Oh}]`),c=[].slice.call(s),m=[];let v;return n&&n.length&&n.forEach(d=>{const C=document.createElement(t);for(const S in d)if(Object.prototype.hasOwnProperty.call(d,S))if(S==="innerHTML")C.innerHTML=d.innerHTML;else if(S==="cssText")C.styleSheet?C.styleSheet.cssText=d.cssText:C.appendChild(document.createTextNode(d.cssText));else{const R=S,D=typeof d[R]>"u"?"":d[R];C.setAttribute(S,D)}C.setAttribute(Oh,"true"),c.some((S,R)=>(v=R,C.isEqualNode(S)))?c.splice(v,1):m.push(C)}),c.forEach(d=>d.parentNode?.removeChild(d)),m.forEach(d=>o.appendChild(d)),{oldTags:c,newTags:m}},j5=(t,n)=>{const o=document.getElementsByTagName(t)[0];if(!o)return;const s=o.getAttribute(Oh),c=s?s.split(","):[],m=[...c],v=Object.keys(n);for(const d of v){const C=n[d]||"";o.getAttribute(d)!==C&&o.setAttribute(d,C),c.indexOf(d)===-1&&c.push(d);const S=m.indexOf(d);S!==-1&&m.splice(S,1)}for(let d=m.length-1;d>=0;d-=1)o.removeAttribute(m[d]);c.length===m.length?o.removeAttribute(Oh):o.getAttribute(Oh)!==v.join(",")&&o.setAttribute(Oh,v.join(","))},ole=(t,n)=>{typeof t<"u"&&document.title!==t&&(document.title=PU(t)),j5("title",n)},BF=(t,n)=>{const{baseTag:o,bodyAttributes:s,htmlAttributes:c,linkTags:m,metaTags:v,noscriptTags:d,onChangeClientState:C,scriptTags:S,styleTags:R,title:D,titleAttributes:$}=t;j5("body",s),j5("html",c),ole(D,$);const H={baseTag:Zv("base",o),linkTags:Zv("link",m),metaTags:Zv("meta",v),noscriptTags:Zv("noscript",d),scriptTags:Zv("script",S),styleTags:Zv("style",R)},Z={},X={};Object.keys(H).forEach(Q=>{const{newTags:G,oldTags:K}=H[Q];G.length&&(Z[Q]=G),K.length&&(X[Q]=H[Q].oldTags)}),n&&n(),C(t,Z,X)},zx=null,ale=t=>{zx&&cancelAnimationFrame(zx),t.defer?zx=requestAnimationFrame(()=>{BF(t,()=>{zx=null})}):(BF(t),zx=null)},sle=ale,FF=class extends E.Component{constructor(){super(...arguments);Ef(this,"rendered",!1)}shouldComponentUpdate(n){return!Use(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:o}=this.props.context;let s=null;const c=Xse(n.get().map(m=>{const v={...m.props};return delete v.context,v}));zU.canUseDOM?sle(c):F5&&(s=F5(c)),o(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},AA,lle=(AA=class extends E.Component{shouldComponentUpdate(t){return!Fse($F(this.props,"helmetData"),$F(t,"helmetData"))}mapNestedChildrenToProps(t,n){if(!n)return null;switch(t.type){case"script":case"noscript":return{innerHTML:n};case"style":return{cssText:n};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,n,o,s){return{...n,[t.type]:[...n[t.type]||[],{...o,...this.mapNestedChildrenToProps(t,s)}]}}mapObjectTypeChildren(t,n,o,s){switch(t.type){case"title":return{...n,[t.type]:s,titleAttributes:{...o}};case"body":return{...n,bodyAttributes:{...o}};case"html":return{...n,htmlAttributes:{...o}};default:return{...n,[t.type]:{...o}}}}mapArrayTypeChildrenToProps(t,n){let o={...n};return Object.keys(t).forEach(s=>{o={...o,[s]:t[s]}}),o}warnOnInvalidChildren(t,n){return DF(LF.some(o=>t.type===o),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${LF.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),DF(!n||typeof n=="string"||Array.isArray(n)&&!n.some(o=>typeof o!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,n){let o={};return rr.Children.forEach(t,s=>{if(!s||!s.props)return;const{children:c,...m}=s.props,v=Object.keys(m).reduce((C,S)=>(C[Hse[S]||S]=m[S],C),{});let{type:d}=s;switch(typeof d=="symbol"?d=d.toString():this.warnOnInvalidChildren(s,c),d){case"Symbol(react.fragment)":n=this.mapChildrenToProps(c,n);break;case"link":case"meta":case"noscript":case"script":case"style":o=this.flattenArrayTypeChildren(s,o,v,c);break;default:n=this.mapObjectTypeChildren(s,n,v,c);break}}),this.mapArrayTypeChildrenToProps(o,n)}render(){const{children:t,...n}=this.props;let o={...n},{helmetData:s}=n;if(t&&(o=this.mapChildrenToProps(t,o)),s&&!(s instanceof N5)){const c=s;s=new N5(c.context,!0),delete o.helmetData}return s?rr.createElement(FF,{...o,context:s.value}):rr.createElement(OU.Consumer,null,c=>rr.createElement(FF,{...o,context:c}))}},Ef(AA,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),AA),V5={},NF=Nh;V5.createRoot=NF.createRoot,V5.hydrateRoot=NF.hydrateRoot;function cle({children:t}){return IU(),console.log(window.location.pathname),$r.jsx($r.Fragment,{children:t})}const ule="modulepreload",hle=function(t){return"/assets/mbw_dms/mbw_fe/"+t},jF={},is=function(n,o,s){let c=Promise.resolve();if(o&&o.length>0){const m=document.getElementsByTagName("link");c=Promise.all(o.map(v=>{if(v=hle(v),v in jF)return;jF[v]=!0;const d=v.endsWith(".css"),C=d?'[rel="stylesheet"]':"";if(!!s)for(let D=m.length-1;D>=0;D--){const $=m[D];if($.href===v&&(!d||$.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${C}`))return;const R=document.createElement("link");if(R.rel=d?"stylesheet":ule,d||(R.as="script",R.crossOrigin=""),R.href=v,document.head.appendChild(R),d)return new Promise((D,$)=>{R.addEventListener("load",D),R.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${v}`)))})}))}return c.then(()=>n()).catch(m=>{const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=m,window.dispatchEvent(v),!v.defaultPrevented)throw m})};var DU={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var n={}.hasOwnProperty;function o(){for(var m="",v=0;v<arguments.length;v++){var d=arguments[v];d&&(m=c(m,s(d)))}return m}function s(m){if(typeof m=="string"||typeof m=="number")return m;if(typeof m!="object")return"";if(Array.isArray(m))return o.apply(null,m);if(m.toString!==Object.prototype.toString&&!m.toString.toString().includes("[native code]"))return m.toString();var v="";for(var d in m)n.call(m,d)&&m[d]&&(v=c(v,d));return v}function c(m,v){return v?m?m+" "+v:m+v:m}t.exports?(o.default=o,t.exports=o):window.classNames=o})()})(DU);var dle=DU.exports;const Gt=Nd(dle);function Mr(){return Mr=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},Mr.apply(this,arguments)}var LU={exports:{}},ta={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO=Symbol.for("react.element"),TO=Symbol.for("react.portal"),kI=Symbol.for("react.fragment"),OI=Symbol.for("react.strict_mode"),zI=Symbol.for("react.profiler"),DI=Symbol.for("react.provider"),LI=Symbol.for("react.context"),fle=Symbol.for("react.server_context"),$I=Symbol.for("react.forward_ref"),BI=Symbol.for("react.suspense"),FI=Symbol.for("react.suspense_list"),NI=Symbol.for("react.memo"),jI=Symbol.for("react.lazy"),ple=Symbol.for("react.offscreen"),$U;$U=Symbol.for("react.module.reference");function rh(t){if(typeof t=="object"&&t!==null){var n=t.$$typeof;switch(n){case EO:switch(t=t.type,t){case kI:case zI:case OI:case BI:case FI:return t;default:switch(t=t&&t.$$typeof,t){case fle:case LI:case $I:case jI:case NI:case DI:return t;default:return n}}case TO:return n}}}ta.ContextConsumer=LI;ta.ContextProvider=DI;ta.Element=EO;ta.ForwardRef=$I;ta.Fragment=kI;ta.Lazy=jI;ta.Memo=NI;ta.Portal=TO;ta.Profiler=zI;ta.StrictMode=OI;ta.Suspense=BI;ta.SuspenseList=FI;ta.isAsyncMode=function(){return!1};ta.isConcurrentMode=function(){return!1};ta.isContextConsumer=function(t){return rh(t)===LI};ta.isContextProvider=function(t){return rh(t)===DI};ta.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===EO};ta.isForwardRef=function(t){return rh(t)===$I};ta.isFragment=function(t){return rh(t)===kI};ta.isLazy=function(t){return rh(t)===jI};ta.isMemo=function(t){return rh(t)===NI};ta.isPortal=function(t){return rh(t)===TO};ta.isProfiler=function(t){return rh(t)===zI};ta.isStrictMode=function(t){return rh(t)===OI};ta.isSuspense=function(t){return rh(t)===BI};ta.isSuspenseList=function(t){return rh(t)===FI};ta.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kI||t===zI||t===OI||t===BI||t===FI||t===ple||typeof t=="object"&&t!==null&&(t.$$typeof===jI||t.$$typeof===NI||t.$$typeof===DI||t.$$typeof===LI||t.$$typeof===$I||t.$$typeof===$U||t.getModuleId!==void 0)};ta.typeOf=rh;LU.exports=ta;var IO=LU.exports;function $c(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return rr.Children.forEach(t,function(s){s==null&&!n.keepEmpty||(Array.isArray(s)?o=o.concat($c(s)):IO.isFragment(s)&&s.props?o=o.concat($c(s.props.children,n)):o.push(s))}),o}var U5={},mle=function(n){};function gle(t,n){}function yle(t,n){}function vle(){U5={}}function BU(t,n,o){!n&&!U5[o]&&(t(!1,o),U5[o]=!0)}function Ua(t,n){BU(gle,t,n)}function _le(t,n){BU(yle,t,n)}Ua.preMessage=mle;Ua.resetWarned=vle;Ua.noteOnce=_le;function Ei(t){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ei(t)}function xle(t,n){if(Ei(t)!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var s=o.call(t,n||"default");if(Ei(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function FU(t){var n=xle(t,"string");return Ei(n)=="symbol"?n:n+""}function xt(t,n,o){return n=FU(n),n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function VF(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),o.push.apply(o,s)}return o}function yt(t){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?VF(Object(o),!0).forEach(function(s){xt(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):VF(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function zT(t){return t instanceof HTMLElement||t instanceof SVGElement}function ob(t){return zT(t)?t:t instanceof rr.Component?AT.findDOMNode(t):null}function Hm(t,n,o){var s=E.useRef({});return(!("value"in s.current)||o(s.current.condition,n))&&(s.current.value=t(),s.current.condition=n),s.current.value}function Lb(t,n){typeof t=="function"?t(n):Ei(t)==="object"&&t&&"current"in t&&(t.current=n)}function Cu(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var s=n.filter(function(c){return c});return s.length<=1?s[0]:function(c){n.forEach(function(m){Lb(m,c)})}}function Ey(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Hm(function(){return Cu.apply(void 0,n)},n,function(s,c){return s.length!==c.length||s.every(function(m,v){return m!==c[v]})})}function jh(t){var n,o,s=IO.isMemo(t)?t.type.type:t.type;return!(typeof s=="function"&&!((n=s.prototype)!==null&&n!==void 0&&n.render)||typeof t=="function"&&!((o=t.prototype)!==null&&o!==void 0&&o.render))}function ble(t){return!E.isValidElement(t)||IO.isFragment(t)?!1:jh(t)}var H5=E.createContext(null);function wle(t){var n=t.children,o=t.onBatchResize,s=E.useRef(0),c=E.useRef([]),m=E.useContext(H5),v=E.useCallback(function(d,C,S){s.current+=1;var R=s.current;c.current.push({size:d,element:C,data:S}),Promise.resolve().then(function(){R===s.current&&(o?.(c.current),c.current=[])}),m?.(d,C,S)},[o,m]);return E.createElement(H5.Provider,{value:v},n)}var NU=function(){if(typeof Map<"u")return Map;function t(n,o){var s=-1;return n.some(function(c,m){return c[0]===o?(s=m,!0):!1}),s}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(o){var s=t(this.__entries__,o),c=this.__entries__[s];return c&&c[1]},n.prototype.set=function(o,s){var c=t(this.__entries__,o);~c?this.__entries__[c][1]=s:this.__entries__.push([o,s])},n.prototype.delete=function(o){var s=this.__entries__,c=t(s,o);~c&&s.splice(c,1)},n.prototype.has=function(o){return!!~t(this.__entries__,o)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(o,s){s===void 0&&(s=null);for(var c=0,m=this.__entries__;c<m.length;c++){var v=m[c];o.call(s,v[1],v[0])}},n}()}(),G5=typeof window<"u"&&typeof document<"u"&&window.document===document,DT=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Sle=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(DT):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Cle=2;function Ele(t,n){var o=!1,s=!1,c=0;function m(){o&&(o=!1,t()),s&&d()}function v(){Sle(m)}function d(){var C=Date.now();if(o){if(C-c<Cle)return;s=!0}else o=!0,s=!1,setTimeout(v,n);c=C}return d}var Tle=20,Ile=["top","right","bottom","left","width","height","size","weight"],Mle=typeof MutationObserver<"u",Ple=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ele(this.refresh.bind(this),Tle)}return t.prototype.addObserver=function(n){~this.observers_.indexOf(n)||this.observers_.push(n),this.connected_||this.connect_()},t.prototype.removeObserver=function(n){var o=this.observers_,s=o.indexOf(n);~s&&o.splice(s,1),!o.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var n=this.updateObservers_();n&&this.refresh()},t.prototype.updateObservers_=function(){var n=this.observers_.filter(function(o){return o.gatherActive(),o.hasActive()});return n.forEach(function(o){return o.broadcastActive()}),n.length>0},t.prototype.connect_=function(){!G5||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Mle?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!G5||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(n){var o=n.propertyName,s=o===void 0?"":o,c=Ile.some(function(m){return!!~s.indexOf(m)});c&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),jU=function(t,n){for(var o=0,s=Object.keys(n);o<s.length;o++){var c=s[o];Object.defineProperty(t,c,{value:n[c],enumerable:!1,writable:!1,configurable:!0})}return t},J_=function(t){var n=t&&t.ownerDocument&&t.ownerDocument.defaultView;return n||DT},VU=VI(0,0,0,0);function LT(t){return parseFloat(t)||0}function UF(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return n.reduce(function(s,c){var m=t["border-"+c+"-width"];return s+LT(m)},0)}function Ale(t){for(var n=["top","right","bottom","left"],o={},s=0,c=n;s<c.length;s++){var m=c[s],v=t["padding-"+m];o[m]=LT(v)}return o}function Rle(t){var n=t.getBBox();return VI(0,0,n.width,n.height)}function kle(t){var n=t.clientWidth,o=t.clientHeight;if(!n&&!o)return VU;var s=J_(t).getComputedStyle(t),c=Ale(s),m=c.left+c.right,v=c.top+c.bottom,d=LT(s.width),C=LT(s.height);if(s.boxSizing==="border-box"&&(Math.round(d+m)!==n&&(d-=UF(s,"left","right")+m),Math.round(C+v)!==o&&(C-=UF(s,"top","bottom")+v)),!zle(t)){var S=Math.round(d+m)-n,R=Math.round(C+v)-o;Math.abs(S)!==1&&(d-=S),Math.abs(R)!==1&&(C-=R)}return VI(c.left,c.top,d,C)}var Ole=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof J_(t).SVGGraphicsElement}:function(t){return t instanceof J_(t).SVGElement&&typeof t.getBBox=="function"}}();function zle(t){return t===J_(t).document.documentElement}function Dle(t){return G5?Ole(t)?Rle(t):kle(t):VU}function Lle(t){var n=t.x,o=t.y,s=t.width,c=t.height,m=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,v=Object.create(m.prototype);return jU(v,{x:n,y:o,width:s,height:c,top:o,right:n+s,bottom:c+o,left:n}),v}function VI(t,n,o,s){return{x:t,y:n,width:o,height:s}}var $le=function(){function t(n){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=VI(0,0,0,0),this.target=n}return t.prototype.isActive=function(){var n=Dle(this.target);return this.contentRect_=n,n.width!==this.broadcastWidth||n.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var n=this.contentRect_;return this.broadcastWidth=n.width,this.broadcastHeight=n.height,n},t}(),Ble=function(){function t(n,o){var s=Lle(o);jU(this,{target:n,contentRect:s})}return t}(),Fle=function(){function t(n,o,s){if(this.activeObservations_=[],this.observations_=new NU,typeof n!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=n,this.controller_=o,this.callbackCtx_=s}return t.prototype.observe=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof J_(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(n)||(o.set(n,new $le(n)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(n instanceof J_(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var o=this.observations_;o.has(n)&&(o.delete(n),o.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var n=this;this.clearActive(),this.observations_.forEach(function(o){o.isActive()&&n.activeObservations_.push(o)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var n=this.callbackCtx_,o=this.activeObservations_.map(function(s){return new Ble(s.target,s.broadcastRect())});this.callback_.call(n,o,n),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),UU=typeof WeakMap<"u"?new WeakMap:new NU,HU=function(){function t(n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=Ple.getInstance(),s=new Fle(n,o,this);UU.set(this,s)}return t}();["observe","unobserve","disconnect"].forEach(function(t){HU.prototype[t]=function(){var n;return(n=UU.get(this))[t].apply(n,arguments)}});var Nle=function(){return typeof DT.ResizeObserver<"u"?DT.ResizeObserver:HU}(),vm=new Map;function jle(t){t.forEach(function(n){var o,s=n.target;(o=vm.get(s))===null||o===void 0||o.forEach(function(c){return c(s)})})}var GU=new Nle(jle);function Vle(t,n){vm.has(t)||(vm.set(t,new Set),GU.observe(t)),vm.get(t).add(n)}function Ule(t,n){vm.has(t)&&(vm.get(t).delete(n),vm.get(t).size||(GU.unobserve(t),vm.delete(t)))}function Il(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function HF(t,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,FU(s.key),s)}}function Ml(t,n,o){return n&&HF(t.prototype,n),o&&HF(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function q5(t,n){return q5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,c){return s.__proto__=c,s},q5(t,n)}function Wf(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&q5(t,n)}function $T(t){return $T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},$T(t)}function qU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qU=function(){return!!t})()}function Gi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hle(t,n){if(n&&(Ei(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gi(t)}function Kf(t){var n=qU();return function(){var s=$T(t),c;if(n){var m=$T(this).constructor;c=Reflect.construct(s,arguments,m)}else c=s.apply(this,arguments);return Hle(this,c)}}var Gle=function(t){Wf(o,t);var n=Kf(o);function o(){return Il(this,o),n.apply(this,arguments)}return Ml(o,[{key:"render",value:function(){return this.props.children}}]),o}(E.Component);function qle(t,n){var o=t.children,s=t.disabled,c=E.useRef(null),m=E.useRef(null),v=E.useContext(H5),d=typeof o=="function",C=d?o(c):o,S=E.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),R=!d&&E.isValidElement(C)&&jh(C),D=R?C.ref:null,$=Ey(D,c),H=function(){var G;return ob(c.current)||(c.current&&Ei(c.current)==="object"?ob((G=c.current)===null||G===void 0?void 0:G.nativeElement):null)||ob(m.current)};E.useImperativeHandle(n,function(){return H()});var Z=E.useRef(t);Z.current=t;var X=E.useCallback(function(Q){var G=Z.current,K=G.onResize,Y=G.data,re=Q.getBoundingClientRect(),fe=re.width,me=re.height,pe=Q.offsetWidth,xe=Q.offsetHeight,Se=Math.floor(fe),oe=Math.floor(me);if(S.current.width!==Se||S.current.height!==oe||S.current.offsetWidth!==pe||S.current.offsetHeight!==xe){var Re={width:Se,height:oe,offsetWidth:pe,offsetHeight:xe};S.current=Re;var Ve=pe===Math.round(fe)?fe:pe,Oe=xe===Math.round(me)?me:xe,_e=yt(yt({},Re),{},{offsetWidth:Ve,offsetHeight:Oe});v?.(_e,Q,Y),K&&Promise.resolve().then(function(){K(_e,Q)})}},[]);return E.useEffect(function(){var Q=H();return Q&&!s&&Vle(Q,X),function(){return Ule(Q,X)}},[c.current,s]),E.createElement(Gle,{ref:m},R?E.cloneElement(C,{ref:$}):C)}var Wle=E.forwardRef(qle),Kle="rc-observer-key";function Zle(t,n){var o=t.children,s=typeof o=="function"?[o]:$c(o);return s.map(function(c,m){var v=c?.key||"".concat(Kle,"-").concat(m);return E.createElement(Wle,Mr({},t,{key:v,ref:m===0?n:void 0}),c)})}var nh=E.forwardRef(Zle);nh.Collection=wle;function Zs(t,n){var o=yt({},t);return Array.isArray(n)&&n.forEach(function(s){delete o[s]}),o}function W5(t,n){(n==null||n>t.length)&&(n=t.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=t[o];return s}function Xle(t){if(Array.isArray(t))return W5(t)}function WU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MO(t,n){if(t){if(typeof t=="string")return W5(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return W5(t,n)}}function Yle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(t){return Xle(t)||WU(t)||MO(t)||Yle()}var KU=function(n){return+setTimeout(n,16)},ZU=function(n){return clearTimeout(n)};typeof window<"u"&&"requestAnimationFrame"in window&&(KU=function(n){return window.requestAnimationFrame(n)},ZU=function(n){return window.cancelAnimationFrame(n)});var GF=0,PO=new Map;function XU(t){PO.delete(t)}var Do=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;GF+=1;var s=GF;function c(m){if(m===0)XU(s),n();else{var v=KU(function(){c(m-1)});PO.set(s,v)}}return c(o),s};Do.cancel=function(t){var n=PO.get(t);return XU(t),ZU(n)};function YU(t){if(Array.isArray(t))return t}function Jle(t,n){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var s,c,m,v,d=[],C=!0,S=!1;try{if(m=(o=o.call(t)).next,n===0){if(Object(o)!==o)return;C=!1}else for(;!(C=(s=m.call(o)).done)&&(d.push(s.value),d.length!==n);C=!0);}catch(R){S=!0,c=R}finally{try{if(!C&&o.return!=null&&(v=o.return(),Object(v)!==v))return}finally{if(S)throw c}}return d}}function JU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(t,n){return YU(t)||Jle(t,n)||MO(t,n)||JU()}function BT(t){for(var n=0,o,s=0,c=t.length;c>=4;++s,c-=4)o=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,n=(o&65535)*1540483477+((o>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(c){case 3:n^=(t.charCodeAt(s+2)&255)<<16;case 2:n^=(t.charCodeAt(s+1)&255)<<8;case 1:n^=t.charCodeAt(s)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}function hl(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function K5(t,n){if(!t)return!1;if(t.contains)return t.contains(n);for(var o=n;o;){if(o===t)return!0;o=o.parentNode}return!1}var qF="data-rc-order",WF="data-rc-priority",Qle="rc-util-key",Z5=new Map;function QU(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.mark;return n?n.startsWith("data-")?n:"data-".concat(n):Qle}function UI(t){if(t.attachTo)return t.attachTo;var n=document.querySelector("head");return n||document.body}function ece(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function eH(t){return Array.from((Z5.get(t)||t).children).filter(function(n){return n.tagName==="STYLE"})}function tH(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hl())return null;var o=n.csp,s=n.prepend,c=n.priority,m=c===void 0?0:c,v=ece(s),d=v==="prependQueue",C=document.createElement("style");C.setAttribute(qF,v),d&&m&&C.setAttribute(WF,"".concat(m)),o!=null&&o.nonce&&(C.nonce=o?.nonce),C.innerHTML=t;var S=UI(n),R=S.firstChild;if(s){if(d){var D=eH(S).filter(function($){if(!["prepend","prependQueue"].includes($.getAttribute(qF)))return!1;var H=Number($.getAttribute(WF)||0);return m>=H});if(D.length)return S.insertBefore(C,D[D.length-1].nextSibling),C}S.insertBefore(C,R)}else S.appendChild(C);return C}function rH(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=UI(n);return eH(o).find(function(s){return s.getAttribute(QU(n))===t})}function $b(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=rH(t,n);if(o){var s=UI(n);s.removeChild(o)}}function tce(t,n){var o=Z5.get(t);if(!o||!K5(document,o)){var s=tH("",n),c=s.parentNode;Z5.set(t,c),t.removeChild(s)}}function zm(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=UI(o);tce(s,o);var c=rH(n,o);if(c){var m,v;if((m=o.csp)!==null&&m!==void 0&&m.nonce&&c.nonce!==((v=o.csp)===null||v===void 0?void 0:v.nonce)){var d;c.nonce=(d=o.csp)===null||d===void 0?void 0:d.nonce}return c.innerHTML!==t&&(c.innerHTML=t),c}var C=tH(t,o);return C.setAttribute(QU(o),n),C}function rce(t,n){if(t==null)return{};var o={},s=Object.keys(t),c,m;for(m=0;m<s.length;m++)c=s[m],!(n.indexOf(c)>=0)&&(o[c]=t[c]);return o}function xi(t,n){if(t==null)return{};var o=rce(t,n),s,c;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);for(c=0;c<m.length;c++)s=m[c],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(o[s]=t[s])}return o}function Vh(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=new Set;function c(m,v){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=s.has(m);if(Ua(!C,"Warning: There may be circular references"),C)return!1;if(m===v)return!0;if(o&&d>1)return!1;s.add(m);var S=d+1;if(Array.isArray(m)){if(!Array.isArray(v)||m.length!==v.length)return!1;for(var R=0;R<m.length;R++)if(!c(m[R],v[R],S))return!1;return!0}if(m&&v&&Ei(m)==="object"&&Ei(v)==="object"){var D=Object.keys(m);return D.length!==Object.keys(v).length?!1:D.every(function($){return c(m[$],v[$],S)})}return!1}return c(t,n)}var KF="%",nce=function(){function t(n){Il(this,t),xt(this,"instanceId",void 0),xt(this,"cache",new Map),this.instanceId=n}return Ml(t,[{key:"get",value:function(o){return this.cache.get(o.join(KF))||null}},{key:"update",value:function(o,s){var c=o.join(KF),m=this.cache.get(c),v=s(m);v===null?this.cache.delete(c):this.cache.set(c,v)}}]),t}(),ice=["children"],Q_="data-token-hash",$h="data-css-hash",_m="__cssinjs_instance__";function nH(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var n=document.body.querySelectorAll("style[".concat($h,"]"))||[],o=document.head.firstChild;Array.from(n).forEach(function(c){c[_m]=c[_m]||t,c[_m]===t&&document.head.insertBefore(c,o)});var s={};Array.from(document.querySelectorAll("style[".concat($h,"]"))).forEach(function(c){var m=c.getAttribute($h);if(s[m]){if(c[_m]===t){var v;(v=c.parentNode)===null||v===void 0||v.removeChild(c)}}else s[m]=!0})}return new nce(t)}var e0=E.createContext({hashPriority:"low",cache:nH(),defaultCache:!0}),L3e=function(n){var o=n.children,s=xi(n,ice),c=E.useContext(e0),m=Hm(function(){var v=yt({},c);Object.keys(s).forEach(function(C){var S=s[C];s[C]!==void 0&&(v[C]=S)});var d=s.cache;return v.cache=v.cache||nH(),v.defaultCache=!d&&c.defaultCache,v},[c,s],function(v,d){return!Vh(v[0],d[0],!0)||!Vh(v[1],d[1],!0)});return E.createElement(e0.Provider,{value:m},o)};function oce(t,n){if(t.length!==n.length)return!1;for(var o=0;o<t.length;o++)if(t[o]!==n[o])return!1;return!0}var AO=function(){function t(){Il(this,t),xt(this,"cache",void 0),xt(this,"keys",void 0),xt(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Ml(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(o){var s,c,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v={map:this.cache};return o.forEach(function(d){if(!v)v=void 0;else{var C;v=(C=v)===null||C===void 0||(C=C.map)===null||C===void 0?void 0:C.get(d)}}),(s=v)!==null&&s!==void 0&&s.value&&m&&(v.value[1]=this.cacheCallTimes++),(c=v)===null||c===void 0?void 0:c.value}},{key:"get",value:function(o){var s;return(s=this.internalGet(o,!0))===null||s===void 0?void 0:s[0]}},{key:"has",value:function(o){return!!this.internalGet(o)}},{key:"set",value:function(o,s){var c=this;if(!this.has(o)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var m=this.keys.reduce(function(S,R){var D=nr(S,2),$=D[1];return c.internalGet(R)[1]<$?[R,c.internalGet(R)[1]]:S},[this.keys[0],this.cacheCallTimes]),v=nr(m,1),d=v[0];this.delete(d)}this.keys.push(o)}var C=this.cache;o.forEach(function(S,R){if(R===o.length-1)C.set(S,{value:[s,c.cacheCallTimes++]});else{var D=C.get(S);D?D.map||(D.map=new Map):C.set(S,{map:new Map}),C=C.get(S).map}})}},{key:"deleteByPath",value:function(o,s){var c=o.get(s[0]);if(s.length===1){var m;return c.map?o.set(s[0],{map:c.map}):o.delete(s[0]),(m=c.value)===null||m===void 0?void 0:m[0]}var v=this.deleteByPath(c.map,s.slice(1));return(!c.map||c.map.size===0)&&!c.value&&o.delete(s[0]),v}},{key:"delete",value:function(o){if(this.has(o))return this.keys=this.keys.filter(function(s){return!oce(s,o)}),this.deleteByPath(this.cache,o)}}]),t}();xt(AO,"MAX_CACHE_SIZE",20);xt(AO,"MAX_CACHE_OFFSET",5);var ZF=0,iH=function(){function t(n){Il(this,t),xt(this,"derivatives",void 0),xt(this,"id",void 0),this.derivatives=Array.isArray(n)?n:[n],this.id=ZF,n.length===0&&(n.length>0,void 0),ZF+=1}return Ml(t,[{key:"getDerivativeToken",value:function(o){return this.derivatives.reduce(function(s,c){return c(o,s)},void 0)}}]),t}(),SP=new AO;function X5(t){var n=Array.isArray(t)?t:[t];return SP.has(n)||SP.set(n,new iH(n)),SP.get(n)}var ace=new WeakMap,CP={};function sce(t,n){for(var o=ace,s=0;s<n.length;s+=1){var c=n[s];o.has(c)||o.set(c,new WeakMap),o=o.get(c)}return o.has(CP)||o.set(CP,t()),o.get(CP)}var XF=new WeakMap;function ab(t){var n=XF.get(t)||"";return n||(Object.keys(t).forEach(function(o){var s=t[o];n+=o,s instanceof iH?n+=s.id:s&&Ei(s)==="object"?n+=ab(s):n+=s}),XF.set(t,n)),n}function YF(t,n){return BT("".concat(n,"_").concat(ab(t)))}var Bf="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),RO="_bAmBoO_";function kO(t,n,o){if(hl()){var s,c;zm(t,Bf);var m=document.createElement("div");m.style.position="fixed",m.style.left="0",m.style.top="0",n?.(m),document.body.appendChild(m);var v=o?o(m):(s=getComputedStyle(m).content)===null||s===void 0?void 0:s.includes(RO);return(c=m.parentNode)===null||c===void 0||c.removeChild(m),$b(Bf),v}return!1}var EP=void 0;function lce(){return EP===void 0&&(EP=kO("@layer ".concat(Bf," { .").concat(Bf,' { content: "').concat(RO,'"!important; } }'),function(t){t.className=Bf})),EP}var TP=void 0;function $3e(){return TP===void 0&&(TP=kO(":where(.".concat(Bf,') { content: "').concat(RO,'"!important; }'),function(t){t.className=Bf})),TP}var IP=void 0;function B3e(){return IP===void 0&&(IP=kO(".".concat(Bf," { inset-block: 93px !important; }"),function(t){t.className=Bf},function(t){return getComputedStyle(t).bottom==="93px"})),IP}var Y5=hl();function Xt(t){return typeof t=="number"?"".concat(t,"px"):t}function Bb(t,n,o){var s,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(m)return t;var v=yt(yt({},c),{},(s={},xt(s,Q_,n),xt(s,$h,o),s)),d=Object.keys(v).map(function(C){var S=v[C];return S?"".concat(C,'="').concat(S,'"'):null}).filter(function(C){return C}).join(" ");return"<style ".concat(d,">").concat(t,"</style>")}var oH=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(o?"".concat(o,"-"):"").concat(n).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},cce=function(n,o,s){return Object.keys(n).length?".".concat(o).concat(s!=null&&s.scope?".".concat(s.scope):"","{").concat(Object.entries(n).map(function(c){var m=nr(c,2),v=m[0],d=m[1];return"".concat(v,":").concat(d,";")}).join(""),"}"):""},aH=function(n,o,s){var c={},m={};return Object.entries(n).forEach(function(v){var d,C,S=nr(v,2),R=S[0],D=S[1];if(s!=null&&(d=s.preserve)!==null&&d!==void 0&&d[R])m[R]=D;else if((typeof D=="string"||typeof D=="number")&&!(s!=null&&(C=s.ignore)!==null&&C!==void 0&&C[R])){var $,H=oH(R,s?.prefix);c[H]=typeof D=="number"&&!(s!=null&&($=s.unitless)!==null&&$!==void 0&&$[R])?"".concat(D,"px"):String(D),m[R]="var(".concat(H,")")}}),[m,cce(c,o,{scope:s?.scope})]},JF=hl()?E.useLayoutEffect:E.useEffect,zo=function(n,o){var s=E.useRef(!0);JF(function(){return n(s.current)},o),JF(function(){return s.current=!1,function(){s.current=!0}},[])},QF=function(n,o){zo(function(s){if(!s)return n()},o)},uce=yt({},f0),e8=uce.useInsertionEffect,hce=function(n,o,s){E.useMemo(n,s),zo(function(){return o(!0)},s)},dce=e8?function(t,n,o){return e8(function(){return t(),n()},o)}:hce,fce=yt({},f0),pce=fce.useInsertionEffect,mce=function(n){var o=[],s=!1;function c(m){s||o.push(m)}return E.useEffect(function(){return s=!1,function(){s=!0,o.length&&o.forEach(function(m){return m()})}},n),c},gce=function(){return function(n){n()}},yce=typeof pce<"u"?mce:gce;function OO(t,n,o,s,c){var m=E.useContext(e0),v=m.cache,d=[t].concat(Pr(n)),C=d.join("_"),S=yce([C]),R=function(Z){v.update(d,function(X){var Q=X||[void 0,void 0],G=nr(Q,2),K=G[0],Y=K===void 0?0:K,re=G[1],fe=re,me=fe||o(),pe=[Y,me];return Z?Z(pe):pe})};E.useMemo(function(){R()},[C]);var D=v.get(d),$=D[1];return dce(function(){c?.($)},function(H){return R(function(Z){var X=nr(Z,2),Q=X[0],G=X[1];return H&&Q===0&&c?.($),[Q+1,G]}),function(){v.update(d,function(Z){var X=Z||[],Q=nr(X,2),G=Q[0],K=G===void 0?0:G,Y=Q[1],re=K-1;return re===0?(S(function(){(H||!v.get(d))&&s?.(Y,!1)}),null):[K-1,Y]})}},[C]),$}var vce={},_ce="css",ey=new Map;function xce(t){ey.set(t,(ey.get(t)||0)+1)}function bce(t,n){if(typeof document<"u"){var o=document.querySelectorAll("style[".concat(Q_,'="').concat(t,'"]'));o.forEach(function(s){if(s[_m]===n){var c;(c=s.parentNode)===null||c===void 0||c.removeChild(s)}})}}var wce=0;function Sce(t,n){ey.set(t,(ey.get(t)||0)-1);var o=Array.from(ey.keys()),s=o.filter(function(c){var m=ey.get(c)||0;return m<=0});o.length-s.length>wce&&s.forEach(function(c){bce(c,n),ey.delete(c)})}var Cce=function(n,o,s,c){var m=s.getDerivativeToken(n),v=yt(yt({},m),o);return c&&(v=c(v)),v},sH="token";function Ece(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=E.useContext(e0),c=s.cache.instanceId,m=s.container,v=o.salt,d=v===void 0?"":v,C=o.override,S=C===void 0?vce:C,R=o.formatToken,D=o.getComputedToken,$=o.cssVar,H=sce(function(){return Object.assign.apply(Object,[{}].concat(Pr(n)))},n),Z=ab(H),X=ab(S),Q=$?ab($):"",G=OO(sH,[d,t.id,Z,X,Q],function(){var K,Y=D?D(H,S,t):Cce(H,S,t,R),re=yt({},Y),fe="";if($){var me=aH(Y,$.key,{prefix:$.prefix,ignore:$.ignore,unitless:$.unitless,preserve:$.preserve}),pe=nr(me,2);Y=pe[0],fe=pe[1]}var xe=YF(Y,d);Y._tokenKey=xe,re._tokenKey=YF(re,d);var Se=(K=$?.key)!==null&&K!==void 0?K:xe;Y._themeKey=Se,xce(Se);var oe="".concat(_ce,"-").concat(BT(xe));return Y._hashId=oe,[Y,oe,re,fe,$?.key||""]},function(K){Sce(K[0]._themeKey,c)},function(K){var Y=nr(K,4),re=Y[0],fe=Y[3];if($&&fe){var me=zm(fe,BT("css-variables-".concat(re._themeKey)),{mark:$h,prepend:"queue",attachTo:m,priority:-999});me[_m]=c,me.setAttribute(Q_,re._themeKey)}});return G}var Tce=function(n,o,s){var c=nr(n,5),m=c[2],v=c[3],d=c[4],C=s||{},S=C.plain;if(!v)return null;var R=m._tokenKey,D=-999,$={"data-rc-order":"prependQueue","data-rc-priority":"".concat(D)},H=Bb(v,d,R,$,S);return[D,R,H]},Ice={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ra="-ms-",sb="-moz-",Zo="-webkit-",lH="comm",HI="rule",zO="decl",Mce="@import",cH="@keyframes",Pce="@layer",uH=Math.abs,DO=String.fromCharCode,J5=Object.assign;function Ace(t,n){return al(t,0)^45?(((n<<2^al(t,0))<<2^al(t,1))<<2^al(t,2))<<2^al(t,3):0}function hH(t){return t.trim()}function Af(t,n){return(t=n.exec(t))?t[0]:t}function Zi(t,n,o){return t.replace(n,o)}function UE(t,n,o){return t.indexOf(n,o)}function al(t,n){return t.charCodeAt(n)|0}function t0(t,n,o){return t.slice(n,o)}function zd(t){return t.length}function dH(t){return t.length}function Wx(t,n){return n.push(t),t}function Rce(t,n){return t.map(n).join("")}function t8(t,n){return t.filter(function(o){return!Af(o,n)})}var GI=1,r0=1,fH=0,th=0,Rs=0,_0="";function qI(t,n,o,s,c,m,v,d){return{value:t,root:n,parent:o,type:s,props:c,children:m,line:GI,column:r0,length:v,return:"",siblings:d}}function sm(t,n){return J5(qI("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},n)}function Xv(t){for(;t.root;)t=sm(t.root,{children:[t]});Wx(t,t.siblings)}function kce(){return Rs}function Oce(){return Rs=th>0?al(_0,--th):0,r0--,Rs===10&&(r0=1,GI--),Rs}function Bh(){return Rs=th<fH?al(_0,th++):0,r0++,Rs===10&&(r0=1,GI++),Rs}function hy(){return al(_0,th)}function HE(){return th}function WI(t,n){return t0(_0,t,n)}function Q5(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zce(t){return GI=r0=1,fH=zd(_0=t),th=0,[]}function Dce(t){return _0="",t}function MP(t){return hH(WI(th-1,eR(t===91?t+2:t===40?t+1:t)))}function Lce(t){for(;(Rs=hy())&&Rs<33;)Bh();return Q5(t)>2||Q5(Rs)>3?"":" "}function $ce(t,n){for(;--n&&Bh()&&!(Rs<48||Rs>102||Rs>57&&Rs<65||Rs>70&&Rs<97););return WI(t,HE()+(n<6&&hy()==32&&Bh()==32))}function eR(t){for(;Bh();)switch(Rs){case t:return th;case 34:case 39:t!==34&&t!==39&&eR(Rs);break;case 40:t===41&&eR(t);break;case 92:Bh();break}return th}function Bce(t,n){for(;Bh()&&t+Rs!==57;)if(t+Rs===84&&hy()===47)break;return"/*"+WI(n,th-1)+"*"+DO(t===47?t:Bh())}function Fce(t){for(;!Q5(hy());)Bh();return WI(t,th)}function pH(t){return Dce(GE("",null,null,null,[""],t=zce(t),0,[0],t))}function GE(t,n,o,s,c,m,v,d,C){for(var S=0,R=0,D=v,$=0,H=0,Z=0,X=1,Q=1,G=1,K=0,Y="",re=c,fe=m,me=s,pe=Y;Q;)switch(Z=K,K=Bh()){case 40:if(Z!=108&&al(pe,D-1)==58){UE(pe+=Zi(MP(K),"&","&\f"),"&\f",uH(S?d[S-1]:0))!=-1&&(G=-1);break}case 34:case 39:case 91:pe+=MP(K);break;case 9:case 10:case 13:case 32:pe+=Lce(Z);break;case 92:pe+=$ce(HE()-1,7);continue;case 47:switch(hy()){case 42:case 47:Wx(Nce(Bce(Bh(),HE()),n,o,C),C);break;default:pe+="/"}break;case 123*X:d[S++]=zd(pe)*G;case 125*X:case 59:case 0:switch(K){case 0:case 125:Q=0;case 59+R:G==-1&&(pe=Zi(pe,/\f/g,"")),H>0&&zd(pe)-D&&Wx(H>32?n8(pe+";",s,o,D-1,C):n8(Zi(pe," ","")+";",s,o,D-2,C),C);break;case 59:pe+=";";default:if(Wx(me=r8(pe,n,o,S,R,c,d,Y,re=[],fe=[],D,m),m),K===123)if(R===0)GE(pe,n,me,me,re,m,D,d,fe);else switch($===99&&al(pe,3)===110?100:$){case 100:case 108:case 109:case 115:GE(t,me,me,s&&Wx(r8(t,me,me,0,0,c,d,Y,c,re=[],D,fe),fe),c,fe,D,d,s?re:fe);break;default:GE(pe,me,me,me,[""],fe,0,d,fe)}}S=R=H=0,X=G=1,Y=pe="",D=v;break;case 58:D=1+zd(pe),H=Z;default:if(X<1){if(K==123)--X;else if(K==125&&X++==0&&Oce()==125)continue}switch(pe+=DO(K),K*X){case 38:G=R>0?1:(pe+="\f",-1);break;case 44:d[S++]=(zd(pe)-1)*G,G=1;break;case 64:hy()===45&&(pe+=MP(Bh())),$=hy(),R=D=zd(Y=pe+=Fce(HE())),K++;break;case 45:Z===45&&zd(pe)==2&&(X=0)}}return m}function r8(t,n,o,s,c,m,v,d,C,S,R,D){for(var $=c-1,H=c===0?m:[""],Z=dH(H),X=0,Q=0,G=0;X<s;++X)for(var K=0,Y=t0(t,$+1,$=uH(Q=v[X])),re=t;K<Z;++K)(re=hH(Q>0?H[K]+" "+Y:Zi(Y,/&\f/g,H[K])))&&(C[G++]=re);return qI(t,n,o,c===0?HI:d,C,S,R,D)}function Nce(t,n,o,s){return qI(t,n,o,lH,DO(kce()),t0(t,2,-2),0,s)}function n8(t,n,o,s,c){return qI(t,n,o,zO,t0(t,0,s),t0(t,s+1,-1),s,c)}function mH(t,n,o){switch(Ace(t,n)){case 5103:return Zo+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zo+t+t;case 4789:return sb+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Zo+t+sb+t+Ra+t+t;case 5936:switch(al(t,n+11)){case 114:return Zo+t+Ra+Zi(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Zo+t+Ra+Zi(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Zo+t+Ra+Zi(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Zo+t+Ra+t+t;case 6165:return Zo+t+Ra+"flex-"+t+t;case 5187:return Zo+t+Zi(t,/(\w+).+(:[^]+)/,Zo+"box-$1$2"+Ra+"flex-$1$2")+t;case 5443:return Zo+t+Ra+"flex-item-"+Zi(t,/flex-|-self/g,"")+(Af(t,/flex-|baseline/)?"":Ra+"grid-row-"+Zi(t,/flex-|-self/g,""))+t;case 4675:return Zo+t+Ra+"flex-line-pack"+Zi(t,/align-content|flex-|-self/g,"")+t;case 5548:return Zo+t+Ra+Zi(t,"shrink","negative")+t;case 5292:return Zo+t+Ra+Zi(t,"basis","preferred-size")+t;case 6060:return Zo+"box-"+Zi(t,"-grow","")+Zo+t+Ra+Zi(t,"grow","positive")+t;case 4554:return Zo+Zi(t,/([^-])(transform)/g,"$1"+Zo+"$2")+t;case 6187:return Zi(Zi(Zi(t,/(zoom-|grab)/,Zo+"$1"),/(image-set)/,Zo+"$1"),t,"")+t;case 5495:case 3959:return Zi(t,/(image-set\([^]*)/,Zo+"$1$`$1");case 4968:return Zi(Zi(t,/(.+:)(flex-)?(.*)/,Zo+"box-pack:$3"+Ra+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zo+t+t;case 4200:if(!Af(t,/flex-|baseline/))return Ra+"grid-column-align"+t0(t,n)+t;break;case 2592:case 3360:return Ra+Zi(t,"template-","")+t;case 4384:case 3616:return o&&o.some(function(s,c){return n=c,Af(s.props,/grid-\w+-end/)})?~UE(t+(o=o[n].value),"span",0)?t:Ra+Zi(t,"-start","")+t+Ra+"grid-row-span:"+(~UE(o,"span",0)?Af(o,/\d+/):+Af(o,/\d+/)-+Af(t,/\d+/))+";":Ra+Zi(t,"-start","")+t;case 4896:case 4128:return o&&o.some(function(s){return Af(s.props,/grid-\w+-start/)})?t:Ra+Zi(Zi(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Zi(t,/(.+)-inline(.+)/,Zo+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zd(t)-1-n>6)switch(al(t,n+1)){case 109:if(al(t,n+4)!==45)break;case 102:return Zi(t,/(.+:)(.+)-([^]+)/,"$1"+Zo+"$2-$3$1"+sb+(al(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~UE(t,"stretch",0)?mH(Zi(t,"stretch","fill-available"),n,o)+t:t}break;case 5152:case 5920:return Zi(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,c,m,v,d,C,S){return Ra+c+":"+m+S+(v?Ra+c+"-span:"+(d?C:+C-+m)+S:"")+t});case 4949:if(al(t,n+6)===121)return Zi(t,":",":"+Zo)+t;break;case 6444:switch(al(t,al(t,14)===45?18:11)){case 120:return Zi(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Zo+(al(t,14)===45?"inline-":"")+"box$3$1"+Zo+"$2$3$1"+Ra+"$2box$3")+t;case 100:return Zi(t,":",":"+Ra)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Zi(t,"scroll-","scroll-snap-")+t}return t}function Fb(t,n){for(var o="",s=0;s<t.length;s++)o+=n(t[s],s,t,n)||"";return o}function gH(t,n,o,s){switch(t.type){case Pce:if(t.children.length)break;case Mce:case zO:return t.return=t.return||t.value;case lH:return"";case cH:return t.return=t.value+"{"+Fb(t.children,s)+"}";case HI:if(!zd(t.value=t.props.join(",")))return""}return zd(o=Fb(t.children,s))?t.return=t.value+"{"+o+"}":""}function jce(t){var n=dH(t);return function(o,s,c,m){for(var v="",d=0;d<n;d++)v+=t[d](o,s,c,m)||"";return v}}function Vce(t){return function(n){n.root||(n=n.return)&&t(n)}}function Uce(t,n,o,s){if(t.length>-1&&!t.return)switch(t.type){case zO:t.return=mH(t.value,t.length,o);return;case cH:return Fb([sm(t,{value:Zi(t.value,"@","@"+Zo)})],s);case HI:if(t.length)return Rce(o=t.props,function(c){switch(Af(c,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Xv(sm(t,{props:[Zi(c,/:(read-\w+)/,":"+sb+"$1")]})),Xv(sm(t,{props:[c]})),J5(t,{props:t8(o,s)});break;case"::placeholder":Xv(sm(t,{props:[Zi(c,/:(plac\w+)/,":"+Zo+"input-$1")]})),Xv(sm(t,{props:[Zi(c,/:(plac\w+)/,":"+sb+"$1")]})),Xv(sm(t,{props:[Zi(c,/:(plac\w+)/,Ra+"input-$1")]})),Xv(sm(t,{props:[c]})),J5(t,{props:t8(o,s)});break}return""})}}var lb="data-ant-cssinjs-cache-path",yH="_FILE_STYLE__";function Hce(t){return Object.keys(t).map(function(n){var o=t[n];return"".concat(n,":").concat(o)}).join(";")}var dy,vH=!0;function Gce(){if(!dy&&(dy={},hl())){var t=document.createElement("div");t.className=lb,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var n=getComputedStyle(t).content||"";n=n.replace(/^"/,"").replace(/"$/,""),n.split(";").forEach(function(c){var m=c.split(":"),v=nr(m,2),d=v[0],C=v[1];dy[d]=C});var o=document.querySelector("style[".concat(lb,"]"));if(o){var s;vH=!1,(s=o.parentNode)===null||s===void 0||s.removeChild(o)}document.body.removeChild(t)}}function qce(t){return Gce(),!!dy[t]}function Wce(t){var n=dy[t],o=null;if(n&&hl())if(vH)o=yH;else{var s=document.querySelector("style[".concat($h,'="').concat(dy[t],'"]'));s?o=s.innerHTML:delete dy[t]}return[o,n]}var Kce="_skip_check_",_H="_multi_value_";function tR(t){var n=Fb(pH(t),gH);return n.replace(/\{%%%\:[^;];}/g,";")}function Zce(t){return Ei(t)==="object"&&t&&(Kce in t||_H in t)}function Xce(t,n,o){if(!n)return t;var s=".".concat(n),c=o==="low"?":where(".concat(s,")"):s,m=t.split(",").map(function(v){var d,C=v.trim().split(/\s+/),S=C[0]||"",R=((d=S.match(/^\w+/))===null||d===void 0?void 0:d[0])||"";return S="".concat(R).concat(c).concat(S.slice(R.length)),[S].concat(Pr(C.slice(1))).join(" ")});return m.join(",")}var Yce=function t(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=s.root,m=s.injectHash,v=s.parentSelectors,d=o.hashId,C=o.layer;o.path;var S=o.hashPriority,R=o.transformers,D=R===void 0?[]:R;o.linters;var $="",H={};function Z(Y){var re=Y.getName(d);if(!H[re]){var fe=t(Y.style,o,{root:!1,parentSelectors:v}),me=nr(fe,1),pe=me[0];H[re]="@keyframes ".concat(Y.getName(d)).concat(pe)}}function X(Y){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Y.forEach(function(fe){Array.isArray(fe)?X(fe,re):fe&&re.push(fe)}),re}var Q=X(Array.isArray(n)?n:[n]);if(Q.forEach(function(Y){var re=typeof Y=="string"&&!c?{}:Y;if(typeof re=="string")$+="".concat(re,`
`);else if(re._keyframe)Z(re);else{var fe=D.reduce(function(me,pe){var xe;return(pe==null||(xe=pe.visit)===null||xe===void 0?void 0:xe.call(pe,me))||me},re);Object.keys(fe).forEach(function(me){var pe=fe[me];if(Ei(pe)==="object"&&pe&&(me!=="animationName"||!pe._keyframe)&&!Zce(pe)){var xe=!1,Se=me.trim(),oe=!1;(c||m)&&d?Se.startsWith("@")?xe=!0:Se=Xce(me,d,S):c&&!d&&(Se==="&"||Se==="")&&(Se="",oe=!0);var Re=t(pe,o,{root:oe,injectHash:xe,parentSelectors:[].concat(Pr(v),[Se])}),Ve=nr(Re,2),Oe=Ve[0],_e=Ve[1];H=yt(yt({},H),_e),$+="".concat(Se).concat(Oe)}else{let Me=function(Ce,Ye){var qe=Ce.replace(/[A-Z]/g,function(Qe){return"-".concat(Qe.toLowerCase())}),rt=Ye;!Ice[Ce]&&typeof rt=="number"&&rt!==0&&(rt="".concat(rt,"px")),Ce==="animationName"&&Ye!==null&&Ye!==void 0&&Ye._keyframe&&(Z(Ye),rt=Ye.getName(d)),$+="".concat(qe,":").concat(rt,";")};var Fe,Le=(Fe=pe?.value)!==null&&Fe!==void 0?Fe:pe;Ei(pe)==="object"&&pe!==null&&pe!==void 0&&pe[_H]&&Array.isArray(Le)?Le.forEach(function(Ce){Me(me,Ce)}):Me(me,Le)}})}}),!c)$="{".concat($,"}");else if(C&&lce()){var G=C.split(","),K=G[G.length-1].trim();$="@layer ".concat(K," {").concat($,"}"),G.length>1&&($="@layer ".concat(C,"{%%%:%}").concat($))}return[$,H]};function xH(t,n){return BT("".concat(t.join("%")).concat(n))}function Jce(){return null}var bH="style";function rR(t,n){var o=t.token,s=t.path,c=t.hashId,m=t.layer,v=t.nonce,d=t.clientOnly,C=t.order,S=C===void 0?0:C,R=E.useContext(e0),D=R.autoClear;R.mock;var $=R.defaultCache,H=R.hashPriority,Z=R.container,X=R.ssrInline,Q=R.transformers,G=R.linters,K=R.cache,Y=o._tokenKey,re=[Y].concat(Pr(s)),fe=Y5,me=OO(bH,re,function(){var Re=re.join("|");if(qce(Re)){var Ve=Wce(Re),Oe=nr(Ve,2),_e=Oe[0],Fe=Oe[1];if(_e)return[_e,Y,Fe,{},d,S]}var Le=n(),Me=Yce(Le,{hashId:c,hashPriority:H,layer:m,path:s.join("-"),transformers:Q,linters:G}),Ce=nr(Me,2),Ye=Ce[0],qe=Ce[1],rt=tR(Ye),Qe=xH(re,rt);return[rt,Y,Qe,qe,d,S]},function(Re,Ve){var Oe=nr(Re,3),_e=Oe[2];(Ve||D)&&Y5&&$b(_e,{mark:$h})},function(Re){var Ve=nr(Re,4),Oe=Ve[0];Ve[1];var _e=Ve[2],Fe=Ve[3];if(fe&&Oe!==yH){var Le={mark:$h,prepend:"queue",attachTo:Z,priority:S},Me=typeof v=="function"?v():v;Me&&(Le.csp={nonce:Me});var Ce=zm(Oe,_e,Le);Ce[_m]=K.instanceId,Ce.setAttribute(Q_,Y),Object.keys(Fe).forEach(function(Ye){zm(tR(Fe[Ye]),"_effect-".concat(Ye),Le)})}}),pe=nr(me,3),xe=pe[0],Se=pe[1],oe=pe[2];return function(Re){var Ve;if(!X||fe||!$)Ve=E.createElement(Jce,null);else{var Oe;Ve=E.createElement("style",Mr({},(Oe={},xt(Oe,Q_,Se),xt(Oe,$h,oe),Oe),{dangerouslySetInnerHTML:{__html:xe}}))}return E.createElement(E.Fragment,null,Ve,Re)}}var Qce=function(n,o,s){var c=nr(n,6),m=c[0],v=c[1],d=c[2],C=c[3],S=c[4],R=c[5],D=s||{},$=D.plain;if(S)return null;var H=m,Z={"data-rc-order":"prependQueue","data-rc-priority":"".concat(R)};return H=Bb(m,v,d,Z,$),C&&Object.keys(C).forEach(function(X){if(!o[X]){o[X]=!0;var Q=tR(C[X]);H+=Bb(Q,v,"_effect-".concat(X),Z,$)}}),[R,d,H]},wH="cssVar",eue=function(n,o){var s=n.key,c=n.prefix,m=n.unitless,v=n.ignore,d=n.token,C=n.scope,S=C===void 0?"":C,R=E.useContext(e0),D=R.cache.instanceId,$=R.container,H=d._tokenKey,Z=[].concat(Pr(n.path),[s,S,H]),X=OO(wH,Z,function(){var Q=o(),G=aH(Q,s,{prefix:c,unitless:m,ignore:v,scope:S}),K=nr(G,2),Y=K[0],re=K[1],fe=xH(Z,re);return[Y,re,fe,s]},function(Q){var G=nr(Q,3),K=G[2];Y5&&$b(K,{mark:$h})},function(Q){var G=nr(Q,3),K=G[1],Y=G[2];if(K){var re=zm(K,Y,{mark:$h,prepend:"queue",attachTo:$,priority:-999});re[_m]=D,re.setAttribute(Q_,s)}});return X},tue=function(n,o,s){var c=nr(n,4),m=c[1],v=c[2],d=c[3],C=s||{},S=C.plain;if(!m)return null;var R=-999,D={"data-rc-order":"prependQueue","data-rc-priority":"".concat(R)},$=Bb(m,d,v,D,S);return[R,v,$]},Dx,rue=(Dx={},xt(Dx,bH,Qce),xt(Dx,sH,Tce),xt(Dx,wH,tue),Dx);function nue(t){return t!==null}function F3e(t,n){var o=typeof n=="boolean"?{plain:n}:n||{},s=o.plain,c=s===void 0?!1:s,m=o.types,v=m===void 0?["style","token","cssVar"]:m,d=new RegExp("^(".concat((typeof v=="string"?[v]:v).join("|"),")%")),C=Array.from(t.cache.keys()).filter(function($){return d.test($)}),S={},R={},D="";return C.map(function($){var H=$.replace(d,"").replace(/%/g,"|"),Z=$.split("%"),X=nr(Z,1),Q=X[0],G=rue[Q],K=G(t.cache.get($)[1],S,{plain:c});if(!K)return null;var Y=nr(K,3),re=Y[0],fe=Y[1],me=Y[2];return $.startsWith("style")&&(R[H]=fe),[re,me]}).filter(nue).sort(function($,H){var Z=nr($,1),X=Z[0],Q=nr(H,1),G=Q[0];return X-G}).forEach(function($){var H=nr($,2),Z=H[1];D+=Z}),D+=Bb(".".concat(lb,'{content:"').concat(Hce(R),'";}'),void 0,void 0,xt({},lb,lb),c),D}var Mo=function(){function t(n,o){Il(this,t),xt(this,"name",void 0),xt(this,"style",void 0),xt(this,"_keyframe",!0),this.name=n,this.style=o}return Ml(t,[{key:"getName",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return o?"".concat(o,"-").concat(this.name):this.name}}]),t}();function iue(t){if(typeof t=="number")return[[t],!1];var n=String(t).trim(),o=n.match(/(.*)(!important)/),s=(o?o[1]:n).trim().split(/\s+/),c="",m=0;return[s.reduce(function(v,d){if(d.includes("(")||d.includes(")")){var C=d.split("(").length-1,S=d.split(")").length-1;m+=C-S}return m===0?(v.push(c+d),c=""):m>0&&(c+=d),v},[]),!!o]}function Yv(t){return t.notSplit=!0,t}var oue={inset:["top","right","bottom","left"],insetBlock:["top","bottom"],insetBlockStart:["top"],insetBlockEnd:["bottom"],insetInline:["left","right"],insetInlineStart:["left"],insetInlineEnd:["right"],marginBlock:["marginTop","marginBottom"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],marginInline:["marginLeft","marginRight"],marginInlineStart:["marginLeft"],marginInlineEnd:["marginRight"],paddingBlock:["paddingTop","paddingBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"],paddingInline:["paddingLeft","paddingRight"],paddingInlineStart:["paddingLeft"],paddingInlineEnd:["paddingRight"],borderBlock:Yv(["borderTop","borderBottom"]),borderBlockStart:Yv(["borderTop"]),borderBlockEnd:Yv(["borderBottom"]),borderInline:Yv(["borderLeft","borderRight"]),borderInlineStart:Yv(["borderLeft"]),borderInlineEnd:Yv(["borderRight"]),borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndWidth:["borderBottomWidth"],borderInlineWidth:["borderLeftWidth","borderRightWidth"],borderInlineStartWidth:["borderLeftWidth"],borderInlineEndWidth:["borderRightWidth"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderBlockStartStyle:["borderTopStyle"],borderBlockEndStyle:["borderBottomStyle"],borderInlineStyle:["borderLeftStyle","borderRightStyle"],borderInlineStartStyle:["borderLeftStyle"],borderInlineEndStyle:["borderRightStyle"],borderBlockColor:["borderTopColor","borderBottomColor"],borderBlockStartColor:["borderTopColor"],borderBlockEndColor:["borderBottomColor"],borderInlineColor:["borderLeftColor","borderRightColor"],borderInlineStartColor:["borderLeftColor"],borderInlineEndColor:["borderRightColor"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"]};function iE(t,n){var o=t;return n&&(o="".concat(o," !important")),{_skip_check_:!0,value:o}}var N3e={visit:function(n){var o={};return Object.keys(n).forEach(function(s){var c=n[s],m=oue[s];if(m&&(typeof c=="number"||typeof c=="string")){var v=iue(c),d=nr(v,2),C=d[0],S=d[1];m.length&&m.notSplit?m.forEach(function(R){o[R]=iE(c,S)}):m.length===1?o[m[0]]=iE(c,S):m.length===2?m.forEach(function(R,D){var $;o[R]=iE(($=C[D])!==null&&$!==void 0?$:C[0],S)}):m.length===4?m.forEach(function(R,D){var $,H;o[R]=iE(($=(H=C[D])!==null&&H!==void 0?H:C[D-2])!==null&&$!==void 0?$:C[0],S)}):o[s]=c}else o[s]=c}),o}},LO=E.createContext({});function SH(t){return YU(t)||WU(t)||MO(t)||JU()}function Yu(t,n){for(var o=t,s=0;s<n.length;s+=1){if(o==null)return;o=o[n[s]]}return o}function CH(t,n,o,s){if(!n.length)return o;var c=SH(n),m=c[0],v=c.slice(1),d;return!t&&typeof m=="number"?d=[]:Array.isArray(t)?d=Pr(t):d=yt({},t),s&&o===void 0&&v.length===1?delete d[m][v[0]]:d[m]=CH(d[m],v,o,s),d}function Ah(t,n,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return n.length&&s&&o===void 0&&!Yu(t,n.slice(0,-1))?t:CH(t,n,o,s)}function aue(t){return Ei(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function i8(t){return Array.isArray(t)?[]:{}}var sue=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function T_(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var s=i8(n[0]);return n.forEach(function(c){function m(v,d){var C=new Set(d),S=Yu(c,v),R=Array.isArray(S);if(R||aue(S)){if(!C.has(S)){C.add(S);var D=Yu(s,v);R?s=Ah(s,v,[]):(!D||Ei(D)!=="object")&&(s=Ah(s,v,i8(S))),sue(S).forEach(function($){m([].concat(Pr(v),[$]),C)})}}else s=Ah(s,v,S)}m([])}),s}function lue(){}const cue=E.createContext({}),Ty=()=>{const t=()=>{};return t.deprecated=lue,t},EH=E.createContext(void 0);var TH={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},uue={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const hue={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},IH=hue,due={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},uue),timePickerLocale:Object.assign({},IH)},o8=due,lu="${label} is not a valid ${type}",fue={locale:"en",Pagination:TH,DatePicker:o8,TimePicker:IH,Calendar:o8,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:lu,method:lu,array:lu,object:lu,number:lu,date:lu,boolean:lu,integer:lu,float:lu,regexp:lu,email:lu,url:lu,hex:lu},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},Uf=fue;let qE=Object.assign({},Uf.Modal),WE=[];const a8=()=>WE.reduce((t,n)=>Object.assign(Object.assign({},t),n),Uf.Modal);function pue(t){if(t){const n=Object.assign({},t);return WE.push(n),qE=a8(),()=>{WE=WE.filter(o=>o!==n),qE=a8()}}qE=Object.assign({},Uf.Modal)}function MH(){return qE}const mue=E.createContext(void 0),$O=mue,x0=(t,n)=>{const o=E.useContext($O),s=E.useMemo(()=>{var m;const v=n||Uf[t],d=(m=o?.[t])!==null&&m!==void 0?m:{};return Object.assign(Object.assign({},typeof v=="function"?v():v),d||{})},[t,n,o]),c=E.useMemo(()=>{const m=o?.locale;return o?.exist&&!m?Uf.locale:m},[o]);return[s,c]},gue="internalMark",yue=t=>{const{locale:n={},children:o,_ANT_MARK__:s}=t;E.useEffect(()=>pue(n&&n.Modal),[n]);const c=E.useMemo(()=>Object.assign(Object.assign({},n),{exist:!0}),[n]);return E.createElement($O.Provider,{value:c},o)},vue=yue;function El(t,n){_ue(t)&&(t="100%");var o=xue(t);return t=n===360?t:Math.min(n,Math.max(0,parseFloat(t))),o&&(t=parseInt(String(t*n),10)/100),Math.abs(t-n)<1e-6?1:(n===360?t=(t<0?t%n+n:t%n)/parseFloat(String(n)):t=t%n/parseFloat(String(n)),t)}function oE(t){return Math.min(1,Math.max(0,t))}function _ue(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function xue(t){return typeof t=="string"&&t.indexOf("%")!==-1}function PH(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function aE(t){return t<=1?"".concat(Number(t)*100,"%"):t}function zh(t){return t.length===1?"0"+t:String(t)}function bue(t,n,o){return{r:El(t,255)*255,g:El(n,255)*255,b:El(o,255)*255}}function s8(t,n,o){t=El(t,255),n=El(n,255),o=El(o,255);var s=Math.max(t,n,o),c=Math.min(t,n,o),m=0,v=0,d=(s+c)/2;if(s===c)v=0,m=0;else{var C=s-c;switch(v=d>.5?C/(2-s-c):C/(s+c),s){case t:m=(n-o)/C+(n<o?6:0);break;case n:m=(o-t)/C+2;break;case o:m=(t-n)/C+4;break}m/=6}return{h:m,s:v,l:d}}function PP(t,n,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+(n-t)*(6*o):o<1/2?n:o<2/3?t+(n-t)*(2/3-o)*6:t}function wue(t,n,o){var s,c,m;if(t=El(t,360),n=El(n,100),o=El(o,100),n===0)c=o,m=o,s=o;else{var v=o<.5?o*(1+n):o+n-o*n,d=2*o-v;s=PP(d,v,t+1/3),c=PP(d,v,t),m=PP(d,v,t-1/3)}return{r:s*255,g:c*255,b:m*255}}function nR(t,n,o){t=El(t,255),n=El(n,255),o=El(o,255);var s=Math.max(t,n,o),c=Math.min(t,n,o),m=0,v=s,d=s-c,C=s===0?0:d/s;if(s===c)m=0;else{switch(s){case t:m=(n-o)/d+(n<o?6:0);break;case n:m=(o-t)/d+2;break;case o:m=(t-n)/d+4;break}m/=6}return{h:m,s:C,v}}function Sue(t,n,o){t=El(t,360)*6,n=El(n,100),o=El(o,100);var s=Math.floor(t),c=t-s,m=o*(1-n),v=o*(1-c*n),d=o*(1-(1-c)*n),C=s%6,S=[o,v,m,m,d,o][C],R=[d,o,o,v,m,m][C],D=[m,m,d,o,o,v][C];return{r:S*255,g:R*255,b:D*255}}function iR(t,n,o,s){var c=[zh(Math.round(t).toString(16)),zh(Math.round(n).toString(16)),zh(Math.round(o).toString(16))];return s&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function Cue(t,n,o,s,c){var m=[zh(Math.round(t).toString(16)),zh(Math.round(n).toString(16)),zh(Math.round(o).toString(16)),zh(AH(s))];return c&&m[0].startsWith(m[0].charAt(1))&&m[1].startsWith(m[1].charAt(1))&&m[2].startsWith(m[2].charAt(1))&&m[3].startsWith(m[3].charAt(1))?m[0].charAt(0)+m[1].charAt(0)+m[2].charAt(0)+m[3].charAt(0):m.join("")}function j3e(t,n,o,s){var c=[zh(AH(s)),zh(Math.round(t).toString(16)),zh(Math.round(n).toString(16)),zh(Math.round(o).toString(16))];return c.join("")}function AH(t){return Math.round(parseFloat(t)*255).toString(16)}function l8(t){return hu(t)/255}function hu(t){return parseInt(t,16)}function Eue(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var oR={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function d_(t){var n={r:0,g:0,b:0},o=1,s=null,c=null,m=null,v=!1,d=!1;return typeof t=="string"&&(t=Mue(t)),typeof t=="object"&&(Tf(t.r)&&Tf(t.g)&&Tf(t.b)?(n=bue(t.r,t.g,t.b),v=!0,d=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Tf(t.h)&&Tf(t.s)&&Tf(t.v)?(s=aE(t.s),c=aE(t.v),n=Sue(t.h,s,c),v=!0,d="hsv"):Tf(t.h)&&Tf(t.s)&&Tf(t.l)&&(s=aE(t.s),m=aE(t.l),n=wue(t.h,s,m),v=!0,d="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(o=t.a)),o=PH(o),{ok:v,format:t.format||d,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:o}}var Tue="[-\\+]?\\d+%?",Iue="[-\\+]?\\d*\\.\\d+%?",xm="(?:".concat(Iue,")|(?:").concat(Tue,")"),AP="[\\s|\\(]+(".concat(xm,")[,|\\s]+(").concat(xm,")[,|\\s]+(").concat(xm,")\\s*\\)?"),RP="[\\s|\\(]+(".concat(xm,")[,|\\s]+(").concat(xm,")[,|\\s]+(").concat(xm,")[,|\\s]+(").concat(xm,")\\s*\\)?"),Th={CSS_UNIT:new RegExp(xm),rgb:new RegExp("rgb"+AP),rgba:new RegExp("rgba"+RP),hsl:new RegExp("hsl"+AP),hsla:new RegExp("hsla"+RP),hsv:new RegExp("hsv"+AP),hsva:new RegExp("hsva"+RP),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Mue(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var n=!1;if(oR[t])t=oR[t],n=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var o=Th.rgb.exec(t);return o?{r:o[1],g:o[2],b:o[3]}:(o=Th.rgba.exec(t),o?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=Th.hsl.exec(t),o?{h:o[1],s:o[2],l:o[3]}:(o=Th.hsla.exec(t),o?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=Th.hsv.exec(t),o?{h:o[1],s:o[2],v:o[3]}:(o=Th.hsva.exec(t),o?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=Th.hex8.exec(t),o?{r:hu(o[1]),g:hu(o[2]),b:hu(o[3]),a:l8(o[4]),format:n?"name":"hex8"}:(o=Th.hex6.exec(t),o?{r:hu(o[1]),g:hu(o[2]),b:hu(o[3]),format:n?"name":"hex"}:(o=Th.hex4.exec(t),o?{r:hu(o[1]+o[1]),g:hu(o[2]+o[2]),b:hu(o[3]+o[3]),a:l8(o[4]+o[4]),format:n?"name":"hex8"}:(o=Th.hex3.exec(t),o?{r:hu(o[1]+o[1]),g:hu(o[2]+o[2]),b:hu(o[3]+o[3]),format:n?"name":"hex"}:!1)))))))))}function Tf(t){return!!Th.CSS_UNIT.exec(String(t))}var xa=function(){function t(n,o){n===void 0&&(n=""),o===void 0&&(o={});var s;if(n instanceof t)return n;typeof n=="number"&&(n=Eue(n)),this.originalInput=n;var c=d_(n);this.originalInput=n,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=o.format)!==null&&s!==void 0?s:c.format,this.gradientType=o.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},t.prototype.getLuminance=function(){var n=this.toRgb(),o,s,c,m=n.r/255,v=n.g/255,d=n.b/255;return m<=.03928?o=m/12.92:o=Math.pow((m+.055)/1.055,2.4),v<=.03928?s=v/12.92:s=Math.pow((v+.055)/1.055,2.4),d<=.03928?c=d/12.92:c=Math.pow((d+.055)/1.055,2.4),.2126*o+.7152*s+.0722*c},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(n){return this.a=PH(n),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var n=this.toHsl().s;return n===0},t.prototype.toHsv=function(){var n=nR(this.r,this.g,this.b);return{h:n.h*360,s:n.s,v:n.v,a:this.a}},t.prototype.toHsvString=function(){var n=nR(this.r,this.g,this.b),o=Math.round(n.h*360),s=Math.round(n.s*100),c=Math.round(n.v*100);return this.a===1?"hsv(".concat(o,", ").concat(s,"%, ").concat(c,"%)"):"hsva(".concat(o,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var n=s8(this.r,this.g,this.b);return{h:n.h*360,s:n.s,l:n.l,a:this.a}},t.prototype.toHslString=function(){var n=s8(this.r,this.g,this.b),o=Math.round(n.h*360),s=Math.round(n.s*100),c=Math.round(n.l*100);return this.a===1?"hsl(".concat(o,", ").concat(s,"%, ").concat(c,"%)"):"hsla(".concat(o,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(n){return n===void 0&&(n=!1),iR(this.r,this.g,this.b,n)},t.prototype.toHexString=function(n){return n===void 0&&(n=!1),"#"+this.toHex(n)},t.prototype.toHex8=function(n){return n===void 0&&(n=!1),Cue(this.r,this.g,this.b,this.a,n)},t.prototype.toHex8String=function(n){return n===void 0&&(n=!1),"#"+this.toHex8(n)},t.prototype.toHexShortString=function(n){return n===void 0&&(n=!1),this.a===1?this.toHexString(n):this.toHex8String(n)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var n=Math.round(this.r),o=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb(".concat(n,", ").concat(o,", ").concat(s,")"):"rgba(".concat(n,", ").concat(o,", ").concat(s,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var n=function(o){return"".concat(Math.round(El(o,255)*100),"%")};return{r:n(this.r),g:n(this.g),b:n(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var n=function(o){return Math.round(El(o,255)*100)};return this.a===1?"rgb(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%)"):"rgba(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var n="#"+iR(this.r,this.g,this.b,!1),o=0,s=Object.entries(oR);o<s.length;o++){var c=s[o],m=c[0],v=c[1];if(n===v)return m}return!1},t.prototype.toString=function(n){var o=!!n;n=n??this.format;var s=!1,c=this.a<1&&this.a>=0,m=!o&&c&&(n.startsWith("hex")||n==="name");return m?n==="name"&&this.a===0?this.toName():this.toRgbString():(n==="rgb"&&(s=this.toRgbString()),n==="prgb"&&(s=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(s=this.toHexString()),n==="hex3"&&(s=this.toHexString(!0)),n==="hex4"&&(s=this.toHex8String(!0)),n==="hex8"&&(s=this.toHex8String()),n==="name"&&(s=this.toName()),n==="hsl"&&(s=this.toHslString()),n==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(n){n===void 0&&(n=10);var o=this.toHsl();return o.l+=n/100,o.l=oE(o.l),new t(o)},t.prototype.brighten=function(n){n===void 0&&(n=10);var o=this.toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(255*-(n/100)))),o.g=Math.max(0,Math.min(255,o.g-Math.round(255*-(n/100)))),o.b=Math.max(0,Math.min(255,o.b-Math.round(255*-(n/100)))),new t(o)},t.prototype.darken=function(n){n===void 0&&(n=10);var o=this.toHsl();return o.l-=n/100,o.l=oE(o.l),new t(o)},t.prototype.tint=function(n){return n===void 0&&(n=10),this.mix("white",n)},t.prototype.shade=function(n){return n===void 0&&(n=10),this.mix("black",n)},t.prototype.desaturate=function(n){n===void 0&&(n=10);var o=this.toHsl();return o.s-=n/100,o.s=oE(o.s),new t(o)},t.prototype.saturate=function(n){n===void 0&&(n=10);var o=this.toHsl();return o.s+=n/100,o.s=oE(o.s),new t(o)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(n){var o=this.toHsl(),s=(o.h+n)%360;return o.h=s<0?360+s:s,new t(o)},t.prototype.mix=function(n,o){o===void 0&&(o=50);var s=this.toRgb(),c=new t(n).toRgb(),m=o/100,v={r:(c.r-s.r)*m+s.r,g:(c.g-s.g)*m+s.g,b:(c.b-s.b)*m+s.b,a:(c.a-s.a)*m+s.a};return new t(v)},t.prototype.analogous=function(n,o){n===void 0&&(n=6),o===void 0&&(o=30);var s=this.toHsl(),c=360/o,m=[this];for(s.h=(s.h-(c*n>>1)+720)%360;--n;)s.h=(s.h+c)%360,m.push(new t(s));return m},t.prototype.complement=function(){var n=this.toHsl();return n.h=(n.h+180)%360,new t(n)},t.prototype.monochromatic=function(n){n===void 0&&(n=6);for(var o=this.toHsv(),s=o.h,c=o.s,m=o.v,v=[],d=1/n;n--;)v.push(new t({h:s,s:c,v:m})),m=(m+d)%1;return v},t.prototype.splitcomplement=function(){var n=this.toHsl(),o=n.h;return[this,new t({h:(o+72)%360,s:n.s,l:n.l}),new t({h:(o+216)%360,s:n.s,l:n.l})]},t.prototype.onBackground=function(n){var o=this.toRgb(),s=new t(n).toRgb(),c=o.a+s.a*(1-o.a);return new t({r:(o.r*o.a+s.r*s.a*(1-o.a))/c,g:(o.g*o.a+s.g*s.a*(1-o.a))/c,b:(o.b*o.a+s.b*s.a*(1-o.a))/c,a:c})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(n){for(var o=this.toHsl(),s=o.h,c=[this],m=360/n,v=1;v<n;v++)c.push(new t({h:(s+v*m)%360,s:o.s,l:o.l}));return c},t.prototype.equals=function(n){return this.toRgbString()===new t(n).toRgbString()},t}();function V3e(t,n){return t===void 0&&(t=""),n===void 0&&(n={}),new xa(t,n)}var sE=2,c8=.16,Pue=.05,Aue=.05,Rue=.15,RH=5,kH=4,kue=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function u8(t){var n=t.r,o=t.g,s=t.b,c=nR(n,o,s);return{h:c.h*360,s:c.s,v:c.v}}function lE(t){var n=t.r,o=t.g,s=t.b;return"#".concat(iR(n,o,s,!1))}function Oue(t,n,o){var s=o/100,c={r:(n.r-t.r)*s+t.r,g:(n.g-t.g)*s+t.g,b:(n.b-t.b)*s+t.b};return c}function h8(t,n,o){var s;return Math.round(t.h)>=60&&Math.round(t.h)<=240?s=o?Math.round(t.h)-sE*n:Math.round(t.h)+sE*n:s=o?Math.round(t.h)+sE*n:Math.round(t.h)-sE*n,s<0?s+=360:s>=360&&(s-=360),s}function d8(t,n,o){if(t.h===0&&t.s===0)return t.s;var s;return o?s=t.s-c8*n:n===kH?s=t.s+c8:s=t.s+Pue*n,s>1&&(s=1),o&&n===RH&&s>.1&&(s=.1),s<.06&&(s=.06),Number(s.toFixed(2))}function f8(t,n,o){var s;return o?s=t.v+Aue*n:s=t.v-Rue*n,s>1&&(s=1),Number(s.toFixed(2))}function Dm(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],s=d_(t),c=RH;c>0;c-=1){var m=u8(s),v=lE(d_({h:h8(m,c,!0),s:d8(m,c,!0),v:f8(m,c,!0)}));o.push(v)}o.push(lE(s));for(var d=1;d<=kH;d+=1){var C=u8(s),S=lE(d_({h:h8(C,d),s:d8(C,d),v:f8(C,d)}));o.push(S)}return n.theme==="dark"?kue.map(function(R){var D=R.index,$=R.opacity,H=lE(Oue(d_(n.backgroundColor||"#141414"),d_(o[D]),$*100));return H}):o}var KE={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},cl={},ZE={};Object.keys(KE).forEach(function(t){cl[t]=Dm(KE[t]),cl[t].primary=cl[t][5],ZE[t]=Dm(KE[t],{theme:"dark",backgroundColor:"#141414"}),ZE[t].primary=ZE[t][5]});var zue=cl.red,Due=cl.volcano,Lue=cl.gold,$ue=cl.orange,Bue=cl.yellow,Fue=cl.lime,Nue=cl.green,jue=cl.cyan,OH=cl.blue,Vue=cl.geekblue,Uue=cl.purple,Hue=cl.magenta,Gue=cl.grey,que=cl.grey;const U3e=Object.freeze(Object.defineProperty({__proto__:null,blue:OH,cyan:jue,geekblue:Vue,generate:Dm,gold:Lue,gray:que,green:Nue,grey:Gue,lime:Fue,magenta:Hue,orange:$ue,presetDarkPalettes:ZE,presetPalettes:cl,presetPrimaryColors:KE,purple:Uue,red:zue,volcano:Due,yellow:Bue},Symbol.toStringTag,{value:"Module"})),Wue=t=>{const{controlHeight:n}=t;return{controlHeightSM:n*.75,controlHeightXS:n*.5,controlHeightLG:n*1.25}};function Kue(t){const{sizeUnit:n,sizeStep:o}=t;return{sizeXXL:n*(o+8),sizeXL:n*(o+4),sizeLG:n*(o+2),sizeMD:n*(o+1),sizeMS:n*o,size:n*o,sizeSM:n*(o-1),sizeXS:n*(o-2),sizeXXS:n*(o-3)}}const zH={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Zue=Object.assign(Object.assign({},zH),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Nb=Zue;function Xue(t,n){let{generateColorPalettes:o,generateNeutralColorPalettes:s}=n;const{colorSuccess:c,colorWarning:m,colorError:v,colorInfo:d,colorPrimary:C,colorBgBase:S,colorTextBase:R}=t,D=o(C),$=o(c),H=o(m),Z=o(v),X=o(d),Q=s(S,R),G=t.colorLink||t.colorInfo,K=o(G);return Object.assign(Object.assign({},Q),{colorPrimaryBg:D[1],colorPrimaryBgHover:D[2],colorPrimaryBorder:D[3],colorPrimaryBorderHover:D[4],colorPrimaryHover:D[5],colorPrimary:D[6],colorPrimaryActive:D[7],colorPrimaryTextHover:D[8],colorPrimaryText:D[9],colorPrimaryTextActive:D[10],colorSuccessBg:$[1],colorSuccessBgHover:$[2],colorSuccessBorder:$[3],colorSuccessBorderHover:$[4],colorSuccessHover:$[4],colorSuccess:$[6],colorSuccessActive:$[7],colorSuccessTextHover:$[8],colorSuccessText:$[9],colorSuccessTextActive:$[10],colorErrorBg:Z[1],colorErrorBgHover:Z[2],colorErrorBorder:Z[3],colorErrorBorderHover:Z[4],colorErrorHover:Z[5],colorError:Z[6],colorErrorActive:Z[7],colorErrorTextHover:Z[8],colorErrorText:Z[9],colorErrorTextActive:Z[10],colorWarningBg:H[1],colorWarningBgHover:H[2],colorWarningBorder:H[3],colorWarningBorderHover:H[4],colorWarningHover:H[4],colorWarning:H[6],colorWarningActive:H[7],colorWarningTextHover:H[8],colorWarningText:H[9],colorWarningTextActive:H[10],colorInfoBg:X[1],colorInfoBgHover:X[2],colorInfoBorder:X[3],colorInfoBorderHover:X[4],colorInfoHover:X[4],colorInfo:X[6],colorInfoActive:X[7],colorInfoTextHover:X[8],colorInfoText:X[9],colorInfoTextActive:X[10],colorLinkHover:K[4],colorLink:K[6],colorLinkActive:K[7],colorBgMask:new xa("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const Yue=t=>{let n=t,o=t,s=t,c=t;return t<6&&t>=5?n=t+1:t<16&&t>=6?n=t+2:t>=16&&(n=16),t<7&&t>=5?o=4:t<8&&t>=7?o=5:t<14&&t>=8?o=6:t<16&&t>=14?o=7:t>=16&&(o=8),t<6&&t>=2?s=1:t>=6&&(s=2),t>4&&t<8?c=4:t>=8&&(c=6),{borderRadius:t,borderRadiusXS:s,borderRadiusSM:o,borderRadiusLG:n,borderRadiusOuter:c}};function Jue(t){const{motionUnit:n,motionBase:o,borderRadius:s,lineWidth:c}=t;return Object.assign({motionDurationFast:`${(o+n).toFixed(1)}s`,motionDurationMid:`${(o+n*2).toFixed(1)}s`,motionDurationSlow:`${(o+n*3).toFixed(1)}s`,lineWidthBold:c+1},Yue(s))}const If=(t,n)=>new xa(t).setAlpha(n).toRgbString(),Lx=(t,n)=>new xa(t).darken(n).toHexString(),Que=t=>{const n=Dm(t);return{1:n[0],2:n[1],3:n[2],4:n[3],5:n[4],6:n[5],7:n[6],8:n[4],9:n[5],10:n[6]}},ehe=(t,n)=>{const o=t||"#fff",s=n||"#000";return{colorBgBase:o,colorTextBase:s,colorText:If(s,.88),colorTextSecondary:If(s,.65),colorTextTertiary:If(s,.45),colorTextQuaternary:If(s,.25),colorFill:If(s,.15),colorFillSecondary:If(s,.06),colorFillTertiary:If(s,.04),colorFillQuaternary:If(s,.02),colorBgLayout:Lx(o,4),colorBgContainer:Lx(o,0),colorBgElevated:Lx(o,0),colorBgSpotlight:If(s,.85),colorBgBlur:"transparent",colorBorder:Lx(o,15),colorBorderSecondary:Lx(o,6)}};function the(t){const n=new Array(10).fill(null).map((o,s)=>{const c=s-1,m=t*Math.pow(2.71828,c/5),v=s>1?Math.floor(m):Math.ceil(m);return Math.floor(v/2)*2});return n[1]=t,n.map(o=>{const s=o+8;return{size:o,lineHeight:s/o}})}const rhe=t=>{const n=the(t),o=n.map(R=>R.size),s=n.map(R=>R.lineHeight),c=o[1],m=o[0],v=o[2],d=s[1],C=s[0],S=s[2];return{fontSizeSM:m,fontSize:c,fontSizeLG:v,fontSizeXL:o[3],fontSizeHeading1:o[6],fontSizeHeading2:o[5],fontSizeHeading3:o[4],fontSizeHeading4:o[3],fontSizeHeading5:o[2],lineHeight:d,lineHeightLG:S,lineHeightSM:C,fontHeight:Math.round(d*c),fontHeightLG:Math.round(S*v),fontHeightSM:Math.round(C*m),lineHeightHeading1:s[6],lineHeightHeading2:s[5],lineHeightHeading3:s[4],lineHeightHeading4:s[3],lineHeightHeading5:s[2]}};function nhe(t){const n=Object.keys(zH).map(o=>{const s=Dm(t[o]);return new Array(10).fill(1).reduce((c,m,v)=>(c[`${o}-${v+1}`]=s[v],c[`${o}${v+1}`]=s[v],c),{})}).reduce((o,s)=>(o=Object.assign(Object.assign({},o),s),o),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),n),Xue(t,{generateColorPalettes:Que,generateNeutralColorPalettes:ehe})),rhe(t.fontSize)),Kue(t)),Wue(t)),Jue(t))}const DH=X5(nhe),LH={token:Nb,override:{override:Nb},hashed:!0},$H=rr.createContext(LH),BO="anticon",ihe=(t,n)=>n||(t?`ant-${t}`:"ant"),hi=E.createContext({getPrefixCls:ihe,iconPrefixCls:BO}),ohe=`-ant-${Date.now()}-${Math.random()}`;function ahe(t,n){const o={},s=(v,d)=>{let C=v.clone();return C=d?.(C)||C,C.toRgbString()},c=(v,d)=>{const C=new xa(v),S=Dm(C.toRgbString());o[`${d}-color`]=s(C),o[`${d}-color-disabled`]=S[1],o[`${d}-color-hover`]=S[4],o[`${d}-color-active`]=S[6],o[`${d}-color-outline`]=C.clone().setAlpha(.2).toRgbString(),o[`${d}-color-deprecated-bg`]=S[0],o[`${d}-color-deprecated-border`]=S[2]};if(n.primaryColor){c(n.primaryColor,"primary");const v=new xa(n.primaryColor),d=Dm(v.toRgbString());d.forEach((S,R)=>{o[`primary-${R+1}`]=S}),o["primary-color-deprecated-l-35"]=s(v,S=>S.lighten(35)),o["primary-color-deprecated-l-20"]=s(v,S=>S.lighten(20)),o["primary-color-deprecated-t-20"]=s(v,S=>S.tint(20)),o["primary-color-deprecated-t-50"]=s(v,S=>S.tint(50)),o["primary-color-deprecated-f-12"]=s(v,S=>S.setAlpha(S.getAlpha()*.12));const C=new xa(d[0]);o["primary-color-active-deprecated-f-30"]=s(C,S=>S.setAlpha(S.getAlpha()*.3)),o["primary-color-active-deprecated-d-02"]=s(C,S=>S.darken(2))}return n.successColor&&c(n.successColor,"success"),n.warningColor&&c(n.warningColor,"warning"),n.errorColor&&c(n.errorColor,"error"),n.infoColor&&c(n.infoColor,"info"),`
  :root {
    ${Object.keys(o).map(v=>`--${t}-${v}: ${o[v]};`).join(`
`)}
  }
  `.trim()}function she(t,n){const o=ahe(t,n);hl()&&zm(o,`${ohe}-dynamic-theme`)}const aR=E.createContext(!1),FO=t=>{let{children:n,disabled:o}=t;const s=E.useContext(aR);return E.createElement(aR.Provider,{value:o??s},n)},Gm=aR,sR=E.createContext(void 0),lhe=t=>{let{children:n,size:o}=t;const s=E.useContext(sR);return E.createElement(sR.Provider,{value:o||s},n)},lw=sR;function che(){const t=E.useContext(Gm),n=E.useContext(lw);return{componentDisabled:t,componentSize:n}}const jb=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],uhe="5.12.8";function kP(t){return t>=0&&t<=255}function cE(t,n){const{r:o,g:s,b:c,a:m}=new xa(t).toRgb();if(m<1)return t;const{r:v,g:d,b:C}=new xa(n).toRgb();for(let S=.01;S<=1;S+=.01){const R=Math.round((o-v*(1-S))/S),D=Math.round((s-d*(1-S))/S),$=Math.round((c-C*(1-S))/S);if(kP(R)&&kP(D)&&kP($))return new xa({r:R,g:D,b:$,a:Math.round(S*100)/100}).toRgbString()}return new xa({r:o,g:s,b:c,a:1}).toRgbString()}var hhe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function BH(t){const{override:n}=t,o=hhe(t,["override"]),s=Object.assign({},n);Object.keys(Nb).forEach($=>{delete s[$]});const c=Object.assign(Object.assign({},o),s),m=480,v=576,d=768,C=992,S=1200,R=1600;if(c.motion===!1){const $="0s";c.motionDurationFast=$,c.motionDurationMid=$,c.motionDurationSlow=$}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:cE(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:cE(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:cE(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:cE(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:m,screenXSMin:m,screenXSMax:v-1,screenSM:v,screenSMMin:v,screenSMMax:d-1,screenMD:d,screenMDMin:d,screenMDMax:C-1,screenLG:C,screenLGMin:C,screenLGMax:S-1,screenXL:S,screenXLMin:S,screenXLMax:R-1,screenXXL:R,screenXXLMin:R,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new xa("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new xa("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new xa("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),s)}var p8=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const FH={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},NH={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},dhe={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},jH=(t,n,o)=>{const s=o.getDerivativeToken(t),{override:c}=n,m=p8(n,["override"]);let v=Object.assign(Object.assign({},s),{override:c});return v=BH(v),m&&Object.entries(m).forEach(d=>{let[C,S]=d;const{theme:R}=S,D=p8(S,["theme"]);let $=D;R&&($=jH(Object.assign(Object.assign({},v),D),{override:D},R)),v[C]=$}),v};function Ws(){const{token:t,hashed:n,theme:o,override:s,cssVar:c}=rr.useContext($H),m=`${uhe}-${n||""}`,v=o||DH,[d,C,S]=Ece(v,[Nb,t],{salt:m,override:s,getComputedToken:jH,formatToken:BH,cssVar:c&&{prefix:c.prefix,key:c.key,unitless:FH,ignore:NH,preserve:dhe}});return[v,S,n?C:"",d,c]}function ws(t){var n=E.useRef();n.current=t;var o=E.useCallback(function(){for(var s,c=arguments.length,m=new Array(c),v=0;v<c;v++)m[v]=arguments[v];return(s=n.current)===null||s===void 0?void 0:s.call.apply(s,[n].concat(m))},[]);return o}function Am(t){var n=E.useRef(!1),o=E.useState(t),s=nr(o,2),c=s[0],m=s[1];E.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]);function v(d,C){C&&n.current||m(d)}return[c,v]}function OP(t){return t!==void 0}function ul(t,n){var o=n||{},s=o.defaultValue,c=o.value,m=o.onChange,v=o.postState,d=Am(function(){return OP(c)?c:OP(s)?typeof s=="function"?s():s:typeof t=="function"?t():t}),C=nr(d,2),S=C[0],R=C[1],D=c!==void 0?c:S,$=v?v(D):D,H=ws(m),Z=Am([D]),X=nr(Z,2),Q=X[0],G=X[1];QF(function(){var Y=Q[0];S!==Y&&H(S,Y)},[Q]),QF(function(){OP(c)||R(c)},[c]);var K=ws(function(Y,re){R(Y,re),G([D],re)});return[$,K]}const fhe=t=>({color:t.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"&:focus, &:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive}}),Vb={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Oa=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:n?"inherit":t.fontFamily}},KI=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),Ub=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),phe=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active,\n  &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),mhe=(t,n)=>{const{fontFamily:o,fontSize:s}=t,c=`[class^="${n}"], [class*=" ${n}"]`;return{[c]:{fontFamily:o,fontSize:s,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[c]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},Lm=t=>({outline:`${Xt(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),Hb=t=>({"&:focus-visible":Object.assign({},Lm(t))});let ghe=Ml(function t(){Il(this,t)});const VH=ghe;let yhe=function(t){Wf(o,t);var n=Kf(o);function o(s){var c;return Il(this,o),c=n.call(this),c.result=0,s instanceof o?c.result=s.result:typeof s=="number"&&(c.result=s),c}return Ml(o,[{key:"add",value:function(c){return c instanceof o?this.result+=c.result:typeof c=="number"&&(this.result+=c),this}},{key:"sub",value:function(c){return c instanceof o?this.result-=c.result:typeof c=="number"&&(this.result-=c),this}},{key:"mul",value:function(c){return c instanceof o?this.result*=c.result:typeof c=="number"&&(this.result*=c),this}},{key:"div",value:function(c){return c instanceof o?this.result/=c.result:typeof c=="number"&&(this.result/=c),this}},{key:"equal",value:function(){return this.result}}]),o}(VH);const UH="CALC_UNIT";function zP(t){return typeof t=="number"?`${t}${UH}`:t}let vhe=function(t){Wf(o,t);var n=Kf(o);function o(s){var c;return Il(this,o),c=n.call(this),c.result="",s instanceof o?c.result=`(${s.result})`:typeof s=="number"?c.result=zP(s):typeof s=="string"&&(c.result=s),c}return Ml(o,[{key:"add",value:function(c){return c instanceof o?this.result=`${this.result} + ${c.getResult()}`:(typeof c=="number"||typeof c=="string")&&(this.result=`${this.result} + ${zP(c)}`),this.lowPriority=!0,this}},{key:"sub",value:function(c){return c instanceof o?this.result=`${this.result} - ${c.getResult()}`:(typeof c=="number"||typeof c=="string")&&(this.result=`${this.result} - ${zP(c)}`),this.lowPriority=!0,this}},{key:"mul",value:function(c){return this.lowPriority&&(this.result=`(${this.result})`),c instanceof o?this.result=`${this.result} * ${c.getResult(!0)}`:(typeof c=="number"||typeof c=="string")&&(this.result=`${this.result} * ${c}`),this.lowPriority=!1,this}},{key:"div",value:function(c){return this.lowPriority&&(this.result=`(${this.result})`),c instanceof o?this.result=`${this.result} / ${c.getResult(!0)}`:(typeof c=="number"||typeof c=="string")&&(this.result=`${this.result} / ${c}`),this.lowPriority=!1,this}},{key:"getResult",value:function(c){return this.lowPriority||c?`(${this.result})`:this.result}},{key:"equal",value:function(c){const{unit:m=!0}=c||{},v=new RegExp(`${UH}`,"g");return this.result=this.result.replace(v,m?"px":""),typeof this.lowPriority<"u"?`calc(${this.result})`:this.result}}]),o}(VH);const _he=t=>{const n=t==="css"?vhe:yhe;return o=>new n(o)};function xhe(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return`max(${o.map(c=>Xt(c)).join(",")})`},min:function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return`min(${o.map(c=>Xt(c)).join(",")})`}}}const HH=typeof CSSINJS_STATISTIC<"u";let lR=!0;function Yi(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!HH)return Object.assign.apply(Object,[{}].concat(n));lR=!1;const s={};return n.forEach(c=>{Object.keys(c).forEach(v=>{Object.defineProperty(s,v,{configurable:!0,enumerable:!0,get:()=>c[v]})})}),lR=!0,s}const m8={};function bhe(){}const whe=t=>{let n,o=t,s=bhe;return HH&&typeof Proxy<"u"&&(n=new Set,o=new Proxy(t,{get(c,m){return lR&&n.add(m),c[m]}}),s=(c,m)=>{var v;m8[c]={global:Array.from(n),component:Object.assign(Object.assign({},(v=m8[c])===null||v===void 0?void 0:v.component),m)}}),{token:o,keys:n,flush:s}},GH=(t,n)=>{const[o,s]=Ws();return rR({theme:o,token:s,hashId:"",path:["ant-design-icons",t],nonce:()=>n?.nonce},()=>[{[`.${t}`]:Object.assign(Object.assign({},KI()),{[`.${t} .${t}-icon`]:{display:"block"}})}])},qH=(t,n,o)=>{var s;return typeof o=="function"?o(Yi(n,(s=n[t])!==null&&s!==void 0?s:{})):o??{}},WH=(t,n,o,s)=>{const c=Object.assign({},n[t]);if(s?.deprecatedTokens){const{deprecatedTokens:v}=s;v.forEach(d=>{let[C,S]=d;var R;(c?.[C]||c?.[S])&&((R=c[S])!==null&&R!==void 0||(c[S]=c?.[C]))})}let m=Object.assign(Object.assign({},o),c);return s?.format&&(m=s.format(m)),Object.keys(m).forEach(v=>{m[v]===n[v]&&delete m[v]}),m},She=(t,n)=>`${[n,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function NO(t,n,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=Array.isArray(t)?t:[t,t],[m]=c,v=c.join("-");return d=>{const[C,S,R,D,$]=Ws(),{getPrefixCls:H,iconPrefixCls:Z,csp:X}=E.useContext(hi),Q=H(),G=$?"css":"js",K=_he(G),{max:Y,min:re}=xhe(G),fe={theme:C,token:D,hashId:R,nonce:()=>X?.nonce,clientOnly:s.clientOnly,order:s.order||-999};return rR(Object.assign(Object.assign({},fe),{clientOnly:!1,path:["Shared",Q]}),()=>[{"&":phe(D)}]),GH(Z,X),[rR(Object.assign(Object.assign({},fe),{path:[v,d,Z]}),()=>{if(s.injectStyle===!1)return[];const{token:pe,flush:xe}=whe(D),Se=qH(m,S,o),oe=`.${d}`,Re=WH(m,S,Se,{deprecatedTokens:s.deprecatedTokens,format:s.format});$&&Object.keys(Se).forEach(_e=>{Se[_e]=`var(${oH(_e,She(m,$.prefix))})`});const Ve=Yi(pe,{componentCls:oe,prefixCls:d,iconCls:`.${Z}`,antCls:`.${Q}`,calc:K,max:Y,min:re},$?Se:Re),Oe=n(Ve,{hashId:R,prefixCls:d,rootPrefixCls:Q,iconPrefixCls:Z});return xe(m,Re),[s.resetStyle===!1?null:mhe(Ve,d),Oe]}),R]}}const b0=(t,n,o,s)=>{const c=NO(t,n,o,Object.assign({resetStyle:!1,order:-998},s));return v=>{let{prefixCls:d}=v;return c(d),null}},Che=(t,n,o)=>{function s(S){return`${t}${S.slice(0,1).toUpperCase()}${S.slice(1)}`}const{unitless:c={},injectStyle:m=!0}=o??{},v={[s("zIndexPopup")]:!0};Object.keys(c).forEach(S=>{v[s(S)]=c[S]});const d=S=>{let{rootCls:R,cssVar:D}=S;const[,$]=Ws();return eue({path:[t],prefix:D.prefix,key:D?.key,unitless:Object.assign(Object.assign({},FH),v),ignore:NH,token:$,scope:R},()=>{const H=qH(t,$,n),Z=WH(t,$,H,{format:o?.format,deprecatedTokens:o?.deprecatedTokens});return Object.keys(H).forEach(X=>{Z[s(X)]=Z[X],delete Z[X]}),Z}),null};return S=>{const[,,,,R]=Ws();return[D=>m&&R?rr.createElement(rr.Fragment,null,rr.createElement(d,{rootCls:S,cssVar:R,component:t}),D):D,R?.key]}},os=(t,n,o,s)=>{const c=NO(t,n,o,s),m=Che(Array.isArray(t)?t[0]:t,o,s);return function(v){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;const[,C]=c(v),[S,R]=m(d);return[S,C,R]}};function KH(t,n){return jb.reduce((o,s)=>{const c=t[`${s}1`],m=t[`${s}3`],v=t[`${s}6`],d=t[`${s}7`];return Object.assign(Object.assign({},o),n(s,{lightColor:c,lightBorderColor:m,darkColor:v,textColor:d}))},{})}const Ehe=Object.assign({},f0),{useId:g8}=Ehe,The=()=>"",Ihe=typeof g8>"u"?The:g8;function Mhe(t,n){Ty();const o=t||{},s=o.inherit===!1||!n?LH:n,c=Ihe();return Hm(()=>{var m,v;if(!t)return n;const d=Object.assign({},s.components);Object.keys(t.components||{}).forEach(R=>{d[R]=Object.assign(Object.assign({},d[R]),t.components[R])});const C=`css-var-${c.replace(/:/g,"")}`,S=((m=o.cssVar)!==null&&m!==void 0?m:s.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:"ant"},typeof s.cssVar=="object"?s.cssVar:{}),typeof o.cssVar=="object"?o.cssVar:{}),{key:typeof o.cssVar=="object"&&((v=o.cssVar)===null||v===void 0?void 0:v.key)||C});return Object.assign(Object.assign(Object.assign({},s),o),{token:Object.assign(Object.assign({},s.token),o.token),components:d,cssVar:S})},[o,s],(m,v)=>m.some((d,C)=>{const S=v[C];return!Vh(d,S,!0)}))}var Phe=["children"],ZH=E.createContext({});function Ahe(t){var n=t.children,o=xi(t,Phe);return E.createElement(ZH.Provider,{value:o},n)}var Rhe=function(t){Wf(o,t);var n=Kf(o);function o(){return Il(this,o),n.apply(this,arguments)}return Ml(o,[{key:"render",value:function(){return this.props.children}}]),o}(E.Component),Jg="none",uE="appear",hE="enter",dE="leave",y8="none",Rh="prepare",I_="start",M_="active",jO="end",XH="prepared";function v8(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit".concat(t)]="webkit".concat(n),o["Moz".concat(t)]="moz".concat(n),o["ms".concat(t)]="MS".concat(n),o["O".concat(t)]="o".concat(n.toLowerCase()),o}function khe(t,n){var o={animationend:v8("Animation","AnimationEnd"),transitionend:v8("Transition","TransitionEnd")};return t&&("AnimationEvent"in n||delete o.animationend.animation,"TransitionEvent"in n||delete o.transitionend.transition),o}var Ohe=khe(hl(),typeof window<"u"?window:{}),YH={};if(hl()){var zhe=document.createElement("div");YH=zhe.style}var fE={};function JH(t){if(fE[t])return fE[t];var n=Ohe[t];if(n)for(var o=Object.keys(n),s=o.length,c=0;c<s;c+=1){var m=o[c];if(Object.prototype.hasOwnProperty.call(n,m)&&m in YH)return fE[t]=n[m],fE[t]}return""}var QH=JH("animationend"),eG=JH("transitionend"),tG=!!(QH&&eG),_8=QH||"animationend",x8=eG||"transitionend";function b8(t,n){if(!t)return null;if(Ei(t)==="object"){var o=n.replace(/-\w/g,function(s){return s[1].toUpperCase()});return t[o]}return"".concat(t,"-").concat(n)}const Dhe=function(t){var n=E.useRef(),o=E.useRef(t);o.current=t;var s=E.useCallback(function(v){o.current(v)},[]);function c(v){v&&(v.removeEventListener(x8,s),v.removeEventListener(_8,s))}function m(v){n.current&&n.current!==v&&c(n.current),v&&v!==n.current&&(v.addEventListener(x8,s),v.addEventListener(_8,s),n.current=v)}return E.useEffect(function(){return function(){c(n.current)}},[]),[m,c]};var rG=hl()?E.useLayoutEffect:E.useEffect;const Lhe=function(){var t=E.useRef(null);function n(){Do.cancel(t.current)}function o(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;n();var m=Do(function(){c<=1?s({isCanceled:function(){return m!==t.current}}):o(s,c-1)});t.current=m}return E.useEffect(function(){return function(){n()}},[]),[o,n]};var $he=[Rh,I_,M_,jO],Bhe=[Rh,XH],nG=!1,Fhe=!0;function iG(t){return t===M_||t===jO}const Nhe=function(t,n,o){var s=Am(y8),c=nr(s,2),m=c[0],v=c[1],d=Lhe(),C=nr(d,2),S=C[0],R=C[1];function D(){v(Rh,!0)}var $=n?Bhe:$he;return rG(function(){if(m!==y8&&m!==jO){var H=$.indexOf(m),Z=$[H+1],X=o(m);X===nG?v(Z,!0):Z&&S(function(Q){function G(){Q.isCanceled()||v(Z,!0)}X===!0?G():Promise.resolve(X).then(G)})}},[t,m]),E.useEffect(function(){return function(){R()}},[]),[D,m]};function jhe(t,n,o,s){var c=s.motionEnter,m=c===void 0?!0:c,v=s.motionAppear,d=v===void 0?!0:v,C=s.motionLeave,S=C===void 0?!0:C,R=s.motionDeadline,D=s.motionLeaveImmediately,$=s.onAppearPrepare,H=s.onEnterPrepare,Z=s.onLeavePrepare,X=s.onAppearStart,Q=s.onEnterStart,G=s.onLeaveStart,K=s.onAppearActive,Y=s.onEnterActive,re=s.onLeaveActive,fe=s.onAppearEnd,me=s.onEnterEnd,pe=s.onLeaveEnd,xe=s.onVisibleChanged,Se=Am(),oe=nr(Se,2),Re=oe[0],Ve=oe[1],Oe=Am(Jg),_e=nr(Oe,2),Fe=_e[0],Le=_e[1],Me=Am(null),Ce=nr(Me,2),Ye=Ce[0],qe=Ce[1],rt=E.useRef(!1),Qe=E.useRef(null);function St(){return o()}var jt=E.useRef(!1);function Ot(){Le(Jg,!0),qe(null,!0)}function Tt(ze){var ve=St();if(!(ze&&!ze.deadline&&ze.target!==ve)){var pt=jt.current,gt;Fe===uE&&pt?gt=fe?.(ve,ze):Fe===hE&&pt?gt=me?.(ve,ze):Fe===dE&&pt&&(gt=pe?.(ve,ze)),Fe!==Jg&&pt&&gt!==!1&&Ot()}}var ct=Dhe(Tt),Ct=nr(ct,1),kt=Ct[0],zt=function(ve){var pt,gt,$t;switch(ve){case uE:return pt={},xt(pt,Rh,$),xt(pt,I_,X),xt(pt,M_,K),pt;case hE:return gt={},xt(gt,Rh,H),xt(gt,I_,Q),xt(gt,M_,Y),gt;case dE:return $t={},xt($t,Rh,Z),xt($t,I_,G),xt($t,M_,re),$t;default:return{}}},Nt=E.useMemo(function(){return zt(Fe)},[Fe]),Rt=Nhe(Fe,!t,function(ze){if(ze===Rh){var ve=Nt[Rh];return ve?ve(St()):nG}if(Ut in Nt){var pt;qe(((pt=Nt[Ut])===null||pt===void 0?void 0:pt.call(Nt,St(),null))||null)}return Ut===M_&&(kt(St()),R>0&&(clearTimeout(Qe.current),Qe.current=setTimeout(function(){Tt({deadline:!0})},R))),Ut===XH&&Ot(),Fhe}),Pt=nr(Rt,2),Dt=Pt[0],Ut=Pt[1],sr=iG(Ut);jt.current=sr,rG(function(){Ve(n);var ze=rt.current;rt.current=!0;var ve;!ze&&n&&d&&(ve=uE),ze&&n&&m&&(ve=hE),(ze&&!n&&S||!ze&&D&&!n&&S)&&(ve=dE);var pt=zt(ve);ve&&(t||pt[Rh])?(Le(ve),Dt()):Le(Jg)},[n]),E.useEffect(function(){(Fe===uE&&!d||Fe===hE&&!m||Fe===dE&&!S)&&Le(Jg)},[d,m,S]),E.useEffect(function(){return function(){rt.current=!1,clearTimeout(Qe.current)}},[]);var vt=E.useRef(!1);E.useEffect(function(){Re&&(vt.current=!0),Re!==void 0&&Fe===Jg&&((vt.current||Re)&&xe?.(Re),vt.current=!0)},[Re,Fe]);var De=Ye;return Nt[Rh]&&Ut===I_&&(De=yt({transition:"none"},De)),[Fe,Ut,De,Re??n]}function Vhe(t){var n=t;Ei(t)==="object"&&(n=t.transitionSupport);function o(c,m){return!!(c.motionName&&n&&m!==!1)}var s=E.forwardRef(function(c,m){var v=c.visible,d=v===void 0?!0:v,C=c.removeOnLeave,S=C===void 0?!0:C,R=c.forceRender,D=c.children,$=c.motionName,H=c.leavedClassName,Z=c.eventProps,X=E.useContext(ZH),Q=X.motion,G=o(c,Q),K=E.useRef(),Y=E.useRef();function re(){try{return K.current instanceof HTMLElement?K.current:ob(Y.current)}catch{return null}}var fe=jhe(G,d,re,c),me=nr(fe,4),pe=me[0],xe=me[1],Se=me[2],oe=me[3],Re=E.useRef(oe);oe&&(Re.current=!0);var Ve=E.useCallback(function(qe){K.current=qe,Lb(m,qe)},[m]),Oe,_e=yt(yt({},Z),{},{visible:d});if(!D)Oe=null;else if(pe===Jg)oe?Oe=D(yt({},_e),Ve):!S&&Re.current&&H?Oe=D(yt(yt({},_e),{},{className:H}),Ve):R||!S&&!H?Oe=D(yt(yt({},_e),{},{style:{display:"none"}}),Ve):Oe=null;else{var Fe,Le;xe===Rh?Le="prepare":iG(xe)?Le="active":xe===I_&&(Le="start");var Me=b8($,"".concat(pe,"-").concat(Le));Oe=D(yt(yt({},_e),{},{className:Gt(b8($,pe),(Fe={},xt(Fe,Me,Me&&Le),xt(Fe,$,typeof $=="string"),Fe)),style:Se}),Ve)}if(E.isValidElement(Oe)&&jh(Oe)){var Ce=Oe,Ye=Ce.ref;Ye||(Oe=E.cloneElement(Oe,{ref:Ve}))}return E.createElement(Rhe,{ref:Y},Oe)});return s.displayName="CSSMotion",s}const Ud=Vhe(tG);var cR="add",uR="keep",hR="remove",DP="removed";function Uhe(t){var n;return t&&Ei(t)==="object"&&"key"in t?n=t:n={key:t},yt(yt({},n),{},{key:String(n.key)})}function dR(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(Uhe)}function Hhe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],s=0,c=n.length,m=dR(t),v=dR(n);m.forEach(function(S){for(var R=!1,D=s;D<c;D+=1){var $=v[D];if($.key===S.key){s<D&&(o=o.concat(v.slice(s,D).map(function(H){return yt(yt({},H),{},{status:cR})})),s=D),o.push(yt(yt({},$),{},{status:uR})),s+=1,R=!0;break}}R||o.push(yt(yt({},S),{},{status:hR}))}),s<c&&(o=o.concat(v.slice(s).map(function(S){return yt(yt({},S),{},{status:cR})})));var d={};o.forEach(function(S){var R=S.key;d[R]=(d[R]||0)+1});var C=Object.keys(d).filter(function(S){return d[S]>1});return C.forEach(function(S){o=o.filter(function(R){var D=R.key,$=R.status;return D!==S||$!==hR}),o.forEach(function(R){R.key===S&&(R.status=uR)})}),o}var Ghe=["component","children","onVisibleChanged","onAllRemoved"],qhe=["status"],Whe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Khe(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ud,o=function(s){Wf(m,s);var c=Kf(m);function m(){var v;Il(this,m);for(var d=arguments.length,C=new Array(d),S=0;S<d;S++)C[S]=arguments[S];return v=c.call.apply(c,[this].concat(C)),xt(Gi(v),"state",{keyEntities:[]}),xt(Gi(v),"removeKey",function(R){var D=v.state.keyEntities,$=D.map(function(H){return H.key!==R?H:yt(yt({},H),{},{status:DP})});return v.setState({keyEntities:$}),$.filter(function(H){var Z=H.status;return Z!==DP}).length}),v}return Ml(m,[{key:"render",value:function(){var d=this,C=this.state.keyEntities,S=this.props,R=S.component,D=S.children,$=S.onVisibleChanged,H=S.onAllRemoved,Z=xi(S,Ghe),X=R||E.Fragment,Q={};return Whe.forEach(function(G){Q[G]=Z[G],delete Z[G]}),delete Z.keys,E.createElement(X,Z,C.map(function(G,K){var Y=G.status,re=xi(G,qhe),fe=Y===cR||Y===uR;return E.createElement(n,Mr({},Q,{key:re.key,visible:fe,eventProps:re,onVisibleChanged:function(pe){if($?.(pe,{key:re.key}),!pe){var xe=d.removeKey(re.key);xe===0&&H&&H()}}}),function(me,pe){return D(yt(yt({},me),{},{index:K}),pe)})}))}}],[{key:"getDerivedStateFromProps",value:function(d,C){var S=d.keys,R=C.keyEntities,D=dR(S),$=Hhe(R,D);return{keyEntities:$.filter(function(H){var Z=R.find(function(X){var Q=X.key;return H.key===Q});return!(Z&&Z.status===DP&&H.status===hR)})}}}]),m}(E.Component);return xt(o,"defaultProps",{component:"div"}),o}const Zhe=Khe(tG);function Xhe(t){const{children:n}=t,[,o]=Ws(),{motion:s}=o,c=E.useRef(!1);return c.current=c.current||s===!1,c.current?E.createElement(Ahe,{motion:s},n):n}const Yhe=()=>null;var Jhe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Qhe=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],ede="ant";let FT,oG,aG;function XE(){return FT||ede}function tde(){return oG||BO}function rde(t){return Object.keys(t).some(n=>n.endsWith("Color"))}const nde=t=>{let{prefixCls:n,iconPrefixCls:o,theme:s}=t;n!==void 0&&(FT=n),o!==void 0&&(oG=o),s&&(rde(s)?she(XE(),s):aG=s)},ide=()=>({getPrefixCls:(t,n)=>n||(t?`${XE()}-${t}`:XE()),getIconPrefixCls:tde,getRootPrefixCls:()=>FT||XE(),getTheme:()=>aG}),ode=t=>{const{children:n,csp:o,autoInsertSpaceInButton:s,alert:c,anchor:m,form:v,locale:d,componentSize:C,direction:S,space:R,virtual:D,dropdownMatchSelectWidth:$,popupMatchSelectWidth:H,popupOverflow:Z,legacyLocale:X,parentContext:Q,iconPrefixCls:G,theme:K,componentDisabled:Y,segmented:re,statistic:fe,spin:me,calendar:pe,carousel:xe,cascader:Se,collapse:oe,typography:Re,checkbox:Ve,descriptions:Oe,divider:_e,drawer:Fe,skeleton:Le,steps:Me,image:Ce,layout:Ye,list:qe,mentions:rt,modal:Qe,progress:St,result:jt,slider:Ot,breadcrumb:Tt,menu:ct,pagination:Ct,input:kt,empty:zt,badge:Nt,radio:Rt,rate:Pt,switch:Dt,transfer:Ut,avatar:sr,message:vt,tag:De,table:ze,card:ve,tabs:pt,timeline:gt,timePicker:$t,upload:It,notification:Mt,tree:Qt,colorPicker:wr,datePicker:br,rangePicker:tn,flex:yr,wave:dr,dropdown:Wt,warning:Wr}=t,Fr=E.useCallback((he,ge)=>{const{prefixCls:Te}=t;if(ge)return ge;const $e=Te||Q.getPrefixCls("");return he?`${$e}-${he}`:$e},[Q.getPrefixCls,t.prefixCls]),en=G||Q.iconPrefixCls||BO,Yr=o||Q.csp;GH(en,Yr);const fr=Mhe(K,Q.theme),Kr={csp:Yr,autoInsertSpaceInButton:s,alert:c,anchor:m,locale:d||X,direction:S,space:R,virtual:D,popupMatchSelectWidth:H??$,popupOverflow:Z,getPrefixCls:Fr,iconPrefixCls:en,theme:fr,segmented:re,statistic:fe,spin:me,calendar:pe,carousel:xe,cascader:Se,collapse:oe,typography:Re,checkbox:Ve,descriptions:Oe,divider:_e,drawer:Fe,skeleton:Le,steps:Me,image:Ce,input:kt,layout:Ye,list:qe,mentions:rt,modal:Qe,progress:St,result:jt,slider:Ot,breadcrumb:Tt,menu:ct,pagination:Ct,empty:zt,badge:Nt,radio:Rt,rate:Pt,switch:Dt,transfer:Ut,avatar:sr,message:vt,tag:De,table:ze,card:ve,tabs:pt,timeline:gt,timePicker:$t,upload:It,notification:Mt,tree:Qt,colorPicker:wr,datePicker:br,rangePicker:tn,flex:yr,wave:dr,dropdown:Wt,warning:Wr},Br=Object.assign({},Q);Object.keys(Kr).forEach(he=>{Kr[he]!==void 0&&(Br[he]=Kr[he])}),Qhe.forEach(he=>{const ge=t[he];ge&&(Br[he]=ge)});const an=Hm(()=>Br,Br,(he,ge)=>{const Te=Object.keys(he),$e=Object.keys(ge);return Te.length!==$e.length||Te.some(ke=>he[ke]!==ge[ke])}),ni=E.useMemo(()=>({prefixCls:en,csp:Yr}),[en,Yr]);let Nr=E.createElement(E.Fragment,null,E.createElement(Yhe,{dropdownMatchSelectWidth:$}),n);const ii=E.useMemo(()=>{var he,ge,Te,$e;return T_(((he=Uf.Form)===null||he===void 0?void 0:he.defaultValidateMessages)||{},((Te=(ge=an.locale)===null||ge===void 0?void 0:ge.Form)===null||Te===void 0?void 0:Te.defaultValidateMessages)||{},(($e=an.form)===null||$e===void 0?void 0:$e.validateMessages)||{},v?.validateMessages||{})},[an,v?.validateMessages]);Object.keys(ii).length>0&&(Nr=E.createElement(EH.Provider,{value:ii},Nr)),d&&(Nr=E.createElement(vue,{locale:d,_ANT_MARK__:gue},Nr)),(en||Yr)&&(Nr=E.createElement(LO.Provider,{value:ni},Nr)),C&&(Nr=E.createElement(lhe,{size:C},Nr)),Nr=E.createElement(Xhe,null,Nr);const Pe=E.useMemo(()=>{const he=fr||{},{algorithm:ge,token:Te,components:$e,cssVar:ke}=he,Ke=Jhe(he,["algorithm","token","components","cssVar"]),Ue=ge&&(!Array.isArray(ge)||ge.length>0)?X5(ge):DH,Ne={};Object.entries($e||{}).forEach(Et=>{let[Yt,dt]=Et;const ir=Object.assign({},dt);"algorithm"in ir&&(ir.algorithm===!0?ir.theme=Ue:(Array.isArray(ir.algorithm)||typeof ir.algorithm=="function")&&(ir.theme=X5(ir.algorithm)),delete ir.algorithm),Ne[Yt]=ir});const et=Object.assign(Object.assign({},Nb),Te);return Object.assign(Object.assign({},Ke),{theme:Ue,token:et,components:Ne,override:Object.assign({override:et},Ne),cssVar:ke})},[fr]);return K&&(Nr=E.createElement($H.Provider,{value:Pe},Nr)),an.warning&&(Nr=E.createElement(cue.Provider,{value:an.warning},Nr)),Y!==void 0&&(Nr=E.createElement(FO,{disabled:Y},Nr)),E.createElement(hi.Provider,{value:an},Nr)},w0=t=>{const n=E.useContext(hi),o=E.useContext($O);return E.createElement(ode,Object.assign({parentContext:n,legacyLocale:o},t))};w0.ConfigContext=hi;w0.SizeContext=lw;w0.config=nde;w0.useConfig=che;Object.defineProperty(w0,"SizeContext",{get:()=>lw});const VO=w0;var ade={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const sde=ade;function sG(t){var n;return t==null||(n=t.getRootNode)===null||n===void 0?void 0:n.call(t)}function lde(t){return sG(t)instanceof ShadowRoot}function NT(t){return lde(t)?sG(t):null}function cde(t){return t.replace(/-(.)/g,function(n,o){return o.toUpperCase()})}function ude(t,n){Ua(t,"[@ant-design/icons] ".concat(n))}function w8(t){return Ei(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(Ei(t.icon)==="object"||typeof t.icon=="function")}function S8(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(n,o){var s=t[o];switch(o){case"class":n.className=s,delete n.class;break;default:delete n[o],n[cde(o)]=s}return n},{})}function fR(t,n,o){return o?rr.createElement(t.tag,yt(yt({key:n},S8(t.attrs)),o),(t.children||[]).map(function(s,c){return fR(s,"".concat(n,"-").concat(t.tag,"-").concat(c))})):rr.createElement(t.tag,yt({key:n},S8(t.attrs)),(t.children||[]).map(function(s,c){return fR(s,"".concat(n,"-").concat(t.tag,"-").concat(c))}))}function lG(t){return Dm(t)[0]}function cG(t){return t?Array.isArray(t)?t:[t]:[]}var hde=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,dde=function(n){var o=E.useContext(LO),s=o.csp,c=o.prefixCls,m=hde;c&&(m=m.replace(/anticon/g,c)),E.useEffect(function(){var v=n.current,d=NT(v);zm(m,"@ant-design-icons",{prepend:!0,csp:s,attachTo:d})},[])},fde=["icon","className","onClick","style","primaryColor","secondaryColor"],cb={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function pde(t){var n=t.primaryColor,o=t.secondaryColor;cb.primaryColor=n,cb.secondaryColor=o||lG(n),cb.calculated=!!o}function mde(){return yt({},cb)}var ZI=function(n){var o=n.icon,s=n.className,c=n.onClick,m=n.style,v=n.primaryColor,d=n.secondaryColor,C=xi(n,fde),S=E.useRef(),R=cb;if(v&&(R={primaryColor:v,secondaryColor:d||lG(v)}),dde(S),ude(w8(o),"icon should be icon definiton, but got ".concat(o)),!w8(o))return null;var D=o;return D&&typeof D.icon=="function"&&(D=yt(yt({},D),{},{icon:D.icon(R.primaryColor,R.secondaryColor)})),fR(D.icon,"svg-".concat(D.name),yt(yt({className:s,onClick:c,style:m,"data-icon":D.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C),{},{ref:S}))};ZI.displayName="IconReact";ZI.getTwoToneColors=mde;ZI.setTwoToneColors=pde;const UO=ZI;function uG(t){var n=cG(t),o=nr(n,2),s=o[0],c=o[1];return UO.setTwoToneColors({primaryColor:s,secondaryColor:c})}function gde(){var t=UO.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var yde=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];uG(OH.primary);var XI=E.forwardRef(function(t,n){var o,s=t.className,c=t.icon,m=t.spin,v=t.rotate,d=t.tabIndex,C=t.onClick,S=t.twoToneColor,R=xi(t,yde),D=E.useContext(LO),$=D.prefixCls,H=$===void 0?"anticon":$,Z=D.rootClassName,X=Gt(Z,H,(o={},xt(o,"".concat(H,"-").concat(c.name),!!c.name),xt(o,"".concat(H,"-spin"),!!m||c.name==="loading"),o),s),Q=d;Q===void 0&&C&&(Q=-1);var G=v?{msTransform:"rotate(".concat(v,"deg)"),transform:"rotate(".concat(v,"deg)")}:void 0,K=cG(S),Y=nr(K,2),re=Y[0],fe=Y[1];return E.createElement("span",Mr({role:"img","aria-label":c.name},R,{ref:n,tabIndex:Q,onClick:C,className:X}),E.createElement(UO,{icon:c,primaryColor:re,secondaryColor:fe,style:G}))});XI.displayName="AntdIcon";XI.getTwoToneColor=gde;XI.setTwoToneColor=uG;const _o=XI;var vde=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:sde}))};const HO=E.forwardRef(vde);var _de={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const xde=_de;var bde=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:xde}))};const S0=E.forwardRef(bde);var wde={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const Sde=wde;var Cde=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Sde}))};const cw=E.forwardRef(Cde);var Ede={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const Tde=Ede;var Ide=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Tde}))};const GO=E.forwardRef(Ide);var Mde={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const Pde=Mde;var Ade=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Pde}))};const Rde=E.forwardRef(Ade);var kde=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Ode=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,zde="".concat(kde," ").concat(Ode).split(/[\s\n]+/),Dde="aria-",Lde="data-";function C8(t,n){return t.indexOf(n)===0}function Uh(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o;n===!1?o={aria:!0,data:!0,attr:!0}:n===!0?o={aria:!0}:o=yt({},n);var s={};return Object.keys(t).forEach(function(c){(o.aria&&(c==="role"||C8(c,Dde))||o.data&&C8(c,Lde)||o.attr&&zde.includes(c))&&(s[c]=t[c])}),s}const{isValidElement:xu}=f0;function hG(t){return t&&xu(t)&&t.type===E.Fragment}function $de(t,n,o){return xu(t)?E.cloneElement(t,typeof o=="function"?o(t.props||{}):o):n}function cc(t,n){return $de(t,t,n)}const E8=t=>typeof t=="object"&&t!=null&&t.nodeType===1,T8=(t,n)=>(!n||t!=="hidden")&&t!=="visible"&&t!=="clip",LP=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const o=getComputedStyle(t,null);return T8(o.overflowY,n)||T8(o.overflowX,n)||(s=>{const c=(m=>{if(!m.ownerDocument||!m.ownerDocument.defaultView)return null;try{return m.ownerDocument.defaultView.frameElement}catch{return null}})(s);return!!c&&(c.clientHeight<s.scrollHeight||c.clientWidth<s.scrollWidth)})(t)}return!1},pE=(t,n,o,s,c,m,v,d)=>m<t&&v>n||m>t&&v<n?0:m<=t&&d<=o||v>=n&&d>=o?m-t-s:v>n&&d<o||m<t&&d>o?v-n+c:0,Bde=t=>{const n=t.parentElement;return n??(t.getRootNode().host||null)},I8=(t,n)=>{var o,s,c,m;if(typeof document>"u")return[];const{scrollMode:v,block:d,inline:C,boundary:S,skipOverflowHiddenElements:R}=n,D=typeof S=="function"?S:Le=>Le!==S;if(!E8(t))throw new TypeError("Invalid target");const $=document.scrollingElement||document.documentElement,H=[];let Z=t;for(;E8(Z)&&D(Z);){if(Z=Bde(Z),Z===$){H.push(Z);break}Z!=null&&Z===document.body&&LP(Z)&&!LP(document.documentElement)||Z!=null&&LP(Z,R)&&H.push(Z)}const X=(s=(o=window.visualViewport)==null?void 0:o.width)!=null?s:innerWidth,Q=(m=(c=window.visualViewport)==null?void 0:c.height)!=null?m:innerHeight,{scrollX:G,scrollY:K}=window,{height:Y,width:re,top:fe,right:me,bottom:pe,left:xe}=t.getBoundingClientRect(),{top:Se,right:oe,bottom:Re,left:Ve}=(Le=>{const Me=window.getComputedStyle(Le);return{top:parseFloat(Me.scrollMarginTop)||0,right:parseFloat(Me.scrollMarginRight)||0,bottom:parseFloat(Me.scrollMarginBottom)||0,left:parseFloat(Me.scrollMarginLeft)||0}})(t);let Oe=d==="start"||d==="nearest"?fe-Se:d==="end"?pe+Re:fe+Y/2-Se+Re,_e=C==="center"?xe+re/2-Ve+oe:C==="end"?me+oe:xe-Ve;const Fe=[];for(let Le=0;Le<H.length;Le++){const Me=H[Le],{height:Ce,width:Ye,top:qe,right:rt,bottom:Qe,left:St}=Me.getBoundingClientRect();if(v==="if-needed"&&fe>=0&&xe>=0&&pe<=Q&&me<=X&&fe>=qe&&pe<=Qe&&xe>=St&&me<=rt)return Fe;const jt=getComputedStyle(Me),Ot=parseInt(jt.borderLeftWidth,10),Tt=parseInt(jt.borderTopWidth,10),ct=parseInt(jt.borderRightWidth,10),Ct=parseInt(jt.borderBottomWidth,10);let kt=0,zt=0;const Nt="offsetWidth"in Me?Me.offsetWidth-Me.clientWidth-Ot-ct:0,Rt="offsetHeight"in Me?Me.offsetHeight-Me.clientHeight-Tt-Ct:0,Pt="offsetWidth"in Me?Me.offsetWidth===0?0:Ye/Me.offsetWidth:0,Dt="offsetHeight"in Me?Me.offsetHeight===0?0:Ce/Me.offsetHeight:0;if($===Me)kt=d==="start"?Oe:d==="end"?Oe-Q:d==="nearest"?pE(K,K+Q,Q,Tt,Ct,K+Oe,K+Oe+Y,Y):Oe-Q/2,zt=C==="start"?_e:C==="center"?_e-X/2:C==="end"?_e-X:pE(G,G+X,X,Ot,ct,G+_e,G+_e+re,re),kt=Math.max(0,kt+K),zt=Math.max(0,zt+G);else{kt=d==="start"?Oe-qe-Tt:d==="end"?Oe-Qe+Ct+Rt:d==="nearest"?pE(qe,Qe,Ce,Tt,Ct+Rt,Oe,Oe+Y,Y):Oe-(qe+Ce/2)+Rt/2,zt=C==="start"?_e-St-Ot:C==="center"?_e-(St+Ye/2)+Nt/2:C==="end"?_e-rt+ct+Nt:pE(St,rt,Ye,Ot,ct+Nt,_e,_e+re,re);const{scrollLeft:Ut,scrollTop:sr}=Me;kt=Dt===0?0:Math.max(0,Math.min(sr+kt/Dt,Me.scrollHeight-Ce/Dt+Rt)),zt=Pt===0?0:Math.max(0,Math.min(Ut+zt/Pt,Me.scrollWidth-Ye/Pt+Nt)),Oe+=sr-kt,_e+=Ut-zt}Fe.push({el:Me,top:kt,left:zt})}return Fe},Fde=t=>t===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(t)?t:{block:"start",inline:"nearest"};function dG(t,n){if(!t.isConnected||!(c=>{let m=c;for(;m&&m.parentNode;){if(m.parentNode===document)return!0;m=m.parentNode instanceof ShadowRoot?m.parentNode.host:m.parentNode}return!1})(t))return;const o=(c=>{const m=window.getComputedStyle(c);return{top:parseFloat(m.scrollMarginTop)||0,right:parseFloat(m.scrollMarginRight)||0,bottom:parseFloat(m.scrollMarginBottom)||0,left:parseFloat(m.scrollMarginLeft)||0}})(t);if((c=>typeof c=="object"&&typeof c.behavior=="function")(n))return n.behavior(I8(t,n));const s=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:c,top:m,left:v}of I8(t,Fde(n))){const d=m-o.top+o.bottom,C=v-o.left+o.right;c.scroll({top:d,left:C,behavior:s})}}const H3e=Object.freeze(Object.defineProperty({__proto__:null,default:dG},Symbol.toStringTag,{value:"Module"}));function pR(t){return t!=null&&t===t.window}function Nde(t,n){var o,s;if(typeof window>"u")return 0;const c=n?"scrollTop":"scrollLeft";let m=0;return pR(t)?m=t[n?"pageYOffset":"pageXOffset"]:t instanceof Document?m=t.documentElement[c]:(t instanceof HTMLElement||t)&&(m=t[c]),t&&!pR(t)&&typeof m!="number"&&(m=(s=((o=t.ownerDocument)!==null&&o!==void 0?o:t).documentElement)===null||s===void 0?void 0:s[c]),m}function jde(t,n,o,s){const c=o-n;return t/=s/2,t<1?c/2*t*t*t+n:c/2*((t-=2)*t*t+2)+n}function Vde(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{getContainer:o=()=>window,callback:s,duration:c=450}=n,m=o(),v=Nde(m,!0),d=Date.now(),C=()=>{const R=Date.now()-d,D=jde(R>c?c:R,v,t,c);pR(m)?m.scrollTo(window.pageXOffset,D):m instanceof Document||m.constructor.name==="HTMLDocument"?m.documentElement.scrollTop=D:m.scrollTop=D,R<c?Do(C):typeof s=="function"&&s()};Do(C)}const Pl=t=>{const[,,,,n]=Ws();return n?`${t}-css-var`:""};var Or={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(n){var o=n.keyCode;if(n.altKey&&!n.ctrlKey||n.metaKey||o>=Or.F1&&o<=Or.F12)return!1;switch(o){case Or.ALT:case Or.CAPS_LOCK:case Or.CONTEXT_MENU:case Or.CTRL:case Or.DOWN:case Or.END:case Or.ESC:case Or.HOME:case Or.INSERT:case Or.LEFT:case Or.MAC_FF_META:case Or.META:case Or.NUMLOCK:case Or.NUM_CENTER:case Or.PAGE_DOWN:case Or.PAGE_UP:case Or.PAUSE:case Or.PRINT_SCREEN:case Or.RIGHT:case Or.SHIFT:case Or.UP:case Or.WIN_KEY:case Or.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(n){if(n>=Or.ZERO&&n<=Or.NINE||n>=Or.NUM_ZERO&&n<=Or.NUM_MULTIPLY||n>=Or.A&&n<=Or.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&n===0)return!0;switch(n){case Or.SPACE:case Or.QUESTION_MARK:case Or.NUM_PLUS:case Or.NUM_MINUS:case Or.NUM_PERIOD:case Or.NUM_DIVISION:case Or.SEMICOLON:case Or.DASH:case Or.EQUALS:case Or.COMMA:case Or.PERIOD:case Or.SLASH:case Or.APOSTROPHE:case Or.SINGLE_QUOTE:case Or.OPEN_SQUARE_BRACKET:case Or.BACKSLASH:case Or.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Ude={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const Hde=Ude;var Gde=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Hde}))};const YI=E.forwardRef(Gde),qde=rr.createContext(void 0),JI=qde,Qg=100,Wde=10,fG=Qg*Wde,pG={Modal:Qg,Drawer:Qg,Popover:Qg,Popconfirm:Qg,Tooltip:Qg,Tour:Qg},Kde={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function Zde(t){return t in pG}function uw(t,n){const[,o]=Ws(),s=rr.useContext(JI),c=Zde(t);if(n!==void 0)return[n,n];let m=s??0;return c?(m+=(s?0:o.zIndexPopupBase)+pG[t],m=Math.min(m,o.zIndexPopupBase+fG)):m+=Kde[t],[s===void 0?n:m,m]}function Xde(){const[t,n]=E.useState([]),o=E.useCallback(s=>(n(c=>[].concat(Pr(c),[s])),()=>{n(c=>c.filter(m=>m!==s))}),[]);return[t,o]}function uc(){uc=function(){return n};var t,n={},o=Object.prototype,s=o.hasOwnProperty,c=Object.defineProperty||function(Le,Me,Ce){Le[Me]=Ce.value},m=typeof Symbol=="function"?Symbol:{},v=m.iterator||"@@iterator",d=m.asyncIterator||"@@asyncIterator",C=m.toStringTag||"@@toStringTag";function S(Le,Me,Ce){return Object.defineProperty(Le,Me,{value:Ce,enumerable:!0,configurable:!0,writable:!0}),Le[Me]}try{S({},"")}catch{S=function(Ce,Ye,qe){return Ce[Ye]=qe}}function R(Le,Me,Ce,Ye){var qe=Me&&Me.prototype instanceof G?Me:G,rt=Object.create(qe.prototype),Qe=new _e(Ye||[]);return c(rt,"_invoke",{value:oe(Le,Ce,Qe)}),rt}function D(Le,Me,Ce){try{return{type:"normal",arg:Le.call(Me,Ce)}}catch(Ye){return{type:"throw",arg:Ye}}}n.wrap=R;var $="suspendedStart",H="suspendedYield",Z="executing",X="completed",Q={};function G(){}function K(){}function Y(){}var re={};S(re,v,function(){return this});var fe=Object.getPrototypeOf,me=fe&&fe(fe(Fe([])));me&&me!==o&&s.call(me,v)&&(re=me);var pe=Y.prototype=G.prototype=Object.create(re);function xe(Le){["next","throw","return"].forEach(function(Me){S(Le,Me,function(Ce){return this._invoke(Me,Ce)})})}function Se(Le,Me){function Ce(qe,rt,Qe,St){var jt=D(Le[qe],Le,rt);if(jt.type!=="throw"){var Ot=jt.arg,Tt=Ot.value;return Tt&&Ei(Tt)=="object"&&s.call(Tt,"__await")?Me.resolve(Tt.__await).then(function(ct){Ce("next",ct,Qe,St)},function(ct){Ce("throw",ct,Qe,St)}):Me.resolve(Tt).then(function(ct){Ot.value=ct,Qe(Ot)},function(ct){return Ce("throw",ct,Qe,St)})}St(jt.arg)}var Ye;c(this,"_invoke",{value:function(rt,Qe){function St(){return new Me(function(jt,Ot){Ce(rt,Qe,jt,Ot)})}return Ye=Ye?Ye.then(St,St):St()}})}function oe(Le,Me,Ce){var Ye=$;return function(qe,rt){if(Ye===Z)throw Error("Generator is already running");if(Ye===X){if(qe==="throw")throw rt;return{value:t,done:!0}}for(Ce.method=qe,Ce.arg=rt;;){var Qe=Ce.delegate;if(Qe){var St=Re(Qe,Ce);if(St){if(St===Q)continue;return St}}if(Ce.method==="next")Ce.sent=Ce._sent=Ce.arg;else if(Ce.method==="throw"){if(Ye===$)throw Ye=X,Ce.arg;Ce.dispatchException(Ce.arg)}else Ce.method==="return"&&Ce.abrupt("return",Ce.arg);Ye=Z;var jt=D(Le,Me,Ce);if(jt.type==="normal"){if(Ye=Ce.done?X:H,jt.arg===Q)continue;return{value:jt.arg,done:Ce.done}}jt.type==="throw"&&(Ye=X,Ce.method="throw",Ce.arg=jt.arg)}}}function Re(Le,Me){var Ce=Me.method,Ye=Le.iterator[Ce];if(Ye===t)return Me.delegate=null,Ce==="throw"&&Le.iterator.return&&(Me.method="return",Me.arg=t,Re(Le,Me),Me.method==="throw")||Ce!=="return"&&(Me.method="throw",Me.arg=new TypeError("The iterator does not provide a '"+Ce+"' method")),Q;var qe=D(Ye,Le.iterator,Me.arg);if(qe.type==="throw")return Me.method="throw",Me.arg=qe.arg,Me.delegate=null,Q;var rt=qe.arg;return rt?rt.done?(Me[Le.resultName]=rt.value,Me.next=Le.nextLoc,Me.method!=="return"&&(Me.method="next",Me.arg=t),Me.delegate=null,Q):rt:(Me.method="throw",Me.arg=new TypeError("iterator result is not an object"),Me.delegate=null,Q)}function Ve(Le){var Me={tryLoc:Le[0]};1 in Le&&(Me.catchLoc=Le[1]),2 in Le&&(Me.finallyLoc=Le[2],Me.afterLoc=Le[3]),this.tryEntries.push(Me)}function Oe(Le){var Me=Le.completion||{};Me.type="normal",delete Me.arg,Le.completion=Me}function _e(Le){this.tryEntries=[{tryLoc:"root"}],Le.forEach(Ve,this),this.reset(!0)}function Fe(Le){if(Le||Le===""){var Me=Le[v];if(Me)return Me.call(Le);if(typeof Le.next=="function")return Le;if(!isNaN(Le.length)){var Ce=-1,Ye=function qe(){for(;++Ce<Le.length;)if(s.call(Le,Ce))return qe.value=Le[Ce],qe.done=!1,qe;return qe.value=t,qe.done=!0,qe};return Ye.next=Ye}}throw new TypeError(Ei(Le)+" is not iterable")}return K.prototype=Y,c(pe,"constructor",{value:Y,configurable:!0}),c(Y,"constructor",{value:K,configurable:!0}),K.displayName=S(Y,C,"GeneratorFunction"),n.isGeneratorFunction=function(Le){var Me=typeof Le=="function"&&Le.constructor;return!!Me&&(Me===K||(Me.displayName||Me.name)==="GeneratorFunction")},n.mark=function(Le){return Object.setPrototypeOf?Object.setPrototypeOf(Le,Y):(Le.__proto__=Y,S(Le,C,"GeneratorFunction")),Le.prototype=Object.create(pe),Le},n.awrap=function(Le){return{__await:Le}},xe(Se.prototype),S(Se.prototype,d,function(){return this}),n.AsyncIterator=Se,n.async=function(Le,Me,Ce,Ye,qe){qe===void 0&&(qe=Promise);var rt=new Se(R(Le,Me,Ce,Ye),qe);return n.isGeneratorFunction(Me)?rt:rt.next().then(function(Qe){return Qe.done?Qe.value:rt.next()})},xe(pe),S(pe,C,"Generator"),S(pe,v,function(){return this}),S(pe,"toString",function(){return"[object Generator]"}),n.keys=function(Le){var Me=Object(Le),Ce=[];for(var Ye in Me)Ce.push(Ye);return Ce.reverse(),function qe(){for(;Ce.length;){var rt=Ce.pop();if(rt in Me)return qe.value=rt,qe.done=!1,qe}return qe.done=!0,qe}},n.values=Fe,_e.prototype={constructor:_e,reset:function(Me){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(Oe),!Me)for(var Ce in this)Ce.charAt(0)==="t"&&s.call(this,Ce)&&!isNaN(+Ce.slice(1))&&(this[Ce]=t)},stop:function(){this.done=!0;var Me=this.tryEntries[0].completion;if(Me.type==="throw")throw Me.arg;return this.rval},dispatchException:function(Me){if(this.done)throw Me;var Ce=this;function Ye(Ot,Tt){return Qe.type="throw",Qe.arg=Me,Ce.next=Ot,Tt&&(Ce.method="next",Ce.arg=t),!!Tt}for(var qe=this.tryEntries.length-1;qe>=0;--qe){var rt=this.tryEntries[qe],Qe=rt.completion;if(rt.tryLoc==="root")return Ye("end");if(rt.tryLoc<=this.prev){var St=s.call(rt,"catchLoc"),jt=s.call(rt,"finallyLoc");if(St&&jt){if(this.prev<rt.catchLoc)return Ye(rt.catchLoc,!0);if(this.prev<rt.finallyLoc)return Ye(rt.finallyLoc)}else if(St){if(this.prev<rt.catchLoc)return Ye(rt.catchLoc,!0)}else{if(!jt)throw Error("try statement without catch or finally");if(this.prev<rt.finallyLoc)return Ye(rt.finallyLoc)}}}},abrupt:function(Me,Ce){for(var Ye=this.tryEntries.length-1;Ye>=0;--Ye){var qe=this.tryEntries[Ye];if(qe.tryLoc<=this.prev&&s.call(qe,"finallyLoc")&&this.prev<qe.finallyLoc){var rt=qe;break}}rt&&(Me==="break"||Me==="continue")&&rt.tryLoc<=Ce&&Ce<=rt.finallyLoc&&(rt=null);var Qe=rt?rt.completion:{};return Qe.type=Me,Qe.arg=Ce,rt?(this.method="next",this.next=rt.finallyLoc,Q):this.complete(Qe)},complete:function(Me,Ce){if(Me.type==="throw")throw Me.arg;return Me.type==="break"||Me.type==="continue"?this.next=Me.arg:Me.type==="return"?(this.rval=this.arg=Me.arg,this.method="return",this.next="end"):Me.type==="normal"&&Ce&&(this.next=Ce),Q},finish:function(Me){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Ye=this.tryEntries[Ce];if(Ye.finallyLoc===Me)return this.complete(Ye.completion,Ye.afterLoc),Oe(Ye),Q}},catch:function(Me){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Ye=this.tryEntries[Ce];if(Ye.tryLoc===Me){var qe=Ye.completion;if(qe.type==="throw"){var rt=qe.arg;Oe(Ye)}return rt}}throw Error("illegal catch attempt")},delegateYield:function(Me,Ce,Ye){return this.delegate={iterator:Fe(Me),resultName:Ce,nextLoc:Ye},this.method==="next"&&(this.arg=t),Q}},n}function M8(t,n,o,s,c,m,v){try{var d=t[m](v),C=d.value}catch(S){o(S);return}d.done?n(C):Promise.resolve(C).then(s,c)}function Iy(t){return function(){var n=this,o=arguments;return new Promise(function(s,c){var m=t.apply(n,o);function v(C){M8(m,s,c,v,d,"next",C)}function d(C){M8(m,s,c,v,d,"throw",C)}v(void 0)})}}var hw=yt({},Yne),Yde=hw.version,Jde=hw.render,Qde=hw.unmountComponentAtNode,QI;try{var efe=Number((Yde||"").split(".")[0]);efe>=18&&(QI=hw.createRoot)}catch{}function P8(t){var n=hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n&&Ei(n)==="object"&&(n.usingClientEntryPoint=t)}var jT="__rc_react_root__";function tfe(t,n){P8(!0);var o=n[jT]||QI(n);P8(!1),o.render(t),n[jT]=o}function rfe(t,n){Jde(t,n)}function mG(t,n){if(QI){tfe(t,n);return}rfe(t,n)}function nfe(t){return mR.apply(this,arguments)}function mR(){return mR=Iy(uc().mark(function t(n){return uc().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.resolve().then(function(){var c;(c=n[jT])===null||c===void 0||c.unmount(),delete n[jT]}));case 1:case"end":return s.stop()}},t)})),mR.apply(this,arguments)}function ife(t){Qde(t)}function gG(t){return gR.apply(this,arguments)}function gR(){return gR=Iy(uc().mark(function t(n){return uc().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(QI===void 0){s.next=2;break}return s.abrupt("return",nfe(n));case 2:ife(n);case 3:case"end":return s.stop()}},t)})),gR.apply(this,arguments)}const $P=()=>({height:0,opacity:0}),A8=t=>{const{scrollHeight:n}=t;return{height:n,opacity:1}},ofe=t=>({height:t?t.offsetHeight:0}),BP=(t,n)=>n?.deadline===!0||n.propertyName==="height",VT=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:$P,onEnterStart:$P,onAppearActive:A8,onEnterActive:A8,onLeaveStart:ofe,onLeaveActive:$P,onAppearEnd:BP,onEnterEnd:BP,onLeaveEnd:BP,motionDeadline:500}},xy=(t,n,o)=>o!==void 0?o:`${t}-${n}`,dw=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var n=t.getBBox(),o=n.width,s=n.height;if(o||s)return!0}if(t.getBoundingClientRect){var c=t.getBoundingClientRect(),m=c.width,v=c.height;if(m||v)return!0}}return!1},afe=t=>{const{componentCls:n,colorPrimary:o}=t;return{[n]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${t.motionEaseInOut}`,`opacity 0.35s ${t.motionEaseInOut}`].join(",")}}}}},sfe=NO("Wave",t=>[afe(t)]);function lfe(t){const n=(t||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return n&&n[1]&&n[2]&&n[3]?!(n[1]===n[2]&&n[2]===n[3]):!0}function FP(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&lfe(t)&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function cfe(t){const{borderTopColor:n,borderColor:o,backgroundColor:s}=getComputedStyle(t);return FP(n)?n:FP(o)?o:FP(s)?s:null}const eM="ant-wave-target";function NP(t){return Number.isNaN(t)?0:t}const ufe=t=>{const{className:n,target:o,component:s}=t,c=E.useRef(null),[m,v]=E.useState(null),[d,C]=E.useState([]),[S,R]=E.useState(0),[D,$]=E.useState(0),[H,Z]=E.useState(0),[X,Q]=E.useState(0),[G,K]=E.useState(!1),Y={left:S,top:D,width:H,height:X,borderRadius:d.map(me=>`${me}px`).join(" ")};m&&(Y["--wave-color"]=m);function re(){const me=getComputedStyle(o);v(cfe(o));const pe=me.position==="static",{borderLeftWidth:xe,borderTopWidth:Se}=me;R(pe?o.offsetLeft:NP(-parseFloat(xe))),$(pe?o.offsetTop:NP(-parseFloat(Se))),Z(o.offsetWidth),Q(o.offsetHeight);const{borderTopLeftRadius:oe,borderTopRightRadius:Re,borderBottomLeftRadius:Ve,borderBottomRightRadius:Oe}=me;C([oe,Re,Oe,Ve].map(_e=>NP(parseFloat(_e))))}if(E.useEffect(()=>{if(o){const me=Do(()=>{re(),K(!0)});let pe;return typeof ResizeObserver<"u"&&(pe=new ResizeObserver(re),pe.observe(o)),()=>{Do.cancel(me),pe?.disconnect()}}},[]),!G)return null;const fe=(s==="Checkbox"||s==="Radio")&&o?.classList.contains(eM);return E.createElement(Ud,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(me,pe)=>{var xe;if(pe.deadline||pe.propertyName==="opacity"){const Se=(xe=c.current)===null||xe===void 0?void 0:xe.parentElement;gG(Se).then(()=>{Se?.remove()})}return!1}},me=>{let{className:pe}=me;return E.createElement("div",{ref:c,className:Gt(n,{"wave-quick":fe},pe),style:Y})})},hfe=(t,n)=>{var o;const{component:s}=n;if(s==="Checkbox"&&!(!((o=t.querySelector("input"))===null||o===void 0)&&o.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",t?.insertBefore(c,t?.firstChild),mG(E.createElement(ufe,Object.assign({},n,{target:t})),c)},dfe=hfe;function ffe(t,n,o){const{wave:s}=E.useContext(hi),[,c,m]=Ws(),v=ws(S=>{const R=t.current;if(s?.disabled||!R)return;const D=R.querySelector(`.${eM}`)||R,{showEffect:$}=s||{};($||dfe)(D,{className:n,token:c,component:o,event:S,hashId:m})}),d=E.useRef();return S=>{Do.cancel(d.current),d.current=Do(()=>{v(S)})}}const pfe=t=>{const{children:n,disabled:o,component:s}=t,{getPrefixCls:c}=E.useContext(hi),m=E.useRef(null),v=c("wave"),[,d]=sfe(v),C=ffe(m,Gt(v,d),s);if(rr.useEffect(()=>{const R=m.current;if(!R||R.nodeType!==1||o)return;const D=$=>{!dw($.target)||!R.getAttribute||R.getAttribute("disabled")||R.disabled||R.className.includes("disabled")||R.className.includes("-leave")||C($)};return R.addEventListener("click",D,!0),()=>{R.removeEventListener("click",D,!0)}},[o]),!rr.isValidElement(n))return n??null;const S=jh(n)?Cu(n.ref,m):m;return cc(n,{ref:S})},tM=pfe,Gh=t=>{const n=rr.useContext(lw);return rr.useMemo(()=>t?typeof t=="string"?t??n:t instanceof Function?t(n):n:n,[t,n])},mfe=t=>{const{componentCls:n}=t;return{[n]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},gfe=t=>{const{componentCls:n}=t;return{[n]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${n}-item:empty`]:{display:"none"}}}},yfe=t=>{const{componentCls:n}=t;return{[n]:{"&-gap-row-small":{rowGap:t.spaceGapSmallSize},"&-gap-row-middle":{rowGap:t.spaceGapMiddleSize},"&-gap-row-large":{rowGap:t.spaceGapLargeSize},"&-gap-col-small":{columnGap:t.spaceGapSmallSize},"&-gap-col-middle":{columnGap:t.spaceGapMiddleSize},"&-gap-col-large":{columnGap:t.spaceGapLargeSize}}}},yG=os("Space",t=>{const n=Yi(t,{spaceGapSmallSize:t.paddingXS,spaceGapMiddleSize:t.padding,spaceGapLargeSize:t.paddingLG});return[gfe(n),yfe(n),mfe(n)]},()=>({}),{resetStyle:!1});var vG=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const rM=E.createContext(null),fw=(t,n)=>{const o=E.useContext(rM),s=E.useMemo(()=>{if(!o)return"";const{compactDirection:c,isFirstItem:m,isLastItem:v}=o,d=c==="vertical"?"-vertical-":"-";return Gt(`${t}-compact${d}item`,{[`${t}-compact${d}first-item`]:m,[`${t}-compact${d}last-item`]:v,[`${t}-compact${d}item-rtl`]:n==="rtl"})},[t,n,o]);return{compactSize:o?.compactSize,compactDirection:o?.compactDirection,compactItemClassnames:s}},Gb=t=>{let{children:n}=t;return E.createElement(rM.Provider,{value:null},n)},vfe=t=>{var{children:n}=t,o=vG(t,["children"]);return E.createElement(rM.Provider,{value:o},n)},_fe=t=>{const{getPrefixCls:n,direction:o}=E.useContext(hi),{size:s,direction:c,block:m,prefixCls:v,className:d,rootClassName:C,children:S}=t,R=vG(t,["size","direction","block","prefixCls","className","rootClassName","children"]),D=Gh(Y=>s??Y),$=n("space-compact",v),[H,Z]=yG($),X=Gt($,Z,{[`${$}-rtl`]:o==="rtl",[`${$}-block`]:m,[`${$}-vertical`]:c==="vertical"},d,C),Q=E.useContext(rM),G=$c(S),K=E.useMemo(()=>G.map((Y,re)=>{const fe=Y&&Y.key||`${$}-item-${re}`;return E.createElement(vfe,{key:fe,compactSize:D,compactDirection:c,isFirstItem:re===0&&(!Q||Q?.isFirstItem),isLastItem:re===G.length-1&&(!Q||Q?.isLastItem)},Y)}),[s,G,Q]);return G.length===0?null:H(E.createElement("div",Object.assign({className:X},R),K))};var xfe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const _G=E.createContext(void 0),bfe=t=>{const{getPrefixCls:n,direction:o}=E.useContext(hi),{prefixCls:s,size:c,className:m}=t,v=xfe(t,["prefixCls","size","className"]),d=n("btn-group",s),[,,C]=Ws();let S="";switch(c){case"large":S="lg";break;case"small":S="sm";break}const R=Gt(d,{[`${d}-${S}`]:S,[`${d}-rtl`]:o==="rtl"},m,C);return E.createElement(_G.Provider,{value:c},E.createElement("div",Object.assign({},v,{className:R})))},wfe=bfe,R8=/^[\u4e00-\u9fa5]{2}$/,yR=R8.test.bind(R8);function xG(t){return t==="danger"?{danger:!0}:{type:t}}function k8(t){return typeof t=="string"}function jP(t){return t==="text"||t==="link"}function Sfe(t,n){if(t==null)return;const o=n?" ":"";return typeof t!="string"&&typeof t!="number"&&k8(t.type)&&yR(t.props.children)?cc(t,{children:t.props.children.split("").join(o)}):k8(t)?yR(t)?rr.createElement("span",null,t.split("").join(o)):rr.createElement("span",null,t):hG(t)?rr.createElement("span",null,t):t}function Cfe(t,n){let o=!1;const s=[];return rr.Children.forEach(t,c=>{const m=typeof c,v=m==="string"||m==="number";if(o&&v){const d=s.length-1,C=s[d];s[d]=`${C}${c}`}else s.push(c);o=v}),rr.Children.map(s,c=>Sfe(c,n))}const Efe=E.forwardRef((t,n)=>{const{className:o,style:s,children:c,prefixCls:m}=t,v=Gt(`${m}-icon`,o);return rr.createElement("span",{ref:n,className:v,style:s},c)}),bG=Efe,O8=E.forwardRef((t,n)=>{let{prefixCls:o,className:s,style:c,iconClassName:m}=t;const v=Gt(`${o}-loading-icon`,s);return rr.createElement(bG,{prefixCls:o,className:v,style:c,ref:n},rr.createElement(YI,{className:m}))}),VP=()=>({width:0,opacity:0,transform:"scale(0)"}),UP=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),Tfe=t=>{const{prefixCls:n,loading:o,existIcon:s,className:c,style:m}=t,v=!!o;return s?rr.createElement(O8,{prefixCls:n,className:c,style:m}):rr.createElement(Ud,{visible:v,motionName:`${n}-loading-icon-motion`,motionLeave:v,removeOnLeave:!0,onAppearStart:VP,onAppearActive:UP,onEnterStart:VP,onEnterActive:UP,onLeaveStart:UP,onLeaveActive:VP},(d,C)=>{let{className:S,style:R}=d;return rr.createElement(O8,{prefixCls:n,className:c,style:Object.assign(Object.assign({},m),R),ref:C,iconClassName:S})})},Ife=Tfe,z8=(t,n)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:n}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:n}}}}}),Mfe=t=>{const{componentCls:n,fontSize:o,lineWidth:s,groupBorderColor:c,colorErrorHover:m}=t;return{[`${n}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${n}`]:{"&:not(:last-child)":{[`&, & > ${n}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(s).mul(-1).equal(),[`&, & > ${n}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[n]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${n}-icon-only`]:{fontSize:o}},z8(`${n}-primary`,c),z8(`${n}-danger`,m)]}},Pfe=t=>{const{componentCls:n,iconCls:o,fontWeight:s}=t;return{[n]:{outline:"none",position:"relative",display:"inline-block",fontWeight:s,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Xt(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:t.lineHeight,color:t.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${n}-icon`]:{lineHeight:0},[`> ${o} + span, > span + ${o}`]:{marginInlineStart:t.marginXS},[`&:not(${n}-icon-only) > ${n}-icon`]:{[`&${n}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:t.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},Hb(t)),[`&${n}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${n}-two-chinese-chars > *:not(${o})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${n}-compact-item`]:{flex:"none"}}}},Hf=(t,n,o)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":n,"&:active":o}}),Afe=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Rfe=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),kfe=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),qb=(t,n,o,s,c,m,v,d)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:o||void 0,background:n,borderColor:s||void 0,boxShadow:"none"},Hf(t,Object.assign({background:n},v),Object.assign({background:n},d))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:m||void 0}})}),qO=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},kfe(t))}),wG=t=>Object.assign({},qO(t)),UT=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),SG=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wG(t)),{background:t.defaultBg,borderColor:t.defaultBorderColor,color:t.defaultColor,boxShadow:t.defaultShadow}),Hf(t.componentCls,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),qb(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:t.colorError,borderColor:t.colorError},Hf(t.componentCls,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),qb(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder)),qO(t))}),Ofe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wG(t)),{color:t.primaryColor,background:t.colorPrimary,boxShadow:t.primaryShadow}),Hf(t.componentCls,{color:t.colorTextLightSolid,background:t.colorPrimaryHover},{color:t.colorTextLightSolid,background:t.colorPrimaryActive})),qb(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:t.colorError,boxShadow:t.dangerShadow,color:t.dangerColor},Hf(t.componentCls,{background:t.colorErrorHover},{background:t.colorErrorActive})),qb(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),qO(t))}),zfe=t=>Object.assign(Object.assign({},SG(t)),{borderStyle:"dashed"}),Dfe=t=>Object.assign(Object.assign(Object.assign({color:t.colorLink},Hf(t.componentCls,{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),UT(t)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign({color:t.colorError},Hf(t.componentCls,{color:t.colorErrorHover},{color:t.colorErrorActive})),UT(t))}),Lfe=t=>Object.assign(Object.assign(Object.assign({},Hf(t.componentCls,{color:t.colorText,background:t.textHoverBg},{color:t.colorText,background:t.colorBgTextActive})),UT(t)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign({color:t.colorError},UT(t)),Hf(t.componentCls,{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBg}))}),$fe=t=>{const{componentCls:n}=t;return{[`${n}-default`]:SG(t),[`${n}-primary`]:Ofe(t),[`${n}-dashed`]:zfe(t),[`${n}-link`]:Dfe(t),[`${n}-text`]:Lfe(t),[`${n}-ghost`]:qb(t.componentCls,t.ghostBg,t.colorBgContainer,t.colorBgContainer,t.colorTextDisabled,t.colorBorder)}},WO=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:o,controlHeight:s,fontSize:c,borderRadius:m,buttonPaddingHorizontal:v,iconCls:d,buttonPaddingVertical:C}=t,S=`${o}-icon-only`;return[{[`${o}${n}`]:{fontSize:c,height:s,padding:`${Xt(C)} ${Xt(v)}`,borderRadius:m,[`&${S}`]:{width:s,paddingInlineStart:0,paddingInlineEnd:0,[`&${o}-round`]:{width:"auto"},[d]:{fontSize:t.buttonIconOnlyFontSize}},[`&${o}-loading`]:{opacity:t.opacityLoading,cursor:"default"},[`${o}-loading-icon`]:{transition:`width ${t.motionDurationSlow} ${t.motionEaseInOut}, opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`}}},{[`${o}${o}-circle${n}`]:Afe(t)},{[`${o}${o}-round${n}`]:Rfe(t)}]},Bfe=t=>WO(Yi(t,{fontSize:t.contentFontSize})),Ffe=t=>{const n=Yi(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:t.paddingBlockSM,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return WO(n,`${t.componentCls}-sm`)},Nfe=t=>{const n=Yi(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:t.paddingBlockLG,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return WO(n,`${t.componentCls}-lg`)},jfe=t=>{const{componentCls:n}=t;return{[n]:{[`&${n}-block`]:{width:"100%"}}}},CG=t=>{const{paddingInline:n,onlyIconSize:o,paddingBlock:s}=t;return Yi(t,{buttonPaddingHorizontal:n,buttonPaddingVertical:s,buttonIconOnlyFontSize:o})},EG=t=>{const n=t.fontSize,o=t.fontSize,s=t.fontSizeLG;return{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,paddingBlock:Math.max((t.controlHeight-n*t.lineHeight)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-o*t.lineHeight)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-s*t.lineHeight)/2-t.lineWidth,0),onlyIconSize:t.fontSizeLG,onlyIconSizeSM:t.fontSizeLG-2,onlyIconSizeLG:t.fontSizeLG+2,groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:t.colorBgTextHover,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,contentFontSize:n,contentFontSizeSM:o,contentFontSizeLG:s}},Vfe=os("Button",t=>{const n=CG(t);return[Pfe(n),Ffe(n),Bfe(n),Nfe(n),jfe(n),$fe(n),Mfe(n)]},EG,{unitless:{fontWeight:!0}});function Ufe(t,n,o){const{focusElCls:s,focus:c,borderElCls:m}=o,v=m?"> *":"",d=["hover",c?"focus":null,"active"].filter(Boolean).map(C=>`&:${C} ${v}`).join(",");return{[`&-item:not(${n}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[d]:{zIndex:2}},s?{[`&${s}`]:{zIndex:2}}:{}),{[`&[disabled] ${v}`]:{zIndex:0}})}}function Hfe(t,n,o){const{borderElCls:s}=o,c=s?`> ${s}`:"";return{[`&-item:not(${n}-first-item):not(${n}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${n}-last-item)${n}-first-item`]:{[`& ${c}, &${t}-sm ${c}, &${t}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${n}-first-item)${n}-last-item`]:{[`& ${c}, &${t}-sm ${c}, &${t}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function KO(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:o}=t,s=`${o}-compact`;return{[s]:Object.assign(Object.assign({},Ufe(t,s,n)),Hfe(o,s,n))}}function Gfe(t,n){return{[`&-item:not(${n}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function qfe(t,n){return{[`&-item:not(${n}-first-item):not(${n}-last-item)`]:{borderRadius:0},[`&-item${n}-first-item:not(${n}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${n}-last-item:not(${n}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Wfe(t){const n=`${t.componentCls}-compact-vertical`;return{[n]:Object.assign(Object.assign({},Gfe(t,n)),qfe(t.componentCls,n))}}const Kfe=t=>{const{componentCls:n,calc:o}=t;return{[n]:{[`&-compact-item${n}-primary`]:{[`&:not([disabled]) + ${n}-compact-item${n}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:o(t.lineWidth).mul(-1).equal(),insetInlineStart:o(t.lineWidth).mul(-1).equal(),display:"inline-block",width:t.lineWidth,height:`calc(100% + ${Xt(t.lineWidth)} * 2)`,backgroundColor:t.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${n}-primary`]:{[`&:not([disabled]) + ${n}-compact-vertical-item${n}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:o(t.lineWidth).mul(-1).equal(),insetInlineStart:o(t.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${Xt(t.lineWidth)} * 2)`,height:t.lineWidth,backgroundColor:t.colorPrimaryHover,content:'""'}}}}}}},Zfe=b0(["Button","compact"],t=>{const n=CG(t);return[KO(n),Wfe(n),Kfe(n)]},EG);var Xfe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function Yfe(t){if(typeof t=="object"&&t){let n=t?.delay;return n=!Number.isNaN(n)&&typeof n=="number"?n:0,{loading:n<=0,delay:n}}return{loading:!!t,delay:0}}const Jfe=(t,n)=>{var o,s;const{loading:c=!1,prefixCls:m,type:v="default",danger:d,shape:C="default",size:S,styles:R,disabled:D,className:$,rootClassName:H,children:Z,icon:X,ghost:Q=!1,block:G=!1,htmlType:K="button",classNames:Y,style:re={}}=t,fe=Xfe(t,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:me,autoInsertSpaceInButton:pe,direction:xe,button:Se}=E.useContext(hi),oe=me("btn",m),[Re,Ve,Oe]=Vfe(oe),_e=E.useContext(Gm),Fe=D??_e,Le=E.useContext(_G),Me=E.useMemo(()=>Yfe(c),[c]),[Ce,Ye]=E.useState(Me.loading),[qe,rt]=E.useState(!1),St=Cu(n,E.createRef()),jt=E.Children.count(Z)===1&&!X&&!jP(v);E.useEffect(()=>{let pt=null;Me.delay>0?pt=setTimeout(()=>{pt=null,Ye(!0)},Me.delay):Ye(Me.loading);function gt(){pt&&(clearTimeout(pt),pt=null)}return gt},[Me]),E.useEffect(()=>{if(!St||!St.current||pe===!1)return;const pt=St.current.textContent;jt&&yR(pt)?qe||rt(!0):qe&&rt(!1)},[St]);const Ot=pt=>{const{onClick:gt}=t;if(Ce||Fe){pt.preventDefault();return}gt?.(pt)},Tt=pe!==!1,{compactSize:ct,compactItemClassnames:Ct}=fw(oe,xe),kt={large:"lg",small:"sm",middle:void 0},zt=Gh(pt=>{var gt,$t;return($t=(gt=S??ct)!==null&&gt!==void 0?gt:Le)!==null&&$t!==void 0?$t:pt}),Nt=zt&&kt[zt]||"",Rt=Ce?"loading":X,Pt=Zs(fe,["navigate"]),Dt=Gt(oe,Ve,Oe,{[`${oe}-${C}`]:C!=="default"&&C,[`${oe}-${v}`]:v,[`${oe}-${Nt}`]:Nt,[`${oe}-icon-only`]:!Z&&Z!==0&&!!Rt,[`${oe}-background-ghost`]:Q&&!jP(v),[`${oe}-loading`]:Ce,[`${oe}-two-chinese-chars`]:qe&&Tt&&!Ce,[`${oe}-block`]:G,[`${oe}-dangerous`]:!!d,[`${oe}-rtl`]:xe==="rtl"},Ct,$,H,Se?.className),Ut=Object.assign(Object.assign({},Se?.style),re),sr=Gt(Y?.icon,(o=Se?.classNames)===null||o===void 0?void 0:o.icon),vt=Object.assign(Object.assign({},R?.icon||{}),((s=Se?.styles)===null||s===void 0?void 0:s.icon)||{}),De=X&&!Ce?rr.createElement(bG,{prefixCls:oe,className:sr,style:vt},X):rr.createElement(Ife,{existIcon:!!X,prefixCls:oe,loading:!!Ce}),ze=Z||Z===0?Cfe(Z,jt&&Tt):null;if(Pt.href!==void 0)return Re(rr.createElement("a",Object.assign({},Pt,{className:Gt(Dt,{[`${oe}-disabled`]:Fe}),href:Fe?void 0:Pt.href,style:Ut,onClick:Ot,ref:St,tabIndex:Fe?-1:0}),De,ze));let ve=rr.createElement("button",Object.assign({},fe,{type:K,className:Dt,style:Ut,onClick:Ot,disabled:Fe,ref:St}),De,ze,Ct&&rr.createElement(Zfe,{key:"compact",prefixCls:oe}));return jP(v)||(ve=rr.createElement(tM,{component:"Button",disabled:!!Ce},ve)),Re(ve)},ZO=E.forwardRef(Jfe);ZO.Group=wfe;ZO.__ANT_BUTTON=!0;const $m=ZO;function D8(t){return!!(t&&t.then)}const Qfe=t=>{const{type:n,children:o,prefixCls:s,buttonProps:c,close:m,autoFocus:v,emitEvent:d,isSilent:C,quitOnNullishReturnValue:S,actionFn:R}=t,D=E.useRef(!1),$=E.useRef(null),[H,Z]=Am(!1),X=function(){m?.apply(void 0,arguments)};E.useEffect(()=>{let K=null;return v&&(K=setTimeout(()=>{var Y;(Y=$.current)===null||Y===void 0||Y.focus()})),()=>{K&&clearTimeout(K)}},[]);const Q=K=>{D8(K)&&(Z(!0),K.then(function(){Z(!1,!0),X.apply(void 0,arguments),D.current=!1},Y=>{if(Z(!1,!0),D.current=!1,!C?.())return Promise.reject(Y)}))},G=K=>{if(D.current)return;if(D.current=!0,!R){X();return}let Y;if(d){if(Y=R(K),S&&!D8(Y)){D.current=!1,X(K);return}}else if(R.length)Y=R(m),D.current=!1;else if(Y=R(),!Y){X();return}Q(Y)};return E.createElement($m,Object.assign({},xG(n),{onClick:G,loading:H,prefixCls:s},c,{ref:$}),o)},TG=Qfe,pw=rr.createContext({}),{Provider:IG}=pw,epe=()=>{const{autoFocusButton:t,cancelButtonProps:n,cancelTextLocale:o,isSilent:s,mergedOkCancel:c,rootPrefixCls:m,close:v,onCancel:d,onConfirm:C}=E.useContext(pw);return c?rr.createElement(TG,{isSilent:s,actionFn:d,close:function(){v?.apply(void 0,arguments),C?.(!1)},autoFocus:t==="cancel",buttonProps:n,prefixCls:`${m}-btn`},o):null},L8=epe,tpe=()=>{const{autoFocusButton:t,close:n,isSilent:o,okButtonProps:s,rootPrefixCls:c,okTextLocale:m,okType:v,onConfirm:d,onOk:C}=E.useContext(pw);return rr.createElement(TG,{isSilent:o,type:v||"primary",actionFn:C,close:function(){n?.apply(void 0,arguments),d?.(!0)},autoFocus:t==="ok",buttonProps:s,prefixCls:`${c}-btn`},m)},$8=tpe;var MG=E.createContext(null),B8=[];function rpe(t,n){var o=E.useState(function(){if(!hl())return null;var Z=document.createElement("div");return Z}),s=nr(o,1),c=s[0],m=E.useRef(!1),v=E.useContext(MG),d=E.useState(B8),C=nr(d,2),S=C[0],R=C[1],D=v||(m.current?void 0:function(Z){R(function(X){var Q=[Z].concat(Pr(X));return Q})});function $(){c.parentElement||document.body.appendChild(c),m.current=!0}function H(){var Z;(Z=c.parentElement)===null||Z===void 0||Z.removeChild(c),m.current=!1}return zo(function(){return t?v?v($):$():H(),H},[t]),zo(function(){S.length&&(S.forEach(function(Z){return Z()}),R(B8))},[S]),[c,D]}var HP;function vR(t){if(typeof document>"u")return 0;if(t||HP===void 0){var n=document.createElement("div");n.style.width="100%",n.style.height="200px";var o=document.createElement("div"),s=o.style;s.position="absolute",s.top="0",s.left="0",s.pointerEvents="none",s.visibility="hidden",s.width="200px",s.height="150px",s.overflow="hidden",o.appendChild(n),document.body.appendChild(o);var c=n.offsetWidth;o.style.overflow="scroll";var m=n.offsetWidth;c===m&&(m=o.clientWidth),document.body.removeChild(o),HP=c-m}return HP}function F8(t){var n=t.match(/^(.*)px$/),o=Number(n?.[1]);return Number.isNaN(o)?vR():o}function _R(t){if(typeof document>"u"||!t||!(t instanceof Element))return{width:0,height:0};var n=getComputedStyle(t,"::-webkit-scrollbar"),o=n.width,s=n.height;return{width:F8(o),height:F8(s)}}function npe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var ipe="rc-util-locker-".concat(Date.now()),N8=0;function ope(t){var n=!!t,o=E.useState(function(){return N8+=1,"".concat(ipe,"_").concat(N8)}),s=nr(o,1),c=s[0];zo(function(){if(n){var m=_R(document.body).width,v=npe();zm(`
html body {
  overflow-y: hidden;
  `.concat(v?"width: calc(100% - ".concat(m,"px);"):"",`
}`),c)}else $b(c);return function(){$b(c)}},[n,c])}var j8=!1;function ape(t){return typeof t=="boolean"&&(j8=t),j8}var V8=function(n){return n===!1?!1:!hl()||!n?null:typeof n=="string"?document.querySelector(n):typeof n=="function"?n():n},XO=E.forwardRef(function(t,n){var o=t.open,s=t.autoLock,c=t.getContainer;t.debug;var m=t.autoDestroy,v=m===void 0?!0:m,d=t.children,C=E.useState(o),S=nr(C,2),R=S[0],D=S[1],$=R||o;E.useEffect(function(){(v||o)&&D(o)},[o,v]);var H=E.useState(function(){return V8(c)}),Z=nr(H,2),X=Z[0],Q=Z[1];E.useEffect(function(){var Re=V8(c);Q(Re??null)});var G=rpe($&&!X),K=nr(G,2),Y=K[0],re=K[1],fe=X??Y;ope(s&&o&&hl()&&(fe===Y||fe===document.body));var me=null;if(d&&jh(d)&&n){var pe=d;me=pe.ref}var xe=Ey(me,n);if(!$||!hl()||X===void 0)return null;var Se=fe===!1||ape(),oe=d;return n&&(oe=E.cloneElement(d,{ref:xe})),E.createElement(MG.Provider,{value:re},Se?oe:Nh.createPortal(oe,fe))}),PG=E.createContext({});function spe(){var t=yt({},f0);return t.useId}var U8=0,H8=spe();const AG=H8?function(n){var o=H8();return n||o}:function(n){var o=E.useState("ssr-id"),s=nr(o,2),c=s[0],m=s[1];return E.useEffect(function(){var v=U8;U8+=1,m("rc_unique_".concat(v))},[]),n||c};function G8(t,n,o){var s=n;return!s&&o&&(s="".concat(t,"-").concat(o)),s}function q8(t,n){var o=t["page".concat(n?"Y":"X","Offset")],s="scroll".concat(n?"Top":"Left");if(typeof o!="number"){var c=t.document;o=c.documentElement[s],typeof o!="number"&&(o=c.body[s])}return o}function lpe(t){var n=t.getBoundingClientRect(),o={left:n.left,top:n.top},s=t.ownerDocument,c=s.defaultView||s.parentWindow;return o.left+=q8(c),o.top+=q8(c,!0),o}const cpe=E.memo(function(t){var n=t.children;return n},function(t,n){var o=n.shouldUpdate;return!o});var W8={width:0,height:0,overflow:"hidden",outline:"none"},RG=rr.forwardRef(function(t,n){var o=t.prefixCls,s=t.className,c=t.style,m=t.title,v=t.ariaId,d=t.footer,C=t.closable,S=t.closeIcon,R=t.onClose,D=t.children,$=t.bodyStyle,H=t.bodyProps,Z=t.modalRender,X=t.onMouseDown,Q=t.onMouseUp,G=t.holderRef,K=t.visible,Y=t.forceRender,re=t.width,fe=t.height,me=t.classNames,pe=t.styles,xe=rr.useContext(PG),Se=xe.panel,oe=Ey(G,Se),Re=E.useRef(),Ve=E.useRef();rr.useImperativeHandle(n,function(){return{focus:function(){var Ye;(Ye=Re.current)===null||Ye===void 0||Ye.focus()},changeActive:function(Ye){var qe=document,rt=qe.activeElement;Ye&&rt===Ve.current?Re.current.focus():!Ye&&rt===Re.current&&Ve.current.focus()}}});var Oe={};re!==void 0&&(Oe.width=re),fe!==void 0&&(Oe.height=fe);var _e;d&&(_e=rr.createElement("div",{className:Gt("".concat(o,"-footer"),me?.footer),style:yt({},pe?.footer)},d));var Fe;m&&(Fe=rr.createElement("div",{className:Gt("".concat(o,"-header"),me?.header),style:yt({},pe?.header)},rr.createElement("div",{className:"".concat(o,"-title"),id:v},m)));var Le;C&&(Le=rr.createElement("button",{type:"button",onClick:R,"aria-label":"Close",className:"".concat(o,"-close")},S||rr.createElement("span",{className:"".concat(o,"-close-x")})));var Me=rr.createElement("div",{className:Gt("".concat(o,"-content"),me?.content),style:pe?.content},Le,Fe,rr.createElement("div",Mr({className:Gt("".concat(o,"-body"),me?.body),style:yt(yt({},$),pe?.body)},H),D),_e);return rr.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":m?v:null,"aria-modal":"true",ref:oe,style:yt(yt({},c),Oe),className:Gt(o,s),onMouseDown:X,onMouseUp:Q},rr.createElement("div",{tabIndex:0,ref:Re,style:W8,"aria-hidden":"true"}),rr.createElement(cpe,{shouldUpdate:K||Y},Z?Z(Me):Me),rr.createElement("div",{tabIndex:0,ref:Ve,style:W8,"aria-hidden":"true"}))}),kG=E.forwardRef(function(t,n){var o=t.prefixCls,s=t.title,c=t.style,m=t.className,v=t.visible,d=t.forceRender,C=t.destroyOnClose,S=t.motionName,R=t.ariaId,D=t.onVisibleChanged,$=t.mousePosition,H=E.useRef(),Z=E.useState(),X=nr(Z,2),Q=X[0],G=X[1],K={};Q&&(K.transformOrigin=Q);function Y(){var re=lpe(H.current);G($?"".concat($.x-re.left,"px ").concat($.y-re.top,"px"):"")}return E.createElement(Ud,{visible:v,onVisibleChanged:D,onAppearPrepare:Y,onEnterPrepare:Y,forceRender:d,motionName:S,removeOnLeave:C,ref:H},function(re,fe){var me=re.className,pe=re.style;return E.createElement(RG,Mr({},t,{ref:n,title:s,ariaId:R,prefixCls:o,holderRef:fe,style:yt(yt(yt({},pe),c),K),className:Gt(m,me)}))})});kG.displayName="Content";function upe(t){var n=t.prefixCls,o=t.style,s=t.visible,c=t.maskProps,m=t.motionName,v=t.className;return E.createElement(Ud,{key:"mask",visible:s,motionName:m,leavedClassName:"".concat(n,"-mask-hidden")},function(d,C){var S=d.className,R=d.style;return E.createElement("div",Mr({ref:C,style:yt(yt({},R),o),className:Gt("".concat(n,"-mask"),S,v)},c))})}function hpe(t){var n=t.prefixCls,o=n===void 0?"rc-dialog":n,s=t.zIndex,c=t.visible,m=c===void 0?!1:c,v=t.keyboard,d=v===void 0?!0:v,C=t.focusTriggerAfterClose,S=C===void 0?!0:C,R=t.wrapStyle,D=t.wrapClassName,$=t.wrapProps,H=t.onClose,Z=t.afterOpenChange,X=t.afterClose,Q=t.transitionName,G=t.animation,K=t.closable,Y=K===void 0?!0:K,re=t.mask,fe=re===void 0?!0:re,me=t.maskTransitionName,pe=t.maskAnimation,xe=t.maskClosable,Se=xe===void 0?!0:xe,oe=t.maskStyle,Re=t.maskProps,Ve=t.rootClassName,Oe=t.classNames,_e=t.styles,Fe=E.useRef(),Le=E.useRef(),Me=E.useRef(),Ce=E.useState(m),Ye=nr(Ce,2),qe=Ye[0],rt=Ye[1],Qe=AG();function St(){K5(Le.current,document.activeElement)||(Fe.current=document.activeElement)}function jt(){if(!K5(Le.current,document.activeElement)){var Pt;(Pt=Me.current)===null||Pt===void 0||Pt.focus()}}function Ot(Pt){if(Pt)jt();else{if(rt(!1),fe&&Fe.current&&S){try{Fe.current.focus({preventScroll:!0})}catch{}Fe.current=null}qe&&X?.()}Z?.(Pt)}function Tt(Pt){H?.(Pt)}var ct=E.useRef(!1),Ct=E.useRef(),kt=function(){clearTimeout(Ct.current),ct.current=!0},zt=function(){Ct.current=setTimeout(function(){ct.current=!1})},Nt=null;Se&&(Nt=function(Dt){ct.current?ct.current=!1:Le.current===Dt.target&&Tt(Dt)});function Rt(Pt){if(d&&Pt.keyCode===Or.ESC){Pt.stopPropagation(),Tt(Pt);return}m&&Pt.keyCode===Or.TAB&&Me.current.changeActive(!Pt.shiftKey)}return E.useEffect(function(){m&&(rt(!0),St())},[m]),E.useEffect(function(){return function(){clearTimeout(Ct.current)}},[]),E.createElement("div",Mr({className:Gt("".concat(o,"-root"),Ve)},Uh(t,{data:!0})),E.createElement(upe,{prefixCls:o,visible:fe&&m,motionName:G8(o,me,pe),style:yt(yt({zIndex:s},oe),_e?.mask),maskProps:Re,className:Oe?.mask}),E.createElement("div",Mr({tabIndex:-1,onKeyDown:Rt,className:Gt("".concat(o,"-wrap"),D,Oe?.wrapper),ref:Le,onClick:Nt,style:yt(yt(yt({zIndex:s},R),_e?.wrapper),{},{display:qe?null:"none"})},$),E.createElement(kG,Mr({},t,{onMouseDown:kt,onMouseUp:zt,ref:Me,closable:Y,ariaId:Qe,prefixCls:o,visible:m&&qe,onClose:Tt,onVisibleChanged:Ot,motionName:G8(o,Q,G)}))))}var OG=function(n){var o=n.visible,s=n.getContainer,c=n.forceRender,m=n.destroyOnClose,v=m===void 0?!1:m,d=n.afterClose,C=n.panelRef,S=E.useState(o),R=nr(S,2),D=R[0],$=R[1],H=E.useMemo(function(){return{panel:C}},[C]);return E.useEffect(function(){o&&$(!0)},[o]),!c&&v&&!D?null:E.createElement(PG.Provider,{value:H},E.createElement(XO,{open:o||c||D,autoDestroy:!1,getContainer:s,autoLock:o||D},E.createElement(hpe,Mr({},n,{destroyOnClose:v,afterClose:function(){d?.(),$(!1)}}))))};OG.displayName="Dialog";function dpe(t,n,o){return typeof t=="boolean"?t:n===void 0?!!o:n!==!1&&n!==null}function zG(t,n,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:rr.createElement(cw,null),c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(!dpe(t,n,c))return[!1,null];const v=typeof n=="boolean"||n===void 0||n===null?s:n;return[!0,o?o(v):v]}var DG=function(n){if(hl()&&window.document.documentElement){var o=Array.isArray(n)?n:[n],s=window.document.documentElement;return o.some(function(c){return c in s.style})}return!1},fpe=function(n,o){if(!DG(n))return!1;var s=document.createElement("div"),c=s.style[n];return s.style[n]=o,s.style[n]!==c};function ppe(t,n){return!Array.isArray(t)&&n!==void 0?fpe(t,n):DG(t)}const mpe=()=>hl()&&window.document.documentElement;var oy="RC_FORM_INTERNAL_HOOKS",oa=function(){Ua(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Bm=E.createContext({getFieldValue:oa,getFieldsValue:oa,getFieldError:oa,getFieldWarning:oa,getFieldsError:oa,isFieldsTouched:oa,isFieldTouched:oa,isFieldValidating:oa,isFieldsValidating:oa,resetFields:oa,setFields:oa,setFieldValue:oa,setFieldsValue:oa,validateFields:oa,submit:oa,getInternalHooks:function(){return oa(),{dispatch:oa,initEntityValue:oa,registerField:oa,useSubscribe:oa,setInitialValues:oa,destroyForm:oa,setCallbacks:oa,registerWatch:oa,getFields:oa,setValidateMessages:oa,setPreserve:oa,getInitialValue:oa}}}),n0=E.createContext(null);function xR(t){return t==null?[]:Array.isArray(t)?t:[t]}function gpe(t){return t&&!!t._init}function ay(){return ay=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},ay.apply(this,arguments)}function ype(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,Wb(t,n)}function bR(t){return bR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},bR(t)}function Wb(t,n){return Wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,c){return s.__proto__=c,s},Wb(t,n)}function vpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function YE(t,n,o){return vpe()?YE=Reflect.construct.bind():YE=function(c,m,v){var d=[null];d.push.apply(d,m);var C=Function.bind.apply(c,d),S=new C;return v&&Wb(S,v.prototype),S},YE.apply(null,arguments)}function _pe(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function wR(t){var n=typeof Map=="function"?new Map:void 0;return wR=function(s){if(s===null||!_pe(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(s))return n.get(s);n.set(s,c)}function c(){return YE(s,arguments,bR(this).constructor)}return c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Wb(c,s)},wR(t)}var xpe=/%[sdj%]/g,bpe=function(){};function SR(t){if(!t||!t.length)return null;var n={};return t.forEach(function(o){var s=o.field;n[s]=n[s]||[],n[s].push(o)}),n}function yu(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];var c=0,m=o.length;if(typeof t=="function")return t.apply(null,o);if(typeof t=="string"){var v=t.replace(xpe,function(d){if(d==="%%")return"%";if(c>=m)return d;switch(d){case"%s":return String(o[c++]);case"%d":return Number(o[c++]);case"%j":try{return JSON.stringify(o[c++])}catch{return"[Circular]"}break;default:return d}});return v}return t}function wpe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ks(t,n){return!!(t==null||n==="array"&&Array.isArray(t)&&!t.length||wpe(n)&&typeof t=="string"&&!t)}function Spe(t,n,o){var s=[],c=0,m=t.length;function v(d){s.push.apply(s,d||[]),c++,c===m&&o(s)}t.forEach(function(d){n(d,v)})}function K8(t,n,o){var s=0,c=t.length;function m(v){if(v&&v.length){o(v);return}var d=s;s=s+1,d<c?n(t[d],m):o([])}m([])}function Cpe(t){var n=[];return Object.keys(t).forEach(function(o){n.push.apply(n,t[o]||[])}),n}var Z8=function(t){ype(n,t);function n(o,s){var c;return c=t.call(this,"Async Validation Error")||this,c.errors=o,c.fields=s,c}return n}(wR(Error));function Epe(t,n,o,s,c){if(n.first){var m=new Promise(function($,H){var Z=function(G){return s(G),G.length?H(new Z8(G,SR(G))):$(c)},X=Cpe(t);K8(X,o,Z)});return m.catch(function($){return $}),m}var v=n.firstFields===!0?Object.keys(t):n.firstFields||[],d=Object.keys(t),C=d.length,S=0,R=[],D=new Promise(function($,H){var Z=function(Q){if(R.push.apply(R,Q),S++,S===C)return s(R),R.length?H(new Z8(R,SR(R))):$(c)};d.length||(s(R),$(c)),d.forEach(function(X){var Q=t[X];v.indexOf(X)!==-1?K8(Q,o,Z):Spe(Q,o,Z)})});return D.catch(function($){return $}),D}function Tpe(t){return!!(t&&t.message!==void 0)}function Ipe(t,n){for(var o=t,s=0;s<n.length;s++){if(o==null)return o;o=o[n[s]]}return o}function X8(t,n){return function(o){var s;return t.fullFields?s=Ipe(n,t.fullFields):s=n[o.field||t.fullField],Tpe(o)?(o.field=o.field||t.fullField,o.fieldValue=s,o):{message:typeof o=="function"?o():o,fieldValue:s,field:o.field||t.fullField}}}function Y8(t,n){if(n){for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];typeof s=="object"&&typeof t[o]=="object"?t[o]=ay({},t[o],s):t[o]=s}}return t}var LG=function(n,o,s,c,m,v){n.required&&(!s.hasOwnProperty(n.field)||Ks(o,v||n.type))&&c.push(yu(m.messages.required,n.fullField))},Mpe=function(n,o,s,c,m){(/^\s+$/.test(o)||o==="")&&c.push(yu(m.messages.whitespace,n.fullField))},mE,Ppe=function(){if(mE)return mE;var t="[a-fA-F\\d:]",n=function(re){return re&&re.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",c=(`
(?:
(?:`+s+":){7}(?:"+s+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+s+":){6}(?:"+o+"|:"+s+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+s+":){5}(?::"+o+"|(?::"+s+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+s+":){4}(?:(?::"+s+"){0,1}:"+o+"|(?::"+s+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+s+":){3}(?:(?::"+s+"){0,2}:"+o+"|(?::"+s+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+s+":){2}(?:(?::"+s+"){0,3}:"+o+"|(?::"+s+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+s+":){1}(?:(?::"+s+"){0,4}:"+o+"|(?::"+s+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+s+"){0,5}:"+o+"|(?::"+s+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),m=new RegExp("(?:^"+o+"$)|(?:^"+c+"$)"),v=new RegExp("^"+o+"$"),d=new RegExp("^"+c+"$"),C=function(re){return re&&re.exact?m:new RegExp("(?:"+n(re)+o+n(re)+")|(?:"+n(re)+c+n(re)+")","g")};C.v4=function(Y){return Y&&Y.exact?v:new RegExp(""+n(Y)+o+n(Y),"g")},C.v6=function(Y){return Y&&Y.exact?d:new RegExp(""+n(Y)+c+n(Y),"g")};var S="(?:(?:[a-z]+:)?//)",R="(?:\\S+(?::\\S*)?@)?",D=C.v4().source,$=C.v6().source,H="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",Z="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",X="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",Q="(?::\\d{2,5})?",G='(?:[/?#][^\\s"]*)?',K="(?:"+S+"|www\\.)"+R+"(?:localhost|"+D+"|"+$+"|"+H+Z+X+")"+Q+G;return mE=new RegExp("(?:^"+K+"$)","i"),mE},J8={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Kx={integer:function(n){return Kx.number(n)&&parseInt(n,10)===n},float:function(n){return Kx.number(n)&&!Kx.integer(n)},array:function(n){return Array.isArray(n)},regexp:function(n){if(n instanceof RegExp)return!0;try{return!!new RegExp(n)}catch{return!1}},date:function(n){return typeof n.getTime=="function"&&typeof n.getMonth=="function"&&typeof n.getYear=="function"&&!isNaN(n.getTime())},number:function(n){return isNaN(n)?!1:typeof n=="number"},object:function(n){return typeof n=="object"&&!Kx.array(n)},method:function(n){return typeof n=="function"},email:function(n){return typeof n=="string"&&n.length<=320&&!!n.match(J8.email)},url:function(n){return typeof n=="string"&&n.length<=2048&&!!n.match(Ppe())},hex:function(n){return typeof n=="string"&&!!n.match(J8.hex)}},Ape=function(n,o,s,c,m){if(n.required&&o===void 0){LG(n,o,s,c,m);return}var v=["integer","float","array","regexp","object","method","email","number","date","url","hex"],d=n.type;v.indexOf(d)>-1?Kx[d](o)||c.push(yu(m.messages.types[d],n.fullField,n.type)):d&&typeof o!==n.type&&c.push(yu(m.messages.types[d],n.fullField,n.type))},Rpe=function(n,o,s,c,m){var v=typeof n.len=="number",d=typeof n.min=="number",C=typeof n.max=="number",S=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,R=o,D=null,$=typeof o=="number",H=typeof o=="string",Z=Array.isArray(o);if($?D="number":H?D="string":Z&&(D="array"),!D)return!1;Z&&(R=o.length),H&&(R=o.replace(S,"_").length),v?R!==n.len&&c.push(yu(m.messages[D].len,n.fullField,n.len)):d&&!C&&R<n.min?c.push(yu(m.messages[D].min,n.fullField,n.min)):C&&!d&&R>n.max?c.push(yu(m.messages[D].max,n.fullField,n.max)):d&&C&&(R<n.min||R>n.max)&&c.push(yu(m.messages[D].range,n.fullField,n.min,n.max))},Jv="enum",kpe=function(n,o,s,c,m){n[Jv]=Array.isArray(n[Jv])?n[Jv]:[],n[Jv].indexOf(o)===-1&&c.push(yu(m.messages[Jv],n.fullField,n[Jv].join(", ")))},Ope=function(n,o,s,c,m){if(n.pattern){if(n.pattern instanceof RegExp)n.pattern.lastIndex=0,n.pattern.test(o)||c.push(yu(m.messages.pattern.mismatch,n.fullField,o,n.pattern));else if(typeof n.pattern=="string"){var v=new RegExp(n.pattern);v.test(o)||c.push(yu(m.messages.pattern.mismatch,n.fullField,o,n.pattern))}}},fo={required:LG,whitespace:Mpe,type:Ape,range:Rpe,enum:kpe,pattern:Ope},zpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o,"string")&&!n.required)return s();fo.required(n,o,c,v,m,"string"),Ks(o,"string")||(fo.type(n,o,c,v,m),fo.range(n,o,c,v,m),fo.pattern(n,o,c,v,m),n.whitespace===!0&&fo.whitespace(n,o,c,v,m))}s(v)},Dpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),o!==void 0&&fo.type(n,o,c,v,m)}s(v)},Lpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(o===""&&(o=void 0),Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),o!==void 0&&(fo.type(n,o,c,v,m),fo.range(n,o,c,v,m))}s(v)},$pe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),o!==void 0&&fo.type(n,o,c,v,m)}s(v)},Bpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),Ks(o)||fo.type(n,o,c,v,m)}s(v)},Fpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),o!==void 0&&(fo.type(n,o,c,v,m),fo.range(n,o,c,v,m))}s(v)},Npe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),o!==void 0&&(fo.type(n,o,c,v,m),fo.range(n,o,c,v,m))}s(v)},jpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(o==null&&!n.required)return s();fo.required(n,o,c,v,m,"array"),o!=null&&(fo.type(n,o,c,v,m),fo.range(n,o,c,v,m))}s(v)},Vpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),o!==void 0&&fo.type(n,o,c,v,m)}s(v)},Upe="enum",Hpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m),o!==void 0&&fo[Upe](n,o,c,v,m)}s(v)},Gpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o,"string")&&!n.required)return s();fo.required(n,o,c,v,m),Ks(o,"string")||fo.pattern(n,o,c,v,m)}s(v)},qpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o,"date")&&!n.required)return s();if(fo.required(n,o,c,v,m),!Ks(o,"date")){var C;o instanceof Date?C=o:C=new Date(o),fo.type(n,C,c,v,m),C&&fo.range(n,C.getTime(),c,v,m)}}s(v)},Wpe=function(n,o,s,c,m){var v=[],d=Array.isArray(o)?"array":typeof o;fo.required(n,o,c,v,m,d),s(v)},GP=function(n,o,s,c,m){var v=n.type,d=[],C=n.required||!n.required&&c.hasOwnProperty(n.field);if(C){if(Ks(o,v)&&!n.required)return s();fo.required(n,o,c,d,m,v),Ks(o,v)||fo.type(n,o,c,d,m)}s(d)},Kpe=function(n,o,s,c,m){var v=[],d=n.required||!n.required&&c.hasOwnProperty(n.field);if(d){if(Ks(o)&&!n.required)return s();fo.required(n,o,c,v,m)}s(v)},ub={string:zpe,method:Dpe,number:Lpe,boolean:$pe,regexp:Bpe,integer:Fpe,float:Npe,array:jpe,object:Vpe,enum:Hpe,pattern:Gpe,date:qpe,url:GP,hex:GP,email:GP,required:Wpe,any:Kpe};function CR(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var n=JSON.parse(JSON.stringify(this));return n.clone=this.clone,n}}}var ER=CR(),mw=function(){function t(o){this.rules=null,this._messages=ER,this.define(o)}var n=t.prototype;return n.define=function(s){var c=this;if(!s)throw new Error("Cannot configure a schema with no rules");if(typeof s!="object"||Array.isArray(s))throw new Error("Rules must be an object");this.rules={},Object.keys(s).forEach(function(m){var v=s[m];c.rules[m]=Array.isArray(v)?v:[v]})},n.messages=function(s){return s&&(this._messages=Y8(CR(),s)),this._messages},n.validate=function(s,c,m){var v=this;c===void 0&&(c={}),m===void 0&&(m=function(){});var d=s,C=c,S=m;if(typeof C=="function"&&(S=C,C={}),!this.rules||Object.keys(this.rules).length===0)return S&&S(null,d),Promise.resolve(d);function R(X){var Q=[],G={};function K(re){if(Array.isArray(re)){var fe;Q=(fe=Q).concat.apply(fe,re)}else Q.push(re)}for(var Y=0;Y<X.length;Y++)K(X[Y]);Q.length?(G=SR(Q),S(Q,G)):S(null,d)}if(C.messages){var D=this.messages();D===ER&&(D=CR()),Y8(D,C.messages),C.messages=D}else C.messages=this.messages();var $={},H=C.keys||Object.keys(this.rules);H.forEach(function(X){var Q=v.rules[X],G=d[X];Q.forEach(function(K){var Y=K;typeof Y.transform=="function"&&(d===s&&(d=ay({},d)),G=d[X]=Y.transform(G)),typeof Y=="function"?Y={validator:Y}:Y=ay({},Y),Y.validator=v.getValidationMethod(Y),Y.validator&&(Y.field=X,Y.fullField=Y.fullField||X,Y.type=v.getType(Y),$[X]=$[X]||[],$[X].push({rule:Y,value:G,source:d,field:X}))})});var Z={};return Epe($,C,function(X,Q){var G=X.rule,K=(G.type==="object"||G.type==="array")&&(typeof G.fields=="object"||typeof G.defaultField=="object");K=K&&(G.required||!G.required&&X.value),G.field=X.field;function Y(me,pe){return ay({},pe,{fullField:G.fullField+"."+me,fullFields:G.fullFields?[].concat(G.fullFields,[me]):[me]})}function re(me){me===void 0&&(me=[]);var pe=Array.isArray(me)?me:[me];!C.suppressWarning&&pe.length&&t.warning("async-validator:",pe),pe.length&&G.message!==void 0&&(pe=[].concat(G.message));var xe=pe.map(X8(G,d));if(C.first&&xe.length)return Z[G.field]=1,Q(xe);if(!K)Q(xe);else{if(G.required&&!X.value)return G.message!==void 0?xe=[].concat(G.message).map(X8(G,d)):C.error&&(xe=[C.error(G,yu(C.messages.required,G.field))]),Q(xe);var Se={};G.defaultField&&Object.keys(X.value).map(function(Ve){Se[Ve]=G.defaultField}),Se=ay({},Se,X.rule.fields);var oe={};Object.keys(Se).forEach(function(Ve){var Oe=Se[Ve],_e=Array.isArray(Oe)?Oe:[Oe];oe[Ve]=_e.map(Y.bind(null,Ve))});var Re=new t(oe);Re.messages(C.messages),X.rule.options&&(X.rule.options.messages=C.messages,X.rule.options.error=C.error),Re.validate(X.value,X.rule.options||C,function(Ve){var Oe=[];xe&&xe.length&&Oe.push.apply(Oe,xe),Ve&&Ve.length&&Oe.push.apply(Oe,Ve),Q(Oe.length?Oe:null)})}}var fe;if(G.asyncValidator)fe=G.asyncValidator(G,X.value,re,X.source,C);else if(G.validator){try{fe=G.validator(G,X.value,re,X.source,C)}catch(me){console.error?.(me),C.suppressValidatorError||setTimeout(function(){throw me},0),re(me.message)}fe===!0?re():fe===!1?re(typeof G.message=="function"?G.message(G.fullField||G.field):G.message||(G.fullField||G.field)+" fails"):fe instanceof Array?re(fe):fe instanceof Error&&re(fe.message)}fe&&fe.then&&fe.then(function(){return re()},function(me){return re(me)})},function(X){R(X)},d)},n.getType=function(s){if(s.type===void 0&&s.pattern instanceof RegExp&&(s.type="pattern"),typeof s.validator!="function"&&s.type&&!ub.hasOwnProperty(s.type))throw new Error(yu("Unknown rule type %s",s.type));return s.type||"string"},n.getValidationMethod=function(s){if(typeof s.validator=="function")return s.validator;var c=Object.keys(s),m=c.indexOf("message");return m!==-1&&c.splice(m,1),c.length===1&&c[0]==="required"?ub.required:ub[this.getType(s)]||void 0},t}();mw.register=function(n,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");ub[n]=o};mw.warning=bpe;mw.messages=ER;mw.validators=ub;var cu="'${name}' is not a valid ${type}",$G={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:cu,method:cu,array:cu,object:cu,number:cu,date:cu,boolean:cu,integer:cu,float:cu,regexp:cu,email:cu,url:cu,hex:cu},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Q8=mw;function Zpe(t,n){return t.replace(/\$\{\w+\}/g,function(o){var s=o.slice(2,-1);return n[s]})}var eN="CODE_LOGIC_ERROR";function TR(t,n,o,s,c){return IR.apply(this,arguments)}function IR(){return IR=Iy(uc().mark(function t(n,o,s,c,m){var v,d,C,S,R,D,$,H,Z;return uc().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return v=yt({},s),delete v.ruleIndex,Q8.warning=function(){},v.validator&&(d=v.validator,v.validator=function(){try{return d.apply(void 0,arguments)}catch(G){return console.error(G),Promise.reject(eN)}}),C=null,v&&v.type==="array"&&v.defaultField&&(C=v.defaultField,delete v.defaultField),S=new Q8(xt({},n,[v])),R=T_($G,c.validateMessages),S.messages(R),D=[],Q.prev=10,Q.next=13,Promise.resolve(S.validate(xt({},n,o),yt({},c)));case 13:Q.next=18;break;case 15:Q.prev=15,Q.t0=Q.catch(10),Q.t0.errors&&(D=Q.t0.errors.map(function(G,K){var Y=G.message,re=Y===eN?R.default:Y;return E.isValidElement(re)?E.cloneElement(re,{key:"error_".concat(K)}):re}));case 18:if(!(!D.length&&C)){Q.next=23;break}return Q.next=21,Promise.all(o.map(function(G,K){return TR("".concat(n,".").concat(K),G,C,c,m)}));case 21:return $=Q.sent,Q.abrupt("return",$.reduce(function(G,K){return[].concat(Pr(G),Pr(K))},[]));case 23:return H=yt(yt({},s),{},{name:n,enum:(s.enum||[]).join(", ")},m),Z=D.map(function(G){return typeof G=="string"?Zpe(G,H):G}),Q.abrupt("return",Z);case 26:case"end":return Q.stop()}},t,null,[[10,15]])})),IR.apply(this,arguments)}function Xpe(t,n,o,s,c,m){var v=t.join("."),d=o.map(function(R,D){var $=R.validator,H=yt(yt({},R),{},{ruleIndex:D});return $&&(H.validator=function(Z,X,Q){var G=!1,K=function(){for(var fe=arguments.length,me=new Array(fe),pe=0;pe<fe;pe++)me[pe]=arguments[pe];Promise.resolve().then(function(){Ua(!G,"Your validator function has already return a promise. `callback` will be ignored."),G||Q.apply(void 0,me)})},Y=$(Z,X,K);G=Y&&typeof Y.then=="function"&&typeof Y.catch=="function",Ua(G,"`callback` is deprecated. Please return a promise instead."),G&&Y.then(function(){Q()}).catch(function(re){Q(re||" ")})}),H}).sort(function(R,D){var $=R.warningOnly,H=R.ruleIndex,Z=D.warningOnly,X=D.ruleIndex;return!!$==!!Z?H-X:$?1:-1}),C;if(c===!0)C=new Promise(function(){var R=Iy(uc().mark(function D($,H){var Z,X,Q;return uc().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:Z=0;case 1:if(!(Z<d.length)){K.next=12;break}return X=d[Z],K.next=5,TR(v,n,X,s,m);case 5:if(Q=K.sent,!Q.length){K.next=9;break}return H([{errors:Q,rule:X}]),K.abrupt("return");case 9:Z+=1,K.next=1;break;case 12:$([]);case 13:case"end":return K.stop()}},D)}));return function(D,$){return R.apply(this,arguments)}}());else{var S=d.map(function(R){return TR(v,n,R,s,m).then(function(D){return{errors:D,rule:R}})});C=(c?Jpe(S):Ype(S)).then(function(R){return Promise.reject(R)})}return C.catch(function(R){return R}),C}function Ype(t){return MR.apply(this,arguments)}function MR(){return MR=Iy(uc().mark(function t(n){return uc().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.all(n).then(function(c){var m,v=(m=[]).concat.apply(m,Pr(c));return v}));case 1:case"end":return s.stop()}},t)})),MR.apply(this,arguments)}function Jpe(t){return PR.apply(this,arguments)}function PR(){return PR=Iy(uc().mark(function t(n){var o;return uc().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=0,c.abrupt("return",new Promise(function(m){n.forEach(function(v){v.then(function(d){d.errors.length&&m([d]),o+=1,o===n.length&&m([])})})}));case 2:case"end":return c.stop()}},t)})),PR.apply(this,arguments)}function xs(t){return xR(t)}function tN(t,n){var o={};return n.forEach(function(s){var c=Yu(t,s);o=Ah(o,s,c)}),o}function F_(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(s){return BG(n,s,o)})}function BG(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!n||!o&&t.length!==n.length?!1:n.every(function(s,c){return t[c]===s})}function Qpe(t,n){if(t===n)return!0;if(!t&&n||t&&!n||!t||!n||Ei(t)!=="object"||Ei(n)!=="object")return!1;var o=Object.keys(t),s=Object.keys(n),c=new Set([].concat(o,s));return Pr(c).every(function(m){var v=t[m],d=n[m];return typeof v=="function"&&typeof d=="function"?!0:v===d})}function eme(t){var n=arguments.length<=1?void 0:arguments[1];return n&&n.target&&Ei(n.target)==="object"&&t in n.target?n.target[t]:n}function rN(t,n,o){var s=t.length;if(n<0||n>=s||o<0||o>=s)return t;var c=t[n],m=n-o;return m>0?[].concat(Pr(t.slice(0,o)),[c],Pr(t.slice(o,n)),Pr(t.slice(n+1,s))):m<0?[].concat(Pr(t.slice(0,n)),Pr(t.slice(n+1,o+1)),[c],Pr(t.slice(o+1,s))):t}var tme=["name"],Vu=[];function nN(t,n,o,s,c,m){return typeof t=="function"?t(n,o,"source"in m?{source:m.source}:{}):s!==c}var YO=function(t){Wf(o,t);var n=Kf(o);function o(s){var c;if(Il(this,o),c=n.call(this,s),xt(Gi(c),"state",{resetCount:0}),xt(Gi(c),"cancelRegisterFunc",null),xt(Gi(c),"mounted",!1),xt(Gi(c),"touched",!1),xt(Gi(c),"dirty",!1),xt(Gi(c),"validatePromise",void 0),xt(Gi(c),"prevValidating",void 0),xt(Gi(c),"errors",Vu),xt(Gi(c),"warnings",Vu),xt(Gi(c),"cancelRegister",function(){var C=c.props,S=C.preserve,R=C.isListField,D=C.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(R,S,xs(D)),c.cancelRegisterFunc=null}),xt(Gi(c),"getNamePath",function(){var C=c.props,S=C.name,R=C.fieldContext,D=R.prefixName,$=D===void 0?[]:D;return S!==void 0?[].concat(Pr($),Pr(S)):[]}),xt(Gi(c),"getRules",function(){var C=c.props,S=C.rules,R=S===void 0?[]:S,D=C.fieldContext;return R.map(function($){return typeof $=="function"?$(D):$})}),xt(Gi(c),"refresh",function(){c.mounted&&c.setState(function(C){var S=C.resetCount;return{resetCount:S+1}})}),xt(Gi(c),"metaCache",null),xt(Gi(c),"triggerMetaEvent",function(C){var S=c.props.onMetaChange;if(S){var R=yt(yt({},c.getMeta()),{},{destroy:C});Vh(c.metaCache,R)||S(R),c.metaCache=R}else c.metaCache=null}),xt(Gi(c),"onStoreChange",function(C,S,R){var D=c.props,$=D.shouldUpdate,H=D.dependencies,Z=H===void 0?[]:H,X=D.onReset,Q=R.store,G=c.getNamePath(),K=c.getValue(C),Y=c.getValue(Q),re=S&&F_(S,G);switch(R.type==="valueUpdate"&&R.source==="external"&&K!==Y&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=Vu,c.warnings=Vu,c.triggerMetaEvent()),R.type){case"reset":if(!S||re){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=Vu,c.warnings=Vu,c.triggerMetaEvent(),X?.(),c.refresh();return}break;case"remove":{if($){c.reRender();return}break}case"setField":{var fe=R.data;if(re){"touched"in fe&&(c.touched=fe.touched),"validating"in fe&&!("originRCField"in fe)&&(c.validatePromise=fe.validating?Promise.resolve([]):null),"errors"in fe&&(c.errors=fe.errors||Vu),"warnings"in fe&&(c.warnings=fe.warnings||Vu),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in fe&&F_(S,G,!0)){c.reRender();return}if($&&!G.length&&nN($,C,Q,K,Y,R)){c.reRender();return}break}case"dependenciesUpdate":{var me=Z.map(xs);if(me.some(function(pe){return F_(R.relatedFields,pe)})){c.reRender();return}break}default:if(re||(!Z.length||G.length||$)&&nN($,C,Q,K,Y,R)){c.reRender();return}break}$===!0&&c.reRender()}),xt(Gi(c),"validateRules",function(C){var S=c.getNamePath(),R=c.getValue(),D=C||{},$=D.triggerName,H=D.validateOnly,Z=H===void 0?!1:H,X=Promise.resolve().then(Iy(uc().mark(function Q(){var G,K,Y,re,fe,me,pe;return uc().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(c.mounted){Se.next=2;break}return Se.abrupt("return",[]);case 2:if(G=c.props,K=G.validateFirst,Y=K===void 0?!1:K,re=G.messageVariables,fe=G.validateDebounce,me=c.getRules(),$&&(me=me.filter(function(oe){return oe}).filter(function(oe){var Re=oe.validateTrigger;if(!Re)return!0;var Ve=xR(Re);return Ve.includes($)})),!(fe&&$)){Se.next=10;break}return Se.next=8,new Promise(function(oe){setTimeout(oe,fe)});case 8:if(c.validatePromise===X){Se.next=10;break}return Se.abrupt("return",[]);case 10:return pe=Xpe(S,R,me,C,Y,re),pe.catch(function(oe){return oe}).then(function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vu;if(c.validatePromise===X){var Re;c.validatePromise=null;var Ve=[],Oe=[];(Re=oe.forEach)===null||Re===void 0||Re.call(oe,function(_e){var Fe=_e.rule.warningOnly,Le=_e.errors,Me=Le===void 0?Vu:Le;Fe?Oe.push.apply(Oe,Pr(Me)):Ve.push.apply(Ve,Pr(Me))}),c.errors=Ve,c.warnings=Oe,c.triggerMetaEvent(),c.reRender()}}),Se.abrupt("return",pe);case 13:case"end":return Se.stop()}},Q)})));return Z||(c.validatePromise=X,c.dirty=!0,c.errors=Vu,c.warnings=Vu,c.triggerMetaEvent(),c.reRender()),X}),xt(Gi(c),"isFieldValidating",function(){return!!c.validatePromise}),xt(Gi(c),"isFieldTouched",function(){return c.touched}),xt(Gi(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var C=c.props.fieldContext,S=C.getInternalHooks(oy),R=S.getInitialValue;return R(c.getNamePath())!==void 0}),xt(Gi(c),"getErrors",function(){return c.errors}),xt(Gi(c),"getWarnings",function(){return c.warnings}),xt(Gi(c),"isListField",function(){return c.props.isListField}),xt(Gi(c),"isList",function(){return c.props.isList}),xt(Gi(c),"isPreserve",function(){return c.props.preserve}),xt(Gi(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var C={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return C}),xt(Gi(c),"getOnlyChild",function(C){if(typeof C=="function"){var S=c.getMeta();return yt(yt({},c.getOnlyChild(C(c.getControlled(),S,c.props.fieldContext))),{},{isFunction:!0})}var R=$c(C);return R.length!==1||!E.isValidElement(R[0])?{child:R,isFunction:!1}:{child:R[0],isFunction:!1}}),xt(Gi(c),"getValue",function(C){var S=c.props.fieldContext.getFieldsValue,R=c.getNamePath();return Yu(C||S(!0),R)}),xt(Gi(c),"getControlled",function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=c.props,R=S.trigger,D=S.validateTrigger,$=S.getValueFromEvent,H=S.normalize,Z=S.valuePropName,X=S.getValueProps,Q=S.fieldContext,G=D!==void 0?D:Q.validateTrigger,K=c.getNamePath(),Y=Q.getInternalHooks,re=Q.getFieldsValue,fe=Y(oy),me=fe.dispatch,pe=c.getValue(),xe=X||function(Ve){return xt({},Z,Ve)},Se=C[R],oe=yt(yt({},C),xe(pe));oe[R]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var Ve,Oe=arguments.length,_e=new Array(Oe),Fe=0;Fe<Oe;Fe++)_e[Fe]=arguments[Fe];$?Ve=$.apply(void 0,_e):Ve=eme.apply(void 0,[Z].concat(_e)),H&&(Ve=H(Ve,pe,re(!0))),me({type:"updateValue",namePath:K,value:Ve}),Se&&Se.apply(void 0,_e)};var Re=xR(G||[]);return Re.forEach(function(Ve){var Oe=oe[Ve];oe[Ve]=function(){Oe&&Oe.apply(void 0,arguments);var _e=c.props.rules;_e&&_e.length&&me({type:"validateField",namePath:K,triggerName:Ve})}}),oe}),s.fieldContext){var m=s.fieldContext.getInternalHooks,v=m(oy),d=v.initEntityValue;d(Gi(c))}return c}return Ml(o,[{key:"componentDidMount",value:function(){var c=this.props,m=c.shouldUpdate,v=c.fieldContext;if(this.mounted=!0,v){var d=v.getInternalHooks,C=d(oy),S=C.registerField;this.cancelRegisterFunc=S(this)}m===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,m=this.props.children,v=this.getOnlyChild(m),d=v.child,C=v.isFunction,S;return C?S=d:E.isValidElement(d)?S=E.cloneElement(d,this.getControlled(d.props)):(Ua(!d,"`children` of Field is not validate ReactElement."),S=d),E.createElement(E.Fragment,{key:c},S)}}]),o}(E.Component);xt(YO,"contextType",Bm);xt(YO,"defaultProps",{trigger:"onChange",valuePropName:"value"});function nM(t){var n=t.name,o=xi(t,tme),s=E.useContext(Bm),c=E.useContext(n0),m=n!==void 0?xs(n):void 0,v="keep";return o.isListField||(v="_".concat((m||[]).join("_"))),E.createElement(YO,Mr({key:v,name:m,isListField:!!c},o,{fieldContext:s}))}function JO(t){var n=t.name,o=t.initialValue,s=t.children,c=t.rules,m=t.validateTrigger,v=t.isListField,d=E.useContext(Bm),C=E.useContext(n0),S=E.useRef({keys:[],id:0}),R=S.current,D=E.useMemo(function(){var X=xs(d.prefixName)||[];return[].concat(Pr(X),Pr(xs(n)))},[d.prefixName,n]),$=E.useMemo(function(){return yt(yt({},d),{},{prefixName:D})},[d,D]),H=E.useMemo(function(){return{getKey:function(Q){var G=D.length,K=Q[G];return[R.keys[K],Q.slice(G+1)]}}},[D]);if(typeof s!="function")return Ua(!1,"Form.List only accepts function as children."),null;var Z=function(Q,G,K){var Y=K.source;return Y==="internal"?!1:Q!==G};return E.createElement(n0.Provider,{value:H},E.createElement(Bm.Provider,{value:$},E.createElement(nM,{name:[],shouldUpdate:Z,rules:c,validateTrigger:m,initialValue:o,isList:!0,isListField:v??!!C},function(X,Q){var G=X.value,K=G===void 0?[]:G,Y=X.onChange,re=d.getFieldValue,fe=function(){var Se=re(D||[]);return Se||[]},me={add:function(Se,oe){var Re=fe();oe>=0&&oe<=Re.length?(R.keys=[].concat(Pr(R.keys.slice(0,oe)),[R.id],Pr(R.keys.slice(oe))),Y([].concat(Pr(Re.slice(0,oe)),[Se],Pr(Re.slice(oe))))):(R.keys=[].concat(Pr(R.keys),[R.id]),Y([].concat(Pr(Re),[Se]))),R.id+=1},remove:function(Se){var oe=fe(),Re=new Set(Array.isArray(Se)?Se:[Se]);Re.size<=0||(R.keys=R.keys.filter(function(Ve,Oe){return!Re.has(Oe)}),Y(oe.filter(function(Ve,Oe){return!Re.has(Oe)})))},move:function(Se,oe){if(Se!==oe){var Re=fe();Se<0||Se>=Re.length||oe<0||oe>=Re.length||(R.keys=rN(R.keys,Se,oe),Y(rN(Re,Se,oe)))}}},pe=K||[];return Array.isArray(pe)||(pe=[]),s(pe.map(function(xe,Se){var oe=R.keys[Se];return oe===void 0&&(R.keys[Se]=R.id,oe=R.keys[Se],R.id+=1),{name:Se,key:oe,isListField:!0}}),me,Q)})))}function rme(t){var n=!1,o=t.length,s=[];return t.length?new Promise(function(c,m){t.forEach(function(v,d){v.catch(function(C){return n=!0,C}).then(function(C){o-=1,s[d]=C,!(o>0)&&(n&&m(s),c(s))})})}):Promise.resolve([])}var FG="__@field_split__";function qP(t){return t.map(function(n){return"".concat(Ei(n),":").concat(n)}).join(FG)}var Qv=function(){function t(){Il(this,t),xt(this,"kvs",new Map)}return Ml(t,[{key:"set",value:function(o,s){this.kvs.set(qP(o),s)}},{key:"get",value:function(o){return this.kvs.get(qP(o))}},{key:"update",value:function(o,s){var c=this.get(o),m=s(c);m?this.set(o,m):this.delete(o)}},{key:"delete",value:function(o){this.kvs.delete(qP(o))}},{key:"map",value:function(o){return Pr(this.kvs.entries()).map(function(s){var c=nr(s,2),m=c[0],v=c[1],d=m.split(FG);return o({key:d.map(function(C){var S=C.match(/^([^:]*):(.*)$/),R=nr(S,3),D=R[1],$=R[2];return D==="number"?Number($):$}),value:v})})}},{key:"toJSON",value:function(){var o={};return this.map(function(s){var c=s.key,m=s.value;return o[c.join(".")]=m,null}),o}}]),t}(),nme=["name"],ime=Ml(function t(n){var o=this;Il(this,t),xt(this,"formHooked",!1),xt(this,"forceRootUpdate",void 0),xt(this,"subscribable",!0),xt(this,"store",{}),xt(this,"fieldEntities",[]),xt(this,"initialValues",{}),xt(this,"callbacks",{}),xt(this,"validateMessages",null),xt(this,"preserve",null),xt(this,"lastValidatePromise",null),xt(this,"getForm",function(){return{getFieldValue:o.getFieldValue,getFieldsValue:o.getFieldsValue,getFieldError:o.getFieldError,getFieldWarning:o.getFieldWarning,getFieldsError:o.getFieldsError,isFieldsTouched:o.isFieldsTouched,isFieldTouched:o.isFieldTouched,isFieldValidating:o.isFieldValidating,isFieldsValidating:o.isFieldsValidating,resetFields:o.resetFields,setFields:o.setFields,setFieldValue:o.setFieldValue,setFieldsValue:o.setFieldsValue,validateFields:o.validateFields,submit:o.submit,_init:!0,getInternalHooks:o.getInternalHooks}}),xt(this,"getInternalHooks",function(s){return s===oy?(o.formHooked=!0,{dispatch:o.dispatch,initEntityValue:o.initEntityValue,registerField:o.registerField,useSubscribe:o.useSubscribe,setInitialValues:o.setInitialValues,destroyForm:o.destroyForm,setCallbacks:o.setCallbacks,setValidateMessages:o.setValidateMessages,getFields:o.getFields,setPreserve:o.setPreserve,getInitialValue:o.getInitialValue,registerWatch:o.registerWatch}):(Ua(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),xt(this,"useSubscribe",function(s){o.subscribable=s}),xt(this,"prevWithoutPreserves",null),xt(this,"setInitialValues",function(s,c){if(o.initialValues=s||{},c){var m,v=T_(s,o.store);(m=o.prevWithoutPreserves)===null||m===void 0||m.map(function(d){var C=d.key;v=Ah(v,C,Yu(s,C))}),o.prevWithoutPreserves=null,o.updateStore(v)}}),xt(this,"destroyForm",function(){var s=new Qv;o.getFieldEntities(!0).forEach(function(c){o.isMergedPreserve(c.isPreserve())||s.set(c.getNamePath(),!0)}),o.prevWithoutPreserves=s}),xt(this,"getInitialValue",function(s){var c=Yu(o.initialValues,s);return s.length?T_(c):c}),xt(this,"setCallbacks",function(s){o.callbacks=s}),xt(this,"setValidateMessages",function(s){o.validateMessages=s}),xt(this,"setPreserve",function(s){o.preserve=s}),xt(this,"watchList",[]),xt(this,"registerWatch",function(s){return o.watchList.push(s),function(){o.watchList=o.watchList.filter(function(c){return c!==s})}}),xt(this,"notifyWatch",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(o.watchList.length){var c=o.getFieldsValue(),m=o.getFieldsValue(!0);o.watchList.forEach(function(v){v(c,m,s)})}}),xt(this,"timeoutId",null),xt(this,"warningUnhooked",function(){}),xt(this,"updateStore",function(s){o.store=s}),xt(this,"getFieldEntities",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return s?o.fieldEntities.filter(function(c){return c.getNamePath().length}):o.fieldEntities}),xt(this,"getFieldsMap",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Qv;return o.getFieldEntities(s).forEach(function(m){var v=m.getNamePath();c.set(v,m)}),c}),xt(this,"getFieldEntitiesForNamePathList",function(s){if(!s)return o.getFieldEntities(!0);var c=o.getFieldsMap(!0);return s.map(function(m){var v=xs(m);return c.get(v)||{INVALIDATE_NAME_PATH:xs(m)}})}),xt(this,"getFieldsValue",function(s,c){o.warningUnhooked();var m,v,d;if(s===!0||Array.isArray(s)?(m=s,v=c):s&&Ei(s)==="object"&&(d=s.strict,v=s.filter),m===!0&&!v)return o.store;var C=o.getFieldEntitiesForNamePathList(Array.isArray(m)?m:null),S=[];return C.forEach(function(R){var D,$,H="INVALIDATE_NAME_PATH"in R?R.INVALIDATE_NAME_PATH:R.getNamePath();if(d){var Z,X;if((Z=(X=R).isList)!==null&&Z!==void 0&&Z.call(X))return}else if(!m&&(D=($=R).isListField)!==null&&D!==void 0&&D.call($))return;if(!v)S.push(H);else{var Q="getMeta"in R?R.getMeta():null;v(Q)&&S.push(H)}}),tN(o.store,S.map(xs))}),xt(this,"getFieldValue",function(s){o.warningUnhooked();var c=xs(s);return Yu(o.store,c)}),xt(this,"getFieldsError",function(s){o.warningUnhooked();var c=o.getFieldEntitiesForNamePathList(s);return c.map(function(m,v){return m&&!("INVALIDATE_NAME_PATH"in m)?{name:m.getNamePath(),errors:m.getErrors(),warnings:m.getWarnings()}:{name:xs(s[v]),errors:[],warnings:[]}})}),xt(this,"getFieldError",function(s){o.warningUnhooked();var c=xs(s),m=o.getFieldsError([c])[0];return m.errors}),xt(this,"getFieldWarning",function(s){o.warningUnhooked();var c=xs(s),m=o.getFieldsError([c])[0];return m.warnings}),xt(this,"isFieldsTouched",function(){o.warningUnhooked();for(var s=arguments.length,c=new Array(s),m=0;m<s;m++)c[m]=arguments[m];var v=c[0],d=c[1],C,S=!1;c.length===0?C=null:c.length===1?Array.isArray(v)?(C=v.map(xs),S=!1):(C=null,S=v):(C=v.map(xs),S=d);var R=o.getFieldEntities(!0),D=function(Q){return Q.isFieldTouched()};if(!C)return S?R.every(D):R.some(D);var $=new Qv;C.forEach(function(X){$.set(X,[])}),R.forEach(function(X){var Q=X.getNamePath();C.forEach(function(G){G.every(function(K,Y){return Q[Y]===K})&&$.update(G,function(K){return[].concat(Pr(K),[X])})})});var H=function(Q){return Q.some(D)},Z=$.map(function(X){var Q=X.value;return Q});return S?Z.every(H):Z.some(H)}),xt(this,"isFieldTouched",function(s){return o.warningUnhooked(),o.isFieldsTouched([s])}),xt(this,"isFieldsValidating",function(s){o.warningUnhooked();var c=o.getFieldEntities();if(!s)return c.some(function(v){return v.isFieldValidating()});var m=s.map(xs);return c.some(function(v){var d=v.getNamePath();return F_(m,d)&&v.isFieldValidating()})}),xt(this,"isFieldValidating",function(s){return o.warningUnhooked(),o.isFieldsValidating([s])}),xt(this,"resetWithFieldInitialValue",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Qv,m=o.getFieldEntities(!0);m.forEach(function(C){var S=C.props.initialValue,R=C.getNamePath();if(S!==void 0){var D=c.get(R)||new Set;D.add({entity:C,value:S}),c.set(R,D)}});var v=function(S){S.forEach(function(R){var D=R.props.initialValue;if(D!==void 0){var $=R.getNamePath(),H=o.getInitialValue($);if(H!==void 0)Ua(!1,"Form already set 'initialValues' with path '".concat($.join("."),"'. Field can not overwrite it."));else{var Z=c.get($);if(Z&&Z.size>1)Ua(!1,"Multiple Field with path '".concat($.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(Z){var X=o.getFieldValue($),Q=R.isListField();!Q&&(!s.skipExist||X===void 0)&&o.updateStore(Ah(o.store,$,Pr(Z)[0].value))}}}})},d;s.entities?d=s.entities:s.namePathList?(d=[],s.namePathList.forEach(function(C){var S=c.get(C);if(S){var R;(R=d).push.apply(R,Pr(Pr(S).map(function(D){return D.entity})))}})):d=m,v(d)}),xt(this,"resetFields",function(s){o.warningUnhooked();var c=o.store;if(!s){o.updateStore(T_(o.initialValues)),o.resetWithFieldInitialValue(),o.notifyObservers(c,null,{type:"reset"}),o.notifyWatch();return}var m=s.map(xs);m.forEach(function(v){var d=o.getInitialValue(v);o.updateStore(Ah(o.store,v,d))}),o.resetWithFieldInitialValue({namePathList:m}),o.notifyObservers(c,m,{type:"reset"}),o.notifyWatch(m)}),xt(this,"setFields",function(s){o.warningUnhooked();var c=o.store,m=[];s.forEach(function(v){var d=v.name,C=xi(v,nme),S=xs(d);m.push(S),"value"in C&&o.updateStore(Ah(o.store,S,C.value)),o.notifyObservers(c,[S],{type:"setField",data:v})}),o.notifyWatch(m)}),xt(this,"getFields",function(){var s=o.getFieldEntities(!0),c=s.map(function(m){var v=m.getNamePath(),d=m.getMeta(),C=yt(yt({},d),{},{name:v,value:o.getFieldValue(v)});return Object.defineProperty(C,"originRCField",{value:!0}),C});return c}),xt(this,"initEntityValue",function(s){var c=s.props.initialValue;if(c!==void 0){var m=s.getNamePath(),v=Yu(o.store,m);v===void 0&&o.updateStore(Ah(o.store,m,c))}}),xt(this,"isMergedPreserve",function(s){var c=s!==void 0?s:o.preserve;return c??!0}),xt(this,"registerField",function(s){o.fieldEntities.push(s);var c=s.getNamePath();if(o.notifyWatch([c]),s.props.initialValue!==void 0){var m=o.store;o.resetWithFieldInitialValue({entities:[s],skipExist:!0}),o.notifyObservers(m,[s.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(v,d){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(o.fieldEntities=o.fieldEntities.filter(function(D){return D!==s}),!o.isMergedPreserve(d)&&(!v||C.length>1)){var S=v?void 0:o.getInitialValue(c);if(c.length&&o.getFieldValue(c)!==S&&o.fieldEntities.every(function(D){return!BG(D.getNamePath(),c)})){var R=o.store;o.updateStore(Ah(R,c,S,!0)),o.notifyObservers(R,[c],{type:"remove"}),o.triggerDependenciesUpdate(R,c)}}o.notifyWatch([c])}}),xt(this,"dispatch",function(s){switch(s.type){case"updateValue":{var c=s.namePath,m=s.value;o.updateValue(c,m);break}case"validateField":{var v=s.namePath,d=s.triggerName;o.validateFields([v],{triggerName:d});break}}}),xt(this,"notifyObservers",function(s,c,m){if(o.subscribable){var v=yt(yt({},m),{},{store:o.getFieldsValue(!0)});o.getFieldEntities().forEach(function(d){var C=d.onStoreChange;C(s,c,v)})}else o.forceRootUpdate()}),xt(this,"triggerDependenciesUpdate",function(s,c){var m=o.getDependencyChildrenFields(c);return m.length&&o.validateFields(m),o.notifyObservers(s,m,{type:"dependenciesUpdate",relatedFields:[c].concat(Pr(m))}),m}),xt(this,"updateValue",function(s,c){var m=xs(s),v=o.store;o.updateStore(Ah(o.store,m,c)),o.notifyObservers(v,[m],{type:"valueUpdate",source:"internal"}),o.notifyWatch([m]);var d=o.triggerDependenciesUpdate(v,m),C=o.callbacks.onValuesChange;if(C){var S=tN(o.store,[m]);C(S,o.getFieldsValue())}o.triggerOnFieldsChange([m].concat(Pr(d)))}),xt(this,"setFieldsValue",function(s){o.warningUnhooked();var c=o.store;if(s){var m=T_(o.store,s);o.updateStore(m)}o.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),o.notifyWatch()}),xt(this,"setFieldValue",function(s,c){o.setFields([{name:s,value:c}])}),xt(this,"getDependencyChildrenFields",function(s){var c=new Set,m=[],v=new Qv;o.getFieldEntities().forEach(function(C){var S=C.props.dependencies;(S||[]).forEach(function(R){var D=xs(R);v.update(D,function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return $.add(C),$})})});var d=function C(S){var R=v.get(S)||new Set;R.forEach(function(D){if(!c.has(D)){c.add(D);var $=D.getNamePath();D.isFieldDirty()&&$.length&&(m.push($),C($))}})};return d(s),m}),xt(this,"triggerOnFieldsChange",function(s,c){var m=o.callbacks.onFieldsChange;if(m){var v=o.getFields();if(c){var d=new Qv;c.forEach(function(S){var R=S.name,D=S.errors;d.set(R,D)}),v.forEach(function(S){S.errors=d.get(S.name)||S.errors})}var C=v.filter(function(S){var R=S.name;return F_(s,R)});C.length&&m(C,v)}}),xt(this,"validateFields",function(s,c){o.warningUnhooked();var m,v;Array.isArray(s)||typeof s=="string"||typeof c=="string"?(m=s,v=c):v=s;var d=!!m,C=d?m.map(xs):[],S=[],R=String(Date.now()),D=new Set,$=v||{},H=$.recursive,Z=$.dirty;o.getFieldEntities(!0).forEach(function(K){if(d||C.push(K.getNamePath()),!(!K.props.rules||!K.props.rules.length)&&!(Z&&!K.isFieldDirty())){var Y=K.getNamePath();if(D.add(Y.join(R)),!d||F_(C,Y,H)){var re=K.validateRules(yt({validateMessages:yt(yt({},$G),o.validateMessages)},v));S.push(re.then(function(){return{name:Y,errors:[],warnings:[]}}).catch(function(fe){var me,pe=[],xe=[];return(me=fe.forEach)===null||me===void 0||me.call(fe,function(Se){var oe=Se.rule.warningOnly,Re=Se.errors;oe?xe.push.apply(xe,Pr(Re)):pe.push.apply(pe,Pr(Re))}),pe.length?Promise.reject({name:Y,errors:pe,warnings:xe}):{name:Y,errors:pe,warnings:xe}}))}}});var X=rme(S);o.lastValidatePromise=X,X.catch(function(K){return K}).then(function(K){var Y=K.map(function(re){var fe=re.name;return fe});o.notifyObservers(o.store,Y,{type:"validateFinish"}),o.triggerOnFieldsChange(Y,K)});var Q=X.then(function(){return o.lastValidatePromise===X?Promise.resolve(o.getFieldsValue(C)):Promise.reject([])}).catch(function(K){var Y=K.filter(function(re){return re&&re.errors.length});return Promise.reject({values:o.getFieldsValue(C),errorFields:Y,outOfDate:o.lastValidatePromise!==X})});Q.catch(function(K){return K});var G=C.filter(function(K){return D.has(K.join(R))});return o.triggerOnFieldsChange(G),Q}),xt(this,"submit",function(){o.warningUnhooked(),o.validateFields().then(function(s){var c=o.callbacks.onFinish;if(c)try{c(s)}catch(m){console.error(m)}}).catch(function(s){var c=o.callbacks.onFinishFailed;c&&c(s)})}),this.forceRootUpdate=n});function iM(t){var n=E.useRef(),o=E.useState({}),s=nr(o,2),c=s[1];if(!n.current)if(t)n.current=t;else{var m=function(){c({})},v=new ime(m);n.current=v.getForm()}return[n.current]}var AR=E.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),QO=function(n){var o=n.validateMessages,s=n.onFormChange,c=n.onFormFinish,m=n.children,v=E.useContext(AR),d=E.useRef({});return E.createElement(AR.Provider,{value:yt(yt({},v),{},{validateMessages:yt(yt({},v.validateMessages),o),triggerFormChange:function(S,R){s&&s(S,{changedFields:R,forms:d.current}),v.triggerFormChange(S,R)},triggerFormFinish:function(S,R){c&&c(S,{values:R,forms:d.current}),v.triggerFormFinish(S,R)},registerForm:function(S,R){S&&(d.current=yt(yt({},d.current),{},xt({},S,R))),v.registerForm(S,R)},unregisterForm:function(S){var R=yt({},d.current);delete R[S],d.current=R,v.unregisterForm(S)}})},m)},ome=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],ame=function(n,o){var s=n.name,c=n.initialValues,m=n.fields,v=n.form,d=n.preserve,C=n.children,S=n.component,R=S===void 0?"form":S,D=n.validateMessages,$=n.validateTrigger,H=$===void 0?"onChange":$,Z=n.onValuesChange,X=n.onFieldsChange,Q=n.onFinish,G=n.onFinishFailed,K=xi(n,ome),Y=E.useContext(AR),re=iM(v),fe=nr(re,1),me=fe[0],pe=me.getInternalHooks(oy),xe=pe.useSubscribe,Se=pe.setInitialValues,oe=pe.setCallbacks,Re=pe.setValidateMessages,Ve=pe.setPreserve,Oe=pe.destroyForm;E.useImperativeHandle(o,function(){return me}),E.useEffect(function(){return Y.registerForm(s,me),function(){Y.unregisterForm(s)}},[Y,me,s]),Re(yt(yt({},Y.validateMessages),D)),oe({onValuesChange:Z,onFieldsChange:function(Qe){if(Y.triggerFormChange(s,Qe),X){for(var St=arguments.length,jt=new Array(St>1?St-1:0),Ot=1;Ot<St;Ot++)jt[Ot-1]=arguments[Ot];X.apply(void 0,[Qe].concat(jt))}},onFinish:function(Qe){Y.triggerFormFinish(s,Qe),Q&&Q(Qe)},onFinishFailed:G}),Ve(d);var _e=E.useRef(null);Se(c,!_e.current),_e.current||(_e.current=!0),E.useEffect(function(){return Oe},[]);var Fe,Le=typeof C=="function";if(Le){var Me=me.getFieldsValue(!0);Fe=C(Me,me)}else Fe=C;xe(!Le);var Ce=E.useRef();E.useEffect(function(){Qpe(Ce.current||[],m||[])||me.setFields(m||[]),Ce.current=m},[m,me]);var Ye=E.useMemo(function(){return yt(yt({},me),{},{validateTrigger:H})},[me,H]),qe=E.createElement(n0.Provider,{value:null},E.createElement(Bm.Provider,{value:Ye},Fe));return R===!1?qe:E.createElement(R,Mr({},K,{onSubmit:function(Qe){Qe.preventDefault(),Qe.stopPropagation(),me.submit()},onReset:function(Qe){var St;Qe.preventDefault(),me.resetFields(),(St=K.onReset)===null||St===void 0||St.call(K,Qe)}}),qe)};function iN(t){try{return JSON.stringify(t)}catch{return Math.random()}}function ez(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var s=n[0],c=n[1],m=c===void 0?{}:c,v=gpe(m)?{form:m}:m,d=v.form,C=E.useState(),S=nr(C,2),R=S[0],D=S[1],$=E.useMemo(function(){return iN(R)},[R]),H=E.useRef($);H.current=$;var Z=E.useContext(Bm),X=d||Z,Q=X&&X._init,G=xs(s),K=E.useRef(G);return K.current=G,E.useEffect(function(){if(Q){var Y=X.getFieldsValue,re=X.getInternalHooks,fe=re(oy),me=fe.registerWatch,pe=function(Re,Ve){var Oe=v.preserve?Ve:Re;return typeof s=="function"?s(Oe):Yu(Oe,K.current)},xe=me(function(oe,Re){var Ve=pe(oe,Re),Oe=iN(Ve);H.current!==Oe&&(H.current=Oe,D(Ve))}),Se=pe(Y(),Y(!0));return R!==Se&&D(Se),xe}},[Q]),R}var sme=E.forwardRef(ame),My=sme;My.FormProvider=QO;My.Field=nM;My.List=JO;My.useForm=iM;My.useWatch=ez;const G3e=Object.freeze(Object.defineProperty({__proto__:null,Field:nM,FieldContext:Bm,FormProvider:QO,List:JO,ListContext:n0,default:My,useForm:iM,useWatch:ez},Symbol.toStringTag,{value:"Module"})),Gf=E.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),NG=E.createContext(null),jG=t=>{const n=Zs(t,["prefixCls"]);return E.createElement(QO,Object.assign({},n))},tz=E.createContext({prefixCls:""}),bu=E.createContext({}),RR=t=>{let{children:n,status:o,override:s}=t;const c=E.useContext(bu),m=E.useMemo(()=>{const v=Object.assign({},c);return s&&delete v.isFormItemInput,o&&(delete v.status,delete v.hasFeedback,delete v.feedbackIcon),v},[o,s,c]);return E.createElement(bu.Provider,{value:m},n)};function oN(){}const lme=E.createContext({add:oN,remove:oN});function cme(t){const n=E.useContext(lme),o=E.useRef();return ws(c=>{if(c){const m=t?c.querySelector(t):c;n.add(m),o.current=m}else n.remove(o.current)})}const ume=()=>{const{cancelButtonProps:t,cancelTextLocale:n,onCancel:o}=E.useContext(pw);return rr.createElement($m,Object.assign({onClick:o},t),n)},aN=ume,hme=()=>{const{confirmLoading:t,okButtonProps:n,okType:o,okTextLocale:s,onOk:c}=E.useContext(pw);return rr.createElement($m,Object.assign({},xG(o),{loading:t,onClick:c},n),s)},sN=hme;function VG(t,n){return rr.createElement("span",{className:`${t}-close-x`},n||rr.createElement(cw,{className:`${t}-close-icon`}))}const UG=t=>{const{okText:n,okType:o="primary",cancelText:s,confirmLoading:c,onOk:m,onCancel:v,okButtonProps:d,cancelButtonProps:C,footer:S}=t,[R]=x0("Modal",MH()),D=n||R?.okText,$=s||R?.cancelText,H={confirmLoading:c,okButtonProps:d,cancelButtonProps:C,okTextLocale:D,cancelTextLocale:$,okType:o,onOk:m,onCancel:v},Z=rr.useMemo(()=>H,Pr(Object.values(H)));let X;return typeof S=="function"||typeof S>"u"?(X=rr.createElement(rr.Fragment,null,rr.createElement(aN,null),rr.createElement(sN,null)),typeof S=="function"&&(X=S(X,{OkBtn:sN,CancelBtn:aN})),X=rr.createElement(IG,{value:Z},X)):X=S,rr.createElement(FO,{disabled:!1},X)},dme=t=>({animationDuration:t,animationFillMode:"both"}),fme=t=>({animationDuration:t,animationFillMode:"both"}),oM=function(t,n,o,s){const m=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${m}${t}-enter,
      ${m}${t}-appear
    `]:Object.assign(Object.assign({},dme(s)),{animationPlayState:"paused"}),[`${m}${t}-leave`]:Object.assign(Object.assign({},fme(s)),{animationPlayState:"paused"}),[`
      ${m}${t}-enter${t}-enter-active,
      ${m}${t}-appear${t}-appear-active
    `]:{animationName:n,animationPlayState:"running"},[`${m}${t}-leave${t}-leave-active`]:{animationName:o,animationPlayState:"running",pointerEvents:"none"}}},pme=new Mo("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),mme=new Mo("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),gme=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:o}=t,s=`${o}-fade`,c=n?"&":"";return[oM(s,pme,mme,t.motionDurationMid,n),{[`
        ${c}${s}-enter,
        ${c}${s}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${c}${s}-leave`]:{animationTimingFunction:"linear"}}]},yme=new Mo("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),vme=new Mo("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),_me=new Mo("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),xme=new Mo("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),bme=new Mo("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),wme=new Mo("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Sme=new Mo("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Cme=new Mo("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),Eme={"move-up":{inKeyframes:Sme,outKeyframes:Cme},"move-down":{inKeyframes:yme,outKeyframes:vme},"move-left":{inKeyframes:_me,outKeyframes:xme},"move-right":{inKeyframes:bme,outKeyframes:wme}},HT=(t,n)=>{const{antCls:o}=t,s=`${o}-${n}`,{inKeyframes:c,outKeyframes:m}=Eme[n];return[oM(s,c,m,t.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${s}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},rz=new Mo("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),nz=new Mo("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),iz=new Mo("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),oz=new Mo("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Tme=new Mo("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Ime=new Mo("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),Mme=new Mo("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),Pme=new Mo("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Ame={"slide-up":{inKeyframes:rz,outKeyframes:nz},"slide-down":{inKeyframes:iz,outKeyframes:oz},"slide-left":{inKeyframes:Tme,outKeyframes:Ime},"slide-right":{inKeyframes:Mme,outKeyframes:Pme}},i0=(t,n)=>{const{antCls:o}=t,s=`${o}-${n}`,{inKeyframes:c,outKeyframes:m}=Ame[n];return[oM(s,c,m,t.motionDurationMid),{[`
      ${s}-enter,
      ${s}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${s}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},az=new Mo("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Rme=new Mo("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),lN=new Mo("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),cN=new Mo("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),kme=new Mo("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Ome=new Mo("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),zme=new Mo("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Dme=new Mo("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Lme=new Mo("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),$me=new Mo("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Bme=new Mo("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),Fme=new Mo("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Nme={zoom:{inKeyframes:az,outKeyframes:Rme},"zoom-big":{inKeyframes:lN,outKeyframes:cN},"zoom-big-fast":{inKeyframes:lN,outKeyframes:cN},"zoom-left":{inKeyframes:zme,outKeyframes:Dme},"zoom-right":{inKeyframes:Lme,outKeyframes:$me},"zoom-up":{inKeyframes:kme,outKeyframes:Ome},"zoom-down":{inKeyframes:Bme,outKeyframes:Fme}},gw=(t,n)=>{const{antCls:o}=t,s=`${o}-${n}`,{inKeyframes:c,outKeyframes:m}=Nme[n];return[oM(s,c,m,n==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${s}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},sz=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}});function uN(t){return{position:t,inset:0}}const jme=t=>{const{componentCls:n,antCls:o}=t;return[{[`${n}-root`]:{[`${n}${o}-zoom-enter, ${n}${o}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:t.motionDurationSlow,userSelect:"none"},[`${n}${o}-zoom-leave ${n}-content`]:{pointerEvents:"none"},[`${n}-mask`]:Object.assign(Object.assign({},uN("fixed")),{zIndex:t.zIndexPopupBase,height:"100%",backgroundColor:t.colorBgMask,pointerEvents:"none",[`${n}-hidden`]:{display:"none"}}),[`${n}-wrap`]:Object.assign(Object.assign({},uN("fixed")),{zIndex:t.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch",[`&:has(${n}${o}-zoom-enter), &:has(${n}${o}-zoom-appear)`]:{pointerEvents:"none"}})}},{[`${n}-root`]:gme(t)}]},Vme=t=>{const{componentCls:n}=t;return[{[`${n}-root`]:{[`${n}-wrap-rtl`]:{direction:"rtl"},[`${n}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[n]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${t.screenSMMax}px)`]:{[n]:{maxWidth:"calc(100vw - 16px)",margin:`${Xt(t.marginXS)} auto`},[`${n}-centered`]:{[n]:{flex:1}}}}},{[n]:Object.assign(Object.assign({},Oa(t)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${Xt(t.calc(t.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:t.paddingLG,[`${n}-title`]:{margin:0,color:t.titleColor,fontWeight:t.fontWeightStrong,fontSize:t.titleFontSize,lineHeight:t.titleLineHeight,wordWrap:"break-word"},[`${n}-content`]:{position:"relative",backgroundColor:t.contentBg,backgroundClip:"padding-box",border:0,borderRadius:t.borderRadiusLG,boxShadow:t.boxShadow,pointerEvents:"auto",padding:t.contentPadding},[`${n}-close`]:Object.assign({position:"absolute",top:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),insetInlineEnd:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),zIndex:t.calc(t.zIndexPopupBase).add(10).equal(),padding:0,color:t.modalCloseIconColor,fontWeight:t.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:t.borderRadiusSM,width:t.modalCloseBtnSize,height:t.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${t.motionDurationMid}, background-color ${t.motionDurationMid}`,"&-x":{display:"flex",fontSize:t.fontSizeLG,fontStyle:"normal",lineHeight:`${Xt(t.modalCloseBtnSize)}`,justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:t.modalIconHoverColor,backgroundColor:t.closeBtnHoverBg,textDecoration:"none"},"&:active":{backgroundColor:t.closeBtnActiveBg}},Hb(t)),[`${n}-header`]:{color:t.colorText,background:t.headerBg,borderRadius:`${Xt(t.borderRadiusLG)} ${Xt(t.borderRadiusLG)} 0 0`,marginBottom:t.headerMarginBottom,padding:t.headerPadding,borderBottom:t.headerBorderBottom},[`${n}-body`]:{fontSize:t.fontSize,lineHeight:t.lineHeight,wordWrap:"break-word",padding:t.bodyPadding},[`${n}-footer`]:{textAlign:"end",background:t.footerBg,marginTop:t.footerMarginTop,padding:t.footerPadding,borderTop:t.footerBorderTop,borderRadius:t.footerBorderRadius,[`> ${t.antCls}-btn + ${t.antCls}-btn`]:{marginInlineStart:t.marginXS}},[`${n}-open`]:{overflow:"hidden"}})},{[`${n}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${n}-content,
          ${n}-body,
          ${n}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${n}-confirm-body`]:{marginBottom:"auto"}}}]},Ume=t=>{const{componentCls:n}=t;return{[`${n}-root`]:{[`${n}-wrap-rtl`]:{direction:"rtl",[`${n}-confirm-body`]:{direction:"rtl"}}}}},HG=t=>{const n=t.padding,o=t.fontSizeHeading5,s=t.lineHeightHeading5;return Yi(t,{modalHeaderHeight:t.calc(t.calc(s).mul(o).equal()).add(t.calc(n).mul(2).equal()).equal(),modalFooterBorderColorSplit:t.colorSplit,modalFooterBorderStyle:t.lineType,modalFooterBorderWidth:t.lineWidth,modalIconHoverColor:t.colorIconHover,modalCloseIconColor:t.colorIcon,modalCloseBtnSize:t.fontHeight,modalConfirmIconSize:t.fontHeight,modalTitleHeight:t.calc(t.titleFontSize).mul(t.titleLineHeight).equal()})},GG=t=>({footerBg:"transparent",headerBg:t.colorBgElevated,titleLineHeight:t.lineHeightHeading5,titleFontSize:t.fontSizeHeading5,contentBg:t.colorBgElevated,titleColor:t.colorTextHeading,closeBtnHoverBg:t.wireframe?"transparent":t.colorFillContent,closeBtnActiveBg:t.wireframe?"transparent":t.colorFillContentHover,contentPadding:t.wireframe?0:`${Xt(t.paddingMD)} ${Xt(t.paddingContentHorizontalLG)}`,headerPadding:t.wireframe?`${Xt(t.padding)} ${Xt(t.paddingLG)}`:0,headerBorderBottom:t.wireframe?`${Xt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",headerMarginBottom:t.wireframe?0:t.marginXS,bodyPadding:t.wireframe?t.paddingLG:0,footerPadding:t.wireframe?`${Xt(t.paddingXS)} ${Xt(t.padding)}`:0,footerBorderTop:t.wireframe?`${Xt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",footerBorderRadius:t.wireframe?`0 0 ${Xt(t.borderRadiusLG)} ${Xt(t.borderRadiusLG)}`:0,footerMarginTop:t.wireframe?0:t.marginSM,confirmBodyPadding:t.wireframe?`${Xt(t.padding*2)} ${Xt(t.padding*2)} ${Xt(t.paddingLG)}`:0,confirmIconMarginInlineEnd:t.wireframe?t.margin:t.marginSM,confirmBtnsMarginTop:t.wireframe?t.marginLG:t.marginSM}),qG=os("Modal",t=>{const n=HG(t);return[Vme(n),Ume(n),jme(n),gw(n,"zoom")]},GG,{unitless:{titleLineHeight:!0}});var Hme=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};let kR;const Gme=t=>{kR={x:t.pageX,y:t.pageY},setTimeout(()=>{kR=null},100)};mpe()&&document.documentElement.addEventListener("click",Gme,!0);const qme=t=>{var n;const{getPopupContainer:o,getPrefixCls:s,direction:c,modal:m}=E.useContext(hi),v=Qe=>{const{onCancel:St}=t;St?.(Qe)},d=Qe=>{const{onOk:St}=t;St?.(Qe)},{prefixCls:C,className:S,rootClassName:R,open:D,wrapClassName:$,centered:H,getContainer:Z,closeIcon:X,closable:Q,focusTriggerAfterClose:G=!0,style:K,visible:Y,width:re=520,footer:fe,classNames:me,styles:pe}=t,xe=Hme(t,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","closable","focusTriggerAfterClose","style","visible","width","footer","classNames","styles"]),Se=s("modal",C),oe=s(),Re=Pl(Se),[Ve,Oe,_e]=qG(Se,Re),Fe=Gt($,{[`${Se}-centered`]:!!H,[`${Se}-wrap-rtl`]:c==="rtl"}),Le=fe!==null&&E.createElement(UG,Object.assign({},t,{onOk:d,onCancel:v})),[Me,Ce]=zG(Q,X,Qe=>VG(Se,Qe),E.createElement(cw,{className:`${Se}-close-icon`}),!0),Ye=cme(`.${Se}-content`),[qe,rt]=uw("Modal",xe.zIndex);return Ve(E.createElement(Gb,null,E.createElement(RR,{status:!0,override:!0},E.createElement(JI.Provider,{value:rt},E.createElement(OG,Object.assign({width:re},xe,{zIndex:qe,getContainer:Z===void 0?o:Z,prefixCls:Se,rootClassName:Gt(Oe,R,_e,Re),footer:Le,visible:D??Y,mousePosition:(n=xe.mousePosition)!==null&&n!==void 0?n:kR,onClose:v,closable:Me,closeIcon:Ce,focusTriggerAfterClose:G,transitionName:xy(oe,"zoom",t.transitionName),maskTransitionName:xy(oe,"fade",t.maskTransitionName),className:Gt(Oe,S,m?.className),style:Object.assign(Object.assign({},m?.style),K),classNames:Object.assign(Object.assign({wrapper:Fe},m?.classNames),me),styles:Object.assign(Object.assign({},m?.styles),pe),panelRef:Ye}))))))},WG=qme,Wme=t=>{const{componentCls:n,titleFontSize:o,titleLineHeight:s,modalConfirmIconSize:c,fontSize:m,lineHeight:v,modalTitleHeight:d,fontHeight:C,confirmBodyPadding:S}=t,R=`${n}-confirm`;return{[R]:{"&-rtl":{direction:"rtl"},[`${t.antCls}-modal-header`]:{display:"none"},[`${R}-body-wrapper`]:Object.assign({},Ub()),[`&${n} ${n}-body`]:{padding:S},[`${R}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t.iconCls}`]:{flex:"none",fontSize:c,marginInlineEnd:t.confirmIconMarginInlineEnd,marginTop:t.calc(t.calc(C).sub(c).equal()).div(2).equal()},[`&-has-title > ${t.iconCls}`]:{marginTop:t.calc(t.calc(d).sub(c).equal()).div(2).equal()}},[`${R}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:t.marginXS,maxWidth:`calc(100% - ${Xt(t.calc(t.modalConfirmIconSize).add(t.marginSM).equal())})`},[`${R}-title`]:{color:t.colorTextHeading,fontWeight:t.fontWeightStrong,fontSize:o,lineHeight:s},[`${R}-content`]:{color:t.colorText,fontSize:m,lineHeight:v},[`${R}-btns`]:{textAlign:"end",marginTop:t.confirmBtnsMarginTop,[`${t.antCls}-btn + ${t.antCls}-btn`]:{marginBottom:0,marginInlineStart:t.marginXS}}},[`${R}-error ${R}-body > ${t.iconCls}`]:{color:t.colorError},[`${R}-warning ${R}-body > ${t.iconCls},
        ${R}-confirm ${R}-body > ${t.iconCls}`]:{color:t.colorWarning},[`${R}-info ${R}-body > ${t.iconCls}`]:{color:t.colorInfo},[`${R}-success ${R}-body > ${t.iconCls}`]:{color:t.colorSuccess}}},Kme=b0(["Modal","confirm"],t=>{const n=HG(t);return[Wme(n)]},GG,{order:-1e3});var Zme=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function KG(t){const{prefixCls:n,icon:o,okText:s,cancelText:c,confirmPrefixCls:m,type:v,okCancel:d,footer:C,locale:S}=t,R=Zme(t,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let D=o;if(!o&&o!==null)switch(v){case"info":D=E.createElement(Rde,null);break;case"success":D=E.createElement(HO,null);break;case"error":D=E.createElement(S0,null);break;default:D=E.createElement(GO,null)}const $=d??v==="confirm",H=t.autoFocusButton===null?!1:t.autoFocusButton||"ok",[Z]=x0("Modal"),X=S||Z,Q=s||($?X?.okText:X?.justOkText),G=c||X?.cancelText,K=Object.assign({autoFocusButton:H,cancelTextLocale:G,okTextLocale:Q,mergedOkCancel:$},R),Y=E.useMemo(()=>K,Pr(Object.values(K))),re=E.createElement(E.Fragment,null,E.createElement(L8,null),E.createElement($8,null)),fe=t.title!==void 0&&t.title!==null,me=`${m}-body`;return E.createElement("div",{className:`${m}-body-wrapper`},E.createElement("div",{className:Gt(me,{[`${me}-has-title`]:fe})},D,E.createElement("div",{className:`${m}-paragraph`},fe&&E.createElement("span",{className:`${m}-title`},t.title),E.createElement("div",{className:`${m}-content`},t.content))),C===void 0||typeof C=="function"?E.createElement(IG,{value:Y},E.createElement("div",{className:`${m}-btns`},typeof C=="function"?C(re,{OkBtn:$8,CancelBtn:L8}):re)):C,E.createElement(Kme,{prefixCls:n}))}const Xme=t=>{const{close:n,zIndex:o,afterClose:s,open:c,keyboard:m,centered:v,getContainer:d,maskStyle:C,direction:S,prefixCls:R,wrapClassName:D,rootPrefixCls:$,bodyStyle:H,closable:Z=!1,closeIcon:X,modalRender:Q,focusTriggerAfterClose:G,onConfirm:K,styles:Y}=t,re=`${R}-confirm`,fe=t.width||416,me=t.style||{},pe=t.mask===void 0?!0:t.mask,xe=t.maskClosable===void 0?!1:t.maskClosable,Se=Gt(re,`${re}-${t.type}`,{[`${re}-rtl`]:S==="rtl"},t.className),[,oe]=Ws(),Re=E.useMemo(()=>o!==void 0?o:oe.zIndexPopupBase+fG,[o,oe]);return E.createElement(WG,{prefixCls:R,className:Se,wrapClassName:Gt({[`${re}-centered`]:!!t.centered},D),onCancel:()=>{n?.({triggerCancel:!0}),K?.(!1)},open:c,title:"",footer:null,transitionName:xy($||"","zoom",t.transitionName),maskTransitionName:xy($||"","fade",t.maskTransitionName),mask:pe,maskClosable:xe,style:me,styles:Object.assign({body:H,mask:C},Y),width:fe,zIndex:Re,afterClose:s,keyboard:m,centered:v,getContainer:d,closable:Z,closeIcon:X,modalRender:Q,focusTriggerAfterClose:G},E.createElement(KG,Object.assign({},t,{confirmPrefixCls:re})))},Yme=t=>{const{rootPrefixCls:n,iconPrefixCls:o,direction:s,theme:c}=t;return E.createElement(VO,{prefixCls:n,iconPrefixCls:o,direction:s,theme:c},E.createElement(Xme,Object.assign({},t)))},ZG=Yme,sy=[];var Jme=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};let XG="";function Qme(){return XG}function yw(t){const n=document.createDocumentFragment();let o=Object.assign(Object.assign({},t),{close:v,open:!0}),s;function c(){for(var C=arguments.length,S=new Array(C),R=0;R<C;R++)S[R]=arguments[R];const D=S.some($=>$&&$.triggerCancel);t.onCancel&&D&&t.onCancel.apply(t,[()=>{}].concat(Pr(S.slice(1))));for(let $=0;$<sy.length;$++)if(sy[$]===v){sy.splice($,1);break}gG(n)}function m(C){var{okText:S,cancelText:R,prefixCls:D,getContainer:$}=C,H=Jme(C,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(s),s=setTimeout(()=>{const Z=MH(),{getPrefixCls:X,getIconPrefixCls:Q,getTheme:G}=ide(),K=X(void 0,Qme()),Y=D||`${K}-modal`,re=Q(),fe=G();let me=$;me===!1&&(me=void 0),mG(E.createElement(ZG,Object.assign({},H,{getContainer:me,prefixCls:Y,rootPrefixCls:K,iconPrefixCls:re,okText:S,locale:Z,theme:fe,cancelText:R||Z.cancelText})),n)})}function v(){for(var C=arguments.length,S=new Array(C),R=0;R<C;R++)S[R]=arguments[R];o=Object.assign(Object.assign({},o),{open:!1,afterClose:()=>{typeof t.afterClose=="function"&&t.afterClose(),c.apply(this,S)}}),o.visible&&delete o.visible,m(o)}function d(C){typeof C=="function"?o=C(o):o=Object.assign(Object.assign({},o),C),m(o)}return m(o),sy.push(v),{destroy:v,update:d}}function YG(t){return Object.assign(Object.assign({},t),{type:"warning"})}function JG(t){return Object.assign(Object.assign({},t),{type:"info"})}function QG(t){return Object.assign(Object.assign({},t),{type:"success"})}function eq(t){return Object.assign(Object.assign({},t),{type:"error"})}function tq(t){return Object.assign(Object.assign({},t),{type:"confirm"})}function ege(t){let{rootPrefixCls:n}=t;XG=n}var tge=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const rge=(t,n)=>{var o,{afterClose:s,config:c}=t,m=tge(t,["afterClose","config"]);const[v,d]=E.useState(!0),[C,S]=E.useState(c),{direction:R,getPrefixCls:D}=E.useContext(hi),$=D("modal"),H=D(),Z=()=>{var K;s(),(K=C.afterClose)===null||K===void 0||K.call(C)},X=function(){d(!1);for(var K=arguments.length,Y=new Array(K),re=0;re<K;re++)Y[re]=arguments[re];const fe=Y.some(me=>me&&me.triggerCancel);C.onCancel&&fe&&C.onCancel.apply(C,[()=>{}].concat(Pr(Y.slice(1))))};E.useImperativeHandle(n,()=>({destroy:X,update:K=>{S(Y=>Object.assign(Object.assign({},Y),K))}}));const Q=(o=C.okCancel)!==null&&o!==void 0?o:C.type==="confirm",[G]=x0("Modal",Uf.Modal);return E.createElement(ZG,Object.assign({prefixCls:$,rootPrefixCls:H},C,{close:X,open:v,afterClose:Z,okText:C.okText||(Q?G?.okText:G?.justOkText),direction:C.direction||R,cancelText:C.cancelText||G?.cancelText},m))},nge=E.forwardRef(rge);let hN=0;const ige=E.memo(E.forwardRef((t,n)=>{const[o,s]=Xde();return E.useImperativeHandle(n,()=>({patchElement:s}),[]),E.createElement(E.Fragment,null,o)}));function oge(){const t=E.useRef(null),[n,o]=E.useState([]);E.useEffect(()=>{n.length&&(Pr(n).forEach(v=>{v()}),o([]))},[n]);const s=E.useCallback(m=>function(d){var C;hN+=1;const S=E.createRef();let R;const D=new Promise(Q=>{R=Q});let $=!1,H;const Z=E.createElement(nge,{key:`modal-${hN}`,config:m(d),ref:S,afterClose:()=>{H?.()},isSilent:()=>$,onConfirm:Q=>{R(Q)}});return H=(C=t.current)===null||C===void 0?void 0:C.patchElement(Z),H&&sy.push(H),{destroy:()=>{function Q(){var G;(G=S.current)===null||G===void 0||G.destroy()}S.current?Q():o(G=>[].concat(Pr(G),[Q]))},update:Q=>{function G(){var K;(K=S.current)===null||K===void 0||K.update(Q)}S.current?G():o(K=>[].concat(Pr(K),[G]))},then:Q=>($=!0,D.then(Q))}},[]);return[E.useMemo(()=>({info:s(JG),success:s(QG),error:s(eq),warning:s(YG),confirm:s(tq)}),[]),E.createElement(ige,{key:"modal-holder",ref:t})]}function rq(t){return n=>E.createElement(VO,{theme:{token:{motion:!1,zIndexPopupBase:0}}},E.createElement(t,Object.assign({},n)))}const nq=(t,n,o,s)=>rq(m=>{const{prefixCls:v,style:d}=m,C=E.useRef(null),[S,R]=E.useState(0),[D,$]=E.useState(0),[H,Z]=ul(!1,{value:m.open}),{getPrefixCls:X}=E.useContext(hi),Q=X(n||"select",v);E.useEffect(()=>{if(Z(!0),typeof ResizeObserver<"u"){const Y=new ResizeObserver(fe=>{const me=fe[0].target;R(me.offsetHeight+8),$(me.offsetWidth)}),re=setInterval(()=>{var fe;const me=o?`.${o(Q)}`:`.${Q}-dropdown`,pe=(fe=C.current)===null||fe===void 0?void 0:fe.querySelector(me);pe&&(clearInterval(re),Y.observe(pe))},10);return()=>{clearInterval(re),Y.disconnect()}}},[]);let G=Object.assign(Object.assign({},m),{style:Object.assign(Object.assign({},d),{margin:0}),open:H,visible:H,getPopupContainer:()=>C.current});s&&(G=s(G));const K={paddingBottom:S,position:"relative",minWidth:D};return E.createElement("div",{ref:C,style:K},E.createElement(t,Object.assign({},G)))}),iq=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t?.substr(0,4))};var aM=function(n){var o=n.className,s=n.customizeIcon,c=n.customizeIconProps,m=n.onMouseDown,v=n.onClick,d=n.children,C;return typeof s=="function"?C=s(c):C=s,E.createElement("span",{className:o,onMouseDown:function(R){R.preventDefault(),m&&m(R)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:v,"aria-hidden":!0},C!==void 0?C:E.createElement("span",{className:Gt(o.split(/\s+/).map(function(S){return"".concat(S,"-icon")}))},d))};function age(t,n,o,s,c){var m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,v=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,C=rr.useMemo(function(){if(Ei(s)==="object")return s.clearIcon;if(c)return c},[s,c]),S=rr.useMemo(function(){return!!(!m&&s&&(o.length||v)&&!(d==="combobox"&&v===""))},[s,m,o.length,v,d]);return{allowClear:S,clearIcon:rr.createElement(aM,{className:"".concat(t,"-clear"),onMouseDown:n,customizeIcon:C},"×")}}var oq=E.createContext(null);function sge(){return E.useContext(oq)}function lge(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=E.useState(!1),o=nr(n,2),s=o[0],c=o[1],m=E.useRef(null),v=function(){window.clearTimeout(m.current)};E.useEffect(function(){return v},[]);var d=function(S,R){v(),m.current=window.setTimeout(function(){c(S),R&&R()},t)};return[s,d,v]}function aq(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,n=E.useRef(null),o=E.useRef(null);E.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function s(c){(c||n.current===null)&&(n.current=c),window.clearTimeout(o.current),o.current=window.setTimeout(function(){n.current=null},t)}return[function(){return n.current},s]}function cge(t,n,o,s){var c=E.useRef(null);c.current={open:n,triggerOpen:o,customizedTrigger:s},E.useEffect(function(){function m(v){var d;if(!((d=c.current)!==null&&d!==void 0&&d.customizedTrigger)){var C=v.target;C.shadowRoot&&v.composed&&(C=v.composedPath()[0]||C),c.current.open&&t().filter(function(S){return S}).every(function(S){return!S.contains(C)&&S!==C})&&c.current.triggerOpen(!1)}}return window.addEventListener("mousedown",m),function(){return window.removeEventListener("mousedown",m)}},[])}var uge=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],e_=void 0;function hge(t,n){var o=t.prefixCls,s=t.invalidate,c=t.item,m=t.renderItem,v=t.responsive,d=t.responsiveDisabled,C=t.registerSize,S=t.itemKey,R=t.className,D=t.style,$=t.children,H=t.display,Z=t.order,X=t.component,Q=X===void 0?"div":X,G=xi(t,uge),K=v&&!H;function Y(xe){C(S,xe)}E.useEffect(function(){return function(){Y(null)}},[]);var re=m&&c!==e_?m(c):$,fe;s||(fe={opacity:K?0:1,height:K?0:e_,overflowY:K?"hidden":e_,order:v?Z:e_,pointerEvents:K?"none":e_,position:K?"absolute":e_});var me={};K&&(me["aria-hidden"]=!0);var pe=E.createElement(Q,Mr({className:Gt(!s&&o,R),style:yt(yt({},fe),D)},me,G,{ref:n}),re);return v&&(pe=E.createElement(nh,{onResize:function(Se){var oe=Se.offsetWidth;Y(oe)},disabled:d},pe)),pe}var hb=E.forwardRef(hge);hb.displayName="Item";function dge(t){if(typeof MessageChannel>"u")Do(t);else{var n=new MessageChannel;n.port1.onmessage=function(){return t()},n.port2.postMessage(void 0)}}function fge(){var t=E.useRef(null),n=function(s){t.current||(t.current=[],dge(function(){Nh.unstable_batchedUpdates(function(){t.current.forEach(function(c){c()}),t.current=null})})),t.current.push(s)};return n}function $x(t,n){var o=E.useState(n),s=nr(o,2),c=s[0],m=s[1],v=ws(function(d){t(function(){m(d)})});return[c,v]}var GT=rr.createContext(null),pge=["component"],mge=["className"],gge=["className"],yge=function(n,o){var s=E.useContext(GT);if(!s){var c=n.component,m=c===void 0?"div":c,v=xi(n,pge);return E.createElement(m,Mr({},v,{ref:o}))}var d=s.className,C=xi(s,mge),S=n.className,R=xi(n,gge);return E.createElement(GT.Provider,{value:null},E.createElement(hb,Mr({ref:o,className:Gt(d,S)},C,R)))},sq=E.forwardRef(yge);sq.displayName="RawItem";var vge=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],lq="responsive",cq="invalidate";function _ge(t){return"+ ".concat(t.length," ...")}function xge(t,n){var o=t.prefixCls,s=o===void 0?"rc-overflow":o,c=t.data,m=c===void 0?[]:c,v=t.renderItem,d=t.renderRawItem,C=t.itemKey,S=t.itemWidth,R=S===void 0?10:S,D=t.ssr,$=t.style,H=t.className,Z=t.maxCount,X=t.renderRest,Q=t.renderRawRest,G=t.suffix,K=t.component,Y=K===void 0?"div":K,re=t.itemComponent,fe=t.onVisibleChange,me=xi(t,vge),pe=D==="full",xe=fge(),Se=$x(xe,null),oe=nr(Se,2),Re=oe[0],Ve=oe[1],Oe=Re||0,_e=$x(xe,new Map),Fe=nr(_e,2),Le=Fe[0],Me=Fe[1],Ce=$x(xe,0),Ye=nr(Ce,2),qe=Ye[0],rt=Ye[1],Qe=$x(xe,0),St=nr(Qe,2),jt=St[0],Ot=St[1],Tt=$x(xe,0),ct=nr(Tt,2),Ct=ct[0],kt=ct[1],zt=E.useState(null),Nt=nr(zt,2),Rt=Nt[0],Pt=Nt[1],Dt=E.useState(null),Ut=nr(Dt,2),sr=Ut[0],vt=Ut[1],De=E.useMemo(function(){return sr===null&&pe?Number.MAX_SAFE_INTEGER:sr||0},[sr,Re]),ze=E.useState(!1),ve=nr(ze,2),pt=ve[0],gt=ve[1],$t="".concat(s,"-item"),It=Math.max(qe,jt),Mt=Z===lq,Qt=m.length&&Mt,wr=Z===cq,br=Qt||typeof Z=="number"&&m.length>Z,tn=E.useMemo(function(){var Te=m;return Qt?Re===null&&pe?Te=m:Te=m.slice(0,Math.min(m.length,Oe/R)):typeof Z=="number"&&(Te=m.slice(0,Z)),Te},[m,R,Re,Z,Qt]),yr=E.useMemo(function(){return Qt?m.slice(De+1):m.slice(tn.length)},[m,tn,Qt,De]),dr=E.useCallback(function(Te,$e){var ke;return typeof C=="function"?C(Te):(ke=C&&Te?.[C])!==null&&ke!==void 0?ke:$e},[C]),Wt=E.useCallback(v||function(Te){return Te},[v]);function Wr(Te,$e,ke){sr===Te&&($e===void 0||$e===Rt)||(vt(Te),ke||(gt(Te<m.length-1),fe?.(Te)),$e!==void 0&&Pt($e))}function Fr(Te,$e){Ve($e.clientWidth)}function en(Te,$e){Me(function(ke){var Ke=new Map(ke);return $e===null?Ke.delete(Te):Ke.set(Te,$e),Ke})}function Yr(Te,$e){Ot($e),rt(jt)}function fr(Te,$e){kt($e)}function Kr(Te){return Le.get(dr(tn[Te],Te))}zo(function(){if(Oe&&typeof It=="number"&&tn){var Te=Ct,$e=tn.length,ke=$e-1;if(!$e){Wr(0,null);return}for(var Ke=0;Ke<$e;Ke+=1){var Ue=Kr(Ke);if(pe&&(Ue=Ue||0),Ue===void 0){Wr(Ke-1,void 0,!0);break}if(Te+=Ue,ke===0&&Te<=Oe||Ke===ke-1&&Te+Kr(ke)<=Oe){Wr(ke,null);break}else if(Te+It>Oe){Wr(Ke-1,Te-Ue-Ct+jt);break}}G&&Kr(0)+Ct>Oe&&Pt(null)}},[Oe,Le,jt,Ct,dr,tn]);var Br=pt&&!!yr.length,an={};Rt!==null&&Qt&&(an={position:"absolute",left:Rt,top:0});var ni={prefixCls:$t,responsive:Qt,component:re,invalidate:wr},Nr=d?function(Te,$e){var ke=dr(Te,$e);return E.createElement(GT.Provider,{key:ke,value:yt(yt({},ni),{},{order:$e,item:Te,itemKey:ke,registerSize:en,display:$e<=De})},d(Te,$e))}:function(Te,$e){var ke=dr(Te,$e);return E.createElement(hb,Mr({},ni,{order:$e,key:ke,item:Te,renderItem:Wt,itemKey:ke,registerSize:en,display:$e<=De}))},ii,Pe={order:Br?De:Number.MAX_SAFE_INTEGER,className:"".concat($t,"-rest"),registerSize:Yr,display:Br};if(Q)Q&&(ii=E.createElement(GT.Provider,{value:yt(yt({},ni),Pe)},Q(yr)));else{var he=X||_ge;ii=E.createElement(hb,Mr({},ni,Pe),typeof he=="function"?he(yr):he)}var ge=E.createElement(Y,Mr({className:Gt(!wr&&s,H),style:$,ref:n},me),tn.map(Nr),br?ii:null,G&&E.createElement(hb,Mr({},ni,{responsive:Mt,responsiveDisabled:!Qt,order:De,className:"".concat($t,"-suffix"),registerSize:fr,display:!0,style:an}),G));return Mt&&(ge=E.createElement(nh,{onResize:Fr,disabled:!Qt},ge)),ge}var Bd=E.forwardRef(xge);Bd.displayName="Overflow";Bd.Item=sq;Bd.RESPONSIVE=lq;Bd.INVALIDATE=cq;var bge=function(n,o){var s,c=n.prefixCls,m=n.id,v=n.inputElement,d=n.disabled,C=n.tabIndex,S=n.autoFocus,R=n.autoComplete,D=n.editable,$=n.activeDescendantId,H=n.value,Z=n.maxLength,X=n.onKeyDown,Q=n.onMouseDown,G=n.onChange,K=n.onPaste,Y=n.onCompositionStart,re=n.onCompositionEnd,fe=n.open,me=n.attrs,pe=v||E.createElement("input",null),xe=pe,Se=xe.ref,oe=xe.props,Re=oe.onKeyDown,Ve=oe.onChange,Oe=oe.onMouseDown,_e=oe.onCompositionStart,Fe=oe.onCompositionEnd,Le=oe.style;return"maxLength"in pe.props,pe=E.cloneElement(pe,yt(yt(yt({type:"search"},oe),{},{id:m,ref:Cu(o,Se),disabled:d,tabIndex:C,autoComplete:R||"off",autoFocus:S,className:Gt("".concat(c,"-selection-search-input"),(s=pe)===null||s===void 0||(s=s.props)===null||s===void 0?void 0:s.className),role:"combobox","aria-expanded":fe||!1,"aria-haspopup":"listbox","aria-owns":"".concat(m,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(m,"_list"),"aria-activedescendant":fe?$:void 0},me),{},{value:D?H:"",maxLength:Z,readOnly:!D,unselectable:D?null:"on",style:yt(yt({},Le),{},{opacity:D?null:0}),onKeyDown:function(Ce){X(Ce),Re&&Re(Ce)},onMouseDown:function(Ce){Q(Ce),Oe&&Oe(Ce)},onChange:function(Ce){G(Ce),Ve&&Ve(Ce)},onCompositionStart:function(Ce){Y(Ce),_e&&_e(Ce)},onCompositionEnd:function(Ce){re(Ce),Fe&&Fe(Ce)},onPaste:K})),pe},lz=E.forwardRef(bge);lz.displayName="Input";function uq(t){return Array.isArray(t)?t:t!==void 0?[t]:[]}var wge=typeof window<"u"&&window.document&&window.document.documentElement,Sge=wge;function Cge(t){return t!=null}function Ege(t){return!t&&t!==0}function dN(t){return["string","number"].includes(Ei(t))}function hq(t){var n=void 0;return t&&(dN(t.title)?n=t.title.toString():dN(t.label)&&(n=t.label.toString())),n}function Tge(t,n){Sge?E.useLayoutEffect(t,n):E.useEffect(t,n)}function Ige(t){var n;return(n=t.key)!==null&&n!==void 0?n:t.value}var fN=function(n){n.preventDefault(),n.stopPropagation()},Mge=function(n){var o=n.id,s=n.prefixCls,c=n.values,m=n.open,v=n.searchValue,d=n.autoClearSearchValue,C=n.inputRef,S=n.placeholder,R=n.disabled,D=n.mode,$=n.showSearch,H=n.autoFocus,Z=n.autoComplete,X=n.activeDescendantId,Q=n.tabIndex,G=n.removeIcon,K=n.maxTagCount,Y=n.maxTagTextLength,re=n.maxTagPlaceholder,fe=re===void 0?function(Pt){return"+ ".concat(Pt.length," ...")}:re,me=n.tagRender,pe=n.onToggleOpen,xe=n.onRemove,Se=n.onInputChange,oe=n.onInputPaste,Re=n.onInputKeyDown,Ve=n.onInputMouseDown,Oe=n.onInputCompositionStart,_e=n.onInputCompositionEnd,Fe=E.useRef(null),Le=E.useState(0),Me=nr(Le,2),Ce=Me[0],Ye=Me[1],qe=E.useState(!1),rt=nr(qe,2),Qe=rt[0],St=rt[1],jt="".concat(s,"-selection"),Ot=m||D==="multiple"&&d===!1||D==="tags"?v:"",Tt=D==="tags"||D==="multiple"&&d===!1||$&&(m||Qe);Tge(function(){Ye(Fe.current.scrollWidth)},[Ot]);function ct(Pt,Dt,Ut,sr,vt){return E.createElement("span",{className:Gt("".concat(jt,"-item"),xt({},"".concat(jt,"-item-disabled"),Ut)),title:hq(Pt)},E.createElement("span",{className:"".concat(jt,"-item-content")},Dt),sr&&E.createElement(aM,{className:"".concat(jt,"-item-remove"),onMouseDown:fN,onClick:vt,customizeIcon:G},"×"))}function Ct(Pt,Dt,Ut,sr,vt){var De=function(ve){fN(ve),pe(!m)};return E.createElement("span",{onMouseDown:De},me({label:Dt,value:Pt,disabled:Ut,closable:sr,onClose:vt}))}function kt(Pt){var Dt=Pt.disabled,Ut=Pt.label,sr=Pt.value,vt=!R&&!Dt,De=Ut;if(typeof Y=="number"&&(typeof Ut=="string"||typeof Ut=="number")){var ze=String(De);ze.length>Y&&(De="".concat(ze.slice(0,Y),"..."))}var ve=function(gt){gt&&gt.stopPropagation(),xe(Pt)};return typeof me=="function"?Ct(sr,De,Dt,vt,ve):ct(Pt,De,Dt,vt,ve)}function zt(Pt){var Dt=typeof fe=="function"?fe(Pt):fe;return ct({title:Dt},Dt,!1)}var Nt=E.createElement("div",{className:"".concat(jt,"-search"),style:{width:Ce},onFocus:function(){St(!0)},onBlur:function(){St(!1)}},E.createElement(lz,{ref:C,open:m,prefixCls:s,id:o,inputElement:null,disabled:R,autoFocus:H,autoComplete:Z,editable:Tt,activeDescendantId:X,value:Ot,onKeyDown:Re,onMouseDown:Ve,onChange:Se,onPaste:oe,onCompositionStart:Oe,onCompositionEnd:_e,tabIndex:Q,attrs:Uh(n,!0)}),E.createElement("span",{ref:Fe,className:"".concat(jt,"-search-mirror"),"aria-hidden":!0},Ot," ")),Rt=E.createElement(Bd,{prefixCls:"".concat(jt,"-overflow"),data:c,renderItem:kt,renderRest:zt,suffix:Nt,itemKey:Ige,maxCount:K});return E.createElement(E.Fragment,null,Rt,!c.length&&!Ot&&E.createElement("span",{className:"".concat(jt,"-placeholder")},S))},Pge=function(n){var o=n.inputElement,s=n.prefixCls,c=n.id,m=n.inputRef,v=n.disabled,d=n.autoFocus,C=n.autoComplete,S=n.activeDescendantId,R=n.mode,D=n.open,$=n.values,H=n.placeholder,Z=n.tabIndex,X=n.showSearch,Q=n.searchValue,G=n.activeValue,K=n.maxLength,Y=n.onInputKeyDown,re=n.onInputMouseDown,fe=n.onInputChange,me=n.onInputPaste,pe=n.onInputCompositionStart,xe=n.onInputCompositionEnd,Se=n.title,oe=E.useState(!1),Re=nr(oe,2),Ve=Re[0],Oe=Re[1],_e=R==="combobox",Fe=_e||X,Le=$[0],Me=Q||"";_e&&G&&!Ve&&(Me=G),E.useEffect(function(){_e&&Oe(!1)},[_e,G]);var Ce=R!=="combobox"&&!D&&!X?!1:!!Me,Ye=Se===void 0?hq(Le):Se,qe=function(){if(Le)return null;var Qe=Ce?{visibility:"hidden"}:void 0;return E.createElement("span",{className:"".concat(s,"-selection-placeholder"),style:Qe},H)};return E.createElement(E.Fragment,null,E.createElement("span",{className:"".concat(s,"-selection-search")},E.createElement(lz,{ref:m,prefixCls:s,id:c,open:D,inputElement:o,disabled:v,autoFocus:d,autoComplete:C,editable:Fe,activeDescendantId:S,value:Me,onKeyDown:Y,onMouseDown:re,onChange:function(Qe){Oe(!0),fe(Qe)},onPaste:me,onCompositionStart:pe,onCompositionEnd:xe,tabIndex:Z,attrs:Uh(n,!0),maxLength:_e?K:void 0})),!_e&&Le?E.createElement("span",{className:"".concat(s,"-selection-item"),title:Ye,style:Ce?{visibility:"hidden"}:void 0},Le.label):null,qe())};function Age(t){return![Or.ESC,Or.SHIFT,Or.BACKSPACE,Or.TAB,Or.WIN_KEY,Or.ALT,Or.META,Or.WIN_KEY_RIGHT,Or.CTRL,Or.SEMICOLON,Or.EQUALS,Or.CAPS_LOCK,Or.CONTEXT_MENU,Or.F1,Or.F2,Or.F3,Or.F4,Or.F5,Or.F6,Or.F7,Or.F8,Or.F9,Or.F10,Or.F11,Or.F12].includes(t)}var Rge=function(n,o){var s=E.useRef(null),c=E.useRef(!1),m=n.prefixCls,v=n.open,d=n.mode,C=n.showSearch,S=n.tokenWithEnter,R=n.autoClearSearchValue,D=n.onSearch,$=n.onSearchSubmit,H=n.onToggleOpen,Z=n.onInputKeyDown,X=n.domRef;E.useImperativeHandle(o,function(){return{focus:function(){s.current.focus()},blur:function(){s.current.blur()}}});var Q=aq(0),G=nr(Q,2),K=G[0],Y=G[1],re=function(Me){var Ce=Me.which;(Ce===Or.UP||Ce===Or.DOWN)&&Me.preventDefault(),Z&&Z(Me),Ce===Or.ENTER&&d==="tags"&&!c.current&&!v&&$?.(Me.target.value),Age(Ce)&&H(!0)},fe=function(){Y(!0)},me=E.useRef(null),pe=function(Me){D(Me,!0,c.current)!==!1&&H(!0)},xe=function(){c.current=!0},Se=function(Me){c.current=!1,d!=="combobox"&&pe(Me.target.value)},oe=function(Me){var Ce=Me.target.value;if(S&&me.current&&/[\r\n]/.test(me.current)){var Ye=me.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");Ce=Ce.replace(Ye,me.current)}me.current=null,pe(Ce)},Re=function(Me){var Ce=Me.clipboardData,Ye=Ce.getData("text");me.current=Ye},Ve=function(Me){var Ce=Me.target;if(Ce!==s.current){var Ye=document.body.style.msTouchAction!==void 0;Ye?setTimeout(function(){s.current.focus()}):s.current.focus()}},Oe=function(Me){var Ce=K();Me.target!==s.current&&!Ce&&d!=="combobox"&&Me.preventDefault(),(d!=="combobox"&&(!C||!Ce)||!v)&&(v&&R!==!1&&D("",!0,!1),H())},_e={inputRef:s,onInputKeyDown:re,onInputMouseDown:fe,onInputChange:oe,onInputPaste:Re,onInputCompositionStart:xe,onInputCompositionEnd:Se},Fe=d==="multiple"||d==="tags"?E.createElement(Mge,Mr({},n,_e)):E.createElement(Pge,Mr({},n,_e));return E.createElement("div",{ref:X,className:"".concat(m,"-selector"),onClick:Ve,onMouseDown:Oe},Fe)},dq=E.forwardRef(Rge);dq.displayName="Selector";function kge(t){var n=t.prefixCls,o=t.align,s=t.arrow,c=t.arrowPos,m=s||{},v=m.className,d=m.content,C=c.x,S=C===void 0?0:C,R=c.y,D=R===void 0?0:R,$=E.useRef();if(!o||!o.points)return null;var H={position:"absolute"};if(o.autoArrow!==!1){var Z=o.points[0],X=o.points[1],Q=Z[0],G=Z[1],K=X[0],Y=X[1];Q===K||!["t","b"].includes(Q)?H.top=D:Q==="t"?H.top=0:H.bottom=0,G===Y||!["l","r"].includes(G)?H.left=S:G==="l"?H.left=0:H.right=0}return E.createElement("div",{ref:$,className:Gt("".concat(n,"-arrow"),v),style:H},d)}function Oge(t){var n=t.prefixCls,o=t.open,s=t.zIndex,c=t.mask,m=t.motion;return c?E.createElement(Ud,Mr({},m,{motionAppear:!0,visible:o,removeOnLeave:!0}),function(v){var d=v.className;return E.createElement("div",{style:{zIndex:s},className:Gt("".concat(n,"-mask"),d)})}):null}var zge=E.memo(function(t){var n=t.children;return n},function(t,n){return n.cache}),Dge=E.forwardRef(function(t,n){var o=t.popup,s=t.className,c=t.prefixCls,m=t.style,v=t.target,d=t.onVisibleChanged,C=t.open,S=t.keepDom,R=t.fresh,D=t.onClick,$=t.mask,H=t.arrow,Z=t.arrowPos,X=t.align,Q=t.motion,G=t.maskMotion,K=t.forceRender,Y=t.getPopupContainer,re=t.autoDestroy,fe=t.portal,me=t.zIndex,pe=t.onMouseEnter,xe=t.onMouseLeave,Se=t.onPointerEnter,oe=t.ready,Re=t.offsetX,Ve=t.offsetY,Oe=t.offsetR,_e=t.offsetB,Fe=t.onAlign,Le=t.onPrepare,Me=t.stretch,Ce=t.targetWidth,Ye=t.targetHeight,qe=typeof o=="function"?o():o,rt=C||S,Qe=Y?.length>0,St=E.useState(!Y||!Qe),jt=nr(St,2),Ot=jt[0],Tt=jt[1];if(zo(function(){!Ot&&Qe&&v&&Tt(!0)},[Ot,Qe,v]),!Ot)return null;var ct="auto",Ct={left:"-1000vw",top:"-1000vh",right:ct,bottom:ct};if(oe||!C){var kt,zt=X.points,Nt=X.dynamicInset||((kt=X._experimental)===null||kt===void 0?void 0:kt.dynamicInset),Rt=Nt&&zt[0][1]==="r",Pt=Nt&&zt[0][0]==="b";Rt?(Ct.right=Oe,Ct.left=ct):(Ct.left=Re,Ct.right=ct),Pt?(Ct.bottom=_e,Ct.top=ct):(Ct.top=Ve,Ct.bottom=ct)}var Dt={};return Me&&(Me.includes("height")&&Ye?Dt.height=Ye:Me.includes("minHeight")&&Ye&&(Dt.minHeight=Ye),Me.includes("width")&&Ce?Dt.width=Ce:Me.includes("minWidth")&&Ce&&(Dt.minWidth=Ce)),C||(Dt.pointerEvents="none"),E.createElement(fe,{open:K||rt,getContainer:Y&&function(){return Y(v)},autoDestroy:re},E.createElement(Oge,{prefixCls:c,open:C,zIndex:me,mask:$,motion:G}),E.createElement(nh,{onResize:Fe,disabled:!C},function(Ut){return E.createElement(Ud,Mr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:K,leavedClassName:"".concat(c,"-hidden")},Q,{onAppearPrepare:Le,onEnterPrepare:Le,visible:C,onVisibleChanged:function(vt){var De;Q==null||(De=Q.onVisibleChanged)===null||De===void 0||De.call(Q,vt),d(vt)}}),function(sr,vt){var De=sr.className,ze=sr.style,ve=Gt(c,De,s);return E.createElement("div",{ref:Cu(Ut,n,vt),className:ve,style:yt(yt(yt(yt({"--arrow-x":"".concat(Z.x||0,"px"),"--arrow-y":"".concat(Z.y||0,"px")},Ct),Dt),ze),{},{boxSizing:"border-box",zIndex:me},m),onMouseEnter:pe,onMouseLeave:xe,onPointerEnter:Se,onClick:D},H&&E.createElement(kge,{prefixCls:c,arrow:H,arrowPos:Z,align:X}),E.createElement(zge,{cache:!C&&!R},qe))})}))}),Lge=E.forwardRef(function(t,n){var o=t.children,s=t.getTriggerDOMNode,c=jh(o),m=E.useCallback(function(d){Lb(n,s?s(d):d)},[s]),v=Ey(m,o.ref);return c?E.cloneElement(o,{ref:v}):o}),pN=E.createContext(null);function mN(t){return t?Array.isArray(t)?t:[t]:[]}function $ge(t,n,o,s){return E.useMemo(function(){var c=mN(o??n),m=mN(s??n),v=new Set(c),d=new Set(m);return t&&(v.has("hover")&&(v.delete("hover"),v.add("click")),d.has("hover")&&(d.delete("hover"),d.add("click"))),[v,d]},[t,n,o,s])}function Bge(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return o?t[0]===n[0]:t[0]===n[0]&&t[1]===n[1]}function Fge(t,n,o,s){for(var c=o.points,m=Object.keys(t),v=0;v<m.length;v+=1){var d,C=m[v];if(Bge((d=t[C])===null||d===void 0?void 0:d.points,c,s))return"".concat(n,"-placement-").concat(C)}return""}function gN(t,n,o,s){return n||(o?{motionName:"".concat(t,"-").concat(o)}:s?{motionName:s}:null)}function vw(t){return t.ownerDocument.defaultView}function OR(t){for(var n=[],o=t?.parentElement,s=["hidden","scroll","clip","auto"];o;){var c=vw(o).getComputedStyle(o),m=c.overflowX,v=c.overflowY,d=c.overflow;[m,v,d].some(function(C){return s.includes(C)})&&n.push(o),o=o.parentElement}return n}function Kb(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?n:t}function Bx(t){return Kb(parseFloat(t),0)}function yN(t,n){var o=yt({},t);return(n||[]).forEach(function(s){if(!(s instanceof HTMLBodyElement||s instanceof HTMLHtmlElement)){var c=vw(s).getComputedStyle(s),m=c.overflow,v=c.overflowClipMargin,d=c.borderTopWidth,C=c.borderBottomWidth,S=c.borderLeftWidth,R=c.borderRightWidth,D=s.getBoundingClientRect(),$=s.offsetHeight,H=s.clientHeight,Z=s.offsetWidth,X=s.clientWidth,Q=Bx(d),G=Bx(C),K=Bx(S),Y=Bx(R),re=Kb(Math.round(D.width/Z*1e3)/1e3),fe=Kb(Math.round(D.height/$*1e3)/1e3),me=(Z-X-K-Y)*re,pe=($-H-Q-G)*fe,xe=Q*fe,Se=G*fe,oe=K*re,Re=Y*re,Ve=0,Oe=0;if(m==="clip"){var _e=Bx(v);Ve=_e*re,Oe=_e*fe}var Fe=D.x+oe-Ve,Le=D.y+xe-Oe,Me=Fe+D.width+2*Ve-oe-Re-me,Ce=Le+D.height+2*Oe-xe-Se-pe;o.left=Math.max(o.left,Fe),o.top=Math.max(o.top,Le),o.right=Math.min(o.right,Me),o.bottom=Math.min(o.bottom,Ce)}}),o}function vN(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o="".concat(n),s=o.match(/^(.*)\%$/);return s?t*(parseFloat(s[1])/100):parseFloat(o)}function _N(t,n){var o=n||[],s=nr(o,2),c=s[0],m=s[1];return[vN(t.width,c),vN(t.height,m)]}function xN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function t_(t,n){var o=n[0],s=n[1],c,m;return o==="t"?m=t.y:o==="b"?m=t.y+t.height:m=t.y+t.height/2,s==="l"?c=t.x:s==="r"?c=t.x+t.width:c=t.x+t.width/2,{x:c,y:m}}function am(t,n){var o={t:"b",b:"t",l:"r",r:"l"};return t.map(function(s,c){return c===n?o[s]||"c":s}).join("")}function Nge(t,n,o,s,c,m,v){var d=E.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:c[s]||{}}),C=nr(d,2),S=C[0],R=C[1],D=E.useRef(0),$=E.useMemo(function(){return n?OR(n):[]},[n]),H=E.useRef({}),Z=function(){H.current={}};t||Z();var X=ws(function(){if(n&&o&&t){let eo=function(Po,Ha){var Ga=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ve,qa=qe.x+Po,zs=qe.y+Ha,dl=qa+kt,vr=zs+Ct,kn=Math.max(qa,Ga.left),mo=Math.max(zs,Ga.top),Lt=Math.min(dl,Ga.right),Zr=Math.min(vr,Ga.bottom);return Math.max(0,(Lt-kn)*(Zr-mo))},xo=function(){gr=qe.y+he,mr=gr+Ct,Sr=qe.x+Pe,Gr=Sr+kt};var K,Y,re=n,fe=re.ownerDocument,me=vw(re),pe=me.getComputedStyle(re),xe=pe.width,Se=pe.height,oe=pe.position,Re=re.style.left,Ve=re.style.top,Oe=re.style.right,_e=re.style.bottom,Fe=re.style.overflow,Le=yt(yt({},c[s]),m),Me=fe.createElement("div");(K=re.parentElement)===null||K===void 0||K.appendChild(Me),Me.style.left="".concat(re.offsetLeft,"px"),Me.style.top="".concat(re.offsetTop,"px"),Me.style.position=oe,Me.style.height="".concat(re.offsetHeight,"px"),Me.style.width="".concat(re.offsetWidth,"px"),re.style.left="0",re.style.top="0",re.style.right="auto",re.style.bottom="auto",re.style.overflow="hidden";var Ce;if(Array.isArray(o))Ce={x:o[0],y:o[1],width:0,height:0};else{var Ye=o.getBoundingClientRect();Ce={x:Ye.x,y:Ye.y,width:Ye.width,height:Ye.height}}var qe=re.getBoundingClientRect(),rt=fe.documentElement,Qe=rt.clientWidth,St=rt.clientHeight,jt=rt.scrollWidth,Ot=rt.scrollHeight,Tt=rt.scrollTop,ct=rt.scrollLeft,Ct=qe.height,kt=qe.width,zt=Ce.height,Nt=Ce.width,Rt={left:0,top:0,right:Qe,bottom:St},Pt={left:-ct,top:-Tt,right:jt-ct,bottom:Ot-Tt},Dt=Le.htmlRegion,Ut="visible",sr="visibleFirst";Dt!=="scroll"&&Dt!==sr&&(Dt=Ut);var vt=Dt===sr,De=yN(Pt,$),ze=yN(Rt,$),ve=Dt===Ut?ze:De,pt=vt?ze:ve;re.style.left="auto",re.style.top="auto",re.style.right="0",re.style.bottom="0";var gt=re.getBoundingClientRect();re.style.left=Re,re.style.top=Ve,re.style.right=Oe,re.style.bottom=_e,re.style.overflow=Fe,(Y=re.parentElement)===null||Y===void 0||Y.removeChild(Me);var $t=Kb(Math.round(kt/parseFloat(xe)*1e3)/1e3),It=Kb(Math.round(Ct/parseFloat(Se)*1e3)/1e3);if($t===0||It===0||zT(o)&&!dw(o))return;var Mt=Le.offset,Qt=Le.targetOffset,wr=_N(qe,Mt),br=nr(wr,2),tn=br[0],yr=br[1],dr=_N(Ce,Qt),Wt=nr(dr,2),Wr=Wt[0],Fr=Wt[1];Ce.x-=Wr,Ce.y-=Fr;var en=Le.points||[],Yr=nr(en,2),fr=Yr[0],Kr=Yr[1],Br=xN(Kr),an=xN(fr),ni=t_(Ce,Br),Nr=t_(qe,an),ii=yt({},Le),Pe=ni.x-Nr.x+tn,he=ni.y-Nr.y+yr,ge=eo(Pe,he),Te=eo(Pe,he,ze),$e=t_(Ce,["t","l"]),ke=t_(qe,["t","l"]),Ke=t_(Ce,["b","r"]),Ue=t_(qe,["b","r"]),Ne=Le.overflow||{},et=Ne.adjustX,Et=Ne.adjustY,Yt=Ne.shiftX,dt=Ne.shiftY,ir=function(Ha){return typeof Ha=="boolean"?Ha:Ha>=0},gr,mr,Sr,Gr;xo();var Rr=ir(Et),Cr=an[0]===Br[0];if(Rr&&an[0]==="t"&&(mr>pt.bottom||H.current.bt)){var Lr=he;Cr?Lr-=Ct-zt:Lr=$e.y-Ue.y-yr;var cn=eo(Pe,Lr),oi=eo(Pe,Lr,ze);cn>ge||cn===ge&&(!vt||oi>=Te)?(H.current.bt=!0,he=Lr,yr=-yr,ii.points=[am(an,0),am(Br,0)]):H.current.bt=!1}if(Rr&&an[0]==="b"&&(gr<pt.top||H.current.tb)){var Sn=he;Cr?Sn+=Ct-zt:Sn=Ke.y-ke.y-yr;var bi=eo(Pe,Sn),Li=eo(Pe,Sn,ze);bi>ge||bi===ge&&(!vt||Li>=Te)?(H.current.tb=!0,he=Sn,yr=-yr,ii.points=[am(an,0),am(Br,0)]):H.current.tb=!1}var no=ir(et),ba=an[1]===Br[1];if(no&&an[1]==="l"&&(Gr>pt.right||H.current.rl)){var io=Pe;ba?io-=kt-Nt:io=$e.x-Ue.x-tn;var ra=eo(io,he),fs=eo(io,he,ze);ra>ge||ra===ge&&(!vt||fs>=Te)?(H.current.rl=!0,Pe=io,tn=-tn,ii.points=[am(an,1),am(Br,1)]):H.current.rl=!1}if(no&&an[1]==="r"&&(Sr<pt.left||H.current.lr)){var Jr=Pe;ba?Jr+=kt-Nt:Jr=Ke.x-ke.x-tn;var di=eo(Jr,he),Ai=eo(Jr,he,ze);di>ge||di===ge&&(!vt||Ai>=Te)?(H.current.lr=!0,Pe=Jr,tn=-tn,ii.points=[am(an,1),am(Br,1)]):H.current.lr=!1}xo();var Ti=Yt===!0?0:Yt;typeof Ti=="number"&&(Sr<ze.left&&(Pe-=Sr-ze.left-tn,Ce.x+Nt<ze.left+Ti&&(Pe+=Ce.x-ze.left+Nt-Ti)),Gr>ze.right&&(Pe-=Gr-ze.right-tn,Ce.x>ze.right-Ti&&(Pe+=Ce.x-ze.right+Ti)));var Ji=dt===!0?0:dt;typeof Ji=="number"&&(gr<ze.top&&(he-=gr-ze.top-yr,Ce.y+zt<ze.top+Ji&&(he+=Ce.y-ze.top+zt-Ji)),mr>ze.bottom&&(he-=mr-ze.bottom-yr,Ce.y>ze.bottom-Ji&&(he+=Ce.y-ze.bottom+Ji)));var Xs=qe.x+Pe,Ho=Xs+kt,ji=qe.y+he,za=ji+Ct,jn=Ce.x,jr=jn+Nt,un=Ce.y,qn=un+zt,In=Math.max(Xs,jn),Ci=Math.min(Ho,jr),Qr=(In+Ci)/2,Jn=Qr-Xs,Qi=Math.max(ji,un),Lo=Math.min(za,qn),Go=(Qi+Lo)/2,Da=Go-ji;v?.(n,ii);var fi=gt.right-qe.x-(Pe+qe.width),gi=gt.bottom-qe.y-(he+qe.height);R({ready:!0,offsetX:Pe/$t,offsetY:he/It,offsetR:fi/$t,offsetB:gi/It,arrowX:Jn/$t,arrowY:Da/It,scaleX:$t,scaleY:It,align:ii})}}),Q=function(){D.current+=1;var Y=D.current;Promise.resolve().then(function(){D.current===Y&&X()})},G=function(){R(function(Y){return yt(yt({},Y),{},{ready:!1})})};return zo(G,[s]),zo(function(){t||G()},[t]),[S.ready,S.offsetX,S.offsetY,S.offsetR,S.offsetB,S.arrowX,S.arrowY,S.scaleX,S.scaleY,S.align,Q]}function jge(t,n,o,s,c){zo(function(){if(t&&n&&o){let D=function(){s(),c()};var m=n,v=o,d=OR(m),C=OR(v),S=vw(v),R=new Set([S].concat(Pr(d),Pr(C)));return R.forEach(function($){$.addEventListener("scroll",D,{passive:!0})}),S.addEventListener("resize",D,{passive:!0}),s(),function(){R.forEach(function($){$.removeEventListener("scroll",D),S.removeEventListener("resize",D)})}}},[t,n,o])}function Vge(t,n,o,s,c,m,v,d){var C=E.useRef(t),S=E.useRef(!1);C.current!==t&&(S.current=!0,C.current=t),E.useEffect(function(){var R=Do(function(){S.current=!1});return function(){Do.cancel(R)}},[t]),E.useEffect(function(){if(n&&s&&(!c||m)){var R=function(){var me=!1,pe=function(oe){var Re=oe.target;me=v(Re)},xe=function(oe){var Re=oe.target;!S.current&&C.current&&!me&&!v(Re)&&d(!1)};return[pe,xe]},D=R(),$=nr(D,2),H=$[0],Z=$[1],X=R(),Q=nr(X,2),G=Q[0],K=Q[1],Y=vw(s);Y.addEventListener("mousedown",H,!0),Y.addEventListener("click",Z,!0),Y.addEventListener("contextmenu",Z,!0);var re=NT(o);return re&&(re.addEventListener("mousedown",G,!0),re.addEventListener("click",K,!0),re.addEventListener("contextmenu",K,!0)),function(){Y.removeEventListener("mousedown",H,!0),Y.removeEventListener("click",Z,!0),Y.removeEventListener("contextmenu",Z,!0),re&&(re.removeEventListener("mousedown",G,!0),re.removeEventListener("click",K,!0),re.removeEventListener("contextmenu",K,!0))}}},[n,o,s,c,m])}var Uge=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Hge(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:XO,n=E.forwardRef(function(o,s){var c=o.prefixCls,m=c===void 0?"rc-trigger-popup":c,v=o.children,d=o.action,C=d===void 0?"hover":d,S=o.showAction,R=o.hideAction,D=o.popupVisible,$=o.defaultPopupVisible,H=o.onPopupVisibleChange,Z=o.afterPopupVisibleChange,X=o.mouseEnterDelay,Q=o.mouseLeaveDelay,G=Q===void 0?.1:Q,K=o.focusDelay,Y=o.blurDelay,re=o.mask,fe=o.maskClosable,me=fe===void 0?!0:fe,pe=o.getPopupContainer,xe=o.forceRender,Se=o.autoDestroy,oe=o.destroyPopupOnHide,Re=o.popup,Ve=o.popupClassName,Oe=o.popupStyle,_e=o.popupPlacement,Fe=o.builtinPlacements,Le=Fe===void 0?{}:Fe,Me=o.popupAlign,Ce=o.zIndex,Ye=o.stretch,qe=o.getPopupClassNameFromAlign,rt=o.fresh,Qe=o.alignPoint,St=o.onPopupClick,jt=o.onPopupAlign,Ot=o.arrow,Tt=o.popupMotion,ct=o.maskMotion,Ct=o.popupTransitionName,kt=o.popupAnimation,zt=o.maskTransitionName,Nt=o.maskAnimation,Rt=o.className,Pt=o.getTriggerDOMNode,Dt=xi(o,Uge),Ut=Se||oe||!1,sr=E.useState(!1),vt=nr(sr,2),De=vt[0],ze=vt[1];zo(function(){ze(iq())},[]);var ve=E.useRef({}),pt=E.useContext(pN),gt=E.useMemo(function(){return{registerSubPopup:function(Wn,ai){ve.current[Wn]=ai,pt?.registerSubPopup(Wn,ai)}}},[pt]),$t=AG(),It=E.useState(null),Mt=nr(It,2),Qt=Mt[0],wr=Mt[1],br=ws(function(Cn){zT(Cn)&&Qt!==Cn&&wr(Cn),pt?.registerSubPopup($t,Cn)}),tn=E.useState(null),yr=nr(tn,2),dr=yr[0],Wt=yr[1],Wr=E.useRef(null),Fr=ws(function(Cn){zT(Cn)&&dr!==Cn&&(Wt(Cn),Wr.current=Cn)}),en=E.Children.only(v),Yr=en?.props||{},fr={},Kr=ws(function(Cn){var Wn,ai,so=dr;return so?.contains(Cn)||((Wn=NT(so))===null||Wn===void 0?void 0:Wn.host)===Cn||Cn===so||Qt?.contains(Cn)||((ai=NT(Qt))===null||ai===void 0?void 0:ai.host)===Cn||Cn===Qt||Object.values(ve.current).some(function(Xi){return Xi?.contains(Cn)||Cn===Xi})}),Br=gN(m,Tt,kt,Ct),an=gN(m,ct,Nt,zt),ni=E.useState($||!1),Nr=nr(ni,2),ii=Nr[0],Pe=Nr[1],he=D??ii,ge=ws(function(Cn){D===void 0&&Pe(Cn)});zo(function(){Pe(D||!1)},[D]);var Te=E.useRef(he);Te.current=he;var $e=E.useRef([]);$e.current=[];var ke=ws(function(Cn){var Wn;ge(Cn),((Wn=$e.current[$e.current.length-1])!==null&&Wn!==void 0?Wn:he)!==Cn&&($e.current.push(Cn),H?.(Cn))}),Ke=E.useRef(),Ue=function(){clearTimeout(Ke.current)},Ne=function(Wn){var ai=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ue(),ai===0?ke(Wn):Ke.current=setTimeout(function(){ke(Wn)},ai*1e3)};E.useEffect(function(){return Ue},[]);var et=E.useState(!1),Et=nr(et,2),Yt=Et[0],dt=Et[1];zo(function(Cn){(!Cn||he)&&dt(!0)},[he]);var ir=E.useState(null),gr=nr(ir,2),mr=gr[0],Sr=gr[1],Gr=E.useState([0,0]),Rr=nr(Gr,2),Cr=Rr[0],Lr=Rr[1],cn=function(Wn){Lr([Wn.clientX,Wn.clientY])},oi=Nge(he,Qt,Qe?Cr:dr,_e,Le,Me,jt),Sn=nr(oi,11),bi=Sn[0],Li=Sn[1],no=Sn[2],ba=Sn[3],io=Sn[4],ra=Sn[5],fs=Sn[6],Jr=Sn[7],di=Sn[8],Ai=Sn[9],Ti=Sn[10],Ji=$ge(De,C,S,R),Xs=nr(Ji,2),Ho=Xs[0],ji=Xs[1],za=Ho.has("click"),jn=ji.has("click")||ji.has("contextMenu"),jr=ws(function(){Yt||Ti()}),un=function(){Te.current&&Qe&&jn&&Ne(!1)};jge(he,dr,Qt,jr,un),zo(function(){jr()},[Cr,_e]),zo(function(){he&&!(Le!=null&&Le[_e])&&jr()},[JSON.stringify(Me)]);var qn=E.useMemo(function(){var Cn=Fge(Le,m,Ai,Qe);return Gt(Cn,qe?.(Ai))},[Ai,qe,Le,m,Qe]);E.useImperativeHandle(s,function(){return{nativeElement:Wr.current,forceAlign:jr}});var In=E.useState(0),Ci=nr(In,2),Qr=Ci[0],Jn=Ci[1],Qi=E.useState(0),Lo=nr(Qi,2),Go=Lo[0],Da=Lo[1],fi=function(){if(Ye&&dr){var Wn=dr.getBoundingClientRect();Jn(Wn.width),Da(Wn.height)}},gi=function(){fi(),jr()},eo=function(Wn){dt(!1),Ti(),Z?.(Wn)},xo=function(){return new Promise(function(Wn){fi(),Sr(function(){return Wn})})};zo(function(){mr&&(Ti(),mr(),Sr(null))},[mr]);function Po(Cn,Wn,ai,so){fr[Cn]=function(Xi){var as;so?.(Xi),Ne(Wn,ai);for(var pc=arguments.length,Eu=new Array(pc>1?pc-1:0),Ys=1;Ys<pc;Ys++)Eu[Ys-1]=arguments[Ys];(as=Yr[Cn])===null||as===void 0||as.call.apply(as,[Yr,Xi].concat(Eu))}}(za||jn)&&(fr.onClick=function(Cn){var Wn;Te.current&&jn?Ne(!1):!Te.current&&za&&(cn(Cn),Ne(!0));for(var ai=arguments.length,so=new Array(ai>1?ai-1:0),Xi=1;Xi<ai;Xi++)so[Xi-1]=arguments[Xi];(Wn=Yr.onClick)===null||Wn===void 0||Wn.call.apply(Wn,[Yr,Cn].concat(so))}),Vge(he,jn,dr,Qt,re,me,Kr,Ne);var Ha=Ho.has("hover"),Ga=ji.has("hover"),qa,zs;Ha&&(Po("onMouseEnter",!0,X,function(Cn){cn(Cn)}),Po("onPointerEnter",!0,X,function(Cn){cn(Cn)}),qa=function(){(he||Yt)&&Ne(!0,X)},Qe&&(fr.onMouseMove=function(Cn){var Wn;(Wn=Yr.onMouseMove)===null||Wn===void 0||Wn.call(Yr,Cn)})),Ga&&(Po("onMouseLeave",!1,G),Po("onPointerLeave",!1,G),zs=function(){Ne(!1,G)}),Ho.has("focus")&&Po("onFocus",!0,K),ji.has("focus")&&Po("onBlur",!1,Y),Ho.has("contextMenu")&&(fr.onContextMenu=function(Cn){var Wn;Te.current&&ji.has("contextMenu")?Ne(!1):(cn(Cn),Ne(!0)),Cn.preventDefault();for(var ai=arguments.length,so=new Array(ai>1?ai-1:0),Xi=1;Xi<ai;Xi++)so[Xi-1]=arguments[Xi];(Wn=Yr.onContextMenu)===null||Wn===void 0||Wn.call.apply(Wn,[Yr,Cn].concat(so))}),Rt&&(fr.className=Gt(Yr.className,Rt));var dl=yt(yt({},Yr),fr),vr={},kn=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];kn.forEach(function(Cn){Dt[Cn]&&(vr[Cn]=function(){for(var Wn,ai=arguments.length,so=new Array(ai),Xi=0;Xi<ai;Xi++)so[Xi]=arguments[Xi];(Wn=dl[Cn])===null||Wn===void 0||Wn.call.apply(Wn,[dl].concat(so)),Dt[Cn].apply(Dt,so)})});var mo=E.cloneElement(en,yt(yt({},dl),vr)),Lt={x:ra,y:fs},Zr=Ot?yt({},Ot!==!0?Ot:{}):null;return E.createElement(E.Fragment,null,E.createElement(nh,{disabled:!he,ref:Fr,onResize:gi},E.createElement(Lge,{getTriggerDOMNode:Pt},mo)),E.createElement(pN.Provider,{value:gt},E.createElement(Dge,{portal:t,ref:br,prefixCls:m,popup:Re,className:Gt(Ve,qn),style:Oe,target:dr,onMouseEnter:qa,onMouseLeave:zs,onPointerEnter:qa,zIndex:Ce,open:he,keepDom:Yt,fresh:rt,onClick:St,mask:re,motion:Br,maskMotion:an,onVisibleChanged:eo,onPrepare:xo,forceRender:xe,autoDestroy:Ut,getPopupContainer:pe,align:Ai,arrow:Zr,arrowPos:Lt,ready:bi,offsetX:Li,offsetY:no,offsetR:ba,offsetB:io,onAlign:jr,stretch:Ye,targetWidth:Qr/Jr,targetHeight:Go/di})))});return n}const sM=Hge(XO);var Gge=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],qge=function(n){var o=n===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},Wge=function(n,o){var s=n.prefixCls;n.disabled;var c=n.visible,m=n.children,v=n.popupElement,d=n.animation,C=n.transitionName,S=n.dropdownStyle,R=n.dropdownClassName,D=n.direction,$=D===void 0?"ltr":D,H=n.placement,Z=n.builtinPlacements,X=n.dropdownMatchSelectWidth,Q=n.dropdownRender,G=n.dropdownAlign,K=n.getPopupContainer,Y=n.empty,re=n.getTriggerDOMNode,fe=n.onPopupVisibleChange,me=n.onPopupMouseEnter,pe=xi(n,Gge),xe="".concat(s,"-dropdown"),Se=v;Q&&(Se=Q(v));var oe=E.useMemo(function(){return Z||qge(X)},[Z,X]),Re=d?"".concat(xe,"-").concat(d):C,Ve=typeof X=="number",Oe=E.useMemo(function(){return Ve?null:X===!1?"minWidth":"width"},[X,Ve]),_e=S;Ve&&(_e=yt(yt({},_e),{},{width:X}));var Fe=E.useRef(null);return E.useImperativeHandle(o,function(){return{getPopupElement:function(){return Fe.current}}}),E.createElement(sM,Mr({},pe,{showAction:fe?["click"]:[],hideAction:fe?["click"]:[],popupPlacement:H||($==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:oe,prefixCls:xe,popupTransitionName:Re,popup:E.createElement("div",{ref:Fe,onMouseEnter:me},Se),stretch:Oe,popupAlign:G,popupVisible:c,getPopupContainer:K,popupClassName:Gt(R,xt({},"".concat(xe,"-empty"),Y)),popupStyle:_e,getTriggerDOMNode:re,onPopupVisibleChange:fe}),m)},fq=E.forwardRef(Wge);fq.displayName="SelectTrigger";function bN(t,n){var o=t.key,s;return"value"in t&&(s=t.value),o??(s!==void 0?s:"rc-index-key-".concat(n))}function pq(t,n){var o=t||{},s=o.label,c=o.value,m=o.options,v=o.groupLabel,d=s||(n?"children":"label");return{label:d,value:c||"value",options:m||"options",groupLabel:v||d}}function Kge(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.fieldNames,s=n.childrenAsData,c=[],m=pq(o,!1),v=m.label,d=m.value,C=m.options,S=m.groupLabel;function R(D,$){D.forEach(function(H){if($||!(C in H)){var Z=H[d];c.push({key:bN(H,c.length),groupOption:$,data:H,label:H[v],value:Z})}else{var X=H[S];X===void 0&&s&&(X=H.label),c.push({key:bN(H,c.length),group:!0,data:H,label:X}),R(H[C],!0)}})}return R(t,!1),c}function zR(t){var n=yt({},t);return"props"in n||Object.defineProperty(n,"props",{get:function(){return Ua(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),n}}),n}function Zge(t,n){if(!n||!n.length)return null;var o=!1;function s(m,v){var d=SH(v),C=d[0],S=d.slice(1);if(!C)return[m];var R=m.split(C);return o=o||R.length>1,R.reduce(function(D,$){return[].concat(Pr(D),Pr(s($,S)))},[]).filter(function(D){return D})}var c=s(t,n);return o?c:null}var Xge=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Yge=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function DR(t){return t==="tags"||t==="multiple"}var Jge=E.forwardRef(function(t,n){var o,s,c=t.id,m=t.prefixCls,v=t.className,d=t.showSearch,C=t.tagRender,S=t.direction,R=t.omitDomProps,D=t.displayValues,$=t.onDisplayValuesChange,H=t.emptyOptions,Z=t.notFoundContent,X=Z===void 0?"Not Found":Z,Q=t.onClear,G=t.mode,K=t.disabled,Y=t.loading,re=t.getInputElement,fe=t.getRawInputElement,me=t.open,pe=t.defaultOpen,xe=t.onDropdownVisibleChange,Se=t.activeValue,oe=t.onActiveValueChange,Re=t.activeDescendantId,Ve=t.searchValue,Oe=t.autoClearSearchValue,_e=t.onSearch,Fe=t.onSearchSplit,Le=t.tokenSeparators,Me=t.allowClear,Ce=t.suffixIcon,Ye=t.clearIcon,qe=t.OptionList,rt=t.animation,Qe=t.transitionName,St=t.dropdownStyle,jt=t.dropdownClassName,Ot=t.dropdownMatchSelectWidth,Tt=t.dropdownRender,ct=t.dropdownAlign,Ct=t.placement,kt=t.builtinPlacements,zt=t.getPopupContainer,Nt=t.showAction,Rt=Nt===void 0?[]:Nt,Pt=t.onFocus,Dt=t.onBlur,Ut=t.onKeyUp,sr=t.onKeyDown,vt=t.onMouseDown,De=xi(t,Xge),ze=DR(G),ve=(d!==void 0?d:ze)||G==="combobox",pt=yt({},De);Yge.forEach(function(jn){delete pt[jn]}),R?.forEach(function(jn){delete pt[jn]});var gt=E.useState(!1),$t=nr(gt,2),It=$t[0],Mt=$t[1];E.useEffect(function(){Mt(iq())},[]);var Qt=E.useRef(null),wr=E.useRef(null),br=E.useRef(null),tn=E.useRef(null),yr=E.useRef(null),dr=E.useRef(!1),Wt=lge(),Wr=nr(Wt,3),Fr=Wr[0],en=Wr[1],Yr=Wr[2];E.useImperativeHandle(n,function(){var jn,jr;return{focus:(jn=tn.current)===null||jn===void 0?void 0:jn.focus,blur:(jr=tn.current)===null||jr===void 0?void 0:jr.blur,scrollTo:function(qn){var In;return(In=yr.current)===null||In===void 0?void 0:In.scrollTo(qn)}}});var fr=E.useMemo(function(){var jn;if(G!=="combobox")return Ve;var jr=(jn=D[0])===null||jn===void 0?void 0:jn.value;return typeof jr=="string"||typeof jr=="number"?String(jr):""},[Ve,G,D]),Kr=G==="combobox"&&typeof re=="function"&&re()||null,Br=typeof fe=="function"&&fe(),an=Ey(wr,Br==null||(o=Br.props)===null||o===void 0?void 0:o.ref),ni=E.useState(!1),Nr=nr(ni,2),ii=Nr[0],Pe=Nr[1];zo(function(){Pe(!0)},[]);var he=ul(!1,{defaultValue:pe,value:me}),ge=nr(he,2),Te=ge[0],$e=ge[1],ke=ii?Te:!1,Ke=!X&&H;(K||Ke&&ke&&G==="combobox")&&(ke=!1);var Ue=Ke?!1:ke,Ne=E.useCallback(function(jn){var jr=jn!==void 0?jn:!ke;K||($e(jr),ke!==jr&&xe?.(jr))},[K,ke,$e,xe]),et=E.useMemo(function(){return(Le||[]).some(function(jn){return[`
`,`\r
`].includes(jn)})},[Le]),Et=function(jr,un,qn){var In=!0,Ci=jr;oe?.(null);var Qr=qn?null:Zge(jr,Le);return G!=="combobox"&&Qr&&(Ci="",Fe?.(Qr),Ne(!1),In=!1),_e&&fr!==Ci&&_e(Ci,{source:un?"typing":"effect"}),In},Yt=function(jr){!jr||!jr.trim()||_e(jr,{source:"submit"})};E.useEffect(function(){!ke&&!ze&&G!=="combobox"&&Et("",!1,!1)},[ke]),E.useEffect(function(){Te&&K&&$e(!1),K&&!dr.current&&en(!1)},[K]);var dt=aq(),ir=nr(dt,2),gr=ir[0],mr=ir[1],Sr=function(jr){var un=gr(),qn=jr.which;if(qn===Or.ENTER&&(G!=="combobox"&&jr.preventDefault(),ke||Ne(!0)),mr(!!fr),qn===Or.BACKSPACE&&!un&&ze&&!fr&&D.length){for(var In=Pr(D),Ci=null,Qr=In.length-1;Qr>=0;Qr-=1){var Jn=In[Qr];if(!Jn.disabled){In.splice(Qr,1),Ci=Jn;break}}Ci&&$(In,{type:"remove",values:[Ci]})}for(var Qi=arguments.length,Lo=new Array(Qi>1?Qi-1:0),Go=1;Go<Qi;Go++)Lo[Go-1]=arguments[Go];if(ke&&yr.current){var Da;(Da=yr.current).onKeyDown.apply(Da,[jr].concat(Lo))}sr?.apply(void 0,[jr].concat(Lo))},Gr=function(jr){for(var un=arguments.length,qn=new Array(un>1?un-1:0),In=1;In<un;In++)qn[In-1]=arguments[In];if(ke&&yr.current){var Ci;(Ci=yr.current).onKeyUp.apply(Ci,[jr].concat(qn))}Ut?.apply(void 0,[jr].concat(qn))},Rr=function(jr){var un=D.filter(function(qn){return qn!==jr});$(un,{type:"remove",values:[jr]})},Cr=E.useRef(!1),Lr=function(){en(!0),K||(Pt&&!Cr.current&&Pt.apply(void 0,arguments),Rt.includes("focus")&&Ne(!0)),Cr.current=!0},cn=function(){dr.current=!0,en(!1,function(){Cr.current=!1,dr.current=!1,Ne(!1)}),!K&&(fr&&(G==="tags"?_e(fr,{source:"submit"}):G==="multiple"&&_e("",{source:"blur"})),Dt&&Dt.apply(void 0,arguments))},oi=[];E.useEffect(function(){return function(){oi.forEach(function(jn){return clearTimeout(jn)}),oi.splice(0,oi.length)}},[]);var Sn=function(jr){var un,qn=jr.target,In=(un=br.current)===null||un===void 0?void 0:un.getPopupElement();if(In&&In.contains(qn)){var Ci=setTimeout(function(){var Lo=oi.indexOf(Ci);if(Lo!==-1&&oi.splice(Lo,1),Yr(),!It&&!In.contains(document.activeElement)){var Go;(Go=tn.current)===null||Go===void 0||Go.focus()}});oi.push(Ci)}for(var Qr=arguments.length,Jn=new Array(Qr>1?Qr-1:0),Qi=1;Qi<Qr;Qi++)Jn[Qi-1]=arguments[Qi];vt?.apply(void 0,[jr].concat(Jn))},bi=E.useState({}),Li=nr(bi,2),no=Li[1];function ba(){no({})}var io;Br&&(io=function(jr){Ne(jr)}),cge(function(){var jn;return[Qt.current,(jn=br.current)===null||jn===void 0?void 0:jn.getPopupElement()]},Ue,Ne,!!Br);var ra=E.useMemo(function(){return yt(yt({},t),{},{notFoundContent:X,open:ke,triggerOpen:Ue,id:c,showSearch:ve,multiple:ze,toggleOpen:Ne})},[t,X,Ue,ke,c,ve,ze,Ne]),fs=!!Ce||Y,Jr;fs&&(Jr=E.createElement(aM,{className:Gt("".concat(m,"-arrow"),xt({},"".concat(m,"-arrow-loading"),Y)),customizeIcon:Ce,customizeIconProps:{loading:Y,searchValue:fr,open:ke,focused:Fr,showSearch:ve}}));var di=function(){var jr;Q?.(),(jr=tn.current)===null||jr===void 0||jr.focus(),$([],{type:"clear",values:D}),Et("",!1,!1)},Ai=age(m,di,D,Me,Ye,K,fr,G),Ti=Ai.allowClear,Ji=Ai.clearIcon,Xs=E.createElement(qe,{ref:yr}),Ho=Gt(m,v,(s={},xt(s,"".concat(m,"-focused"),Fr),xt(s,"".concat(m,"-multiple"),ze),xt(s,"".concat(m,"-single"),!ze),xt(s,"".concat(m,"-allow-clear"),Me),xt(s,"".concat(m,"-show-arrow"),fs),xt(s,"".concat(m,"-disabled"),K),xt(s,"".concat(m,"-loading"),Y),xt(s,"".concat(m,"-open"),ke),xt(s,"".concat(m,"-customize-input"),Kr),xt(s,"".concat(m,"-show-search"),ve),s)),ji=E.createElement(fq,{ref:br,disabled:K,prefixCls:m,visible:Ue,popupElement:Xs,animation:rt,transitionName:Qe,dropdownStyle:St,dropdownClassName:jt,direction:S,dropdownMatchSelectWidth:Ot,dropdownRender:Tt,dropdownAlign:ct,placement:Ct,builtinPlacements:kt,getPopupContainer:zt,empty:H,getTriggerDOMNode:function(){return wr.current},onPopupVisibleChange:io,onPopupMouseEnter:ba},Br?E.cloneElement(Br,{ref:an}):E.createElement(dq,Mr({},t,{domRef:wr,prefixCls:m,inputElement:Kr,ref:tn,id:c,showSearch:ve,autoClearSearchValue:Oe,mode:G,activeDescendantId:Re,tagRender:C,values:D,open:ke,onToggleOpen:Ne,activeValue:Se,searchValue:fr,onSearch:Et,onSearchSubmit:Yt,onRemove:Rr,tokenWithEnter:et}))),za;return Br?za=ji:za=E.createElement("div",Mr({className:Ho},pt,{ref:Qt,onMouseDown:Sn,onKeyDown:Sr,onKeyUp:Gr,onFocus:Lr,onBlur:cn}),Fr&&!ke&&E.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(D.map(function(jn){var jr=jn.label,un=jn.value;return["number","string"].includes(Ei(jr))?jr:un}).join(", "))),ji,Jr,Ti&&Ji),E.createElement(oq.Provider,{value:ra},za)}),cz=function(){return null};cz.isSelectOptGroup=!0;var uz=function(){return null};uz.isSelectOption=!0;var mq=E.forwardRef(function(t,n){var o=t.height,s=t.offsetY,c=t.offsetX,m=t.children,v=t.prefixCls,d=t.onInnerResize,C=t.innerProps,S=t.rtl,R=t.extra,D={},$={display:"flex",flexDirection:"column"};if(s!==void 0){var H;D={height:o,position:"relative",overflow:"hidden"},$=yt(yt({},$),{},(H={transform:"translateY(".concat(s,"px)")},xt(H,S?"marginRight":"marginLeft",-c),xt(H,"position","absolute"),xt(H,"left",0),xt(H,"right",0),xt(H,"top",0),H))}return E.createElement("div",{style:D},E.createElement(nh,{onResize:function(X){var Q=X.offsetHeight;Q&&d&&d()}},E.createElement("div",Mr({style:$,className:Gt(xt({},"".concat(v,"-holder-inner"),v)),ref:n},C),m,R)))});mq.displayName="Filler";function wN(t,n){var o="touches"in t?t.touches[0]:t;return o[n?"pageX":"pageY"]}var SN=E.forwardRef(function(t,n){var o,s=t.prefixCls,c=t.rtl,m=t.scrollOffset,v=t.scrollRange,d=t.onStartMove,C=t.onStopMove,S=t.onScroll,R=t.horizontal,D=t.spinSize,$=t.containerSize,H=t.style,Z=t.thumbStyle,X=E.useState(!1),Q=nr(X,2),G=Q[0],K=Q[1],Y=E.useState(null),re=nr(Y,2),fe=re[0],me=re[1],pe=E.useState(null),xe=nr(pe,2),Se=xe[0],oe=xe[1],Re=!c,Ve=E.useRef(),Oe=E.useRef(),_e=E.useState(!1),Fe=nr(_e,2),Le=Fe[0],Me=Fe[1],Ce=E.useRef(),Ye=function(){clearTimeout(Ce.current),Me(!0),Ce.current=setTimeout(function(){Me(!1)},3e3)},qe=v-$||0,rt=$-D||0,Qe=qe>0,St=E.useMemo(function(){if(m===0||qe===0)return 0;var Rt=m/qe;return Rt*rt},[m,qe,rt]),jt=function(Pt){Pt.stopPropagation(),Pt.preventDefault()},Ot=E.useRef({top:St,dragging:G,pageY:fe,startTop:Se});Ot.current={top:St,dragging:G,pageY:fe,startTop:Se};var Tt=function(Pt){K(!0),me(wN(Pt,R)),oe(Ot.current.top),d(),Pt.stopPropagation(),Pt.preventDefault()};E.useEffect(function(){var Rt=function(sr){sr.preventDefault()},Pt=Ve.current,Dt=Oe.current;return Pt.addEventListener("touchstart",Rt),Dt.addEventListener("touchstart",Tt),function(){Pt.removeEventListener("touchstart",Rt),Dt.removeEventListener("touchstart",Tt)}},[]);var ct=E.useRef();ct.current=qe;var Ct=E.useRef();Ct.current=rt,E.useEffect(function(){if(G){var Rt,Pt=function(sr){var vt=Ot.current,De=vt.dragging,ze=vt.pageY,ve=vt.startTop;if(Do.cancel(Rt),De){var pt=wN(sr,R)-ze,gt=ve;!Re&&R?gt-=pt:gt+=pt;var $t=ct.current,It=Ct.current,Mt=It?gt/It:0,Qt=Math.ceil(Mt*$t);Qt=Math.max(Qt,0),Qt=Math.min(Qt,$t),Rt=Do(function(){S(Qt,R)})}},Dt=function(){K(!1),C()};return window.addEventListener("mousemove",Pt),window.addEventListener("touchmove",Pt),window.addEventListener("mouseup",Dt),window.addEventListener("touchend",Dt),function(){window.removeEventListener("mousemove",Pt),window.removeEventListener("touchmove",Pt),window.removeEventListener("mouseup",Dt),window.removeEventListener("touchend",Dt),Do.cancel(Rt)}}},[G]),E.useEffect(function(){Ye()},[m]),E.useImperativeHandle(n,function(){return{delayHidden:Ye}});var kt="".concat(s,"-scrollbar"),zt={position:"absolute",visibility:Le&&Qe?null:"hidden"},Nt={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return R?(zt.height=8,zt.left=0,zt.right=0,zt.bottom=0,Nt.height="100%",Nt.width=D,Re?Nt.left=St:Nt.right=St):(zt.width=8,zt.top=0,zt.bottom=0,Re?zt.right=0:zt.left=0,Nt.width="100%",Nt.height=D,Nt.top=St),E.createElement("div",{ref:Ve,className:Gt(kt,(o={},xt(o,"".concat(kt,"-horizontal"),R),xt(o,"".concat(kt,"-vertical"),!R),xt(o,"".concat(kt,"-visible"),Le),o)),style:yt(yt({},zt),H),onMouseDown:jt,onMouseMove:Ye},E.createElement("div",{ref:Oe,className:Gt("".concat(kt,"-thumb"),xt({},"".concat(kt,"-thumb-moving"),G)),style:yt(yt({},Nt),Z),onMouseDown:Tt}))});function Qge(t){var n=t.children,o=t.setRef,s=E.useCallback(function(c){o(c)},[]);return E.cloneElement(n,{ref:s})}function eye(t,n,o,s,c,m,v){var d=v.getKey;return t.slice(n,o+1).map(function(C,S){var R=n+S,D=m(C,R,{style:{width:s}}),$=d(C);return E.createElement(Qge,{key:$,setRef:function(Z){return c(C,Z)}},D)})}var tye=function(){function t(){Il(this,t),this.maps=void 0,this.id=0,this.maps=Object.create(null)}return Ml(t,[{key:"set",value:function(o,s){this.maps[o]=s,this.id+=1}},{key:"get",value:function(o){return this.maps[o]}}]),t}();function rye(t,n,o){var s=E.useState(0),c=nr(s,2),m=c[0],v=c[1],d=E.useRef(new Map),C=E.useRef(new tye),S=E.useRef();function R(){Do.cancel(S.current)}function D(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var Z=function(){d.current.forEach(function(Q,G){if(Q&&Q.offsetParent){var K=ob(Q),Y=K.offsetHeight;C.current.get(G)!==Y&&C.current.set(G,K.offsetHeight)}}),v(function(Q){return Q+1})};H?Z():S.current=Do(Z)}function $(H,Z){var X=t(H),Q=d.current.get(X);Z?(d.current.set(X,Z),D()):d.current.delete(X),!Q!=!Z&&(Z?n?.(H):o?.(H))}return E.useEffect(function(){return R},[]),[$,D,C.current,m]}var nye=10;function iye(t,n,o,s,c,m,v,d){var C=E.useRef(),S=E.useState(null),R=nr(S,2),D=R[0],$=R[1];return zo(function(){if(D&&D.times<nye){if(!t.current){$(function(Ye){return yt({},Ye)});return}m();var H=D.targetAlign,Z=D.originAlign,X=D.index,Q=D.offset,G=t.current.clientHeight,K=!1,Y=H,re=null;if(G){for(var fe=H||Z,me=0,pe=0,xe=0,Se=Math.min(n.length-1,X),oe=0;oe<=Se;oe+=1){var Re=c(n[oe]);pe=me;var Ve=o.get(Re);xe=pe+(Ve===void 0?s:Ve),me=xe}for(var Oe=fe==="top"?Q:G-Q,_e=Se;_e>=0;_e-=1){var Fe=c(n[_e]),Le=o.get(Fe);if(Le===void 0){K=!0;break}if(Oe-=Le,Oe<=0)break}switch(fe){case"top":re=pe-Q;break;case"bottom":re=xe-G+Q;break;default:{var Me=t.current.scrollTop,Ce=Me+G;pe<Me?Y="top":xe>Ce&&(Y="bottom")}}re!==null&&v(re),re!==D.lastTop&&(K=!0)}K&&$(yt(yt({},D),{},{times:D.times+1,targetAlign:Y,lastTop:re}))}},[D,t.current]),function(H){if(H==null){d();return}if(Do.cancel(C.current),typeof H=="number")v(H);else if(H&&Ei(H)==="object"){var Z,X=H.align;"index"in H?Z=H.index:Z=n.findIndex(function(K){return c(K)===H.key});var Q=H.offset,G=Q===void 0?0:Q;$({times:0,index:Z,offset:G,originAlign:X})}}}function oye(t,n,o){var s=t.length,c=n.length,m,v;if(s===0&&c===0)return null;s<c?(m=t,v=n):(m=n,v=t);var d={__EMPTY_ITEM__:!0};function C(Z){return Z!==void 0?o(Z):d}for(var S=null,R=Math.abs(s-c)!==1,D=0;D<v.length;D+=1){var $=C(m[D]),H=C(v[D]);if($!==H){S=D,R=R||$!==C(v[D+1]);break}}return S===null?null:{index:S,multiple:R}}function aye(t,n,o){var s=E.useState(t),c=nr(s,2),m=c[0],v=c[1],d=E.useState(null),C=nr(d,2),S=C[0],R=C[1];return E.useEffect(function(){var D=oye(m||[],t||[],n);D?.index!==void 0&&(o?.(D.index),R(t[D.index])),v(t)},[t]),[S]}var CN=(typeof navigator>"u"?"undefined":Ei(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const gq=function(t,n){var o=E.useRef(!1),s=E.useRef(null);function c(){clearTimeout(s.current),o.current=!0,s.current=setTimeout(function(){o.current=!1},50)}var m=E.useRef({top:t,bottom:n});return m.current.top=t,m.current.bottom=n,function(v){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=v<0&&m.current.top||v>0&&m.current.bottom;return d&&C?(clearTimeout(s.current),o.current=!1):(!C||o.current)&&c(),!o.current&&C}};function sye(t,n,o,s,c){var m=E.useRef(0),v=E.useRef(null),d=E.useRef(null),C=E.useRef(!1),S=gq(n,o);function R(Q,G){Do.cancel(v.current),m.current+=G,d.current=G,!S(G)&&(CN||Q.preventDefault(),v.current=Do(function(){var K=C.current?10:1;c(m.current*K),m.current=0}))}function D(Q,G){c(G,!0),CN||Q.preventDefault()}var $=E.useRef(null),H=E.useRef(null);function Z(Q){if(t){Do.cancel(H.current),H.current=Do(function(){$.current=null},2);var G=Q.deltaX,K=Q.deltaY,Y=Q.shiftKey,re=G,fe=K;($.current==="sx"||!$.current&&Y&&K&&!G)&&(re=K,fe=0,$.current="sx");var me=Math.abs(re),pe=Math.abs(fe);$.current===null&&($.current=s&&me>pe?"x":"y"),$.current==="y"?R(Q,fe):D(Q,re)}}function X(Q){t&&(C.current=Q.detail===d.current)}return[Z,X]}var lye=14/15;function cye(t,n,o){var s=E.useRef(!1),c=E.useRef(0),m=E.useRef(null),v=E.useRef(null),d,C=function($){if(s.current){var H=Math.ceil($.touches[0].pageY),Z=c.current-H;c.current=H,o(Z)&&$.preventDefault(),clearInterval(v.current),v.current=setInterval(function(){Z*=lye,(!o(Z,!0)||Math.abs(Z)<=.1)&&clearInterval(v.current)},16)}},S=function(){s.current=!1,d()},R=function($){d(),$.touches.length===1&&!s.current&&(s.current=!0,c.current=Math.ceil($.touches[0].pageY),m.current=$.target,m.current.addEventListener("touchmove",C),m.current.addEventListener("touchend",S))};d=function(){m.current&&(m.current.removeEventListener("touchmove",C),m.current.removeEventListener("touchend",S))},zo(function(){return t&&n.current.addEventListener("touchstart",R),function(){var D;(D=n.current)===null||D===void 0||D.removeEventListener("touchstart",R),d(),clearInterval(v.current)}},[t])}var uye=20;function EN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=t/n*100;return isNaN(o)&&(o=0),o=Math.max(o,uye),o=Math.min(o,t/2),Math.floor(o)}function hye(t,n,o,s){var c=E.useMemo(function(){return[new Map,[]]},[t,o.id,s]),m=nr(c,2),v=m[0],d=m[1],C=function(R){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,$=v.get(R),H=v.get(D);if($===void 0||H===void 0)for(var Z=t.length,X=d.length;X<Z;X+=1){var Q,G=t[X],K=n(G);v.set(K,X);var Y=(Q=o.get(K))!==null&&Q!==void 0?Q:s;if(d[X]=(d[X-1]||0)+Y,K===R&&($=X),K===D&&(H=X),$!==void 0&&H!==void 0)break}return{top:d[$-1]||0,bottom:d[H]}};return C}var dye=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],fye=[],pye={overflowY:"auto",overflowAnchor:"none"};function mye(t,n){var o=t.prefixCls,s=o===void 0?"rc-virtual-list":o,c=t.className,m=t.height,v=t.itemHeight,d=t.fullHeight,C=d===void 0?!0:d,S=t.style,R=t.data,D=t.children,$=t.itemKey,H=t.virtual,Z=t.direction,X=t.scrollWidth,Q=t.component,G=Q===void 0?"div":Q,K=t.onScroll,Y=t.onVirtualScroll,re=t.onVisibleChange,fe=t.innerProps,me=t.extraRender,pe=t.styles,xe=xi(t,dye),Se=!!(H!==!1&&m&&v),oe=Se&&R&&(v*R.length>m||!!X),Re=Z==="rtl",Ve=Gt(s,xt({},"".concat(s,"-rtl"),Re),c),Oe=R||fye,_e=E.useRef(),Fe=E.useRef(),Le=E.useState(0),Me=nr(Le,2),Ce=Me[0],Ye=Me[1],qe=E.useState(0),rt=nr(qe,2),Qe=rt[0],St=rt[1],jt=E.useState(!1),Ot=nr(jt,2),Tt=Ot[0],ct=Ot[1],Ct=function(){ct(!0)},kt=function(){ct(!1)},zt=E.useCallback(function(Rr){return typeof $=="function"?$(Rr):Rr?.[$]},[$]),Nt={getKey:zt};function Rt(Rr){Ye(function(Cr){var Lr;typeof Rr=="function"?Lr=Rr(Cr):Lr=Rr;var cn=an(Lr);return _e.current.scrollTop=cn,cn})}var Pt=E.useRef({start:0,end:Oe.length}),Dt=E.useRef(),Ut=aye(Oe,zt),sr=nr(Ut,1),vt=sr[0];Dt.current=vt;var De=rye(zt,null,null),ze=nr(De,4),ve=ze[0],pt=ze[1],gt=ze[2],$t=ze[3],It=E.useMemo(function(){if(!Se)return{scrollHeight:void 0,start:0,end:Oe.length-1,offset:void 0};if(!oe){var Rr;return{scrollHeight:((Rr=Fe.current)===null||Rr===void 0?void 0:Rr.offsetHeight)||0,start:0,end:Oe.length-1,offset:void 0}}for(var Cr=0,Lr,cn,oi,Sn=Oe.length,bi=0;bi<Sn;bi+=1){var Li=Oe[bi],no=zt(Li),ba=gt.get(no),io=Cr+(ba===void 0?v:ba);io>=Ce&&Lr===void 0&&(Lr=bi,cn=Cr),io>Ce+m&&oi===void 0&&(oi=bi),Cr=io}return Lr===void 0&&(Lr=0,cn=0,oi=Math.ceil(m/v)),oi===void 0&&(oi=Oe.length-1),oi=Math.min(oi+1,Oe.length-1),{scrollHeight:Cr,start:Lr,end:oi,offset:cn}},[oe,Se,Ce,Oe,$t,m]),Mt=It.scrollHeight,Qt=It.start,wr=It.end,br=It.offset;Pt.current.start=Qt,Pt.current.end=wr;var tn=E.useState({width:0,height:m}),yr=nr(tn,2),dr=yr[0],Wt=yr[1],Wr=function(Cr){Wt({width:Cr.width||Cr.offsetWidth,height:Cr.height||Cr.offsetHeight})},Fr=E.useRef(),en=E.useRef(),Yr=E.useMemo(function(){return EN(dr.width,X)},[dr.width,X]),fr=E.useMemo(function(){return EN(dr.height,Mt)},[dr.height,Mt]),Kr=Mt-m,Br=E.useRef(Kr);Br.current=Kr;function an(Rr){var Cr=Rr;return Number.isNaN(Br.current)||(Cr=Math.min(Cr,Br.current)),Cr=Math.max(Cr,0),Cr}var ni=Ce<=0,Nr=Ce>=Kr,ii=gq(ni,Nr),Pe=function(){return{x:Re?-Qe:Qe,y:Ce}},he=E.useRef(Pe()),ge=ws(function(){if(Y){var Rr=Pe();(he.current.x!==Rr.x||he.current.y!==Rr.y)&&(Y(Rr),he.current=Rr)}});function Te(Rr,Cr){var Lr=Rr;Cr?(Nh.flushSync(function(){St(Lr)}),ge()):Rt(Lr)}function $e(Rr){var Cr=Rr.currentTarget.scrollTop;Cr!==Ce&&Rt(Cr),K?.(Rr),ge()}var ke=function(Cr){var Lr=Cr,cn=X-dr.width;return Lr=Math.max(Lr,0),Lr=Math.min(Lr,cn),Lr},Ke=ws(function(Rr,Cr){Cr?(Nh.flushSync(function(){St(function(Lr){var cn=Lr+(Re?-Rr:Rr);return ke(cn)})}),ge()):Rt(function(Lr){var cn=Lr+Rr;return cn})}),Ue=sye(Se,ni,Nr,!!X,Ke),Ne=nr(Ue,2),et=Ne[0],Et=Ne[1];cye(Se,_e,function(Rr,Cr){return ii(Rr,Cr)?!1:(et({preventDefault:function(){},deltaY:Rr}),!0)}),zo(function(){function Rr(Lr){Se&&Lr.preventDefault()}var Cr=_e.current;return Cr.addEventListener("wheel",et),Cr.addEventListener("DOMMouseScroll",Et),Cr.addEventListener("MozMousePixelScroll",Rr),function(){Cr.removeEventListener("wheel",et),Cr.removeEventListener("DOMMouseScroll",Et),Cr.removeEventListener("MozMousePixelScroll",Rr)}},[Se]),zo(function(){X&&St(function(Rr){return ke(Rr)})},[dr.width,X]);var Yt=function(){var Cr,Lr;(Cr=Fr.current)===null||Cr===void 0||Cr.delayHidden(),(Lr=en.current)===null||Lr===void 0||Lr.delayHidden()},dt=iye(_e,Oe,gt,v,zt,function(){return pt(!0)},Rt,Yt);E.useImperativeHandle(n,function(){return{getScrollInfo:Pe,scrollTo:function(Cr){function Lr(cn){return cn&&Ei(cn)==="object"&&("left"in cn||"top"in cn)}Lr(Cr)?(Cr.left!==void 0&&St(ke(Cr.left)),dt(Cr.top)):dt(Cr)}}}),zo(function(){if(re){var Rr=Oe.slice(Qt,wr+1);re(Rr,Oe)}},[Qt,wr,Oe]);var ir=hye(Oe,zt,gt,v),gr=me?.({start:Qt,end:wr,virtual:oe,offsetX:Qe,offsetY:br,rtl:Re,getSize:ir}),mr=eye(Oe,Qt,wr,X,ve,D,Nt),Sr=null;m&&(Sr=yt(xt({},C?"height":"maxHeight",m),pye),Se&&(Sr.overflowY="hidden",X&&(Sr.overflowX="hidden"),Tt&&(Sr.pointerEvents="none")));var Gr={};return Re&&(Gr.dir="rtl"),E.createElement("div",Mr({style:yt(yt({},S),{},{position:"relative"}),className:Ve},Gr,xe),E.createElement(nh,{onResize:Wr},E.createElement(G,{className:"".concat(s,"-holder"),style:Sr,ref:_e,onScroll:$e,onMouseEnter:Yt},E.createElement(mq,{prefixCls:s,height:Mt,offsetX:Qe,offsetY:br,scrollWidth:X,onInnerResize:pt,ref:Fe,innerProps:fe,rtl:Re,extra:gr},mr))),oe&&Mt>m&&E.createElement(SN,{ref:Fr,prefixCls:s,scrollOffset:Ce,scrollRange:Mt,rtl:Re,onScroll:Te,onStartMove:Ct,onStopMove:kt,spinSize:fr,containerSize:dr.height,style:pe?.verticalScrollBar,thumbStyle:pe?.verticalScrollBarThumb}),oe&&X&&E.createElement(SN,{ref:en,prefixCls:s,scrollOffset:Qe,scrollRange:X,rtl:Re,onScroll:Te,onStartMove:Ct,onStopMove:kt,spinSize:Yr,containerSize:dr.width,horizontal:!0,style:pe?.horizontalScrollBar,thumbStyle:pe?.horizontalScrollBarThumb}))}var lM=E.forwardRef(mye);lM.displayName="List";var yq=E.createContext(null);function gye(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var yye=["disabled","title","children","style","className"];function TN(t){return typeof t=="string"||typeof t=="number"}var vye=function(n,o){var s=sge(),c=s.prefixCls,m=s.id,v=s.open,d=s.multiple,C=s.mode,S=s.searchValue,R=s.toggleOpen,D=s.notFoundContent,$=s.onPopupScroll,H=E.useContext(yq),Z=H.flattenOptions,X=H.onActiveValue,Q=H.defaultActiveFirstOption,G=H.onSelect,K=H.menuItemSelectedIcon,Y=H.rawValues,re=H.fieldNames,fe=H.virtual,me=H.direction,pe=H.listHeight,xe=H.listItemHeight,Se=H.optionRender,oe="".concat(c,"-item"),Re=Hm(function(){return Z},[v,Z],function(Ct,kt){return kt[0]&&Ct[1]!==kt[1]}),Ve=E.useRef(null),Oe=function(kt){kt.preventDefault()},_e=function(kt){Ve.current&&Ve.current.scrollTo(typeof kt=="number"?{index:kt}:kt)},Fe=function(kt){for(var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Nt=Re.length,Rt=0;Rt<Nt;Rt+=1){var Pt=(kt+Rt*zt+Nt)%Nt,Dt=Re[Pt],Ut=Dt.group,sr=Dt.data;if(!Ut&&!sr.disabled)return Pt}return-1},Le=E.useState(function(){return Fe(0)}),Me=nr(Le,2),Ce=Me[0],Ye=Me[1],qe=function(kt){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Ye(kt);var Nt={source:zt?"keyboard":"mouse"},Rt=Re[kt];if(!Rt){X(null,-1,Nt);return}X(Rt.value,kt,Nt)};E.useEffect(function(){qe(Q!==!1?Fe(0):-1)},[Re.length,S]);var rt=E.useCallback(function(Ct){return Y.has(Ct)&&C!=="combobox"},[C,Pr(Y).toString(),Y.size]);E.useEffect(function(){var Ct=setTimeout(function(){if(!d&&v&&Y.size===1){var zt=Array.from(Y)[0],Nt=Re.findIndex(function(Rt){var Pt=Rt.data;return Pt.value===zt});Nt!==-1&&(qe(Nt),_e(Nt))}});if(v){var kt;(kt=Ve.current)===null||kt===void 0||kt.scrollTo(void 0)}return function(){return clearTimeout(Ct)}},[v,S]);var Qe=function(kt){kt!==void 0&&G(kt,{selected:!Y.has(kt)}),d||R(!1)};if(E.useImperativeHandle(o,function(){return{onKeyDown:function(kt){var zt=kt.which,Nt=kt.ctrlKey;switch(zt){case Or.N:case Or.P:case Or.UP:case Or.DOWN:{var Rt=0;if(zt===Or.UP?Rt=-1:zt===Or.DOWN?Rt=1:gye()&&Nt&&(zt===Or.N?Rt=1:zt===Or.P&&(Rt=-1)),Rt!==0){var Pt=Fe(Ce+Rt,Rt);_e(Pt),qe(Pt,!0)}break}case Or.ENTER:{var Dt=Re[Ce];Dt&&!Dt.data.disabled?Qe(Dt.value):Qe(void 0),v&&kt.preventDefault();break}case Or.ESC:R(!1),v&&kt.stopPropagation()}},onKeyUp:function(){},scrollTo:function(kt){_e(kt)}}}),Re.length===0)return E.createElement("div",{role:"listbox",id:"".concat(m,"_list"),className:"".concat(oe,"-empty"),onMouseDown:Oe},D);var St=Object.keys(re).map(function(Ct){return re[Ct]}),jt=function(kt){return kt.label};function Ot(Ct,kt){var zt=Ct.group;return{role:zt?"presentation":"option",id:"".concat(m,"_list_").concat(kt)}}var Tt=function(kt){var zt=Re[kt];if(!zt)return null;var Nt=zt.data||{},Rt=Nt.value,Pt=zt.group,Dt=Uh(Nt,!0),Ut=jt(zt);return zt?E.createElement("div",Mr({"aria-label":typeof Ut=="string"&&!Pt?Ut:null},Dt,{key:kt},Ot(zt,kt),{"aria-selected":rt(Rt)}),Rt):null},ct={role:"listbox",id:"".concat(m,"_list")};return E.createElement(E.Fragment,null,fe&&E.createElement("div",Mr({},ct,{style:{height:0,width:0,overflow:"hidden"}}),Tt(Ce-1),Tt(Ce),Tt(Ce+1)),E.createElement(lM,{itemKey:"key",ref:Ve,data:Re,height:pe,itemHeight:xe,fullHeight:!1,onMouseDown:Oe,onScroll:$,virtual:fe,direction:me,innerProps:fe?null:ct},function(Ct,kt){var zt,Nt=Ct.group,Rt=Ct.groupOption,Pt=Ct.data,Dt=Ct.label,Ut=Ct.value,sr=Pt.key;if(Nt){var vt,De=(vt=Pt.title)!==null&&vt!==void 0?vt:TN(Dt)?Dt.toString():void 0;return E.createElement("div",{className:Gt(oe,"".concat(oe,"-group")),title:De},Dt!==void 0?Dt:sr)}var ze=Pt.disabled,ve=Pt.title;Pt.children;var pt=Pt.style,gt=Pt.className,$t=xi(Pt,yye),It=Zs($t,St),Mt=rt(Ut),Qt="".concat(oe,"-option"),wr=Gt(oe,Qt,gt,(zt={},xt(zt,"".concat(Qt,"-grouped"),Rt),xt(zt,"".concat(Qt,"-active"),Ce===kt&&!ze),xt(zt,"".concat(Qt,"-disabled"),ze),xt(zt,"".concat(Qt,"-selected"),Mt),zt)),br=jt(Ct),tn=!K||typeof K=="function"||Mt,yr=typeof br=="number"?br:br||Ut,dr=TN(yr)?yr.toString():void 0;return ve!==void 0&&(dr=ve),E.createElement("div",Mr({},Uh(It),fe?{}:Ot(Ct,kt),{"aria-selected":Mt,className:wr,title:dr,onMouseMove:function(){Ce===kt||ze||qe(kt)},onClick:function(){ze||Qe(Ut)},style:pt}),E.createElement("div",{className:"".concat(Qt,"-content")},typeof Se=="function"?Se(Ct,{index:kt}):yr),E.isValidElement(K)||Mt,tn&&E.createElement(aM,{className:"".concat(oe,"-option-state"),customizeIcon:K,customizeIconProps:{value:Ut,disabled:ze,isSelected:Mt}},Mt?"✓":null))}))},vq=E.forwardRef(vye);vq.displayName="OptionList";const _ye=function(t,n){var o=E.useRef({values:new Map,options:new Map}),s=E.useMemo(function(){var m=o.current,v=m.values,d=m.options,C=t.map(function(D){if(D.label===void 0){var $;return yt(yt({},D),{},{label:($=v.get(D.value))===null||$===void 0?void 0:$.label})}return D}),S=new Map,R=new Map;return C.forEach(function(D){S.set(D.value,D),R.set(D.value,n.get(D.value)||d.get(D.value))}),o.current.values=S,o.current.options=R,C},[t,n]),c=E.useCallback(function(m){return n.get(m)||o.current.options.get(m)},[n]);return[s,c]};function WP(t,n){return uq(t).join("").toUpperCase().includes(n)}const xye=function(t,n,o,s,c){return E.useMemo(function(){if(!o||s===!1)return t;var m=n.options,v=n.label,d=n.value,C=[],S=typeof s=="function",R=o.toUpperCase(),D=S?s:function(H,Z){return c?WP(Z[c],R):Z[m]?WP(Z[v!=="children"?v:"label"],R):WP(Z[d],R)},$=S?function(H){return zR(H)}:function(H){return H};return t.forEach(function(H){if(H[m]){var Z=D(o,$(H));if(Z)C.push(H);else{var X=H[m].filter(function(Q){return D(o,$(Q))});X.length&&C.push(yt(yt({},H),{},xt({},m,X)))}return}D(o,$(H))&&C.push(H)}),C},[t,s,c,o,n])};var IN=0,bye=hl();function wye(){var t;return bye?(t=IN,IN+=1):t="TEST_OR_SSR",t}function Sye(t){var n=E.useState(),o=nr(n,2),s=o[0],c=o[1];return E.useEffect(function(){c("rc_select_".concat(wye()))},[]),t||s}var Cye=["children","value"],Eye=["children"];function Tye(t){var n=t,o=n.key,s=n.props,c=s.children,m=s.value,v=xi(s,Cye);return yt({key:o,value:m!==void 0?m:o,children:c},v)}function _q(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return $c(t).map(function(o,s){if(!E.isValidElement(o)||!o.type)return null;var c=o,m=c.type.isSelectOptGroup,v=c.key,d=c.props,C=d.children,S=xi(d,Eye);return n||!m?Tye(o):yt(yt({key:"__RC_SELECT_GRP__".concat(v===null?s:v,"__"),label:v},S),{},{options:_q(C)})}).filter(function(o){return o})}function Iye(t,n,o,s,c){return E.useMemo(function(){var m=t,v=!t;v&&(m=_q(n));var d=new Map,C=new Map,S=function($,H,Z){Z&&typeof Z=="string"&&$.set(H[Z],H)};function R(D){for(var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,H=0;H<D.length;H+=1){var Z=D[H];!Z[o.options]||$?(d.set(Z[o.value],Z),S(C,Z,o.label),S(C,Z,s),S(C,Z,c)):R(Z[o.options],!0)}}return R(m),{options:m,valueOptions:d,labelOptions:C}},[t,n,o,s,c])}function MN(t){var n=E.useRef();n.current=t;var o=E.useCallback(function(){return n.current.apply(n,arguments)},[]);return o}var Mye=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],Pye=["inputValue"];function Aye(t){return!t||Ei(t)!=="object"}var Rye=E.forwardRef(function(t,n){var o=t.id,s=t.mode,c=t.prefixCls,m=c===void 0?"rc-select":c,v=t.backfill,d=t.fieldNames,C=t.inputValue,S=t.searchValue,R=t.onSearch,D=t.autoClearSearchValue,$=D===void 0?!0:D,H=t.onSelect,Z=t.onDeselect,X=t.dropdownMatchSelectWidth,Q=X===void 0?!0:X,G=t.filterOption,K=t.filterSort,Y=t.optionFilterProp,re=t.optionLabelProp,fe=t.options,me=t.optionRender,pe=t.children,xe=t.defaultActiveFirstOption,Se=t.menuItemSelectedIcon,oe=t.virtual,Re=t.direction,Ve=t.listHeight,Oe=Ve===void 0?200:Ve,_e=t.listItemHeight,Fe=_e===void 0?20:_e,Le=t.value,Me=t.defaultValue,Ce=t.labelInValue,Ye=t.onChange,qe=xi(t,Mye),rt=Sye(o),Qe=DR(s),St=!!(!fe&&pe),jt=E.useMemo(function(){return G===void 0&&s==="combobox"?!1:G},[G,s]),Ot=E.useMemo(function(){return pq(d,St)},[JSON.stringify(d),St]),Tt=ul("",{value:S!==void 0?S:C,postState:function(Ke){return Ke||""}}),ct=nr(Tt,2),Ct=ct[0],kt=ct[1],zt=Iye(fe,pe,Ot,Y,re),Nt=zt.valueOptions,Rt=zt.labelOptions,Pt=zt.options,Dt=E.useCallback(function(ke){var Ke=uq(ke);return Ke.map(function(Ue){var Ne,et,Et,Yt,dt;if(Aye(Ue))Ne=Ue;else{var ir;Et=Ue.key,et=Ue.label,Ne=(ir=Ue.value)!==null&&ir!==void 0?ir:Et}var gr=Nt.get(Ne);if(gr){var mr;et===void 0&&(et=gr?.[re||Ot.label]),Et===void 0&&(Et=(mr=gr?.key)!==null&&mr!==void 0?mr:Ne),Yt=gr?.disabled,dt=gr?.title}return{label:et,value:Ne,key:Et,disabled:Yt,title:dt}})},[Ot,re,Nt]),Ut=ul(Me,{value:Le}),sr=nr(Ut,2),vt=sr[0],De=sr[1],ze=E.useMemo(function(){var ke,Ke=Dt(vt);return s==="combobox"&&Ege((ke=Ke[0])===null||ke===void 0?void 0:ke.value)?[]:Ke},[vt,Dt,s]),ve=_ye(ze,Nt),pt=nr(ve,2),gt=pt[0],$t=pt[1],It=E.useMemo(function(){if(!s&&gt.length===1){var ke=gt[0];if(ke.value===null&&(ke.label===null||ke.label===void 0))return[]}return gt.map(function(Ke){var Ue;return yt(yt({},Ke),{},{label:(Ue=Ke.label)!==null&&Ue!==void 0?Ue:Ke.value})})},[s,gt]),Mt=E.useMemo(function(){return new Set(gt.map(function(ke){return ke.value}))},[gt]);E.useEffect(function(){if(s==="combobox"){var ke,Ke=(ke=gt[0])===null||ke===void 0?void 0:ke.value;kt(Cge(Ke)?String(Ke):"")}},[gt]);var Qt=MN(function(ke,Ke){var Ue,Ne=Ke??ke;return Ue={},xt(Ue,Ot.value,ke),xt(Ue,Ot.label,Ne),Ue}),wr=E.useMemo(function(){if(s!=="tags")return Pt;var ke=Pr(Pt),Ke=function(Ne){return Nt.has(Ne)};return Pr(gt).sort(function(Ue,Ne){return Ue.value<Ne.value?-1:1}).forEach(function(Ue){var Ne=Ue.value;Ke(Ne)||ke.push(Qt(Ne,Ue.label))}),ke},[Qt,Pt,Nt,gt,s]),br=xye(wr,Ot,Ct,jt,Y),tn=E.useMemo(function(){return s!=="tags"||!Ct||br.some(function(ke){return ke[Y||"value"]===Ct})||br.some(function(ke){return ke[Ot.value]===Ct})?br:[Qt(Ct)].concat(Pr(br))},[Qt,Y,s,br,Ct,Ot]),yr=E.useMemo(function(){return K?Pr(tn).sort(function(ke,Ke){return K(ke,Ke)}):tn},[tn,K]),dr=E.useMemo(function(){return Kge(yr,{fieldNames:Ot,childrenAsData:St})},[yr,Ot,St]),Wt=function(Ke){var Ue=Dt(Ke);if(De(Ue),Ye&&(Ue.length!==gt.length||Ue.some(function(Et,Yt){var dt;return((dt=gt[Yt])===null||dt===void 0?void 0:dt.value)!==Et?.value}))){var Ne=Ce?Ue:Ue.map(function(Et){return Et.value}),et=Ue.map(function(Et){return zR($t(Et.value))});Ye(Qe?Ne:Ne[0],Qe?et:et[0])}},Wr=E.useState(null),Fr=nr(Wr,2),en=Fr[0],Yr=Fr[1],fr=E.useState(0),Kr=nr(fr,2),Br=Kr[0],an=Kr[1],ni=xe!==void 0?xe:s!=="combobox",Nr=E.useCallback(function(ke,Ke){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ne=Ue.source,et=Ne===void 0?"keyboard":Ne;an(Ke),v&&s==="combobox"&&ke!==null&&et==="keyboard"&&Yr(String(ke))},[v,s]),ii=function(Ke,Ue,Ne){var et=function(){var Cr,Lr=$t(Ke);return[Ce?{label:Lr?.[Ot.label],value:Ke,key:(Cr=Lr?.key)!==null&&Cr!==void 0?Cr:Ke}:Ke,zR(Lr)]};if(Ue&&H){var Et=et(),Yt=nr(Et,2),dt=Yt[0],ir=Yt[1];H(dt,ir)}else if(!Ue&&Z&&Ne!=="clear"){var gr=et(),mr=nr(gr,2),Sr=mr[0],Gr=mr[1];Z(Sr,Gr)}},Pe=MN(function(ke,Ke){var Ue,Ne=Qe?Ke.selected:!0;Ne?Ue=Qe?[].concat(Pr(gt),[ke]):[ke]:Ue=gt.filter(function(et){return et.value!==ke}),Wt(Ue),ii(ke,Ne),s==="combobox"?Yr(""):(!DR||$)&&(kt(""),Yr(""))}),he=function(Ke,Ue){Wt(Ke);var Ne=Ue.type,et=Ue.values;(Ne==="remove"||Ne==="clear")&&et.forEach(function(Et){ii(Et.value,!1,Ne)})},ge=function(Ke,Ue){if(kt(Ke),Yr(null),Ue.source==="submit"){var Ne=(Ke||"").trim();if(Ne){var et=Array.from(new Set([].concat(Pr(Mt),[Ne])));Wt(et),ii(Ne,!0),kt("")}return}Ue.source!=="blur"&&(s==="combobox"&&Wt(Ke),R?.(Ke))},Te=function(Ke){var Ue=Ke;s!=="tags"&&(Ue=Ke.map(function(et){var Et=Rt.get(et);return Et?.value}).filter(function(et){return et!==void 0}));var Ne=Array.from(new Set([].concat(Pr(Mt),Pr(Ue))));Wt(Ne),Ne.forEach(function(et){ii(et,!0)})},$e=E.useMemo(function(){var ke=oe!==!1&&Q!==!1;return yt(yt({},zt),{},{flattenOptions:dr,onActiveValue:Nr,defaultActiveFirstOption:ni,onSelect:Pe,menuItemSelectedIcon:Se,rawValues:Mt,fieldNames:Ot,virtual:ke,direction:Re,listHeight:Oe,listItemHeight:Fe,childrenAsData:St,optionRender:me})},[zt,dr,Nr,ni,Pe,Se,Mt,Ot,oe,Q,Oe,Fe,St,me]);return E.createElement(yq.Provider,{value:$e},E.createElement(Jge,Mr({},qe,{id:rt,prefixCls:m,ref:n,omitDomProps:Pye,mode:s,displayValues:It,onDisplayValuesChange:he,direction:Re,searchValue:Ct,onSearch:ge,autoClearSearchValue:$,onSearchSplit:Te,dropdownMatchSelectWidth:Q,OptionList:vq,emptyOptions:!dr.length,activeValue:en,activeDescendantId:"".concat(rt,"_list_").concat(Br)})))}),hz=Rye;hz.Option=uz;hz.OptGroup=cz;function N_(t,n,o){return Gt({[`${t}-status-success`]:n==="success",[`${t}-status-warning`]:n==="warning",[`${t}-status-error`]:n==="error",[`${t}-status-validating`]:n==="validating",[`${t}-has-feedback`]:o})}const dz=(t,n)=>n||t,kye=()=>{const[,t]=Ws(),o=new xa(t.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return E.createElement("svg",{style:o,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},E.createElement("g",{fill:"none",fillRule:"evenodd"},E.createElement("g",{transform:"translate(24 31.67)"},E.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),E.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),E.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),E.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),E.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),E.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),E.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},E.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),E.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},Oye=kye,zye=()=>{const[,t]=Ws(),{colorFill:n,colorFillTertiary:o,colorFillQuaternary:s,colorBgContainer:c}=t,{borderColor:m,shadowColor:v,contentColor:d}=E.useMemo(()=>({borderColor:new xa(n).onBackground(c).toHexShortString(),shadowColor:new xa(o).onBackground(c).toHexShortString(),contentColor:new xa(s).onBackground(c).toHexShortString()}),[n,o,s,c]);return E.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},E.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},E.createElement("ellipse",{fill:v,cx:"32",cy:"33",rx:"32",ry:"7"}),E.createElement("g",{fillRule:"nonzero",stroke:m},E.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),E.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:d}))))},Dye=zye,Lye=t=>{const{componentCls:n,margin:o,marginXS:s,marginXL:c,fontSize:m,lineHeight:v}=t;return{[n]:{marginInline:s,fontSize:m,lineHeight:v,textAlign:"center",[`${n}-image`]:{height:t.emptyImgHeight,marginBottom:s,opacity:t.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${n}-description`]:{color:t.colorText},[`${n}-footer`]:{marginTop:o},"&-normal":{marginBlock:c,color:t.colorTextDisabled,[`${n}-description`]:{color:t.colorTextDisabled},[`${n}-image`]:{height:t.emptyImgHeightMD}},"&-small":{marginBlock:s,color:t.colorTextDisabled,[`${n}-image`]:{height:t.emptyImgHeightSM}}}}},$ye=os("Empty",t=>{const{componentCls:n,controlHeightLG:o,calc:s}=t,c=Yi(t,{emptyImgCls:`${n}-img`,emptyImgHeight:s(o).mul(2.5).equal(),emptyImgHeightMD:o,emptyImgHeightSM:s(o).mul(.875).equal()});return[Lye(c)]});var Bye=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const xq=E.createElement(Oye,null),bq=E.createElement(Dye,null),fz=t=>{var{className:n,rootClassName:o,prefixCls:s,image:c=xq,description:m,children:v,imageStyle:d,style:C}=t,S=Bye(t,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:R,direction:D,empty:$}=E.useContext(hi),H=R("empty",s),[Z,X,Q]=$ye(H),[G]=x0("Empty"),K=typeof m<"u"?m:G?.description,Y=typeof K=="string"?K:"empty";let re=null;return typeof c=="string"?re=E.createElement("img",{alt:Y,src:c}):re=c,Z(E.createElement("div",Object.assign({className:Gt(X,Q,H,$?.className,{[`${H}-normal`]:c===bq,[`${H}-rtl`]:D==="rtl"},n,o),style:Object.assign(Object.assign({},$?.style),C)},S),E.createElement("div",{className:`${H}-image`,style:d},re),K&&E.createElement("div",{className:`${H}-description`},K),v&&E.createElement("div",{className:`${H}-footer`},v)))};fz.PRESENTED_IMAGE_DEFAULT=xq;fz.PRESENTED_IMAGE_SIMPLE=bq;const ty=fz,Fye=t=>{const{componentName:n}=t,{getPrefixCls:o}=E.useContext(hi),s=o("empty");switch(n){case"Table":case"List":return rr.createElement(ty,{image:ty.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return rr.createElement(ty,{image:ty.PRESENTED_IMAGE_SIMPLE,className:`${s}-small`});default:return rr.createElement(ty,null)}},wq=Fye,Nye=t=>{const o={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:t==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},o),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},o),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},o),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},o),{points:["br","tr"],offset:[0,-4]})}};function jye(t,n){return t||Nye(n)}const Vye=t=>{const{optionHeight:n,optionFontSize:o,optionLineHeight:s,optionPadding:c}=t;return{position:"relative",display:"block",minHeight:n,padding:c,color:t.colorText,fontWeight:"normal",fontSize:o,lineHeight:s,boxSizing:"border-box"}},Uye=t=>{const{antCls:n,componentCls:o}=t,s=`${o}-item`,c=`&${n}-slide-up-enter${n}-slide-up-enter-active`,m=`&${n}-slide-up-appear${n}-slide-up-appear-active`,v=`&${n}-slide-up-leave${n}-slide-up-leave-active`,d=`${o}-dropdown-placement-`;return[{[`${o}-dropdown`]:Object.assign(Object.assign({},Oa(t)),{position:"absolute",top:-9999,zIndex:t.zIndexPopup,boxSizing:"border-box",padding:t.paddingXXS,overflow:"hidden",fontSize:t.fontSize,fontVariant:"initial",backgroundColor:t.colorBgElevated,borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,[`
          ${c}${d}bottomLeft,
          ${m}${d}bottomLeft
        `]:{animationName:rz},[`
          ${c}${d}topLeft,
          ${m}${d}topLeft,
          ${c}${d}topRight,
          ${m}${d}topRight
        `]:{animationName:iz},[`${v}${d}bottomLeft`]:{animationName:nz},[`
          ${v}${d}topLeft,
          ${v}${d}topRight
        `]:{animationName:oz},"&-hidden":{display:"none"},[`${s}`]:Object.assign(Object.assign({},Vye(t)),{cursor:"pointer",transition:`background ${t.motionDurationSlow} ease`,borderRadius:t.borderRadiusSM,"&-group":{color:t.colorTextDescription,fontSize:t.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Vb),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${s}-option-disabled)`]:{backgroundColor:t.optionActiveBg},[`&-selected:not(${s}-option-disabled)`]:{color:t.optionSelectedColor,fontWeight:t.optionSelectedFontWeight,backgroundColor:t.optionSelectedBg,[`${s}-option-state`]:{color:t.colorPrimary},[`&:has(+ ${s}-option-selected:not(${s}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${s}-option-selected:not(${s}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${s}-option-selected`]:{backgroundColor:t.colorBgContainerDisabled},color:t.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:t.calc(t.controlPaddingHorizontal).mul(2).equal()}}}),"&-rtl":{direction:"rtl"}})},i0(t,"slide-up"),i0(t,"slide-down"),HT(t,"move-up"),HT(t,"move-down")]},Hye=Uye,r_=2,Gye=t=>{const{multipleSelectItemHeight:n,selectHeight:o,lineWidth:s}=t;return t.calc(o).sub(n).div(2).sub(s).equal()};function KP(t,n){const{componentCls:o,iconCls:s}=t,c=`${o}-selection-overflow`,m=t.multipleSelectItemHeight,v=Gye(t),d=n?`${o}-${n}`:"";return{[`${o}-multiple${d}`]:{fontSize:t.fontSize,[c]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${o}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",paddingInline:t.calc(r_).mul(2).equal(),paddingBlock:t.calc(v).sub(r_).equal(),borderRadius:t.borderRadius,[`${o}-show-search&`]:{cursor:"text"},[`${o}-disabled&`]:{background:t.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Xt(r_)} 0`,lineHeight:Xt(m),visibility:"hidden",content:'"\\a0"'}},[`
        &${o}-show-arrow ${o}-selector,
        &${o}-allow-clear ${o}-selector
      `]:{paddingInlineEnd:t.calc(t.fontSizeIcon).add(t.controlPaddingHorizontal).equal()},[`${o}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:m,marginTop:r_,marginBottom:r_,lineHeight:Xt(t.calc(m).sub(t.calc(t.lineWidth).mul(2)).equal()),background:t.multipleItemBg,border:`${Xt(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`,borderRadius:t.borderRadiusSM,cursor:"default",transition:`font-size ${t.motionDurationSlow}, line-height ${t.motionDurationSlow}, height ${t.motionDurationSlow}`,marginInlineEnd:t.calc(r_).mul(2).equal(),paddingInlineStart:t.paddingXS,paddingInlineEnd:t.calc(t.paddingXS).div(2).equal(),[`${o}-disabled&`]:{color:t.multipleItemColorDisabled,borderColor:t.multipleItemBorderColorDisabled,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:t.calc(t.paddingXS).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},KI()),{display:"inline-flex",alignItems:"center",color:t.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${s}`]:{verticalAlign:"-0.2em"},"&:hover":{color:t.colorIconHover}})},[`${c}-item + ${c}-item`]:{[`${o}-selection-search`]:{marginInlineStart:0}},[`${c}-item-suffix`]:{height:"100%"},[`${o}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(v).equal(),"\n          &-input,\n          &-mirror\n        ":{height:m,fontFamily:t.fontFamily,lineHeight:Xt(m),transition:`all ${t.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${o}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:t.inputPaddingHorizontalBase,insetInlineEnd:t.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${t.motionDurationSlow}`}}}}const qye=t=>{const{componentCls:n}=t,o=Yi(t,{selectHeight:t.controlHeightSM,multipleSelectItemHeight:t.controlHeightXS,borderRadius:t.borderRadiusSM,borderRadiusSM:t.borderRadiusXS}),s=Yi(t,{fontSize:t.fontSizeLG,selectHeight:t.controlHeightLG,multipleSelectItemHeight:t.multipleItemHeightLG,borderRadius:t.borderRadiusLG,borderRadiusSM:t.borderRadius});return[KP(t),KP(o,"sm"),{[`${n}-multiple${n}-sm`]:{[`${n}-selection-placeholder`]:{insetInline:t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal()},[`${n}-selection-search`]:{marginInlineStart:2}}},KP(s,"lg")]},Wye=qye;function ZP(t,n){const{componentCls:o,inputPaddingHorizontalBase:s,borderRadius:c}=t,m=t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),v=n?`${o}-${n}`:"";return{[`${o}-single${v}`]:{fontSize:t.fontSize,height:t.controlHeight,[`${o}-selector`]:Object.assign(Object.assign({},Oa(t,!0)),{display:"flex",borderRadius:c,[`${o}-selection-search`]:{position:"absolute",top:0,insetInlineStart:s,insetInlineEnd:s,bottom:0,"&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${o}-selection-item,
          ${o}-selection-placeholder
        `]:{padding:0,lineHeight:Xt(m),transition:`all ${t.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${o}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${o}-selection-item:empty:after`,`${o}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${o}-show-arrow ${o}-selection-item,
        &${o}-show-arrow ${o}-selection-placeholder
      `]:{paddingInlineEnd:t.showArrowPaddingInlineEnd},[`&${o}-open ${o}-selection-item`]:{color:t.colorTextPlaceholder},[`&:not(${o}-customize-input)`]:{[`${o}-selector`]:{width:"100%",height:"100%",padding:`0 ${Xt(s)}`,[`${o}-selection-search-input`]:{height:m},"&:after":{lineHeight:Xt(m)}}},[`&${o}-customize-input`]:{[`${o}-selector`]:{"&:after":{display:"none"},[`${o}-selection-search`]:{position:"static",width:"100%"},[`${o}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Xt(s)}`,"&:after":{display:"none"}}}}}}}function Kye(t){const{componentCls:n}=t,o=t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal();return[ZP(t),ZP(Yi(t,{controlHeight:t.controlHeightSM,borderRadius:t.borderRadiusSM}),"sm"),{[`${n}-single${n}-sm`]:{[`&:not(${n}-customize-input)`]:{[`${n}-selection-search`]:{insetInlineStart:o,insetInlineEnd:o},[`${n}-selector`]:{padding:`0 ${Xt(o)}`},[`&${n}-show-arrow ${n}-selection-search`]:{insetInlineEnd:t.calc(o).add(t.calc(t.fontSize).mul(1.5)).equal()},[`
            &${n}-show-arrow ${n}-selection-item,
            &${n}-show-arrow ${n}-selection-placeholder
          `]:{paddingInlineEnd:t.calc(t.fontSize).mul(1.5).equal()}}}},ZP(Yi(t,{controlHeight:t.singleItemHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG}),"lg")]}const Zye=t=>{const{componentCls:n,selectorBg:o}=t;return{position:"relative",backgroundColor:o,border:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,input:{cursor:"pointer"},[`${n}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${n}-disabled&`]:{color:t.colorTextDisabled,background:t.colorBgContainerDisabled,cursor:"not-allowed",[`${n}-multiple&`]:{background:t.multipleSelectorBgDisabled},input:{cursor:"not-allowed"}}}},XP=function(t,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{componentCls:s,borderHoverColor:c,antCls:m,borderActiveColor:v,outlineColor:d,controlOutlineWidth:C}=n,S=o?{[`${s}-selector`]:{borderColor:v}}:{};return{[t]:{[`&:not(${s}-disabled):not(${s}-customize-input):not(${m}-pagination-size-changer)`]:Object.assign(Object.assign({},S),{[`&:hover ${s}-selector`]:{borderColor:c},[`${s}-focused& ${s}-selector`]:{borderColor:v,boxShadow:`0 0 0 ${Xt(C)} ${d}`,outline:0}})}}},Xye=t=>{const{componentCls:n}=t;return{[`${n}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},Yye=t=>{const{antCls:n,componentCls:o,inputPaddingHorizontalBase:s,iconCls:c}=t;return{[o]:Object.assign(Object.assign({},Oa(t)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${o}-customize-input) ${o}-selector`]:Object.assign(Object.assign({},Zye(t)),Xye(t)),[`${o}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Vb),{[`> ${n}-typography`]:{display:"inline"}}),[`${o}-selection-placeholder`]:Object.assign(Object.assign({},Vb),{flex:1,color:t.colorTextPlaceholder,pointerEvents:"none"}),[`${o}-arrow`]:Object.assign(Object.assign({},KI()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[c]:{verticalAlign:"top",transition:`transform ${t.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${o}-suffix)`]:{pointerEvents:"auto"}},[`${o}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${o}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:s,zIndex:1,display:"inline-block",width:t.fontSizeIcon,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:t.clearBg,cursor:"pointer",opacity:0,transition:`color ${t.motionDurationMid} ease, opacity ${t.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:t.colorTextTertiary}},"&:hover":{[`${o}-clear`]:{opacity:1}}}),[`${o}-has-feedback`]:{[`${o}-clear`]:{insetInlineEnd:t.calc(s).add(t.fontSize).add(t.paddingXS).equal()}}}},Jye=t=>{const{componentCls:n}=t;return[{[n]:{[`&-borderless ${n}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${n}-in-form-item`]:{width:"100%"}}},Yye(t),Kye(t),Wye(t),Hye(t),{[`${n}-rtl`]:{direction:"rtl"}},XP(n,Yi(t,{borderHoverColor:t.colorPrimaryHover,borderActiveColor:t.colorPrimary,outlineColor:t.controlOutline})),XP(`${n}-status-error`,Yi(t,{borderHoverColor:t.colorErrorHover,borderActiveColor:t.colorError,outlineColor:t.colorErrorOutline}),!0),XP(`${n}-status-warning`,Yi(t,{borderHoverColor:t.colorWarningHover,borderActiveColor:t.colorWarning,outlineColor:t.colorWarningOutline}),!0),KO(t,{borderElCls:`${n}-selector`,focusElCls:`${n}-focused`})]},Qye=t=>{const{fontSize:n,lineHeight:o,controlHeight:s,controlPaddingHorizontal:c,zIndexPopupBase:m,colorText:v,fontWeightStrong:d,controlItemBgActive:C,controlItemBgHover:S,colorBgContainer:R,colorFillSecondary:D,controlHeightLG:$,controlHeightSM:H,colorBgContainerDisabled:Z,colorTextDisabled:X}=t;return{zIndexPopup:m+50,optionSelectedColor:v,optionSelectedFontWeight:d,optionSelectedBg:C,optionActiveBg:S,optionPadding:`${(s-n*o)/2}px ${c}px`,optionFontSize:n,optionLineHeight:o,optionHeight:s,selectorBg:R,clearBg:R,singleItemHeightLG:$,multipleItemBg:D,multipleItemBorderColor:"transparent",multipleItemHeight:H,multipleItemHeightLG:s,multipleSelectorBgDisabled:Z,multipleItemColorDisabled:X,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(t.fontSize*1.25)}},eve=os("Select",(t,n)=>{let{rootPrefixCls:o}=n;const s=Yi(t,{rootPrefixCls:o,inputPaddingHorizontalBase:t.calc(t.paddingSM).sub(1).equal(),multipleSelectItemHeight:t.multipleItemHeight,selectHeight:t.controlHeight});return[Jye(s)]},Qye,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var tve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const rve=tve;var nve=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:rve}))};const ive=E.forwardRef(nve);var ove={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const ave=ove;var sve=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:ave}))};const Sq=E.forwardRef(sve);var lve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const cve=lve;var uve=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:cve}))};const pz=E.forwardRef(uve);function hve(t){let{suffixIcon:n,clearIcon:o,menuItemSelectedIcon:s,removeIcon:c,loading:m,multiple:v,hasFeedback:d,prefixCls:C,showSuffixIcon:S,feedbackIcon:R,showArrow:D,componentName:$}=t;const H=o??E.createElement(S0,null),Z=K=>n===null&&!d&&!D?null:E.createElement(E.Fragment,null,S!==!1&&K,d&&R);let X=null;if(n!==void 0)X=Z(n);else if(m)X=Z(E.createElement(YI,{spin:!0}));else{const K=`${C}-suffix`;X=Y=>{let{open:re,showSearch:fe}=Y;return Z(re&&fe?E.createElement(pz,{className:K}):E.createElement(Sq,{className:K}))}}let Q=null;s!==void 0?Q=s:v?Q=E.createElement(ive,null):Q=null;let G=null;return c!==void 0?G=c:G=E.createElement(cw,null),{clearIcon:H,suffixIcon:X,itemIcon:Q,removeIcon:G}}function dve(t,n){return n!==void 0?n:t!==null}var fve=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Cq="SECRET_COMBOBOX_MODE_DO_NOT_USE",pve=(t,n)=>{var o,s,{prefixCls:c,bordered:m=!0,className:v,rootClassName:d,getPopupContainer:C,popupClassName:S,dropdownClassName:R,listHeight:D=256,placement:$,listItemHeight:H,size:Z,disabled:X,notFoundContent:Q,status:G,builtinPlacements:K,dropdownMatchSelectWidth:Y,popupMatchSelectWidth:re,direction:fe,style:me,allowClear:pe}=t,xe=fve(t,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear"]);const{getPopupContainer:Se,getPrefixCls:oe,renderEmpty:Re,direction:Ve,virtual:Oe,popupMatchSelectWidth:_e,popupOverflow:Fe,select:Le}=E.useContext(hi),[,Me]=Ws(),Ce=H??Me?.controlHeight,Ye=oe("select",c),qe=oe(),rt=fe??Ve,{compactSize:Qe,compactItemClassnames:St}=fw(Ye,rt),jt=Pl(Ye),[Ot,Tt,ct]=eve(Ye,jt),Ct=E.useMemo(()=>{const{mode:dr}=xe;if(dr!=="combobox")return dr===Cq?"combobox":dr},[xe.mode]),kt=Ct==="multiple"||Ct==="tags",zt=dve(xe.suffixIcon,xe.showArrow),Nt=(o=re??Y)!==null&&o!==void 0?o:_e,{status:Rt,hasFeedback:Pt,isFormItemInput:Dt,feedbackIcon:Ut}=E.useContext(bu),sr=dz(Rt,G);let vt;Q!==void 0?vt=Q:Ct==="combobox"?vt=null:vt=Re?.("Select")||E.createElement(wq,{componentName:"Select"});const{suffixIcon:De,itemIcon:ze,removeIcon:ve,clearIcon:pt}=hve(Object.assign(Object.assign({},xe),{multiple:kt,hasFeedback:Pt,feedbackIcon:Ut,showSuffixIcon:zt,prefixCls:Ye,showArrow:xe.showArrow,componentName:"Select"})),gt=pe===!0?{clearIcon:pt}:pe,$t=Zs(xe,["suffixIcon","itemIcon"]),It=Gt(S||R,{[`${Ye}-dropdown-${rt}`]:rt==="rtl"},d,ct,jt,Tt),Mt=Gh(dr=>{var Wt;return(Wt=Z??Qe)!==null&&Wt!==void 0?Wt:dr}),Qt=E.useContext(Gm),wr=X??Qt,br=Gt({[`${Ye}-lg`]:Mt==="large",[`${Ye}-sm`]:Mt==="small",[`${Ye}-rtl`]:rt==="rtl",[`${Ye}-borderless`]:!m,[`${Ye}-in-form-item`]:Dt},N_(Ye,sr,Pt),St,Le?.className,v,d,ct,jt,Tt),tn=E.useMemo(()=>$!==void 0?$:rt==="rtl"?"bottomRight":"bottomLeft",[$,rt]),[yr]=uw("SelectLike",(s=xe.dropdownStyle)===null||s===void 0?void 0:s.zIndex);return Ot(E.createElement(hz,Object.assign({ref:n,virtual:Oe,showSearch:Le?.showSearch},$t,{style:Object.assign(Object.assign({},Le?.style),me),dropdownMatchSelectWidth:Nt,builtinPlacements:jye(K,Fe),transitionName:xy(qe,"slide-up",xe.transitionName),listHeight:D,listItemHeight:Ce,mode:Ct,prefixCls:Ye,placement:tn,direction:rt,suffixIcon:De,menuItemSelectedIcon:ze,removeIcon:ve,allowClear:gt,notFoundContent:vt,className:br,getPopupContainer:C||Se,dropdownClassName:It,disabled:wr,dropdownStyle:Object.assign(Object.assign({},xe?.dropdownStyle),{zIndex:yr})})))},C0=E.forwardRef(pve),mve=nq(C0);C0.SECRET_COMBOBOX_MODE_DO_NOT_USE=Cq;C0.Option=uz;C0.OptGroup=cz;C0._InternalPanelDoNotUseOrYouWillBeFired=mve;const _w=C0,o0=["xxl","xl","lg","md","sm","xs"],gve=t=>({xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`}),yve=t=>{const n=t,o=[].concat(o0).reverse();return o.forEach((s,c)=>{const m=s.toUpperCase(),v=`screen${m}Min`,d=`screen${m}`;if(!(n[v]<=n[d]))throw new Error(`${v}<=${d} fails : !(${n[v]}<=${n[d]})`);if(c<o.length-1){const C=`screen${m}Max`;if(!(n[d]<=n[C]))throw new Error(`${d}<=${C} fails : !(${n[d]}<=${n[C]})`);const R=`screen${o[c+1].toUpperCase()}Min`;if(!(n[C]<=n[R]))throw new Error(`${C}<=${R} fails : !(${n[C]}<=${n[R]})`)}}),t};function Eq(){const[,t]=Ws(),n=gve(yve(t));return rr.useMemo(()=>{const o=new Map;let s=-1,c={};return{matchHandlers:{},dispatch(m){return c=m,o.forEach(v=>v(c)),o.size>=1},subscribe(m){return o.size||this.register(),s+=1,o.set(s,m),m(c),s},unsubscribe(m){o.delete(m),o.size||this.unregister()},unregister(){Object.keys(n).forEach(m=>{const v=n[m],d=this.matchHandlers[v];d?.mql.removeListener(d?.listener)}),o.clear()},register(){Object.keys(n).forEach(m=>{const v=n[m],d=S=>{let{matches:R}=S;this.dispatch(Object.assign(Object.assign({},c),{[m]:R}))},C=window.matchMedia(v);C.addListener(d),this.matchHandlers[v]={mql:C,listener:d},d(C)})},responsiveMap:n}},[t])}function Tq(){const[,t]=E.useReducer(n=>n+1,0);return t}function mz(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=E.useRef({}),o=Tq(),s=Eq();return zo(()=>{const c=s.subscribe(m=>{n.current=m,t&&o()});return()=>s.unsubscribe(c)},[]),n.current}const vve=E.createContext({}),LR=vve,_ve=t=>{const{antCls:n,componentCls:o,iconCls:s,avatarBg:c,avatarColor:m,containerSize:v,containerSizeLG:d,containerSizeSM:C,textFontSize:S,textFontSizeLG:R,textFontSizeSM:D,borderRadius:$,borderRadiusLG:H,borderRadiusSM:Z,lineWidth:X,lineType:Q,calc:G}=t,K=(Y,re,fe)=>({width:Y,height:Y,lineHeight:Xt(G(Y).sub(G(X).mul(2)).equal()),borderRadius:"50%",[`&${o}-square`]:{borderRadius:fe},[`${o}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${o}-icon`]:{fontSize:re,[`> ${s}`]:{margin:0}}});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},Oa(t)),{position:"relative",display:"inline-block",overflow:"hidden",color:m,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:c,border:`${Xt(X)} ${Q} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),K(v,S,$)),{"&-lg":Object.assign({},K(d,R,H)),"&-sm":Object.assign({},K(C,D,Z)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},xve=t=>{const{componentCls:n,groupBorderColor:o,groupOverlapping:s,groupSpace:c}=t;return{[`${n}-group`]:{display:"inline-flex",[`${n}`]:{borderColor:o},"> *:not(:first-child)":{marginInlineStart:s}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:c}}}},bve=t=>{const{controlHeight:n,controlHeightLG:o,controlHeightSM:s,fontSize:c,fontSizeLG:m,fontSizeXL:v,fontSizeHeading3:d,marginXS:C,marginXXS:S,colorBorderBg:R}=t;return{containerSize:n,containerSizeLG:o,containerSizeSM:s,textFontSize:Math.round((m+v)/2),textFontSizeLG:d,textFontSizeSM:c,groupSpace:S,groupOverlapping:-C,groupBorderColor:R}},Iq=os("Avatar",t=>{const{colorTextLightSolid:n,colorTextPlaceholder:o}=t,s=Yi(t,{avatarBg:o,avatarColor:n});return[_ve(s),xve(s)]},bve);var wve=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Sve=(t,n)=>{const[o,s]=E.useState(1),[c,m]=E.useState(!1),[v,d]=E.useState(!0),C=E.useRef(null),S=E.useRef(null),R=Cu(n,C),{getPrefixCls:D,avatar:$}=E.useContext(hi),H=E.useContext(LR),Z=()=>{if(!S.current||!C.current)return;const Ct=S.current.offsetWidth,kt=C.current.offsetWidth;if(Ct!==0&&kt!==0){const{gap:zt=4}=t;zt*2<kt&&s(kt-zt*2<Ct?(kt-zt*2)/Ct:1)}};E.useEffect(()=>{m(!0)},[]),E.useEffect(()=>{d(!0),s(1)},[t.src]),E.useEffect(Z,[t.gap]);const X=()=>{const{onError:Ct}=t;Ct?.()!==!1&&d(!1)},{prefixCls:Q,shape:G,size:K,src:Y,srcSet:re,icon:fe,className:me,rootClassName:pe,alt:xe,draggable:Se,children:oe,crossOrigin:Re}=t,Ve=wve(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),Oe=Gh(Ct=>{var kt,zt;return(zt=(kt=K??H?.size)!==null&&kt!==void 0?kt:Ct)!==null&&zt!==void 0?zt:"default"}),_e=Object.keys(typeof Oe=="object"?Oe||{}:{}).some(Ct=>["xs","sm","md","lg","xl","xxl"].includes(Ct)),Fe=mz(_e),Le=E.useMemo(()=>{if(typeof Oe!="object")return{};const Ct=o0.find(zt=>Fe[zt]),kt=Oe[Ct];return kt?{width:kt,height:kt,lineHeight:`${kt}px`,fontSize:kt&&(fe||oe)?kt/2:18}:{}},[Fe,Oe]),Me=D("avatar",Q),Ce=Pl(Me),[Ye,qe,rt]=Iq(Me,Ce),Qe=Gt({[`${Me}-lg`]:Oe==="large",[`${Me}-sm`]:Oe==="small"}),St=E.isValidElement(Y),jt=G||H?.shape||"circle",Ot=Gt(Me,Qe,$?.className,`${Me}-${jt}`,{[`${Me}-image`]:St||Y&&v,[`${Me}-icon`]:!!fe},rt,Ce,me,pe,qe),Tt=typeof Oe=="number"?{width:Oe,height:Oe,lineHeight:`${Oe}px`,fontSize:fe?Oe/2:18}:{};let ct;if(typeof Y=="string"&&v)ct=E.createElement("img",{src:Y,draggable:Se,srcSet:re,onError:X,alt:xe,crossOrigin:Re});else if(St)ct=Y;else if(fe)ct=fe;else if(c||o!==1){const Ct=`scale(${o}) translateX(-50%)`,kt={msTransform:Ct,WebkitTransform:Ct,transform:Ct},zt=typeof Oe=="number"?{lineHeight:`${Oe}px`}:{};ct=E.createElement(nh,{onResize:Z},E.createElement("span",{className:`${Me}-string`,ref:S,style:Object.assign(Object.assign({},zt),kt)},oe))}else ct=E.createElement("span",{className:`${Me}-string`,style:{opacity:0},ref:S},oe);return delete Ve.onError,delete Ve.gap,Ye(E.createElement("span",Object.assign({},Ve,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Tt),Le),$?.style),Ve.style),className:Ot,ref:R}),ct))},Cve=E.forwardRef(Sve),Mq=Cve,qT=t=>t?typeof t=="function"?t():t:null;function gz(t){var n=t.children,o=t.prefixCls,s=t.id,c=t.overlayInnerStyle,m=t.className,v=t.style;return E.createElement("div",{className:Gt("".concat(o,"-content"),m),style:v},E.createElement("div",{className:"".concat(o,"-inner"),id:s,role:"tooltip",style:c},typeof n=="function"?n():n))}var n_={shiftX:64,adjustY:1},i_={adjustX:1,shiftY:!0},Uu=[0,0],Eve={left:{points:["cr","cl"],overflow:i_,offset:[-4,0],targetOffset:Uu},right:{points:["cl","cr"],overflow:i_,offset:[4,0],targetOffset:Uu},top:{points:["bc","tc"],overflow:n_,offset:[0,-4],targetOffset:Uu},bottom:{points:["tc","bc"],overflow:n_,offset:[0,4],targetOffset:Uu},topLeft:{points:["bl","tl"],overflow:n_,offset:[0,-4],targetOffset:Uu},leftTop:{points:["tr","tl"],overflow:i_,offset:[-4,0],targetOffset:Uu},topRight:{points:["br","tr"],overflow:n_,offset:[0,-4],targetOffset:Uu},rightTop:{points:["tl","tr"],overflow:i_,offset:[4,0],targetOffset:Uu},bottomRight:{points:["tr","br"],overflow:n_,offset:[0,4],targetOffset:Uu},rightBottom:{points:["bl","br"],overflow:i_,offset:[4,0],targetOffset:Uu},bottomLeft:{points:["tl","bl"],overflow:n_,offset:[0,4],targetOffset:Uu},leftBottom:{points:["br","bl"],overflow:i_,offset:[-4,0],targetOffset:Uu}},Tve=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Ive=function(n,o){var s=n.overlayClassName,c=n.trigger,m=c===void 0?["hover"]:c,v=n.mouseEnterDelay,d=v===void 0?0:v,C=n.mouseLeaveDelay,S=C===void 0?.1:C,R=n.overlayStyle,D=n.prefixCls,$=D===void 0?"rc-tooltip":D,H=n.children,Z=n.onVisibleChange,X=n.afterVisibleChange,Q=n.transitionName,G=n.animation,K=n.motion,Y=n.placement,re=Y===void 0?"right":Y,fe=n.align,me=fe===void 0?{}:fe,pe=n.destroyTooltipOnHide,xe=pe===void 0?!1:pe,Se=n.defaultVisible,oe=n.getTooltipContainer,Re=n.overlayInnerStyle;n.arrowContent;var Ve=n.overlay,Oe=n.id,_e=n.showArrow,Fe=_e===void 0?!0:_e,Le=xi(n,Tve),Me=E.useRef(null);E.useImperativeHandle(o,function(){return Me.current});var Ce=yt({},Le);"visible"in n&&(Ce.popupVisible=n.visible);var Ye=function(){return E.createElement(gz,{key:"content",prefixCls:$,id:Oe,overlayInnerStyle:Re},Ve)};return E.createElement(sM,Mr({popupClassName:s,prefixCls:$,popup:Ye,action:m,builtinPlacements:Eve,popupPlacement:re,ref:Me,popupAlign:me,getPopupContainer:oe,onPopupVisibleChange:Z,afterPopupVisibleChange:X,popupTransitionName:Q,popupAnimation:G,popupMotion:K,defaultPopupVisible:Se,autoDestroy:xe,mouseLeaveDelay:S,popupStyle:R,mouseEnterDelay:d,arrow:Fe},Ce),H)};const Mve=E.forwardRef(Ive);function yz(t){const{sizePopupArrow:n,borderRadiusXS:o,borderRadiusOuter:s}=t,c=n/2,m=0,v=c,d=s*1/Math.sqrt(2),C=c-s*(1-1/Math.sqrt(2)),S=c-o*(1/Math.sqrt(2)),R=s*(Math.sqrt(2)-1)+o*(1/Math.sqrt(2)),D=2*c-S,$=R,H=2*c-d,Z=C,X=2*c-m,Q=v,G=c*Math.sqrt(2)+s*(Math.sqrt(2)-2),K=s*(Math.sqrt(2)-1),Y=`polygon(${K}px 100%, 50% ${K}px, ${2*c-K}px 100%, ${K}px 100%)`,re=`path('M ${m} ${v} A ${s} ${s} 0 0 0 ${d} ${C} L ${S} ${R} A ${o} ${o} 0 0 1 ${D} ${$} L ${H} ${Z} A ${s} ${s} 0 0 0 ${X} ${Q} Z')`;return{arrowShadowWidth:G,arrowPath:re,arrowPolygon:Y}}const Pve=(t,n,o)=>{const{sizePopupArrow:s,arrowPolygon:c,arrowPath:m,arrowShadowWidth:v,borderRadiusXS:d,calc:C}=t;return{pointerEvents:"none",width:s,height:s,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:s,height:C(s).div(2).equal(),background:n,clipPath:{_multi_value_:!0,value:[c,m]},content:'""'},"&::after":{content:'""',position:"absolute",width:v,height:v,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Xt(d)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:o,zIndex:0,background:"transparent"}}},Pq=8;function cM(t){const{contentRadius:n,limitVerticalRadius:o}=t,s=n>12?n+2:12;return{arrowOffsetHorizontal:s,arrowOffsetVertical:o?Pq:s}}function gE(t,n){return t?n:{}}function vz(t,n,o){const{componentCls:s,boxShadowPopoverArrow:c,arrowOffsetVertical:m,arrowOffsetHorizontal:v}=t,{arrowDistance:d=0,arrowPlacement:C={left:!0,right:!0,top:!0,bottom:!0}}=o||{};return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({[`${s}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},Pve(t,n,c)),{"&:before":{background:n}})]},gE(!!C.top,{[[`&-placement-top > ${s}-arrow`,`&-placement-topLeft > ${s}-arrow`,`&-placement-topRight > ${s}-arrow`].join(",")]:{bottom:d,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${s}-arrow`]:{left:{_skip_check_:!0,value:v}},[`&-placement-topRight > ${s}-arrow`]:{right:{_skip_check_:!0,value:v}}})),gE(!!C.bottom,{[[`&-placement-bottom > ${s}-arrow`,`&-placement-bottomLeft > ${s}-arrow`,`&-placement-bottomRight > ${s}-arrow`].join(",")]:{top:d,transform:"translateY(-100%)"},[`&-placement-bottom > ${s}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${s}-arrow`]:{left:{_skip_check_:!0,value:v}},[`&-placement-bottomRight > ${s}-arrow`]:{right:{_skip_check_:!0,value:v}}})),gE(!!C.left,{[[`&-placement-left > ${s}-arrow`,`&-placement-leftTop > ${s}-arrow`,`&-placement-leftBottom > ${s}-arrow`].join(",")]:{right:{_skip_check_:!0,value:d},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${s}-arrow`]:{top:m},[`&-placement-leftBottom > ${s}-arrow`]:{bottom:m}})),gE(!!C.right,{[[`&-placement-right > ${s}-arrow`,`&-placement-rightTop > ${s}-arrow`,`&-placement-rightBottom > ${s}-arrow`].join(",")]:{left:{_skip_check_:!0,value:d},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${s}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${s}-arrow`]:{top:m},[`&-placement-rightBottom > ${s}-arrow`]:{bottom:m}}))}}function Ave(t,n,o,s){if(s===!1)return{adjustX:!1,adjustY:!1};const c=s&&typeof s=="object"?s:{},m={};switch(t){case"top":case"bottom":m.shiftX=n.arrowOffsetHorizontal*2+o,m.shiftY=!0,m.adjustY=!0;break;case"left":case"right":m.shiftY=n.arrowOffsetVertical*2+o,m.shiftX=!0,m.adjustX=!0;break}const v=Object.assign(Object.assign({},m),c);return v.shiftX||(v.adjustX=!0),v.shiftY||(v.adjustY=!0),v}const PN={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Rve={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},kve=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Aq(t){const{arrowWidth:n,autoAdjustOverflow:o,arrowPointAtCenter:s,offset:c,borderRadius:m,visibleFirst:v}=t,d=n/2,C={};return Object.keys(PN).forEach(S=>{const R=s&&Rve[S]||PN[S],D=Object.assign(Object.assign({},R),{offset:[0,0],dynamicInset:!0});switch(C[S]=D,kve.has(S)&&(D.autoArrow=!1),S){case"top":case"topLeft":case"topRight":D.offset[1]=-d-c;break;case"bottom":case"bottomLeft":case"bottomRight":D.offset[1]=d+c;break;case"left":case"leftTop":case"leftBottom":D.offset[0]=-d-c;break;case"right":case"rightTop":case"rightBottom":D.offset[0]=d+c;break}const $=cM({contentRadius:m,limitVerticalRadius:!0});if(s)switch(S){case"topLeft":case"bottomLeft":D.offset[0]=-$.arrowOffsetHorizontal-d;break;case"topRight":case"bottomRight":D.offset[0]=$.arrowOffsetHorizontal+d;break;case"leftTop":case"rightTop":D.offset[1]=-$.arrowOffsetHorizontal-d;break;case"leftBottom":case"rightBottom":D.offset[1]=$.arrowOffsetHorizontal+d;break}D.overflow=Ave(S,$,n,o),v&&(D.htmlRegion="visibleFirst")}),C}const Ove=t=>{const{componentCls:n,tooltipMaxWidth:o,tooltipColor:s,tooltipBg:c,tooltipBorderRadius:m,zIndexPopup:v,controlHeight:d,boxShadowSecondary:C,paddingSM:S,paddingXS:R}=t;return[{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},Oa(t)),{position:"absolute",zIndex:v,display:"block",width:"max-content",maxWidth:o,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":c,[`${n}-inner`]:{minWidth:d,minHeight:d,padding:`${Xt(t.calc(S).div(2).equal())} ${Xt(R)}`,color:s,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:c,borderRadius:m,boxShadow:C,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${n}-inner`]:{borderRadius:t.min(m,Pq)}},[`${n}-content`]:{position:"relative"}}),KH(t,(D,$)=>{let{darkColor:H}=$;return{[`&${n}-${D}`]:{[`${n}-inner`]:{backgroundColor:H},[`${n}-arrow`]:{"--antd-arrow-background-color":H}}}})),{"&-rtl":{direction:"rtl"}})},vz(t,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},zve=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},cM({contentRadius:t.borderRadius,limitVerticalRadius:!0})),yz(Yi(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),Rq=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return os("Tooltip",s=>{const{borderRadius:c,colorTextLightSolid:m,colorBgSpotlight:v}=s,d=Yi(s,{tooltipMaxWidth:250,tooltipColor:m,tooltipBorderRadius:c,tooltipBg:v});return[Ove(d),gw(s,"zoom-big-fast")]},zve,{resetStyle:!1,injectStyle:n})(t)},Dve=jb.map(t=>`${t}-inverse`),Lve=["success","processing","error","default","warning"];function kq(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Pr(Dve),Pr(jb)).includes(t):jb.includes(t)}function $ve(t){return Lve.includes(t)}function Oq(t,n){const o=kq(n),s=Gt({[`${t}-${n}`]:n&&o}),c={},m={};return n&&!o&&(c.background=n,m["--antd-arrow-background-color"]=n),{className:s,overlayStyle:c,arrowStyle:m}}const Bve=t=>{const{prefixCls:n,className:o,placement:s="top",title:c,color:m,overlayInnerStyle:v}=t,{getPrefixCls:d}=E.useContext(hi),C=d("tooltip",n),[S,R,D]=Rq(C),$=Oq(C,m),H=$.arrowStyle,Z=Object.assign(Object.assign({},v),$.overlayStyle),X=Gt(R,D,C,`${C}-pure`,`${C}-placement-${s}`,o,$.className);return S(E.createElement("div",{className:X,style:H},E.createElement("div",{className:`${C}-arrow`}),E.createElement(gz,Object.assign({},t,{className:R,prefixCls:C,overlayInnerStyle:Z}),c)))},Fve=Bve;var Nve=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const zq=E.forwardRef((t,n)=>{var o,s;const{prefixCls:c,openClassName:m,getTooltipContainer:v,overlayClassName:d,color:C,overlayInnerStyle:S,children:R,afterOpenChange:D,afterVisibleChange:$,destroyTooltipOnHide:H,arrow:Z=!0,title:X,overlay:Q,builtinPlacements:G,arrowPointAtCenter:K=!1,autoAdjustOverflow:Y=!0}=t,re=!!Z,[,fe]=Ws(),{getPopupContainer:me,getPrefixCls:pe,direction:xe}=E.useContext(hi),Se=Ty(),oe=E.useRef(null),Re=()=>{var $t;($t=oe.current)===null||$t===void 0||$t.forceAlign()};E.useImperativeHandle(n,()=>({forceAlign:Re,forcePopupAlign:()=>{Se.deprecated(!1,"forcePopupAlign","forceAlign"),Re()}}));const[Ve,Oe]=ul(!1,{value:(o=t.open)!==null&&o!==void 0?o:t.visible,defaultValue:(s=t.defaultOpen)!==null&&s!==void 0?s:t.defaultVisible}),_e=!X&&!Q&&X!==0,Fe=$t=>{var It,Mt;Oe(_e?!1:$t),_e||((It=t.onOpenChange)===null||It===void 0||It.call(t,$t),(Mt=t.onVisibleChange)===null||Mt===void 0||Mt.call(t,$t))},Le=E.useMemo(()=>{var $t,It;let Mt=K;return typeof Z=="object"&&(Mt=(It=($t=Z.pointAtCenter)!==null&&$t!==void 0?$t:Z.arrowPointAtCenter)!==null&&It!==void 0?It:K),G||Aq({arrowPointAtCenter:Mt,autoAdjustOverflow:Y,arrowWidth:re?fe.sizePopupArrow:0,borderRadius:fe.borderRadius,offset:fe.marginXXS,visibleFirst:!0})},[K,Z,G,fe]),Me=E.useMemo(()=>X===0?X:Q||X||"",[Q,X]),Ce=E.createElement(Gb,null,typeof Me=="function"?Me():Me),{getPopupContainer:Ye,placement:qe="top",mouseEnterDelay:rt=.1,mouseLeaveDelay:Qe=.1,overlayStyle:St,rootClassName:jt}=t,Ot=Nve(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Tt=pe("tooltip",c),ct=pe(),Ct=t["data-popover-inject"];let kt=Ve;!("open"in t)&&!("visible"in t)&&_e&&(kt=!1);const zt=xu(R)&&!hG(R)?R:E.createElement("span",null,R),Nt=zt.props,Rt=!Nt.className||typeof Nt.className=="string"?Gt(Nt.className,m||`${Tt}-open`):Nt.className,[Pt,Dt,Ut]=Rq(Tt,!Ct),sr=Oq(Tt,C),vt=sr.arrowStyle,De=Object.assign(Object.assign({},S),sr.overlayStyle),ze=Gt(d,{[`${Tt}-rtl`]:xe==="rtl"},sr.className,jt,Dt,Ut),[ve,pt]=uw("Tooltip",Ot.zIndex),gt=E.createElement(Mve,Object.assign({},Ot,{zIndex:ve,showArrow:re,placement:qe,mouseEnterDelay:rt,mouseLeaveDelay:Qe,prefixCls:Tt,overlayClassName:ze,overlayStyle:Object.assign(Object.assign({},vt),St),getTooltipContainer:Ye||v||me,ref:oe,builtinPlacements:Le,overlay:Ce,visible:kt,onVisibleChange:Fe,afterVisibleChange:D??$,overlayInnerStyle:De,arrowContent:E.createElement("span",{className:`${Tt}-arrow-content`}),motion:{motionName:xy(ct,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!H}),kt?cc(zt,{className:Rt}):zt);return Pt(E.createElement(JI.Provider,{value:pt},gt))});zq._InternalPanelDoNotUseOrYouWillBeFired=Fve;const uM=zq,jve=t=>{const{componentCls:n,popoverColor:o,titleMinWidth:s,fontWeightStrong:c,innerPadding:m,boxShadowSecondary:v,colorTextHeading:d,borderRadiusLG:C,zIndexPopup:S,titleMarginBottom:R,colorBgElevated:D,popoverBg:$,titleBorderBottom:H,innerContentPadding:Z,titlePadding:X}=t;return[{[n]:Object.assign(Object.assign({},Oa(t)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:S,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":D,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${n}-content`]:{position:"relative"},[`${n}-inner`]:{backgroundColor:$,backgroundClip:"padding-box",borderRadius:C,boxShadow:v,padding:m},[`${n}-title`]:{minWidth:s,marginBottom:R,color:d,fontWeight:c,borderBottom:H,padding:X},[`${n}-inner-content`]:{color:o,padding:Z}})},vz(t,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block",[`${n}-content`]:{display:"inline-block"}}}]},Vve=t=>{const{componentCls:n}=t;return{[n]:jb.map(o=>{const s=t[`${o}6`];return{[`&${n}-${o}`]:{"--antd-arrow-background-color":s,[`${n}-inner`]:{backgroundColor:s},[`${n}-arrow`]:{background:"transparent"}}}})}},Uve=t=>{const{lineWidth:n,controlHeight:o,fontHeight:s,padding:c,wireframe:m,zIndexPopupBase:v,borderRadiusLG:d,marginXS:C,lineType:S,colorSplit:R,paddingSM:D}=t,$=o-s,H=$/2,Z=$/2-n,X=c;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:v+30},yz(t)),cM({contentRadius:d,limitVerticalRadius:!0})),{innerPadding:m?0:12,titleMarginBottom:m?0:C,titlePadding:m?`${H}px ${X}px ${Z}px`:0,titleBorderBottom:m?`${n}px ${S} ${R}`:"none",innerContentPadding:m?`${D}px ${X}px`:0})},Dq=os("Popover",t=>{const{colorBgElevated:n,colorText:o}=t,s=Yi(t,{popoverBg:n,popoverColor:o});return[jve(s),Vve(s),gw(s,"zoom-big")]},Uve,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Hve=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Gve=(t,n,o)=>!n&&!o?null:E.createElement(E.Fragment,null,n&&E.createElement("div",{className:`${t}-title`},qT(n)),E.createElement("div",{className:`${t}-inner-content`},qT(o))),qve=t=>{const{hashId:n,prefixCls:o,className:s,style:c,placement:m="top",title:v,content:d,children:C}=t;return E.createElement("div",{className:Gt(n,o,`${o}-pure`,`${o}-placement-${m}`,s),style:c},E.createElement("div",{className:`${o}-arrow`}),E.createElement(gz,Object.assign({},t,{className:n,prefixCls:o}),C||Gve(o,v,d)))},Wve=t=>{const{prefixCls:n,className:o}=t,s=Hve(t,["prefixCls","className"]),{getPrefixCls:c}=E.useContext(hi),m=c("popover",n),[v,d,C]=Dq(m);return v(E.createElement(qve,Object.assign({},s,{prefixCls:m,hashId:d,className:Gt(o,C)})))},Kve=Wve;var Zve=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Xve=t=>{let{title:n,content:o,prefixCls:s}=t;return E.createElement(E.Fragment,null,n&&E.createElement("div",{className:`${s}-title`},qT(n)),E.createElement("div",{className:`${s}-inner-content`},qT(o)))},Lq=E.forwardRef((t,n)=>{const{prefixCls:o,title:s,content:c,overlayClassName:m,placement:v="top",trigger:d="hover",mouseEnterDelay:C=.1,mouseLeaveDelay:S=.1,overlayStyle:R={}}=t,D=Zve(t,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:$}=E.useContext(hi),H=$("popover",o),[Z,X,Q]=Dq(H),G=$(),K=Gt(m,X,Q);return Z(E.createElement(uM,Object.assign({placement:v,trigger:d,mouseEnterDelay:C,mouseLeaveDelay:S,overlayStyle:R},D,{prefixCls:H,overlayClassName:K,ref:n,overlay:s||c?E.createElement(Xve,{prefixCls:H,title:s,content:c}):null,transitionName:xy(G,"zoom-big",D.transitionName),"data-popover-inject":!0})))});Lq._InternalPanelDoNotUseOrYouWillBeFired=Kve;const Yve=Lq,AN=t=>{const{size:n,shape:o}=E.useContext(LR),s=E.useMemo(()=>({size:t.size||n,shape:t.shape||o}),[t.size,t.shape,n,o]);return E.createElement(LR.Provider,{value:s},t.children)},Jve=t=>{const{getPrefixCls:n,direction:o}=E.useContext(hi),{prefixCls:s,className:c,rootClassName:m,style:v,maxCount:d,maxStyle:C,size:S,shape:R,maxPopoverPlacement:D="top",maxPopoverTrigger:$="hover",children:H}=t,Z=n("avatar",s),X=`${Z}-group`,Q=Pl(Z),[G,K,Y]=Iq(Z,Q),re=Gt(X,{[`${X}-rtl`]:o==="rtl"},Y,Q,c,m,K),fe=$c(H).map((pe,xe)=>cc(pe,{key:`avatar-key-${xe}`})),me=fe.length;if(d&&d<me){const pe=fe.slice(0,d),xe=fe.slice(d,me);return pe.push(E.createElement(Yve,{key:"avatar-popover-key",content:xe,trigger:$,placement:D,overlayClassName:`${X}-popover`},E.createElement(Mq,{style:C},`+${me-d}`))),G(E.createElement(AN,{shape:R,size:S},E.createElement("div",{className:re,style:v},pe)))}return G(E.createElement(AN,{shape:R,size:S},E.createElement("div",{className:re,style:v},fe)))},Qve=Jve,$q=Mq;$q.Group=Qve;const e_e=$q;var t_e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const r_e=t_e;var n_e=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:r_e}))};const Zb=E.forwardRef(n_e);var i_e=Or.ESC,o_e=Or.TAB;function a_e(t){var n=t.visible,o=t.triggerRef,s=t.onVisibleChange,c=t.autoFocus,m=t.overlayRef,v=E.useRef(!1),d=function(){if(n){var D,$;(D=o.current)===null||D===void 0||($=D.focus)===null||$===void 0||$.call(D),s?.(!1)}},C=function(){var D;return(D=m.current)!==null&&D!==void 0&&D.focus?(m.current.focus(),v.current=!0,!0):!1},S=function(D){switch(D.keyCode){case i_e:d();break;case o_e:{var $=!1;v.current||($=C()),$?D.preventDefault():d();break}}};E.useEffect(function(){return n?(window.addEventListener("keydown",S),c&&Do(C,3),function(){window.removeEventListener("keydown",S),v.current=!1}):function(){v.current=!1}},[n])}var s_e=E.forwardRef(function(t,n){var o=t.overlay,s=t.arrow,c=t.prefixCls,m=E.useMemo(function(){var d;return typeof o=="function"?d=o():d=o,d},[o]),v=Cu(n,m?.ref);return rr.createElement(rr.Fragment,null,s&&rr.createElement("div",{className:"".concat(c,"-arrow")}),rr.cloneElement(m,{ref:jh(m)?v:void 0}))}),o_={adjustX:1,adjustY:1},a_=[0,0],l_e={topLeft:{points:["bl","tl"],overflow:o_,offset:[0,-4],targetOffset:a_},top:{points:["bc","tc"],overflow:o_,offset:[0,-4],targetOffset:a_},topRight:{points:["br","tr"],overflow:o_,offset:[0,-4],targetOffset:a_},bottomLeft:{points:["tl","bl"],overflow:o_,offset:[0,4],targetOffset:a_},bottom:{points:["tc","bc"],overflow:o_,offset:[0,4],targetOffset:a_},bottomRight:{points:["tr","br"],overflow:o_,offset:[0,4],targetOffset:a_}},c_e=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function u_e(t,n){var o,s=t.arrow,c=s===void 0?!1:s,m=t.prefixCls,v=m===void 0?"rc-dropdown":m,d=t.transitionName,C=t.animation,S=t.align,R=t.placement,D=R===void 0?"bottomLeft":R,$=t.placements,H=$===void 0?l_e:$,Z=t.getPopupContainer,X=t.showAction,Q=t.hideAction,G=t.overlayClassName,K=t.overlayStyle,Y=t.visible,re=t.trigger,fe=re===void 0?["hover"]:re,me=t.autoFocus,pe=t.overlay,xe=t.children,Se=t.onVisibleChange,oe=xi(t,c_e),Re=rr.useState(),Ve=nr(Re,2),Oe=Ve[0],_e=Ve[1],Fe="visible"in t?Y:Oe,Le=rr.useRef(null),Me=rr.useRef(null),Ce=rr.useRef(null);rr.useImperativeHandle(n,function(){return Le.current});var Ye=function(Ct){_e(Ct),Se?.(Ct)};a_e({visible:Fe,triggerRef:Ce,onVisibleChange:Ye,autoFocus:me,overlayRef:Me});var qe=function(Ct){var kt=t.onOverlayClick;_e(!1),kt&&kt(Ct)},rt=function(){return rr.createElement(s_e,{ref:Me,overlay:pe,prefixCls:v,arrow:c})},Qe=function(){return typeof pe=="function"?rt:rt()},St=function(){var Ct=t.minOverlayWidthMatchTrigger,kt=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?Ct:!kt},jt=function(){var Ct=t.openClassName;return Ct!==void 0?Ct:"".concat(v,"-open")},Ot=rr.cloneElement(xe,{className:Gt((o=xe.props)===null||o===void 0?void 0:o.className,Fe&&jt()),ref:jh(xe)?Cu(Ce,xe.ref):void 0}),Tt=Q;return!Tt&&fe.indexOf("contextMenu")!==-1&&(Tt=["click"]),rr.createElement(sM,Mr({builtinPlacements:H},oe,{prefixCls:v,ref:Le,popupClassName:Gt(G,xt({},"".concat(v,"-show-arrow"),c)),popupStyle:K,action:fe,showAction:X,hideAction:Tt,popupPlacement:D,popupAlign:S,popupTransitionName:d,popupAnimation:C,popupVisible:Fe,stretch:St()?"minWidth":"",popup:Qe(),onPopupVisibleChange:Ye,onPopupClick:qe,getPopupContainer:Z}),Ot)}const h_e=rr.forwardRef(u_e);var Bq=E.createContext(null);function Fq(t,n){return t===void 0?null:"".concat(t,"-").concat(n)}function Nq(t){var n=E.useContext(Bq);return Fq(n,t)}var d_e=["children","locked"],Hh=E.createContext(null);function f_e(t,n){var o=yt({},t);return Object.keys(n).forEach(function(s){var c=n[s];c!==void 0&&(o[s]=c)}),o}function Xb(t){var n=t.children,o=t.locked,s=xi(t,d_e),c=E.useContext(Hh),m=Hm(function(){return f_e(c,s)},[c,s],function(v,d){return!o&&(v[0]!==d[0]||!Vh(v[1],d[1],!0))});return E.createElement(Hh.Provider,{value:m},n)}var p_e=[],jq=E.createContext(null);function hM(){return E.useContext(jq)}var Vq=E.createContext(p_e);function E0(t){var n=E.useContext(Vq);return E.useMemo(function(){return t!==void 0?[].concat(Pr(n),[t]):n},[n,t])}var Uq=E.createContext(null),_z=E.createContext({});function RN(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(dw(t)){var o=t.nodeName.toLowerCase(),s=["input","select","textarea","button"].includes(o)||t.isContentEditable||o==="a"&&!!t.getAttribute("href"),c=t.getAttribute("tabindex"),m=Number(c),v=null;return c&&!Number.isNaN(m)?v=m:s&&v===null&&(v=0),s&&t.disabled&&(v=null),v!==null&&(v>=0||n&&v<0)}return!1}function m_e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=Pr(t.querySelectorAll("*")).filter(function(s){return RN(s,n)});return RN(t,n)&&o.unshift(t),o}var $R=Or.LEFT,BR=Or.RIGHT,FR=Or.UP,JE=Or.DOWN,QE=Or.ENTER,Hq=Or.ESC,Fx=Or.HOME,Nx=Or.END,kN=[FR,JE,$R,BR];function g_e(t,n,o,s){var c,m,v,d,C="prev",S="next",R="children",D="parent";if(t==="inline"&&s===QE)return{inlineTrigger:!0};var $=(c={},xt(c,FR,C),xt(c,JE,S),c),H=(m={},xt(m,$R,o?S:C),xt(m,BR,o?C:S),xt(m,JE,R),xt(m,QE,R),m),Z=(v={},xt(v,FR,C),xt(v,JE,S),xt(v,QE,R),xt(v,Hq,D),xt(v,$R,o?R:D),xt(v,BR,o?D:R),v),X={inline:$,horizontal:H,vertical:Z,inlineSub:$,horizontalSub:Z,verticalSub:Z},Q=(d=X["".concat(t).concat(n?"":"Sub")])===null||d===void 0?void 0:d[s];switch(Q){case C:return{offset:-1,sibling:!0};case S:return{offset:1,sibling:!0};case D:return{offset:-1,sibling:!1};case R:return{offset:1,sibling:!1};default:return null}}function y_e(t){for(var n=t;n;){if(n.getAttribute("data-menu-list"))return n;n=n.parentElement}return null}function v_e(t,n){for(var o=t||document.activeElement;o;){if(n.has(o))return o;o=o.parentElement}return null}function xz(t,n){var o=m_e(t,!0);return o.filter(function(s){return n.has(s)})}function ON(t,n,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var c=xz(t,n),m=c.length,v=c.findIndex(function(d){return o===d});return s<0?v===-1?v=m-1:v-=1:s>0&&(v+=1),v=(v+m)%m,c[v]}var NR=function(n,o){var s=new Set,c=new Map,m=new Map;return n.forEach(function(v){var d=document.querySelector("[data-menu-id='".concat(Fq(o,v),"']"));d&&(s.add(d),m.set(d,v),c.set(v,d))}),{elements:s,key2element:c,element2key:m}};function __e(t,n,o,s,c,m,v,d,C,S){var R=E.useRef(),D=E.useRef();D.current=n;var $=function(){Do.cancel(R.current)};return E.useEffect(function(){return function(){$()}},[]),function(H){var Z=H.which;if([].concat(kN,[QE,Hq,Fx,Nx]).includes(Z)){var X=m(),Q=NR(X,s),G=Q,K=G.elements,Y=G.key2element,re=G.element2key,fe=Y.get(n),me=v_e(fe,K),pe=re.get(me),xe=g_e(t,v(pe,!0).length===1,o,Z);if(!xe&&Z!==Fx&&Z!==Nx)return;(kN.includes(Z)||[Fx,Nx].includes(Z))&&H.preventDefault();var Se=function(Me){if(Me){var Ce=Me,Ye=Me.querySelector("a");Ye!=null&&Ye.getAttribute("href")&&(Ce=Ye);var qe=re.get(Me);d(qe),$(),R.current=Do(function(){D.current===qe&&Ce.focus()})}};if([Fx,Nx].includes(Z)||xe.sibling||!me){var oe;!me||t==="inline"?oe=c.current:oe=y_e(me);var Re,Ve=xz(oe,K);Z===Fx?Re=Ve[0]:Z===Nx?Re=Ve[Ve.length-1]:Re=ON(oe,K,me,xe.offset),Se(Re)}else if(xe.inlineTrigger)C(pe);else if(xe.offset>0)C(pe,!0),$(),R.current=Do(function(){Q=NR(X,s);var Le=me.getAttribute("aria-controls"),Me=document.getElementById(Le),Ce=ON(Me,Q.elements);Se(Ce)},5);else if(xe.offset<0){var Oe=v(pe,!0),_e=Oe[Oe.length-2],Fe=Y.get(_e);C(_e,!1),Se(Fe)}}S?.(H)}}function x_e(t){Promise.resolve().then(t)}var bz="__RC_UTIL_PATH_SPLIT__",zN=function(n){return n.join(bz)},b_e=function(n){return n.split(bz)},jR="rc-menu-more";function w_e(){var t=E.useState({}),n=nr(t,2),o=n[1],s=E.useRef(new Map),c=E.useRef(new Map),m=E.useState([]),v=nr(m,2),d=v[0],C=v[1],S=E.useRef(0),R=E.useRef(!1),D=function(){R.current||o({})},$=E.useCallback(function(Y,re){var fe=zN(re);c.current.set(fe,Y),s.current.set(Y,fe),S.current+=1;var me=S.current;x_e(function(){me===S.current&&D()})},[]),H=E.useCallback(function(Y,re){var fe=zN(re);c.current.delete(fe),s.current.delete(Y)},[]),Z=E.useCallback(function(Y){C(Y)},[]),X=E.useCallback(function(Y,re){var fe=s.current.get(Y)||"",me=b_e(fe);return re&&d.includes(me[0])&&me.unshift(jR),me},[d]),Q=E.useCallback(function(Y,re){return Y.some(function(fe){var me=X(fe,!0);return me.includes(re)})},[X]),G=function(){var re=Pr(s.current.keys());return d.length&&re.push(jR),re},K=E.useCallback(function(Y){var re="".concat(s.current.get(Y)).concat(bz),fe=new Set;return Pr(c.current.keys()).forEach(function(me){me.startsWith(re)&&fe.add(c.current.get(me))}),fe},[]);return E.useEffect(function(){return function(){R.current=!0}},[]),{registerPath:$,unregisterPath:H,refreshOverflowKeys:Z,isSubPathKey:Q,getKeyPath:X,getKeys:G,getSubPathKeys:K}}function Zx(t){var n=E.useRef(t);n.current=t;var o=E.useCallback(function(){for(var s,c=arguments.length,m=new Array(c),v=0;v<c;v++)m[v]=arguments[v];return(s=n.current)===null||s===void 0?void 0:s.call.apply(s,[n].concat(m))},[]);return t?o:void 0}var S_e=Math.random().toFixed(5).toString().slice(2),DN=0;function C_e(t){var n=ul(t,{value:t}),o=nr(n,2),s=o[0],c=o[1];return E.useEffect(function(){DN+=1;var m="".concat(S_e,"-").concat(DN);c("rc-menu-uuid-".concat(m))},[]),s}function Gq(t,n,o,s){var c=E.useContext(Hh),m=c.activeKey,v=c.onActive,d=c.onInactive,C={active:m===t};return n||(C.onMouseEnter=function(S){o?.({key:t,domEvent:S}),v(t)},C.onMouseLeave=function(S){s?.({key:t,domEvent:S}),d(t)}),C}function qq(t){var n=E.useContext(Hh),o=n.mode,s=n.rtl,c=n.inlineIndent;if(o!=="inline")return null;var m=t;return s?{paddingRight:m*c}:{paddingLeft:m*c}}function Wq(t){var n=t.icon,o=t.props,s=t.children,c;return n===null||n===!1?null:(typeof n=="function"?c=E.createElement(n,yt({},o)):typeof n!="boolean"&&(c=n),c||s||null)}var E_e=["item"];function WT(t){var n=t.item,o=xi(t,E_e);return Object.defineProperty(o,"item",{get:function(){return Ua(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),n}}),o}var T_e=["title","attribute","elementRef"],I_e=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],M_e=["active"],P_e=function(t){Wf(o,t);var n=Kf(o);function o(){return Il(this,o),n.apply(this,arguments)}return Ml(o,[{key:"render",value:function(){var c=this.props,m=c.title,v=c.attribute,d=c.elementRef,C=xi(c,T_e),S=Zs(C,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Ua(!v,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),E.createElement(Bd.Item,Mr({},v,{title:typeof m=="string"?m:void 0},S,{ref:d}))}}]),o}(E.Component),A_e=E.forwardRef(function(t,n){var o,s=t.style,c=t.className,m=t.eventKey;t.warnKey;var v=t.disabled,d=t.itemIcon,C=t.children,S=t.role,R=t.onMouseEnter,D=t.onMouseLeave,$=t.onClick,H=t.onKeyDown,Z=t.onFocus,X=xi(t,I_e),Q=Nq(m),G=E.useContext(Hh),K=G.prefixCls,Y=G.onItemClick,re=G.disabled,fe=G.overflowDisabled,me=G.itemIcon,pe=G.selectedKeys,xe=G.onActive,Se=E.useContext(_z),oe=Se._internalRenderMenuItem,Re="".concat(K,"-item"),Ve=E.useRef(),Oe=E.useRef(),_e=re||v,Fe=Ey(n,Oe),Le=E0(m),Me=function(zt){return{key:m,keyPath:Pr(Le).reverse(),item:Ve.current,domEvent:zt}},Ce=d||me,Ye=Gq(m,_e,R,D),qe=Ye.active,rt=xi(Ye,M_e),Qe=pe.includes(m),St=qq(Le.length),jt=function(zt){if(!_e){var Nt=Me(zt);$?.(WT(Nt)),Y(Nt)}},Ot=function(zt){if(H?.(zt),zt.which===Or.ENTER){var Nt=Me(zt);$?.(WT(Nt)),Y(Nt)}},Tt=function(zt){xe(m),Z?.(zt)},ct={};t.role==="option"&&(ct["aria-selected"]=Qe);var Ct=E.createElement(P_e,Mr({ref:Ve,elementRef:Fe,role:S===null?"none":S||"menuitem",tabIndex:v?null:-1,"data-menu-id":fe&&Q?null:Q},X,rt,ct,{component:"li","aria-disabled":v,style:yt(yt({},St),s),className:Gt(Re,(o={},xt(o,"".concat(Re,"-active"),qe),xt(o,"".concat(Re,"-selected"),Qe),xt(o,"".concat(Re,"-disabled"),_e),o),c),onClick:jt,onKeyDown:Ot,onFocus:Tt}),C,E.createElement(Wq,{props:yt(yt({},t),{},{isSelected:Qe}),icon:Ce}));return oe&&(Ct=oe(Ct,t,{selected:Qe})),Ct});function R_e(t,n){var o=t.eventKey,s=hM(),c=E0(o);return E.useEffect(function(){if(s)return s.registerPath(o,c),function(){s.unregisterPath(o,c)}},[c]),s?null:E.createElement(A_e,Mr({},t,{ref:n}))}const dM=E.forwardRef(R_e);var k_e=["className","children"],O_e=function(n,o){var s=n.className,c=n.children,m=xi(n,k_e),v=E.useContext(Hh),d=v.prefixCls,C=v.mode,S=v.rtl;return E.createElement("ul",Mr({className:Gt(d,S&&"".concat(d,"-rtl"),"".concat(d,"-sub"),"".concat(d,"-").concat(C==="inline"?"inline":"vertical"),s),role:"menu"},m,{"data-menu-list":!0,ref:o}),c)},wz=E.forwardRef(O_e);wz.displayName="SubMenuList";function Sz(t,n){return $c(t).map(function(o,s){if(E.isValidElement(o)){var c,m,v=o.key,d=(c=(m=o.props)===null||m===void 0?void 0:m.eventKey)!==null&&c!==void 0?c:v,C=d==null;C&&(d="tmp_key-".concat([].concat(Pr(n),[s]).join("-")));var S={key:d,eventKey:d};return E.cloneElement(o,S)}return o})}var Hl={adjustX:1,adjustY:1},z_e={topLeft:{points:["bl","tl"],overflow:Hl},topRight:{points:["br","tr"],overflow:Hl},bottomLeft:{points:["tl","bl"],overflow:Hl},bottomRight:{points:["tr","br"],overflow:Hl},leftTop:{points:["tr","tl"],overflow:Hl},leftBottom:{points:["br","bl"],overflow:Hl},rightTop:{points:["tl","tr"],overflow:Hl},rightBottom:{points:["bl","br"],overflow:Hl}},D_e={topLeft:{points:["bl","tl"],overflow:Hl},topRight:{points:["br","tr"],overflow:Hl},bottomLeft:{points:["tl","bl"],overflow:Hl},bottomRight:{points:["tr","br"],overflow:Hl},rightTop:{points:["tr","tl"],overflow:Hl},rightBottom:{points:["br","bl"],overflow:Hl},leftTop:{points:["tl","tr"],overflow:Hl},leftBottom:{points:["bl","br"],overflow:Hl}};function Kq(t,n,o){if(n)return n;if(o)return o[t]||o.other}var L_e={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function $_e(t){var n=t.prefixCls,o=t.visible,s=t.children,c=t.popup,m=t.popupStyle,v=t.popupClassName,d=t.popupOffset,C=t.disabled,S=t.mode,R=t.onVisibleChange,D=E.useContext(Hh),$=D.getPopupContainer,H=D.rtl,Z=D.subMenuOpenDelay,X=D.subMenuCloseDelay,Q=D.builtinPlacements,G=D.triggerSubMenuAction,K=D.forceSubMenuRender,Y=D.rootClassName,re=D.motion,fe=D.defaultMotions,me=E.useState(!1),pe=nr(me,2),xe=pe[0],Se=pe[1],oe=yt(H?yt({},D_e):yt({},z_e),Q),Re=L_e[S],Ve=Kq(S,re,fe),Oe=E.useRef(Ve);S!=="inline"&&(Oe.current=Ve);var _e=yt(yt({},Oe.current),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),Fe=E.useRef();return E.useEffect(function(){return Fe.current=Do(function(){Se(o)}),function(){Do.cancel(Fe.current)}},[o]),E.createElement(sM,{prefixCls:n,popupClassName:Gt("".concat(n,"-popup"),xt({},"".concat(n,"-rtl"),H),v,Y),stretch:S==="horizontal"?"minWidth":null,getPopupContainer:$,builtinPlacements:oe,popupPlacement:Re,popupVisible:xe,popup:c,popupStyle:m,popupAlign:d&&{offset:d},action:C?[]:[G],mouseEnterDelay:Z,mouseLeaveDelay:X,onPopupVisibleChange:R,forceRender:K,popupMotion:_e,fresh:!0},s)}function B_e(t){var n=t.id,o=t.open,s=t.keyPath,c=t.children,m="inline",v=E.useContext(Hh),d=v.prefixCls,C=v.forceSubMenuRender,S=v.motion,R=v.defaultMotions,D=v.mode,$=E.useRef(!1);$.current=D===m;var H=E.useState(!$.current),Z=nr(H,2),X=Z[0],Q=Z[1],G=$.current?o:!1;E.useEffect(function(){$.current&&Q(!1)},[D]);var K=yt({},Kq(m,S,R));s.length>1&&(K.motionAppear=!1);var Y=K.onVisibleChanged;return K.onVisibleChanged=function(re){return!$.current&&!re&&Q(!0),Y?.(re)},X?null:E.createElement(Xb,{mode:m,locked:!$.current},E.createElement(Ud,Mr({visible:G},K,{forceRender:C,removeOnLeave:!1,leavedClassName:"".concat(d,"-hidden")}),function(re){var fe=re.className,me=re.style;return E.createElement(wz,{id:n,className:fe,style:me},c)}))}var F_e=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],N_e=["active"],j_e=function(n){var o,s=n.style,c=n.className,m=n.title,v=n.eventKey;n.warnKey;var d=n.disabled,C=n.internalPopupClose,S=n.children,R=n.itemIcon,D=n.expandIcon,$=n.popupClassName,H=n.popupOffset,Z=n.popupStyle,X=n.onClick,Q=n.onMouseEnter,G=n.onMouseLeave,K=n.onTitleClick,Y=n.onTitleMouseEnter,re=n.onTitleMouseLeave,fe=xi(n,F_e),me=Nq(v),pe=E.useContext(Hh),xe=pe.prefixCls,Se=pe.mode,oe=pe.openKeys,Re=pe.disabled,Ve=pe.overflowDisabled,Oe=pe.activeKey,_e=pe.selectedKeys,Fe=pe.itemIcon,Le=pe.expandIcon,Me=pe.onItemClick,Ce=pe.onOpenChange,Ye=pe.onActive,qe=E.useContext(_z),rt=qe._internalRenderSubMenuItem,Qe=E.useContext(Uq),St=Qe.isSubPathKey,jt=E0(),Ot="".concat(xe,"-submenu"),Tt=Re||d,ct=E.useRef(),Ct=E.useRef(),kt=R??Fe,zt=D??Le,Nt=oe.includes(v),Rt=!Ve&&Nt,Pt=St(_e,v),Dt=Gq(v,Tt,Y,re),Ut=Dt.active,sr=xi(Dt,N_e),vt=E.useState(!1),De=nr(vt,2),ze=De[0],ve=De[1],pt=function(Yr){Tt||ve(Yr)},gt=function(Yr){pt(!0),Q?.({key:v,domEvent:Yr})},$t=function(Yr){pt(!1),G?.({key:v,domEvent:Yr})},It=E.useMemo(function(){return Ut||(Se!=="inline"?ze||St([Oe],v):!1)},[Se,Ut,Oe,ze,v,St]),Mt=qq(jt.length),Qt=function(Yr){Tt||(K?.({key:v,domEvent:Yr}),Se==="inline"&&Ce(v,!Nt))},wr=Zx(function(en){X?.(WT(en)),Me(en)}),br=function(Yr){Se!=="inline"&&Ce(v,Yr)},tn=function(){Ye(v)},yr=me&&"".concat(me,"-popup"),dr=E.createElement("div",Mr({role:"menuitem",style:Mt,className:"".concat(Ot,"-title"),tabIndex:Tt?null:-1,ref:ct,title:typeof m=="string"?m:null,"data-menu-id":Ve&&me?null:me,"aria-expanded":Rt,"aria-haspopup":!0,"aria-controls":yr,"aria-disabled":Tt,onClick:Qt,onFocus:tn},sr),m,E.createElement(Wq,{icon:Se!=="horizontal"?zt:void 0,props:yt(yt({},n),{},{isOpen:Rt,isSubMenu:!0})},E.createElement("i",{className:"".concat(Ot,"-arrow")}))),Wt=E.useRef(Se);if(Se!=="inline"&&jt.length>1?Wt.current="vertical":Wt.current=Se,!Ve){var Wr=Wt.current;dr=E.createElement($_e,{mode:Wr,prefixCls:Ot,visible:!C&&Rt&&Se!=="inline",popupClassName:$,popupOffset:H,popupStyle:Z,popup:E.createElement(Xb,{mode:Wr==="horizontal"?"vertical":Wr},E.createElement(wz,{id:yr,ref:Ct},S)),disabled:Tt,onVisibleChange:br},dr)}var Fr=E.createElement(Bd.Item,Mr({role:"none"},fe,{component:"li",style:s,className:Gt(Ot,"".concat(Ot,"-").concat(Se),c,(o={},xt(o,"".concat(Ot,"-open"),Rt),xt(o,"".concat(Ot,"-active"),It),xt(o,"".concat(Ot,"-selected"),Pt),xt(o,"".concat(Ot,"-disabled"),Tt),o)),onMouseEnter:gt,onMouseLeave:$t}),dr,!Ve&&E.createElement(B_e,{id:yr,open:Rt,keyPath:jt},S));return rt&&(Fr=rt(Fr,n,{selected:Pt,active:It,open:Rt,disabled:Tt})),E.createElement(Xb,{onItemClick:wr,mode:Se==="horizontal"?"vertical":Se,itemIcon:kt,expandIcon:zt},Fr)};function fM(t){var n=t.eventKey,o=t.children,s=E0(n),c=Sz(o,s),m=hM();E.useEffect(function(){if(m)return m.registerPath(n,s),function(){m.unregisterPath(n,s)}},[s]);var v;return m?v=c:v=E.createElement(j_e,t,c),E.createElement(Vq.Provider,{value:s},v)}var V_e=["className","title","eventKey","children"],U_e=["children"],H_e=function(n){var o=n.className,s=n.title;n.eventKey;var c=n.children,m=xi(n,V_e),v=E.useContext(Hh),d=v.prefixCls,C="".concat(d,"-item-group");return E.createElement("li",Mr({role:"presentation"},m,{onClick:function(R){return R.stopPropagation()},className:Gt(C,o)}),E.createElement("div",{role:"presentation",className:"".concat(C,"-title"),title:typeof s=="string"?s:void 0},s),E.createElement("ul",{role:"group",className:"".concat(C,"-list")},c))};function pM(t){var n=t.children,o=xi(t,U_e),s=E0(o.eventKey),c=Sz(n,s),m=hM();return m?c:E.createElement(H_e,Zs(o,["warnKey"]),c)}function Cz(t){var n=t.className,o=t.style,s=E.useContext(Hh),c=s.prefixCls,m=hM();return m?null:E.createElement("li",{role:"separator",className:Gt("".concat(c,"-item-divider"),n),style:o})}var G_e=["label","children","key","type"];function VR(t){return(t||[]).map(function(n,o){if(n&&Ei(n)==="object"){var s=n,c=s.label,m=s.children,v=s.key,d=s.type,C=xi(s,G_e),S=v??"tmp-".concat(o);return m||d==="group"?d==="group"?E.createElement(pM,Mr({key:S},C,{title:c}),VR(m)):E.createElement(fM,Mr({key:S},C,{title:c}),VR(m)):d==="divider"?E.createElement(Cz,Mr({key:S},C)):E.createElement(dM,Mr({key:S},C),c)}return null}).filter(function(n){return n})}function q_e(t,n,o){var s=t;return n&&(s=VR(n)),Sz(s,o)}var W_e=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],s_=[],K_e=E.forwardRef(function(t,n){var o,s,c=t,m=c.prefixCls,v=m===void 0?"rc-menu":m,d=c.rootClassName,C=c.style,S=c.className,R=c.tabIndex,D=R===void 0?0:R,$=c.items,H=c.children,Z=c.direction,X=c.id,Q=c.mode,G=Q===void 0?"vertical":Q,K=c.inlineCollapsed,Y=c.disabled,re=c.disabledOverflow,fe=c.subMenuOpenDelay,me=fe===void 0?.1:fe,pe=c.subMenuCloseDelay,xe=pe===void 0?.1:pe,Se=c.forceSubMenuRender,oe=c.defaultOpenKeys,Re=c.openKeys,Ve=c.activeKey,Oe=c.defaultActiveFirst,_e=c.selectable,Fe=_e===void 0?!0:_e,Le=c.multiple,Me=Le===void 0?!1:Le,Ce=c.defaultSelectedKeys,Ye=c.selectedKeys,qe=c.onSelect,rt=c.onDeselect,Qe=c.inlineIndent,St=Qe===void 0?24:Qe,jt=c.motion,Ot=c.defaultMotions,Tt=c.triggerSubMenuAction,ct=Tt===void 0?"hover":Tt,Ct=c.builtinPlacements,kt=c.itemIcon,zt=c.expandIcon,Nt=c.overflowedIndicator,Rt=Nt===void 0?"...":Nt,Pt=c.overflowedIndicatorPopupClassName,Dt=c.getPopupContainer,Ut=c.onClick,sr=c.onOpenChange,vt=c.onKeyDown;c.openAnimation,c.openTransitionName;var De=c._internalRenderMenuItem,ze=c._internalRenderSubMenuItem,ve=xi(c,W_e),pt=E.useMemo(function(){return q_e(H,$,s_)},[H,$]),gt=E.useState(!1),$t=nr(gt,2),It=$t[0],Mt=$t[1],Qt=E.useRef(),wr=C_e(X),br=Z==="rtl",tn=ul(oe,{value:Re,postState:function(un){return un||s_}}),yr=nr(tn,2),dr=yr[0],Wt=yr[1],Wr=function(un){var qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function In(){Wt(un),sr?.(un)}qn?Nh.flushSync(In):In()},Fr=E.useState(dr),en=nr(Fr,2),Yr=en[0],fr=en[1],Kr=E.useRef(!1),Br=E.useMemo(function(){return(G==="inline"||G==="vertical")&&K?["vertical",K]:[G,!1]},[G,K]),an=nr(Br,2),ni=an[0],Nr=an[1],ii=ni==="inline",Pe=E.useState(ni),he=nr(Pe,2),ge=he[0],Te=he[1],$e=E.useState(Nr),ke=nr($e,2),Ke=ke[0],Ue=ke[1];E.useEffect(function(){Te(ni),Ue(Nr),Kr.current&&(ii?Wt(Yr):Wr(s_))},[ni,Nr]);var Ne=E.useState(0),et=nr(Ne,2),Et=et[0],Yt=et[1],dt=Et>=pt.length-1||ge!=="horizontal"||re;E.useEffect(function(){ii&&fr(dr)},[dr]),E.useEffect(function(){return Kr.current=!0,function(){Kr.current=!1}},[]);var ir=w_e(),gr=ir.registerPath,mr=ir.unregisterPath,Sr=ir.refreshOverflowKeys,Gr=ir.isSubPathKey,Rr=ir.getKeyPath,Cr=ir.getKeys,Lr=ir.getSubPathKeys,cn=E.useMemo(function(){return{registerPath:gr,unregisterPath:mr}},[gr,mr]),oi=E.useMemo(function(){return{isSubPathKey:Gr}},[Gr]);E.useEffect(function(){Sr(dt?s_:pt.slice(Et+1).map(function(jr){return jr.key}))},[Et,dt]);var Sn=ul(Ve||Oe&&((o=pt[0])===null||o===void 0?void 0:o.key),{value:Ve}),bi=nr(Sn,2),Li=bi[0],no=bi[1],ba=Zx(function(jr){no(jr)}),io=Zx(function(){no(void 0)});E.useImperativeHandle(n,function(){return{list:Qt.current,focus:function(un){var qn,In=Cr(),Ci=NR(In,wr),Qr=Ci.elements,Jn=Ci.key2element,Qi=Ci.element2key,Lo=xz(Qt.current,Qr),Go=Li??(Lo[0]?Qi.get(Lo[0]):(qn=pt.find(function(gi){return!gi.props.disabled}))===null||qn===void 0?void 0:qn.key),Da=Jn.get(Go);if(Go&&Da){var fi;Da==null||(fi=Da.focus)===null||fi===void 0||fi.call(Da,un)}}}});var ra=ul(Ce||[],{value:Ye,postState:function(un){return Array.isArray(un)?un:un==null?s_:[un]}}),fs=nr(ra,2),Jr=fs[0],di=fs[1],Ai=function(un){if(Fe){var qn=un.key,In=Jr.includes(qn),Ci;Me?In?Ci=Jr.filter(function(Jn){return Jn!==qn}):Ci=[].concat(Pr(Jr),[qn]):Ci=[qn],di(Ci);var Qr=yt(yt({},un),{},{selectedKeys:Ci});In?rt?.(Qr):qe?.(Qr)}!Me&&dr.length&&ge!=="inline"&&Wr(s_)},Ti=Zx(function(jr){Ut?.(WT(jr)),Ai(jr)}),Ji=Zx(function(jr,un){var qn=dr.filter(function(Ci){return Ci!==jr});if(un)qn.push(jr);else if(ge!=="inline"){var In=Lr(jr);qn=qn.filter(function(Ci){return!In.has(Ci)})}Vh(dr,qn,!0)||Wr(qn,!0)}),Xs=function(un,qn){var In=qn??!dr.includes(un);Ji(un,In)},Ho=__e(ge,Li,br,wr,Qt,Cr,Rr,no,Xs,vt);E.useEffect(function(){Mt(!0)},[]);var ji=E.useMemo(function(){return{_internalRenderMenuItem:De,_internalRenderSubMenuItem:ze}},[De,ze]),za=ge!=="horizontal"||re?pt:pt.map(function(jr,un){return E.createElement(Xb,{key:jr.key,overflowDisabled:un>Et},jr)}),jn=E.createElement(Bd,Mr({id:X,ref:Qt,prefixCls:"".concat(v,"-overflow"),component:"ul",itemComponent:dM,className:Gt(v,"".concat(v,"-root"),"".concat(v,"-").concat(ge),S,(s={},xt(s,"".concat(v,"-inline-collapsed"),Ke),xt(s,"".concat(v,"-rtl"),br),s),d),dir:Z,style:C,role:"menu",tabIndex:D,data:za,renderRawItem:function(un){return un},renderRawRest:function(un){var qn=un.length,In=qn?pt.slice(-qn):null;return E.createElement(fM,{eventKey:jR,title:Rt,disabled:dt,internalPopupClose:qn===0,popupClassName:Pt},In)},maxCount:ge!=="horizontal"||re?Bd.INVALIDATE:Bd.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(un){Yt(un)},onKeyDown:Ho},ve));return E.createElement(_z.Provider,{value:ji},E.createElement(Bq.Provider,{value:wr},E.createElement(Xb,{prefixCls:v,rootClassName:d,mode:ge,openKeys:dr,rtl:br,disabled:Y,motion:It?jt:null,defaultMotions:It?Ot:null,activeKey:Li,onActive:ba,onInactive:io,selectedKeys:Jr,inlineIndent:St,subMenuOpenDelay:me,subMenuCloseDelay:xe,forceSubMenuRender:Se,builtinPlacements:Ct,triggerSubMenuAction:ct,getPopupContainer:Dt,itemIcon:kt,expandIcon:zt,onItemClick:Ti,onOpenChange:Ji},E.createElement(Uq.Provider,{value:oi},jn),E.createElement("div",{style:{display:"none"},"aria-hidden":!0},E.createElement(jq.Provider,{value:cn},pt)))))}),xw=K_e;xw.Item=dM;xw.SubMenu=fM;xw.ItemGroup=pM;xw.Divider=Cz;var Z_e={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const X_e=Z_e;var Y_e=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:X_e}))};const J_e=E.forwardRef(Y_e);var Q_e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const e0e=Q_e;var t0e=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:e0e}))};const KT=E.forwardRef(t0e),r0e=t=>!isNaN(parseFloat(t))&&isFinite(t),Zq=E.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});var n0e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const LN={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},mM=E.createContext({}),i0e=(()=>{let t=0;return function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t+=1,`${n}${t}`}})(),Xq=E.forwardRef((t,n)=>{const{prefixCls:o,className:s,trigger:c,children:m,defaultCollapsed:v=!1,theme:d="dark",style:C={},collapsible:S=!1,reverseArrow:R=!1,width:D=200,collapsedWidth:$=80,zeroWidthTriggerStyle:H,breakpoint:Z,onCollapse:X,onBreakpoint:Q}=t,G=n0e(t,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:K}=E.useContext(Zq),[Y,re]=E.useState("collapsed"in t?t.collapsed:v),[fe,me]=E.useState(!1);E.useEffect(()=>{"collapsed"in t&&re(t.collapsed)},[t.collapsed]);const pe=(Oe,_e)=>{"collapsed"in t||re(Oe),X?.(Oe,_e)},xe=E.useRef();xe.current=Oe=>{me(Oe.matches),Q?.(Oe.matches),Y!==Oe.matches&&pe(Oe.matches,"responsive")},E.useEffect(()=>{function Oe(Fe){return xe.current(Fe)}let _e;if(typeof window<"u"){const{matchMedia:Fe}=window;if(Fe&&Z&&Z in LN){_e=Fe(`screen and (max-width: ${LN[Z]})`);try{_e.addEventListener("change",Oe)}catch{_e.addListener(Oe)}Oe(_e)}}return()=>{try{_e?.removeEventListener("change",Oe)}catch{_e?.removeListener(Oe)}}},[Z]),E.useEffect(()=>{const Oe=i0e("ant-sider-");return K.addSider(Oe),()=>K.removeSider(Oe)},[]);const Se=()=>{pe(!Y,"clickTrigger")},{getPrefixCls:oe}=E.useContext(hi),Re=()=>{const Oe=oe("layout-sider",o),_e=Zs(G,["collapsed"]),Fe=Y?$:D,Le=r0e(Fe)?`${Fe}px`:String(Fe),Me=parseFloat(String($||0))===0?E.createElement("span",{onClick:Se,className:Gt(`${Oe}-zero-width-trigger`,`${Oe}-zero-width-trigger-${R?"right":"left"}`),style:H},c||E.createElement(J_e,null)):null,qe={expanded:R?E.createElement(Zb,null):E.createElement(KT,null),collapsed:R?E.createElement(KT,null):E.createElement(Zb,null)}[Y?"collapsed":"expanded"],rt=c!==null?Me||E.createElement("div",{className:`${Oe}-trigger`,onClick:Se,style:{width:Le}},c||qe):null,Qe=Object.assign(Object.assign({},C),{flex:`0 0 ${Le}`,maxWidth:Le,minWidth:Le,width:Le}),St=Gt(Oe,`${Oe}-${d}`,{[`${Oe}-collapsed`]:!!Y,[`${Oe}-has-trigger`]:S&&c!==null&&!Me,[`${Oe}-below`]:!!fe,[`${Oe}-zero-width`]:parseFloat(Le)===0},s);return E.createElement("aside",Object.assign({className:St},_e,{style:Qe,ref:n}),E.createElement("div",{className:`${Oe}-children`},m),S||fe&&Me?rt:null)},Ve=E.useMemo(()=>({siderCollapsed:Y}),[Y]);return E.createElement(mM.Provider,{value:Ve},Re())});var o0e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const a0e=t=>{const{prefixCls:n,className:o,dashed:s}=t,c=o0e(t,["prefixCls","className","dashed"]),{getPrefixCls:m}=E.useContext(hi),v=m("menu",n),d=Gt({[`${v}-item-divider-dashed`]:!!s},o);return E.createElement(Cz,Object.assign({className:d},c))},Yq=a0e,s0e=E.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),ZT=s0e,l0e=t=>{var n;const{className:o,children:s,icon:c,title:m,danger:v}=t,{prefixCls:d,firstLevel:C,direction:S,disableMenuItemTitleTooltip:R,inlineCollapsed:D}=E.useContext(ZT),$=K=>{const Y=E.createElement("span",{className:`${d}-title-content`},s);return(!c||xu(s)&&s.type==="span")&&s&&K&&C&&typeof s=="string"?E.createElement("div",{className:`${d}-inline-collapsed-noicon`},s.charAt(0)):Y},{siderCollapsed:H}=E.useContext(mM);let Z=m;typeof m>"u"?Z=C?s:"":m===!1&&(Z="");const X={title:Z};!H&&!D&&(X.title=null,X.open=!1);const Q=$c(s).length;let G=E.createElement(dM,Object.assign({},Zs(t,["title","icon","danger"]),{className:Gt({[`${d}-item-danger`]:v,[`${d}-item-only-child`]:(c?Q+1:Q)===1},o),title:typeof m=="string"?m:void 0}),cc(c,{className:Gt(xu(c)?(n=c.props)===null||n===void 0?void 0:n.className:"",`${d}-item-icon`)}),$(D));return R||(G=E.createElement(uM,Object.assign({},X,{placement:S==="rtl"?"left":"right",overlayClassName:`${d}-inline-collapsed-tooltip`}),G)),G},Jq=l0e,c0e=t=>{var n;const{popupClassName:o,icon:s,title:c,theme:m}=t,v=E.useContext(ZT),{prefixCls:d,inlineCollapsed:C,theme:S}=v,R=E0();let D;if(!s)D=C&&!R.length&&c&&typeof c=="string"?E.createElement("div",{className:`${d}-inline-collapsed-noicon`},c.charAt(0)):E.createElement("span",{className:`${d}-title-content`},c);else{const Z=xu(c)&&c.type==="span";D=E.createElement(E.Fragment,null,cc(s,{className:Gt(xu(s)?(n=s.props)===null||n===void 0?void 0:n.className:"",`${d}-item-icon`)}),Z?c:E.createElement("span",{className:`${d}-title-content`},c))}const $=E.useMemo(()=>Object.assign(Object.assign({},v),{firstLevel:!1}),[v]),[H]=uw("Menu");return E.createElement(ZT.Provider,{value:$},E.createElement(fM,Object.assign({},Zs(t,["icon"]),{title:D,popupClassName:Gt(d,o,`${d}-${m||S}`),popupStyle:{zIndex:H}})))},Qq=c0e;var u0e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const h0e=u0e;var d0e=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:h0e}))};const eW=E.forwardRef(d0e);var f0e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function UR(t){return(t||[]).map((n,o)=>{if(n&&typeof n=="object"){const s=n,{label:c,children:m,key:v,type:d}=s,C=f0e(s,["label","children","key","type"]),S=v??`tmp-${o}`;return m||d==="group"?d==="group"?E.createElement(pM,Object.assign({key:S},C,{title:c}),UR(m)):E.createElement(Qq,Object.assign({key:S},C,{title:c}),UR(m)):d==="divider"?E.createElement(Yq,Object.assign({key:S},C)):E.createElement(Jq,Object.assign({key:S},C),c)}return null}).filter(n=>n)}function p0e(t){return E.useMemo(()=>t&&UR(t),[t])}var m0e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const XT=E.createContext(null),tW=E.forwardRef((t,n)=>{const{children:o}=t,s=m0e(t,["children"]),c=E.useContext(XT),m=E.useMemo(()=>Object.assign(Object.assign({},c),s),[c,s.prefixCls,s.mode,s.selectable,s.rootClassName]),v=ble(o),d=Ey(n,v?o.ref:null);return E.createElement(XT.Provider,{value:m},E.createElement(Gb,null,v?E.cloneElement(o,{ref:d}):o))}),g0e=t=>{const{componentCls:n,motionDurationSlow:o,horizontalLineHeight:s,colorSplit:c,lineWidth:m,lineType:v,itemPaddingInline:d}=t;return{[`${n}-horizontal`]:{lineHeight:s,border:0,borderBottom:`${Xt(m)} ${v} ${c}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${n}-item, ${n}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:d},[`> ${n}-item:hover,
        > ${n}-item-active,
        > ${n}-submenu ${n}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${n}-item, ${n}-submenu-title`]:{transition:[`border-color ${o}`,`background ${o}`].join(",")},[`${n}-submenu-arrow`]:{display:"none"}}}},y0e=t=>{let{componentCls:n,menuArrowOffset:o,calc:s}=t;return{[`${n}-rtl`]:{direction:"rtl"},[`${n}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${n}-rtl${n}-vertical,
    ${n}-submenu-rtl ${n}-vertical`]:{[`${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${Xt(s(o).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${Xt(o)})`}}}}},$N=t=>Object.assign({},Lm(t)),BN=(t,n)=>{const{componentCls:o,itemColor:s,itemSelectedColor:c,groupTitleColor:m,itemBg:v,subMenuItemBg:d,itemSelectedBg:C,activeBarHeight:S,activeBarWidth:R,activeBarBorderWidth:D,motionDurationSlow:$,motionEaseInOut:H,motionEaseOut:Z,itemPaddingInline:X,motionDurationMid:Q,itemHoverColor:G,lineType:K,colorSplit:Y,itemDisabledColor:re,dangerItemColor:fe,dangerItemHoverColor:me,dangerItemSelectedColor:pe,dangerItemActiveBg:xe,dangerItemSelectedBg:Se,itemHoverBg:oe,itemActiveBg:Re,menuSubMenuBg:Ve,horizontalItemSelectedColor:Oe,horizontalItemSelectedBg:_e,horizontalItemBorderRadius:Fe,horizontalItemHoverBg:Le,popupBg:Me}=t;return{[`${o}-${n}, ${o}-${n} > ${o}`]:{color:s,background:v,[`&${o}-root:focus-visible`]:Object.assign({},$N(t)),[`${o}-item-group-title`]:{color:m},[`${o}-submenu-selected`]:{[`> ${o}-submenu-title`]:{color:c}},[`${o}-item-disabled, ${o}-submenu-disabled`]:{color:`${re} !important`},[`${o}-item:not(${o}-item-selected):not(${o}-submenu-selected)`]:{[`&:hover, > ${o}-submenu-title:hover`]:{color:G}},[`&:not(${o}-horizontal)`]:{[`${o}-item:not(${o}-item-selected)`]:{"&:hover":{backgroundColor:oe},"&:active":{backgroundColor:Re}},[`${o}-submenu-title`]:{"&:hover":{backgroundColor:oe},"&:active":{backgroundColor:Re}}},[`${o}-item-danger`]:{color:fe,[`&${o}-item:hover`]:{[`&:not(${o}-item-selected):not(${o}-submenu-selected)`]:{color:me}},[`&${o}-item:active`]:{background:xe}},[`${o}-item a`]:{"&, &:hover":{color:"inherit"}},[`${o}-item-selected`]:{color:c,[`&${o}-item-danger`]:{color:pe},"a, a:hover":{color:"inherit"}},[`& ${o}-item-selected`]:{backgroundColor:C,[`&${o}-item-danger`]:{backgroundColor:Se}},[`${o}-item, ${o}-submenu-title`]:{[`&:not(${o}-item-disabled):focus-visible`]:Object.assign({},$N(t))},[`&${o}-submenu > ${o}`]:{backgroundColor:Ve},[`&${o}-popup > ${o}`]:{backgroundColor:Me},[`&${o}-horizontal`]:Object.assign(Object.assign({},n==="dark"?{borderBottom:0}:{}),{[`> ${o}-item, > ${o}-submenu`]:{top:D,marginTop:t.calc(D).mul(-1).equal(),marginBottom:0,borderRadius:Fe,"&::after":{position:"absolute",insetInline:X,bottom:0,borderBottom:`${Xt(S)} solid transparent`,transition:`border-color ${$} ${H}`,content:'""'},"&:hover, &-active, &-open":{background:Le,"&::after":{borderBottomWidth:S,borderBottomColor:Oe}},"&-selected":{color:Oe,backgroundColor:_e,"&:hover":{backgroundColor:_e},"&::after":{borderBottomWidth:S,borderBottomColor:Oe}}}}),[`&${o}-root`]:{[`&${o}-inline, &${o}-vertical`]:{borderInlineEnd:`${Xt(D)} ${K} ${Y}`}},[`&${o}-inline`]:{[`${o}-sub${o}-inline`]:{background:d},[`${o}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Xt(R)} solid ${c}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${Q} ${Z}`,`opacity ${Q} ${Z}`].join(","),content:'""'},[`&${o}-item-danger`]:{"&::after":{borderInlineEndColor:pe}}},[`${o}-selected, ${o}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${Q} ${H}`,`opacity ${Q} ${H}`].join(",")}}}}}},FN=t=>{const{componentCls:n,itemHeight:o,itemMarginInline:s,padding:c,menuArrowSize:m,marginXS:v,itemMarginBlock:d,itemWidth:C}=t,S=t.calc(m).add(c).add(v).equal();return{[`${n}-item`]:{position:"relative",overflow:"hidden"},[`${n}-item, ${n}-submenu-title`]:{height:o,lineHeight:Xt(o),paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:s,marginBlock:d,width:C},[`> ${n}-item,
            > ${n}-submenu > ${n}-submenu-title`]:{height:o,lineHeight:Xt(o)},[`${n}-item-group-list ${n}-submenu-title,
            ${n}-submenu-title`]:{paddingInlineEnd:S}}},v0e=t=>{const{componentCls:n,iconCls:o,itemHeight:s,colorTextLightSolid:c,dropdownWidth:m,controlHeightLG:v,motionDurationMid:d,motionEaseOut:C,paddingXL:S,itemMarginInline:R,fontSizeLG:D,motionDurationSlow:$,paddingXS:H,boxShadowSecondary:Z,collapsedWidth:X,collapsedIconSize:Q}=t,G={height:s,lineHeight:Xt(s),listStylePosition:"inside",listStyleType:"disc"};return[{[n]:{"&-inline, &-vertical":Object.assign({[`&${n}-root`]:{boxShadow:"none"}},FN(t))},[`${n}-submenu-popup`]:{[`${n}-vertical`]:Object.assign(Object.assign({},FN(t)),{boxShadow:Z})}},{[`${n}-submenu-popup ${n}-vertical${n}-sub`]:{minWidth:m,maxHeight:`calc(100vh - ${Xt(t.calc(v).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${n}-inline`]:{width:"100%",[`&${n}-root`]:{[`${n}-item, ${n}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${$}`,`background ${$}`,`padding ${d} ${C}`].join(","),[`> ${n}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${n}-sub${n}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${n}-submenu > ${n}-submenu-title`]:G,[`& ${n}-item-group-title`]:{paddingInlineStart:S}},[`${n}-item`]:G}},{[`${n}-inline-collapsed`]:{width:X,[`&${n}-root`]:{[`${n}-item, ${n}-submenu ${n}-submenu-title`]:{[`> ${n}-inline-collapsed-noicon`]:{fontSize:D,textAlign:"center"}}},[`> ${n}-item,
          > ${n}-item-group > ${n}-item-group-list > ${n}-item,
          > ${n}-item-group > ${n}-item-group-list > ${n}-submenu > ${n}-submenu-title,
          > ${n}-submenu > ${n}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Xt(t.calc(D).div(2).equal())} - ${Xt(R)})`,textOverflow:"clip",[`
            ${n}-submenu-arrow,
            ${n}-submenu-expand-icon
          `]:{opacity:0},[`${n}-item-icon, ${o}`]:{margin:0,fontSize:Q,lineHeight:Xt(s),"+ span":{display:"inline-block",opacity:0}}},[`${n}-item-icon, ${o}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${n}-item-icon, ${o}`]:{display:"none"},"a, a:hover":{color:c}},[`${n}-item-group-title`]:Object.assign(Object.assign({},Vb),{paddingInline:H})}}]},NN=t=>{const{componentCls:n,motionDurationSlow:o,motionDurationMid:s,motionEaseInOut:c,motionEaseOut:m,iconCls:v,iconSize:d,iconMarginInlineEnd:C}=t;return{[`${n}-item, ${n}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${o}`,`background ${o}`,`padding ${o} ${c}`].join(","),[`${n}-item-icon, ${v}`]:{minWidth:d,fontSize:d,transition:[`font-size ${s} ${m}`,`margin ${o} ${c}`,`color ${o}`].join(","),"+ span":{marginInlineStart:C,opacity:1,transition:[`opacity ${o} ${c}`,`margin ${o}`,`color ${o}`].join(",")}},[`${n}-item-icon`]:Object.assign({},KI()),[`&${n}-item-only-child`]:{[`> ${v}, > ${n}-item-icon`]:{marginInlineEnd:0}}},[`${n}-item-disabled, ${n}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${n}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},jN=t=>{const{componentCls:n,motionDurationSlow:o,motionEaseInOut:s,borderRadius:c,menuArrowSize:m,menuArrowOffset:v}=t;return{[`${n}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:m,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${o} ${s}, opacity ${o}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:t.calc(m).mul(.6).equal(),height:t.calc(m).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:c,transition:[`background ${o} ${s}`,`transform ${o} ${s}`,`top ${o} ${s}`,`color ${o} ${s}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${Xt(t.calc(v).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${Xt(v)})`}}}}},_0e=t=>{const{antCls:n,componentCls:o,fontSize:s,motionDurationSlow:c,motionDurationMid:m,motionEaseInOut:v,paddingXS:d,padding:C,colorSplit:S,lineWidth:R,zIndexPopup:D,borderRadiusLG:$,subMenuItemBorderRadius:H,menuArrowSize:Z,menuArrowOffset:X,lineType:Q,menuPanelMaskInset:G,groupTitleLineHeight:K,groupTitleFontSize:Y}=t;return[{"":{[`${o}`]:Object.assign(Object.assign({},Ub()),{"&-hidden":{display:"none"}})},[`${o}-submenu-hidden`]:{display:"none"}},{[o]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oa(t)),Ub()),{marginBottom:0,paddingInlineStart:0,fontSize:s,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${c} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${o}-item`]:{flex:"none"}},[`${o}-item, ${o}-submenu, ${o}-submenu-title`]:{borderRadius:t.itemBorderRadius},[`${o}-item-group-title`]:{padding:`${Xt(d)} ${Xt(C)}`,fontSize:Y,lineHeight:K,transition:`all ${c}`},[`&-horizontal ${o}-submenu`]:{transition:[`border-color ${c} ${v}`,`background ${c} ${v}`].join(",")},[`${o}-submenu, ${o}-submenu-inline`]:{transition:[`border-color ${c} ${v}`,`background ${c} ${v}`,`padding ${m} ${v}`].join(",")},[`${o}-submenu ${o}-sub`]:{cursor:"initial",transition:[`background ${c} ${v}`,`padding ${c} ${v}`].join(",")},[`${o}-title-content`]:{transition:`color ${c}`,[`> ${n}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"}},[`${o}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${o}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:S,borderStyle:Q,borderWidth:0,borderTopWidth:R,marginBlock:R,padding:0,"&-dashed":{borderStyle:"dashed"}}}),NN(t)),{[`${o}-item-group`]:{[`${o}-item-group-list`]:{margin:0,padding:0,[`${o}-item, ${o}-submenu-title`]:{paddingInline:`${Xt(t.calc(s).mul(2).equal())} ${Xt(C)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:D,borderRadius:$,boxShadow:"none",transformOrigin:"0 0",[`&${o}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:`${Xt(G)} 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:G},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:t.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:t.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:t.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:t.paddingXS},[`> ${o}`]:Object.assign(Object.assign(Object.assign({borderRadius:$},NN(t)),jN(t)),{[`${o}-item, ${o}-submenu > ${o}-submenu-title`]:{borderRadius:H},[`${o}-submenu-title::after`]:{transition:`transform ${c} ${v}`}})}}),jN(t)),{[`&-inline-collapsed ${o}-submenu-arrow,
        &-inline ${o}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Xt(X)})`},"&::after":{transform:`rotate(45deg) translateX(${Xt(t.calc(X).mul(-1).equal())})`}},[`${o}-submenu-open${o}-submenu-inline > ${o}-submenu-title > ${o}-submenu-arrow`]:{transform:`translateY(${Xt(t.calc(Z).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${Xt(t.calc(X).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${Xt(X)})`}}})},{[`${n}-layout-header`]:{[o]:{lineHeight:"inherit"}}}]},x0e=t=>{const{colorPrimary:n,colorError:o,colorTextDisabled:s,colorErrorBg:c,colorText:m,colorTextDescription:v,colorBgContainer:d,colorFillAlter:C,colorFillContent:S,lineWidth:R,lineWidthBold:D,controlItemBgActive:$,colorBgTextHover:H,controlHeightLG:Z,lineHeight:X,colorBgElevated:Q,marginXXS:G,padding:K,fontSize:Y,controlHeightSM:re,fontSizeLG:fe,colorTextLightSolid:me,colorErrorHover:pe}=t,xe=new xa(me).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,itemBorderRadius:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,subMenuItemBorderRadius:t.borderRadiusSM,colorItemText:m,itemColor:m,colorItemTextHover:m,itemHoverColor:m,colorItemTextHoverHorizontal:n,horizontalItemHoverColor:n,colorGroupTitle:v,groupTitleColor:v,colorItemTextSelected:n,itemSelectedColor:n,colorItemTextSelectedHorizontal:n,horizontalItemSelectedColor:n,colorItemBg:d,itemBg:d,colorItemBgHover:H,itemHoverBg:H,colorItemBgActive:S,itemActiveBg:$,colorSubItemBg:C,subMenuItemBg:C,colorItemBgSelected:$,itemSelectedBg:$,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:0,colorActiveBarHeight:D,activeBarHeight:D,colorActiveBarBorderSize:R,activeBarBorderWidth:R,colorItemTextDisabled:s,itemDisabledColor:s,colorDangerItemText:o,dangerItemColor:o,colorDangerItemTextHover:o,dangerItemHoverColor:o,colorDangerItemTextSelected:o,dangerItemSelectedColor:o,colorDangerItemBgActive:c,dangerItemActiveBg:c,colorDangerItemBgSelected:c,dangerItemSelectedBg:c,itemMarginInline:t.marginXXS,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:Z,groupTitleLineHeight:X,collapsedWidth:Z*2,popupBg:Q,itemMarginBlock:G,itemPaddingInline:K,horizontalLineHeight:`${Z*1.15}px`,iconSize:Y,iconMarginInlineEnd:re-Y,collapsedIconSize:fe,groupTitleFontSize:Y,darkItemDisabledColor:new xa(me).setAlpha(.25).toRgbString(),darkItemColor:xe,darkDangerItemColor:o,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:me,darkItemSelectedBg:n,darkDangerItemSelectedBg:o,darkItemHoverBg:"transparent",darkGroupTitleColor:xe,darkItemHoverColor:me,darkDangerItemHoverColor:pe,darkDangerItemSelectedColor:me,darkDangerItemActiveBg:o,itemWidth:""}},b0e=t=>Object.assign(Object.assign({},t),{itemWidth:t.activeBarWidth?`calc(100% + ${t.activeBarBorderWidth}px)`:`calc(100% - ${t.itemMarginInline*2}px)`}),w0e=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return os("Menu",c=>{const{colorBgElevated:m,colorPrimary:v,colorTextLightSolid:d,controlHeightLG:C,fontSize:S,darkItemColor:R,darkDangerItemColor:D,darkItemBg:$,darkSubMenuItemBg:H,darkItemSelectedColor:Z,darkItemSelectedBg:X,darkDangerItemSelectedBg:Q,darkItemHoverBg:G,darkGroupTitleColor:K,darkItemHoverColor:Y,darkItemDisabledColor:re,darkDangerItemHoverColor:fe,darkDangerItemSelectedColor:me,darkDangerItemActiveBg:pe}=c,xe=c.calc(S).div(7).mul(5).equal(),Se=Yi(c,{menuArrowSize:xe,menuHorizontalHeight:c.calc(C).mul(1.15).equal(),menuArrowOffset:c.calc(xe).mul(.25).equal(),menuPanelMaskInset:-7,menuSubMenuBg:m,calc:c.calc}),oe=Yi(Se,{itemColor:R,itemHoverColor:Y,groupTitleColor:K,itemSelectedColor:Z,itemBg:$,popupBg:$,subMenuItemBg:H,itemActiveBg:"transparent",itemSelectedBg:X,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:G,itemDisabledColor:re,dangerItemColor:D,dangerItemHoverColor:fe,dangerItemSelectedColor:me,dangerItemActiveBg:pe,dangerItemSelectedBg:Q,menuSubMenuBg:H,horizontalItemSelectedColor:d,horizontalItemSelectedBg:v});return[_0e(Se),g0e(Se),v0e(Se),BN(Se,"light"),BN(oe,"dark"),y0e(Se),sz(Se),i0(Se,"slide-up"),i0(Se,"slide-down"),gw(Se,"zoom-big")]},x0e,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],format:b0e,injectStyle:o,unitless:{groupTitleLineHeight:!0}})(t,n)};var S0e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const C0e=E.forwardRef((t,n)=>{var o,s;const c=E.useContext(XT),m=c||{},{getPrefixCls:v,getPopupContainer:d,direction:C,menu:S}=E.useContext(hi),R=v(),{prefixCls:D,className:$,style:H,theme:Z="light",expandIcon:X,_internalDisableMenuItemTitleTooltip:Q,inlineCollapsed:G,siderCollapsed:K,items:Y,children:re,rootClassName:fe,mode:me,selectable:pe,onClick:xe,overflowedIndicatorPopupClassName:Se}=t,oe=S0e(t,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),Re=Zs(oe,["collapsedWidth"]),Ve=p0e(Y)||re;(o=m.validator)===null||o===void 0||o.call(m,{mode:me});const Oe=ws(function(){var Tt;xe?.apply(void 0,arguments),(Tt=m.onClick)===null||Tt===void 0||Tt.call(m)}),_e=m.mode||me,Fe=pe??m.selectable,Le=E.useMemo(()=>K!==void 0?K:G,[G,K]),Me={horizontal:{motionName:`${R}-slide-up`},inline:VT(R),other:{motionName:`${R}-zoom-big`}},Ce=v("menu",D||m.prefixCls),Ye=Pl(Ce),[qe,rt,Qe]=w0e(Ce,Ye,!c),St=Gt(`${Ce}-${Z}`,S?.className,$);let jt;if(typeof X=="function")jt=X;else if(X===null||X===!1)jt=null;else if(m.expandIcon===null||m.expandIcon===!1)jt=null;else{const Tt=X??m.expandIcon;jt=cc(Tt,{className:Gt(`${Ce}-submenu-expand-icon`,xu(Tt)?(s=Tt.props)===null||s===void 0?void 0:s.className:"")})}const Ot=E.useMemo(()=>({prefixCls:Ce,inlineCollapsed:Le||!1,direction:C,firstLevel:!0,theme:Z,mode:_e,disableMenuItemTitleTooltip:Q}),[Ce,Le,C,Q,Z]);return qe(E.createElement(XT.Provider,{value:null},E.createElement(ZT.Provider,{value:Ot},E.createElement(xw,Object.assign({getPopupContainer:d,overflowedIndicator:E.createElement(eW,null),overflowedIndicatorPopupClassName:Gt(Ce,`${Ce}-${Z}`,Se),mode:_e,selectable:Fe,onClick:Oe},Re,{inlineCollapsed:Le,style:Object.assign(Object.assign({},S?.style),H),className:St,prefixCls:Ce,direction:C,defaultMotions:Me,expandIcon:jt,ref:n,rootClassName:Gt(fe,rt,m.rootClassName,Qe,Ye)}),Ve))))}),E0e=C0e,bw=E.forwardRef((t,n)=>{const o=E.useRef(null),s=E.useContext(mM);return E.useImperativeHandle(n,()=>({menu:o.current,focus:c=>{var m;(m=o.current)===null||m===void 0||m.focus(c)}})),E.createElement(E0e,Object.assign({ref:o},t,s))});bw.Item=Jq;bw.SubMenu=Qq;bw.Divider=Yq;bw.ItemGroup=pM;const Ez=bw,T0e=t=>{const{componentCls:n,menuCls:o,colorError:s,colorTextLightSolid:c}=t,m=`${o}-item`;return{[`${n}, ${n}-menu-submenu`]:{[`${o} ${m}`]:{[`&${m}-danger:not(${m}-disabled)`]:{color:s,"&:hover":{color:c,backgroundColor:s}}}}}},I0e=t=>{const{componentCls:n,menuCls:o,zIndexPopup:s,dropdownArrowDistance:c,sizePopupArrow:m,antCls:v,iconCls:d,motionDurationMid:C,paddingBlock:S,fontSize:R,dropdownEdgeChildPadding:D,colorTextDisabled:$,fontSizeIcon:H,controlPaddingHorizontal:Z,colorBgElevated:X}=t;return[{[n]:Object.assign(Object.assign({},Oa(t)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:s,display:"block","&::before":{position:"absolute",insetBlock:t.calc(m).div(2).sub(c).equal(),zIndex:-9999,opacity:1e-4,content:'""'},[`&-trigger${v}-btn`]:{[`& > ${d}-down, & > ${v}-btn-icon > ${d}-down`]:{fontSize:H}},[`${n}-wrap`]:{position:"relative",[`${v}-btn > ${d}-down`]:{fontSize:H},[`${d}-down::before`]:{transition:`transform ${C}`}},[`${n}-wrap-open`]:{[`${d}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${v}-slide-down-enter${v}-slide-down-enter-active${n}-placement-bottomLeft,
          &${v}-slide-down-appear${v}-slide-down-appear-active${n}-placement-bottomLeft,
          &${v}-slide-down-enter${v}-slide-down-enter-active${n}-placement-bottom,
          &${v}-slide-down-appear${v}-slide-down-appear-active${n}-placement-bottom,
          &${v}-slide-down-enter${v}-slide-down-enter-active${n}-placement-bottomRight,
          &${v}-slide-down-appear${v}-slide-down-appear-active${n}-placement-bottomRight`]:{animationName:rz},[`&${v}-slide-up-enter${v}-slide-up-enter-active${n}-placement-topLeft,
          &${v}-slide-up-appear${v}-slide-up-appear-active${n}-placement-topLeft,
          &${v}-slide-up-enter${v}-slide-up-enter-active${n}-placement-top,
          &${v}-slide-up-appear${v}-slide-up-appear-active${n}-placement-top,
          &${v}-slide-up-enter${v}-slide-up-enter-active${n}-placement-topRight,
          &${v}-slide-up-appear${v}-slide-up-appear-active${n}-placement-topRight`]:{animationName:iz},[`&${v}-slide-down-leave${v}-slide-down-leave-active${n}-placement-bottomLeft,
          &${v}-slide-down-leave${v}-slide-down-leave-active${n}-placement-bottom,
          &${v}-slide-down-leave${v}-slide-down-leave-active${n}-placement-bottomRight`]:{animationName:nz},[`&${v}-slide-up-leave${v}-slide-up-leave-active${n}-placement-topLeft,
          &${v}-slide-up-leave${v}-slide-up-leave-active${n}-placement-top,
          &${v}-slide-up-leave${v}-slide-up-leave-active${n}-placement-topRight`]:{animationName:oz}})},vz(t,X,{arrowPlacement:{top:!0,bottom:!0}}),{[`${n} ${o}`]:{position:"relative",margin:0},[`${o}-submenu-popup`]:{position:"absolute",zIndex:s,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${n}, ${n}-menu-submenu`]:{[o]:Object.assign(Object.assign({padding:D,listStyleType:"none",backgroundColor:X,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary},Hb(t)),{[`${o}-item-group-title`]:{padding:`${Xt(S)} ${Xt(Z)}`,color:t.colorTextDescription,transition:`all ${C}`},[`${o}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${o}-item-icon`]:{minWidth:R,marginInlineEnd:t.marginXS,fontSize:t.fontSizeSM},[`${o}-title-content`]:{flex:"auto","> a":{color:"inherit",transition:`all ${C}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}}},[`${o}-item, ${o}-submenu-title`]:Object.assign(Object.assign({clear:"both",margin:0,padding:`${Xt(S)} ${Xt(Z)}`,color:t.colorText,fontWeight:"normal",fontSize:R,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${C}`,borderRadius:t.borderRadiusSM,"&:hover, &-active":{backgroundColor:t.controlItemBgHover}},Hb(t)),{"&-selected":{color:t.colorPrimary,backgroundColor:t.controlItemBgActive,"&:hover, &-active":{backgroundColor:t.controlItemBgActiveHover}},"&-disabled":{color:$,cursor:"not-allowed","&:hover":{color:$,backgroundColor:X,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${Xt(t.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:t.colorSplit},[`${n}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,[`${n}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:t.colorTextDescription,fontSize:H,fontStyle:"normal"}}}),[`${o}-item-group-list`]:{margin:`0 ${Xt(t.marginXS)}`,padding:0,listStyle:"none"},[`${o}-submenu-title`]:{paddingInlineEnd:t.calc(Z).add(t.fontSizeSM).equal()},[`${o}-submenu-vertical`]:{position:"relative"},[`${o}-submenu${o}-submenu-disabled ${n}-menu-submenu-title`]:{[`&, ${n}-menu-submenu-arrow-icon`]:{color:$,backgroundColor:X,cursor:"not-allowed"}},[`${o}-submenu-selected ${n}-menu-submenu-title`]:{color:t.colorPrimary}})}},[i0(t,"slide-up"),i0(t,"slide-down"),HT(t,"move-up"),HT(t,"move-down"),gw(t,"zoom-big")]]},M0e=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+50,paddingBlock:(t.controlHeight-t.fontSize*t.lineHeight)/2},cM({contentRadius:t.borderRadiusLG,limitVerticalRadius:!0})),yz(t)),P0e=os("Dropdown",t=>{const{marginXXS:n,sizePopupArrow:o,paddingXXS:s,componentCls:c}=t,m=Yi(t,{menuCls:`${c}-menu`,dropdownArrowDistance:t.calc(o).div(2).add(n).equal(),dropdownEdgeChildPadding:s});return[I0e(m),T0e(m)]},M0e),Tz=t=>{const{menu:n,arrow:o,prefixCls:s,children:c,trigger:m,disabled:v,dropdownRender:d,getPopupContainer:C,overlayClassName:S,rootClassName:R,overlayStyle:D,open:$,onOpenChange:H,visible:Z,onVisibleChange:X,mouseEnterDelay:Q=.15,mouseLeaveDelay:G=.1,autoAdjustOverflow:K=!0,placement:Y="",overlay:re,transitionName:fe}=t,{getPopupContainer:me,getPrefixCls:pe,direction:xe,dropdown:Se}=E.useContext(hi);Ty();const oe=E.useMemo(()=>{const Rt=pe();return fe!==void 0?fe:Y.includes("top")?`${Rt}-slide-down`:`${Rt}-slide-up`},[pe,Y,fe]),Re=E.useMemo(()=>Y?Y.includes("Center")?Y.slice(0,Y.indexOf("Center")):Y:xe==="rtl"?"bottomRight":"bottomLeft",[Y,xe]),Ve=pe("dropdown",s),Oe=Pl(Ve),[_e,Fe,Le]=P0e(Ve,Oe),[,Me]=Ws(),Ce=E.Children.only(c),Ye=cc(Ce,{className:Gt(`${Ve}-trigger`,{[`${Ve}-rtl`]:xe==="rtl"},Ce.props.className),disabled:v}),qe=v?[]:m;let rt;qe&&qe.includes("contextMenu")&&(rt=!0);const[Qe,St]=ul(!1,{value:$??Z}),jt=ws(Rt=>{H?.(Rt,{source:"trigger"}),X?.(Rt),St(Rt)}),Ot=Gt(S,R,Fe,Le,Oe,Se?.className,{[`${Ve}-rtl`]:xe==="rtl"}),Tt=Aq({arrowPointAtCenter:typeof o=="object"&&o.pointAtCenter,autoAdjustOverflow:K,offset:Me.marginXXS,arrowWidth:o?Me.sizePopupArrow:0,borderRadius:Me.borderRadius}),ct=E.useCallback(()=>{n?.selectable&&n?.multiple||(H?.(!1,{source:"menu"}),St(!1))},[n?.selectable,n?.multiple]),Ct=()=>{let Rt;return n?.items?Rt=E.createElement(Ez,Object.assign({},n)):typeof re=="function"?Rt=re():Rt=re,d&&(Rt=d(Rt)),Rt=E.Children.only(typeof Rt=="string"?E.createElement("span",null,Rt):Rt),E.createElement(tW,{prefixCls:`${Ve}-menu`,rootClassName:Le,expandIcon:E.createElement("span",{className:`${Ve}-menu-submenu-arrow`},E.createElement(Zb,{className:`${Ve}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:ct,validator:Pt=>{}},Rt)},[kt,zt]=uw("Dropdown",D?.zIndex);let Nt=E.createElement(h_e,Object.assign({alignPoint:rt},Zs(t,["rootClassName"]),{mouseEnterDelay:Q,mouseLeaveDelay:G,visible:Qe,builtinPlacements:Tt,arrow:!!o,overlayClassName:Ot,prefixCls:Ve,getPopupContainer:C||me,transitionName:oe,trigger:qe,overlay:Ct,placement:Re,onVisibleChange:jt,overlayStyle:Object.assign(Object.assign(Object.assign({},Se?.style),D),{zIndex:kt})}),Ye);return kt&&(Nt=E.createElement(JI.Provider,{value:zt},Nt)),_e(Nt)};function A0e(t){return Object.assign(Object.assign({},t),{align:{overflow:{adjustX:!1,adjustY:!1}}})}const R0e=nq(Tz,"dropdown",t=>t,A0e),k0e=t=>E.createElement(R0e,Object.assign({},t),E.createElement("span",null));Tz._InternalPanelDoNotUseOrYouWillBeFired=k0e;const rW=Tz;var nW={exports:{}};(function(t,n){(function(o,s){t.exports=s()})(sI,function(){var o=1e3,s=6e4,c=36e5,m="millisecond",v="second",d="minute",C="hour",S="day",R="week",D="month",$="quarter",H="year",Z="date",X="Invalid Date",Q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,K={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_e){var Fe=["th","st","nd","rd"],Le=_e%100;return"["+_e+(Fe[(Le-20)%10]||Fe[Le]||Fe[0])+"]"}},Y=function(_e,Fe,Le){var Me=String(_e);return!Me||Me.length>=Fe?_e:""+Array(Fe+1-Me.length).join(Le)+_e},re={s:Y,z:function(_e){var Fe=-_e.utcOffset(),Le=Math.abs(Fe),Me=Math.floor(Le/60),Ce=Le%60;return(Fe<=0?"+":"-")+Y(Me,2,"0")+":"+Y(Ce,2,"0")},m:function _e(Fe,Le){if(Fe.date()<Le.date())return-_e(Le,Fe);var Me=12*(Le.year()-Fe.year())+(Le.month()-Fe.month()),Ce=Fe.clone().add(Me,D),Ye=Le-Ce<0,qe=Fe.clone().add(Me+(Ye?-1:1),D);return+(-(Me+(Le-Ce)/(Ye?Ce-qe:qe-Ce))||0)},a:function(_e){return _e<0?Math.ceil(_e)||0:Math.floor(_e)},p:function(_e){return{M:D,y:H,w:R,d:S,D:Z,h:C,m:d,s:v,ms:m,Q:$}[_e]||String(_e||"").toLowerCase().replace(/s$/,"")},u:function(_e){return _e===void 0}},fe="en",me={};me[fe]=K;var pe="$isDayjsObject",xe=function(_e){return _e instanceof Ve||!(!_e||!_e[pe])},Se=function _e(Fe,Le,Me){var Ce;if(!Fe)return fe;if(typeof Fe=="string"){var Ye=Fe.toLowerCase();me[Ye]&&(Ce=Ye),Le&&(me[Ye]=Le,Ce=Ye);var qe=Fe.split("-");if(!Ce&&qe.length>1)return _e(qe[0])}else{var rt=Fe.name;me[rt]=Fe,Ce=rt}return!Me&&Ce&&(fe=Ce),Ce||!Me&&fe},oe=function(_e,Fe){if(xe(_e))return _e.clone();var Le=typeof Fe=="object"?Fe:{};return Le.date=_e,Le.args=arguments,new Ve(Le)},Re=re;Re.l=Se,Re.i=xe,Re.w=function(_e,Fe){return oe(_e,{locale:Fe.$L,utc:Fe.$u,x:Fe.$x,$offset:Fe.$offset})};var Ve=function(){function _e(Le){this.$L=Se(Le.locale,null,!0),this.parse(Le),this.$x=this.$x||Le.x||{},this[pe]=!0}var Fe=_e.prototype;return Fe.parse=function(Le){this.$d=function(Me){var Ce=Me.date,Ye=Me.utc;if(Ce===null)return new Date(NaN);if(Re.u(Ce))return new Date;if(Ce instanceof Date)return new Date(Ce);if(typeof Ce=="string"&&!/Z$/i.test(Ce)){var qe=Ce.match(Q);if(qe){var rt=qe[2]-1||0,Qe=(qe[7]||"0").substring(0,3);return Ye?new Date(Date.UTC(qe[1],rt,qe[3]||1,qe[4]||0,qe[5]||0,qe[6]||0,Qe)):new Date(qe[1],rt,qe[3]||1,qe[4]||0,qe[5]||0,qe[6]||0,Qe)}}return new Date(Ce)}(Le),this.init()},Fe.init=function(){var Le=this.$d;this.$y=Le.getFullYear(),this.$M=Le.getMonth(),this.$D=Le.getDate(),this.$W=Le.getDay(),this.$H=Le.getHours(),this.$m=Le.getMinutes(),this.$s=Le.getSeconds(),this.$ms=Le.getMilliseconds()},Fe.$utils=function(){return Re},Fe.isValid=function(){return this.$d.toString()!==X},Fe.isSame=function(Le,Me){var Ce=oe(Le);return this.startOf(Me)<=Ce&&Ce<=this.endOf(Me)},Fe.isAfter=function(Le,Me){return oe(Le)<this.startOf(Me)},Fe.isBefore=function(Le,Me){return this.endOf(Me)<oe(Le)},Fe.$g=function(Le,Me,Ce){return Re.u(Le)?this[Me]:this.set(Ce,Le)},Fe.unix=function(){return Math.floor(this.valueOf()/1e3)},Fe.valueOf=function(){return this.$d.getTime()},Fe.startOf=function(Le,Me){var Ce=this,Ye=!!Re.u(Me)||Me,qe=Re.p(Le),rt=function(kt,zt){var Nt=Re.w(Ce.$u?Date.UTC(Ce.$y,zt,kt):new Date(Ce.$y,zt,kt),Ce);return Ye?Nt:Nt.endOf(S)},Qe=function(kt,zt){return Re.w(Ce.toDate()[kt].apply(Ce.toDate("s"),(Ye?[0,0,0,0]:[23,59,59,999]).slice(zt)),Ce)},St=this.$W,jt=this.$M,Ot=this.$D,Tt="set"+(this.$u?"UTC":"");switch(qe){case H:return Ye?rt(1,0):rt(31,11);case D:return Ye?rt(1,jt):rt(0,jt+1);case R:var ct=this.$locale().weekStart||0,Ct=(St<ct?St+7:St)-ct;return rt(Ye?Ot-Ct:Ot+(6-Ct),jt);case S:case Z:return Qe(Tt+"Hours",0);case C:return Qe(Tt+"Minutes",1);case d:return Qe(Tt+"Seconds",2);case v:return Qe(Tt+"Milliseconds",3);default:return this.clone()}},Fe.endOf=function(Le){return this.startOf(Le,!1)},Fe.$set=function(Le,Me){var Ce,Ye=Re.p(Le),qe="set"+(this.$u?"UTC":""),rt=(Ce={},Ce[S]=qe+"Date",Ce[Z]=qe+"Date",Ce[D]=qe+"Month",Ce[H]=qe+"FullYear",Ce[C]=qe+"Hours",Ce[d]=qe+"Minutes",Ce[v]=qe+"Seconds",Ce[m]=qe+"Milliseconds",Ce)[Ye],Qe=Ye===S?this.$D+(Me-this.$W):Me;if(Ye===D||Ye===H){var St=this.clone().set(Z,1);St.$d[rt](Qe),St.init(),this.$d=St.set(Z,Math.min(this.$D,St.daysInMonth())).$d}else rt&&this.$d[rt](Qe);return this.init(),this},Fe.set=function(Le,Me){return this.clone().$set(Le,Me)},Fe.get=function(Le){return this[Re.p(Le)]()},Fe.add=function(Le,Me){var Ce,Ye=this;Le=Number(Le);var qe=Re.p(Me),rt=function(jt){var Ot=oe(Ye);return Re.w(Ot.date(Ot.date()+Math.round(jt*Le)),Ye)};if(qe===D)return this.set(D,this.$M+Le);if(qe===H)return this.set(H,this.$y+Le);if(qe===S)return rt(1);if(qe===R)return rt(7);var Qe=(Ce={},Ce[d]=s,Ce[C]=c,Ce[v]=o,Ce)[qe]||1,St=this.$d.getTime()+Le*Qe;return Re.w(St,this)},Fe.subtract=function(Le,Me){return this.add(-1*Le,Me)},Fe.format=function(Le){var Me=this,Ce=this.$locale();if(!this.isValid())return Ce.invalidDate||X;var Ye=Le||"YYYY-MM-DDTHH:mm:ssZ",qe=Re.z(this),rt=this.$H,Qe=this.$m,St=this.$M,jt=Ce.weekdays,Ot=Ce.months,Tt=Ce.meridiem,ct=function(zt,Nt,Rt,Pt){return zt&&(zt[Nt]||zt(Me,Ye))||Rt[Nt].slice(0,Pt)},Ct=function(zt){return Re.s(rt%12||12,zt,"0")},kt=Tt||function(zt,Nt,Rt){var Pt=zt<12?"AM":"PM";return Rt?Pt.toLowerCase():Pt};return Ye.replace(G,function(zt,Nt){return Nt||function(Rt){switch(Rt){case"YY":return String(Me.$y).slice(-2);case"YYYY":return Re.s(Me.$y,4,"0");case"M":return St+1;case"MM":return Re.s(St+1,2,"0");case"MMM":return ct(Ce.monthsShort,St,Ot,3);case"MMMM":return ct(Ot,St);case"D":return Me.$D;case"DD":return Re.s(Me.$D,2,"0");case"d":return String(Me.$W);case"dd":return ct(Ce.weekdaysMin,Me.$W,jt,2);case"ddd":return ct(Ce.weekdaysShort,Me.$W,jt,3);case"dddd":return jt[Me.$W];case"H":return String(rt);case"HH":return Re.s(rt,2,"0");case"h":return Ct(1);case"hh":return Ct(2);case"a":return kt(rt,Qe,!0);case"A":return kt(rt,Qe,!1);case"m":return String(Qe);case"mm":return Re.s(Qe,2,"0");case"s":return String(Me.$s);case"ss":return Re.s(Me.$s,2,"0");case"SSS":return Re.s(Me.$ms,3,"0");case"Z":return qe}return null}(zt)||qe.replace(":","")})},Fe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Fe.diff=function(Le,Me,Ce){var Ye,qe=this,rt=Re.p(Me),Qe=oe(Le),St=(Qe.utcOffset()-this.utcOffset())*s,jt=this-Qe,Ot=function(){return Re.m(qe,Qe)};switch(rt){case H:Ye=Ot()/12;break;case D:Ye=Ot();break;case $:Ye=Ot()/3;break;case R:Ye=(jt-St)/6048e5;break;case S:Ye=(jt-St)/864e5;break;case C:Ye=jt/c;break;case d:Ye=jt/s;break;case v:Ye=jt/o;break;default:Ye=jt}return Ce?Ye:Re.a(Ye)},Fe.daysInMonth=function(){return this.endOf(D).$D},Fe.$locale=function(){return me[this.$L]},Fe.locale=function(Le,Me){if(!Le)return this.$L;var Ce=this.clone(),Ye=Se(Le,Me,!0);return Ye&&(Ce.$L=Ye),Ce},Fe.clone=function(){return Re.w(this.$d,this)},Fe.toDate=function(){return new Date(this.valueOf())},Fe.toJSON=function(){return this.isValid()?this.toISOString():null},Fe.toISOString=function(){return this.$d.toISOString()},Fe.toString=function(){return this.$d.toUTCString()},_e}(),Oe=Ve.prototype;return oe.prototype=Oe,[["$ms",m],["$s",v],["$m",d],["$H",C],["$W",S],["$M",D],["$y",H],["$D",Z]].forEach(function(_e){Oe[_e[1]]=function(Fe){return this.$g(Fe,_e[0],_e[1])}}),oe.extend=function(_e,Fe){return _e.$i||(_e(Fe,Ve,oe),_e.$i=!0),oe},oe.locale=Se,oe.isDayjs=xe,oe.unix=function(_e){return oe(1e3*_e)},oe.en=me[fe],oe.Ls=me,oe.p={},oe})})(nW);var iW=nW.exports;const O0e=Nd(iW),oW=E.createContext(null),z0e=oW.Provider,aW=E.createContext(null),D0e=aW.Provider;var L0e=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],sW=E.forwardRef(function(t,n){var o,s=t.prefixCls,c=s===void 0?"rc-checkbox":s,m=t.className,v=t.style,d=t.checked,C=t.disabled,S=t.defaultChecked,R=S===void 0?!1:S,D=t.type,$=D===void 0?"checkbox":D,H=t.title,Z=t.onChange,X=xi(t,L0e),Q=E.useRef(null),G=ul(R,{value:d}),K=nr(G,2),Y=K[0],re=K[1];E.useImperativeHandle(n,function(){return{focus:function(){var xe;(xe=Q.current)===null||xe===void 0||xe.focus()},blur:function(){var xe;(xe=Q.current)===null||xe===void 0||xe.blur()},input:Q.current}});var fe=Gt(c,m,(o={},xt(o,"".concat(c,"-checked"),Y),xt(o,"".concat(c,"-disabled"),C),o)),me=function(xe){C||("checked"in t||re(xe.target.checked),Z?.({target:yt(yt({},t),{},{type:$,checked:xe.target.checked}),stopPropagation:function(){xe.stopPropagation()},preventDefault:function(){xe.preventDefault()},nativeEvent:xe.nativeEvent}))};return E.createElement("span",{className:fe,title:H,style:v},E.createElement("input",Mr({},X,{className:"".concat(c,"-input"),ref:Q,onChange:me,disabled:C,checked:!!Y,type:$})),E.createElement("span",{className:"".concat(c,"-inner")}))});const $0e=t=>{const{componentCls:n,antCls:o}=t,s=`${n}-group`;return{[s]:Object.assign(Object.assign({},Oa(t)),{display:"inline-block",fontSize:0,[`&${s}-rtl`]:{direction:"rtl"},[`${o}-badge ${o}-badge-count`]:{zIndex:1},[`> ${o}-badge:not(:first-child) > ${o}-button-wrapper`]:{borderInlineStart:"none"}})}},B0e=t=>{const{componentCls:n,wrapperMarginInlineEnd:o,colorPrimary:s,radioSize:c,motionDurationSlow:m,motionDurationMid:v,motionEaseInOutCirc:d,colorBgContainer:C,colorBorder:S,lineWidth:R,colorBgContainerDisabled:D,colorTextDisabled:$,paddingXS:H,dotColorDisabled:Z,lineType:X,radioColor:Q,radioBgColor:G,calc:K}=t,Y=`${n}-inner`,fe=K(c).sub(K(4).mul(2)),me=K(1).mul(c).equal();return{[`${n}-wrapper`]:Object.assign(Object.assign({},Oa(t)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:o,cursor:"pointer",[`&${n}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:t.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${n}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${Xt(R)} ${X} ${s}`,borderRadius:"50%",visibility:"hidden",content:'""'},[n]:Object.assign(Object.assign({},Oa(t)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${n}-wrapper:hover &,
        &:hover ${Y}`]:{borderColor:s},[`${n}-input:focus-visible + ${Y}`]:Object.assign({},Lm(t)),[`${n}:hover::after, ${n}-wrapper:hover &::after`]:{visibility:"visible"},[`${n}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:me,height:me,marginBlockStart:K(1).mul(c).div(-2).equal(),marginInlineStart:K(1).mul(c).div(-2).equal(),backgroundColor:Q,borderBlockStart:0,borderInlineStart:0,borderRadius:me,transform:"scale(0)",opacity:0,transition:`all ${m} ${d}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:me,height:me,backgroundColor:C,borderColor:S,borderStyle:"solid",borderWidth:R,borderRadius:"50%",transition:`all ${v}`},[`${n}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${n}-checked`]:{[Y]:{borderColor:s,backgroundColor:G,"&::after":{transform:`scale(${t.calc(t.dotSize).div(c).equal()})`,opacity:1,transition:`all ${m} ${d}`}}},[`${n}-disabled`]:{cursor:"not-allowed",[Y]:{backgroundColor:D,borderColor:S,cursor:"not-allowed","&::after":{backgroundColor:Z}},[`${n}-input`]:{cursor:"not-allowed"},[`${n}-disabled + span`]:{color:$,cursor:"not-allowed"},[`&${n}-checked`]:{[Y]:{"&::after":{transform:`scale(${K(fe).div(c).equal({unit:!1})})`}}}},[`span${n} + *`]:{paddingInlineStart:H,paddingInlineEnd:H}})}},F0e=t=>{const{buttonColor:n,controlHeight:o,componentCls:s,lineWidth:c,lineType:m,colorBorder:v,motionDurationSlow:d,motionDurationMid:C,buttonPaddingInline:S,fontSize:R,buttonBg:D,fontSizeLG:$,controlHeightLG:H,controlHeightSM:Z,paddingXS:X,borderRadius:Q,borderRadiusSM:G,borderRadiusLG:K,buttonCheckedBg:Y,buttonSolidCheckedColor:re,colorTextDisabled:fe,colorBgContainerDisabled:me,buttonCheckedBgDisabled:pe,buttonCheckedColorDisabled:xe,colorPrimary:Se,colorPrimaryHover:oe,colorPrimaryActive:Re,buttonSolidCheckedBg:Ve,buttonSolidCheckedHoverBg:Oe,buttonSolidCheckedActiveBg:_e,calc:Fe}=t;return{[`${s}-button-wrapper`]:{position:"relative",display:"inline-block",height:o,margin:0,paddingInline:S,paddingBlock:0,color:n,fontSize:R,lineHeight:Xt(Fe(o).sub(Fe(c).mul(2)).equal()),background:D,border:`${Xt(c)} ${m} ${v}`,borderBlockStartWidth:Fe(c).add(.02).equal(),borderInlineStartWidth:0,borderInlineEndWidth:c,cursor:"pointer",transition:[`color ${C}`,`background ${C}`,`box-shadow ${C}`].join(","),a:{color:n},[`> ${s}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:Fe(c).mul(-1).equal(),insetInlineStart:Fe(c).mul(-1).equal(),display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:c,paddingInline:0,backgroundColor:v,transition:`background-color ${d}`,content:'""'}},"&:first-child":{borderInlineStart:`${Xt(c)} ${m} ${v}`,borderStartStartRadius:Q,borderEndStartRadius:Q},"&:last-child":{borderStartEndRadius:Q,borderEndEndRadius:Q},"&:first-child:last-child":{borderRadius:Q},[`${s}-group-large &`]:{height:H,fontSize:$,lineHeight:Xt(Fe(H).sub(Fe(c).mul(2)).equal()),"&:first-child":{borderStartStartRadius:K,borderEndStartRadius:K},"&:last-child":{borderStartEndRadius:K,borderEndEndRadius:K}},[`${s}-group-small &`]:{height:Z,paddingInline:Fe(X).sub(c).equal(),paddingBlock:0,lineHeight:Xt(Fe(Z).sub(Fe(c).mul(2)).equal()),"&:first-child":{borderStartStartRadius:G,borderEndStartRadius:G},"&:last-child":{borderStartEndRadius:G,borderEndEndRadius:G}},"&:hover":{position:"relative",color:Se},"&:has(:focus-visible)":Object.assign({},Lm(t)),[`${s}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${s}-button-wrapper-disabled)`]:{zIndex:1,color:Se,background:Y,borderColor:Se,"&::before":{backgroundColor:Se},"&:first-child":{borderColor:Se},"&:hover":{color:oe,borderColor:oe,"&::before":{backgroundColor:oe}},"&:active":{color:Re,borderColor:Re,"&::before":{backgroundColor:Re}}},[`${s}-group-solid &-checked:not(${s}-button-wrapper-disabled)`]:{color:re,background:Ve,borderColor:Ve,"&:hover":{color:re,background:Oe,borderColor:Oe},"&:active":{color:re,background:_e,borderColor:_e}},"&-disabled":{color:fe,backgroundColor:me,borderColor:v,cursor:"not-allowed","&:first-child, &:hover":{color:fe,backgroundColor:me,borderColor:v}},[`&-disabled${s}-button-wrapper-checked`]:{color:xe,backgroundColor:pe,borderColor:v,boxShadow:"none"}}}},N0e=t=>{const{wireframe:n,padding:o,marginXS:s,lineWidth:c,fontSizeLG:m,colorText:v,colorBgContainer:d,colorTextDisabled:C,controlItemBgActiveDisabled:S,colorTextLightSolid:R,colorPrimary:D,colorPrimaryHover:$,colorPrimaryActive:H,colorWhite:Z}=t,X=4,Q=m,G=n?Q-X*2:Q-(X+c)*2;return{radioSize:Q,dotSize:G,dotColorDisabled:C,buttonSolidCheckedColor:R,buttonSolidCheckedBg:D,buttonSolidCheckedHoverBg:$,buttonSolidCheckedActiveBg:H,buttonBg:d,buttonCheckedBg:d,buttonColor:v,buttonCheckedBgDisabled:S,buttonCheckedColorDisabled:C,buttonPaddingInline:o-c,wrapperMarginInlineEnd:s,radioColor:n?D:Z,radioBgColor:n?d:D}},lW=os("Radio",t=>{const{controlOutline:n,controlOutlineWidth:o}=t,s=`0 0 0 ${Xt(o)} ${n}`,m=Yi(t,{radioFocusShadow:s,radioButtonFocusShadow:s});return[$0e(m),B0e(m),F0e(m)]},N0e,{unitless:{radioSize:!0,dotSize:!0}});var j0e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const V0e=(t,n)=>{var o,s;const c=E.useContext(oW),m=E.useContext(aW),{getPrefixCls:v,direction:d,radio:C}=E.useContext(hi),S=E.useRef(null),R=Cu(n,S),{isFormItemInput:D}=E.useContext(bu),$=Oe=>{var _e,Fe;(_e=t.onChange)===null||_e===void 0||_e.call(t,Oe),(Fe=c?.onChange)===null||Fe===void 0||Fe.call(c,Oe)},{prefixCls:H,className:Z,rootClassName:X,children:Q,style:G}=t,K=j0e(t,["prefixCls","className","rootClassName","children","style"]),Y=v("radio",H),re=(c?.optionType||m)==="button",fe=re?`${Y}-button`:Y,me=Pl(Y),[pe,xe,Se]=lW(Y,me),oe=Object.assign({},K),Re=E.useContext(Gm);c&&(oe.name=c.name,oe.onChange=$,oe.checked=t.value===c.value,oe.disabled=(o=oe.disabled)!==null&&o!==void 0?o:c.disabled),oe.disabled=(s=oe.disabled)!==null&&s!==void 0?s:Re;const Ve=Gt(`${fe}-wrapper`,{[`${fe}-wrapper-checked`]:oe.checked,[`${fe}-wrapper-disabled`]:oe.disabled,[`${fe}-wrapper-rtl`]:d==="rtl",[`${fe}-wrapper-in-form-item`]:D},C?.className,Z,X,xe,Se,me);return pe(E.createElement(tM,{component:"Radio",disabled:oe.disabled},E.createElement("label",{className:Ve,style:Object.assign(Object.assign({},C?.style),G),onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},E.createElement(sW,Object.assign({},oe,{className:Gt(oe.className,!re&&eM),type:"radio",prefixCls:fe,ref:R})),Q!==void 0?E.createElement("span",null,Q):null)))},U0e=E.forwardRef(V0e),YT=U0e,H0e=E.forwardRef((t,n)=>{const{getPrefixCls:o,direction:s}=E.useContext(hi),[c,m]=ul(t.defaultValue,{value:t.value}),v=_e=>{const Fe=c,Le=_e.target.value;"value"in t||m(Le);const{onChange:Me}=t;Me&&Le!==Fe&&Me(_e)},{prefixCls:d,className:C,rootClassName:S,options:R,buttonStyle:D="outline",disabled:$,children:H,size:Z,style:X,id:Q,onMouseEnter:G,onMouseLeave:K,onFocus:Y,onBlur:re}=t,fe=o("radio",d),me=`${fe}-group`,pe=Pl(fe),[xe,Se,oe]=lW(fe,pe);let Re=H;R&&R.length>0&&(Re=R.map(_e=>typeof _e=="string"||typeof _e=="number"?E.createElement(YT,{key:_e.toString(),prefixCls:fe,disabled:$,value:_e,checked:c===_e},_e):E.createElement(YT,{key:`radio-group-value-options-${_e.value}`,prefixCls:fe,disabled:_e.disabled||$,value:_e.value,checked:c===_e.value,title:_e.title,style:_e.style,id:_e.id,required:_e.required},_e.label)));const Ve=Gh(Z),Oe=Gt(me,`${me}-${D}`,{[`${me}-${Ve}`]:Ve,[`${me}-rtl`]:s==="rtl"},C,S,Se,oe,pe);return xe(E.createElement("div",Object.assign({},Uh(t,{aria:!0,data:!0}),{className:Oe,style:X,onMouseEnter:G,onMouseLeave:K,onFocus:Y,onBlur:re,id:Q,ref:n}),E.createElement(z0e,{value:{onChange:v,value:c,disabled:t.disabled,name:t.name,optionType:t.optionType}},Re)))}),G0e=E.memo(H0e);var q0e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const W0e=(t,n)=>{const{getPrefixCls:o}=E.useContext(hi),{prefixCls:s}=t,c=q0e(t,["prefixCls"]),m=o("radio",s);return E.createElement(D0e,{value:"button"},E.createElement(YT,Object.assign({prefixCls:m},c,{type:"radio",ref:n})))},K0e=E.forwardRef(W0e),gM=YT;gM.Button=K0e;gM.Group=G0e;gM.__ANT_RADIO=!0;const cW=gM,Z0e=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),uW=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),HR=t=>({borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:t.activeBg}),hW=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover:not([disabled])":Object.assign({},uW(Yi(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),dW=t=>{const{paddingBlockLG:n,fontSizeLG:o,lineHeightLG:s,borderRadiusLG:c,paddingInlineLG:m}=t;return{padding:`${Xt(n)} ${Xt(m)}`,fontSize:o,lineHeight:s,borderRadius:c}},Iz=t=>({padding:`${Xt(t.paddingBlockSM)} ${Xt(t.paddingInlineSM)}`,borderRadius:t.borderRadiusSM}),fW=(t,n)=>{const{componentCls:o,colorError:s,colorWarning:c,errorActiveShadow:m,warningActiveShadow:v,colorErrorBorderHover:d,colorWarningBorderHover:C}=t;return{[`&-status-error:not(${n}-disabled):not(${n}-borderless)${n}`]:{borderColor:s,"&:hover":{borderColor:d},"&:focus, &:focus-within":Object.assign({},HR(Yi(t,{activeBorderColor:s,activeShadow:m}))),[`${o}-prefix, ${o}-suffix`]:{color:s}},[`&-status-warning:not(${n}-disabled):not(${n}-borderless)${n}`]:{borderColor:c,"&:hover":{borderColor:C},"&:focus, &:focus-within":Object.assign({},HR(Yi(t,{activeBorderColor:c,activeShadow:v}))),[`${o}-prefix, ${o}-suffix`]:{color:c}}}},Mz=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Xt(t.paddingBlock)} ${Xt(t.paddingInline)}`,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,backgroundColor:t.colorBgContainer,backgroundImage:"none",borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:t.colorBorder,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},Z0e(t.colorTextPlaceholder)),{"&:hover":Object.assign({},uW(t)),"&:focus, &:focus-within":Object.assign({},HR(t)),"&-disabled, &[disabled]":Object.assign({},hW(t)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},dW(t)),"&-sm":Object.assign({},Iz(t)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),X0e=t=>{const{componentCls:n,antCls:o}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${n}, &-lg > ${n}-group-addon`]:Object.assign({},dW(t)),[`&-sm ${n}, &-sm > ${n}-group-addon`]:Object.assign({},Iz(t)),[`&-lg ${o}-select-single ${o}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${o}-select-single ${o}-select-selector`]:{height:t.controlHeightSM},[`> ${n}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${n}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Xt(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,textAlign:"center",backgroundColor:t.addonBg,border:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${o}-select`]:{margin:`${Xt(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${Xt(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${o}-select-single:not(${o}-select-customize-input):not(${o}-pagination-size-changer)`]:{[`${o}-select-selector`]:{backgroundColor:"inherit",border:`${Xt(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${o}-select-selector`]:{color:t.colorPrimary}}},[`${o}-cascader-picker`]:{margin:`-9px ${Xt(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${o}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${n}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${n}-search-with-button &`]:{zIndex:0}}},[`> ${n}:first-child, ${n}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${n}-affix-wrapper`]:{[`&:not(:first-child) ${n}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${n}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${n}:last-child, ${n}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${o}-select ${o}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${n}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${n}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${n}-group-compact`]:Object.assign(Object.assign({display:"block"},Ub()),{[`${n}-group-addon, ${n}-group-wrap, > ${n}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${n}-affix-wrapper,
        & > ${n}-number-affix-wrapper,
        & > ${o}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[`${n}`]:{float:"none"},[`& > ${o}-select > ${o}-select-selector,
      & > ${o}-select-auto-complete ${n},
      & > ${o}-cascader-picker ${n},
      & > ${n}-group-wrapper ${n}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${o}-select-focused`]:{zIndex:1},[`& > ${o}-select > ${o}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${o}-select:first-child > ${o}-select-selector,
      & > ${o}-select-auto-complete:first-child ${n},
      & > ${o}-cascader-picker:first-child ${n}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,
      & > ${o}-select:last-child > ${o}-select-selector,
      & > ${o}-cascader-picker:last-child ${n},
      & > ${o}-cascader-picker-focused:last-child ${n}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${o}-select-auto-complete ${n}`]:{verticalAlign:"top"},[`${n}-group-wrapper + ${n}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${n}-affix-wrapper`]:{borderRadius:0}},[`${n}-group-wrapper:not(:last-child)`]:{[`&${n}-search > ${n}-group`]:{[`& > ${n}-group-addon > ${n}-search-button`]:{borderRadius:0},[`& > ${n}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},Y0e=t=>{const{componentCls:n,controlHeightSM:o,lineWidth:s,calc:c}=t,v=c(o).sub(c(s).mul(2)).sub(16).div(2).equal();return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},Oa(t)),Mz(t)),fW(t,n)),{'&[type="color"]':{height:t.controlHeight,[`&${n}-lg`]:{height:t.controlHeightLG},[`&${n}-sm`]:{height:o,paddingTop:v,paddingBottom:v}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},J0e=t=>{const{componentCls:n}=t;return{[`${n}-clear-icon`]:{margin:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"&:hover":{color:t.colorTextTertiary},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Xt(t.inputAffixPadding)}`}}}},Q0e=t=>{const{componentCls:n,inputAffixPadding:o,colorTextDescription:s,motionDurationSlow:c,colorIcon:m,colorIconHover:v,iconCls:d}=t;return{[`${n}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Mz(t)),{display:"inline-flex",[`&:not(${n}-affix-wrapper-disabled):hover`]:{zIndex:1,[`${n}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${n}[disabled]`]:{background:"transparent"}},[`> input${n}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${n}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:s},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:o},"&-suffix":{marginInlineStart:o}}}),J0e(t)),{[`${d}${n}-password-icon`]:{color:m,cursor:"pointer",transition:`all ${c}`,"&:hover":{color:v}}}),fW(t,`${n}-affix-wrapper`))}},e1e=t=>{const{componentCls:n,colorError:o,colorWarning:s,borderRadiusLG:c,borderRadiusSM:m}=t;return{[`${n}-group`]:Object.assign(Object.assign(Object.assign({},Oa(t)),X0e(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${n}-group-addon`]:{borderRadius:c,fontSize:t.fontSizeLG}},"&-sm":{[`${n}-group-addon`]:{borderRadius:m}},"&-status-error":{[`${n}-group-addon`]:{color:o,borderColor:o}},"&-status-warning":{[`${n}-group-addon`]:{color:s,borderColor:s}},"&-disabled":{[`${n}-group-addon`]:Object.assign({},hW(t))},[`&:not(${n}-compact-first-item):not(${n}-compact-last-item)${n}-compact-item`]:{[`${n}, ${n}-group-addon`]:{borderRadius:0}},[`&:not(${n}-compact-last-item)${n}-compact-first-item`]:{[`${n}, ${n}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${n}-compact-first-item)${n}-compact-last-item`]:{[`${n}, ${n}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},t1e=t=>{const{componentCls:n,antCls:o}=t,s=`${n}-search`;return{[s]:{[`${n}`]:{"&:hover, &:focus":{borderColor:t.colorPrimaryHover,[`+ ${n}-group-addon ${s}-button:not(${o}-btn-primary)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${n}-affix-wrapper`]:{borderRadius:0},[`${n}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${n}-group`]:{[`> ${n}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${s}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${s}-button:not(${o}-btn-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${o}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${s}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${s}-button`]:{height:t.controlHeightLG},[`&-small ${s}-button`]:{height:t.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${n}-compact-item`]:{[`&:not(${n}-compact-last-item)`]:{[`${n}-group-addon`]:{[`${n}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${n}-compact-first-item)`]:{[`${n},${n}-affix-wrapper`]:{borderRadius:0}},[`> ${n}-group-addon ${n}-search-button,
        > ${n},
        ${n}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${n}-affix-wrapper-focused`]:{zIndex:2}}}}},r1e=t=>{const{componentCls:n,paddingLG:o}=t,s=`${n}-textarea`;return{[s]:{position:"relative","&-show-count":{[`> ${n}`]:{height:"100%"},[`${n}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${n}`]:{paddingInlineEnd:o}},[`&-affix-wrapper${s}-has-feedback`]:{[`${n}`]:{paddingInlineEnd:o}},[`&-affix-wrapper${n}-affix-wrapper`]:{padding:0,[`> textarea${n}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${n}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${n}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,insetBlockStart:t.paddingXS},[`${s}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},n1e=t=>{const{componentCls:n}=t;return{[`${n}-out-of-range`]:{[`&, & input, & textarea, ${n}-show-count-suffix, ${n}-data-count`]:{color:t.colorError}}}};function pW(t){return Yi(t,{inputAffixPadding:t.paddingXXS})}const mW=t=>{const{controlHeight:n,fontSize:o,lineHeight:s,lineWidth:c,controlHeightSM:m,controlHeightLG:v,fontSizeLG:d,lineHeightLG:C,paddingSM:S,controlPaddingHorizontalSM:R,controlPaddingHorizontal:D,colorFillAlter:$,colorPrimaryHover:H,colorPrimary:Z,controlOutlineWidth:X,controlOutline:Q,colorErrorOutline:G,colorWarningOutline:K}=t;return{paddingBlock:Math.max(Math.round((n-o*s)/2*10)/10-c,0),paddingBlockSM:Math.max(Math.round((m-o*s)/2*10)/10-c,0),paddingBlockLG:Math.ceil((v-d*C)/2*10)/10-c,paddingInline:S-c,paddingInlineSM:R-c,paddingInlineLG:D-c,addonBg:$,activeBorderColor:Z,hoverBorderColor:H,activeShadow:`0 0 0 ${X}px ${Q}`,errorActiveShadow:`0 0 0 ${X}px ${G}`,warningActiveShadow:`0 0 0 ${X}px ${K}`,hoverBg:"",activeBg:""}},Pz=os("Input",t=>{const n=Yi(t,pW(t));return[Y0e(n),r1e(n),Q0e(n),e1e(n),t1e(n),n1e(n),KO(n)]},mW);function i1e(t,n,o){var s=o||{},c=s.noTrailing,m=c===void 0?!1:c,v=s.noLeading,d=v===void 0?!1:v,C=s.debounceMode,S=C===void 0?void 0:C,R,D=!1,$=0;function H(){R&&clearTimeout(R)}function Z(Q){var G=Q||{},K=G.upcomingOnly,Y=K===void 0?!1:K;H(),D=!Y}function X(){for(var Q=arguments.length,G=new Array(Q),K=0;K<Q;K++)G[K]=arguments[K];var Y=this,re=Date.now()-$;if(D)return;function fe(){$=Date.now(),n.apply(Y,G)}function me(){R=void 0}!d&&S&&!R&&fe(),H(),S===void 0&&re>t?d?($=Date.now(),m||(R=setTimeout(S?me:fe,t))):fe():m!==!0&&(R=setTimeout(S?me:fe,S===void 0?t-re:t))}return X.cancel=Z,X}function o1e(t,n,o){var s=o||{},c=s.atBegin,m=c===void 0?!1:c;return i1e(t,n,{debounceMode:m!==!1})}function pu(t,n){return t[n]}var a1e=["children"];function gW(t,n){return"".concat(t,"-").concat(n)}function s1e(t){return t&&t.type&&t.type.isTreeNode}function ww(t,n){return t??n}function a0(t){var n=t||{},o=n.title,s=n._title,c=n.key,m=n.children,v=o||"title";return{title:v,_title:s||[v],key:c||"key",children:m||"children"}}function yW(t){function n(o){var s=$c(o);return s.map(function(c){if(!s1e(c))return Ua(!c,"Tree/TreeNode can only accept TreeNode as children."),null;var m=c.key,v=c.props,d=v.children,C=xi(v,a1e),S=yt({key:m},C),R=n(d);return R.length&&(S.children=R),S}).filter(function(c){return c})}return n(t)}function YP(t,n,o){var s=a0(o),c=s._title,m=s.key,v=s.children,d=new Set(n===!0?[]:n),C=[];function S(R){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return R.map(function($,H){for(var Z=gW(D?D.pos:"0",H),X=ww($[m],Z),Q,G=0;G<c.length;G+=1){var K=c[G];if($[K]!==void 0){Q=$[K];break}}var Y=yt(yt({},Zs($,[].concat(Pr(c),[m,v]))),{},{title:Q,key:X,parent:D,pos:Z,children:null,data:$,isStart:[].concat(Pr(D?D.isStart:[]),[H===0]),isEnd:[].concat(Pr(D?D.isEnd:[]),[H===R.length-1])});return C.push(Y),n===!0||d.has(X)?Y.children=S($[v]||[],Y):Y.children=[],Y})}return S(t),C}function l1e(t,n,o){var s={};Ei(o)==="object"?s=o:s={externalGetKey:o},s=s||{};var c=s,m=c.childrenPropName,v=c.externalGetKey,d=c.fieldNames,C=a0(d),S=C.key,R=C.children,D=m||R,$;v?typeof v=="string"?$=function(X){return X[v]}:typeof v=="function"&&($=function(X){return v(X)}):$=function(X,Q){return ww(X[S],Q)};function H(Z,X,Q,G){var K=Z?Z[D]:t,Y=Z?gW(Q.pos,X):"0",re=Z?[].concat(Pr(G),[Z]):[];if(Z){var fe=$(Z,Y),me={node:Z,index:X,pos:Y,key:fe,parentPos:Q.node?Q.pos:null,level:Q.level+1,nodes:re};n(me)}K&&K.forEach(function(pe,xe){H(pe,xe,{node:Z,pos:Y,level:Q?Q.level+1:-1},re)})}H(null)}function Az(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.initWrapper,s=n.processEntity,c=n.onProcessFinished,m=n.externalGetKey,v=n.childrenPropName,d=n.fieldNames,C=arguments.length>2?arguments[2]:void 0,S=m||C,R={},D={},$={posEntities:R,keyEntities:D};return o&&($=o($)||$),l1e(t,function(H){var Z=H.node,X=H.index,Q=H.pos,G=H.key,K=H.parentPos,Y=H.level,re=H.nodes,fe={node:Z,nodes:re,index:X,key:G,pos:Q,level:Y},me=ww(G,Q);R[Q]=fe,D[me]=fe,fe.parent=R[K],fe.parent&&(fe.parent.children=fe.parent.children||[],fe.parent.children.push(fe)),s&&s(fe,$)},{externalGetKey:S,childrenPropName:v,fieldNames:d}),c&&c($),$}function db(t,n){var o=n.expandedKeys,s=n.selectedKeys,c=n.loadedKeys,m=n.loadingKeys,v=n.checkedKeys,d=n.halfCheckedKeys,C=n.dragOverNodeKey,S=n.dropPosition,R=n.keyEntities,D=pu(R,t),$={eventKey:t,expanded:o.indexOf(t)!==-1,selected:s.indexOf(t)!==-1,loaded:c.indexOf(t)!==-1,loading:m.indexOf(t)!==-1,checked:v.indexOf(t)!==-1,halfChecked:d.indexOf(t)!==-1,pos:String(D?D.pos:""),dragOver:C===t&&S===0,dragOverGapTop:C===t&&S===-1,dragOverGapBottom:C===t&&S===1};return $}function As(t){var n=t.data,o=t.expanded,s=t.selected,c=t.checked,m=t.loaded,v=t.loading,d=t.halfChecked,C=t.dragOver,S=t.dragOverGapTop,R=t.dragOverGapBottom,D=t.pos,$=t.active,H=t.eventKey,Z=yt(yt({},n),{},{expanded:o,selected:s,checked:c,loaded:m,loading:v,halfChecked:d,dragOver:C,dragOverGapTop:S,dragOverGapBottom:R,pos:D,active:$,key:H});return"props"in Z||Object.defineProperty(Z,"props",{get:function(){return Ua(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),Z}function vW(t,n){var o=new Set;return t.forEach(function(s){n.has(s)||o.add(s)}),o}function c1e(t){var n=t||{},o=n.disabled,s=n.disableCheckbox,c=n.checkable;return!!(o||s)||c===!1}function u1e(t,n,o,s){for(var c=new Set(t),m=new Set,v=0;v<=o;v+=1){var d=n.get(v)||new Set;d.forEach(function(D){var $=D.key,H=D.node,Z=D.children,X=Z===void 0?[]:Z;c.has($)&&!s(H)&&X.filter(function(Q){return!s(Q.node)}).forEach(function(Q){c.add(Q.key)})})}for(var C=new Set,S=o;S>=0;S-=1){var R=n.get(S)||new Set;R.forEach(function(D){var $=D.parent,H=D.node;if(!(s(H)||!D.parent||C.has(D.parent.key))){if(s(D.parent.node)){C.add($.key);return}var Z=!0,X=!1;($.children||[]).filter(function(Q){return!s(Q.node)}).forEach(function(Q){var G=Q.key,K=c.has(G);Z&&!K&&(Z=!1),!X&&(K||m.has(G))&&(X=!0)}),Z&&c.add($.key),X&&m.add($.key),C.add($.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(vW(m,c))}}function h1e(t,n,o,s,c){for(var m=new Set(t),v=new Set(n),d=0;d<=s;d+=1){var C=o.get(d)||new Set;C.forEach(function($){var H=$.key,Z=$.node,X=$.children,Q=X===void 0?[]:X;!m.has(H)&&!v.has(H)&&!c(Z)&&Q.filter(function(G){return!c(G.node)}).forEach(function(G){m.delete(G.key)})})}v=new Set;for(var S=new Set,R=s;R>=0;R-=1){var D=o.get(R)||new Set;D.forEach(function($){var H=$.parent,Z=$.node;if(!(c(Z)||!$.parent||S.has($.parent.key))){if(c($.parent.node)){S.add(H.key);return}var X=!0,Q=!1;(H.children||[]).filter(function(G){return!c(G.node)}).forEach(function(G){var K=G.key,Y=m.has(K);X&&!Y&&(X=!1),!Q&&(Y||v.has(K))&&(Q=!0)}),X||m.delete(H.key),Q&&v.add(H.key),S.add(H.key)}})}return{checkedKeys:Array.from(m),halfCheckedKeys:Array.from(vW(v,m))}}function j_(t,n,o,s){var c=[],m;s?m=s:m=c1e;var v=new Set(t.filter(function(R){var D=!!pu(o,R);return D||c.push(R),D})),d=new Map,C=0;Object.keys(o).forEach(function(R){var D=o[R],$=D.level,H=d.get($);H||(H=new Set,d.set($,H)),H.add(D),C=Math.max(C,$)}),Ua(!c.length,"Tree missing follow keys: ".concat(c.slice(0,100).map(function(R){return"'".concat(R,"'")}).join(", ")));var S;return n===!0?S=u1e(v,d,C,m):S=h1e(v,n.halfCheckedKeys,d,C,m),S}const d1e=t=>{const{checkboxCls:n}=t,o=`${n}-wrapper`;return[{[`${n}-group`]:Object.assign(Object.assign({},Oa(t)),{display:"inline-flex",flexWrap:"wrap",columnGap:t.marginXS,[`> ${t.antCls}-row`]:{flex:1}}),[o]:Object.assign(Object.assign({},Oa(t)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${o}`]:{marginInlineStart:0},[`&${o}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[n]:Object.assign(Object.assign({},Oa(t)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:t.borderRadiusSM,alignSelf:"center",[`${n}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${n}-inner`]:Object.assign({},Lm(t))},[`${n}-inner`]:{boxSizing:"border-box",display:"block",width:t.checkboxSize,height:t.checkboxSize,direction:"ltr",backgroundColor:t.colorBgContainer,border:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,borderCollapse:"separate",transition:`all ${t.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:t.calc(t.checkboxSize).div(14).mul(5).equal(),height:t.calc(t.checkboxSize).div(14).mul(8).equal(),border:`${Xt(t.lineWidthBold)} solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`}},"& + span":{paddingInlineStart:t.paddingXS,paddingInlineEnd:t.paddingXS}})},{[`
        ${o}:not(${o}-disabled),
        ${n}:not(${n}-disabled)
      `]:{[`&:hover ${n}-inner`]:{borderColor:t.colorPrimary}},[`${o}:not(${o}-disabled)`]:{[`&:hover ${n}-checked:not(${n}-disabled) ${n}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${n}-checked:not(${n}-disabled):after`]:{borderColor:t.colorPrimaryHover}}},{[`${n}-checked`]:{[`${n}-inner`]:{backgroundColor:t.colorPrimary,borderColor:t.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`}}},[`
        ${o}-checked:not(${o}-disabled),
        ${n}-checked:not(${n}-disabled)
      `]:{[`&:hover ${n}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"}}},{[n]:{"&-indeterminate":{[`${n}-inner`]:{backgroundColor:t.colorBgContainer,borderColor:t.colorBorder,"&:after":{top:"50%",insetInlineStart:"50%",width:t.calc(t.fontSizeLG).div(2).equal(),height:t.calc(t.fontSizeLG).div(2).equal(),backgroundColor:t.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}}}}},{[`${o}-disabled`]:{cursor:"not-allowed"},[`${n}-disabled`]:{[`&, ${n}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${n}-inner`]:{background:t.colorBgContainerDisabled,borderColor:t.colorBorder,"&:after":{borderColor:t.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:t.colorTextDisabled},[`&${n}-indeterminate ${n}-inner::after`]:{background:t.colorTextDisabled}}}]};function _W(t,n){const o=Yi(n,{checkboxCls:`.${t}`,checkboxSize:n.controlInteractiveSize});return[d1e(o)]}const xW=os("Checkbox",(t,n)=>{let{prefixCls:o}=n;return[_W(o,t)]}),f1e=rr.createContext(null),bW=f1e;var p1e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const m1e=(t,n)=>{var o;const{prefixCls:s,className:c,rootClassName:m,children:v,indeterminate:d=!1,style:C,onMouseEnter:S,onMouseLeave:R,skipGroup:D=!1,disabled:$}=t,H=p1e(t,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:Z,direction:X,checkbox:Q}=E.useContext(hi),G=E.useContext(bW),{isFormItemInput:K}=E.useContext(bu),Y=E.useContext(Gm),re=(o=G?.disabled||$)!==null&&o!==void 0?o:Y,fe=E.useRef(H.value);E.useEffect(()=>{G?.registerValue(H.value)},[]),E.useEffect(()=>{if(!D)return H.value!==fe.current&&(G?.cancelValue(fe.current),G?.registerValue(H.value),fe.current=H.value),()=>G?.cancelValue(H.value)},[H.value]);const me=Z("checkbox",s),pe=Pl(me),[xe,Se,oe]=xW(me,pe),Re=Object.assign({},H);G&&!D&&(Re.onChange=function(){H.onChange&&H.onChange.apply(H,arguments),G.toggleOption&&G.toggleOption({label:v,value:H.value})},Re.name=G.name,Re.checked=G.value.includes(H.value));const Ve=Gt(`${me}-wrapper`,{[`${me}-rtl`]:X==="rtl",[`${me}-wrapper-checked`]:Re.checked,[`${me}-wrapper-disabled`]:re,[`${me}-wrapper-in-form-item`]:K},Q?.className,c,m,oe,pe,Se),Oe=Gt({[`${me}-indeterminate`]:d},eM,Se),_e=d?"mixed":void 0;return xe(E.createElement(tM,{component:"Checkbox",disabled:re},E.createElement("label",{className:Ve,style:Object.assign(Object.assign({},Q?.style),C),onMouseEnter:S,onMouseLeave:R},E.createElement(sW,Object.assign({"aria-checked":_e},Re,{prefixCls:me,className:Oe,disabled:re,ref:n})),v!==void 0&&E.createElement("span",null,v))))},g1e=E.forwardRef(m1e),wW=g1e;var y1e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const v1e=(t,n)=>{const{defaultValue:o,children:s,options:c=[],prefixCls:m,className:v,rootClassName:d,style:C,onChange:S}=t,R=y1e(t,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:D,direction:$}=E.useContext(hi),[H,Z]=E.useState(R.value||o||[]),[X,Q]=E.useState([]);E.useEffect(()=>{"value"in R&&Z(R.value||[])},[R.value]);const G=E.useMemo(()=>c.map(Fe=>typeof Fe=="string"||typeof Fe=="number"?{label:Fe,value:Fe}:Fe),[c]),K=Fe=>{Q(Le=>Le.filter(Me=>Me!==Fe))},Y=Fe=>{Q(Le=>[].concat(Pr(Le),[Fe]))},re=Fe=>{const Le=H.indexOf(Fe.value),Me=Pr(H);Le===-1?Me.push(Fe.value):Me.splice(Le,1),"value"in R||Z(Me),S?.(Me.filter(Ce=>X.includes(Ce)).sort((Ce,Ye)=>{const qe=G.findIndex(Qe=>Qe.value===Ce),rt=G.findIndex(Qe=>Qe.value===Ye);return qe-rt}))},fe=D("checkbox",m),me=`${fe}-group`,pe=Pl(fe),[xe,Se,oe]=xW(fe,pe),Re=Zs(R,["value","disabled"]),Ve=c.length?G.map(Fe=>E.createElement(wW,{prefixCls:fe,key:Fe.value.toString(),disabled:"disabled"in Fe?Fe.disabled:R.disabled,value:Fe.value,checked:H.includes(Fe.value),onChange:Fe.onChange,className:`${me}-item`,style:Fe.style,title:Fe.title,id:Fe.id,required:Fe.required},Fe.label)):s,Oe={toggleOption:re,value:H,disabled:R.disabled,name:R.name,registerValue:Y,cancelValue:K},_e=Gt(me,{[`${me}-rtl`]:$==="rtl"},v,d,oe,pe,Se);return xe(E.createElement("div",Object.assign({className:_e,style:C},Re,{ref:n}),E.createElement(bW.Provider,{value:Oe},Ve)))},_1e=E.forwardRef(v1e),x1e=E.memo(_1e),Rz=wW;Rz.Group=x1e;Rz.__ANT_CHECKBOX=!0;const JT=Rz,b1e=E.createContext({}),SW=b1e,w1e=t=>{const{componentCls:n}=t;return{[n]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},S1e=t=>{const{componentCls:n}=t;return{[n]:{position:"relative",maxWidth:"100%",minHeight:1}}},C1e=(t,n)=>{const{componentCls:o,gridColumns:s}=t,c={};for(let m=s;m>=0;m--)m===0?(c[`${o}${n}-${m}`]={display:"none"},c[`${o}-push-${m}`]={insetInlineStart:"auto"},c[`${o}-pull-${m}`]={insetInlineEnd:"auto"},c[`${o}${n}-push-${m}`]={insetInlineStart:"auto"},c[`${o}${n}-pull-${m}`]={insetInlineEnd:"auto"},c[`${o}${n}-offset-${m}`]={marginInlineStart:0},c[`${o}${n}-order-${m}`]={order:0}):(c[`${o}${n}-${m}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${m/s*100}%`,maxWidth:`${m/s*100}%`}],c[`${o}${n}-push-${m}`]={insetInlineStart:`${m/s*100}%`},c[`${o}${n}-pull-${m}`]={insetInlineEnd:`${m/s*100}%`},c[`${o}${n}-offset-${m}`]={marginInlineStart:`${m/s*100}%`},c[`${o}${n}-order-${m}`]={order:m});return c},GR=(t,n)=>C1e(t,n),E1e=(t,n,o)=>({[`@media (min-width: ${Xt(n)})`]:Object.assign({},GR(t,o))}),T1e=()=>({}),I1e=()=>({}),M1e=os("Grid",w1e,T1e),P1e=os("Grid",t=>{const n=Yi(t,{gridColumns:24}),o={"-sm":n.screenSMMin,"-md":n.screenMDMin,"-lg":n.screenLGMin,"-xl":n.screenXLMin,"-xxl":n.screenXXLMin};return[S1e(n),GR(n,""),GR(n,"-xs"),Object.keys(o).map(s=>E1e(n,o[s],s)).reduce((s,c)=>Object.assign(Object.assign({},s),c),{})]},I1e);var A1e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function R1e(t){return typeof t=="number"?`${t} ${t} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?`0 0 ${t}`:t}const k1e=["xs","sm","md","lg","xl","xxl"],O1e=E.forwardRef((t,n)=>{const{getPrefixCls:o,direction:s}=E.useContext(hi),{gutter:c,wrap:m}=E.useContext(SW),{prefixCls:v,span:d,order:C,offset:S,push:R,pull:D,className:$,children:H,flex:Z,style:X}=t,Q=A1e(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),G=o("col",v),[K,Y,re]=P1e(G);let fe={};k1e.forEach(xe=>{let Se={};const oe=t[xe];typeof oe=="number"?Se.span=oe:typeof oe=="object"&&(Se=oe||{}),delete Q[xe],fe=Object.assign(Object.assign({},fe),{[`${G}-${xe}-${Se.span}`]:Se.span!==void 0,[`${G}-${xe}-order-${Se.order}`]:Se.order||Se.order===0,[`${G}-${xe}-offset-${Se.offset}`]:Se.offset||Se.offset===0,[`${G}-${xe}-push-${Se.push}`]:Se.push||Se.push===0,[`${G}-${xe}-pull-${Se.pull}`]:Se.pull||Se.pull===0,[`${G}-${xe}-flex-${Se.flex}`]:Se.flex||Se.flex==="auto",[`${G}-rtl`]:s==="rtl"})});const me=Gt(G,{[`${G}-${d}`]:d!==void 0,[`${G}-order-${C}`]:C,[`${G}-offset-${S}`]:S,[`${G}-push-${R}`]:R,[`${G}-pull-${D}`]:D},$,fe,Y,re),pe={};if(c&&c[0]>0){const xe=c[0]/2;pe.paddingLeft=xe,pe.paddingRight=xe}return Z&&(pe.flex=R1e(Z),m===!1&&!pe.minWidth&&(pe.minWidth=0)),K(E.createElement("div",Object.assign({},Q,{style:Object.assign(Object.assign({},pe),X),className:me,ref:n}),H))}),QT=O1e;var z1e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function VN(t,n){const[o,s]=E.useState(typeof t=="string"?t:""),c=()=>{if(typeof t=="string"&&s(t),typeof t=="object")for(let m=0;m<o0.length;m++){const v=o0[m];if(!n[v])continue;const d=t[v];if(d!==void 0){s(d);return}}};return E.useEffect(()=>{c()},[JSON.stringify(t),n]),o}const D1e=E.forwardRef((t,n)=>{const{prefixCls:o,justify:s,align:c,className:m,style:v,children:d,gutter:C=0,wrap:S}=t,R=z1e(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:D,direction:$}=E.useContext(hi),[H,Z]=E.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[X,Q]=E.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),G=VN(c,X),K=VN(s,X),Y=E.useRef(C),re=Eq();E.useEffect(()=>{const Me=re.subscribe(Ce=>{Q(Ce);const Ye=Y.current||0;(!Array.isArray(Ye)&&typeof Ye=="object"||Array.isArray(Ye)&&(typeof Ye[0]=="object"||typeof Ye[1]=="object"))&&Z(Ce)});return()=>re.unsubscribe(Me)},[]);const fe=()=>{const Me=[void 0,void 0];return(Array.isArray(C)?C:[C,void 0]).forEach((Ye,qe)=>{if(typeof Ye=="object")for(let rt=0;rt<o0.length;rt++){const Qe=o0[rt];if(H[Qe]&&Ye[Qe]!==void 0){Me[qe]=Ye[Qe];break}}else Me[qe]=Ye}),Me},me=D("row",o),[pe,xe,Se]=M1e(me),oe=fe(),Re=Gt(me,{[`${me}-no-wrap`]:S===!1,[`${me}-${K}`]:K,[`${me}-${G}`]:G,[`${me}-rtl`]:$==="rtl"},m,xe,Se),Ve={},Oe=oe[0]!=null&&oe[0]>0?oe[0]/-2:void 0;Oe&&(Ve.marginLeft=Oe,Ve.marginRight=Oe),[,Ve.rowGap]=oe;const[_e,Fe]=oe,Le=E.useMemo(()=>({gutter:[_e,Fe],wrap:S}),[_e,Fe,S]);return pe(E.createElement(SW.Provider,{value:Le},E.createElement("div",Object.assign({},R,{className:Re,style:Object.assign(Object.assign({},Ve),v),ref:n}),d)))}),kz=D1e;function l_(t){return!!(t.addonBefore||t.addonAfter)}function JP(t){return!!(t.prefix||t.suffix||t.allowClear)}function eI(t,n,o,s){if(o){var c=n;if(n.type==="click"){var m=t.cloneNode(!0);c=Object.create(n,{target:{value:m},currentTarget:{value:m}}),m.value="",o(c);return}if(s!==void 0){var v=t.cloneNode(!0);c=Object.create(n,{target:{value:v},currentTarget:{value:v}}),v.type!=="file"&&(v.value=s),o(c);return}o(c)}}function L1e(t,n){if(t){t.focus(n);var o=n||{},s=o.cursor;if(s){var c=t.value.length;switch(s){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(c,c);break;default:t.setSelectionRange(0,c)}}}}var CW=function(n){var o,s,c=n.inputElement,m=n.prefixCls,v=n.prefix,d=n.suffix,C=n.addonBefore,S=n.addonAfter,R=n.className,D=n.style,$=n.disabled,H=n.readOnly,Z=n.focused,X=n.triggerFocus,Q=n.allowClear,G=n.value,K=n.handleReset,Y=n.hidden,re=n.classes,fe=n.classNames,me=n.dataAttrs,pe=n.styles,xe=n.components,Se=xe?.affixWrapper||"span",oe=xe?.groupWrapper||"span",Re=xe?.wrapper||"span",Ve=xe?.groupAddon||"span",Oe=E.useRef(null),_e=function(Tt){var ct;(ct=Oe.current)!==null&&ct!==void 0&&ct.contains(Tt.target)&&X?.()},Fe=function(){var Tt;if(!Q)return null;var ct=!$&&!H&&G,Ct="".concat(m,"-clear-icon"),kt=Ei(Q)==="object"&&Q!==null&&Q!==void 0&&Q.clearIcon?Q.clearIcon:"✖";return rr.createElement("span",{onClick:K,onMouseDown:function(Nt){return Nt.preventDefault()},className:Gt(Ct,(Tt={},xt(Tt,"".concat(Ct,"-hidden"),!ct),xt(Tt,"".concat(Ct,"-has-suffix"),!!d),Tt)),role:"button",tabIndex:-1},kt)},Le=E.cloneElement(c,{value:G,hidden:Y,className:Gt((o=c.props)===null||o===void 0?void 0:o.className,!JP(n)&&!l_(n)&&R)||null,style:yt(yt({},(s=c.props)===null||s===void 0?void 0:s.style),!JP(n)&&!l_(n)?D:{})});if(JP(n)){var Me,Ce="".concat(m,"-affix-wrapper"),Ye=Gt(Ce,(Me={},xt(Me,"".concat(Ce,"-disabled"),$),xt(Me,"".concat(Ce,"-focused"),Z),xt(Me,"".concat(Ce,"-readonly"),H),xt(Me,"".concat(Ce,"-input-with-clear-btn"),d&&Q&&G),Me),!l_(n)&&R,re?.affixWrapper,fe?.affixWrapper),qe=(d||Q)&&rr.createElement("span",{className:Gt("".concat(m,"-suffix"),fe?.suffix),style:pe?.suffix},Fe(),d);Le=rr.createElement(Se,Mr({className:Ye,style:yt(yt({},l_(n)?void 0:D),pe?.affixWrapper),hidden:!l_(n)&&Y,onClick:_e},me?.affixWrapper,{ref:Oe}),v&&rr.createElement("span",{className:Gt("".concat(m,"-prefix"),fe?.prefix),style:pe?.prefix},v),E.cloneElement(c,{value:G,hidden:null}),qe)}if(l_(n)){var rt="".concat(m,"-group"),Qe="".concat(rt,"-addon"),St=Gt("".concat(m,"-wrapper"),rt,re?.wrapper),jt=Gt("".concat(m,"-group-wrapper"),R,re?.group);return rr.createElement(oe,{className:jt,style:D,hidden:Y},rr.createElement(Re,{className:St},C&&rr.createElement(Ve,{className:Qe},C),E.cloneElement(Le,{hidden:null}),S&&rr.createElement(Ve,{className:Qe},S)))}return Le},$1e=["show"];function EW(t,n){return E.useMemo(function(){var o={};n&&(o.show=Ei(n)==="object"&&n.formatter?n.formatter:!!n),o=yt(yt({},o),t);var s=o,c=s.show,m=xi(s,$1e);return yt(yt({},m),{},{show:!!c,showFormatter:typeof c=="function"?c:void 0,strategy:m.strategy||function(v){return v.length}})},[t,n])}var B1e=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],F1e=E.forwardRef(function(t,n){var o=t.autoComplete,s=t.onChange,c=t.onFocus,m=t.onBlur,v=t.onPressEnter,d=t.onKeyDown,C=t.prefixCls,S=C===void 0?"rc-input":C,R=t.disabled,D=t.htmlSize,$=t.className,H=t.maxLength,Z=t.suffix,X=t.showCount,Q=t.count,G=t.type,K=G===void 0?"text":G,Y=t.classes,re=t.classNames,fe=t.styles,me=t.onCompositionStart,pe=t.onCompositionEnd,xe=xi(t,B1e),Se=E.useState(!1),oe=nr(Se,2),Re=oe[0],Ve=oe[1],Oe=rr.useRef(!1),_e=E.useRef(null),Fe=function(ve){_e.current&&L1e(_e.current,ve)},Le=ul(t.defaultValue,{value:t.value}),Me=nr(Le,2),Ce=Me[0],Ye=Me[1],qe=Ce==null?"":String(Ce),rt=rr.useState(null),Qe=nr(rt,2),St=Qe[0],jt=Qe[1],Ot=EW(Q,X),Tt=Ot.max||H,ct=Ot.strategy(qe),Ct=!!Tt&&ct>Tt;E.useImperativeHandle(n,function(){return{focus:Fe,blur:function(){var ve;(ve=_e.current)===null||ve===void 0||ve.blur()},setSelectionRange:function(ve,pt,gt){var $t;($t=_e.current)===null||$t===void 0||$t.setSelectionRange(ve,pt,gt)},select:function(){var ve;(ve=_e.current)===null||ve===void 0||ve.select()},input:_e.current}}),E.useEffect(function(){Ve(function(ze){return ze&&R?!1:ze})},[R]);var kt=function(ve,pt){var gt=pt;if(!Oe.current&&Ot.exceedFormatter&&Ot.max&&Ot.strategy(pt)>Ot.max&&(gt=Ot.exceedFormatter(pt,{max:Ot.max}),pt!==gt)){var $t,It;jt([(($t=_e.current)===null||$t===void 0?void 0:$t.selectionStart)||0,((It=_e.current)===null||It===void 0?void 0:It.selectionEnd)||0])}Ye(gt),_e.current&&eI(_e.current,ve,s,gt)};rr.useEffect(function(){if(St){var ze;(ze=_e.current)===null||ze===void 0||ze.setSelectionRange.apply(ze,Pr(St))}},[St]);var zt=function(ve){kt(ve,ve.target.value)},Nt=function(ve){Oe.current=!1,kt(ve,ve.currentTarget.value),pe?.(ve)},Rt=function(ve){v&&ve.key==="Enter"&&v(ve),d?.(ve)},Pt=function(ve){Ve(!0),c?.(ve)},Dt=function(ve){Ve(!1),m?.(ve)},Ut=function(ve){Ye(""),Fe(),_e.current&&eI(_e.current,ve,s)},sr=Ct&&"".concat(S,"-out-of-range"),vt=function(){var ve=Zs(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return rr.createElement("input",Mr({autoComplete:o},ve,{onChange:zt,onFocus:Pt,onBlur:Dt,onKeyDown:Rt,className:Gt(S,xt({},"".concat(S,"-disabled"),R),re?.input),style:fe?.input,ref:_e,size:D,type:K,onCompositionStart:function(gt){Oe.current=!0,me?.(gt)},onCompositionEnd:Nt}))},De=function(){var ve=Number(Tt)>0;if(Z||Ot.show){var pt=Ot.showFormatter?Ot.showFormatter({value:qe,count:ct,maxLength:Tt}):"".concat(ct).concat(ve?" / ".concat(Tt):"");return rr.createElement(rr.Fragment,null,Ot.show&&rr.createElement("span",{className:Gt("".concat(S,"-show-count-suffix"),xt({},"".concat(S,"-show-count-has-suffix"),!!Z),re?.count),style:yt({},fe?.count)},pt),Z)}return null};return rr.createElement(CW,Mr({},xe,{prefixCls:S,className:Gt($,sr),inputElement:vt(),handleReset:Ut,value:qe,focused:Re,triggerFocus:Fe,suffix:De(),disabled:R,classes:Y,classNames:re,styles:fe}))});const N1e=t=>{const{getPrefixCls:n,direction:o}=E.useContext(hi),{prefixCls:s,className:c}=t,m=n("input-group",s),v=n("input"),[d,C]=Pz(v),S=Gt(m,{[`${m}-lg`]:t.size==="large",[`${m}-sm`]:t.size==="small",[`${m}-compact`]:t.compact,[`${m}-rtl`]:o==="rtl"},C,c),R=E.useContext(bu),D=E.useMemo(()=>Object.assign(Object.assign({},R),{isFormItemInput:!1}),[R]);return d(E.createElement("span",{className:S,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},E.createElement(bu.Provider,{value:D},t.children)))},j1e=N1e;function TW(t,n){const o=E.useRef([]),s=()=>{o.current.push(setTimeout(()=>{var c,m,v,d;!((c=t.current)===null||c===void 0)&&c.input&&((m=t.current)===null||m===void 0?void 0:m.input.getAttribute("type"))==="password"&&(!((v=t.current)===null||v===void 0)&&v.input.hasAttribute("value"))&&((d=t.current)===null||d===void 0||d.input.removeAttribute("value"))}))};return E.useEffect(()=>(n&&s(),()=>o.current.forEach(c=>{c&&clearTimeout(c)})),[]),s}function V1e(t){return!!(t.prefix||t.suffix||t.allowClear)}var U1e=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function H1e(t,n){if(!t)return;t.focus(n);const{cursor:o}=n||{};if(o){const s=t.value.length;switch(o){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(s,s);break;default:t.setSelectionRange(0,s);break}}}const G1e=E.forwardRef((t,n)=>{var o;const{prefixCls:s,bordered:c=!0,status:m,size:v,disabled:d,onBlur:C,onFocus:S,suffix:R,allowClear:D,addonAfter:$,addonBefore:H,className:Z,style:X,styles:Q,rootClassName:G,onChange:K,classNames:Y}=t,re=U1e(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames"]),{getPrefixCls:fe,direction:me,input:pe}=rr.useContext(hi),xe=fe("input",s),Se=E.useRef(null),oe=Pl(xe),[Re,Ve,Oe]=Pz(xe,oe),{compactSize:_e,compactItemClassnames:Fe}=fw(xe,me),Le=Gh(zt=>{var Nt;return(Nt=v??_e)!==null&&Nt!==void 0?Nt:zt}),Me=rr.useContext(Gm),Ce=d??Me,{status:Ye,hasFeedback:qe,feedbackIcon:rt}=E.useContext(bu),Qe=dz(Ye,m),St=V1e(t)||!!qe;E.useRef(St);const jt=TW(Se,!0),Ot=zt=>{jt(),C?.(zt)},Tt=zt=>{jt(),S?.(zt)},ct=zt=>{jt(),K?.(zt)},Ct=(qe||R)&&rr.createElement(rr.Fragment,null,R,qe&&rt);let kt;return typeof D=="object"&&D?.clearIcon?kt=D:D&&(kt={clearIcon:rr.createElement(S0,null)}),Re(rr.createElement(F1e,Object.assign({ref:Cu(n,Se),prefixCls:xe,autoComplete:pe?.autoComplete},re,{disabled:Ce,onBlur:Ot,onFocus:Tt,style:Object.assign(Object.assign({},pe?.style),X),styles:Object.assign(Object.assign({},pe?.styles),Q),suffix:Ct,allowClear:kt,className:Gt(Z,G,Oe,oe,Ve,Fe,pe?.className),onChange:ct,addonAfter:$&&rr.createElement(Gb,null,rr.createElement(RR,{override:!0,status:!0},$)),addonBefore:H&&rr.createElement(Gb,null,rr.createElement(RR,{override:!0,status:!0},H)),classNames:Object.assign(Object.assign(Object.assign({},Y),pe?.classNames),{input:Gt({[`${xe}-sm`]:Le==="small",[`${xe}-lg`]:Le==="large",[`${xe}-rtl`]:me==="rtl",[`${xe}-borderless`]:!c},!St&&N_(xe,Qe),Y?.input,(o=pe?.classNames)===null||o===void 0?void 0:o.input,Ve)}),classes:{affixWrapper:Gt({[`${xe}-affix-wrapper-sm`]:Le==="small",[`${xe}-affix-wrapper-lg`]:Le==="large",[`${xe}-affix-wrapper-rtl`]:me==="rtl",[`${xe}-affix-wrapper-borderless`]:!c},N_(`${xe}-affix-wrapper`,Qe,qe),Ve),wrapper:Gt({[`${xe}-group-rtl`]:me==="rtl"},Ve),group:Gt({[`${xe}-group-wrapper-sm`]:Le==="small",[`${xe}-group-wrapper-lg`]:Le==="large",[`${xe}-group-wrapper-rtl`]:me==="rtl",[`${xe}-group-wrapper-disabled`]:Ce},N_(`${xe}-group-wrapper`,Qe,qe),Ve)}})))}),Oz=G1e;var q1e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const W1e=q1e;var K1e=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:W1e}))};const Z1e=E.forwardRef(K1e);var X1e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const Y1e=X1e;var J1e=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Y1e}))};const Q1e=E.forwardRef(J1e);var exe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const txe=t=>t?E.createElement(Q1e,null):E.createElement(Z1e,null),rxe={click:"onClick",hover:"onMouseOver"},nxe=E.forwardRef((t,n)=>{const{visibilityToggle:o=!0}=t,s=typeof o=="object"&&o.visible!==void 0,[c,m]=E.useState(()=>s?o.visible:!1),v=E.useRef(null);E.useEffect(()=>{s&&m(o.visible)},[s,o]);const d=TW(v),C=()=>{const{disabled:fe}=t;fe||(c&&d(),m(me=>{var pe;const xe=!me;return typeof o=="object"&&((pe=o.onVisibleChange)===null||pe===void 0||pe.call(o,xe)),xe}))},S=fe=>{const{action:me="click",iconRender:pe=txe}=t,xe=rxe[me]||"",Se=pe(c),oe={[xe]:C,className:`${fe}-icon`,key:"passwordIcon",onMouseDown:Re=>{Re.preventDefault()},onMouseUp:Re=>{Re.preventDefault()}};return E.cloneElement(E.isValidElement(Se)?Se:E.createElement("span",null,Se),oe)},{className:R,prefixCls:D,inputPrefixCls:$,size:H}=t,Z=exe(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:X}=E.useContext(hi),Q=X("input",$),G=X("input-password",D),K=o&&S(G),Y=Gt(G,R,{[`${G}-${H}`]:!!H}),re=Object.assign(Object.assign({},Zs(Z,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:Y,prefixCls:Q,suffix:K});return H&&(re.size=H),E.createElement(Oz,Object.assign({ref:Cu(n,v)},re))}),ixe=nxe;var oxe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const axe=E.forwardRef((t,n)=>{const{prefixCls:o,inputPrefixCls:s,className:c,size:m,suffix:v,enterButton:d=!1,addonAfter:C,loading:S,disabled:R,onSearch:D,onChange:$,onCompositionStart:H,onCompositionEnd:Z}=t,X=oxe(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:Q,direction:G}=E.useContext(hi),K=E.useRef(!1),Y=Q("input-search",o),re=Q("input",s),{compactSize:fe}=fw(Y,G),me=Gh(qe=>{var rt;return(rt=m??fe)!==null&&rt!==void 0?rt:qe}),pe=E.useRef(null),xe=qe=>{qe&&qe.target&&qe.type==="click"&&D&&D(qe.target.value,qe,{source:"clear"}),$&&$(qe)},Se=qe=>{var rt;document.activeElement===((rt=pe.current)===null||rt===void 0?void 0:rt.input)&&qe.preventDefault()},oe=qe=>{var rt,Qe;D&&D((Qe=(rt=pe.current)===null||rt===void 0?void 0:rt.input)===null||Qe===void 0?void 0:Qe.value,qe,{source:"input"})},Re=qe=>{K.current||S||oe(qe)},Ve=typeof d=="boolean"?E.createElement(pz,null):null,Oe=`${Y}-button`;let _e;const Fe=d||{},Le=Fe.type&&Fe.type.__ANT_BUTTON===!0;Le||Fe.type==="button"?_e=cc(Fe,Object.assign({onMouseDown:Se,onClick:qe=>{var rt,Qe;(Qe=(rt=Fe?.props)===null||rt===void 0?void 0:rt.onClick)===null||Qe===void 0||Qe.call(rt,qe),oe(qe)},key:"enterButton"},Le?{className:Oe,size:me}:{})):_e=E.createElement($m,{className:Oe,type:d?"primary":void 0,size:me,disabled:R,key:"enterButton",onMouseDown:Se,onClick:oe,loading:S,icon:Ve},d),C&&(_e=[_e,cc(C,{key:"addonAfter"})]);const Me=Gt(Y,{[`${Y}-rtl`]:G==="rtl",[`${Y}-${me}`]:!!me,[`${Y}-with-button`]:!!d},c),Ce=qe=>{K.current=!0,H?.(qe)},Ye=qe=>{K.current=!1,Z?.(qe)};return E.createElement(Oz,Object.assign({ref:Cu(pe,n),onPressEnter:Re},X,{size:me,onCompositionStart:Ce,onCompositionEnd:Ye,prefixCls:re,addonAfter:_e,suffix:v,onChange:xe,className:Me,disabled:R}))}),sxe=axe;var lxe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,cxe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],QP={},Hu;function uxe(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(n&&QP[o])return QP[o];var s=window.getComputedStyle(t),c=s.getPropertyValue("box-sizing")||s.getPropertyValue("-moz-box-sizing")||s.getPropertyValue("-webkit-box-sizing"),m=parseFloat(s.getPropertyValue("padding-bottom"))+parseFloat(s.getPropertyValue("padding-top")),v=parseFloat(s.getPropertyValue("border-bottom-width"))+parseFloat(s.getPropertyValue("border-top-width")),d=cxe.map(function(S){return"".concat(S,":").concat(s.getPropertyValue(S))}).join(";"),C={sizingStyle:d,paddingSize:m,borderSize:v,boxSizing:c};return n&&o&&(QP[o]=C),C}function hxe(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Hu||(Hu=document.createElement("textarea"),Hu.setAttribute("tab-index","-1"),Hu.setAttribute("aria-hidden","true"),document.body.appendChild(Hu)),t.getAttribute("wrap")?Hu.setAttribute("wrap",t.getAttribute("wrap")):Hu.removeAttribute("wrap");var c=uxe(t,n),m=c.paddingSize,v=c.borderSize,d=c.boxSizing,C=c.sizingStyle;Hu.setAttribute("style","".concat(C,";").concat(lxe)),Hu.value=t.value||t.placeholder||"";var S=void 0,R=void 0,D,$=Hu.scrollHeight;if(d==="border-box"?$+=v:d==="content-box"&&($-=m),o!==null||s!==null){Hu.value=" ";var H=Hu.scrollHeight-m;o!==null&&(S=H*o,d==="border-box"&&(S=S+m+v),$=Math.max(S,$)),s!==null&&(R=H*s,d==="border-box"&&(R=R+m+v),D=$>R?"":"hidden",$=Math.min(R,$))}var Z={height:$,overflowY:D,resize:"none"};return S&&(Z.minHeight=S),R&&(Z.maxHeight=R),Z}var dxe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],eA=0,tA=1,rA=2,fxe=E.forwardRef(function(t,n){var o=t,s=o.prefixCls;o.onPressEnter;var c=o.defaultValue,m=o.value,v=o.autoSize,d=o.onResize,C=o.className,S=o.style,R=o.disabled,D=o.onChange;o.onInternalAutoSize;var $=xi(o,dxe),H=ul(c,{value:m,postState:function(jt){return jt??""}}),Z=nr(H,2),X=Z[0],Q=Z[1],G=function(jt){Q(jt.target.value),D?.(jt)},K=E.useRef();E.useImperativeHandle(n,function(){return{textArea:K.current}});var Y=E.useMemo(function(){return v&&Ei(v)==="object"?[v.minRows,v.maxRows]:[]},[v]),re=nr(Y,2),fe=re[0],me=re[1],pe=!!v,xe=function(){try{if(document.activeElement===K.current){var jt=K.current,Ot=jt.selectionStart,Tt=jt.selectionEnd,ct=jt.scrollTop;K.current.setSelectionRange(Ot,Tt),K.current.scrollTop=ct}}catch{}},Se=E.useState(rA),oe=nr(Se,2),Re=oe[0],Ve=oe[1],Oe=E.useState(),_e=nr(Oe,2),Fe=_e[0],Le=_e[1],Me=function(){Ve(eA)};zo(function(){pe&&Me()},[m,fe,me,pe]),zo(function(){if(Re===eA)Ve(tA);else if(Re===tA){var St=hxe(K.current,!1,fe,me);Ve(rA),Le(St)}else xe()},[Re]);var Ce=E.useRef(),Ye=function(){Do.cancel(Ce.current)},qe=function(jt){Re===rA&&(d?.(jt),v&&(Ye(),Ce.current=Do(function(){Me()})))};E.useEffect(function(){return Ye},[]);var rt=pe?Fe:null,Qe=yt(yt({},S),rt);return(Re===eA||Re===tA)&&(Qe.overflowY="hidden",Qe.overflowX="hidden"),E.createElement(nh,{onResize:qe,disabled:!(v||d)},E.createElement("textarea",Mr({},$,{ref:K,style:Qe,className:Gt(s,C,xt({},"".concat(s,"-disabled"),R)),disabled:R,value:X,onChange:G})))}),pxe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"],mxe=rr.forwardRef(function(t,n){var o,s,c=t.defaultValue,m=t.value,v=t.onFocus,d=t.onBlur,C=t.onChange,S=t.allowClear,R=t.maxLength,D=t.onCompositionStart,$=t.onCompositionEnd,H=t.suffix,Z=t.prefixCls,X=Z===void 0?"rc-textarea":Z,Q=t.classes,G=t.showCount,K=t.count,Y=t.className,re=t.style,fe=t.disabled,me=t.hidden,pe=t.classNames,xe=t.styles,Se=t.onResize,oe=xi(t,pxe),Re=ul(c,{value:m,defaultValue:c}),Ve=nr(Re,2),Oe=Ve[0],_e=Ve[1],Fe=Oe==null?"":String(Oe),Le=rr.useState(!1),Me=nr(Le,2),Ce=Me[0],Ye=Me[1],qe=rr.useRef(!1),rt=rr.useState(null),Qe=nr(rt,2),St=Qe[0],jt=Qe[1],Ot=E.useRef(null),Tt=function(){var dr;return(dr=Ot.current)===null||dr===void 0?void 0:dr.textArea},ct=function(){Tt().focus()};E.useImperativeHandle(n,function(){return{resizableTextArea:Ot.current,focus:ct,blur:function(){Tt().blur()}}}),E.useEffect(function(){Ye(function(yr){return!fe&&yr})},[fe]);var Ct=rr.useState(null),kt=nr(Ct,2),zt=kt[0],Nt=kt[1];rr.useEffect(function(){if(zt){var yr;(yr=Tt()).setSelectionRange.apply(yr,Pr(zt))}},[zt]);var Rt=EW(K,G),Pt=(o=Rt.max)!==null&&o!==void 0?o:R,Dt=Number(Pt)>0,Ut=Rt.strategy(Fe),sr=!!Pt&&Ut>Pt,vt=function(dr,Wt){var Wr=Wt;!qe.current&&Rt.exceedFormatter&&Rt.max&&Rt.strategy(Wt)>Rt.max&&(Wr=Rt.exceedFormatter(Wt,{max:Rt.max}),Wt!==Wr&&Nt([Tt().selectionStart||0,Tt().selectionEnd||0])),_e(Wr),eI(dr.currentTarget,dr,C,Wr)},De=function(dr){qe.current=!0,D?.(dr)},ze=function(dr){qe.current=!1,vt(dr,dr.currentTarget.value),$?.(dr)},ve=function(dr){vt(dr,dr.target.value)},pt=function(dr){var Wt=oe.onPressEnter,Wr=oe.onKeyDown;dr.key==="Enter"&&Wt&&Wt(dr),Wr?.(dr)},gt=function(dr){Ye(!0),v?.(dr)},$t=function(dr){Ye(!1),d?.(dr)},It=function(dr){_e(""),ct(),eI(Tt(),dr,C)},Mt=H,Qt;Rt.show&&(Rt.showFormatter?Qt=Rt.showFormatter({value:Fe,count:Ut,maxLength:Pt}):Qt="".concat(Ut).concat(Dt?" / ".concat(Pt):""),Mt=rr.createElement(rr.Fragment,null,Mt,rr.createElement("span",{className:Gt("".concat(X,"-data-count"),pe?.count),style:xe?.count},Qt)));var wr=function(dr){var Wt;Se?.(dr),(Wt=Tt())!==null&&Wt!==void 0&&Wt.style.height&&jt(!0)},br=!oe.autoSize&&!G&&!S,tn=rr.createElement(CW,{value:Fe,allowClear:S,handleReset:It,suffix:Mt,prefixCls:X,classes:{affixWrapper:Gt(Q?.affixWrapper,(s={},xt(s,"".concat(X,"-show-count"),G),xt(s,"".concat(X,"-textarea-allow-clear"),S),s))},disabled:fe,focused:Ce,className:Gt(Y,sr&&"".concat(X,"-out-of-range")),style:yt(yt({},re),St&&!br?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Qt=="string"?Qt:void 0}},hidden:me,inputElement:rr.createElement(fxe,Mr({},oe,{maxLength:R,onKeyDown:pt,onChange:ve,onFocus:gt,onBlur:$t,onCompositionStart:De,onCompositionEnd:ze,className:Gt(pe?.textarea),style:yt(yt({},xe?.textarea),{},{resize:re?.resize}),disabled:fe,prefixCls:X,onResize:wr,ref:Ot}))});return tn}),gxe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const yxe=E.forwardRef((t,n)=>{var o;const{prefixCls:s,bordered:c=!0,size:m,disabled:v,status:d,allowClear:C,classNames:S,rootClassName:R,className:D}=t,$=gxe(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className"]),{getPrefixCls:H,direction:Z}=E.useContext(hi),X=Gh(m),Q=E.useContext(Gm),G=v??Q,{status:K,hasFeedback:Y,feedbackIcon:re}=E.useContext(bu),fe=dz(K,d),me=E.useRef(null);E.useImperativeHandle(n,()=>{var Oe;return{resizableTextArea:(Oe=me.current)===null||Oe===void 0?void 0:Oe.resizableTextArea,focus:_e=>{var Fe,Le;H1e((Le=(Fe=me.current)===null||Fe===void 0?void 0:Fe.resizableTextArea)===null||Le===void 0?void 0:Le.textArea,_e)},blur:()=>{var _e;return(_e=me.current)===null||_e===void 0?void 0:_e.blur()}}});const pe=H("input",s);let xe;typeof C=="object"&&C?.clearIcon?xe=C:C&&(xe={clearIcon:E.createElement(S0,null)});const Se=Pl(pe),[oe,Re,Ve]=Pz(pe,Se);return oe(E.createElement(mxe,Object.assign({},$,{disabled:G,allowClear:xe,className:Gt(Ve,Se,D,R),classes:{affixWrapper:Gt(`${pe}-textarea-affix-wrapper`,{[`${pe}-affix-wrapper-rtl`]:Z==="rtl",[`${pe}-affix-wrapper-borderless`]:!c,[`${pe}-affix-wrapper-sm`]:X==="small",[`${pe}-affix-wrapper-lg`]:X==="large",[`${pe}-textarea-show-count`]:t.showCount||((o=t.count)===null||o===void 0?void 0:o.show)},N_(`${pe}-affix-wrapper`,fe),Re)},classNames:Object.assign(Object.assign({},S),{textarea:Gt({[`${pe}-borderless`]:!c,[`${pe}-sm`]:X==="small",[`${pe}-lg`]:X==="large"},N_(pe,fe),Re,S?.textarea)}),prefixCls:pe,suffix:Y&&E.createElement("span",{className:`${pe}-textarea-suffix`},re),ref:me})))}),vxe=yxe,Sw=Oz;Sw.Group=j1e;Sw.Search=sxe;Sw.TextArea=vxe;Sw.Password=ixe;const _xe=Sw;function UN(t){return["small","middle","large"].includes(t)}function HN(t){return t?typeof t=="number"&&!Number.isNaN(t):!1}const IW=rr.createContext({latestIndex:0}),xxe=IW.Provider,bxe=t=>{let{className:n,index:o,children:s,split:c,style:m}=t;const{latestIndex:v}=E.useContext(IW);return s==null?null:E.createElement(E.Fragment,null,E.createElement("div",{className:n,style:m},s),o<v&&c&&E.createElement("span",{className:`${n}-split`},c))},wxe=bxe;var Sxe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Cxe=E.forwardRef((t,n)=>{var o,s;const{getPrefixCls:c,space:m,direction:v}=E.useContext(hi),{size:d=m?.size||"small",align:C,className:S,rootClassName:R,children:D,direction:$="horizontal",prefixCls:H,split:Z,style:X,wrap:Q=!1,classNames:G,styles:K}=t,Y=Sxe(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[re,fe]=Array.isArray(d)?d:[d,d],me=UN(fe),pe=UN(re),xe=HN(fe),Se=HN(re),oe=$c(D,{keepEmpty:!0}),Re=C===void 0&&$==="horizontal"?"center":C,Ve=c("space",H),[Oe,_e,Fe]=yG(Ve),Le=Gt(Ve,m?.className,_e,`${Ve}-${$}`,{[`${Ve}-rtl`]:v==="rtl",[`${Ve}-align-${Re}`]:Re,[`${Ve}-gap-row-${fe}`]:me,[`${Ve}-gap-col-${re}`]:pe},S,R,Fe),Me=Gt(`${Ve}-item`,(o=G?.item)!==null&&o!==void 0?o:(s=m?.classNames)===null||s===void 0?void 0:s.item);let Ce=0;const Ye=oe.map((Qe,St)=>{var jt,Ot;Qe!=null&&(Ce=St);const Tt=Qe&&Qe.key||`${Me}-${St}`;return E.createElement(wxe,{className:Me,key:Tt,index:St,split:Z,style:(jt=K?.item)!==null&&jt!==void 0?jt:(Ot=m?.styles)===null||Ot===void 0?void 0:Ot.item},Qe)}),qe=E.useMemo(()=>({latestIndex:Ce}),[Ce]);if(oe.length===0)return null;const rt={};return Q&&(rt.flexWrap="wrap"),!pe&&Se&&(rt.columnGap=re),!me&&xe&&(rt.rowGap=fe),Oe(E.createElement("div",Object.assign({ref:n,className:Le,style:Object.assign(Object.assign(Object.assign({},rt),m?.style),X)},Y),E.createElement(xxe,{value:qe},Ye)))}),MW=Cxe;MW.Compact=_fe;const Exe=MW;var Txe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const PW=t=>{const{getPopupContainer:n,getPrefixCls:o,direction:s}=E.useContext(hi),{prefixCls:c,type:m="default",danger:v,disabled:d,loading:C,onClick:S,htmlType:R,children:D,className:$,menu:H,arrow:Z,autoFocus:X,overlay:Q,trigger:G,align:K,open:Y,onOpenChange:re,placement:fe,getPopupContainer:me,href:pe,icon:xe=E.createElement(eW,null),title:Se,buttonsRender:oe=Ct=>Ct,mouseEnterDelay:Re,mouseLeaveDelay:Ve,overlayClassName:Oe,overlayStyle:_e,destroyPopupOnHide:Fe,dropdownRender:Le}=t,Me=Txe(t,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),Ce=o("dropdown",c),Ye=`${Ce}-button`,qe={menu:H,arrow:Z,autoFocus:X,align:K,disabled:d,trigger:d?[]:G,onOpenChange:re,getPopupContainer:me||n,mouseEnterDelay:Re,mouseLeaveDelay:Ve,overlayClassName:Oe,overlayStyle:_e,destroyPopupOnHide:Fe,dropdownRender:Le},{compactSize:rt,compactItemClassnames:Qe}=fw(Ce,s),St=Gt(Ye,Qe,$);"overlay"in t&&(qe.overlay=Q),"open"in t&&(qe.open=Y),"placement"in t?qe.placement=fe:qe.placement=s==="rtl"?"bottomLeft":"bottomRight";const jt=E.createElement($m,{type:m,danger:v,disabled:d,loading:C,onClick:S,htmlType:R,href:pe,title:Se},D),Ot=E.createElement($m,{type:m,danger:v,icon:xe}),[Tt,ct]=oe([jt,Ot]);return E.createElement(Exe.Compact,Object.assign({className:St,size:rt,block:!0},Me),Tt,E.createElement(rW,Object.assign({},qe),ct))};PW.__ANT_BUTTON=!0;const Ixe=PW,AW=rW;AW.Button=Ixe;const zz=AW;function tI(t){const[n,o]=E.useState(t);return E.useEffect(()=>{const s=setTimeout(()=>{o(t)},t.length?0:10);return()=>{clearTimeout(s)}},[t]),n}const Mxe=t=>{const{componentCls:n}=t,o=`${n}-show-help`,s=`${n}-show-help-item`;return{[o]:{transition:`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[s]:{overflow:"hidden",transition:`height ${t.motionDurationSlow} ${t.motionEaseInOut},
                     opacity ${t.motionDurationSlow} ${t.motionEaseInOut},
                     transform ${t.motionDurationSlow} ${t.motionEaseInOut} !important`,[`&${s}-appear, &${s}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${s}-leave-active`]:{transform:"translateY(-5px)"}}}}},Pxe=t=>({legend:{display:"block",width:"100%",marginBottom:t.marginLG,padding:0,color:t.colorTextDescription,fontSize:t.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},label:{fontSize:t.fontSize},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${Xt(t.controlOutlineWidth)} ${t.controlOutline}`},output:{display:"block",paddingTop:15,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight}}),GN=(t,n)=>{const{formItemCls:o}=t;return{[o]:{[`${o}-label > label`]:{height:n},[`${o}-control-input`]:{minHeight:n}}}},Axe=t=>{const{componentCls:n}=t;return{[t.componentCls]:Object.assign(Object.assign(Object.assign({},Oa(t)),Pxe(t)),{[`${n}-text`]:{display:"inline-block",paddingInlineEnd:t.paddingSM},"&-small":Object.assign({},GN(t,t.controlHeightSM)),"&-large":Object.assign({},GN(t,t.controlHeightLG))})}},Rxe=t=>{const{formItemCls:n,iconCls:o,componentCls:s,rootPrefixCls:c,labelRequiredMarkColor:m,labelColor:v,labelFontSize:d,labelHeight:C,labelColonMarginInlineStart:S,labelColonMarginInlineEnd:R,itemMarginBottom:D}=t;return{[n]:Object.assign(Object.assign({},Oa(t)),{marginBottom:D,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden.${c}-row`]:{display:"none"},"&-has-warning":{[`${n}-split`]:{color:t.colorError}},"&-has-error":{[`${n}-split`]:{color:t.colorWarning}},[`${n}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:t.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:C,color:v,fontSize:d,[`> ${o}`]:{fontSize:t.fontSize,verticalAlign:"top"},[`&${n}-required:not(${n}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:t.marginXXS,color:m,fontSize:t.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${s}-hide-required-mark &`]:{display:"none"}},[`${n}-optional`]:{display:"inline-block",marginInlineStart:t.marginXXS,color:t.colorTextDescription,[`${s}-hide-required-mark &`]:{display:"none"}},[`${n}-tooltip`]:{color:t.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:t.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:S,marginInlineEnd:R},[`&${n}-no-colon::after`]:{content:'"\\a0"'}}},[`${n}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${c}-col-'"]):not([class*="' ${c}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:t.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[n]:{"&-explain, &-extra":{clear:"both",color:t.colorTextDescription,fontSize:t.fontSize,lineHeight:t.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:t.controlHeightSM,transition:`color ${t.motionDurationMid} ${t.motionEaseOut}`},"&-explain":{"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning}}},[`&-with-help ${n}-explain`]:{height:"auto",opacity:1},[`${n}-feedback-icon`]:{fontSize:t.fontSize,textAlign:"center",visibility:"visible",animationName:az,animationDuration:t.motionDurationMid,animationTimingFunction:t.motionEaseOutBack,pointerEvents:"none","&-success":{color:t.colorSuccess},"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning},"&-validating":{color:t.colorPrimary}}})}},kxe=t=>{const{componentCls:n,formItemCls:o}=t;return{[`${n}-horizontal`]:{[`${o}-label`]:{flexGrow:0},[`${o}-control`]:{flex:"1 1 0",minWidth:0},[`${o}-label[class$='-24'], ${o}-label[class*='-24 ']`]:{[`& + ${o}-control`]:{minWidth:"unset"}}}}},Oxe=t=>{const{componentCls:n,formItemCls:o}=t;return{[`${n}-inline`]:{display:"flex",flexWrap:"wrap",[o]:{flex:"none",marginInlineEnd:t.margin,marginBottom:0,"&-row":{flexWrap:"nowrap"},[`> ${o}-label,
        > ${o}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${o}-label`]:{flex:"none"},[`${n}-text`]:{display:"inline-block"},[`${o}-has-feedback`]:{display:"inline-block"}}}}},f_=t=>({padding:t.verticalLabelPadding,margin:t.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),zxe=t=>{const{componentCls:n,formItemCls:o,rootPrefixCls:s}=t;return{[`${o} ${o}-label`]:f_(t),[`${n}:not(${n}-inline)`]:{[o]:{flexWrap:"wrap",[`${o}-label, ${o}-control`]:{[`&:not([class*=" ${s}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},Dxe=t=>{const{componentCls:n,formItemCls:o,rootPrefixCls:s}=t;return{[`${n}-vertical`]:{[o]:{"&-row":{flexDirection:"column"},"&-label > label":{height:"auto"},[`${n}-item-control`]:{width:"100%"}}},[`${n}-vertical ${o}-label,
      .${s}-col-24${o}-label,
      .${s}-col-xl-24${o}-label`]:f_(t),[`@media (max-width: ${Xt(t.screenXSMax)})`]:[zxe(t),{[n]:{[`.${s}-col-xs-24${o}-label`]:f_(t)}}],[`@media (max-width: ${Xt(t.screenSMMax)})`]:{[n]:{[`.${s}-col-sm-24${o}-label`]:f_(t)}},[`@media (max-width: ${Xt(t.screenMDMax)})`]:{[n]:{[`.${s}-col-md-24${o}-label`]:f_(t)}},[`@media (max-width: ${Xt(t.screenLGMax)})`]:{[n]:{[`.${s}-col-lg-24${o}-label`]:f_(t)}}}},Lxe=t=>({labelRequiredMarkColor:t.colorError,labelColor:t.colorTextHeading,labelFontSize:t.fontSize,labelHeight:t.controlHeight,labelColonMarginInlineStart:t.marginXXS/2,labelColonMarginInlineEnd:t.marginXS,itemMarginBottom:t.marginLG,verticalLabelPadding:`0 0 ${t.paddingXS}px`,verticalLabelMargin:0}),RW=(t,n)=>Yi(t,{formItemCls:`${t.componentCls}-item`,rootPrefixCls:n}),Dz=os("Form",(t,n)=>{let{rootPrefixCls:o}=n;const s=RW(t,o);return[Axe(s),Rxe(s),Mxe(s),kxe(s),Oxe(s),Dxe(s),sz(s),az]},Lxe,{order:-1e3}),qN=[];function nA(t,n,o){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof t=="string"?t:`${n}-${s}`,error:t,errorStatus:o}}const $xe=t=>{let{help:n,helpStatus:o,errors:s=qN,warnings:c=qN,className:m,fieldId:v,onVisibleChanged:d}=t;const{prefixCls:C}=E.useContext(tz),S=`${C}-item-explain`,R=Pl(C),[D,$,H]=Dz(C,R),Z=E.useMemo(()=>VT(C),[C]),X=tI(s),Q=tI(c),G=E.useMemo(()=>n!=null?[nA(n,"help",o)]:[].concat(Pr(X.map((Y,re)=>nA(Y,"error","error",re))),Pr(Q.map((Y,re)=>nA(Y,"warning","warning",re)))),[n,o,X,Q]),K={};return v&&(K.id=`${v}_help`),D(E.createElement(Ud,{motionDeadline:Z.motionDeadline,motionName:`${C}-show-help`,visible:!!G.length,onVisibleChanged:d},Y=>{const{className:re,style:fe}=Y;return E.createElement("div",Object.assign({},K,{className:Gt(S,re,H,R,m,$),style:fe,role:"alert"}),E.createElement(Zhe,Object.assign({keys:G},VT(C),{motionName:`${C}-show-help-item`,component:!1}),me=>{const{key:pe,error:xe,errorStatus:Se,className:oe,style:Re}=me;return E.createElement("div",{key:pe,className:Gt(oe,{[`${S}-${Se}`]:Se}),style:Re},xe)}))}))},kW=$xe,Bxe=["parentNode"],Fxe="form_item";function fb(t){return t===void 0||t===!1?[]:Array.isArray(t)?t:[t]}function OW(t,n){if(!t.length)return;const o=t.join("_");return n?`${n}_${o}`:Bxe.includes(o)?`${Fxe}_${o}`:o}function zW(t,n,o,s,c,m){let v=s;return m!==void 0?v=m:o.validating?v="validating":t.length?v="error":n.length?v="warning":(o.touched||c&&o.validated)&&(v="success"),v}function WN(t){return fb(t).join("_")}function DW(t){const[n]=iM(),o=E.useRef({}),s=E.useMemo(()=>t??Object.assign(Object.assign({},n),{__INTERNAL__:{itemRef:c=>m=>{const v=WN(c);m?o.current[v]=m:delete o.current[v]}},scrollToField:function(c){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=fb(c),d=OW(v,s.__INTERNAL__.name),C=d?document.getElementById(d):null;C&&dG(C,Object.assign({scrollMode:"if-needed",block:"nearest"},m))},getFieldInstance:c=>{const m=WN(c);return o.current[m]}}),[t,n]);return[s]}var Nxe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const jxe=(t,n)=>{const o=E.useContext(Gm),{getPrefixCls:s,direction:c,form:m}=E.useContext(hi),{prefixCls:v,className:d,rootClassName:C,size:S,disabled:R=o,form:D,colon:$,labelAlign:H,labelWrap:Z,labelCol:X,wrapperCol:Q,hideRequiredMark:G,layout:K="horizontal",scrollToFirstError:Y,requiredMark:re,onFinishFailed:fe,name:me,style:pe,feedbackIcons:xe}=t,Se=Nxe(t,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons"]),oe=Gh(S),Re=E.useContext(EH),Ve=E.useMemo(()=>re!==void 0?re:G?!1:m&&m.requiredMark!==void 0?m.requiredMark:!0,[G,re,m]),Oe=$??m?.colon,_e=s("form",v),Fe=Pl(_e),[Le,Me,Ce]=Dz(_e,Fe),Ye=Gt(_e,`${_e}-${K}`,{[`${_e}-hide-required-mark`]:Ve===!1,[`${_e}-rtl`]:c==="rtl",[`${_e}-${oe}`]:oe},Ce,Fe,Me,m?.className,d,C),[qe]=DW(D),{__INTERNAL__:rt}=qe;rt.name=me;const Qe=E.useMemo(()=>({name:me,labelAlign:H,labelCol:X,labelWrap:Z,wrapperCol:Q,vertical:K==="vertical",colon:Oe,requiredMark:Ve,itemRef:rt.itemRef,form:qe,feedbackIcons:xe}),[me,H,X,Q,K,Oe,Ve,qe,xe]);E.useImperativeHandle(n,()=>qe);const St=(Ot,Tt)=>{if(Ot){let ct={block:"nearest"};typeof Ot=="object"&&(ct=Ot),qe.scrollToField(Tt,ct)}},jt=Ot=>{if(fe?.(Ot),Ot.errorFields.length){const Tt=Ot.errorFields[0].name;if(Y!==void 0){St(Y,Tt);return}m&&m.scrollToFirstError!==void 0&&St(m.scrollToFirstError,Tt)}};return Le(E.createElement(FO,{disabled:R},E.createElement(lw.Provider,{value:oe},E.createElement(jG,{validateMessages:Re},E.createElement(Gf.Provider,{value:Qe},E.createElement(My,Object.assign({id:me},Se,{name:me,onFinishFailed:jt,form:qe,style:Object.assign(Object.assign({},m?.style),pe),className:Ye})))))))},Vxe=E.forwardRef(jxe);function Uxe(t){if(typeof t=="function")return t;const n=$c(t);return n.length<=1?n[0]:n}const LW=()=>{const{status:t,errors:n=[],warnings:o=[]}=E.useContext(bu);return{status:t,errors:n,warnings:o}};LW.Context=bu;const Hxe=LW;function Gxe(t){const[n,o]=E.useState(t),s=E.useRef(null),c=E.useRef([]),m=E.useRef(!1);E.useEffect(()=>(m.current=!1,()=>{m.current=!0,Do.cancel(s.current),s.current=null}),[]);function v(d){m.current||(s.current===null&&(c.current=[],s.current=Do(()=>{s.current=null,o(C=>{let S=C;return c.current.forEach(R=>{S=R(S)}),S})})),c.current.push(d))}return[n,v]}function qxe(){const{itemRef:t}=E.useContext(Gf),n=E.useRef({});function o(s,c){const m=c&&typeof c=="object"&&c.ref,v=s.join("_");return(n.current.name!==v||n.current.originRef!==m)&&(n.current.name=v,n.current.originRef=m,n.current.ref=Cu(t(s),m)),n.current.ref}return o}const Wxe=t=>{const{formItemCls:n}=t;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${n}-control`]:{display:"flex"}}}},Kxe=b0(["Form","item-item"],(t,n)=>{let{rootPrefixCls:o}=n;const s=RW(t,o);return[Wxe(s)]}),Zxe=t=>{const{prefixCls:n,status:o,wrapperCol:s,children:c,errors:m,warnings:v,_internalItemRender:d,extra:C,help:S,fieldId:R,marginBottom:D,onErrorVisibleChanged:$}=t,H=`${n}-item`,Z=E.useContext(Gf),X=s||Z.wrapperCol||{},Q=Gt(`${H}-control`,X.className),G=E.useMemo(()=>Object.assign({},Z),[Z]);delete G.labelCol,delete G.wrapperCol;const K=E.createElement("div",{className:`${H}-control-input`},E.createElement("div",{className:`${H}-control-input-content`},c)),Y=E.useMemo(()=>({prefixCls:n,status:o}),[n,o]),re=D!==null||m.length||v.length?E.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},E.createElement(tz.Provider,{value:Y},E.createElement(kW,{fieldId:R,errors:m,warnings:v,help:S,helpStatus:o,className:`${H}-explain-connected`,onVisibleChanged:$})),!!D&&E.createElement("div",{style:{width:0,height:D}})):null,fe={};R&&(fe.id=`${R}_extra`);const me=C?E.createElement("div",Object.assign({},fe,{className:`${H}-extra`}),C):null,pe=d&&d.mark==="pro_table_render"&&d.render?d.render(t,{input:K,errorList:re,extra:me}):E.createElement(E.Fragment,null,K,re,me);return E.createElement(Gf.Provider,{value:G},E.createElement(QT,Object.assign({},X,{className:Q}),pe),E.createElement(Kxe,{prefixCls:n}))},Xxe=Zxe;var Yxe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const Jxe=Yxe;var Qxe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Jxe}))};const ebe=E.forwardRef(Qxe);var tbe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function rbe(t){return t?typeof t=="object"&&!E.isValidElement(t)?t:{title:t}:null}const nbe=t=>{let{prefixCls:n,label:o,htmlFor:s,labelCol:c,labelAlign:m,colon:v,required:d,requiredMark:C,tooltip:S}=t;var R;const[D]=x0("Form"),{vertical:$,labelAlign:H,labelCol:Z,labelWrap:X,colon:Q}=E.useContext(Gf);if(!o)return null;const G=c||Z||{},K=m||H,Y=`${n}-item-label`,re=Gt(Y,K==="left"&&`${Y}-left`,G.className,{[`${Y}-wrap`]:!!X});let fe=o;const me=v===!0||Q!==!1&&v!==!1;me&&!$&&typeof o=="string"&&o.trim()!==""&&(fe=o.replace(/[:|：]\s*$/,""));const xe=rbe(S);if(xe){const{icon:Ve=E.createElement(ebe,null)}=xe,Oe=tbe(xe,["icon"]),_e=E.createElement(uM,Object.assign({},Oe),E.cloneElement(Ve,{className:`${n}-item-tooltip`,title:"",onClick:Fe=>{Fe.preventDefault()},tabIndex:null}));fe=E.createElement(E.Fragment,null,fe,_e)}const Se=C==="optional",oe=typeof C=="function";oe?fe=C(fe,{required:!!d}):Se&&!d&&(fe=E.createElement(E.Fragment,null,fe,E.createElement("span",{className:`${n}-item-optional`,title:""},D?.optional||((R=Uf.Form)===null||R===void 0?void 0:R.optional))));const Re=Gt({[`${n}-item-required`]:d,[`${n}-item-required-mark-optional`]:Se||oe,[`${n}-item-no-colon`]:!me});return E.createElement(QT,Object.assign({},G,{className:re}),E.createElement("label",{htmlFor:s,className:Re,title:typeof o=="string"?o:""},fe))},ibe=nbe,obe={success:HO,warning:GO,error:S0,validating:YI};function $W(t){let{children:n,errors:o,warnings:s,hasFeedback:c,validateStatus:m,prefixCls:v,meta:d,noStyle:C}=t;const S=`${v}-item`,{feedbackIcons:R}=E.useContext(Gf),D=zW(o,s,d,null,!!c,m),{isFormItemInput:$,status:H,hasFeedback:Z,feedbackIcon:X}=E.useContext(bu),Q=E.useMemo(()=>{var G;let K;if(c){const re=c!==!0&&c.icons||R,fe=D&&((G=re?.({status:D,errors:o,warnings:s}))===null||G===void 0?void 0:G[D]),me=D&&obe[D];K=fe!==!1&&me?E.createElement("span",{className:Gt(`${S}-feedback-icon`,`${S}-feedback-icon-${D}`)},fe||E.createElement(me,null)):null}const Y={status:D||"",errors:o,warnings:s,hasFeedback:!!c,feedbackIcon:K,isFormItemInput:!0};return C&&(Y.status=(D??H)||"",Y.isFormItemInput=$,Y.hasFeedback=!!(c??Z),Y.feedbackIcon=c!==void 0?Y.feedbackIcon:X),Y},[D,c,C,$,H]);return E.createElement(bu.Provider,{value:Q},n)}var abe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function sbe(t){const{prefixCls:n,className:o,rootClassName:s,style:c,help:m,errors:v,warnings:d,validateStatus:C,meta:S,hasFeedback:R,hidden:D,children:$,fieldId:H,required:Z,isRequired:X,onSubItemMetaChange:Q}=t,G=abe(t,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange"]),K=`${n}-item`,{requiredMark:Y}=E.useContext(Gf),re=E.useRef(null),fe=tI(v),me=tI(d),pe=m!=null,xe=!!(pe||v.length||d.length),Se=!!re.current&&dw(re.current),[oe,Re]=E.useState(null);zo(()=>{if(xe&&re.current){const Le=getComputedStyle(re.current);Re(parseInt(Le.marginBottom,10))}},[xe,Se]);const Ve=Le=>{Le||Re(null)},_e=function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const Me=Le?fe:S.errors,Ce=Le?me:S.warnings;return zW(Me,Ce,S,"",!!R,C)}(),Fe=Gt(K,o,s,{[`${K}-with-help`]:pe||fe.length||me.length,[`${K}-has-feedback`]:_e&&R,[`${K}-has-success`]:_e==="success",[`${K}-has-warning`]:_e==="warning",[`${K}-has-error`]:_e==="error",[`${K}-is-validating`]:_e==="validating",[`${K}-hidden`]:D});return E.createElement("div",{className:Fe,style:c,ref:re},E.createElement(kz,Object.assign({className:`${K}-row`},Zs(G,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),E.createElement(ibe,Object.assign({htmlFor:H},t,{requiredMark:Y,required:Z??X,prefixCls:n})),E.createElement(Xxe,Object.assign({},t,S,{errors:fe,warnings:me,prefixCls:n,status:_e,help:m,marginBottom:oe,onErrorVisibleChanged:Ve}),E.createElement(NG.Provider,{value:Q},E.createElement($W,{prefixCls:n,meta:S,errors:S.errors,warnings:S.warnings,hasFeedback:R,validateStatus:_e},$)))),!!oe&&E.createElement("div",{className:`${K}-margin-offset`,style:{marginBottom:-oe}}))}const lbe="__SPLIT__";function cbe(t,n){const o=Object.keys(t),s=Object.keys(n);return o.length===s.length&&o.every(c=>{const m=t[c],v=n[c];return m===v||typeof m=="function"||typeof v=="function"})}const ube=E.memo(t=>{let{children:n}=t;return n},(t,n)=>cbe(t.control,n.control)&&t.update===n.update&&t.childProps.length===n.childProps.length&&t.childProps.every((o,s)=>o===n.childProps[s]));function KN(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function hbe(t){const{name:n,noStyle:o,className:s,dependencies:c,prefixCls:m,shouldUpdate:v,rules:d,children:C,required:S,label:R,messageVariables:D,trigger:$="onChange",validateTrigger:H,hidden:Z,help:X}=t,{getPrefixCls:Q}=E.useContext(hi),{name:G}=E.useContext(Gf),K=Uxe(C),Y=typeof K=="function",re=E.useContext(NG),{validateTrigger:fe}=E.useContext(Bm),me=H!==void 0?H:fe,pe=n!=null,xe=Q("form",m),Se=Pl(xe),[oe,Re,Ve]=Dz(xe,Se);Ty();const Oe=E.useContext(n0),_e=E.useRef(),[Fe,Le]=Gxe({}),[Me,Ce]=Am(()=>KN()),Ye=Tt=>{const ct=Oe?.getKey(Tt.name);if(Ce(Tt.destroy?KN():Tt,!0),o&&X!==!1&&re){let Ct=Tt.name;if(Tt.destroy)Ct=_e.current||Ct;else if(ct!==void 0){const[kt,zt]=ct;Ct=[kt].concat(Pr(zt)),_e.current=Ct}re(Tt,Ct)}},qe=(Tt,ct)=>{Le(Ct=>{const kt=Object.assign({},Ct),Nt=[].concat(Pr(Tt.name.slice(0,-1)),Pr(ct)).join(lbe);return Tt.destroy?delete kt[Nt]:kt[Nt]=Tt,kt})},[rt,Qe]=E.useMemo(()=>{const Tt=Pr(Me.errors),ct=Pr(Me.warnings);return Object.values(Fe).forEach(Ct=>{Tt.push.apply(Tt,Pr(Ct.errors||[])),ct.push.apply(ct,Pr(Ct.warnings||[]))}),[Tt,ct]},[Fe,Me.errors,Me.warnings]),St=qxe();function jt(Tt,ct,Ct){return o&&!Z?E.createElement($W,{prefixCls:xe,hasFeedback:t.hasFeedback,validateStatus:t.validateStatus,meta:Me,errors:rt,warnings:Qe,noStyle:!0},Tt):E.createElement(sbe,Object.assign({key:"row"},t,{className:Gt(s,Ve,Se,Re),prefixCls:xe,fieldId:ct,isRequired:Ct,errors:rt,warnings:Qe,meta:Me,onSubItemMetaChange:qe}),Tt)}if(!pe&&!Y&&!c)return oe(jt(K));let Ot={};return typeof R=="string"?Ot.label=R:n&&(Ot.label=String(n)),D&&(Ot=Object.assign(Object.assign({},Ot),D)),oe(E.createElement(nM,Object.assign({},t,{messageVariables:Ot,trigger:$,validateTrigger:me,onMetaChange:Ye}),(Tt,ct,Ct)=>{const kt=fb(n).length&&ct?ct.name:[],zt=OW(kt,G),Nt=S!==void 0?S:!!(d&&d.some(Dt=>{if(Dt&&typeof Dt=="object"&&Dt.required&&!Dt.warningOnly)return!0;if(typeof Dt=="function"){const Ut=Dt(Ct);return Ut&&Ut.required&&!Ut.warningOnly}return!1})),Rt=Object.assign({},Tt);let Pt=null;if(Array.isArray(K)&&pe)Pt=K;else if(!(Y&&(!(v||c)||pe))){if(!(c&&!Y&&!pe))if(xu(K)){const Dt=Object.assign(Object.assign({},K.props),Rt);if(Dt.id||(Dt.id=zt),X||rt.length>0||Qe.length>0||t.extra){const vt=[];(X||rt.length>0)&&vt.push(`${zt}_help`),t.extra&&vt.push(`${zt}_extra`),Dt["aria-describedby"]=vt.join(" ")}rt.length>0&&(Dt["aria-invalid"]="true"),Nt&&(Dt["aria-required"]="true"),jh(K)&&(Dt.ref=St(kt,K)),new Set([].concat(Pr(fb($)),Pr(fb(me)))).forEach(vt=>{Dt[vt]=function(){for(var De,ze,ve,pt,gt,$t=arguments.length,It=new Array($t),Mt=0;Mt<$t;Mt++)It[Mt]=arguments[Mt];(ve=Rt[vt])===null||ve===void 0||(De=ve).call.apply(De,[Rt].concat(It)),(gt=(pt=K.props)[vt])===null||gt===void 0||(ze=gt).call.apply(ze,[pt].concat(It))}});const sr=[Dt["aria-required"],Dt["aria-invalid"],Dt["aria-describedby"]];Pt=E.createElement(ube,{control:Rt,update:K,childProps:sr},cc(K,Dt))}else Y&&(v||c)&&!pe?Pt=K(Ct):Pt=K}return jt(Pt,zt,Nt)}))}const BW=hbe;BW.useStatus=Hxe;const dbe=BW;var fbe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const pbe=t=>{var{prefixCls:n,children:o}=t,s=fbe(t,["prefixCls","children"]);const{getPrefixCls:c}=E.useContext(hi),m=c("form",n),v=E.useMemo(()=>({prefixCls:m,status:"error"}),[m]);return E.createElement(JO,Object.assign({},s),(d,C,S)=>E.createElement(tz.Provider,{value:v},o(d.map(R=>Object.assign(Object.assign({},R),{fieldKey:R.key})),C,{errors:S.errors,warnings:S.warnings})))},mbe=pbe;function gbe(){const{form:t}=E.useContext(Gf);return t}const Zf=Vxe;Zf.Item=dbe;Zf.List=mbe;Zf.ErrorList=kW;Zf.useForm=DW;Zf.useFormInstance=gbe;Zf.useWatch=ez;Zf.Provider=jG;Zf.create=()=>{};function q3e(){var t=document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:n}}function ZN(t){var n=t.getBoundingClientRect(),o=document.documentElement;return{left:n.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||document.body.clientLeft||0),top:n.top+(window.pageYOffset||o.scrollTop)-(o.clientTop||document.body.clientTop||0)}}function yE(t,n,o,s){var c=AT.unstable_batchedUpdates?function(v){AT.unstable_batchedUpdates(o,v)}:o;return t!=null&&t.addEventListener&&t.addEventListener(n,c,s),{remove:function(){t!=null&&t.removeEventListener&&t.removeEventListener(n,c,s)}}}function ybe(t,n,o){return typeof o=="boolean"?o:t.length?!0:$c(n).some(c=>c.type===Xq)}const vbe=t=>{const{componentCls:n,bodyBg:o,lightSiderBg:s,lightTriggerBg:c,lightTriggerColor:m}=t;return{[`${n}-sider-light`]:{background:s,[`${n}-sider-trigger`]:{color:m,background:c},[`${n}-sider-zero-width-trigger`]:{color:m,background:c,border:`1px solid ${o}`,borderInlineStart:0}}}},_be=t=>{const{antCls:n,componentCls:o,colorText:s,triggerColor:c,footerBg:m,triggerBg:v,headerHeight:d,headerPadding:C,headerColor:S,footerPadding:R,triggerHeight:D,zeroTriggerHeight:$,zeroTriggerWidth:H,motionDurationMid:Z,motionDurationSlow:X,fontSize:Q,borderRadius:G,bodyBg:K,headerBg:Y,siderBg:re}=t;return{[o]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:K,"&, *":{boxSizing:"border-box"},[`&${o}-has-sider`]:{flexDirection:"row",[`> ${o}, > ${o}-content`]:{width:0}},[`${o}-header, &${o}-footer`]:{flex:"0 0 auto"},[`${o}-sider`]:{position:"relative",minWidth:0,background:re,transition:`all ${Z}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${n}-menu${n}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:D},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:D,color:c,lineHeight:Xt(D),textAlign:"center",background:v,cursor:"pointer",transition:`all ${Z}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:d,insetInlineEnd:t.calc(H).mul(-1).equal(),zIndex:1,width:H,height:$,color:c,fontSize:t.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:re,borderStartStartRadius:0,borderStartEndRadius:G,borderEndEndRadius:G,borderEndStartRadius:0,cursor:"pointer",transition:`background ${X} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${X}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:t.calc(H).mul(-1).equal(),borderStartStartRadius:G,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:G}}}}},vbe(t)),{"&-rtl":{direction:"rtl"}}),[`${o}-header`]:{height:d,padding:C,color:S,lineHeight:Xt(d),background:Y,[`${n}-menu`]:{lineHeight:"inherit"}},[`${o}-footer`]:{padding:R,color:s,fontSize:Q,background:m},[`${o}-content`]:{flex:"auto",minHeight:0}}},xbe=t=>{const{colorBgLayout:n,controlHeight:o,controlHeightLG:s,colorText:c,controlHeightSM:m,marginXXS:v,colorTextLightSolid:d,colorBgContainer:C}=t,S=s*1.25;return{colorBgHeader:"#001529",colorBgBody:n,colorBgTrigger:"#002140",bodyBg:n,headerBg:"#001529",headerHeight:o*2,headerPadding:`0 ${S}px`,headerColor:c,footerPadding:`${m}px ${S}px`,footerBg:n,siderBg:"#001529",triggerHeight:s+v*2,triggerBg:"#002140",triggerColor:d,zeroTriggerWidth:s,zeroTriggerHeight:s,lightSiderBg:C,lightTriggerBg:C,lightTriggerColor:c}},FW=os("Layout",t=>[_be(t)],xbe,{deprecatedTokens:[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]]});var NW=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function yM(t){let{suffixCls:n,tagName:o,displayName:s}=t;return c=>E.forwardRef((v,d)=>E.createElement(c,Object.assign({ref:d,suffixCls:n,tagName:o},v)))}const Lz=E.forwardRef((t,n)=>{const{prefixCls:o,suffixCls:s,className:c,tagName:m}=t,v=NW(t,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:d}=E.useContext(hi),C=d("layout",o),[S,R,D]=FW(C),$=s?`${C}-${s}`:C;return S(E.createElement(m,Object.assign({className:Gt(o||$,c,R,D),ref:n},v)))}),bbe=E.forwardRef((t,n)=>{const{direction:o}=E.useContext(hi),[s,c]=E.useState([]),{prefixCls:m,className:v,rootClassName:d,children:C,hasSider:S,tagName:R,style:D}=t,$=NW(t,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),H=Zs($,["suffixCls"]),{getPrefixCls:Z,layout:X}=E.useContext(hi),Q=Z("layout",m),G=ybe(s,C,S),[K,Y,re]=FW(Q),fe=Gt(Q,{[`${Q}-has-sider`]:G,[`${Q}-rtl`]:o==="rtl"},X?.className,v,d,Y,re),me=E.useMemo(()=>({siderHook:{addSider:pe=>{c(xe=>[].concat(Pr(xe),[pe]))},removeSider:pe=>{c(xe=>xe.filter(Se=>Se!==pe))}}}),[]);return K(E.createElement(Zq.Provider,{value:me},E.createElement(R,Object.assign({ref:n,className:fe,style:Object.assign(Object.assign({},X?.style),D)},H),C)))}),wbe=yM({tagName:"div",displayName:"Layout"})(bbe),Sbe=yM({suffixCls:"header",tagName:"header",displayName:"Header"})(Lz),Cbe=yM({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(Lz),Ebe=yM({suffixCls:"content",tagName:"main",displayName:"Content"})(Lz),Tbe=wbe,T0=Tbe;T0.Header=Sbe;T0.Footer=Cbe;T0.Content=Ebe;T0.Sider=Xq;T0._InternalSiderContext=mM;const fy=T0,Ibe=function(){const t=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let n=1;n<arguments.length;n++){const o=n<0||arguments.length<=n?void 0:arguments[n];o&&Object.keys(o).forEach(s=>{const c=o[s];c!==void 0&&(t[s]=c)})}return t},Mbe=Ibe;var Pbe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const Abe=Pbe;var Rbe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Abe}))};const qR=E.forwardRef(Rbe);var kbe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const Obe=kbe;var zbe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:Obe}))};const WR=E.forwardRef(zbe);var Dbe={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},Lbe=["10","20","50","100"],$be=function(n){var o=n.pageSizeOptions,s=o===void 0?Lbe:o,c=n.locale,m=n.changeSize,v=n.pageSize,d=n.goButton,C=n.quickGo,S=n.rootPrefixCls,R=n.selectComponentClass,D=n.selectPrefixCls,$=n.disabled,H=n.buildOptionText,Z=rr.useState(""),X=nr(Z,2),Q=X[0],G=X[1],K=function(){return!Q||Number.isNaN(Q)?void 0:Number(Q)},Y=typeof H=="function"?H:function(_e){return"".concat(_e," ").concat(c.items_per_page)},re=function(Fe){m?.(Number(Fe))},fe=function(Fe){G(Fe.target.value)},me=function(Fe){d||Q===""||(G(""),!(Fe.relatedTarget&&(Fe.relatedTarget.className.indexOf("".concat(S,"-item-link"))>=0||Fe.relatedTarget.className.indexOf("".concat(S,"-item"))>=0))&&C?.(K()))},pe=function(Fe){Q!==""&&(Fe.keyCode===Or.ENTER||Fe.type==="click")&&(G(""),C?.(K()))},xe=function(){return s.some(function(Fe){return Fe.toString()===v.toString()})?s:s.concat([v.toString()]).sort(function(Fe,Le){var Me=Number.isNaN(Number(Fe))?0:Number(Fe),Ce=Number.isNaN(Number(Le))?0:Number(Le);return Me-Ce})},Se="".concat(S,"-options");if(!m&&!C)return null;var oe=null,Re=null,Ve=null;if(m&&R){var Oe=xe().map(function(_e,Fe){return rr.createElement(R.Option,{key:Fe,value:_e.toString()},Y(_e))});oe=rr.createElement(R,{disabled:$,prefixCls:D,showSearch:!1,className:"".concat(Se,"-size-changer"),optionLabelProp:"children",popupMatchSelectWidth:!1,value:(v||s[0]).toString(),onChange:re,getPopupContainer:function(Fe){return Fe.parentNode},"aria-label":c.page_size,defaultOpen:!1},Oe)}return C&&(d&&(Ve=typeof d=="boolean"?rr.createElement("button",{type:"button",onClick:pe,onKeyUp:pe,disabled:$,className:"".concat(Se,"-quick-jumper-button")},c.jump_to_confirm):rr.createElement("span",{onClick:pe,onKeyUp:pe},d)),Re=rr.createElement("div",{className:"".concat(Se,"-quick-jumper")},c.jump_to,rr.createElement("input",{disabled:$,type:"text",value:Q,onChange:fe,onKeyUp:pe,onBlur:me,"aria-label":c.page}),c.page,Ve)),rr.createElement("li",{className:Se},oe,Re)},jx=function(n){var o,s=n.rootPrefixCls,c=n.page,m=n.active,v=n.className,d=n.showTitle,C=n.onClick,S=n.onKeyPress,R=n.itemRender,D="".concat(s,"-item"),$=Gt(D,"".concat(D,"-").concat(c),(o={},xt(o,"".concat(D,"-active"),m),xt(o,"".concat(D,"-disabled"),!c),o),v),H=function(){C(c)},Z=function(G){S(G,C,c)},X=R(c,"page",rr.createElement("a",{rel:"nofollow"},c));return X?rr.createElement("li",{title:d?String(c):null,className:$,onClick:H,onKeyDown:Z,tabIndex:0},X):null},Bbe=function(n,o,s){return s};function XN(){}function YN(t){var n=Number(t);return typeof n=="number"&&!Number.isNaN(n)&&isFinite(n)&&Math.floor(n)===n}function Zg(t,n,o){var s=typeof t>"u"?n:t;return Math.floor((o-1)/s)+1}var Fbe=function(n){var o,s=n.prefixCls,c=s===void 0?"rc-pagination":s,m=n.selectPrefixCls,v=m===void 0?"rc-select":m,d=n.className,C=n.selectComponentClass,S=n.current,R=n.defaultCurrent,D=R===void 0?1:R,$=n.total,H=$===void 0?0:$,Z=n.pageSize,X=n.defaultPageSize,Q=X===void 0?10:X,G=n.onChange,K=G===void 0?XN:G,Y=n.hideOnSinglePage,re=n.showPrevNextJumpers,fe=re===void 0?!0:re,me=n.showQuickJumper,pe=n.showLessItems,xe=n.showTitle,Se=xe===void 0?!0:xe,oe=n.onShowSizeChange,Re=oe===void 0?XN:oe,Ve=n.locale,Oe=Ve===void 0?Dbe:Ve,_e=n.style,Fe=n.totalBoundaryShowSizeChanger,Le=Fe===void 0?50:Fe,Me=n.disabled,Ce=n.simple,Ye=n.showTotal,qe=n.showSizeChanger,rt=n.pageSizeOptions,Qe=n.itemRender,St=Qe===void 0?Bbe:Qe,jt=n.jumpPrevIcon,Ot=n.jumpNextIcon,Tt=n.prevIcon,ct=n.nextIcon,Ct=rr.useRef(null),kt=ul(10,{value:Z,defaultValue:Q}),zt=nr(kt,2),Nt=zt[0],Rt=zt[1],Pt=ul(1,{value:S,defaultValue:D,postState:function(di){return Math.max(1,Math.min(di,Zg(void 0,Nt,H)))}}),Dt=nr(Pt,2),Ut=Dt[0],sr=Dt[1],vt=rr.useState(Ut),De=nr(vt,2),ze=De[0],ve=De[1];E.useEffect(function(){ve(Ut)},[Ut]);var pt=Math.max(1,Ut-(pe?3:5)),gt=Math.min(Zg(void 0,Nt,H),Ut+(pe?3:5));function $t(Jr,di){var Ai=Jr||rr.createElement("button",{type:"button","aria-label":di,className:"".concat(c,"-item-link")});return typeof Jr=="function"&&(Ai=rr.createElement(Jr,yt({},n))),Ai}function It(Jr){var di=Jr.target.value,Ai=Zg(void 0,Nt,H),Ti;return di===""?Ti=di:Number.isNaN(Number(di))?Ti=ze:di>=Ai?Ti=Ai:Ti=Number(di),Ti}function Mt(Jr){return YN(Jr)&&Jr!==Ut&&YN(H)&&H>0}var Qt=H>Nt?me:!1;function wr(Jr){(Jr.keyCode===Or.UP||Jr.keyCode===Or.DOWN)&&Jr.preventDefault()}function br(Jr){var di=It(Jr);switch(di!==ze&&ve(di),Jr.keyCode){case Or.ENTER:dr(di);break;case Or.UP:dr(di-1);break;case Or.DOWN:dr(di+1);break}}function tn(Jr){dr(It(Jr))}function yr(Jr){var di=Zg(Jr,Nt,H),Ai=Ut>di&&di!==0?di:Ut;Rt(Jr),ve(Ai),Re?.(Ut,Jr),sr(Ai),K?.(Ai,Jr)}function dr(Jr){if(Mt(Jr)&&!Me){var di=Zg(void 0,Nt,H),Ai=Jr;return Jr>di?Ai=di:Jr<1&&(Ai=1),Ai!==ze&&ve(Ai),sr(Ai),K?.(Ai,Nt),Ai}return Ut}var Wt=Ut>1,Wr=Ut<Zg(void 0,Nt,H),Fr=qe??H>Le;function en(){Wt&&dr(Ut-1)}function Yr(){Wr&&dr(Ut+1)}function fr(){dr(pt)}function Kr(){dr(gt)}function Br(Jr,di){if(Jr.key==="Enter"||Jr.charCode===Or.ENTER||Jr.keyCode===Or.ENTER){for(var Ai=arguments.length,Ti=new Array(Ai>2?Ai-2:0),Ji=2;Ji<Ai;Ji++)Ti[Ji-2]=arguments[Ji];di.apply(void 0,Ti)}}function an(Jr){Br(Jr,en)}function ni(Jr){Br(Jr,Yr)}function Nr(Jr){Br(Jr,fr)}function ii(Jr){Br(Jr,Kr)}function Pe(Jr){var di=St(Jr,"prev",$t(Tt,"prev page"));return rr.isValidElement(di)?rr.cloneElement(di,{disabled:!Wt}):di}function he(Jr){var di=St(Jr,"next",$t(ct,"next page"));return rr.isValidElement(di)?rr.cloneElement(di,{disabled:!Wr}):di}function ge(Jr){(Jr.type==="click"||Jr.keyCode===Or.ENTER)&&dr(ze)}var Te=null,$e=Uh(n,{aria:!0,data:!0}),ke=Ye&&rr.createElement("li",{className:"".concat(c,"-total-text")},Ye(H,[H===0?0:(Ut-1)*Nt+1,Ut*Nt>H?H:Ut*Nt])),Ke=null,Ue=Zg(void 0,Nt,H);if(Y&&H<=Nt)return null;var Ne=[],et={rootPrefixCls:c,onClick:dr,onKeyPress:Br,showTitle:Se,itemRender:St,page:-1},Et=Ut-1>0?Ut-1:0,Yt=Ut+1<Ue?Ut+1:Ue,dt=me&&me.goButton,ir=dt,gr=null;Ce&&(dt&&(typeof dt=="boolean"?ir=rr.createElement("button",{type:"button",onClick:ge,onKeyUp:ge},Oe.jump_to_confirm):ir=rr.createElement("span",{onClick:ge,onKeyUp:ge},dt),ir=rr.createElement("li",{title:Se?"".concat(Oe.jump_to).concat(Ut,"/").concat(Ue):null,className:"".concat(c,"-simple-pager")},ir)),gr=rr.createElement("li",{title:Se?"".concat(Ut,"/").concat(Ue):null,className:"".concat(c,"-simple-pager")},rr.createElement("input",{type:"text",value:ze,disabled:Me,onKeyDown:wr,onKeyUp:br,onChange:br,onBlur:tn,size:3}),rr.createElement("span",{className:"".concat(c,"-slash")},"/"),Ue));var mr=pe?1:2;if(Ue<=3+mr*2){Ue||Ne.push(rr.createElement(jx,Mr({},et,{key:"noPager",page:1,className:"".concat(c,"-item-disabled")})));for(var Sr=1;Sr<=Ue;Sr+=1)Ne.push(rr.createElement(jx,Mr({},et,{key:Sr,page:Sr,active:Ut===Sr})))}else{var Gr=pe?Oe.prev_3:Oe.prev_5,Rr=pe?Oe.next_3:Oe.next_5,Cr=St(pt,"jump-prev",$t(jt,"prev page")),Lr=St(gt,"jump-next",$t(Ot,"next page"));fe&&(Te=Cr?rr.createElement("li",{title:Se?Gr:null,key:"prev",onClick:fr,tabIndex:0,onKeyDown:Nr,className:Gt("".concat(c,"-jump-prev"),xt({},"".concat(c,"-jump-prev-custom-icon"),!!jt))},Cr):null,Ke=Lr?rr.createElement("li",{title:Se?Rr:null,key:"next",onClick:Kr,tabIndex:0,onKeyDown:ii,className:Gt("".concat(c,"-jump-next"),xt({},"".concat(c,"-jump-next-custom-icon"),!!Ot))},Lr):null);var cn=Math.max(1,Ut-mr),oi=Math.min(Ut+mr,Ue);Ut-1<=mr&&(oi=1+mr*2),Ue-Ut<=mr&&(cn=Ue-mr*2);for(var Sn=cn;Sn<=oi;Sn+=1)Ne.push(rr.createElement(jx,Mr({},et,{key:Sn,page:Sn,active:Ut===Sn})));if(Ut-1>=mr*2&&Ut!==3&&(Ne[0]=rr.cloneElement(Ne[0],{className:Gt("".concat(c,"-item-after-jump-prev"),Ne[0].props.className)}),Ne.unshift(Te)),Ue-Ut>=mr*2&&Ut!==Ue-2){var bi=Ne[Ne.length-1];Ne[Ne.length-1]=rr.cloneElement(bi,{className:Gt("".concat(c,"-item-before-jump-next"),bi.props.className)}),Ne.push(Ke)}cn!==1&&Ne.unshift(rr.createElement(jx,Mr({},et,{key:1,page:1}))),oi!==Ue&&Ne.push(rr.createElement(jx,Mr({},et,{key:Ue,page:Ue})))}var Li=Pe(Et);if(Li){var no=!Wt||!Ue;Li=rr.createElement("li",{title:Se?Oe.prev_page:null,onClick:en,tabIndex:no?null:0,onKeyDown:an,className:Gt("".concat(c,"-prev"),xt({},"".concat(c,"-disabled"),no)),"aria-disabled":no},Li)}var ba=he(Yt);if(ba){var io,ra;Ce?(io=!Wr,ra=Wt?0:null):(io=!Wr||!Ue,ra=io?null:0),ba=rr.createElement("li",{title:Se?Oe.next_page:null,onClick:Yr,tabIndex:ra,onKeyDown:ni,className:Gt("".concat(c,"-next"),xt({},"".concat(c,"-disabled"),io)),"aria-disabled":io},ba)}var fs=Gt(c,d,(o={},xt(o,"".concat(c,"-simple"),Ce),xt(o,"".concat(c,"-disabled"),Me),o));return rr.createElement("ul",Mr({className:fs,style:_e,ref:Ct},$e),ke,Li,Ce?gr:Ne,ba,rr.createElement($be,{locale:Oe,rootPrefixCls:c,disabled:Me,selectComponentClass:C,selectPrefixCls:v,changeSize:Fr?yr:null,pageSize:Nt,pageSizeOptions:rt,quickGo:Qt?dr:null,goButton:ir}))};const jW=t=>E.createElement(_w,Object.assign({},t,{showSearch:!0,size:"small"})),VW=t=>E.createElement(_w,Object.assign({},t,{showSearch:!0,size:"middle"}));jW.Option=_w.Option;VW.Option=_w.Option;const Nbe=t=>{const{componentCls:n}=t;return{[`${n}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${n}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${n}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}},[`&${n}-disabled`]:{cursor:"not-allowed",[`${n}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:t.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:t.colorBorder,backgroundColor:t.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:t.itemActiveBgDisabled},a:{color:t.itemActiveColorDisabled}}},[`${n}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${n}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${n}-simple-pager`]:{color:t.colorTextDisabled},[`${n}-jump-prev, ${n}-jump-next`]:{[`${n}-item-link-icon`]:{opacity:0},[`${n}-item-ellipsis`]:{opacity:1}}},[`&${n}-simple`]:{[`${n}-prev, ${n}-next`]:{[`&${n}-disabled ${n}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},jbe=t=>{const{componentCls:n}=t;return{[`&${n}-mini ${n}-total-text, &${n}-mini ${n}-simple-pager`]:{height:t.itemSizeSM,lineHeight:Xt(t.itemSizeSM)},[`&${n}-mini ${n}-item`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:Xt(t.calc(t.itemSizeSM).sub(2).equal())},[`&${n}-mini:not(${n}-disabled) ${n}-item:not(${n}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},[`&${n}-mini ${n}-prev, &${n}-mini ${n}-next`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:Xt(t.itemSizeSM)},[`&${n}-mini:not(${n}-disabled)`]:{[`${n}-prev, ${n}-next`]:{[`&:hover ${n}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${n}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${n}-disabled:hover ${n}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${n}-mini ${n}-prev ${n}-item-link,
    &${n}-mini ${n}-next ${n}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:t.itemSizeSM,lineHeight:Xt(t.itemSizeSM)}},[`&${n}-mini ${n}-jump-prev, &${n}-mini ${n}-jump-next`]:{height:t.itemSizeSM,marginInlineEnd:0,lineHeight:Xt(t.itemSizeSM)},[`&${n}-mini ${n}-options`]:{marginInlineStart:t.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:t.miniOptionsSizeChangerTop},"&-quick-jumper":{height:t.itemSizeSM,lineHeight:Xt(t.itemSizeSM),input:Object.assign(Object.assign({},Iz(t)),{width:t.paginationMiniQuickJumperInputWidth,height:t.controlHeightSM})}}}},Vbe=t=>{const{componentCls:n}=t;return{[`
    &${n}-simple ${n}-prev,
    &${n}-simple ${n}-next
    `]:{height:t.itemSizeSM,lineHeight:Xt(t.itemSizeSM),verticalAlign:"top",[`${n}-item-link`]:{height:t.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive},"&::after":{height:t.itemSizeSM,lineHeight:Xt(t.itemSizeSM)}}},[`&${n}-simple ${n}-simple-pager`]:{display:"inline-block",height:t.itemSizeSM,marginInlineEnd:t.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:t.marginXS,padding:`0 ${Xt(t.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:t.itemInputBg,border:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadius,outline:"none",transition:`border-color ${t.motionDurationMid}`,color:"inherit","&:hover":{borderColor:t.colorPrimary},"&:focus":{borderColor:t.colorPrimaryHover,boxShadow:`${Xt(t.inputOutlineOffset)} 0 ${Xt(t.controlOutlineWidth)} ${t.controlOutline}`},"&[disabled]":{color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,cursor:"not-allowed"}}}}},Ube=t=>{const{componentCls:n}=t;return{[`${n}-jump-prev, ${n}-jump-next`]:{outline:0,[`${n}-item-container`]:{position:"relative",[`${n}-item-link-icon`]:{color:t.colorPrimary,fontSize:t.fontSizeSM,opacity:0,transition:`all ${t.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${n}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:t.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:t.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:t.paginationEllipsisTextIndent,opacity:1,transition:`all ${t.motionDurationMid}`}},"&:hover":{[`${n}-item-link-icon`]:{opacity:1},[`${n}-item-ellipsis`]:{opacity:0}}},[`
    ${n}-prev,
    ${n}-jump-prev,
    ${n}-jump-next
    `]:{marginInlineEnd:t.marginXS},[`
    ${n}-prev,
    ${n}-next,
    ${n}-jump-prev,
    ${n}-jump-next
    `]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,color:t.colorText,fontFamily:t.fontFamily,lineHeight:`${Xt(t.itemSize)}`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}`},[`${n}-prev, ${n}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:t.colorText,cursor:"pointer",userSelect:"none"},[`${n}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:t.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${Xt(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:"none",transition:`all ${t.motionDurationMid}`},[`&:hover ${n}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${n}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${n}-disabled:hover`]:{[`${n}-item-link`]:{backgroundColor:"transparent"}}},[`${n}-slash`]:{marginInlineEnd:t.paginationSlashMarginInlineEnd,marginInlineStart:t.paginationSlashMarginInlineStart},[`${n}-options`]:{display:"inline-block",marginInlineStart:t.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:t.controlHeight,marginInlineStart:t.marginXS,lineHeight:Xt(t.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign({},Mz(t)),{width:t.calc(t.controlHeightLG).mul(1.25).equal(),height:t.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:t.marginXS,marginInlineEnd:t.marginXS})}}}},Hbe=t=>{const{componentCls:n}=t;return{[`${n}-item`]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,marginInlineEnd:t.marginXS,fontFamily:t.fontFamily,lineHeight:Xt(t.calc(t.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${Xt(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${Xt(t.paginationItemPaddingInline)}`,color:t.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${n}-item-active)`]:{"&:hover":{transition:`all ${t.motionDurationMid}`,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},"&-active":{fontWeight:t.fontWeightStrong,backgroundColor:t.itemActiveBg,borderColor:t.colorPrimary,a:{color:t.colorPrimary},"&:hover":{borderColor:t.colorPrimaryHover},"&:hover a":{color:t.colorPrimaryHover}}}}},Gbe=t=>{const{componentCls:n}=t;return{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oa(t)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${n}-total-text`]:{display:"inline-block",height:t.itemSize,marginInlineEnd:t.marginXS,lineHeight:Xt(t.calc(t.itemSize).sub(2).equal()),verticalAlign:"middle"}}),Hbe(t)),Ube(t)),Vbe(t)),jbe(t)),Nbe(t)),{[`@media only screen and (max-width: ${t.screenLG}px)`]:{[`${n}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${t.screenSM}px)`]:{[`${n}-options`]:{display:"none"}}}),[`&${t.componentCls}-rtl`]:{direction:"rtl"}}},qbe=t=>{const{componentCls:n}=t;return{[`${n}:not(${n}-disabled)`]:{[`${n}-item`]:Object.assign({},Hb(t)),[`${n}-jump-prev, ${n}-jump-next`]:{"&:focus-visible":Object.assign({[`${n}-item-link-icon`]:{opacity:1},[`${n}-item-ellipsis`]:{opacity:0}},Lm(t))},[`${n}-prev, ${n}-next`]:{[`&:focus-visible ${n}-item-link`]:Object.assign({},Lm(t))}}}},UW=t=>Object.assign({itemBg:t.colorBgContainer,itemSize:t.controlHeight,itemSizeSM:t.controlHeightSM,itemActiveBg:t.colorBgContainer,itemLinkBg:t.colorBgContainer,itemActiveColorDisabled:t.colorTextDisabled,itemActiveBgDisabled:t.controlItemBgActiveDisabled,itemInputBg:t.colorBgContainer,miniOptionsSizeChangerTop:0},mW(t)),HW=t=>Yi(t,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:t.calc(t.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:t.calc(t.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:t.calc(t.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:t.calc(t.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:t.marginXXS,paginationSlashMarginInlineEnd:t.marginSM,paginationEllipsisTextIndent:"0.13em"},pW(t)),Wbe=os("Pagination",t=>{const n=HW(t);return[Gbe(n),qbe(n)]},UW),Kbe=t=>{const{componentCls:n}=t;return{[`${n}${n}-bordered${n}-disabled:not(${n}-mini)`]:{"&, &:hover":{[`${n}-item-link`]:{borderColor:t.colorBorder}},"&:focus-visible":{[`${n}-item-link`]:{borderColor:t.colorBorder}},[`${n}-item, ${n}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,[`&:hover:not(${n}-item-active)`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,a:{color:t.colorTextDisabled}},[`&${n}-item-active`]:{backgroundColor:t.itemActiveBgDisabled}},[`${n}-prev, ${n}-next`]:{"&:hover button":{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,color:t.colorTextDisabled},[`${n}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder}}},[`${n}${n}-bordered:not(${n}-mini)`]:{[`${n}-prev, ${n}-next`]:{"&:hover button":{borderColor:t.colorPrimaryHover,backgroundColor:t.itemBg},[`${n}-item-link`]:{backgroundColor:t.itemLinkBg,borderColor:t.colorBorder},[`&:hover ${n}-item-link`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,color:t.colorPrimary},[`&${n}-disabled`]:{[`${n}-item-link`]:{borderColor:t.colorBorder,color:t.colorTextDisabled}}},[`${n}-item`]:{backgroundColor:t.itemBg,border:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,[`&:hover:not(${n}-item-active)`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,a:{color:t.colorPrimary}},"&-active":{borderColor:t.colorPrimary}}}}},Zbe=b0(["Pagination","bordered"],t=>{const n=HW(t);return[Kbe(n)]},UW);var Xbe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const Ybe=t=>{const{prefixCls:n,selectPrefixCls:o,className:s,rootClassName:c,style:m,size:v,locale:d,selectComponentClass:C,responsive:S,showSizeChanger:R}=t,D=Xbe(t,["prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","selectComponentClass","responsive","showSizeChanger"]),{xs:$}=mz(S),[,H]=Ws(),{getPrefixCls:Z,direction:X,pagination:Q={}}=E.useContext(hi),G=Z("pagination",n),[K,Y,re]=Wbe(G),fe=R??Q.showSizeChanger,me=E.useMemo(()=>{const _e=E.createElement("span",{className:`${G}-item-ellipsis`},"•••"),Fe=E.createElement("button",{className:`${G}-item-link`,type:"button",tabIndex:-1},X==="rtl"?E.createElement(Zb,null):E.createElement(KT,null)),Le=E.createElement("button",{className:`${G}-item-link`,type:"button",tabIndex:-1},X==="rtl"?E.createElement(KT,null):E.createElement(Zb,null)),Me=E.createElement("a",{className:`${G}-item-link`},E.createElement("div",{className:`${G}-item-container`},X==="rtl"?E.createElement(WR,{className:`${G}-item-link-icon`}):E.createElement(qR,{className:`${G}-item-link-icon`}),_e)),Ce=E.createElement("a",{className:`${G}-item-link`},E.createElement("div",{className:`${G}-item-container`},X==="rtl"?E.createElement(qR,{className:`${G}-item-link-icon`}):E.createElement(WR,{className:`${G}-item-link-icon`}),_e));return{prevIcon:Fe,nextIcon:Le,jumpPrevIcon:Me,jumpNextIcon:Ce}},[X,G]),[pe]=x0("Pagination",TH),xe=Object.assign(Object.assign({},pe),d),Se=Gh(v),oe=Se==="small"||!!($&&!Se&&S),Re=Z("select",o),Ve=Gt({[`${G}-mini`]:oe,[`${G}-rtl`]:X==="rtl",[`${G}-bordered`]:H.wireframe},Q?.className,s,c,Y,re),Oe=Object.assign(Object.assign({},Q?.style),m);return K(E.createElement(E.Fragment,null,H.wireframe&&E.createElement(Zbe,{prefixCls:G}),E.createElement(Fbe,Object.assign({},me,D,{style:Oe,prefixCls:G,selectPrefixCls:Re,className:Ve,selectComponentClass:C||(oe?jW:VW),locale:xe,showSizeChanger:fe}))))},Jbe=Ybe,Qbe=new Mo("antSpinMove",{to:{opacity:1}}),ewe=new Mo("antRotate",{to:{transform:"rotate(405deg)"}}),twe=t=>{const{componentCls:n,calc:o}=t;return{[`${n}`]:Object.assign(Object.assign({},Oa(t)),{position:"absolute",display:"none",color:t.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},[`${n}-text`]:{fontSize:t.fontSize,paddingTop:o(o(t.dotSize).sub(t.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:t.colorBgMask,zIndex:t.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${t.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[`${n}-dot ${n}-dot-item`]:{backgroundColor:t.colorWhite},[`${n}-text`]:{color:t.colorTextLightSolid}},"&-nested-loading":{position:"relative",[`> div > ${n}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight,[`${n}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:o(t.dotSize).mul(-1).div(2).equal()},[`${n}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${t.colorBgContainer}`},[`&${n}-show-text ${n}-dot`]:{marginTop:o(t.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${n}-dot`]:{margin:o(t.dotSizeSM).mul(-1).div(2).equal()},[`${n}-text`]:{paddingTop:o(o(t.dotSizeSM).sub(t.fontSize)).div(2).add(2).equal()},[`&${n}-show-text ${n}-dot`]:{marginTop:o(t.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${n}-dot`]:{margin:o(t.dotSizeLG).mul(-1).div(2).equal()},[`${n}-text`]:{paddingTop:o(o(t.dotSizeLG).sub(t.fontSize)).div(2).add(2).equal()},[`&${n}-show-text ${n}-dot`]:{marginTop:o(t.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${n}-container`]:{position:"relative",transition:`opacity ${t.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${n}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:t.spinDotDefault},[`${n}-dot`]:{position:"relative",display:"inline-block",fontSize:t.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:o(t.dotSize).sub(o(t.marginXXS).div(2)).div(2).equal(),height:o(t.dotSize).sub(o(t.marginXXS).div(2)).div(2).equal(),backgroundColor:t.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Qbe,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:ewe,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${n}-dot`]:{fontSize:t.dotSizeSM,i:{width:o(o(t.dotSizeSM).sub(o(t.marginXXS).div(2))).div(2).equal(),height:o(o(t.dotSizeSM).sub(o(t.marginXXS).div(2))).div(2).equal()}},[`&-lg ${n}-dot`]:{fontSize:t.dotSizeLG,i:{width:o(o(t.dotSizeLG).sub(t.marginXXS)).div(2).equal(),height:o(o(t.dotSizeLG).sub(t.marginXXS)).div(2).equal()}},[`&${n}-show-text ${n}-text`]:{display:"block"}})}},rwe=t=>{const{controlHeightLG:n,controlHeight:o}=t;return{contentHeight:400,dotSize:n/2,dotSizeSM:n*.35,dotSizeLG:o}},nwe=os("Spin",t=>{const n=Yi(t,{spinDotDefault:t.colorTextDescription});return[twe(n)]},rwe);var iwe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};let eT=null;function owe(t,n){const{indicator:o}=n,s=`${t}-dot`;return o===null?null:xu(o)?cc(o,{className:Gt(o.props.className,s)}):xu(eT)?cc(eT,{className:Gt(eT.props.className,s)}):E.createElement("span",{className:Gt(s,`${t}-dot-spin`)},E.createElement("i",{className:`${t}-dot-item`,key:1}),E.createElement("i",{className:`${t}-dot-item`,key:2}),E.createElement("i",{className:`${t}-dot-item`,key:3}),E.createElement("i",{className:`${t}-dot-item`,key:4}))}function awe(t,n){return!!t&&!!n&&!isNaN(Number(n))}const GW=t=>{const{prefixCls:n,spinning:o=!0,delay:s=0,className:c,rootClassName:m,size:v="default",tip:d,wrapperClassName:C,style:S,children:R,fullscreen:D}=t,$=iwe(t,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen"]),{getPrefixCls:H}=E.useContext(hi),Z=H("spin",n),[X,Q,G]=nwe(Z),[K,Y]=E.useState(()=>o&&!awe(o,s));E.useEffect(()=>{if(o){const Ve=o1e(s,()=>{Y(!0)});return Ve(),()=>{var Oe;(Oe=Ve?.cancel)===null||Oe===void 0||Oe.call(Ve)}}Y(!1)},[s,o]);const re=E.useMemo(()=>typeof R<"u"&&!D,[R,D]),{direction:fe,spin:me}=E.useContext(hi),pe=Gt(Z,me?.className,{[`${Z}-sm`]:v==="small",[`${Z}-lg`]:v==="large",[`${Z}-spinning`]:K,[`${Z}-show-text`]:!!d,[`${Z}-fullscreen`]:D,[`${Z}-fullscreen-show`]:D&&K,[`${Z}-rtl`]:fe==="rtl"},c,m,Q,G),xe=Gt(`${Z}-container`,{[`${Z}-blur`]:K}),Se=Zs($,["indicator"]),oe=Object.assign(Object.assign({},me?.style),S),Re=E.createElement("div",Object.assign({},Se,{style:oe,className:pe,"aria-live":"polite","aria-busy":K}),owe(Z,t),d&&(re||D)?E.createElement("div",{className:`${Z}-text`},d):null);return X(re?E.createElement("div",Object.assign({},Se,{className:Gt(`${Z}-nested-loading`,C,Q,G)}),K&&E.createElement("div",{key:"loading"},Re),E.createElement("div",{className:xe,key:"container"},R)):Re)};GW.setDefaultIndicator=t=>{eT=t};const swe=GW;var lwe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const cwe=t=>{const{prefixCls:n,className:o,closeIcon:s,closable:c,type:m,title:v,children:d,footer:C}=t,S=lwe(t,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:R}=E.useContext(hi),D=R(),$=n||R("modal"),H=Pl(D),[Z,X,Q]=qG($,H),G=`${$}-confirm`;let K={};return m?K={closable:c??!1,title:"",footer:"",children:E.createElement(KG,Object.assign({},t,{prefixCls:$,confirmPrefixCls:G,rootPrefixCls:D,content:d}))}:K={closable:c??!0,title:v,footer:C!==null&&E.createElement(UG,Object.assign({},t)),children:d},Z(E.createElement(RG,Object.assign({prefixCls:$,className:Gt(X,`${$}-pure-panel`,m&&G,m&&`${G}-${m}`,o,Q,H)},S,{closeIcon:VG($,s),closable:c},K)))},uwe=rq(cwe);function qW(t){return yw(YG(t))}const qh=WG;qh.useModal=oge;qh.info=function(n){return yw(JG(n))};qh.success=function(n){return yw(QG(n))};qh.error=function(n){return yw(eq(n))};qh.warning=qW;qh.warn=qW;qh.confirm=function(n){return yw(tq(n))};qh.destroyAll=function(){for(;sy.length;){const n=sy.pop();n&&n()}};qh.config=ege;qh._InternalPanelDoNotUseOrYouWillBeFired=uwe;const hwe=qh;var dwe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"};const fwe=dwe;var pwe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:fwe}))};const mwe=E.forwardRef(pwe),gwe=()=>E.createElement("svg",{width:"252",height:"294"},E.createElement("defs",null,E.createElement("path",{d:"M0 .387h251.772v251.772H0z"})),E.createElement("g",{fill:"none",fillRule:"evenodd"},E.createElement("g",{transform:"translate(0 .012)"},E.createElement("mask",{fill:"#fff"}),E.createElement("path",{d:"M0 127.32v-2.095C0 56.279 55.892.387 124.838.387h2.096c68.946 0 124.838 55.892 124.838 124.838v2.096c0 68.946-55.892 124.838-124.838 124.838h-2.096C55.892 252.16 0 196.267 0 127.321",fill:"#E4EBF7",mask:"url(#b)"})),E.createElement("path",{d:"M39.755 130.84a8.276 8.276 0 1 1-16.468-1.66 8.276 8.276 0 0 1 16.468 1.66",fill:"#FFF"}),E.createElement("path",{d:"M36.975 134.297l10.482 5.943M48.373 146.508l-12.648 10.788",stroke:"#FFF",strokeWidth:"2"}),E.createElement("path",{d:"M39.875 159.352a5.667 5.667 0 1 1-11.277-1.136 5.667 5.667 0 0 1 11.277 1.136M57.588 143.247a5.708 5.708 0 1 1-11.358-1.145 5.708 5.708 0 0 1 11.358 1.145M99.018 26.875l29.82-.014a4.587 4.587 0 1 0-.003-9.175l-29.82.013a4.587 4.587 0 1 0 .003 9.176M110.424 45.211l29.82-.013a4.588 4.588 0 0 0-.004-9.175l-29.82.013a4.587 4.587 0 1 0 .004 9.175",fill:"#FFF"}),E.createElement("path",{d:"M112.798 26.861v-.002l15.784-.006a4.588 4.588 0 1 0 .003 9.175l-15.783.007v-.002a4.586 4.586 0 0 0-.004-9.172M184.523 135.668c-.553 5.485-5.447 9.483-10.931 8.93-5.485-.553-9.483-5.448-8.93-10.932.552-5.485 5.447-9.483 10.932-8.93 5.485.553 9.483 5.447 8.93 10.932",fill:"#FFF"}),E.createElement("path",{d:"M179.26 141.75l12.64 7.167M193.006 156.477l-15.255 13.011",stroke:"#FFF",strokeWidth:"2"}),E.createElement("path",{d:"M184.668 170.057a6.835 6.835 0 1 1-13.6-1.372 6.835 6.835 0 0 1 13.6 1.372M203.34 153.325a6.885 6.885 0 1 1-13.7-1.382 6.885 6.885 0 0 1 13.7 1.382",fill:"#FFF"}),E.createElement("path",{d:"M151.931 192.324a2.222 2.222 0 1 1-4.444 0 2.222 2.222 0 0 1 4.444 0zM225.27 116.056a2.222 2.222 0 1 1-4.445 0 2.222 2.222 0 0 1 4.444 0zM216.38 151.08a2.223 2.223 0 1 1-4.446-.001 2.223 2.223 0 0 1 4.446 0zM176.917 107.636a2.223 2.223 0 1 1-4.445 0 2.223 2.223 0 0 1 4.445 0zM195.291 92.165a2.223 2.223 0 1 1-4.445 0 2.223 2.223 0 0 1 4.445 0zM202.058 180.711a2.223 2.223 0 1 1-4.446 0 2.223 2.223 0 0 1 4.446 0z",stroke:"#FFF",strokeWidth:"2"}),E.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M214.404 153.302l-1.912 20.184-10.928 5.99M173.661 174.792l-6.356 9.814h-11.36l-4.508 6.484M174.941 125.168v-15.804M220.824 117.25l-12.84 7.901-15.31-7.902V94.39"}),E.createElement("path",{d:"M166.588 65.936h-3.951a4.756 4.756 0 0 1-4.743-4.742 4.756 4.756 0 0 1 4.743-4.743h3.951a4.756 4.756 0 0 1 4.743 4.743 4.756 4.756 0 0 1-4.743 4.742",fill:"#FFF"}),E.createElement("path",{d:"M174.823 30.03c0-16.281 13.198-29.48 29.48-29.48 16.28 0 29.48 13.199 29.48 29.48 0 16.28-13.2 29.48-29.48 29.48-16.282 0-29.48-13.2-29.48-29.48",fill:"#1677ff"}),E.createElement("path",{d:"M205.952 38.387c.5.5.785 1.142.785 1.928s-.286 1.465-.785 1.964c-.572.5-1.214.75-2 .75-.785 0-1.429-.285-1.929-.785-.572-.5-.82-1.143-.82-1.929s.248-1.428.82-1.928c.5-.5 1.144-.75 1.93-.75.785 0 1.462.25 1.999.75m4.285-19.463c1.428 1.249 2.143 2.963 2.143 5.142 0 1.712-.427 3.13-1.219 4.25-.067.096-.137.18-.218.265-.416.429-1.41 1.346-2.956 2.699a5.07 5.07 0 0 0-1.428 1.75 5.207 5.207 0 0 0-.536 2.357v.5h-4.107v-.5c0-1.357.215-2.536.714-3.5.464-.964 1.857-2.464 4.178-4.536l.43-.5c.643-.785.964-1.643.964-2.535 0-1.18-.358-2.108-1-2.785-.678-.68-1.643-1.001-2.858-1.001-1.536 0-2.642.464-3.357 1.43-.37.5-.621 1.135-.76 1.904a1.999 1.999 0 0 1-1.971 1.63h-.004c-1.277 0-2.257-1.183-1.98-2.43.337-1.518 1.02-2.78 2.073-3.784 1.536-1.5 3.607-2.25 6.25-2.25 2.32 0 4.214.607 5.642 1.894",fill:"#FFF"}),E.createElement("path",{d:"M52.04 76.131s21.81 5.36 27.307 15.945c5.575 10.74-6.352 9.26-15.73 4.935-10.86-5.008-24.7-11.822-11.577-20.88",fill:"#FFB594"}),E.createElement("path",{d:"M90.483 67.504l-.449 2.893c-.753.49-4.748-2.663-4.748-2.663l-1.645.748-1.346-5.684s6.815-4.589 8.917-5.018c2.452-.501 9.884.94 10.7 2.278 0 0 1.32.486-2.227.69-3.548.203-5.043.447-6.79 3.132-1.747 2.686-2.412 3.624-2.412 3.624",fill:"#FFC6A0"}),E.createElement("path",{d:"M128.055 111.367c-2.627-7.724-6.15-13.18-8.917-15.478-3.5-2.906-9.34-2.225-11.366-4.187-1.27-1.231-3.215-1.197-3.215-1.197s-14.98-3.158-16.828-3.479c-2.37-.41-2.124-.714-6.054-1.405-1.57-1.907-2.917-1.122-2.917-1.122l-7.11-1.383c-.853-1.472-2.423-1.023-2.423-1.023l-2.468-.897c-1.645 9.976-7.74 13.796-7.74 13.796 1.795 1.122 15.703 8.3 15.703 8.3l5.107 37.11s-3.321 5.694 1.346 9.109c0 0 19.883-3.743 34.921-.329 0 0 3.047-2.546.972-8.806.523-3.01 1.394-8.263 1.736-11.622.385.772 2.019 1.918 3.14 3.477 0 0 9.407-7.365 11.052-14.012-.832-.723-1.598-1.585-2.267-2.453-.567-.736-.358-2.056-.765-2.717-.669-1.084-1.804-1.378-1.907-1.682",fill:"#FFF"}),E.createElement("path",{d:"M101.09 289.998s4.295 2.041 7.354 1.021c2.821-.94 4.53.668 7.08 1.178 2.55.51 6.874 1.1 11.686-1.26-.103-5.51-6.889-3.98-11.96-6.713-2.563-1.38-3.784-4.722-3.598-8.799h-9.402s-1.392 10.52-1.16 14.573",fill:"#CBD1D1"}),E.createElement("path",{d:"M101.067 289.826s2.428 1.271 6.759.653c3.058-.437 3.712.481 7.423 1.031 3.712.55 10.724-.069 11.823-.894.413 1.1-.343 2.063-.343 2.063s-1.512.603-4.812.824c-2.03.136-5.8.291-7.607-.503-1.787-1.375-5.247-1.903-5.728-.241-3.918.95-7.355-.286-7.355-.286l-.16-2.647z",fill:"#2B0849"}),E.createElement("path",{d:"M108.341 276.044h3.094s-.103 6.702 4.536 8.558c-4.64.618-8.558-2.303-7.63-8.558",fill:"#A4AABA"}),E.createElement("path",{d:"M57.542 272.401s-2.107 7.416-4.485 12.306c-1.798 3.695-4.225 7.492 5.465 7.492 6.648 0 8.953-.48 7.423-6.599-1.53-6.12.266-13.199.266-13.199h-8.669z",fill:"#CBD1D1"}),E.createElement("path",{d:"M51.476 289.793s2.097 1.169 6.633 1.169c6.083 0 8.249-1.65 8.249-1.65s.602 1.114-.619 2.165c-.993.855-3.597 1.591-7.39 1.546-4.145-.048-5.832-.566-6.736-1.168-.825-.55-.687-1.58-.137-2.062",fill:"#2B0849"}),E.createElement("path",{d:"M58.419 274.304s.033 1.519-.314 2.93c-.349 1.42-1.078 3.104-1.13 4.139-.058 1.151 4.537 1.58 5.155.034.62-1.547 1.294-6.427 1.913-7.252.619-.825-4.903-2.119-5.624.15",fill:"#A4AABA"}),E.createElement("path",{d:"M99.66 278.514l13.378.092s1.298-54.52 1.853-64.403c.554-9.882 3.776-43.364 1.002-63.128l-12.547-.644-22.849.78s-.434 3.966-1.195 9.976c-.063.496-.682.843-.749 1.365-.075.585.423 1.354.32 1.966-2.364 14.08-6.377 33.104-8.744 46.677-.116.666-1.234 1.009-1.458 2.691-.04.302.211 1.525.112 1.795-6.873 18.744-10.949 47.842-14.277 61.885l14.607-.014s2.197-8.57 4.03-16.97c2.811-12.886 23.111-85.01 23.111-85.01l3.016-.521 1.043 46.35s-.224 1.234.337 2.02c.56.785-.56 1.123-.392 2.244l.392 1.794s-.449 7.178-.898 11.89c-.448 4.71-.092 39.165-.092 39.165",fill:"#7BB2F9"}),E.createElement("path",{d:"M76.085 221.626c1.153.094 4.038-2.019 6.955-4.935M106.36 225.142s2.774-1.11 6.103-3.883",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M107.275 222.1s2.773-1.11 6.102-3.884",stroke:"#648BD8",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M74.74 224.767s2.622-.591 6.505-3.365M86.03 151.634c-.27 3.106.3 8.525-4.336 9.123M103.625 149.88s.11 14.012-1.293 15.065c-2.219 1.664-2.99 1.944-2.99 1.944M99.79 150.438s.035 12.88-1.196 24.377M93.673 175.911s7.212-1.664 9.431-1.664M74.31 205.861a212.013 212.013 0 0 1-.979 4.56s-1.458 1.832-1.009 3.776c.449 1.944-.947 2.045-4.985 15.355-1.696 5.59-4.49 18.591-6.348 27.597l-.231 1.12M75.689 197.807a320.934 320.934 0 0 1-.882 4.754M82.591 152.233L81.395 162.7s-1.097.15-.5 2.244c.113 1.346-2.674 15.775-5.18 30.43M56.12 274.418h13.31",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M116.241 148.22s-17.047-3.104-35.893.2c.158 2.514-.003 4.15-.003 4.15s14.687-2.818 35.67-.312c.252-2.355.226-4.038.226-4.038",fill:"#192064"}),E.createElement("path",{d:"M106.322 151.165l.003-4.911a.81.81 0 0 0-.778-.815c-2.44-.091-5.066-.108-7.836-.014a.818.818 0 0 0-.789.815l-.003 4.906a.81.81 0 0 0 .831.813c2.385-.06 4.973-.064 7.73.017a.815.815 0 0 0 .842-.81",fill:"#FFF"}),E.createElement("path",{d:"M105.207 150.233l.002-3.076a.642.642 0 0 0-.619-.646 94.321 94.321 0 0 0-5.866-.01.65.65 0 0 0-.63.647v3.072a.64.64 0 0 0 .654.644 121.12 121.12 0 0 1 5.794.011c.362.01.665-.28.665-.642",fill:"#192064"}),E.createElement("path",{d:"M100.263 275.415h12.338M101.436 270.53c.006 3.387.042 5.79.111 6.506M101.451 264.548a915.75 915.75 0 0 0-.015 4.337M100.986 174.965l.898 44.642s.673 1.57-.225 2.692c-.897 1.122 2.468.673.898 2.243-1.57 1.57.897 1.122 0 3.365-.596 1.489-.994 21.1-1.096 35.146",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M46.876 83.427s-.516 6.045 7.223 5.552c11.2-.712 9.218-9.345 31.54-21.655-.786-2.708-2.447-4.744-2.447-4.744s-11.068 3.11-22.584 8.046c-6.766 2.9-13.395 6.352-13.732 12.801M104.46 91.057l.941-5.372-8.884-11.43-5.037 5.372-1.74 7.834a.321.321 0 0 0 .108.32c.965.8 6.5 5.013 14.347 3.544a.332.332 0 0 0 .264-.268",fill:"#FFC6A0"}),E.createElement("path",{d:"M93.942 79.387s-4.533-2.853-2.432-6.855c1.623-3.09 4.513 1.133 4.513 1.133s.52-3.642 3.121-3.642c.52-1.04 1.561-4.162 1.561-4.162s11.445 2.601 13.526 3.121c0 5.203-2.304 19.424-7.84 19.861-8.892.703-12.449-9.456-12.449-9.456",fill:"#FFC6A0"}),E.createElement("path",{d:"M113.874 73.446c2.601-2.081 3.47-9.722 3.47-9.722s-2.479-.49-6.64-2.05c-4.683-2.081-12.798-4.747-17.48.976-9.668 3.223-2.05 19.823-2.05 19.823l2.713-3.021s-3.935-3.287-2.08-6.243c2.17-3.462 3.92 1.073 3.92 1.073s.637-2.387 3.581-3.342c.355-.71 1.036-2.674 1.432-3.85a1.073 1.073 0 0 1 1.263-.704c2.4.558 8.677 2.019 11.356 2.662.522.125.871.615.82 1.15l-.305 3.248z",fill:"#520038"}),E.createElement("path",{d:"M104.977 76.064c-.103.61-.582 1.038-1.07.956-.489-.083-.801-.644-.698-1.254.103-.61.582-1.038 1.07-.956.488.082.8.644.698 1.254M112.132 77.694c-.103.61-.582 1.038-1.07.956-.488-.083-.8-.644-.698-1.254.103-.61.582-1.038 1.07-.956.488.082.8.643.698 1.254",fill:"#552950"}),E.createElement("path",{stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round",d:"M110.13 74.84l-.896 1.61-.298 4.357h-2.228"}),E.createElement("path",{d:"M110.846 74.481s1.79-.716 2.506.537",stroke:"#5C2552",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M92.386 74.282s.477-1.114 1.113-.716c.637.398 1.274 1.433.558 1.99-.717.556.159 1.67.159 1.67",stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M103.287 72.93s1.83 1.113 4.137.954",stroke:"#5C2552",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M103.685 81.762s2.227 1.193 4.376 1.193M104.64 84.308s.954.398 1.511.318M94.693 81.205s2.308 7.4 10.424 7.639",stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M81.45 89.384s.45 5.647-4.935 12.787M69 82.654s-.726 9.282-8.204 14.206",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M129.405 122.865s-5.272 7.403-9.422 10.768",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M119.306 107.329s.452 4.366-2.127 32.062",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M150.028 151.232h-49.837a1.01 1.01 0 0 1-1.01-1.01v-31.688c0-.557.452-1.01 1.01-1.01h49.837c.558 0 1.01.453 1.01 1.01v31.688a1.01 1.01 0 0 1-1.01 1.01",fill:"#F2D7AD"}),E.createElement("path",{d:"M150.29 151.232h-19.863v-33.707h20.784v32.786a.92.92 0 0 1-.92.92",fill:"#F4D19D"}),E.createElement("path",{d:"M123.554 127.896H92.917a.518.518 0 0 1-.425-.816l6.38-9.113c.193-.277.51-.442.85-.442h31.092l-7.26 10.371z",fill:"#F2D7AD"}),E.createElement("path",{fill:"#CC9B6E",d:"M123.689 128.447H99.25v-.519h24.169l7.183-10.26.424.298z"}),E.createElement("path",{d:"M158.298 127.896h-18.669a2.073 2.073 0 0 1-1.659-.83l-7.156-9.541h19.965c.49 0 .95.23 1.244.622l6.69 8.92a.519.519 0 0 1-.415.83",fill:"#F4D19D"}),E.createElement("path",{fill:"#CC9B6E",d:"M157.847 128.479h-19.384l-7.857-10.475.415-.31 7.7 10.266h19.126zM130.554 150.685l-.032-8.177.519-.002.032 8.177z"}),E.createElement("path",{fill:"#CC9B6E",d:"M130.511 139.783l-.08-21.414.519-.002.08 21.414zM111.876 140.932l-.498-.143 1.479-5.167.498.143zM108.437 141.06l-2.679-2.935 2.665-3.434.41.318-2.397 3.089 2.384 2.612zM116.607 141.06l-.383-.35 2.383-2.612-2.397-3.089.41-.318 2.665 3.434z"}),E.createElement("path",{d:"M154.316 131.892l-3.114-1.96.038 3.514-1.043.092c-1.682.115-3.634.23-4.789.23-1.902 0-2.693 2.258 2.23 2.648l-2.645-.596s-2.168 1.317.504 2.3c0 0-1.58 1.217.561 2.58-.584 3.504 5.247 4.058 7.122 3.59 1.876-.47 4.233-2.359 4.487-5.16.28-3.085-.89-5.432-3.35-7.238",fill:"#FFC6A0"}),E.createElement("path",{d:"M153.686 133.577s-6.522.47-8.36.372c-1.836-.098-1.904 2.19 2.359 2.264 3.739.15 5.451-.044 5.451-.044",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M145.16 135.877c-1.85 1.346.561 2.355.561 2.355s3.478.898 6.73.617",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M151.89 141.71s-6.28.111-6.73-2.132c-.223-1.346.45-1.402.45-1.402M146.114 140.868s-1.103 3.16 5.44 3.533M151.202 129.932v3.477M52.838 89.286c3.533-.337 8.423-1.248 13.582-7.754",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M168.567 248.318a6.647 6.647 0 0 1-6.647-6.647v-66.466a6.647 6.647 0 1 1 13.294 0v66.466a6.647 6.647 0 0 1-6.647 6.647",fill:"#5BA02E"}),E.createElement("path",{d:"M176.543 247.653a6.647 6.647 0 0 1-6.646-6.647v-33.232a6.647 6.647 0 1 1 13.293 0v33.232a6.647 6.647 0 0 1-6.647 6.647",fill:"#92C110"}),E.createElement("path",{d:"M186.443 293.613H158.92a3.187 3.187 0 0 1-3.187-3.187v-46.134a3.187 3.187 0 0 1 3.187-3.187h27.524a3.187 3.187 0 0 1 3.187 3.187v46.134a3.187 3.187 0 0 1-3.187 3.187",fill:"#F2D7AD"}),E.createElement("path",{d:"M88.979 89.48s7.776 5.384 16.6 2.842",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}))),ywe=gwe,vwe=()=>E.createElement("svg",{width:"254",height:"294"},E.createElement("defs",null,E.createElement("path",{d:"M0 .335h253.49v253.49H0z"}),E.createElement("path",{d:"M0 293.665h253.49V.401H0z"})),E.createElement("g",{fill:"none",fillRule:"evenodd"},E.createElement("g",{transform:"translate(0 .067)"},E.createElement("mask",{fill:"#fff"}),E.createElement("path",{d:"M0 128.134v-2.11C0 56.608 56.273.334 125.69.334h2.11c69.416 0 125.69 56.274 125.69 125.69v2.11c0 69.417-56.274 125.69-125.69 125.69h-2.11C56.273 253.824 0 197.551 0 128.134",fill:"#E4EBF7",mask:"url(#b)"})),E.createElement("path",{d:"M39.989 132.108a8.332 8.332 0 1 1-16.581-1.671 8.332 8.332 0 0 1 16.58 1.671",fill:"#FFF"}),E.createElement("path",{d:"M37.19 135.59l10.553 5.983M48.665 147.884l-12.734 10.861",stroke:"#FFF",strokeWidth:"2"}),E.createElement("path",{d:"M40.11 160.816a5.706 5.706 0 1 1-11.354-1.145 5.706 5.706 0 0 1 11.354 1.145M57.943 144.6a5.747 5.747 0 1 1-11.436-1.152 5.747 5.747 0 0 1 11.436 1.153M99.656 27.434l30.024-.013a4.619 4.619 0 1 0-.004-9.238l-30.024.013a4.62 4.62 0 0 0 .004 9.238M111.14 45.896l30.023-.013a4.62 4.62 0 1 0-.004-9.238l-30.024.013a4.619 4.619 0 1 0 .004 9.238",fill:"#FFF"}),E.createElement("path",{d:"M113.53 27.421v-.002l15.89-.007a4.619 4.619 0 1 0 .005 9.238l-15.892.007v-.002a4.618 4.618 0 0 0-.004-9.234M150.167 70.091h-3.979a4.789 4.789 0 0 1-4.774-4.775 4.788 4.788 0 0 1 4.774-4.774h3.979a4.789 4.789 0 0 1 4.775 4.774 4.789 4.789 0 0 1-4.775 4.775",fill:"#FFF"}),E.createElement("path",{d:"M171.687 30.234c0-16.392 13.289-29.68 29.681-29.68 16.392 0 29.68 13.288 29.68 29.68 0 16.393-13.288 29.681-29.68 29.681s-29.68-13.288-29.68-29.68",fill:"#FF603B"}),E.createElement("path",{d:"M203.557 19.435l-.676 15.035a1.514 1.514 0 0 1-3.026 0l-.675-15.035a2.19 2.19 0 1 1 4.377 0m-.264 19.378c.513.477.77 1.1.77 1.87s-.257 1.393-.77 1.907c-.55.476-1.21.733-1.943.733a2.545 2.545 0 0 1-1.87-.77c-.55-.514-.806-1.136-.806-1.87 0-.77.256-1.393.806-1.87.513-.513 1.137-.733 1.87-.733.77 0 1.43.22 1.943.733",fill:"#FFF"}),E.createElement("path",{d:"M119.3 133.275c4.426-.598 3.612-1.204 4.079-4.778.675-5.18-3.108-16.935-8.262-25.118-1.088-10.72-12.598-11.24-12.598-11.24s4.312 4.895 4.196 16.199c1.398 5.243.804 14.45.804 14.45s5.255 11.369 11.78 10.487",fill:"#FFB594"}),E.createElement("path",{d:"M100.944 91.61s1.463-.583 3.211.582c8.08 1.398 10.368 6.706 11.3 11.368 1.864 1.282 1.864 2.33 1.864 3.496.365.777 1.515 3.03 1.515 3.03s-7.225 1.748-10.954 6.758c-1.399-6.41-6.936-25.235-6.936-25.235",fill:"#FFF"}),E.createElement("path",{d:"M94.008 90.5l1.019-5.815-9.23-11.874-5.233 5.581-2.593 9.863s8.39 5.128 16.037 2.246",fill:"#FFB594"}),E.createElement("path",{d:"M82.931 78.216s-4.557-2.868-2.445-6.892c1.632-3.107 4.537 1.139 4.537 1.139s.524-3.662 3.139-3.662c.523-1.046 1.569-4.184 1.569-4.184s11.507 2.615 13.6 3.138c-.001 5.23-2.317 19.529-7.884 19.969-8.94.706-12.516-9.508-12.516-9.508",fill:"#FFC6A0"}),E.createElement("path",{d:"M102.971 72.243c2.616-2.093 3.489-9.775 3.489-9.775s-2.492-.492-6.676-2.062c-4.708-2.092-12.867-4.771-17.575.982-9.54 4.41-2.062 19.93-2.062 19.93l2.729-3.037s-3.956-3.304-2.092-6.277c2.183-3.48 3.943 1.08 3.943 1.08s.64-2.4 3.6-3.36c.356-.714 1.04-2.69 1.44-3.872a1.08 1.08 0 0 1 1.27-.707c2.41.56 8.723 2.03 11.417 2.676.524.126.876.619.825 1.156l-.308 3.266z",fill:"#520038"}),E.createElement("path",{d:"M101.22 76.514c-.104.613-.585 1.044-1.076.96-.49-.082-.805-.646-.702-1.26.104-.613.585-1.044 1.076-.961.491.083.805.647.702 1.26M94.26 75.074c-.104.613-.585 1.044-1.076.96-.49-.082-.805-.646-.702-1.26.104-.613.585-1.044 1.076-.96.491.082.805.646.702 1.26",fill:"#552950"}),E.createElement("path",{stroke:"#DB836E",strokeWidth:"1.063",strokeLinecap:"round",strokeLinejoin:"round",d:"M99.206 73.644l-.9 1.62-.3 4.38h-2.24"}),E.createElement("path",{d:"M99.926 73.284s1.8-.72 2.52.54",stroke:"#5C2552",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M81.367 73.084s.48-1.12 1.12-.72c.64.4 1.28 1.44.56 2s.16 1.68.16 1.68",stroke:"#DB836E",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M92.326 71.724s1.84 1.12 4.16.96",stroke:"#5C2552",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M92.726 80.604s2.24 1.2 4.4 1.2M93.686 83.164s.96.4 1.52.32M83.687 80.044s1.786 6.547 9.262 7.954",stroke:"#DB836E",strokeWidth:"1.063",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M95.548 91.663s-1.068 2.821-8.298 2.105c-7.23-.717-10.29-5.044-10.29-5.044",stroke:"#E4EBF7",strokeWidth:"1.136",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M78.126 87.478s6.526 4.972 16.47 2.486c0 0 9.577 1.02 11.536 5.322 5.36 11.77.543 36.835 0 39.962 3.496 4.055-.466 8.483-.466 8.483-15.624-3.548-35.81-.6-35.81-.6-4.849-3.546-1.223-9.044-1.223-9.044L62.38 110.32c-2.485-15.227.833-19.803 3.549-20.743 3.03-1.049 8.04-1.282 8.04-1.282.496-.058 1.08-.076 1.37-.233 2.36-1.282 2.787-.583 2.787-.583",fill:"#FFF"}),E.createElement("path",{d:"M65.828 89.81s-6.875.465-7.59 8.156c-.466 8.857 3.03 10.954 3.03 10.954s6.075 22.102 16.796 22.957c8.39-2.176 4.758-6.702 4.661-11.42-.233-11.304-7.108-16.897-7.108-16.897s-4.212-13.75-9.789-13.75",fill:"#FFC6A0"}),E.createElement("path",{d:"M71.716 124.225s.855 11.264 9.828 6.486c4.765-2.536 7.581-13.828 9.789-22.568 1.456-5.768 2.58-12.197 2.58-12.197l-4.973-1.709s-2.408 5.516-7.769 12.275c-4.335 5.467-9.144 11.11-9.455 17.713",fill:"#FFC6A0"}),E.createElement("path",{d:"M108.463 105.191s1.747 2.724-2.331 30.535c2.376 2.216 1.053 6.012-.233 7.51",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M123.262 131.527s-.427 2.732-11.77 1.981c-15.187-1.006-25.326-3.25-25.326-3.25l.933-5.8s.723.215 9.71-.068c11.887-.373 18.714-6.07 24.964-1.022 4.039 3.263 1.489 8.16 1.489 8.16",fill:"#FFC6A0"}),E.createElement("path",{d:"M70.24 90.974s-5.593-4.739-11.054 2.68c-3.318 7.223.517 15.284 2.664 19.578-.31 3.729 2.33 4.311 2.33 4.311s.108.895 1.516 2.68c4.078-7.03 6.72-9.166 13.711-12.546-.328-.656-1.877-3.265-1.825-3.767.175-1.69-1.282-2.623-1.282-2.623s-.286-.156-1.165-2.738c-.788-2.313-2.036-5.177-4.895-7.575",fill:"#FFF"}),E.createElement("path",{d:"M90.232 288.027s4.855 2.308 8.313 1.155c3.188-1.063 5.12.755 8.002 1.331 2.881.577 7.769 1.243 13.207-1.424-.117-6.228-7.786-4.499-13.518-7.588-2.895-1.56-4.276-5.336-4.066-9.944H91.544s-1.573 11.89-1.312 16.47",fill:"#CBD1D1"}),E.createElement("path",{d:"M90.207 287.833s2.745 1.437 7.639.738c3.456-.494 3.223.66 7.418 1.282 4.195.621 13.092-.194 14.334-1.126.466 1.242-.388 2.33-.388 2.33s-1.709.682-5.438.932c-2.295.154-8.098.276-10.14-.621-2.02-1.554-4.894-1.515-6.06-.234-4.427 1.075-7.184-.31-7.184-.31l-.181-2.991z",fill:"#2B0849"}),E.createElement("path",{d:"M98.429 272.257h3.496s-.117 7.574 5.127 9.671c-5.244.7-9.672-2.602-8.623-9.671",fill:"#A4AABA"}),E.createElement("path",{d:"M44.425 272.046s-2.208 7.774-4.702 12.899c-1.884 3.874-4.428 7.854 5.729 7.854 6.97 0 9.385-.503 7.782-6.917-1.604-6.415.279-13.836.279-13.836h-9.088z",fill:"#CBD1D1"}),E.createElement("path",{d:"M38.066 290.277s2.198 1.225 6.954 1.225c6.376 0 8.646-1.73 8.646-1.73s.63 1.168-.649 2.27c-1.04.897-3.77 1.668-7.745 1.621-4.347-.05-6.115-.593-7.062-1.224-.864-.577-.72-1.657-.144-2.162",fill:"#2B0849"}),E.createElement("path",{d:"M45.344 274.041s.035 1.592-.329 3.07c-.365 1.49-1.13 3.255-1.184 4.34-.061 1.206 4.755 1.657 5.403.036.65-1.622 1.357-6.737 2.006-7.602.648-.865-5.14-2.222-5.896.156",fill:"#A4AABA"}),E.createElement("path",{d:"M89.476 277.57l13.899.095s1.349-56.643 1.925-66.909c.576-10.267 3.923-45.052 1.042-65.585l-13.037-.669-23.737.81s-.452 4.12-1.243 10.365c-.065.515-.708.874-.777 1.417-.078.608.439 1.407.332 2.044-2.455 14.627-5.797 32.736-8.256 46.837-.121.693-1.282 1.048-1.515 2.796-.042.314.22 1.584.116 1.865-7.14 19.473-12.202 52.601-15.66 67.19l15.176-.015s2.282-10.145 4.185-18.871c2.922-13.389 24.012-88.32 24.012-88.32l3.133-.954-.158 48.568s-.233 1.282.35 2.098c.583.815-.581 1.167-.408 2.331l.408 1.864s-.466 7.458-.932 12.352c-.467 4.895 1.145 40.69 1.145 40.69",fill:"#7BB2F9"}),E.createElement("path",{d:"M64.57 218.881c1.197.099 4.195-2.097 7.225-5.127M96.024 222.534s2.881-1.152 6.34-4.034",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M96.973 219.373s2.882-1.153 6.34-4.034",stroke:"#648BD8",strokeWidth:"1.032",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M63.172 222.144s2.724-.614 6.759-3.496M74.903 146.166c-.281 3.226.31 8.856-4.506 9.478M93.182 144.344s.115 14.557-1.344 15.65c-2.305 1.73-3.107 2.02-3.107 2.02M89.197 144.923s.269 13.144-1.01 25.088M83.525 170.71s6.81-1.051 9.116-1.051M46.026 270.045l-.892 4.538M46.937 263.289l-.815 4.157M62.725 202.503c-.33 1.618-.102 1.904-.449 3.438 0 0-2.756 1.903-2.29 3.923.466 2.02-.31 3.424-4.505 17.252-1.762 5.807-4.233 18.922-6.165 28.278-.03.144-.521 2.646-1.14 5.8M64.158 194.136c-.295 1.658-.6 3.31-.917 4.938M71.33 146.787l-1.244 10.877s-1.14.155-.519 2.33c.117 1.399-2.778 16.39-5.382 31.615M44.242 273.727H58.07",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M106.18 142.117c-3.028-.489-18.825-2.744-36.219.2a.625.625 0 0 0-.518.644c.063 1.307.044 2.343.015 2.995a.617.617 0 0 0 .716.636c3.303-.534 17.037-2.412 35.664-.266.347.04.66-.214.692-.56.124-1.347.16-2.425.17-3.029a.616.616 0 0 0-.52-.62",fill:"#192064"}),E.createElement("path",{d:"M96.398 145.264l.003-5.102a.843.843 0 0 0-.809-.847 114.104 114.104 0 0 0-8.141-.014.85.85 0 0 0-.82.847l-.003 5.097c0 .476.388.857.864.845 2.478-.064 5.166-.067 8.03.017a.848.848 0 0 0 .876-.843",fill:"#FFF"}),E.createElement("path",{d:"M95.239 144.296l.002-3.195a.667.667 0 0 0-.643-.672c-1.9-.061-3.941-.073-6.094-.01a.675.675 0 0 0-.654.672l-.002 3.192c0 .376.305.677.68.669 1.859-.042 3.874-.043 6.02.012.376.01.69-.291.691-.668",fill:"#192064"}),E.createElement("path",{d:"M90.102 273.522h12.819M91.216 269.761c.006 3.519-.072 5.55 0 6.292M90.923 263.474c-.009 1.599-.016 2.558-.016 4.505M90.44 170.404l.932 46.38s.7 1.631-.233 2.796c-.932 1.166 2.564.7.932 2.33-1.63 1.633.933 1.166 0 3.497-.618 1.546-1.031 21.921-1.138 36.513",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M73.736 98.665l2.214 4.312s2.098.816 1.865 2.68l.816 2.214M64.297 116.611c.233-.932 2.176-7.147 12.585-10.488M77.598 90.042s7.691 6.137 16.547 2.72",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M91.974 86.954s5.476-.816 7.574-4.545c1.297-.345.72 2.212-.33 3.671-.7.971-1.01 1.554-1.01 1.554s.194.31.155.816c-.053.697-.175.653-.272 1.048-.081.335.108.657 0 1.049-.046.17-.198.5-.382.878-.12.249-.072.687-.2.948-.231.469-1.562 1.87-2.622 2.855-3.826 3.554-5.018 1.644-6.001-.408-.894-1.865-.661-5.127-.874-6.875-.35-2.914-2.622-3.03-1.923-4.429.343-.685 2.87.69 3.263 1.748.757 2.04 2.952 1.807 2.622 1.69",fill:"#FFC6A0"}),E.createElement("path",{d:"M99.8 82.429c-.465.077-.35.272-.97 1.243-.622.971-4.817 2.932-6.39 3.224-2.589.48-2.278-1.56-4.254-2.855-1.69-1.107-3.562-.638-1.398 1.398.99.932.932 1.107 1.398 3.205.335 1.506-.64 3.67.7 5.593",stroke:"#DB836E",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M79.543 108.673c-2.1 2.926-4.266 6.175-5.557 8.762",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M87.72 124.768s-2.098-1.942-5.127-2.719c-3.03-.777-3.574-.155-5.516.078-1.942.233-3.885-.932-3.652.7.233 1.63 5.05 1.01 5.206 2.097.155 1.087-6.37 2.796-8.313 2.175-.777.777.466 1.864 2.02 2.175.233 1.554 2.253 1.554 2.253 1.554s.699 1.01 2.641 1.088c2.486 1.32 8.934-.7 10.954-1.554 2.02-.855-.466-5.594-.466-5.594",fill:"#FFC6A0"}),E.createElement("path",{d:"M73.425 122.826s.66 1.127 3.167 1.418c2.315.27 2.563.583 2.563.583s-2.545 2.894-9.07 2.272M72.416 129.274s3.826.097 4.933-.718M74.98 130.75s1.961.136 3.36-.505M77.232 131.916s1.748.019 2.914-.505M73.328 122.321s-.595-1.032 1.262-.427c1.671.544 2.833.055 5.128.155 1.389.061 3.067-.297 3.982.15 1.606.784 3.632 2.181 3.632 2.181s10.526 1.204 19.033-1.127M78.864 108.104s-8.39 2.758-13.168 12.12",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M109.278 112.533s3.38-3.613 7.575-4.662",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M107.375 123.006s9.697-2.745 11.445-.88",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M194.605 83.656l3.971-3.886M187.166 90.933l3.736-3.655M191.752 84.207l-4.462-4.56M198.453 91.057l-4.133-4.225M129.256 163.074l3.718-3.718M122.291 170.039l3.498-3.498M126.561 163.626l-4.27-4.27M132.975 170.039l-3.955-3.955",stroke:"#BFCDDD",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M190.156 211.779h-1.604a4.023 4.023 0 0 1-4.011-4.011V175.68a4.023 4.023 0 0 1 4.01-4.01h1.605a4.023 4.023 0 0 1 4.011 4.01v32.088a4.023 4.023 0 0 1-4.01 4.01",fill:"#A3B4C6"}),E.createElement("path",{d:"M237.824 212.977a4.813 4.813 0 0 1-4.813 4.813h-86.636a4.813 4.813 0 0 1 0-9.626h86.636a4.813 4.813 0 0 1 4.813 4.813",fill:"#A3B4C6"}),E.createElement("mask",{fill:"#fff"}),E.createElement("path",{fill:"#A3B4C6",mask:"url(#d)",d:"M154.098 190.096h70.513v-84.617h-70.513z"}),E.createElement("path",{d:"M224.928 190.096H153.78a3.219 3.219 0 0 1-3.208-3.209V167.92a3.219 3.219 0 0 1 3.208-3.21h71.148a3.219 3.219 0 0 1 3.209 3.21v18.967a3.219 3.219 0 0 1-3.21 3.209M224.928 130.832H153.78a3.218 3.218 0 0 1-3.208-3.208v-18.968a3.219 3.219 0 0 1 3.208-3.209h71.148a3.219 3.219 0 0 1 3.209 3.21v18.967a3.218 3.218 0 0 1-3.21 3.208",fill:"#BFCDDD",mask:"url(#d)"}),E.createElement("path",{d:"M159.563 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M166.98 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M174.397 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M222.539 120.546h-22.461a.802.802 0 0 1-.802-.802v-3.208c0-.443.359-.803.802-.803h22.46c.444 0 .803.36.803.803v3.208c0 .443-.36.802-.802.802",fill:"#FFF",mask:"url(#d)"}),E.createElement("path",{d:"M224.928 160.464H153.78a3.218 3.218 0 0 1-3.208-3.209v-18.967a3.219 3.219 0 0 1 3.208-3.209h71.148a3.219 3.219 0 0 1 3.209 3.209v18.967a3.218 3.218 0 0 1-3.21 3.209",fill:"#BFCDDD",mask:"url(#d)"}),E.createElement("path",{d:"M173.455 130.832h49.301M164.984 130.832h6.089M155.952 130.832h6.75M173.837 160.613h49.3M165.365 160.613h6.089M155.57 160.613h6.751",stroke:"#7C90A5",strokeWidth:"1.124",strokeLinecap:"round",strokeLinejoin:"round",mask:"url(#d)"}),E.createElement("path",{d:"M159.563 151.038a2.407 2.407 0 1 1 0-4.814 2.407 2.407 0 0 1 0 4.814M166.98 151.038a2.407 2.407 0 1 1 0-4.814 2.407 2.407 0 0 1 0 4.814M174.397 151.038a2.407 2.407 0 1 1 .001-4.814 2.407 2.407 0 0 1 0 4.814M222.539 151.038h-22.461a.802.802 0 0 1-.802-.802v-3.209c0-.443.359-.802.802-.802h22.46c.444 0 .803.36.803.802v3.209c0 .443-.36.802-.802.802M159.563 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M166.98 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M174.397 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M222.539 179.987h-22.461a.802.802 0 0 1-.802-.802v-3.209c0-.443.359-.802.802-.802h22.46c.444 0 .803.36.803.802v3.209c0 .443-.36.802-.802.802",fill:"#FFF",mask:"url(#d)"}),E.createElement("path",{d:"M203.04 221.108h-27.372a2.413 2.413 0 0 1-2.406-2.407v-11.448a2.414 2.414 0 0 1 2.406-2.407h27.372a2.414 2.414 0 0 1 2.407 2.407V218.7a2.413 2.413 0 0 1-2.407 2.407",fill:"#BFCDDD",mask:"url(#d)"}),E.createElement("path",{d:"M177.259 207.217v11.52M201.05 207.217v11.52",stroke:"#A3B4C6",strokeWidth:"1.124",strokeLinecap:"round",strokeLinejoin:"round",mask:"url(#d)"}),E.createElement("path",{d:"M162.873 267.894a9.422 9.422 0 0 1-9.422-9.422v-14.82a9.423 9.423 0 0 1 18.845 0v14.82a9.423 9.423 0 0 1-9.423 9.422",fill:"#5BA02E",mask:"url(#d)"}),E.createElement("path",{d:"M171.22 267.83a9.422 9.422 0 0 1-9.422-9.423v-3.438a9.423 9.423 0 0 1 18.845 0v3.438a9.423 9.423 0 0 1-9.422 9.423",fill:"#92C110",mask:"url(#d)"}),E.createElement("path",{d:"M181.31 293.666h-27.712a3.209 3.209 0 0 1-3.209-3.21V269.79a3.209 3.209 0 0 1 3.209-3.21h27.711a3.209 3.209 0 0 1 3.209 3.21v20.668a3.209 3.209 0 0 1-3.209 3.209",fill:"#F2D7AD",mask:"url(#d)"}))),_we=vwe,xwe=t=>{const{componentCls:n,lineHeightHeading3:o,iconCls:s,padding:c,paddingXL:m,paddingXS:v,paddingLG:d,marginXS:C,lineHeight:S}=t;return{[n]:{padding:`${Xt(t.calc(d).mul(2).equal())} ${Xt(m)}`,"&-rtl":{direction:"rtl"}},[`${n} ${n}-image`]:{width:t.imageWidth,height:t.imageHeight,margin:"auto"},[`${n} ${n}-icon`]:{marginBottom:d,textAlign:"center",[`& > ${s}`]:{fontSize:t.iconFontSize}},[`${n} ${n}-title`]:{color:t.colorTextHeading,fontSize:t.titleFontSize,lineHeight:o,marginBlock:C,textAlign:"center"},[`${n} ${n}-subtitle`]:{color:t.colorTextDescription,fontSize:t.subtitleFontSize,lineHeight:S,textAlign:"center"},[`${n} ${n}-content`]:{marginTop:d,padding:`${Xt(d)} ${Xt(t.calc(c).mul(2.5).equal())}`,backgroundColor:t.colorFillAlter},[`${n} ${n}-extra`]:{margin:t.extraMargin,textAlign:"center","& > *":{marginInlineEnd:v,"&:last-child":{marginInlineEnd:0}}}}},bwe=t=>{const{componentCls:n,iconCls:o}=t;return{[`${n}-success ${n}-icon > ${o}`]:{color:t.resultSuccessIconColor},[`${n}-error ${n}-icon > ${o}`]:{color:t.resultErrorIconColor},[`${n}-info ${n}-icon > ${o}`]:{color:t.resultInfoIconColor},[`${n}-warning ${n}-icon > ${o}`]:{color:t.resultWarningIconColor}}},wwe=t=>[xwe(t),bwe(t)],Swe=t=>wwe(t),Cwe=t=>({titleFontSize:t.fontSizeHeading3,subtitleFontSize:t.fontSize,iconFontSize:t.fontSizeHeading3*3,extraMargin:`${t.paddingLG}px 0 0 0`}),Ewe=os("Result",t=>{const n=t.colorInfo,o=t.colorError,s=t.colorSuccess,c=t.colorWarning,m=Yi(t,{resultInfoIconColor:n,resultErrorIconColor:o,resultSuccessIconColor:s,resultWarningIconColor:c,imageWidth:250,imageHeight:295});return[Swe(m)]},Cwe),Twe=()=>E.createElement("svg",{width:"251",height:"294"},E.createElement("g",{fill:"none",fillRule:"evenodd"},E.createElement("path",{d:"M0 129.023v-2.084C0 58.364 55.591 2.774 124.165 2.774h2.085c68.574 0 124.165 55.59 124.165 124.165v2.084c0 68.575-55.59 124.166-124.165 124.166h-2.085C55.591 253.189 0 197.598 0 129.023",fill:"#E4EBF7"}),E.createElement("path",{d:"M41.417 132.92a8.231 8.231 0 1 1-16.38-1.65 8.231 8.231 0 0 1 16.38 1.65",fill:"#FFF"}),E.createElement("path",{d:"M38.652 136.36l10.425 5.91M49.989 148.505l-12.58 10.73",stroke:"#FFF",strokeWidth:"2"}),E.createElement("path",{d:"M41.536 161.28a5.636 5.636 0 1 1-11.216-1.13 5.636 5.636 0 0 1 11.216 1.13M59.154 145.261a5.677 5.677 0 1 1-11.297-1.138 5.677 5.677 0 0 1 11.297 1.138M100.36 29.516l29.66-.013a4.562 4.562 0 1 0-.004-9.126l-29.66.013a4.563 4.563 0 0 0 .005 9.126M111.705 47.754l29.659-.013a4.563 4.563 0 1 0-.004-9.126l-29.66.013a4.563 4.563 0 1 0 .005 9.126",fill:"#FFF"}),E.createElement("path",{d:"M114.066 29.503V29.5l15.698-.007a4.563 4.563 0 1 0 .004 9.126l-15.698.007v-.002a4.562 4.562 0 0 0-.004-9.122M185.405 137.723c-.55 5.455-5.418 9.432-10.873 8.882-5.456-.55-9.432-5.418-8.882-10.873.55-5.455 5.418-9.432 10.873-8.882 5.455.55 9.432 5.418 8.882 10.873",fill:"#FFF"}),E.createElement("path",{d:"M180.17 143.772l12.572 7.129M193.841 158.42L178.67 171.36",stroke:"#FFF",strokeWidth:"2"}),E.createElement("path",{d:"M185.55 171.926a6.798 6.798 0 1 1-13.528-1.363 6.798 6.798 0 0 1 13.527 1.363M204.12 155.285a6.848 6.848 0 1 1-13.627-1.375 6.848 6.848 0 0 1 13.626 1.375",fill:"#FFF"}),E.createElement("path",{d:"M152.988 194.074a2.21 2.21 0 1 1-4.42 0 2.21 2.21 0 0 1 4.42 0zM225.931 118.217a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.421 0zM217.09 153.051a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.42 0zM177.84 109.842a2.21 2.21 0 1 1-4.422 0 2.21 2.21 0 0 1 4.421 0zM196.114 94.454a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.421 0zM202.844 182.523a2.21 2.21 0 1 1-4.42 0 2.21 2.21 0 0 1 4.42 0z",stroke:"#FFF",strokeWidth:"2"}),E.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M215.125 155.262l-1.902 20.075-10.87 5.958M174.601 176.636l-6.322 9.761H156.98l-4.484 6.449M175.874 127.28V111.56M221.51 119.404l-12.77 7.859-15.228-7.86V96.668"}),E.createElement("path",{d:"M180.68 29.32C180.68 13.128 193.806 0 210 0c16.193 0 29.32 13.127 29.32 29.32 0 16.194-13.127 29.322-29.32 29.322-16.193 0-29.32-13.128-29.32-29.321",fill:"#A26EF4"}),E.createElement("path",{d:"M221.45 41.706l-21.563-.125a1.744 1.744 0 0 1-1.734-1.754l.071-12.23a1.744 1.744 0 0 1 1.754-1.734l21.562.125c.964.006 1.74.791 1.735 1.755l-.071 12.229a1.744 1.744 0 0 1-1.754 1.734",fill:"#FFF"}),E.createElement("path",{d:"M215.106 29.192c-.015 2.577-2.049 4.654-4.543 4.64-2.494-.014-4.504-2.115-4.489-4.693l.04-6.925c.016-2.577 2.05-4.654 4.543-4.64 2.494.015 4.504 2.116 4.49 4.693l-.04 6.925zm-4.53-14.074a6.877 6.877 0 0 0-6.916 6.837l-.043 7.368a6.877 6.877 0 0 0 13.754.08l.042-7.368a6.878 6.878 0 0 0-6.837-6.917zM167.566 68.367h-3.93a4.73 4.73 0 0 1-4.717-4.717 4.73 4.73 0 0 1 4.717-4.717h3.93a4.73 4.73 0 0 1 4.717 4.717 4.73 4.73 0 0 1-4.717 4.717",fill:"#FFF"}),E.createElement("path",{d:"M168.214 248.838a6.611 6.611 0 0 1-6.61-6.611v-66.108a6.611 6.611 0 0 1 13.221 0v66.108a6.611 6.611 0 0 1-6.61 6.61",fill:"#5BA02E"}),E.createElement("path",{d:"M176.147 248.176a6.611 6.611 0 0 1-6.61-6.61v-33.054a6.611 6.611 0 1 1 13.221 0v33.053a6.611 6.611 0 0 1-6.61 6.611",fill:"#92C110"}),E.createElement("path",{d:"M185.994 293.89h-27.376a3.17 3.17 0 0 1-3.17-3.17v-45.887a3.17 3.17 0 0 1 3.17-3.17h27.376a3.17 3.17 0 0 1 3.17 3.17v45.886a3.17 3.17 0 0 1-3.17 3.17",fill:"#F2D7AD"}),E.createElement("path",{d:"M81.972 147.673s6.377-.927 17.566-1.28c11.729-.371 17.57 1.086 17.57 1.086s3.697-3.855.968-8.424c1.278-12.077 5.982-32.827.335-48.273-1.116-1.339-3.743-1.512-7.536-.62-1.337.315-7.147-.149-7.983-.1l-15.311-.347s-3.487-.17-8.035-.508c-1.512-.113-4.227-1.683-5.458-.338-.406.443-2.425 5.669-1.97 16.077l8.635 35.642s-3.141 3.61 1.219 7.085",fill:"#FFF"}),E.createElement("path",{d:"M75.768 73.325l-.9-6.397 11.982-6.52s7.302-.118 8.038 1.205c.737 1.324-5.616.993-5.616.993s-1.836 1.388-2.615 2.5c-1.654 2.363-.986 6.471-8.318 5.986-1.708.284-2.57 2.233-2.57 2.233",fill:"#FFC6A0"}),E.createElement("path",{d:"M52.44 77.672s14.217 9.406 24.973 14.444c1.061.497-2.094 16.183-11.892 11.811-7.436-3.318-20.162-8.44-21.482-14.496-.71-3.258 2.543-7.643 8.401-11.76M141.862 80.113s-6.693 2.999-13.844 6.876c-3.894 2.11-10.137 4.704-12.33 7.988-6.224 9.314 3.536 11.22 12.947 7.503 6.71-2.651 28.999-12.127 13.227-22.367",fill:"#FFB594"}),E.createElement("path",{d:"M76.166 66.36l3.06 3.881s-2.783 2.67-6.31 5.747c-7.103 6.195-12.803 14.296-15.995 16.44-3.966 2.662-9.754 3.314-12.177-.118-3.553-5.032.464-14.628 31.422-25.95",fill:"#FFC6A0"}),E.createElement("path",{d:"M64.674 85.116s-2.34 8.413-8.912 14.447c.652.548 18.586 10.51 22.144 10.056 5.238-.669 6.417-18.968 1.145-20.531-.702-.208-5.901-1.286-8.853-2.167-.87-.26-1.611-1.71-3.545-.936l-1.98-.869zM128.362 85.826s5.318 1.956 7.325 13.734c-.546.274-17.55 12.35-21.829 7.805-6.534-6.94-.766-17.393 4.275-18.61 4.646-1.121 5.03-1.37 10.23-2.929",fill:"#FFF"}),E.createElement("path",{d:"M78.18 94.656s.911 7.41-4.914 13.078",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M87.397 94.68s3.124 2.572 10.263 2.572c7.14 0 9.074-3.437 9.074-3.437",stroke:"#E4EBF7",strokeWidth:".932",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M117.184 68.639l-6.781-6.177s-5.355-4.314-9.223-.893c-3.867 3.422 4.463 2.083 5.653 4.165 1.19 2.082.848 1.143-2.083.446-5.603-1.331-2.082.893 2.975 5.355 2.091 1.845 6.992.955 6.992.955l2.467-3.851z",fill:"#FFC6A0"}),E.createElement("path",{d:"M105.282 91.315l-.297-10.937-15.918-.027-.53 10.45c-.026.403.17.788.515.999 2.049 1.251 9.387 5.093 15.799.424.287-.21.443-.554.431-.91",fill:"#FFB594"}),E.createElement("path",{d:"M107.573 74.24c.817-1.147.982-9.118 1.015-11.928a1.046 1.046 0 0 0-.965-1.055l-4.62-.365c-7.71-1.044-17.071.624-18.253 6.346-5.482 5.813-.421 13.244-.421 13.244s1.963 3.566 4.305 6.791c.756 1.041.398-3.731 3.04-5.929 5.524-4.594 15.899-7.103 15.899-7.103",fill:"#5C2552"}),E.createElement("path",{d:"M88.426 83.206s2.685 6.202 11.602 6.522c7.82.28 8.973-7.008 7.434-17.505l-.909-5.483c-6.118-2.897-15.478.54-15.478.54s-.576 2.044-.19 5.504c-2.276 2.066-1.824 5.618-1.824 5.618s-.905-1.922-1.98-2.321c-.86-.32-1.897.089-2.322 1.98-1.04 4.632 3.667 5.145 3.667 5.145",fill:"#FFC6A0"}),E.createElement("path",{stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round",d:"M100.843 77.099l1.701-.928-1.015-4.324.674-1.406"}),E.createElement("path",{d:"M105.546 74.092c-.022.713-.452 1.279-.96 1.263-.51-.016-.904-.607-.882-1.32.021-.713.452-1.278.96-1.263.51.016.904.607.882 1.32M97.592 74.349c-.022.713-.452 1.278-.961 1.263-.509-.016-.904-.607-.882-1.32.022-.713.452-1.279.961-1.263.51.016.904.606.882 1.32",fill:"#552950"}),E.createElement("path",{d:"M91.132 86.786s5.269 4.957 12.679 2.327",stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M99.776 81.903s-3.592.232-1.44-2.79c1.59-1.496 4.897-.46 4.897-.46s1.156 3.906-3.457 3.25",fill:"#DB836E"}),E.createElement("path",{d:"M102.88 70.6s2.483.84 3.402.715M93.883 71.975s2.492-1.144 4.778-1.073",stroke:"#5C2552",strokeWidth:"1.526",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M86.32 77.374s.961.879 1.458 2.106c-.377.48-1.033 1.152-.236 1.809M99.337 83.719s1.911.151 2.509-.254",stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M87.782 115.821l15.73-3.012M100.165 115.821l10.04-2.008",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M66.508 86.763s-1.598 8.83-6.697 14.078",stroke:"#E4EBF7",strokeWidth:"1.114",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M128.31 87.934s3.013 4.121 4.06 11.785",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M64.09 84.816s-6.03 9.912-13.607 9.903",stroke:"#DB836E",strokeWidth:".795",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M112.366 65.909l-.142 5.32s5.993 4.472 11.945 9.202c4.482 3.562 8.888 7.455 10.985 8.662 4.804 2.766 8.9 3.355 11.076 1.808 4.071-2.894 4.373-9.878-8.136-15.263-4.271-1.838-16.144-6.36-25.728-9.73",fill:"#FFC6A0"}),E.createElement("path",{d:"M130.532 85.488s4.588 5.757 11.619 6.214",stroke:"#DB836E",strokeWidth:".75",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M121.708 105.73s-.393 8.564-1.34 13.612",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M115.784 161.512s-3.57-1.488-2.678-7.14",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M101.52 290.246s4.326 2.057 7.408 1.03c2.842-.948 4.564.673 7.132 1.186 2.57.514 6.925 1.108 11.772-1.269-.104-5.551-6.939-4.01-12.048-6.763-2.582-1.39-3.812-4.757-3.625-8.863h-9.471s-1.402 10.596-1.169 14.68",fill:"#CBD1D1"}),E.createElement("path",{d:"M101.496 290.073s2.447 1.281 6.809.658c3.081-.44 3.74.485 7.479 1.039 3.739.554 10.802-.07 11.91-.9.415 1.108-.347 2.077-.347 2.077s-1.523.608-4.847.831c-2.045.137-5.843.293-7.663-.507-1.8-1.385-5.286-1.917-5.77-.243-3.947.958-7.41-.288-7.41-.288l-.16-2.667z",fill:"#2B0849"}),E.createElement("path",{d:"M108.824 276.19h3.116s-.103 6.751 4.57 8.62c-4.673.624-8.62-2.32-7.686-8.62",fill:"#A4AABA"}),E.createElement("path",{d:"M57.65 272.52s-2.122 7.47-4.518 12.396c-1.811 3.724-4.255 7.548 5.505 7.548 6.698 0 9.02-.483 7.479-6.648-1.541-6.164.268-13.296.268-13.296H57.65z",fill:"#CBD1D1"}),E.createElement("path",{d:"M51.54 290.04s2.111 1.178 6.682 1.178c6.128 0 8.31-1.662 8.31-1.662s.605 1.122-.624 2.18c-1 .862-3.624 1.603-7.444 1.559-4.177-.049-5.876-.57-6.786-1.177-.831-.554-.692-1.593-.138-2.078",fill:"#2B0849"}),E.createElement("path",{d:"M58.533 274.438s.034 1.529-.315 2.95c-.352 1.431-1.087 3.127-1.139 4.17-.058 1.16 4.57 1.592 5.194.035.623-1.559 1.303-6.475 1.927-7.306.622-.831-4.94-2.135-5.667.15",fill:"#A4AABA"}),E.createElement("path",{d:"M100.885 277.015l13.306.092s1.291-54.228 1.843-64.056c.552-9.828 3.756-43.13.997-62.788l-12.48-.64-22.725.776s-.433 3.944-1.19 9.921c-.062.493-.677.838-.744 1.358-.075.582.42 1.347.318 1.956-2.35 14.003-6.343 32.926-8.697 46.425-.116.663-1.227 1.004-1.45 2.677-.04.3.21 1.516.112 1.785-6.836 18.643-10.89 47.584-14.2 61.551l14.528-.014s2.185-8.524 4.008-16.878c2.796-12.817 22.987-84.553 22.987-84.553l3-.517 1.037 46.1s-.223 1.228.334 2.008c.558.782-.556 1.117-.39 2.233l.39 1.784s-.446 7.14-.892 11.826c-.446 4.685-.092 38.954-.092 38.954",fill:"#7BB2F9"}),E.createElement("path",{d:"M77.438 220.434c1.146.094 4.016-2.008 6.916-4.91M107.55 223.931s2.758-1.103 6.069-3.862",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M108.459 220.905s2.759-1.104 6.07-3.863",stroke:"#648BD8",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M76.099 223.557s2.608-.587 6.47-3.346M87.33 150.82c-.27 3.088.297 8.478-4.315 9.073M104.829 149.075s.11 13.936-1.286 14.983c-2.207 1.655-2.975 1.934-2.975 1.934M101.014 149.63s.035 12.81-1.19 24.245M94.93 174.965s7.174-1.655 9.38-1.655M75.671 204.754c-.316 1.55-.64 3.067-.973 4.535 0 0-1.45 1.822-1.003 3.756.446 1.934-.943 2.034-4.96 15.273-1.686 5.559-4.464 18.49-6.313 27.447-.078.38-4.018 18.06-4.093 18.423M77.043 196.743a313.269 313.269 0 0 1-.877 4.729M83.908 151.414l-1.19 10.413s-1.091.148-.496 2.23c.111 1.34-2.66 15.692-5.153 30.267M57.58 272.94h13.238",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),E.createElement("path",{d:"M117.377 147.423s-16.955-3.087-35.7.199c.157 2.501-.002 4.128-.002 4.128s14.607-2.802 35.476-.31c.251-2.342.226-4.017.226-4.017",fill:"#192064"}),E.createElement("path",{d:"M107.511 150.353l.004-4.885a.807.807 0 0 0-.774-.81c-2.428-.092-5.04-.108-7.795-.014a.814.814 0 0 0-.784.81l-.003 4.88c0 .456.371.82.827.808a140.76 140.76 0 0 1 7.688.017.81.81 0 0 0 .837-.806",fill:"#FFF"}),E.createElement("path",{d:"M106.402 149.426l.002-3.06a.64.64 0 0 0-.616-.643 94.135 94.135 0 0 0-5.834-.009.647.647 0 0 0-.626.643l-.001 3.056c0 .36.291.648.651.64 1.78-.04 3.708-.041 5.762.012.36.009.662-.279.662-.64",fill:"#192064"}),E.createElement("path",{d:"M101.485 273.933h12.272M102.652 269.075c.006 3.368.04 5.759.11 6.47M102.667 263.125c-.009 1.53-.015 2.98-.016 4.313M102.204 174.024l.893 44.402s.669 1.561-.224 2.677c-.892 1.116 2.455.67.893 2.231-1.562 1.562.893 1.116 0 3.347-.592 1.48-.988 20.987-1.09 34.956",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}))),Iwe=Twe,Mwe={success:HO,error:S0,info:GO,warning:mwe},Cw={404:ywe,500:_we,403:Iwe},Pwe=Object.keys(Cw),Awe=t=>{let{prefixCls:n,icon:o,status:s}=t;const c=Gt(`${n}-icon`);if(Pwe.includes(`${s}`)){const v=Cw[s];return E.createElement("div",{className:`${c} ${n}-image`},E.createElement(v,null))}const m=E.createElement(Mwe[s]);return o===null||o===!1?null:E.createElement("div",{className:c},o||m)},Rwe=t=>{let{prefixCls:n,extra:o}=t;return o?E.createElement("div",{className:`${n}-extra`},o):null},vM=t=>{let{prefixCls:n,className:o,rootClassName:s,subTitle:c,title:m,style:v,children:d,status:C="info",icon:S,extra:R}=t;const{getPrefixCls:D,direction:$,result:H}=E.useContext(hi),Z=D("result",n),[X,Q,G]=Ewe(Z),K=Gt(Z,`${Z}-${C}`,o,H?.className,s,{[`${Z}-rtl`]:$==="rtl"},Q,G),Y=Object.assign(Object.assign({},H?.style),v);return X(E.createElement("div",{className:K,style:Y},E.createElement(Awe,{prefixCls:Z,status:C,icon:S}),E.createElement("div",{className:`${Z}-title`},m),c&&E.createElement("div",{className:`${Z}-subtitle`},c),E.createElement(Rwe,{prefixCls:Z,extra:R}),d&&E.createElement("div",{className:`${Z}-content`},d)))};vM.PRESENTED_IMAGE_403=Cw[403];vM.PRESENTED_IMAGE_404=Cw[404];vM.PRESENTED_IMAGE_500=Cw[500];const kwe=vM;var hm={},Ew="rc-table-internal-hook";function $z(t){var n=E.createContext(void 0),o=function(c){var m=c.value,v=c.children,d=E.useRef(m);d.current=m;var C=E.useState(function(){return{getValue:function(){return d.current},listeners:new Set}}),S=nr(C,1),R=S[0];return zo(function(){Nh.unstable_batchedUpdates(function(){R.listeners.forEach(function(D){D(m)})})},[m]),E.createElement(n.Provider,{value:R},v)};return{Context:n,Provider:o,defaultValue:t}}function hc(t,n){var o=ws(typeof n=="function"?n:function(D){if(n===void 0)return D;if(!Array.isArray(n))return D[n];var $={};return n.forEach(function(H){$[H]=D[H]}),$}),s=E.useContext(t?.Context),c=s||{},m=c.listeners,v=c.getValue,d=E.useRef();d.current=o(s?v():t?.defaultValue);var C=E.useState({}),S=nr(C,2),R=S[1];return zo(function(){if(!s)return;function D($){var H=o($);Vh(d.current,H,!0)||R({})}return m.add(D),function(){m.delete(D)}},[s]),d.current}function Owe(){var t=E.createContext(null);function n(){return E.useContext(t)}function o(c,m){var v=jh(c),d=function(S,R){var D=v?{ref:R}:{},$=E.useRef(0),H=E.useRef(S),Z=n();return Z!==null?E.createElement(c,Mr({},S,D)):((!m||m(H.current,S))&&($.current+=1),H.current=S,E.createElement(t.Provider,{value:$.current},E.createElement(c,Mr({},S,D))))};return v?E.forwardRef(d):d}function s(c,m){var v=jh(c),d=function(S,R){var D=v?{ref:R}:{};return n(),E.createElement(c,Mr({},S,D))};return v?E.memo(E.forwardRef(d),m):E.memo(d,m)}return{makeImmutable:o,responseImmutable:s,useImmutableMark:n}}var Bz=Owe(),WW=Bz.makeImmutable,I0=Bz.responseImmutable,zwe=Bz.useImmutableMark,Fc=$z();function Dwe(t,n){var o=E.useRef(0);o.current+=1;var s=E.useRef(t),c=[];Object.keys(t||{}).map(function(v){var d;t?.[v]!==((d=s.current)===null||d===void 0?void 0:d[v])&&c.push(v)}),s.current=t;var m=E.useRef([]);return c.length&&(m.current=c),E.useDebugValue(o.current),E.useDebugValue(m.current.join(", ")),n&&console.log("".concat(n,":"),o.current,m.current),o.current}var Lwe=E.memo(function(){var t=Dwe();return E.createElement("h1",null,"Render Times: ",t)});Lwe.displayName="RenderBlock";var KW=E.createContext({renderWithProps:!1}),$we="RC_TABLE_KEY";function Bwe(t){return t==null?[]:Array.isArray(t)?t:[t]}function _M(t){var n=[],o={};return t.forEach(function(s){for(var c=s||{},m=c.key,v=c.dataIndex,d=m||Bwe(v).join("-")||$we;o[d];)d="".concat(d,"_next");o[d]=!0,n.push(d)}),n}function KR(t){return t!=null}function Fwe(t){return t&&Ei(t)==="object"&&!Array.isArray(t)&&!E.isValidElement(t)}function Nwe(t,n,o,s,c,m){var v=E.useContext(KW),d=zwe(),C=Hm(function(){if(KR(s))return[s];var S=n==null||n===""?[]:Array.isArray(n)?n:[n],R=Yu(t,S),D=R,$=void 0;if(c){var H=c(R,t,o);Fwe(H)?(D=H.children,$=H.props,v.renderWithProps=!0):D=H}return[D,$]},[d,t,s,n,c,o],function(S,R){if(m){var D=nr(S,2),$=D[1],H=nr(R,2),Z=H[1];return m(Z,$)}return v.renderWithProps?!0:!Vh(S,R,!0)});return C}function jwe(t,n,o,s){var c=t+n-1;return t<=s&&c>=o}function Vwe(t,n){return hc(Fc,function(o){var s=jwe(t,n||1,o.hoverStartRow,o.hoverEndRow);return[s,o.onHover]})}var Uwe=function(n){var o=n.ellipsis,s=n.rowType,c=n.children,m,v=o===!0?{showTitle:!0}:o;return v&&(v.showTitle||s==="header")&&(typeof c=="string"||typeof c=="number"?m=c.toString():E.isValidElement(c)&&typeof c.props.children=="string"&&(m=c.props.children)),m};function Hwe(t){var n,o,s,c,m,v,d,C,S=t.component,R=t.children,D=t.ellipsis,$=t.scope,H=t.prefixCls,Z=t.className,X=t.align,Q=t.record,G=t.render,K=t.dataIndex,Y=t.renderIndex,re=t.shouldCellUpdate,fe=t.index,me=t.rowType,pe=t.colSpan,xe=t.rowSpan,Se=t.fixLeft,oe=t.fixRight,Re=t.firstFixLeft,Ve=t.lastFixLeft,Oe=t.firstFixRight,_e=t.lastFixRight,Fe=t.appendNode,Le=t.additionalProps,Me=Le===void 0?{}:Le,Ce=t.isSticky,Ye="".concat(H,"-cell"),qe=hc(Fc,["supportSticky","allColumnsFixedLeft"]),rt=qe.supportSticky,Qe=qe.allColumnsFixedLeft,St=Nwe(Q,K,Y,R,G,re),jt=nr(St,2),Ot=jt[0],Tt=jt[1],ct={},Ct=typeof Se=="number"&&rt,kt=typeof oe=="number"&&rt;Ct&&(ct.position="sticky",ct.left=Se),kt&&(ct.position="sticky",ct.right=oe);var zt=(n=(o=(s=Tt?.colSpan)!==null&&s!==void 0?s:Me.colSpan)!==null&&o!==void 0?o:pe)!==null&&n!==void 0?n:1,Nt=(c=(m=(v=Tt?.rowSpan)!==null&&v!==void 0?v:Me.rowSpan)!==null&&m!==void 0?m:xe)!==null&&c!==void 0?c:1,Rt=Vwe(fe,Nt),Pt=nr(Rt,2),Dt=Pt[0],Ut=Pt[1],sr=ws(function($t){var It;Q&&Ut(fe,fe+Nt-1),Me==null||(It=Me.onMouseEnter)===null||It===void 0||It.call(Me,$t)}),vt=ws(function($t){var It;Q&&Ut(-1,-1),Me==null||(It=Me.onMouseLeave)===null||It===void 0||It.call(Me,$t)});if(zt===0||Nt===0)return null;var De=(d=Me.title)!==null&&d!==void 0?d:Uwe({rowType:me,ellipsis:D,children:Ot}),ze=Gt(Ye,Z,(C={},xt(C,"".concat(Ye,"-fix-left"),Ct&&rt),xt(C,"".concat(Ye,"-fix-left-first"),Re&&rt),xt(C,"".concat(Ye,"-fix-left-last"),Ve&&rt),xt(C,"".concat(Ye,"-fix-left-all"),Ve&&Qe&&rt),xt(C,"".concat(Ye,"-fix-right"),kt&&rt),xt(C,"".concat(Ye,"-fix-right-first"),Oe&&rt),xt(C,"".concat(Ye,"-fix-right-last"),_e&&rt),xt(C,"".concat(Ye,"-ellipsis"),D),xt(C,"".concat(Ye,"-with-append"),Fe),xt(C,"".concat(Ye,"-fix-sticky"),(Ct||kt)&&Ce&&rt),xt(C,"".concat(Ye,"-row-hover"),!Tt&&Dt),C),Me.className,Tt?.className),ve={};X&&(ve.textAlign=X);var pt=yt(yt(yt(yt({},ct),Me.style),ve),Tt?.style),gt=Ot;return Ei(gt)==="object"&&!Array.isArray(gt)&&!E.isValidElement(gt)&&(gt=null),D&&(Ve||Oe)&&(gt=E.createElement("span",{className:"".concat(Ye,"-content")},gt)),E.createElement(S,Mr({},Tt,Me,{className:ze,style:pt,title:De,scope:$,onMouseEnter:sr,onMouseLeave:vt,colSpan:zt!==1?zt:null,rowSpan:Nt!==1?Nt:null}),Fe,gt)}const Py=E.memo(Hwe);function Fz(t,n,o,s,c,m){var v=o[t]||{},d=o[n]||{},C,S;v.fixed==="left"?C=s.left[c==="rtl"?n:t]:d.fixed==="right"&&(S=s.right[c==="rtl"?t:n]);var R=!1,D=!1,$=!1,H=!1,Z=o[n+1],X=o[t-1],Q=!(m!=null&&m.children);if(c==="rtl"){if(C!==void 0){var G=X&&X.fixed==="left";H=!G&&Q}else if(S!==void 0){var K=Z&&Z.fixed==="right";$=!K&&Q}}else if(C!==void 0){var Y=Z&&Z.fixed==="left";R=!Y&&Q}else if(S!==void 0){var re=X&&X.fixed==="right";D=!re&&Q}return{fixLeft:C,fixRight:S,lastFixLeft:R,firstFixRight:D,lastFixRight:$,firstFixLeft:H,isSticky:s.isSticky}}var ZW=E.createContext({});function Gwe(t){var n=t.className,o=t.index,s=t.children,c=t.colSpan,m=c===void 0?1:c,v=t.rowSpan,d=t.align,C=hc(Fc,["prefixCls","direction"]),S=C.prefixCls,R=C.direction,D=E.useContext(ZW),$=D.scrollColumnIndex,H=D.stickyOffsets,Z=D.flattenColumns,X=D.columns,Q=o+m-1,G=Q+1===$?m+1:m,K=Fz(o,o+G-1,Z,H,R,X?.[o]);return E.createElement(Py,Mr({className:n,index:o,component:"td",prefixCls:S,record:null,dataIndex:null,align:d,colSpan:G,rowSpan:v,render:function(){return s}},K))}var qwe=["children"];function Wwe(t){var n=t.children,o=xi(t,qwe);return E.createElement("tr",o,n)}function xM(t){var n=t.children;return n}xM.Row=Wwe;xM.Cell=Gwe;function Kwe(t){var n=t.children,o=t.stickyOffsets,s=t.flattenColumns,c=t.columns,m=hc(Fc,"prefixCls"),v=s.length-1,d=s[v],C=E.useMemo(function(){return{stickyOffsets:o,flattenColumns:s,scrollColumnIndex:d!=null&&d.scrollbar?v:null,columns:c}},[d,s,v,o,c]);return E.createElement(ZW.Provider,{value:C},E.createElement("tfoot",{className:"".concat(m,"-summary")},n))}const vE=I0(Kwe);var XW=xM;function Zwe(t){return null}function Xwe(t){return null}function YW(t,n,o,s,c,m,v){t.push({record:n,indent:o,index:v});var d=m(n),C=c?.has(d);if(n&&Array.isArray(n[s])&&C)for(var S=0;S<n[s].length;S+=1)YW(t,n[s][S],o+1,s,c,m,S)}function JW(t,n,o,s){var c=E.useMemo(function(){if(o!=null&&o.size){for(var m=[],v=0;v<t?.length;v+=1){var d=t[v];YW(m,d,0,n,o,s,v)}return m}return t?.map(function(C,S){return{record:C,indent:0,index:S}})},[t,n,o,s]);return c}function QW(t,n,o,s){var c=hc(Fc,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),m=c.flattenColumns,v=c.expandableType,d=c.expandedKeys,C=c.childrenColumnName,S=c.onTriggerExpand,R=c.rowExpandable,D=c.onRow,$=c.expandRowByClick,H=c.rowClassName,Z=v==="nest",X=v==="row"&&(!R||R(t)),Q=X||Z,G=d&&d.has(n),K=C&&t&&t[C],Y=ws(S),re=D?.(t,o),fe=re?.onClick,me=function(oe){$&&Q&&S(t,oe);for(var Re=arguments.length,Ve=new Array(Re>1?Re-1:0),Oe=1;Oe<Re;Oe++)Ve[Oe-1]=arguments[Oe];fe?.apply(void 0,[oe].concat(Ve))},pe;typeof H=="string"?pe=H:typeof H=="function"&&(pe=H(t,o,s));var xe=_M(m);return yt(yt({},c),{},{columnsKey:xe,nestExpandable:Z,expanded:G,hasNestChildren:K,record:t,onTriggerExpand:Y,rowSupportExpand:X,expandable:Q,rowProps:yt(yt({},re),{},{className:Gt(pe,re?.className),onClick:me})})}function eK(t){var n=t.prefixCls,o=t.children,s=t.component,c=t.cellComponent,m=t.className,v=t.expanded,d=t.colSpan,C=t.isEmpty,S=hc(Fc,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),R=S.scrollbarSize,D=S.fixHeader,$=S.fixColumn,H=S.componentWidth,Z=S.horizonScroll,X=o;return(C?Z&&H:$)&&(X=E.createElement("div",{style:{width:H-(D?R:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(n,"-expanded-row-fixed")},X)),E.createElement(s,{className:m,style:{display:v?null:"none"}},E.createElement(Py,{component:c,prefixCls:n,colSpan:d},X))}function tK(t,n,o,s,c){var m=t.record,v=t.prefixCls,d=t.columnsKey,C=t.fixedInfoList,S=t.expandIconColumnIndex,R=t.nestExpandable,D=t.indentSize,$=t.expandIcon,H=t.expanded,Z=t.hasNestChildren,X=t.onTriggerExpand,Q=d[o],G=C[o],K;o===(S||0)&&R&&(K=E.createElement(E.Fragment,null,E.createElement("span",{style:{paddingLeft:"".concat(D*s,"px")},className:"".concat(v,"-row-indent indent-level-").concat(s)}),$({prefixCls:v,expanded:H,expandable:Z,record:m,onExpand:X})));var Y;return n.onCell&&(Y=n.onCell(m,c)),{key:Q,fixedInfo:G,appendCellNode:K,additionalCellProps:Y||{}}}function rK(t){var n=t.className,o=t.style,s=t.record,c=t.index,m=t.renderIndex,v=t.rowKey,d=t.indent,C=d===void 0?0:d,S=t.rowComponent,R=t.cellComponent,D=t.scopeCellComponent,$=QW(s,v,c,C),H=$.prefixCls,Z=$.flattenColumns,X=$.expandedRowClassName,Q=$.expandedRowRender,G=$.rowProps,K=$.expanded,Y=$.rowSupportExpand,re=E.useRef(!1);re.current||(re.current=K);var fe=E.createElement(S,Mr({},G,{"data-row-key":v,className:Gt(n,"".concat(H,"-row"),"".concat(H,"-row-level-").concat(C),G?.className),style:yt(yt({},o),G?.style)}),Z.map(function(Se,oe){var Re=Se.render,Ve=Se.dataIndex,Oe=Se.className,_e=tK($,Se,oe,C,c),Fe=_e.key,Le=_e.fixedInfo,Me=_e.appendCellNode,Ce=_e.additionalCellProps;return E.createElement(Py,Mr({className:Oe,ellipsis:Se.ellipsis,align:Se.align,scope:Se.rowScope,component:Se.rowScope?D:R,prefixCls:H,key:Fe,record:s,index:c,renderIndex:m,dataIndex:Ve,render:Re,shouldCellUpdate:Se.shouldCellUpdate},Le,{appendNode:Me,additionalProps:Ce}))})),me;if(Y&&(re.current||K)){var pe=Q(s,c,C+1,K),xe=X&&X(s,c,C);me=E.createElement(eK,{expanded:K,className:Gt("".concat(H,"-expanded-row"),"".concat(H,"-expanded-row-level-").concat(C+1),xe),prefixCls:H,component:S,cellComponent:R,colSpan:Z.length,isEmpty:!1},pe)}return E.createElement(E.Fragment,null,fe,me)}rK.displayName="BodyRow";const Ywe=I0(rK);function Jwe(t){var n=t.columnKey,o=t.onColumnResize,s=E.useRef();return E.useEffect(function(){s.current&&o(n,s.current.offsetWidth)},[]),E.createElement(nh,{data:n},E.createElement("td",{ref:s,style:{padding:0,border:0,height:0}},E.createElement("div",{style:{height:0,overflow:"hidden"}}," ")))}function Qwe(t){var n=t.prefixCls,o=t.columnsKey,s=t.onColumnResize;return E.createElement("tr",{"aria-hidden":"true",className:"".concat(n,"-measure-row"),style:{height:0,fontSize:0}},E.createElement(nh.Collection,{onBatchResize:function(m){m.forEach(function(v){var d=v.data,C=v.size;s(d,C.offsetWidth)})}},o.map(function(c){return E.createElement(Jwe,{key:c,columnKey:c,onColumnResize:s})})))}function nK(t){var n=t.data,o=t.measureColumnWidth,s=hc(Fc,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode"]),c=s.prefixCls,m=s.getComponent,v=s.onColumnResize,d=s.flattenColumns,C=s.getRowKey,S=s.expandedKeys,R=s.childrenColumnName,D=s.emptyNode,$=JW(n,R,S,C),H=E.useRef({renderWithProps:!1}),Z=m(["body","wrapper"],"tbody"),X=m(["body","row"],"tr"),Q=m(["body","cell"],"td"),G=m(["body","cell"],"th"),K;n.length?K=$.map(function(re,fe){var me=re.record,pe=re.indent,xe=re.index,Se=C(me,fe);return E.createElement(Ywe,{key:Se,rowKey:Se,record:me,index:fe,renderIndex:xe,rowComponent:X,cellComponent:Q,scopeCellComponent:G,getRowKey:C,indent:pe})}):K=E.createElement(eK,{expanded:!0,className:"".concat(c,"-placeholder"),prefixCls:c,component:X,cellComponent:Q,colSpan:d.length,isEmpty:!0},D);var Y=_M(d);return E.createElement(KW.Provider,{value:H.current},E.createElement(Z,{className:"".concat(c,"-tbody")},o&&E.createElement(Qwe,{prefixCls:c,columnsKey:Y,onColumnResize:v}),K))}nK.displayName="Body";const eSe=I0(nK);var tSe=["expandable"],pb="RC_TABLE_INTERNAL_COL_DEFINE";function rSe(t){var n=t.expandable,o=xi(t,tSe),s;return"expandable"in t?s=yt(yt({},o),n):s=o,s.showExpandColumn===!1&&(s.expandIconColumnIndex=-1),s}var nSe=["columnType"];function iK(t){for(var n=t.colWidths,o=t.columns,s=t.columCount,c=[],m=s||o.length,v=!1,d=m-1;d>=0;d-=1){var C=n[d],S=o&&o[d],R=S&&S[pb];if(C||R||v){var D=R||{};D.columnType;var $=xi(D,nSe);c.unshift(E.createElement("col",Mr({key:d,style:{width:C}},$))),v=!0}}return E.createElement("colgroup",null,c)}var iSe=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];function oSe(t,n){return E.useMemo(function(){for(var o=[],s=0;s<n;s+=1){var c=t[s];if(c!==void 0)o[s]=c;else return null}return o},[t.join("_"),n])}var oK=E.forwardRef(function(t,n){var o=t.className,s=t.noData,c=t.columns,m=t.flattenColumns,v=t.colWidths,d=t.columCount,C=t.stickyOffsets,S=t.direction,R=t.fixHeader,D=t.stickyTopOffset,$=t.stickyBottomOffset,H=t.stickyClassName,Z=t.onScroll,X=t.maxContentScroll,Q=t.children,G=xi(t,iSe),K=hc(Fc,["prefixCls","scrollbarSize","isSticky"]),Y=K.prefixCls,re=K.scrollbarSize,fe=K.isSticky,me=fe&&!R?0:re,pe=E.useRef(null),xe=E.useCallback(function(Le){Lb(n,Le),Lb(pe,Le)},[]);E.useEffect(function(){var Le;function Me(Ce){var Ye=Ce,qe=Ye.currentTarget,rt=Ye.deltaX;rt&&(Z({currentTarget:qe,scrollLeft:qe.scrollLeft+rt}),Ce.preventDefault())}return(Le=pe.current)===null||Le===void 0||Le.addEventListener("wheel",Me),function(){var Ce;(Ce=pe.current)===null||Ce===void 0||Ce.removeEventListener("wheel",Me)}},[]);var Se=E.useMemo(function(){return m.every(function(Le){return Le.width})},[m]),oe=m[m.length-1],Re={fixed:oe?oe.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(Y,"-cell-scrollbar")}}},Ve=E.useMemo(function(){return me?[].concat(Pr(c),[Re]):c},[me,c]),Oe=E.useMemo(function(){return me?[].concat(Pr(m),[Re]):m},[me,m]),_e=E.useMemo(function(){var Le=C.right,Me=C.left;return yt(yt({},C),{},{left:S==="rtl"?[].concat(Pr(Me.map(function(Ce){return Ce+me})),[0]):Me,right:S==="rtl"?Le:[].concat(Pr(Le.map(function(Ce){return Ce+me})),[0]),isSticky:fe})},[me,C,fe]),Fe=oSe(v,d);return E.createElement("div",{style:yt({overflow:"hidden"},fe?{top:D,bottom:$}:{}),ref:xe,className:Gt(o,xt({},H,!!H))},E.createElement("table",{style:{tableLayout:"fixed",visibility:s||Fe?null:"hidden"}},(!s||!X||Se)&&E.createElement(iK,{colWidths:Fe?[].concat(Pr(Fe),[me]):[],columCount:d+1,columns:Oe}),Q(yt(yt({},G),{},{stickyOffsets:_e,columns:Ve,flattenColumns:Oe}))))});oK.displayName="FixedHolder";const JN=E.memo(oK);function aK(t){var n=t.cells,o=t.stickyOffsets,s=t.flattenColumns,c=t.rowComponent,m=t.cellComponent,v=t.tdCellComponent,d=t.onHeaderRow,C=t.index,S=hc(Fc,["prefixCls","direction"]),R=S.prefixCls,D=S.direction,$;d&&($=d(n.map(function(Z){return Z.column}),C));var H=_M(n.map(function(Z){return Z.column}));return E.createElement(c,$,n.map(function(Z,X){var Q=Z.column,G=Fz(Z.colStart,Z.colEnd,s,o,D,Q),K;return Q&&Q.onHeaderCell&&(K=Z.column.onHeaderCell(Q)),E.createElement(Py,Mr({},Z,{scope:Q.title?Z.colSpan>1?"colgroup":"col":null,ellipsis:Q.ellipsis,align:Q.align,component:Q.title?m:v,prefixCls:R,key:H[X]},G,{additionalProps:K,rowType:"header"}))}))}aK.displayName="HeaderRow";function aSe(t){var n=[];function o(v,d){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;n[C]=n[C]||[];var S=d,R=v.filter(Boolean).map(function(D){var $={key:D.key,className:D.className||"",children:D.title,column:D,colStart:S},H=1,Z=D.children;return Z&&Z.length>0&&(H=o(Z,S,C+1).reduce(function(X,Q){return X+Q},0),$.hasSubColumns=!0),"colSpan"in D&&(H=D.colSpan),"rowSpan"in D&&($.rowSpan=D.rowSpan),$.colSpan=H,$.colEnd=$.colStart+H-1,n[C].push($),S+=H,H});return R}o(t,0);for(var s=n.length,c=function(d){n[d].forEach(function(C){!("rowSpan"in C)&&!C.hasSubColumns&&(C.rowSpan=s-d)})},m=0;m<s;m+=1)c(m);return n}function sSe(t){var n=t.stickyOffsets,o=t.columns,s=t.flattenColumns,c=t.onHeaderRow,m=hc(Fc,["prefixCls","getComponent"]),v=m.prefixCls,d=m.getComponent,C=E.useMemo(function(){return aSe(o)},[o]),S=d(["header","wrapper"],"thead"),R=d(["header","row"],"tr"),D=d(["header","cell"],"th"),$=d(["header","cell"],"td");return E.createElement(S,{className:"".concat(v,"-thead")},C.map(function(H,Z){var X=E.createElement(aK,{key:Z,flattenColumns:s,cells:H,stickyOffsets:n,rowComponent:R,cellComponent:D,tdCellComponent:$,onHeaderRow:c,index:Z});return X}))}const QN=I0(sSe);function e7(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return typeof n=="number"?n:n.endsWith("%")?t*parseFloat(n)/100:null}function lSe(t,n,o){return E.useMemo(function(){if(n&&n>0){var s=0,c=0;t.forEach(function($){var H=e7(n,$.width);H?s+=H:c+=1});var m=Math.max(n,o),v=Math.max(m-s,c),d=c,C=v/c,S=0,R=t.map(function($){var H=yt({},$),Z=e7(n,H.width);if(Z)H.width=Z;else{var X=Math.floor(C);H.width=d===1?v:X,v-=X,d-=1}return S+=H.width,H});if(S<m){var D=m/S;v=m,R.forEach(function($,H){var Z=Math.floor($.width*D);$.width=H===R.length-1?v:Z,v-=Z})}return[R,Math.max(S,m)]}return[t,n]},[t,n,o])}var cSe=["children"],uSe=["fixed"];function Nz(t){return $c(t).filter(function(n){return E.isValidElement(n)}).map(function(n){var o=n.key,s=n.props,c=s.children,m=xi(s,cSe),v=yt({key:o},m);return c&&(v.children=Nz(c)),v})}function ZR(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key";return t.filter(function(o){return o&&Ei(o)==="object"}).reduce(function(o,s,c){var m=s.fixed,v=m===!0?"left":m,d="".concat(n,"-").concat(c),C=s.children;return C&&C.length>0?[].concat(Pr(o),Pr(ZR(C,d).map(function(S){return yt({fixed:v},S)}))):[].concat(Pr(o),[yt(yt({key:d},s),{},{fixed:v})])},[])}function hSe(t){return t.map(function(n){var o=n.fixed,s=xi(n,uSe),c=o;return o==="left"?c="right":o==="right"&&(c="left"),yt({fixed:c},s)})}function dSe(t,n){var o=t.prefixCls,s=t.columns,c=t.children,m=t.expandable,v=t.expandedKeys,d=t.columnTitle,C=t.getRowKey,S=t.onTriggerExpand,R=t.expandIcon,D=t.rowExpandable,$=t.expandIconColumnIndex,H=t.direction,Z=t.expandRowByClick,X=t.columnWidth,Q=t.fixed,G=t.scrollWidth,K=t.clientWidth,Y=E.useMemo(function(){return s||Nz(c)},[s,c]),re=E.useMemo(function(){if(m){var Re,Ve=Y.slice();if(!Ve.includes(hm)){var Oe=$||0;Oe>=0&&Ve.splice(Oe,0,hm)}var _e=Ve.indexOf(hm);Ve=Ve.filter(function(Ce,Ye){return Ce!==hm||Ye===_e});var Fe=Y[_e],Le;(Q==="left"||Q)&&!$?Le="left":(Q==="right"||Q)&&$===Y.length?Le="right":Le=Fe?Fe.fixed:null;var Me=(Re={},xt(Re,pb,{className:"".concat(o,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),xt(Re,"title",d),xt(Re,"fixed",Le),xt(Re,"className","".concat(o,"-row-expand-icon-cell")),xt(Re,"width",X),xt(Re,"render",function(Ye,qe,rt){var Qe=C(qe,rt),St=v.has(Qe),jt=D?D(qe):!0,Ot=R({prefixCls:o,expanded:St,expandable:jt,record:qe,onExpand:S});return Z?E.createElement("span",{onClick:function(ct){return ct.stopPropagation()}},Ot):Ot}),Re);return Ve.map(function(Ce){return Ce===hm?Me:Ce})}return Y.filter(function(Ce){return Ce!==hm})},[m,Y,C,v,R,H]),fe=E.useMemo(function(){var Re=re;return n&&(Re=n(Re)),Re.length||(Re=[{render:function(){return null}}]),Re},[n,re,H]),me=E.useMemo(function(){return H==="rtl"?hSe(ZR(fe)):ZR(fe)},[fe,H,G]),pe=lSe(me,G,K),xe=nr(pe,2),Se=xe[0],oe=xe[1];return[fe,Se,oe]}function fSe(t){var n,o=t.prefixCls,s=t.record,c=t.onExpand,m=t.expanded,v=t.expandable,d="".concat(o,"-row-expand-icon");if(!v)return E.createElement("span",{className:Gt(d,"".concat(o,"-row-spaced"))});var C=function(R){c(s,R),R.stopPropagation()};return E.createElement("span",{className:Gt(d,(n={},xt(n,"".concat(o,"-row-expanded"),m),xt(n,"".concat(o,"-row-collapsed"),!m),n)),onClick:C})}function pSe(t,n,o){var s=[];function c(m){(m||[]).forEach(function(v,d){s.push(n(v,d)),c(v[o])})}return c(t),s}function mSe(t,n,o){var s=rSe(t),c=s.expandIcon,m=s.expandedRowKeys,v=s.defaultExpandedRowKeys,d=s.defaultExpandAllRows,C=s.expandedRowRender,S=s.onExpand,R=s.onExpandedRowsChange,D=s.childrenColumnName,$=c||fSe,H=D||"children",Z=E.useMemo(function(){return C?"row":t.expandable&&t.internalHooks===Ew&&t.expandable.__PARENT_RENDER_ICON__||n.some(function(fe){return fe&&Ei(fe)==="object"&&fe[H]})?"nest":!1},[!!C,n]),X=E.useState(function(){return v||(d?pSe(n,o,H):[])}),Q=nr(X,2),G=Q[0],K=Q[1],Y=E.useMemo(function(){return new Set(m||G||[])},[m,G]),re=E.useCallback(function(fe){var me=o(fe,n.indexOf(fe)),pe,xe=Y.has(me);xe?(Y.delete(me),pe=Pr(Y)):pe=[].concat(Pr(Y),[me]),K(pe),S&&S(!xe,fe),R&&R(pe)},[o,Y,n,S,R]);return[s,Z,Y,$,H,re]}function gSe(t,n,o,s){var c=t.map(function(m,v){return Fz(v,v,t,n,o,s?.[v])});return Hm(function(){return c},[c],function(m,v){return!Vh(m,v)})}function sK(t){var n=E.useRef(t),o=E.useState({}),s=nr(o,2),c=s[1],m=E.useRef(null),v=E.useRef([]);function d(C){v.current.push(C);var S=Promise.resolve();m.current=S,S.then(function(){if(m.current===S){var R=v.current,D=n.current;v.current=[],R.forEach(function($){n.current=$(n.current)}),m.current=null,D!==n.current&&c({})}})}return E.useEffect(function(){return function(){m.current=null}},[]),[n.current,d]}function ySe(t){var n=E.useRef(t||null),o=E.useRef();function s(){window.clearTimeout(o.current)}function c(v){n.current=v,s(),o.current=window.setTimeout(function(){n.current=null,o.current=void 0},100)}function m(){return n.current}return E.useEffect(function(){return s},[]),[c,m]}function vSe(){var t=E.useState(-1),n=nr(t,2),o=n[0],s=n[1],c=E.useState(-1),m=nr(c,2),v=m[0],d=m[1],C=E.useCallback(function(S,R){s(S),d(R)},[]);return[o,v,C]}var t7=hl()?window:null;function _Se(t,n){var o=Ei(t)==="object"?t:{},s=o.offsetHeader,c=s===void 0?0:s,m=o.offsetSummary,v=m===void 0?0:m,d=o.offsetScroll,C=d===void 0?0:d,S=o.getContainer,R=S===void 0?function(){return t7}:S,D=R()||t7;return E.useMemo(function(){var $=!!t;return{isSticky:$,stickyClassName:$?"".concat(n,"-sticky-holder"):"",offsetHeader:c,offsetSummary:v,offsetScroll:C,container:D}},[C,c,v,n,D])}function xSe(t,n,o){var s=E.useMemo(function(){for(var c=[],m=[],v=0,d=0,C=0;C<n;C+=1)if(o==="rtl"){m[C]=d,d+=t[C]||0;var S=n-C-1;c[S]=v,v+=t[S]||0}else{c[C]=v,v+=t[C]||0;var R=n-C-1;m[R]=d,d+=t[R]||0}return{left:c,right:m}},[t,n,o]);return s}function r7(t){var n=t.className,o=t.children;return E.createElement("div",{className:n},o)}var bSe=function(n,o){var s,c,m=n.scrollBodyRef,v=n.onScroll,d=n.offsetScroll,C=n.container,S=hc(Fc,"prefixCls"),R=((s=m.current)===null||s===void 0?void 0:s.scrollWidth)||0,D=((c=m.current)===null||c===void 0?void 0:c.clientWidth)||0,$=R&&D*(D/R),H=E.useRef(),Z=sK({scrollLeft:0,isHiddenScrollBar:!1}),X=nr(Z,2),Q=X[0],G=X[1],K=E.useRef({delta:0,x:0}),Y=E.useState(!1),re=nr(Y,2),fe=re[0],me=re[1],pe=function(){me(!1)},xe=function(Oe){Oe.persist(),K.current.delta=Oe.pageX-Q.scrollLeft,K.current.x=0,me(!0),Oe.preventDefault()},Se=function(Oe){var _e,Fe=Oe||((_e=window)===null||_e===void 0?void 0:_e.event),Le=Fe.buttons;if(!fe||Le===0){fe&&me(!1);return}var Me=K.current.x+Oe.pageX-K.current.x-K.current.delta;Me<=0&&(Me=0),Me+$>=D&&(Me=D-$),v({scrollLeft:Me/D*(R+2)}),K.current.x=Oe.pageX},oe=function(){if(m.current){var Oe=ZN(m.current).top,_e=Oe+m.current.offsetHeight,Fe=C===window?document.documentElement.scrollTop+window.innerHeight:ZN(C).top+C.clientHeight;_e-vR()<=Fe||Oe>=Fe-d?G(function(Le){return yt(yt({},Le),{},{isHiddenScrollBar:!0})}):G(function(Le){return yt(yt({},Le),{},{isHiddenScrollBar:!1})})}},Re=function(Oe){G(function(_e){return yt(yt({},_e),{},{scrollLeft:Oe/R*D||0})})};return E.useImperativeHandle(o,function(){return{setScrollLeft:Re}}),E.useEffect(function(){var Ve=yE(document.body,"mouseup",pe,!1),Oe=yE(document.body,"mousemove",Se,!1);return oe(),function(){Ve.remove(),Oe.remove()}},[$,fe]),E.useEffect(function(){var Ve=yE(C,"scroll",oe,!1),Oe=yE(window,"resize",oe,!1);return function(){Ve.remove(),Oe.remove()}},[C]),E.useEffect(function(){Q.isHiddenScrollBar||G(function(Ve){var Oe=m.current;return Oe?yt(yt({},Ve),{},{scrollLeft:Oe.scrollLeft/Oe.scrollWidth*Oe.clientWidth}):Ve})},[Q.isHiddenScrollBar]),R<=D||!$||Q.isHiddenScrollBar?null:E.createElement("div",{style:{height:vR(),width:D,bottom:d},className:"".concat(S,"-sticky-scroll")},E.createElement("div",{onMouseDown:xe,ref:H,className:Gt("".concat(S,"-sticky-scroll-bar"),xt({},"".concat(S,"-sticky-scroll-bar-active"),fe)),style:{width:"".concat($,"px"),transform:"translate3d(".concat(Q.scrollLeft,"px, 0, 0)")}}))};const wSe=E.forwardRef(bSe);var lK="rc-table",SSe=[],CSe={};function ESe(){return"No Data"}function TSe(t,n){var o,s=yt({rowKey:"key",prefixCls:lK,emptyText:ESe},t),c=s.prefixCls,m=s.className,v=s.rowClassName,d=s.style,C=s.data,S=s.rowKey,R=s.scroll,D=s.tableLayout,$=s.direction,H=s.title,Z=s.footer,X=s.summary,Q=s.caption,G=s.id,K=s.showHeader,Y=s.components,re=s.emptyText,fe=s.onRow,me=s.onHeaderRow,pe=s.internalHooks,xe=s.transformColumns,Se=s.internalRefs,oe=s.tailor,Re=s.getContainerWidth,Ve=s.sticky,Oe=C||SSe,_e=!!Oe.length,Fe=pe===Ew,Le=E.useCallback(function(fi,gi){return Yu(Y,fi)||gi},[Y]),Me=E.useMemo(function(){return typeof S=="function"?S:function(fi){var gi=fi&&fi[S];return gi}},[S]),Ce=Le(["body"]),Ye=vSe(),qe=nr(Ye,3),rt=qe[0],Qe=qe[1],St=qe[2],jt=mSe(s,Oe,Me),Ot=nr(jt,6),Tt=Ot[0],ct=Ot[1],Ct=Ot[2],kt=Ot[3],zt=Ot[4],Nt=Ot[5],Rt=R?.x,Pt=E.useState(0),Dt=nr(Pt,2),Ut=Dt[0],sr=Dt[1],vt=dSe(yt(yt(yt({},s),Tt),{},{expandable:!!Tt.expandedRowRender,columnTitle:Tt.columnTitle,expandedKeys:Ct,getRowKey:Me,onTriggerExpand:Nt,expandIcon:kt,expandIconColumnIndex:Tt.expandIconColumnIndex,direction:$,scrollWidth:Fe&&oe&&typeof Rt=="number"?Rt:null,clientWidth:Ut}),Fe?xe:null),De=nr(vt,3),ze=De[0],ve=De[1],pt=De[2],gt=pt??Rt,$t=E.useMemo(function(){return{columns:ze,flattenColumns:ve}},[ze,ve]),It=E.useRef(),Mt=E.useRef(),Qt=E.useRef(),wr=E.useRef();E.useImperativeHandle(n,function(){return{nativeElement:It.current,scrollTo:function(gi){var eo;if(Qt.current instanceof HTMLElement){var xo=gi.index,Po=gi.top,Ha=gi.key;if(Po){var Ga;(Ga=Qt.current)===null||Ga===void 0||Ga.scrollTo({top:Po})}else{var qa,zs=Ha??Me(Oe[xo]);(qa=Qt.current.querySelector('[data-row-key="'.concat(zs,'"]')))===null||qa===void 0||qa.scrollIntoView()}}else(eo=Qt.current)!==null&&eo!==void 0&&eo.scrollTo&&Qt.current.scrollTo(gi)}}});var br=E.useRef(),tn=E.useState(!1),yr=nr(tn,2),dr=yr[0],Wt=yr[1],Wr=E.useState(!1),Fr=nr(Wr,2),en=Fr[0],Yr=Fr[1],fr=sK(new Map),Kr=nr(fr,2),Br=Kr[0],an=Kr[1],ni=_M(ve),Nr=ni.map(function(fi){return Br.get(fi)}),ii=E.useMemo(function(){return Nr},[Nr.join("_")]),Pe=xSe(ii,ve.length,$),he=R&&KR(R.y),ge=R&&KR(gt)||!!Tt.fixed,Te=ge&&ve.some(function(fi){var gi=fi.fixed;return gi}),$e=E.useRef(),ke=_Se(Ve,c),Ke=ke.isSticky,Ue=ke.offsetHeader,Ne=ke.offsetSummary,et=ke.offsetScroll,Et=ke.stickyClassName,Yt=ke.container,dt=E.useMemo(function(){return X?.(Oe)},[X,Oe]),ir=(he||Ke)&&E.isValidElement(dt)&&dt.type===xM&&dt.props.fixed,gr,mr,Sr;he&&(mr={overflowY:"scroll",maxHeight:R.y}),ge&&(gr={overflowX:"auto"},he||(mr={overflowY:"hidden"}),Sr={width:gt===!0?"auto":gt,minWidth:"100%"});var Gr=E.useCallback(function(fi,gi){dw(It.current)&&an(function(eo){if(eo.get(fi)!==gi){var xo=new Map(eo);return xo.set(fi,gi),xo}return eo})},[]),Rr=ySe(null),Cr=nr(Rr,2),Lr=Cr[0],cn=Cr[1];function oi(fi,gi){gi&&(typeof gi=="function"?gi(fi):gi.scrollLeft!==fi&&(gi.scrollLeft=fi,gi.scrollLeft!==fi&&setTimeout(function(){gi.scrollLeft=fi},0)))}var Sn=ws(function(fi){var gi=fi.currentTarget,eo=fi.scrollLeft,xo=$==="rtl",Po=typeof eo=="number"?eo:gi.scrollLeft,Ha=gi||CSe;if(!cn()||cn()===Ha){var Ga;Lr(Ha),oi(Po,Mt.current),oi(Po,Qt.current),oi(Po,br.current),oi(Po,(Ga=$e.current)===null||Ga===void 0?void 0:Ga.setScrollLeft)}var qa=gi||Mt.current;if(qa){var zs=qa.scrollWidth,dl=qa.clientWidth;if(zs===dl){Wt(!1),Yr(!1);return}xo?(Wt(-Po<zs-dl),Yr(-Po>0)):(Wt(Po>0),Yr(Po<zs-dl))}}),bi=function(){ge&&Qt.current?Sn({currentTarget:Qt.current}):(Wt(!1),Yr(!1))},Li=function(gi){var eo=gi.width,xo=It.current?It.current.offsetWidth:eo;Fe&&Re&&It.current&&(xo=Re(It.current,xo)||xo),xo!==Ut&&(bi(),sr(xo))},no=E.useRef(!1);E.useEffect(function(){no.current&&bi()},[ge,C,ze.length]),E.useEffect(function(){no.current=!0},[]);var ba=E.useState(0),io=nr(ba,2),ra=io[0],fs=io[1],Jr=E.useState(!0),di=nr(Jr,2),Ai=di[0],Ti=di[1];E.useEffect(function(){(!oe||!Fe)&&(Qt.current instanceof Element?fs(_R(Qt.current).width):fs(_R(wr.current).width)),Ti(ppe("position","sticky"))},[]),E.useEffect(function(){Fe&&Se&&(Se.body.current=Qt.current)});var Ji=E.useCallback(function(fi){return E.createElement(E.Fragment,null,E.createElement(QN,fi),ir==="top"&&E.createElement(vE,fi,dt))},[ir,dt]),Xs=E.useCallback(function(fi){return E.createElement(vE,fi,dt)},[dt]),Ho=Le(["table"],"table"),ji=E.useMemo(function(){return D||(Te?gt==="max-content"?"auto":"fixed":he||Ke||ve.some(function(fi){var gi=fi.ellipsis;return gi})?"fixed":"auto")},[he,Te,ve,D,Ke]),za,jn={colWidths:ii,columCount:ve.length,stickyOffsets:Pe,onHeaderRow:me,fixHeader:he,scroll:R},jr=E.useMemo(function(){return _e?null:typeof re=="function"?re():re},[_e,re]),un=E.createElement(eSe,{data:Oe,measureColumnWidth:he||ge||Ke}),qn=E.createElement(iK,{colWidths:ve.map(function(fi){var gi=fi.width;return gi}),columns:ve}),In=Q!=null?E.createElement("caption",{className:"".concat(c,"-caption")},Q):void 0,Ci=Uh(s,{data:!0}),Qr=Uh(s,{aria:!0});if(he||Ke){var Jn;typeof Ce=="function"?(Jn=Ce(Oe,{scrollbarSize:ra,ref:Qt,onScroll:Sn}),jn.colWidths=ve.map(function(fi,gi){var eo=fi.width,xo=gi===ve.length-1?eo-ra:eo;return typeof xo=="number"&&!Number.isNaN(xo)?xo:0})):Jn=E.createElement("div",{style:yt(yt({},gr),mr),onScroll:Sn,ref:Qt,className:Gt("".concat(c,"-body"))},E.createElement(Ho,Mr({style:yt(yt({},Sr),{},{tableLayout:ji})},Qr),In,qn,un,!ir&&dt&&E.createElement(vE,{stickyOffsets:Pe,flattenColumns:ve,columns:ze},dt)));var Qi=yt(yt(yt({noData:!Oe.length,maxContentScroll:ge&&gt==="max-content"},jn),$t),{},{direction:$,stickyClassName:Et,onScroll:Sn});za=E.createElement(E.Fragment,null,K!==!1&&E.createElement(JN,Mr({},Qi,{stickyTopOffset:Ue,className:"".concat(c,"-header"),ref:Mt}),Ji),Jn,ir&&ir!=="top"&&E.createElement(JN,Mr({},Qi,{stickyBottomOffset:Ne,className:"".concat(c,"-summary"),ref:br}),Xs),Ke&&Qt.current&&Qt.current instanceof Element&&E.createElement(wSe,{ref:$e,offsetScroll:et,scrollBodyRef:Qt,onScroll:Sn,container:Yt}))}else za=E.createElement("div",{style:yt(yt({},gr),mr),className:Gt("".concat(c,"-content")),onScroll:Sn,ref:Qt},E.createElement(Ho,Mr({style:yt(yt({},Sr),{},{tableLayout:ji})},Qr),In,qn,K!==!1&&E.createElement(QN,Mr({},jn,$t)),un,dt&&E.createElement(vE,{stickyOffsets:Pe,flattenColumns:ve,columns:ze},dt)));var Lo=E.createElement("div",Mr({className:Gt(c,m,(o={},xt(o,"".concat(c,"-rtl"),$==="rtl"),xt(o,"".concat(c,"-ping-left"),dr),xt(o,"".concat(c,"-ping-right"),en),xt(o,"".concat(c,"-layout-fixed"),D==="fixed"),xt(o,"".concat(c,"-fixed-header"),he),xt(o,"".concat(c,"-fixed-column"),Te),xt(o,"".concat(c,"-scroll-horizontal"),ge),xt(o,"".concat(c,"-has-fix-left"),ve[0]&&ve[0].fixed),xt(o,"".concat(c,"-has-fix-right"),ve[ve.length-1]&&ve[ve.length-1].fixed==="right"),o)),style:d,id:G,ref:It},Ci),H&&E.createElement(r7,{className:"".concat(c,"-title")},H(Oe)),E.createElement("div",{ref:wr,className:"".concat(c,"-container")},za),Z&&E.createElement(r7,{className:"".concat(c,"-footer")},Z(Oe)));ge&&(Lo=E.createElement(nh,{onResize:Li},Lo));var Go=gSe(ve,Pe,$,ze),Da=E.useMemo(function(){return{scrollX:gt,prefixCls:c,getComponent:Le,scrollbarSize:ra,direction:$,fixedInfoList:Go,isSticky:Ke,supportSticky:Ai,componentWidth:Ut,fixHeader:he,fixColumn:Te,horizonScroll:ge,tableLayout:ji,rowClassName:v,expandedRowClassName:Tt.expandedRowClassName,expandIcon:kt,expandableType:ct,expandRowByClick:Tt.expandRowByClick,expandedRowRender:Tt.expandedRowRender,onTriggerExpand:Nt,expandIconColumnIndex:Tt.expandIconColumnIndex,indentSize:Tt.indentSize,allColumnsFixedLeft:ve.every(function(fi){return fi.fixed==="left"}),emptyNode:jr,columns:ze,flattenColumns:ve,onColumnResize:Gr,hoverStartRow:rt,hoverEndRow:Qe,onHover:St,rowExpandable:Tt.rowExpandable,onRow:fe,getRowKey:Me,expandedKeys:Ct,childrenColumnName:zt}},[gt,c,Le,ra,$,Go,Ke,Ai,Ut,he,Te,ge,ji,v,Tt.expandedRowClassName,kt,ct,Tt.expandRowByClick,Tt.expandedRowRender,Nt,Tt.expandIconColumnIndex,Tt.indentSize,jr,ze,ve,Gr,rt,Qe,St,Tt.rowExpandable,fe,Me,Ct,zt]);return E.createElement(Fc.Provider,{value:Da},Lo)}var ISe=E.forwardRef(TSe);function cK(t){return WW(ISe,t)}var M0=cK();M0.EXPAND_COLUMN=hm;M0.INTERNAL_HOOKS=Ew;M0.Column=Zwe;M0.ColumnGroup=Xwe;M0.Summary=XW;var uK=$z(null),hK=$z(null);function MSe(t,n,o){var s=n||1;return o[t+s]-(o[t]||0)}function PSe(t){var n=t.rowInfo,o=t.column,s=t.colIndex,c=t.indent,m=t.index,v=t.renderIndex,d=t.record,C=t.style,S=t.className,R=t.inverse,D=t.getHeight,$=o.render,H=o.dataIndex,Z=o.className,X=o.width,Q=hc(hK,["columnsOffset"]),G=Q.columnsOffset,K=tK(n,o,s,c,m),Y=K.key,re=K.fixedInfo,fe=K.appendCellNode,me=K.additionalCellProps,pe=me.style,xe=me.colSpan,Se=xe===void 0?1:xe,oe=me.rowSpan,Re=oe===void 0?1:oe,Ve=s-1,Oe=MSe(Ve,Se,G),_e=Se>1?X-Oe:0,Fe=yt(yt(yt({},pe),C),{},{flex:"0 0 ".concat(Oe,"px"),width:"".concat(Oe,"px"),marginRight:_e,pointerEvents:"auto"}),Le=E.useMemo(function(){return R?Re<=1:Se===0||Re===0||Re>1},[Re,Se,R]);Le?Fe.visibility="hidden":R&&(Fe.height=D?.(Re));var Me=Le?function(){return null}:$,Ce={};return(Re===0||Se===0)&&(Ce.rowSpan=1,Ce.colSpan=1),E.createElement(Py,Mr({className:Gt(Z,S),ellipsis:o.ellipsis,align:o.align,scope:o.rowScope,component:"div",prefixCls:n.prefixCls,key:Y,record:d,index:m,renderIndex:v,dataIndex:H,render:Me,shouldCellUpdate:o.shouldCellUpdate},re,{appendNode:fe,additionalProps:yt(yt({},me),{},{style:Fe},Ce)}))}var ASe=["data","index","className","rowKey","style","extra","getHeight"],RSe=E.forwardRef(function(t,n){var o=t.data,s=t.index,c=t.className,m=t.rowKey,v=t.style,d=t.extra,C=t.getHeight,S=xi(t,ASe),R=o.record,D=o.indent,$=o.index,H=hc(Fc,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),Z=H.scrollX,X=H.flattenColumns,Q=H.prefixCls,G=H.fixColumn,K=H.componentWidth,Y=QW(R,m,s,D),re=Y.rowSupportExpand,fe=Y.expanded,me=Y.rowProps,pe=Y.expandedRowRender,xe=Y.expandedRowClassName,Se;if(re&&fe){var oe=pe(R,s,D+1,fe),Re=xe?.(R,s,D),Ve={};G&&(Ve={style:xt({},"--virtual-width","".concat(K,"px"))});var Oe="".concat(Q,"-expanded-row-cell");Se=E.createElement("div",{className:Gt("".concat(Q,"-expanded-row"),"".concat(Q,"-expanded-row-level-").concat(D+1),Re)},E.createElement(Py,{component:"div",prefixCls:Q,className:Gt(Oe,xt({},"".concat(Oe,"-fixed"),G)),additionalProps:Ve},oe))}var _e=yt(yt({},v),{},{width:Z});d&&(_e.position="absolute",_e.pointerEvents="none");var Fe=E.createElement("div",Mr({},me,S,{ref:re?null:n,className:Gt(c,"".concat(Q,"-row"),me?.className,xt({},"".concat(Q,"-row-extra"),d)),style:yt(yt({},_e),me?.style)}),X.map(function(Le,Me){return E.createElement(PSe,{key:Me,rowInfo:Y,column:Le,colIndex:Me,indent:D,index:s,renderIndex:$,record:R,inverse:d,getHeight:C})}));return re?E.createElement("div",{ref:n},Fe,Se):Fe}),n7=I0(RSe),kSe=E.forwardRef(function(t,n){var o=t.data,s=t.onScroll,c=hc(Fc,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","emptyNode","scrollX"]),m=c.flattenColumns,v=c.onColumnResize,d=c.getRowKey,C=c.expandedKeys,S=c.prefixCls,R=c.childrenColumnName,D=c.emptyNode,$=c.scrollX,H=hc(uK),Z=H.sticky,X=H.scrollY,Q=H.listItemHeight,G=E.useRef(),K=JW(o,R,C,d),Y=E.useMemo(function(){var Re=0;return m.map(function(Ve){var Oe=Ve.width,_e=Ve.key;return Re+=Oe,[_e,Oe,Re]})},[m]),re=E.useMemo(function(){return Y.map(function(Re){return Re[2]})},[Y]);E.useEffect(function(){Y.forEach(function(Re){var Ve=nr(Re,2),Oe=Ve[0],_e=Ve[1];v(Oe,_e)})},[Y]),E.useImperativeHandle(n,function(){var Re={scrollTo:function(Oe){var _e;(_e=G.current)===null||_e===void 0||_e.scrollTo(Oe)}};return Object.defineProperty(Re,"scrollLeft",{get:function(){var Oe;return((Oe=G.current)===null||Oe===void 0?void 0:Oe.getScrollInfo().x)||0},set:function(Oe){var _e;(_e=G.current)===null||_e===void 0||_e.scrollTo({left:Oe})}}),Re});var fe=function(Ve,Oe){var _e,Fe=(_e=K[Oe])===null||_e===void 0?void 0:_e.record,Le=Ve.onCell;if(Le){var Me,Ce=Le(Fe,Oe);return(Me=Ce?.rowSpan)!==null&&Me!==void 0?Me:1}return 1},me=function(Ve){var Oe=Ve.start,_e=Ve.end,Fe=Ve.getSize,Le=Ve.offsetY;if(_e<0)return null;for(var Me=m.filter(function(kt){return fe(kt,Oe)===0}),Ce=Oe,Ye=function(zt){if(Me=Me.filter(function(Nt){return fe(Nt,zt)===0}),!Me.length)return Ce=zt,1},qe=Oe;qe>=0&&!Ye(qe);qe-=1);for(var rt=m.filter(function(kt){return fe(kt,_e)!==1}),Qe=_e,St=function(zt){if(rt=rt.filter(function(Nt){return fe(Nt,zt)!==1}),!rt.length)return Qe=Math.max(zt-1,_e),1},jt=_e;jt<K.length&&!St(jt);jt+=1);for(var Ot=[],Tt=function(zt){var Nt=K[zt];if(!Nt)return 1;m.some(function(Rt){return fe(Rt,zt)>1})&&Ot.push(zt)},ct=Ce;ct<=Qe;ct+=1)Tt(ct);var Ct=Ot.map(function(kt){var zt=K[kt],Nt=d(zt.record,kt),Rt=function(Ut){var sr=kt+Ut-1,vt=d(K[sr].record,sr),De=Fe(Nt,vt);return De.bottom-De.top},Pt=Fe(Nt);return E.createElement(n7,{key:kt,data:zt,rowKey:Nt,index:kt,style:{top:-Le+Pt.top},extra:!0,getHeight:Rt})});return Ct},pe=E.useMemo(function(){return{columnsOffset:re}},[re]),xe="".concat(S,"-tbody"),Se;if(K.length){var oe={};Z&&(oe.position="sticky",oe.bottom=0,Ei(Z)==="object"&&Z.offsetScroll&&(oe.bottom=Z.offsetScroll)),Se=E.createElement(lM,{fullHeight:!1,ref:G,styles:{horizontalScrollBar:oe},className:Gt(xe,"".concat(xe,"-virtual")),height:X,itemHeight:Q||24,data:K,itemKey:function(Ve){return d(Ve.record)},scrollWidth:$,onVirtualScroll:function(Ve){var Oe=Ve.x;s({scrollLeft:Oe})},extraRender:me},function(Re,Ve,Oe){var _e=d(Re.record,Ve);return E.createElement(n7,Mr({data:Re,rowKey:_e,index:Ve},Oe))})}else Se=E.createElement("div",{className:Gt("".concat(S,"-placeholder"))},E.createElement(Py,{component:"div",prefixCls:S},D));return E.createElement(hK.Provider,{value:pe},Se)}),OSe=I0(kSe),zSe=function(n,o){var s=o.ref,c=o.onScroll;return E.createElement(OSe,{ref:s,data:n,onScroll:c})};function DSe(t,n){var o=t.columns,s=t.scroll,c=t.sticky,m=t.prefixCls,v=m===void 0?lK:m,d=t.className,C=t.listItemHeight,S=t.components,R=s||{},D=R.x,$=R.y;typeof D!="number"&&(D=1),typeof $!="number"&&($=500);var H=E.useMemo(function(){return{sticky:c,scrollY:$,listItemHeight:C}},[c,$,C]);return E.createElement(uK.Provider,{value:H},E.createElement(M0,Mr({},t,{className:Gt(d,"".concat(v,"-virtual")),scroll:yt(yt({},s),{},{x:D}),components:yt(yt({},S),{},{body:zSe}),columns:o,internalHooks:Ew,tailor:!0,ref:n})))}var LSe=E.forwardRef(DSe);function dK(t){return WW(LSe,t)}dK();function $Se(t){return null}function BSe(t){return null}var jz=E.createContext(null),FSe=function(n){for(var o=n.prefixCls,s=n.level,c=n.isStart,m=n.isEnd,v="".concat(o,"-indent-unit"),d=[],C=0;C<s;C+=1){var S;d.push(E.createElement("span",{key:C,className:Gt(v,(S={},xt(S,"".concat(v,"-start"),c[C]),xt(S,"".concat(v,"-end"),m[C]),S))}))}return E.createElement("span",{"aria-hidden":"true",className:"".concat(o,"-indent")},d)};const NSe=E.memo(FSe);var jSe=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],i7="open",o7="close",VSe="---",USe=function(t){Wf(o,t);var n=Kf(o);function o(){var s;Il(this,o);for(var c=arguments.length,m=new Array(c),v=0;v<c;v++)m[v]=arguments[v];return s=n.call.apply(n,[this].concat(m)),s.state={dragNodeHighlight:!1},s.selectHandle=void 0,s.cacheIndent=void 0,s.onSelectorClick=function(d){var C=s.props.context.onNodeClick;C(d,As(s.props)),s.isSelectable()?s.onSelect(d):s.onCheck(d)},s.onSelectorDoubleClick=function(d){var C=s.props.context.onNodeDoubleClick;C(d,As(s.props))},s.onSelect=function(d){if(!s.isDisabled()){var C=s.props.context.onNodeSelect;C(d,As(s.props))}},s.onCheck=function(d){if(!s.isDisabled()){var C=s.props,S=C.disableCheckbox,R=C.checked,D=s.props.context.onNodeCheck;if(!(!s.isCheckable()||S)){var $=!R;D(d,As(s.props),$)}}},s.onMouseEnter=function(d){var C=s.props.context.onNodeMouseEnter;C(d,As(s.props))},s.onMouseLeave=function(d){var C=s.props.context.onNodeMouseLeave;C(d,As(s.props))},s.onContextMenu=function(d){var C=s.props.context.onNodeContextMenu;C(d,As(s.props))},s.onDragStart=function(d){var C=s.props.context.onNodeDragStart;d.stopPropagation(),s.setState({dragNodeHighlight:!0}),C(d,Gi(s));try{d.dataTransfer.setData("text/plain","")}catch{}},s.onDragEnter=function(d){var C=s.props.context.onNodeDragEnter;d.preventDefault(),d.stopPropagation(),C(d,Gi(s))},s.onDragOver=function(d){var C=s.props.context.onNodeDragOver;d.preventDefault(),d.stopPropagation(),C(d,Gi(s))},s.onDragLeave=function(d){var C=s.props.context.onNodeDragLeave;d.stopPropagation(),C(d,Gi(s))},s.onDragEnd=function(d){var C=s.props.context.onNodeDragEnd;d.stopPropagation(),s.setState({dragNodeHighlight:!1}),C(d,Gi(s))},s.onDrop=function(d){var C=s.props.context.onNodeDrop;d.preventDefault(),d.stopPropagation(),s.setState({dragNodeHighlight:!1}),C(d,Gi(s))},s.onExpand=function(d){var C=s.props,S=C.loading,R=C.context.onNodeExpand;S||R(d,As(s.props))},s.setSelectHandle=function(d){s.selectHandle=d},s.getNodeState=function(){var d=s.props.expanded;return s.isLeaf()?null:d?i7:o7},s.hasChildren=function(){var d=s.props.eventKey,C=s.props.context.keyEntities,S=pu(C,d)||{},R=S.children;return!!(R||[]).length},s.isLeaf=function(){var d=s.props,C=d.isLeaf,S=d.loaded,R=s.props.context.loadData,D=s.hasChildren();return C===!1?!1:C||!R&&!D||R&&S&&!D},s.isDisabled=function(){var d=s.props.disabled,C=s.props.context.disabled;return!!(C||d)},s.isCheckable=function(){var d=s.props.checkable,C=s.props.context.checkable;return!C||d===!1?!1:C},s.syncLoadData=function(d){var C=d.expanded,S=d.loading,R=d.loaded,D=s.props.context,$=D.loadData,H=D.onNodeLoad;S||$&&C&&!s.isLeaf()&&!s.hasChildren()&&!R&&H(As(s.props))},s.isDraggable=function(){var d=s.props,C=d.data,S=d.context.draggable;return!!(S&&(!S.nodeDraggable||S.nodeDraggable(C)))},s.renderDragHandler=function(){var d=s.props.context,C=d.draggable,S=d.prefixCls;return C?.icon?E.createElement("span",{className:"".concat(S,"-draggable-icon")},C.icon):null},s.renderSwitcherIconDom=function(d){var C=s.props.switcherIcon,S=s.props.context.switcherIcon,R=C||S;return typeof R=="function"?R(yt(yt({},s.props),{},{isLeaf:d})):R},s.renderSwitcher=function(){var d=s.props.expanded,C=s.props.context.prefixCls;if(s.isLeaf()){var S=s.renderSwitcherIconDom(!0);return S!==!1?E.createElement("span",{className:Gt("".concat(C,"-switcher"),"".concat(C,"-switcher-noop"))},S):null}var R=Gt("".concat(C,"-switcher"),"".concat(C,"-switcher_").concat(d?i7:o7)),D=s.renderSwitcherIconDom(!1);return D!==!1?E.createElement("span",{onClick:s.onExpand,className:R},D):null},s.renderCheckbox=function(){var d=s.props,C=d.checked,S=d.halfChecked,R=d.disableCheckbox,D=s.props.context.prefixCls,$=s.isDisabled(),H=s.isCheckable();if(!H)return null;var Z=typeof H!="boolean"?H:null;return E.createElement("span",{className:Gt("".concat(D,"-checkbox"),C&&"".concat(D,"-checkbox-checked"),!C&&S&&"".concat(D,"-checkbox-indeterminate"),($||R)&&"".concat(D,"-checkbox-disabled")),onClick:s.onCheck},Z)},s.renderIcon=function(){var d=s.props.loading,C=s.props.context.prefixCls;return E.createElement("span",{className:Gt("".concat(C,"-iconEle"),"".concat(C,"-icon__").concat(s.getNodeState()||"docu"),d&&"".concat(C,"-icon_loading"))})},s.renderSelector=function(){var d=s.state.dragNodeHighlight,C=s.props,S=C.title,R=S===void 0?VSe:S,D=C.selected,$=C.icon,H=C.loading,Z=C.data,X=s.props.context,Q=X.prefixCls,G=X.showIcon,K=X.icon,Y=X.loadData,re=X.titleRender,fe=s.isDisabled(),me="".concat(Q,"-node-content-wrapper"),pe;if(G){var xe=$||K;pe=xe?E.createElement("span",{className:Gt("".concat(Q,"-iconEle"),"".concat(Q,"-icon__customize"))},typeof xe=="function"?xe(s.props):xe):s.renderIcon()}else Y&&H&&(pe=s.renderIcon());var Se;typeof R=="function"?Se=R(Z):re?Se=re(Z):Se=R;var oe=E.createElement("span",{className:"".concat(Q,"-title")},Se);return E.createElement("span",{ref:s.setSelectHandle,title:typeof R=="string"?R:"",className:Gt("".concat(me),"".concat(me,"-").concat(s.getNodeState()||"normal"),!fe&&(D||d)&&"".concat(Q,"-node-selected")),onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,onContextMenu:s.onContextMenu,onClick:s.onSelectorClick,onDoubleClick:s.onSelectorDoubleClick},pe,oe,s.renderDropIndicator())},s.renderDropIndicator=function(){var d=s.props,C=d.disabled,S=d.eventKey,R=s.props.context,D=R.draggable,$=R.dropLevelOffset,H=R.dropPosition,Z=R.prefixCls,X=R.indent,Q=R.dropIndicatorRender,G=R.dragOverNodeKey,K=R.direction,Y=!!D,re=!C&&Y&&G===S,fe=X??s.cacheIndent;return s.cacheIndent=X,re?Q({dropPosition:H,dropLevelOffset:$,indent:fe,prefixCls:Z,direction:K}):null},s}return Ml(o,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var c=this.props.selectable,m=this.props.context.selectable;return typeof c=="boolean"?c:m}},{key:"render",value:function(){var c,m=this.props,v=m.eventKey,d=m.className,C=m.style,S=m.dragOver,R=m.dragOverGapTop,D=m.dragOverGapBottom,$=m.isLeaf,H=m.isStart,Z=m.isEnd,X=m.expanded,Q=m.selected,G=m.checked,K=m.halfChecked,Y=m.loading,re=m.domRef,fe=m.active;m.data;var me=m.onMouseMove,pe=m.selectable,xe=xi(m,jSe),Se=this.props.context,oe=Se.prefixCls,Re=Se.filterTreeNode,Ve=Se.keyEntities,Oe=Se.dropContainerKey,_e=Se.dropTargetKey,Fe=Se.draggingNodeKey,Le=this.isDisabled(),Me=Uh(xe,{aria:!0,data:!0}),Ce=pu(Ve,v)||{},Ye=Ce.level,qe=Z[Z.length-1],rt=this.isDraggable(),Qe=!Le&&rt,St=Fe===v,jt=pe!==void 0?{"aria-selected":!!pe}:void 0;return E.createElement("div",Mr({ref:re,className:Gt(d,"".concat(oe,"-treenode"),(c={},xt(c,"".concat(oe,"-treenode-disabled"),Le),xt(c,"".concat(oe,"-treenode-switcher-").concat(X?"open":"close"),!$),xt(c,"".concat(oe,"-treenode-checkbox-checked"),G),xt(c,"".concat(oe,"-treenode-checkbox-indeterminate"),K),xt(c,"".concat(oe,"-treenode-selected"),Q),xt(c,"".concat(oe,"-treenode-loading"),Y),xt(c,"".concat(oe,"-treenode-active"),fe),xt(c,"".concat(oe,"-treenode-leaf-last"),qe),xt(c,"".concat(oe,"-treenode-draggable"),rt),xt(c,"dragging",St),xt(c,"drop-target",_e===v),xt(c,"drop-container",Oe===v),xt(c,"drag-over",!Le&&S),xt(c,"drag-over-gap-top",!Le&&R),xt(c,"drag-over-gap-bottom",!Le&&D),xt(c,"filter-node",Re&&Re(As(this.props))),c)),style:C,draggable:Qe,"aria-grabbed":St,onDragStart:Qe?this.onDragStart:void 0,onDragEnter:rt?this.onDragEnter:void 0,onDragOver:rt?this.onDragOver:void 0,onDragLeave:rt?this.onDragLeave:void 0,onDrop:rt?this.onDrop:void 0,onDragEnd:rt?this.onDragEnd:void 0,onMouseMove:me},jt,Me),E.createElement(NSe,{prefixCls:oe,level:Ye,isStart:H,isEnd:Z}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),o}(E.Component),s0=function(n){return E.createElement(jz.Consumer,null,function(o){return E.createElement(USe,Mr({},n,{context:o}))})};s0.displayName="TreeNode";s0.isTreeNode=1;function Rd(t,n){if(!t)return[];var o=t.slice(),s=o.indexOf(n);return s>=0&&o.splice(s,1),o}function Mf(t,n){var o=(t||[]).slice();return o.indexOf(n)===-1&&o.push(n),o}function Vz(t){return t.split("-")}function HSe(t,n){var o=[],s=pu(n,t);function c(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];m.forEach(function(v){var d=v.key,C=v.children;o.push(d),c(C)})}return c(s.children),o}function GSe(t){if(t.parent){var n=Vz(t.pos);return Number(n[n.length-1])===t.parent.children.length-1}return!1}function qSe(t){var n=Vz(t.pos);return Number(n[n.length-1])===0}function a7(t,n,o,s,c,m,v,d,C,S){var R,D=t.clientX,$=t.clientY,H=t.target.getBoundingClientRect(),Z=H.top,X=H.height,Q=(S==="rtl"?-1:1)*((c?.x||0)-D),G=(Q-12)/s,K=pu(d,o.props.eventKey);if($<Z+X/2){var Y=v.findIndex(function(Fe){return Fe.key===K.key}),re=Y<=0?0:Y-1,fe=v[re].key;K=pu(d,fe)}var me=K.key,pe=K,xe=K.key,Se=0,oe=0;if(!C.includes(me))for(var Re=0;Re<G&&GSe(K);Re+=1)K=K.parent,oe+=1;var Ve=n.props.data,Oe=K.node,_e=!0;return qSe(K)&&K.level===0&&$<Z+X/2&&m({dragNode:Ve,dropNode:Oe,dropPosition:-1})&&K.key===o.props.eventKey?Se=-1:(pe.children||[]).length&&C.includes(xe)?m({dragNode:Ve,dropNode:Oe,dropPosition:0})?Se=0:_e=!1:oe===0?G>-1.5?m({dragNode:Ve,dropNode:Oe,dropPosition:1})?Se=1:_e=!1:m({dragNode:Ve,dropNode:Oe,dropPosition:0})?Se=0:m({dragNode:Ve,dropNode:Oe,dropPosition:1})?Se=1:_e=!1:m({dragNode:Ve,dropNode:Oe,dropPosition:1})?Se=1:_e=!1,{dropPosition:Se,dropLevelOffset:oe,dropTargetKey:K.key,dropTargetPos:K.pos,dragOverNodeKey:xe,dropContainerKey:Se===0?null:((R=K.parent)===null||R===void 0?void 0:R.key)||null,dropAllowed:_e}}function s7(t,n){if(t){var o=n.multiple;return o?t.slice():t.length?[t[0]]:t}}function iA(t){if(!t)return null;var n;if(Array.isArray(t))n={checkedKeys:t,halfCheckedKeys:void 0};else if(Ei(t)==="object")n={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return Ua(!1,"`checkedKeys` is not an array or an object"),null;return n}function XR(t,n){var o=new Set;function s(c){if(!o.has(c)){var m=pu(n,c);if(m){o.add(c);var v=m.parent,d=m.node;d.disabled||v&&s(v.key)}}}return(t||[]).forEach(function(c){s(c)}),Pr(o)}function WSe(t){const[n,o]=E.useState(null);return[E.useCallback((m,v,d)=>{const C=n??m,S=Math.min(C||0,m),R=Math.max(C||0,m),D=v.slice(S,R+1).map(Z=>t(Z)),$=D.some(Z=>!d.has(Z)),H=[];return D.forEach(Z=>{$?(d.has(Z)||H.push(Z),d.add(Z)):(d.delete(Z),H.push(Z))}),o($?R:null),H},[n]),m=>{o(m)}]}const lm={},YR="SELECT_ALL",JR="SELECT_INVERT",QR="SELECT_NONE",l7=[],fK=(t,n)=>{let o=[];return(n||[]).forEach(s=>{o.push(s),s&&typeof s=="object"&&t in s&&(o=[].concat(Pr(o),Pr(fK(t,s[t]))))}),o},KSe=(t,n)=>{const{preserveSelectedRowKeys:o,selectedRowKeys:s,defaultSelectedRowKeys:c,getCheckboxProps:m,onChange:v,onSelect:d,onSelectAll:C,onSelectInvert:S,onSelectNone:R,onSelectMultiple:D,columnWidth:$,type:H,selections:Z,fixed:X,renderCell:Q,hideSelectAll:G,checkStrictly:K=!0}=n||{},{prefixCls:Y,data:re,pageData:fe,getRecordByKey:me,getRowKey:pe,expandType:xe,childrenColumnName:Se,locale:oe,getPopupContainer:Re}=t,Ve=Ty(),[Oe,_e]=WSe(Nt=>Nt),[Fe,Le]=ul(s||c||l7,{value:s}),Me=E.useRef(new Map),Ce=E.useCallback(Nt=>{if(o){const Rt=new Map;Nt.forEach(Pt=>{let Dt=me(Pt);!Dt&&Me.current.has(Pt)&&(Dt=Me.current.get(Pt)),Rt.set(Pt,Dt)}),Me.current=Rt}},[me,o]);E.useEffect(()=>{Ce(Fe)},[Fe]);const{keyEntities:Ye}=E.useMemo(()=>{if(K)return{keyEntities:null};let Nt=re;if(o){const Rt=new Set(re.map((Dt,Ut)=>pe(Dt,Ut))),Pt=Array.from(Me.current).reduce((Dt,Ut)=>{let[sr,vt]=Ut;return Rt.has(sr)?Dt:Dt.concat(vt)},[]);Nt=[].concat(Pr(Nt),Pr(Pt))}return Az(Nt,{externalGetKey:pe,childrenPropName:Se})},[re,pe,K,Se,o]),qe=E.useMemo(()=>fK(Se,fe),[Se,fe]),rt=E.useMemo(()=>{const Nt=new Map;return qe.forEach((Rt,Pt)=>{const Dt=pe(Rt,Pt),Ut=(m?m(Rt):null)||{};Nt.set(Dt,Ut)}),Nt},[qe,pe,m]),Qe=E.useCallback(Nt=>{var Rt;return!!(!((Rt=rt.get(pe(Nt)))===null||Rt===void 0)&&Rt.disabled)},[rt,pe]),[St,jt]=E.useMemo(()=>{if(K)return[Fe||[],[]];const{checkedKeys:Nt,halfCheckedKeys:Rt}=j_(Fe,!0,Ye,Qe);return[Nt||[],Rt]},[Fe,K,Ye,Qe]),Ot=E.useMemo(()=>{const Nt=H==="radio"?St.slice(0,1):St;return new Set(Nt)},[St,H]),Tt=E.useMemo(()=>H==="radio"?new Set:new Set(jt),[jt,H]);E.useEffect(()=>{n||Le(l7)},[!!n]);const ct=E.useCallback((Nt,Rt)=>{let Pt,Dt;Ce(Nt),o?(Pt=Nt,Dt=Nt.map(Ut=>Me.current.get(Ut))):(Pt=[],Dt=[],Nt.forEach(Ut=>{const sr=me(Ut);sr!==void 0&&(Pt.push(Ut),Dt.push(sr))})),Le(Pt),v?.(Pt,Dt,{type:Rt})},[Le,me,v,o]),Ct=E.useCallback((Nt,Rt,Pt,Dt)=>{if(d){const Ut=Pt.map(sr=>me(sr));d(me(Nt),Rt,Ut,Dt)}ct(Pt,"single")},[d,me,ct]),kt=E.useMemo(()=>!Z||G?null:(Z===!0?[YR,JR,QR]:Z).map(Rt=>Rt===YR?{key:"all",text:oe.selectionAll,onSelect(){ct(re.map((Pt,Dt)=>pe(Pt,Dt)).filter(Pt=>{const Dt=rt.get(Pt);return!Dt?.disabled||Ot.has(Pt)}),"all")}}:Rt===JR?{key:"invert",text:oe.selectInvert,onSelect(){const Pt=new Set(Ot);fe.forEach((Ut,sr)=>{const vt=pe(Ut,sr),De=rt.get(vt);De?.disabled||(Pt.has(vt)?Pt.delete(vt):Pt.add(vt))});const Dt=Array.from(Pt);S&&(Ve.deprecated(!1,"onSelectInvert","onChange"),S(Dt)),ct(Dt,"invert")}}:Rt===QR?{key:"none",text:oe.selectNone,onSelect(){R?.(),ct(Array.from(Ot).filter(Pt=>{const Dt=rt.get(Pt);return Dt?.disabled}),"none")}}:Rt).map(Rt=>Object.assign(Object.assign({},Rt),{onSelect:function(){for(var Pt,Dt,Ut=arguments.length,sr=new Array(Ut),vt=0;vt<Ut;vt++)sr[vt]=arguments[vt];(Dt=Rt.onSelect)===null||Dt===void 0||(Pt=Dt).call.apply(Pt,[Rt].concat(sr)),_e(null)}})),[Z,Ot,fe,pe,S,ct]);return[E.useCallback(Nt=>{var Rt;if(!n)return Nt.filter(yr=>yr!==lm);let Pt=Pr(Nt);const Dt=new Set(Ot),Ut=qe.map(pe).filter(yr=>!rt.get(yr).disabled),sr=Ut.every(yr=>Dt.has(yr)),vt=Ut.some(yr=>Dt.has(yr)),De=()=>{const yr=[];sr?Ut.forEach(Wt=>{Dt.delete(Wt),yr.push(Wt)}):Ut.forEach(Wt=>{Dt.has(Wt)||(Dt.add(Wt),yr.push(Wt))});const dr=Array.from(Dt);C?.(!sr,dr.map(Wt=>me(Wt)),yr.map(Wt=>me(Wt))),ct(dr,"all"),_e(null)};let ze,ve;if(H!=="radio"){let yr;if(kt){const en={getPopupContainer:Re,items:kt.map((Yr,fr)=>{const{key:Kr,text:Br,onSelect:an}=Yr;return{key:Kr??fr,onClick:()=>{an?.(Ut)},label:Br}})};yr=E.createElement("div",{className:`${Y}-selection-extra`},E.createElement(zz,{menu:en,getPopupContainer:Re},E.createElement("span",null,E.createElement(Sq,null))))}const dr=qe.map((en,Yr)=>{const fr=pe(en,Yr),Kr=rt.get(fr)||{};return Object.assign({checked:Dt.has(fr)},Kr)}).filter(en=>{let{disabled:Yr}=en;return Yr}),Wt=!!dr.length&&dr.length===qe.length,Wr=Wt&&dr.every(en=>{let{checked:Yr}=en;return Yr}),Fr=Wt&&dr.some(en=>{let{checked:Yr}=en;return Yr});ve=E.createElement(JT,{checked:Wt?Wr:!!qe.length&&sr,indeterminate:Wt?!Wr&&Fr:!sr&&vt,onChange:De,disabled:qe.length===0||Wt,"aria-label":yr?"Custom selection":"Select all",skipGroup:!0}),ze=!G&&E.createElement("div",{className:`${Y}-selection`},ve,yr)}let pt;H==="radio"?pt=(yr,dr,Wt)=>{const Wr=pe(dr,Wt),Fr=Dt.has(Wr);return{node:E.createElement(cW,Object.assign({},rt.get(Wr),{checked:Fr,onClick:en=>en.stopPropagation(),onChange:en=>{Dt.has(Wr)||Ct(Wr,!0,[Wr],en.nativeEvent)}})),checked:Fr}}:pt=(yr,dr,Wt)=>{var Wr;const Fr=pe(dr,Wt),en=Dt.has(Fr),Yr=Tt.has(Fr),fr=rt.get(Fr);let Kr;return xe==="nest"?Kr=Yr:Kr=(Wr=fr?.indeterminate)!==null&&Wr!==void 0?Wr:Yr,{node:E.createElement(JT,Object.assign({},fr,{indeterminate:Kr,checked:en,skipGroup:!0,onClick:Br=>Br.stopPropagation(),onChange:Br=>{let{nativeEvent:an}=Br;const{shiftKey:ni}=an,Nr=Ut.findIndex(Pe=>Pe===Fr),ii=St.some(Pe=>Ut.includes(Pe));if(ni&&K&&ii){const Pe=Oe(Nr,Ut,Dt),he=Array.from(Dt);D?.(!en,he.map(ge=>me(ge)),Pe.map(ge=>me(ge))),ct(he,"multiple")}else{const Pe=St;if(K){const he=en?Rd(Pe,Fr):Mf(Pe,Fr);Ct(Fr,!en,he,an)}else{const he=j_([].concat(Pr(Pe),[Fr]),!0,Ye,Qe),{checkedKeys:ge,halfCheckedKeys:Te}=he;let $e=ge;if(en){const ke=new Set(ge);ke.delete(Fr),$e=j_(Array.from(ke),{checked:!1,halfCheckedKeys:Te},Ye,Qe).checkedKeys}Ct(Fr,!en,$e,an)}}_e(en?null:Nr)}})),checked:en}};const gt=(yr,dr,Wt)=>{const{node:Wr,checked:Fr}=pt(yr,dr,Wt);return Q?Q(Fr,dr,Wt,Wr):Wr};if(!Pt.includes(lm))if(Pt.findIndex(yr=>{var dr;return((dr=yr[pb])===null||dr===void 0?void 0:dr.columnType)==="EXPAND_COLUMN"})===0){const[yr,...dr]=Pt;Pt=[yr,lm].concat(Pr(dr))}else Pt=[lm].concat(Pr(Pt));const $t=Pt.indexOf(lm);Pt=Pt.filter((yr,dr)=>yr!==lm||dr===$t);const It=Pt[$t-1],Mt=Pt[$t+1];let Qt=X;Qt===void 0&&(Mt?.fixed!==void 0?Qt=Mt.fixed:It?.fixed!==void 0&&(Qt=It.fixed)),Qt&&It&&((Rt=It[pb])===null||Rt===void 0?void 0:Rt.columnType)==="EXPAND_COLUMN"&&It.fixed===void 0&&(It.fixed=Qt);const wr=Gt(`${Y}-selection-col`,{[`${Y}-selection-col-with-dropdown`]:Z&&H==="checkbox"}),br=()=>n?.columnTitle?typeof n.columnTitle=="function"?n.columnTitle(ve):n.columnTitle:ze,tn={fixed:Qt,width:$,className:`${Y}-selection-column`,title:br(),render:gt,onCell:n.onCell,[pb]:{className:wr}};return Pt.map(yr=>yr===lm?tn:yr)},[pe,qe,n,St,Ot,Tt,$,kt,xe,rt,D,Ct,Qe]),Ot]};function ZSe(t,n){return t._antProxy=t._antProxy||{},Object.keys(n).forEach(o=>{if(!(o in t._antProxy)){const s=t[o];t._antProxy[o]=s,t[o]=n[o]}}),t}function XSe(t,n){return E.useImperativeHandle(t,()=>{const o=n(),{nativeElement:s}=o;return typeof Proxy<"u"?new Proxy(s,{get(c,m){return o[m]?o[m]:Reflect.get(c,m)}}):ZSe(s,o)})}function YSe(t){return function(o){let{prefixCls:s,onExpand:c,record:m,expanded:v,expandable:d}=o;const C=`${s}-row-expand-icon`;return E.createElement("button",{type:"button",onClick:S=>{c(m,S),S.stopPropagation()},className:Gt(C,{[`${C}-spaced`]:!d,[`${C}-expanded`]:d&&v,[`${C}-collapsed`]:d&&!v}),"aria-label":v?t.collapse:t.expand,"aria-expanded":v})}}function JSe(t){return(o,s)=>{const c=o.querySelector(`.${t}-container`);let m=s;if(c){const v=getComputedStyle(c),d=parseInt(v.borderLeftWidth,10),C=parseInt(v.borderRightWidth,10);m=s-d-C}return m}}function by(t,n){return"key"in t&&t.key!==void 0&&t.key!==null?t.key:t.dataIndex?Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex:n}function Tw(t,n){return n?`${n}-${t}`:`${t}`}function bM(t,n){return typeof t=="function"?t(n):t}function QSe(t,n){const o=bM(t,n);return Object.prototype.toString.call(o)==="[object Object]"?"":o}var eCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"};const tCe=eCe;var rCe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:tCe}))};const nCe=E.forwardRef(rCe);function iCe(t){const n=E.useRef(t),o=Tq();return[()=>n.current,s=>{n.current=s,o()}]}function oCe(t){var n=t.dropPosition,o=t.dropLevelOffset,s=t.indent,c={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(n){case-1:c.top=0,c.left=-o*s;break;case 1:c.bottom=0,c.left=-o*s;break;case 0:c.bottom=0,c.left=s;break}return E.createElement("div",{style:c})}function pK(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function aCe(t,n){var o=E.useState(!1),s=nr(o,2),c=s[0],m=s[1];zo(function(){if(c)return t(),function(){n()}},[c]),zo(function(){return m(!0),function(){m(!1)}},[])}var sCe=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],mK=function(n,o){var s=n.className,c=n.style,m=n.motion,v=n.motionNodes,d=n.motionType,C=n.onMotionStart,S=n.onMotionEnd,R=n.active,D=n.treeNodeRequiredProps,$=xi(n,sCe),H=E.useState(!0),Z=nr(H,2),X=Z[0],Q=Z[1],G=E.useContext(jz),K=G.prefixCls,Y=v&&d!=="hide";zo(function(){v&&Y!==X&&Q(Y)},[v]);var re=function(){v&&C()},fe=E.useRef(!1),me=function(){v&&!fe.current&&(fe.current=!0,S())};aCe(re,me);var pe=function(Se){Y===Se&&me()};return v?E.createElement(Ud,Mr({ref:o,visible:X},m,{motionAppear:d==="show",onVisibleChanged:pe}),function(xe,Se){var oe=xe.className,Re=xe.style;return E.createElement("div",{ref:Se,className:Gt("".concat(K,"-treenode-motion"),oe),style:Re},v.map(function(Ve){var Oe=Mr({},(pK(Ve.data),Ve.data)),_e=Ve.title,Fe=Ve.key,Le=Ve.isStart,Me=Ve.isEnd;delete Oe.children;var Ce=db(Fe,D);return E.createElement(s0,Mr({},Oe,Ce,{title:_e,active:R,data:Ve.data,key:Fe,isStart:Le,isEnd:Me}))}))}):E.createElement(s0,Mr({domRef:o,className:s,style:c},$,{active:R}))};mK.displayName="MotionTreeNode";var lCe=E.forwardRef(mK);function cCe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=t.length,s=n.length;if(Math.abs(o-s)!==1)return{add:!1,key:null};function c(m,v){var d=new Map;m.forEach(function(S){d.set(S,!0)});var C=v.filter(function(S){return!d.has(S)});return C.length===1?C[0]:null}return o<s?{add:!0,key:c(t,n)}:{add:!1,key:c(n,t)}}function c7(t,n,o){var s=t.findIndex(function(d){return d.key===o}),c=t[s+1],m=n.findIndex(function(d){return d.key===o});if(c){var v=n.findIndex(function(d){return d.key===c.key});return n.slice(m+1,v)}return n.slice(m+1)}var uCe=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],u7={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},hCe=function(){},wy="RC_TREE_MOTION_".concat(Math.random()),ek={key:wy},gK={key:wy,level:0,index:0,pos:"0",node:ek,nodes:[ek]},h7={parent:null,children:[],pos:gK.pos,data:ek,title:null,key:wy,isStart:[],isEnd:[]};function d7(t,n,o,s){return n===!1||!o?t:t.slice(0,Math.ceil(o/s)+1)}function f7(t){var n=t.key,o=t.pos;return ww(n,o)}function dCe(t){for(var n=String(t.data.key),o=t;o.parent;)o=o.parent,n="".concat(o.data.key," > ").concat(n);return n}var yK=E.forwardRef(function(t,n){var o=t.prefixCls,s=t.data;t.selectable,t.checkable;var c=t.expandedKeys,m=t.selectedKeys,v=t.checkedKeys,d=t.loadedKeys,C=t.loadingKeys,S=t.halfCheckedKeys,R=t.keyEntities,D=t.disabled,$=t.dragging,H=t.dragOverNodeKey,Z=t.dropPosition,X=t.motion,Q=t.height,G=t.itemHeight,K=t.virtual,Y=t.focusable,re=t.activeItem,fe=t.focused,me=t.tabIndex,pe=t.onKeyDown,xe=t.onFocus,Se=t.onBlur,oe=t.onActiveChange,Re=t.onListChangeStart,Ve=t.onListChangeEnd,Oe=xi(t,uCe),_e=E.useRef(null),Fe=E.useRef(null);E.useImperativeHandle(n,function(){return{scrollTo:function(pt){_e.current.scrollTo(pt)},getIndentWidth:function(){return Fe.current.offsetWidth}}});var Le=E.useState(c),Me=nr(Le,2),Ce=Me[0],Ye=Me[1],qe=E.useState(s),rt=nr(qe,2),Qe=rt[0],St=rt[1],jt=E.useState(s),Ot=nr(jt,2),Tt=Ot[0],ct=Ot[1],Ct=E.useState([]),kt=nr(Ct,2),zt=kt[0],Nt=kt[1],Rt=E.useState(null),Pt=nr(Rt,2),Dt=Pt[0],Ut=Pt[1],sr=E.useRef(s);sr.current=s;function vt(){var ve=sr.current;St(ve),ct(ve),Nt([]),Ut(null),Ve()}zo(function(){Ye(c);var ve=cCe(Ce,c);if(ve.key!==null)if(ve.add){var pt=Qe.findIndex(function(wr){var br=wr.key;return br===ve.key}),gt=d7(c7(Qe,s,ve.key),K,Q,G),$t=Qe.slice();$t.splice(pt+1,0,h7),ct($t),Nt(gt),Ut("show")}else{var It=s.findIndex(function(wr){var br=wr.key;return br===ve.key}),Mt=d7(c7(s,Qe,ve.key),K,Q,G),Qt=s.slice();Qt.splice(It+1,0,h7),ct(Qt),Nt(Mt),Ut("hide")}else Qe!==s&&(St(s),ct(s))},[c,s]),E.useEffect(function(){$||vt()},[$]);var De=X?Tt:s,ze={expandedKeys:c,selectedKeys:m,loadedKeys:d,loadingKeys:C,checkedKeys:v,halfCheckedKeys:S,dragOverNodeKey:H,dropPosition:Z,keyEntities:R};return E.createElement(E.Fragment,null,fe&&re&&E.createElement("span",{style:u7,"aria-live":"assertive"},dCe(re)),E.createElement("div",null,E.createElement("input",{style:u7,disabled:Y===!1||D,tabIndex:Y!==!1?me:null,onKeyDown:pe,onFocus:xe,onBlur:Se,value:"",onChange:hCe,"aria-label":"for screen reader"})),E.createElement("div",{className:"".concat(o,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},E.createElement("div",{className:"".concat(o,"-indent")},E.createElement("div",{ref:Fe,className:"".concat(o,"-indent-unit")}))),E.createElement(lM,Mr({},Oe,{data:De,itemKey:f7,height:Q,fullHeight:!1,virtual:K,itemHeight:G,prefixCls:"".concat(o,"-list"),ref:_e,onVisibleChange:function(pt,gt){var $t=new Set(pt),It=gt.filter(function(Mt){return!$t.has(Mt)});It.some(function(Mt){return f7(Mt)===wy})&&vt()}}),function(ve){var pt=ve.pos,gt=Mr({},(pK(ve.data),ve.data)),$t=ve.title,It=ve.key,Mt=ve.isStart,Qt=ve.isEnd,wr=ww(It,pt);delete gt.key,delete gt.children;var br=db(wr,ze);return E.createElement(lCe,Mr({},gt,br,{title:$t,active:!!re&&It===re.key,pos:pt,data:ve.data,isStart:Mt,isEnd:Qt,motion:X,motionNodes:It===wy?zt:null,motionType:Dt,onMotionStart:Re,onMotionEnd:vt,treeNodeRequiredProps:ze,onMouseMove:function(){oe(null)}}))}))});yK.displayName="NodeList";var fCe=10,Uz=function(t){Wf(o,t);var n=Kf(o);function o(){var s;Il(this,o);for(var c=arguments.length,m=new Array(c),v=0;v<c;v++)m[v]=arguments[v];return s=n.call.apply(n,[this].concat(m)),s.destroyed=!1,s.delayedDragEnterLogic=void 0,s.loadingRetryTimes={},s.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:a0()},s.dragStartMousePosition=null,s.dragNode=void 0,s.currentMouseOverDroppableNodeKey=null,s.listRef=E.createRef(),s.onNodeDragStart=function(d,C){var S=s.state,R=S.expandedKeys,D=S.keyEntities,$=s.props.onDragStart,H=C.props.eventKey;s.dragNode=C,s.dragStartMousePosition={x:d.clientX,y:d.clientY};var Z=Rd(R,H);s.setState({draggingNodeKey:H,dragChildrenKeys:HSe(H,D),indent:s.listRef.current.getIndentWidth()}),s.setExpandedKeys(Z),window.addEventListener("dragend",s.onWindowDragEnd),$?.({event:d,node:As(C.props)})},s.onNodeDragEnter=function(d,C){var S=s.state,R=S.expandedKeys,D=S.keyEntities,$=S.dragChildrenKeys,H=S.flattenNodes,Z=S.indent,X=s.props,Q=X.onDragEnter,G=X.onExpand,K=X.allowDrop,Y=X.direction,re=C.props,fe=re.pos,me=re.eventKey,pe=Gi(s),xe=pe.dragNode;if(s.currentMouseOverDroppableNodeKey!==me&&(s.currentMouseOverDroppableNodeKey=me),!xe){s.resetDragState();return}var Se=a7(d,xe,C,Z,s.dragStartMousePosition,K,H,D,R,Y),oe=Se.dropPosition,Re=Se.dropLevelOffset,Ve=Se.dropTargetKey,Oe=Se.dropContainerKey,_e=Se.dropTargetPos,Fe=Se.dropAllowed,Le=Se.dragOverNodeKey;if($.indexOf(Ve)!==-1||!Fe){s.resetDragState();return}if(s.delayedDragEnterLogic||(s.delayedDragEnterLogic={}),Object.keys(s.delayedDragEnterLogic).forEach(function(Me){clearTimeout(s.delayedDragEnterLogic[Me])}),xe.props.eventKey!==C.props.eventKey&&(d.persist(),s.delayedDragEnterLogic[fe]=window.setTimeout(function(){if(s.state.draggingNodeKey!==null){var Me=Pr(R),Ce=pu(D,C.props.eventKey);Ce&&(Ce.children||[]).length&&(Me=Mf(R,C.props.eventKey)),"expandedKeys"in s.props||s.setExpandedKeys(Me),G?.(Me,{node:As(C.props),expanded:!0,nativeEvent:d.nativeEvent})}},800)),xe.props.eventKey===Ve&&Re===0){s.resetDragState();return}s.setState({dragOverNodeKey:Le,dropPosition:oe,dropLevelOffset:Re,dropTargetKey:Ve,dropContainerKey:Oe,dropTargetPos:_e,dropAllowed:Fe}),Q?.({event:d,node:As(C.props),expandedKeys:R})},s.onNodeDragOver=function(d,C){var S=s.state,R=S.dragChildrenKeys,D=S.flattenNodes,$=S.keyEntities,H=S.expandedKeys,Z=S.indent,X=s.props,Q=X.onDragOver,G=X.allowDrop,K=X.direction,Y=Gi(s),re=Y.dragNode;if(re){var fe=a7(d,re,C,Z,s.dragStartMousePosition,G,D,$,H,K),me=fe.dropPosition,pe=fe.dropLevelOffset,xe=fe.dropTargetKey,Se=fe.dropContainerKey,oe=fe.dropAllowed,Re=fe.dropTargetPos,Ve=fe.dragOverNodeKey;R.indexOf(xe)!==-1||!oe||(re.props.eventKey===xe&&pe===0?s.state.dropPosition===null&&s.state.dropLevelOffset===null&&s.state.dropTargetKey===null&&s.state.dropContainerKey===null&&s.state.dropTargetPos===null&&s.state.dropAllowed===!1&&s.state.dragOverNodeKey===null||s.resetDragState():me===s.state.dropPosition&&pe===s.state.dropLevelOffset&&xe===s.state.dropTargetKey&&Se===s.state.dropContainerKey&&Re===s.state.dropTargetPos&&oe===s.state.dropAllowed&&Ve===s.state.dragOverNodeKey||s.setState({dropPosition:me,dropLevelOffset:pe,dropTargetKey:xe,dropContainerKey:Se,dropTargetPos:Re,dropAllowed:oe,dragOverNodeKey:Ve}),Q?.({event:d,node:As(C.props)}))}},s.onNodeDragLeave=function(d,C){s.currentMouseOverDroppableNodeKey===C.props.eventKey&&!d.currentTarget.contains(d.relatedTarget)&&(s.resetDragState(),s.currentMouseOverDroppableNodeKey=null);var S=s.props.onDragLeave;S?.({event:d,node:As(C.props)})},s.onWindowDragEnd=function(d){s.onNodeDragEnd(d,null,!0),window.removeEventListener("dragend",s.onWindowDragEnd)},s.onNodeDragEnd=function(d,C){var S=s.props.onDragEnd;s.setState({dragOverNodeKey:null}),s.cleanDragState(),S?.({event:d,node:As(C.props)}),s.dragNode=null,window.removeEventListener("dragend",s.onWindowDragEnd)},s.onNodeDrop=function(d,C){var S,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,D=s.state,$=D.dragChildrenKeys,H=D.dropPosition,Z=D.dropTargetKey,X=D.dropTargetPos,Q=D.dropAllowed;if(Q){var G=s.props.onDrop;if(s.setState({dragOverNodeKey:null}),s.cleanDragState(),Z!==null){var K=yt(yt({},db(Z,s.getTreeNodeRequiredProps())),{},{active:((S=s.getActiveItem())===null||S===void 0?void 0:S.key)===Z,data:pu(s.state.keyEntities,Z).node}),Y=$.indexOf(Z)!==-1;Ua(!Y,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var re=Vz(X),fe={event:d,node:As(K),dragNode:s.dragNode?As(s.dragNode.props):null,dragNodesKeys:[s.dragNode.props.eventKey].concat($),dropToGap:H!==0,dropPosition:H+Number(re[re.length-1])};R||G?.(fe),s.dragNode=null}}},s.cleanDragState=function(){var d=s.state.draggingNodeKey;d!==null&&s.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),s.dragStartMousePosition=null,s.currentMouseOverDroppableNodeKey=null},s.triggerExpandActionExpand=function(d,C){var S=s.state,R=S.expandedKeys,D=S.flattenNodes,$=C.expanded,H=C.key,Z=C.isLeaf;if(!(Z||d.shiftKey||d.metaKey||d.ctrlKey)){var X=D.filter(function(G){return G.key===H})[0],Q=As(yt(yt({},db(H,s.getTreeNodeRequiredProps())),{},{data:X.data}));s.setExpandedKeys($?Rd(R,H):Mf(R,H)),s.onNodeExpand(d,Q)}},s.onNodeClick=function(d,C){var S=s.props,R=S.onClick,D=S.expandAction;D==="click"&&s.triggerExpandActionExpand(d,C),R?.(d,C)},s.onNodeDoubleClick=function(d,C){var S=s.props,R=S.onDoubleClick,D=S.expandAction;D==="doubleClick"&&s.triggerExpandActionExpand(d,C),R?.(d,C)},s.onNodeSelect=function(d,C){var S=s.state.selectedKeys,R=s.state,D=R.keyEntities,$=R.fieldNames,H=s.props,Z=H.onSelect,X=H.multiple,Q=C.selected,G=C[$.key],K=!Q;K?X?S=Mf(S,G):S=[G]:S=Rd(S,G);var Y=S.map(function(re){var fe=pu(D,re);return fe?fe.node:null}).filter(function(re){return re});s.setUncontrolledState({selectedKeys:S}),Z?.(S,{event:"select",selected:K,node:C,selectedNodes:Y,nativeEvent:d.nativeEvent})},s.onNodeCheck=function(d,C,S){var R=s.state,D=R.keyEntities,$=R.checkedKeys,H=R.halfCheckedKeys,Z=s.props,X=Z.checkStrictly,Q=Z.onCheck,G=C.key,K,Y={event:"check",node:C,checked:S,nativeEvent:d.nativeEvent};if(X){var re=S?Mf($,G):Rd($,G),fe=Rd(H,G);K={checked:re,halfChecked:fe},Y.checkedNodes=re.map(function(Re){return pu(D,Re)}).filter(function(Re){return Re}).map(function(Re){return Re.node}),s.setUncontrolledState({checkedKeys:re})}else{var me=j_([].concat(Pr($),[G]),!0,D),pe=me.checkedKeys,xe=me.halfCheckedKeys;if(!S){var Se=new Set(pe);Se.delete(G);var oe=j_(Array.from(Se),{checked:!1,halfCheckedKeys:xe},D);pe=oe.checkedKeys,xe=oe.halfCheckedKeys}K=pe,Y.checkedNodes=[],Y.checkedNodesPositions=[],Y.halfCheckedKeys=xe,pe.forEach(function(Re){var Ve=pu(D,Re);if(Ve){var Oe=Ve.node,_e=Ve.pos;Y.checkedNodes.push(Oe),Y.checkedNodesPositions.push({node:Oe,pos:_e})}}),s.setUncontrolledState({checkedKeys:pe},!1,{halfCheckedKeys:xe})}Q?.(K,Y)},s.onNodeLoad=function(d){var C=d.key,S=new Promise(function(R,D){s.setState(function($){var H=$.loadedKeys,Z=H===void 0?[]:H,X=$.loadingKeys,Q=X===void 0?[]:X,G=s.props,K=G.loadData,Y=G.onLoad;if(!K||Z.indexOf(C)!==-1||Q.indexOf(C)!==-1)return null;var re=K(d);return re.then(function(){var fe=s.state.loadedKeys,me=Mf(fe,C);Y?.(me,{event:"load",node:d}),s.setUncontrolledState({loadedKeys:me}),s.setState(function(pe){return{loadingKeys:Rd(pe.loadingKeys,C)}}),R()}).catch(function(fe){if(s.setState(function(pe){return{loadingKeys:Rd(pe.loadingKeys,C)}}),s.loadingRetryTimes[C]=(s.loadingRetryTimes[C]||0)+1,s.loadingRetryTimes[C]>=fCe){var me=s.state.loadedKeys;Ua(!1,"Retry for `loadData` many times but still failed. No more retry."),s.setUncontrolledState({loadedKeys:Mf(me,C)}),R()}D(fe)}),{loadingKeys:Mf(Q,C)}})});return S.catch(function(){}),S},s.onNodeMouseEnter=function(d,C){var S=s.props.onMouseEnter;S?.({event:d,node:C})},s.onNodeMouseLeave=function(d,C){var S=s.props.onMouseLeave;S?.({event:d,node:C})},s.onNodeContextMenu=function(d,C){var S=s.props.onRightClick;S&&(d.preventDefault(),S({event:d,node:C}))},s.onFocus=function(){var d=s.props.onFocus;s.setState({focused:!0});for(var C=arguments.length,S=new Array(C),R=0;R<C;R++)S[R]=arguments[R];d?.apply(void 0,S)},s.onBlur=function(){var d=s.props.onBlur;s.setState({focused:!1}),s.onActiveChange(null);for(var C=arguments.length,S=new Array(C),R=0;R<C;R++)S[R]=arguments[R];d?.apply(void 0,S)},s.getTreeNodeRequiredProps=function(){var d=s.state,C=d.expandedKeys,S=d.selectedKeys,R=d.loadedKeys,D=d.loadingKeys,$=d.checkedKeys,H=d.halfCheckedKeys,Z=d.dragOverNodeKey,X=d.dropPosition,Q=d.keyEntities;return{expandedKeys:C||[],selectedKeys:S||[],loadedKeys:R||[],loadingKeys:D||[],checkedKeys:$||[],halfCheckedKeys:H||[],dragOverNodeKey:Z,dropPosition:X,keyEntities:Q}},s.setExpandedKeys=function(d){var C=s.state,S=C.treeData,R=C.fieldNames,D=YP(S,d,R);s.setUncontrolledState({expandedKeys:d,flattenNodes:D},!0)},s.onNodeExpand=function(d,C){var S=s.state.expandedKeys,R=s.state,D=R.listChanging,$=R.fieldNames,H=s.props,Z=H.onExpand,X=H.loadData,Q=C.expanded,G=C[$.key];if(!D){var K=S.indexOf(G),Y=!Q;if(Ua(Q&&K!==-1||!Q&&K===-1,"Expand state not sync with index check"),Y?S=Mf(S,G):S=Rd(S,G),s.setExpandedKeys(S),Z?.(S,{node:C,expanded:Y,nativeEvent:d.nativeEvent}),Y&&X){var re=s.onNodeLoad(C);re&&re.then(function(){var fe=YP(s.state.treeData,S,$);s.setUncontrolledState({flattenNodes:fe})}).catch(function(){var fe=s.state.expandedKeys,me=Rd(fe,G);s.setExpandedKeys(me)})}}},s.onListChangeStart=function(){s.setUncontrolledState({listChanging:!0})},s.onListChangeEnd=function(){setTimeout(function(){s.setUncontrolledState({listChanging:!1})})},s.onActiveChange=function(d){var C=s.state.activeKey,S=s.props,R=S.onActiveChange,D=S.itemScrollOffset,$=D===void 0?0:D;C!==d&&(s.setState({activeKey:d}),d!==null&&s.scrollTo({key:d,offset:$}),R?.(d))},s.getActiveItem=function(){var d=s.state,C=d.activeKey,S=d.flattenNodes;return C===null?null:S.find(function(R){var D=R.key;return D===C})||null},s.offsetActiveKey=function(d){var C=s.state,S=C.flattenNodes,R=C.activeKey,D=S.findIndex(function(Z){var X=Z.key;return X===R});D===-1&&d<0&&(D=S.length),D=(D+d+S.length)%S.length;var $=S[D];if($){var H=$.key;s.onActiveChange(H)}else s.onActiveChange(null)},s.onKeyDown=function(d){var C=s.state,S=C.activeKey,R=C.expandedKeys,D=C.checkedKeys,$=C.fieldNames,H=s.props,Z=H.onKeyDown,X=H.checkable,Q=H.selectable;switch(d.which){case Or.UP:{s.offsetActiveKey(-1),d.preventDefault();break}case Or.DOWN:{s.offsetActiveKey(1),d.preventDefault();break}}var G=s.getActiveItem();if(G&&G.data){var K=s.getTreeNodeRequiredProps(),Y=G.data.isLeaf===!1||!!(G.data[$.children]||[]).length,re=As(yt(yt({},db(S,K)),{},{data:G.data,active:!0}));switch(d.which){case Or.LEFT:{Y&&R.includes(S)?s.onNodeExpand({},re):G.parent&&s.onActiveChange(G.parent.key),d.preventDefault();break}case Or.RIGHT:{Y&&!R.includes(S)?s.onNodeExpand({},re):G.children&&G.children.length&&s.onActiveChange(G.children[0].key),d.preventDefault();break}case Or.ENTER:case Or.SPACE:{X&&!re.disabled&&re.checkable!==!1&&!re.disableCheckbox?s.onNodeCheck({},re,!D.includes(S)):!X&&Q&&!re.disabled&&re.selectable!==!1&&s.onNodeSelect({},re);break}}}Z?.(d)},s.setUncontrolledState=function(d){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!s.destroyed){var R=!1,D=!0,$={};Object.keys(d).forEach(function(H){if(H in s.props){D=!1;return}R=!0,$[H]=d[H]}),R&&(!C||D)&&s.setState(yt(yt({},$),S))}},s.scrollTo=function(d){s.listRef.current.scrollTo(d)},s}return Ml(o,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var c=this.props,m=c.activeKey,v=c.itemScrollOffset,d=v===void 0?0:v;m!==void 0&&m!==this.state.activeKey&&(this.setState({activeKey:m}),m!==null&&this.scrollTo({key:m,offset:d}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var c,m=this.state,v=m.focused,d=m.flattenNodes,C=m.keyEntities,S=m.draggingNodeKey,R=m.activeKey,D=m.dropLevelOffset,$=m.dropContainerKey,H=m.dropTargetKey,Z=m.dropPosition,X=m.dragOverNodeKey,Q=m.indent,G=this.props,K=G.prefixCls,Y=G.className,re=G.style,fe=G.showLine,me=G.focusable,pe=G.tabIndex,xe=pe===void 0?0:pe,Se=G.selectable,oe=G.showIcon,Re=G.icon,Ve=G.switcherIcon,Oe=G.draggable,_e=G.checkable,Fe=G.checkStrictly,Le=G.disabled,Me=G.motion,Ce=G.loadData,Ye=G.filterTreeNode,qe=G.height,rt=G.itemHeight,Qe=G.virtual,St=G.titleRender,jt=G.dropIndicatorRender,Ot=G.onContextMenu,Tt=G.onScroll,ct=G.direction,Ct=G.rootClassName,kt=G.rootStyle,zt=Uh(this.props,{aria:!0,data:!0}),Nt;return Oe&&(Ei(Oe)==="object"?Nt=Oe:typeof Oe=="function"?Nt={nodeDraggable:Oe}:Nt={}),E.createElement(jz.Provider,{value:{prefixCls:K,selectable:Se,showIcon:oe,icon:Re,switcherIcon:Ve,draggable:Nt,draggingNodeKey:S,checkable:_e,checkStrictly:Fe,disabled:Le,keyEntities:C,dropLevelOffset:D,dropContainerKey:$,dropTargetKey:H,dropPosition:Z,dragOverNodeKey:X,indent:Q,direction:ct,dropIndicatorRender:jt,loadData:Ce,filterTreeNode:Ye,titleRender:St,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},E.createElement("div",{role:"tree",className:Gt(K,Y,Ct,(c={},xt(c,"".concat(K,"-show-line"),fe),xt(c,"".concat(K,"-focused"),v),xt(c,"".concat(K,"-active-focused"),R!==null),c)),style:kt},E.createElement(yK,Mr({ref:this.listRef,prefixCls:K,style:re,data:d,disabled:Le,selectable:Se,checkable:!!_e,motion:Me,dragging:S!==null,height:qe,itemHeight:rt,virtual:Qe,focusable:me,focused:v,tabIndex:xe,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:Ot,onScroll:Tt},this.getTreeNodeRequiredProps(),zt))))}}],[{key:"getDerivedStateFromProps",value:function(c,m){var v=m.prevProps,d={prevProps:c};function C(me){return!v&&me in c||v&&v[me]!==c[me]}var S,R=m.fieldNames;if(C("fieldNames")&&(R=a0(c.fieldNames),d.fieldNames=R),C("treeData")?S=c.treeData:C("children")&&(Ua(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),S=yW(c.children)),S){d.treeData=S;var D=Az(S,{fieldNames:R});d.keyEntities=yt(xt({},wy,gK),D.keyEntities)}var $=d.keyEntities||m.keyEntities;if(C("expandedKeys")||v&&C("autoExpandParent"))d.expandedKeys=c.autoExpandParent||!v&&c.defaultExpandParent?XR(c.expandedKeys,$):c.expandedKeys;else if(!v&&c.defaultExpandAll){var H=yt({},$);delete H[wy],d.expandedKeys=Object.keys(H).map(function(me){return H[me].key})}else!v&&c.defaultExpandedKeys&&(d.expandedKeys=c.autoExpandParent||c.defaultExpandParent?XR(c.defaultExpandedKeys,$):c.defaultExpandedKeys);if(d.expandedKeys||delete d.expandedKeys,S||d.expandedKeys){var Z=YP(S||m.treeData,d.expandedKeys||m.expandedKeys,R);d.flattenNodes=Z}if(c.selectable&&(C("selectedKeys")?d.selectedKeys=s7(c.selectedKeys,c):!v&&c.defaultSelectedKeys&&(d.selectedKeys=s7(c.defaultSelectedKeys,c))),c.checkable){var X;if(C("checkedKeys")?X=iA(c.checkedKeys)||{}:!v&&c.defaultCheckedKeys?X=iA(c.defaultCheckedKeys)||{}:S&&(X=iA(c.checkedKeys)||{checkedKeys:m.checkedKeys,halfCheckedKeys:m.halfCheckedKeys}),X){var Q=X,G=Q.checkedKeys,K=G===void 0?[]:G,Y=Q.halfCheckedKeys,re=Y===void 0?[]:Y;if(!c.checkStrictly){var fe=j_(K,!0,$);K=fe.checkedKeys,re=fe.halfCheckedKeys}d.checkedKeys=K,d.halfCheckedKeys=re}}return C("loadedKeys")&&(d.loadedKeys=c.loadedKeys),d}}]),o}(E.Component);Uz.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:oCe,allowDrop:function(){return!0},expandAction:!1};Uz.TreeNode=s0;var pCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const mCe=pCe;var gCe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:mCe}))};const vK=E.forwardRef(gCe);var yCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const vCe=yCe;var _Ce=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:vCe}))};const xCe=E.forwardRef(_Ce);var bCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};const wCe=bCe;var SCe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:wCe}))};const CCe=E.forwardRef(SCe);var ECe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};const TCe=ECe;var ICe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:TCe}))};const MCe=E.forwardRef(ICe),PCe=new Mo("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),ACe=(t,n)=>({[`.${t}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${n.motionDurationSlow}`}}}),RCe=(t,n)=>({[`.${t}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:n.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${Xt(n.lineWidthBold)} solid ${n.colorPrimary}`,borderRadius:"50%",content:'""'}}}),kCe=(t,n)=>{const{treeCls:o,treeNodeCls:s,treeNodePadding:c,titleHeight:m,nodeSelectedBg:v,nodeHoverBg:d}=n,C=n.paddingXS;return{[o]:Object.assign(Object.assign({},Oa(n)),{background:n.colorBgContainer,borderRadius:n.borderRadius,transition:`background-color ${n.motionDurationSlow}`,[`&${o}-rtl`]:{[`${o}-switcher`]:{"&_close":{[`${o}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${o}-active-focused)`]:Object.assign({},Lm(n)),[`${o}-list-holder-inner`]:{alignItems:"flex-start"},[`&${o}-block-node`]:{[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-node-content-wrapper`]:{flex:"auto"},[`${s}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:c,insetInlineStart:0,border:`1px solid ${n.colorPrimary}`,opacity:0,animationName:PCe,animationDuration:n.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[`${s}`]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${Xt(c)} 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${o}-node-content-wrapper`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${o}-node-content-wrapper`]:{background:n.controlItemBgHover},[`&:not(${s}-disabled).filter-node ${o}-title`]:{color:"inherit",fontWeight:500},"&-draggable":{[`${o}-draggable-icon`]:{flexShrink:0,width:m,lineHeight:`${Xt(m)}`,textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${n.motionDurationSlow}`,[`${s}:hover &`]:{opacity:.45}},[`&${s}-disabled`]:{[`${o}-draggable-icon`]:{visibility:"hidden"}}}},[`${o}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:m}},[`${o}-draggable-icon`]:{visibility:"hidden"},[`${o}-switcher`]:Object.assign(Object.assign({},ACe(t,n)),{position:"relative",flex:"none",alignSelf:"stretch",width:m,margin:0,lineHeight:`${Xt(m)}`,textAlign:"center",cursor:"pointer",userSelect:"none","&-noop":{cursor:"default"},"&_close":{[`${o}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:n.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:n.calc(m).div(2).equal(),bottom:n.calc(c).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${n.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:n.calc(n.calc(m).div(2).equal()).mul(.8).equal(),height:n.calc(m).div(2).equal(),borderBottom:`1px solid ${n.colorBorder}`,content:'""'}}}),[`${o}-checkbox`]:{top:"initial",marginInlineEnd:C,alignSelf:"flex-start",marginTop:n.marginXXS},[`${o}-node-content-wrapper, ${o}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:m,margin:0,padding:`0 ${Xt(n.calc(n.paddingXS).div(2).equal())}`,color:"inherit",lineHeight:`${Xt(m)}`,background:"transparent",borderRadius:n.borderRadius,cursor:"pointer",transition:`all ${n.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:d},[`&${o}-node-selected`]:{backgroundColor:v},[`${o}-iconEle`]:{display:"inline-block",width:m,height:m,lineHeight:`${Xt(m)}`,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${o}-unselectable ${o}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${o}-node-content-wrapper`]:Object.assign({lineHeight:`${Xt(m)}`,userSelect:"none"},RCe(t,n)),[`${s}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${n.colorPrimary}`}},"&-show-line":{[`${o}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:n.calc(m).div(2).equal(),bottom:n.calc(c).mul(-1).equal(),borderInlineEnd:`1px solid ${n.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${o}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${s}-leaf-last`]:{[`${o}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${Xt(n.calc(m).div(2).equal())} !important`}}}}})}},OCe=t=>{const{treeCls:n,treeNodeCls:o,treeNodePadding:s,directoryNodeSelectedBg:c,directoryNodeSelectedColor:m}=t;return{[`${n}${n}-directory`]:{[o]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:s,insetInlineStart:0,transition:`background-color ${t.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:t.controlItemBgHover}},"> *":{zIndex:1},[`${n}-switcher`]:{transition:`color ${t.motionDurationMid}`},[`${n}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${n}-node-selected`]:{color:m,background:"transparent"}},"&-selected":{"\n            &:hover::before,\n            &::before\n          ":{background:c},[`${n}-switcher`]:{color:m},[`${n}-node-content-wrapper`]:{color:m,background:"transparent"}}}}}},zCe=(t,n)=>{const o=`.${t}`,s=`${o}-treenode`,c=n.calc(n.paddingXS).div(2).equal(),m=Yi(n,{treeCls:o,treeNodeCls:s,treeNodePadding:c});return[kCe(t,m),OCe(m)]},DCe=t=>{const{controlHeightSM:n}=t;return{titleHeight:n,nodeHoverBg:t.controlItemBgHover,nodeSelectedBg:t.controlItemBgActive}},LCe=t=>{const{colorTextLightSolid:n,colorPrimary:o}=t;return Object.assign(Object.assign({},DCe(t)),{directoryNodeSelectedColor:n,directoryNodeSelectedBg:o})},$Ce=os("Tree",(t,n)=>{let{prefixCls:o}=n;return[{[t.componentCls]:_W(`${o}-checkbox`,t)},zCe(o,t),sz(t)]},LCe),p7=4;function BCe(t){const{dropPosition:n,dropLevelOffset:o,prefixCls:s,indent:c,direction:m="ltr"}=t,v=m==="ltr"?"left":"right",d=m==="ltr"?"right":"left",C={[v]:-o*c+p7,[d]:0};switch(n){case-1:C.top=-3;break;case 1:C.bottom=-3;break;default:C.bottom=-3,C[v]=c+p7;break}return rr.createElement("div",{style:C,className:`${s}-drop-indicator`})}var FCe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};const NCe=FCe;var jCe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:NCe}))};const VCe=E.forwardRef(jCe);var UCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};const HCe=UCe;var GCe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:HCe}))};const qCe=E.forwardRef(GCe);var WCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};const KCe=WCe;var ZCe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:KCe}))};const XCe=E.forwardRef(ZCe),YCe=t=>{const{prefixCls:n,switcherIcon:o,treeNodeProps:s,showLine:c}=t,{isLeaf:m,expanded:v,loading:d}=s;if(d)return E.createElement(YI,{className:`${n}-switcher-loading-icon`});let C;if(c&&typeof c=="object"&&(C=c.showLeafIcon),m){if(!c)return null;if(typeof C!="boolean"&&C){const D=typeof C=="function"?C(s):C,$=`${n}-switcher-line-custom-icon`;return xu(D)?cc(D,{className:Gt(D.props.className||"",$)}):D}return C?E.createElement(vK,{className:`${n}-switcher-line-icon`}):E.createElement("span",{className:`${n}-switcher-leaf-line`})}const S=`${n}-switcher-icon`,R=typeof o=="function"?o(s):o;return xu(R)?cc(R,{className:Gt(R.props.className||"",S)}):R!==void 0?R:c?v?E.createElement(qCe,{className:`${n}-switcher-line-icon`}):E.createElement(XCe,{className:`${n}-switcher-line-icon`}):E.createElement(VCe,{className:S})},JCe=YCe,QCe=rr.forwardRef((t,n)=>{var o;const{getPrefixCls:s,direction:c,virtual:m,tree:v}=rr.useContext(hi),{prefixCls:d,className:C,showIcon:S=!1,showLine:R,switcherIcon:D,blockNode:$=!1,children:H,checkable:Z=!1,selectable:X=!0,draggable:Q,motion:G,style:K}=t,Y=s("tree",d),re=s(),fe=G??Object.assign(Object.assign({},VT(re)),{motionAppear:!1}),me=Object.assign(Object.assign({},t),{checkable:Z,selectable:X,showIcon:S,motion:fe,blockNode:$,showLine:!!R,dropIndicatorRender:BCe}),[pe,xe,Se]=$Ce(Y),[,oe]=Ws(),Re=oe.paddingXS/2+(((o=oe.Tree)===null||o===void 0?void 0:o.titleHeight)||oe.controlHeightSM),Ve=rr.useMemo(()=>{if(!Q)return!1;let _e={};switch(typeof Q){case"function":_e.nodeDraggable=Q;break;case"object":_e=Object.assign({},Q);break}return _e.icon!==!1&&(_e.icon=_e.icon||rr.createElement(MCe,null)),_e},[Q]),Oe=_e=>rr.createElement(JCe,{prefixCls:Y,switcherIcon:D,treeNodeProps:_e,showLine:R});return pe(rr.createElement(Uz,Object.assign({itemHeight:Re,ref:n,virtual:m},me,{style:Object.assign(Object.assign({},v?.style),K),prefixCls:Y,className:Gt({[`${Y}-icon-hide`]:!S,[`${Y}-block-node`]:$,[`${Y}-unselectable`]:!X,[`${Y}-rtl`]:c==="rtl"},v?.className,C,xe,Se),direction:c,checkable:Z&&rr.createElement("span",{className:`${Y}-checkbox-inner`}),selectable:X,switcherIcon:Oe,draggable:Ve}),H))}),_K=QCe;var Rf;(function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End"})(Rf||(Rf={}));function Hz(t,n,o){const{key:s,children:c}=o;function m(v){const d=v[s],C=v[c];n(d,v)!==!1&&Hz(C||[],n,o)}t.forEach(m)}function eEe(t){let{treeData:n,expandedKeys:o,startKey:s,endKey:c,fieldNames:m}=t;const v=[];let d=Rf.None;if(s&&s===c)return[s];if(!s||!c)return[];function C(S){return S===s||S===c}return Hz(n,S=>{if(d===Rf.End)return!1;if(C(S)){if(v.push(S),d===Rf.None)d=Rf.Start;else if(d===Rf.Start)return d=Rf.End,!1}else d===Rf.Start&&v.push(S);return o.includes(S)},a0(m)),v}function oA(t,n,o){const s=Pr(n),c=[];return Hz(t,(m,v)=>{const d=s.indexOf(m);return d!==-1&&(c.push(v),s.splice(d,1)),!!s.length},a0(o)),c}var m7=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};function tEe(t){const{isLeaf:n,expanded:o}=t;return n?E.createElement(vK,null):o?E.createElement(xCe,null):E.createElement(CCe,null)}function g7(t){let{treeData:n,children:o}=t;return n||yW(o)}const rEe=(t,n)=>{var{defaultExpandAll:o,defaultExpandParent:s,defaultExpandedKeys:c}=t,m=m7(t,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const v=E.useRef(),d=E.useRef(),C=()=>{const{keyEntities:xe}=Az(g7(m));let Se;return o?Se=Object.keys(xe):s?Se=XR(m.expandedKeys||c||[],xe):Se=m.expandedKeys||c,Se},[S,R]=E.useState(m.selectedKeys||m.defaultSelectedKeys||[]),[D,$]=E.useState(()=>C());E.useEffect(()=>{"selectedKeys"in m&&R(m.selectedKeys)},[m.selectedKeys]),E.useEffect(()=>{"expandedKeys"in m&&$(m.expandedKeys)},[m.expandedKeys]);const H=(xe,Se)=>{var oe;return"expandedKeys"in m||$(xe),(oe=m.onExpand)===null||oe===void 0?void 0:oe.call(m,xe,Se)},Z=(xe,Se)=>{var oe;const{multiple:Re,fieldNames:Ve}=m,{node:Oe,nativeEvent:_e}=Se,{key:Fe=""}=Oe,Le=g7(m),Me=Object.assign(Object.assign({},Se),{selected:!0}),Ce=_e?.ctrlKey||_e?.metaKey,Ye=_e?.shiftKey;let qe;Re&&Ce?(qe=xe,v.current=Fe,d.current=qe,Me.selectedNodes=oA(Le,qe,Ve)):Re&&Ye?(qe=Array.from(new Set([].concat(Pr(d.current||[]),Pr(eEe({treeData:Le,expandedKeys:D,startKey:Fe,endKey:v.current,fieldNames:Ve}))))),Me.selectedNodes=oA(Le,qe,Ve)):(qe=[Fe],v.current=Fe,d.current=qe,Me.selectedNodes=oA(Le,qe,Ve)),(oe=m.onSelect)===null||oe===void 0||oe.call(m,qe,Me),"selectedKeys"in m||R(qe)},{getPrefixCls:X,direction:Q}=E.useContext(hi),{prefixCls:G,className:K,showIcon:Y=!0,expandAction:re="click"}=m,fe=m7(m,["prefixCls","className","showIcon","expandAction"]),me=X("tree",G),pe=Gt(`${me}-directory`,{[`${me}-directory-rtl`]:Q==="rtl"},K);return E.createElement(_K,Object.assign({icon:tEe,ref:n,blockNode:!0},fe,{showIcon:Y,expandAction:re,prefixCls:me,className:pe,expandedKeys:D,selectedKeys:S,onSelect:Z,onExpand:H}))},nEe=E.forwardRef(rEe),iEe=nEe,Gz=_K;Gz.DirectoryTree=iEe;Gz.TreeNode=s0;const oEe=Gz;function y7(t){let{value:n,onChange:o,filterSearch:s,tablePrefixCls:c,locale:m}=t;return s?E.createElement("div",{className:`${c}-filter-dropdown-search`},E.createElement(_xe,{prefix:E.createElement(pz,null),placeholder:m.filterSearchPlaceholder,onChange:o,value:n,htmlSize:1,className:`${c}-filter-dropdown-search-input`})):null}const aEe=t=>{const{keyCode:n}=t;n===Or.ENTER&&t.stopPropagation()},sEe=E.forwardRef((t,n)=>E.createElement("div",{className:t.className,onClick:o=>o.stopPropagation(),onKeyDown:aEe,ref:n},t.children)),lEe=sEe;function V_(t){let n=[];return(t||[]).forEach(o=>{let{value:s,children:c}=o;n.push(s),c&&(n=[].concat(Pr(n),Pr(V_(c))))}),n}function cEe(t){return t.some(n=>{let{children:o}=n;return o})}function xK(t,n){return typeof n=="string"||typeof n=="number"?n?.toString().toLowerCase().includes(t.trim().toLowerCase()):!1}function bK(t){let{filters:n,prefixCls:o,filteredKeys:s,filterMultiple:c,searchValue:m,filterSearch:v}=t;return n.map((d,C)=>{const S=String(d.value);if(d.children)return{key:S||C,label:d.text,popupClassName:`${o}-dropdown-submenu`,children:bK({filters:d.children,prefixCls:o,filteredKeys:s,filterMultiple:c,searchValue:m,filterSearch:v})};const R=c?JT:cW,D={key:d.value!==void 0?S:C,label:E.createElement(E.Fragment,null,E.createElement(R,{checked:s.includes(S)}),E.createElement("span",null,d.text))};return m.trim()?typeof v=="function"?v(m,d)?D:null:xK(m,d.text)?D:null:D})}function aA(t){return t||[]}function uEe(t){var n,o;const{tablePrefixCls:s,prefixCls:c,column:m,dropdownPrefixCls:v,columnKey:d,filterMultiple:C,filterMode:S="menu",filterSearch:R=!1,filterState:D,triggerFilter:$,locale:H,children:Z,getPopupContainer:X,rootClassName:Q}=t,{filterDropdownOpen:G,onFilterDropdownOpenChange:K,filterResetToDefaultFilteredValue:Y,defaultFilteredValue:re,filterDropdownVisible:fe,onFilterDropdownVisibleChange:me}=m,[pe,xe]=E.useState(!1),Se=!!(D&&(!((n=D.filteredKeys)===null||n===void 0)&&n.length||D.forceFiltered)),oe=sr=>{xe(sr),K?.(sr),me?.(sr)},Re=(o=G??fe)!==null&&o!==void 0?o:pe,Ve=D?.filteredKeys,[Oe,_e]=iCe(aA(Ve)),Fe=sr=>{let{selectedKeys:vt}=sr;_e(vt)},Le=(sr,vt)=>{let{node:De,checked:ze}=vt;Fe(C?{selectedKeys:sr}:{selectedKeys:ze&&De.key?[De.key]:[]})};E.useEffect(()=>{pe&&Fe({selectedKeys:aA(Ve)})},[Ve]);const[Me,Ce]=E.useState([]),Ye=sr=>{Ce(sr)},[qe,rt]=E.useState(""),Qe=sr=>{const{value:vt}=sr.target;rt(vt)};E.useEffect(()=>{pe||rt("")},[pe]);const St=sr=>{const vt=sr&&sr.length?sr:null;if(vt===null&&(!D||!D.filteredKeys)||Vh(vt,D?.filteredKeys,!0))return null;$({column:m,key:d,filteredKeys:vt})},jt=()=>{oe(!1),St(Oe())},Ot=function(){let{confirm:sr,closeDropdown:vt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{confirm:!1,closeDropdown:!1};sr&&St([]),vt&&oe(!1),rt(""),_e(Y?(re||[]).map(De=>String(De)):[])},Tt=function(){let{closeDropdown:sr}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{closeDropdown:!0};sr&&oe(!1),St(Oe())},ct=(sr,vt)=>{vt.source==="trigger"&&(sr&&Ve!==void 0&&_e(aA(Ve)),oe(sr),!sr&&!m.filterDropdown&&jt())},Ct=Gt({[`${v}-menu-without-submenu`]:!cEe(m.filters||[])}),kt=sr=>{if(sr.target.checked){const vt=V_(m?.filters).map(De=>String(De));_e(vt)}else _e([])},zt=sr=>{let{filters:vt}=sr;return(vt||[]).map((De,ze)=>{const ve=String(De.value),pt={title:De.text,key:De.value!==void 0?ve:String(ze)};return De.children&&(pt.children=zt({filters:De.children})),pt})},Nt=sr=>{var vt;return Object.assign(Object.assign({},sr),{text:sr.title,value:sr.key,children:((vt=sr.children)===null||vt===void 0?void 0:vt.map(De=>Nt(De)))||[]})};let Rt;if(typeof m.filterDropdown=="function")Rt=m.filterDropdown({prefixCls:`${v}-custom`,setSelectedKeys:sr=>Fe({selectedKeys:sr}),selectedKeys:Oe(),confirm:Tt,clearFilters:Ot,filters:m.filters,visible:Re,close:()=>{oe(!1)}});else if(m.filterDropdown)Rt=m.filterDropdown;else{const sr=Oe()||[],vt=()=>(m.filters||[]).length===0?E.createElement(ty,{image:ty.PRESENTED_IMAGE_SIMPLE,description:H.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}}):S==="tree"?E.createElement(E.Fragment,null,E.createElement(y7,{filterSearch:R,value:qe,onChange:Qe,tablePrefixCls:s,locale:H}),E.createElement("div",{className:`${s}-filter-dropdown-tree`},C?E.createElement(JT,{checked:sr.length===V_(m.filters).length,indeterminate:sr.length>0&&sr.length<V_(m.filters).length,className:`${s}-filter-dropdown-checkall`,onChange:kt},H.filterCheckall):null,E.createElement(oEe,{checkable:!0,selectable:!1,blockNode:!0,multiple:C,checkStrictly:!C,className:`${v}-menu`,onCheck:Le,checkedKeys:sr,selectedKeys:sr,showIcon:!1,treeData:zt({filters:m.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:qe.trim()?ze=>typeof R=="function"?R(qe,Nt(ze)):xK(qe,ze.title):void 0}))):E.createElement(E.Fragment,null,E.createElement(y7,{filterSearch:R,value:qe,onChange:Qe,tablePrefixCls:s,locale:H}),E.createElement(Ez,{selectable:!0,multiple:C,prefixCls:`${v}-menu`,className:Ct,onSelect:Fe,onDeselect:Fe,selectedKeys:sr,getPopupContainer:X,openKeys:Me,onOpenChange:Ye,items:bK({filters:m.filters||[],filterSearch:R,prefixCls:c,filteredKeys:Oe(),filterMultiple:C,searchValue:qe})})),De=()=>Y?Vh((re||[]).map(ze=>String(ze)),sr,!0):sr.length===0;Rt=E.createElement(E.Fragment,null,vt(),E.createElement("div",{className:`${c}-dropdown-btns`},E.createElement($m,{type:"link",size:"small",disabled:De(),onClick:()=>Ot()},H.filterReset),E.createElement($m,{type:"primary",size:"small",onClick:jt},H.filterConfirm)))}m.filterDropdown&&(Rt=E.createElement(tW,{selectable:void 0},Rt));const Pt=()=>E.createElement(lEe,{className:`${c}-dropdown`},Rt);let Dt;typeof m.filterIcon=="function"?Dt=m.filterIcon(Se):m.filterIcon?Dt=m.filterIcon:Dt=E.createElement(nCe,null);const{direction:Ut}=E.useContext(hi);return E.createElement("div",{className:`${c}-column`},E.createElement("span",{className:`${s}-column-title`},Z),E.createElement(zz,{dropdownRender:Pt,trigger:["click"],open:Re,onOpenChange:ct,getPopupContainer:X,placement:Ut==="rtl"?"bottomLeft":"bottomRight",rootClassName:Q},E.createElement("span",{role:"button",tabIndex:-1,className:Gt(`${c}-trigger`,{active:Se}),onClick:sr=>{sr.stopPropagation()}},Dt)))}function tk(t,n,o){let s=[];return(t||[]).forEach((c,m)=>{var v;const d=Tw(m,o);if(c.filters||"filterDropdown"in c||"onFilter"in c)if("filteredValue"in c){let C=c.filteredValue;"filterDropdown"in c||(C=(v=C?.map(String))!==null&&v!==void 0?v:C),s.push({column:c,key:by(c,d),filteredKeys:C,forceFiltered:c.filtered})}else s.push({column:c,key:by(c,d),filteredKeys:n&&c.defaultFilteredValue?c.defaultFilteredValue:void 0,forceFiltered:c.filtered});"children"in c&&(s=[].concat(Pr(s),Pr(tk(c.children,n,d))))}),s}function wK(t,n,o,s,c,m,v,d,C){return o.map((S,R)=>{const D=Tw(R,d),{filterMultiple:$=!0,filterMode:H,filterSearch:Z}=S;let X=S;if(X.filters||X.filterDropdown){const Q=by(X,D),G=s.find(K=>{let{key:Y}=K;return Q===Y});X=Object.assign(Object.assign({},X),{title:K=>E.createElement(uEe,{tablePrefixCls:t,prefixCls:`${t}-filter`,dropdownPrefixCls:n,column:X,columnKey:Q,filterState:G,filterMultiple:$,filterMode:H,filterSearch:Z,triggerFilter:m,locale:c,getPopupContainer:v,rootClassName:C},bM(S.title,K))})}return"children"in X&&(X=Object.assign(Object.assign({},X),{children:wK(t,n,X.children,s,c,m,v,D,C)})),X})}function v7(t){const n={};return t.forEach(o=>{let{key:s,filteredKeys:c,column:m}=o;const v=s,{filters:d,filterDropdown:C}=m;if(C)n[v]=c||null;else if(Array.isArray(c)){const S=V_(d);n[v]=S.filter(R=>c.includes(String(R)))}else n[v]=null}),n}function _7(t,n){return n.reduce((o,s)=>{const{column:{onFilter:c,filters:m},filteredKeys:v}=s;return c&&v&&v.length?o.filter(d=>v.some(C=>{const S=V_(m),R=S.findIndex($=>String($)===String(C)),D=R!==-1?S[R]:C;return c(D,d)})):o},t)}const SK=t=>t.flatMap(n=>"children"in n?[n].concat(Pr(SK(n.children||[]))):[n]);function hEe(t){let{prefixCls:n,dropdownPrefixCls:o,mergedColumns:s,onFilterChange:c,getPopupContainer:m,locale:v,rootClassName:d}=t;Ty();const C=E.useMemo(()=>SK(s||[]),[s]),[S,R]=E.useState(()=>tk(C,!0)),D=E.useMemo(()=>{const X=tk(C,!1);if(X.length===0)return X;let Q=!0;if(X.forEach(G=>{let{filteredKeys:K}=G;K!==void 0&&(Q=!1)}),Q){const G=(C||[]).map((K,Y)=>by(K,Tw(Y)));return S.filter(K=>{let{key:Y}=K;return G.includes(Y)}).map(K=>{const Y=C[G.findIndex(re=>re===K.key)];return Object.assign(Object.assign({},K),{column:Object.assign(Object.assign({},K.column),Y),forceFiltered:Y.filtered})})}return X},[C,S]),$=E.useMemo(()=>v7(D),[D]),H=X=>{const Q=D.filter(G=>{let{key:K}=G;return K!==X.key});Q.push(X),R(Q),c(v7(Q),Q)};return[X=>wK(n,o,X,D,v,H,m,void 0,d),D,$]}function dEe(t,n,o){const s=E.useRef({});function c(m){if(!s.current||s.current.data!==t||s.current.childrenColumnName!==n||s.current.getRowKey!==o){let d=function(C){C.forEach((S,R)=>{const D=o(S,R);v.set(D,S),S&&typeof S=="object"&&n in S&&d(S[n]||[])})};const v=new Map;d(t),s.current={data:t,childrenColumnName:n,kvMap:v,getRowKey:o}}return s.current.kvMap.get(m)}return[c]}var fEe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const CK=10;function pEe(t,n){const o={current:t.current,pageSize:t.pageSize};return Object.keys(n&&typeof n=="object"?n:{}).forEach(c=>{const m=t[c];typeof m!="function"&&(o[c]=m)}),o}function mEe(t,n,o){const s=o&&typeof o=="object"?o:{},{total:c=0}=s,m=fEe(s,["total"]),[v,d]=E.useState(()=>({current:"defaultCurrent"in m?m.defaultCurrent:1,pageSize:"defaultPageSize"in m?m.defaultPageSize:CK})),C=Mbe(v,m,{total:c>0?c:t}),S=Math.ceil((c||t)/C.pageSize);C.current>S&&(C.current=S||1);const R=($,H)=>{d({current:$??1,pageSize:H||C.pageSize})},D=($,H)=>{var Z;o&&((Z=o.onChange)===null||Z===void 0||Z.call(o,$,H)),R($,H),n($,H||C?.pageSize)};return o===!1?[{},()=>{}]:[Object.assign(Object.assign({},C),{onChange:D}),R]}var gEe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"};const yEe=gEe;var vEe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:yEe}))};const _Ee=E.forwardRef(vEe);var xEe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"};const bEe=xEe;var wEe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:bEe}))};const SEe=E.forwardRef(wEe),tT="ascend",sA="descend";function rI(t){return typeof t.sorter=="object"&&typeof t.sorter.multiple=="number"?t.sorter.multiple:!1}function x7(t){return typeof t=="function"?t:t&&typeof t=="object"&&t.compare?t.compare:!1}function CEe(t,n){return n?t[t.indexOf(n)+1]:t[0]}function rk(t,n,o){let s=[];function c(m,v){s.push({column:m,key:by(m,v),multiplePriority:rI(m),sortOrder:m.sortOrder})}return(t||[]).forEach((m,v)=>{const d=Tw(v,o);m.children?("sortOrder"in m&&c(m,d),s=[].concat(Pr(s),Pr(rk(m.children,n,d)))):m.sorter&&("sortOrder"in m?c(m,d):n&&m.defaultSortOrder&&s.push({column:m,key:by(m,d),multiplePriority:rI(m),sortOrder:m.defaultSortOrder}))}),s}function EK(t,n,o,s,c,m,v,d){return(n||[]).map((C,S)=>{const R=Tw(S,d);let D=C;if(D.sorter){const $=D.sortDirections||c,H=D.showSorterTooltip===void 0?v:D.showSorterTooltip,Z=by(D,R),X=o.find(xe=>{let{key:Se}=xe;return Se===Z}),Q=X?X.sortOrder:null,G=CEe($,Q);let K;if(C.sortIcon)K=C.sortIcon({sortOrder:Q});else{const xe=$.includes(tT)&&E.createElement(SEe,{className:Gt(`${t}-column-sorter-up`,{active:Q===tT})}),Se=$.includes(sA)&&E.createElement(_Ee,{className:Gt(`${t}-column-sorter-down`,{active:Q===sA})});K=E.createElement("span",{className:Gt(`${t}-column-sorter`,{[`${t}-column-sorter-full`]:!!(xe&&Se)})},E.createElement("span",{className:`${t}-column-sorter-inner`,"aria-hidden":"true"},xe,Se))}const{cancelSort:Y,triggerAsc:re,triggerDesc:fe}=m||{};let me=Y;G===sA?me=fe:G===tT&&(me=re);const pe=typeof H=="object"?Object.assign({title:me},H):{title:me};D=Object.assign(Object.assign({},D),{className:Gt(D.className,{[`${t}-column-sort`]:Q}),title:xe=>{const Se=E.createElement("div",{className:`${t}-column-sorters`},E.createElement("span",{className:`${t}-column-title`},bM(C.title,xe)),K);return H?E.createElement(uM,Object.assign({},pe),Se):Se},onHeaderCell:xe=>{const Se=C.onHeaderCell&&C.onHeaderCell(xe)||{},oe=Se.onClick,Re=Se.onKeyDown;Se.onClick=_e=>{s({column:C,key:Z,sortOrder:G,multiplePriority:rI(C)}),oe?.(_e)},Se.onKeyDown=_e=>{_e.keyCode===Or.ENTER&&(s({column:C,key:Z,sortOrder:G,multiplePriority:rI(C)}),Re?.(_e))};const Ve=QSe(C.title,{}),Oe=Ve?.toString();return Q?Se["aria-sort"]=Q==="ascend"?"ascending":"descending":Se["aria-label"]=Oe||"",Se.className=Gt(Se.className,`${t}-column-has-sorters`),Se.tabIndex=0,C.ellipsis&&(Se.title=(Ve??"").toString()),Se}})}return"children"in D&&(D=Object.assign(Object.assign({},D),{children:EK(t,D.children,o,s,c,m,v,R)})),D})}function b7(t){const{column:n,sortOrder:o}=t;return{column:n,order:o,field:n.dataIndex,columnKey:n.key}}function w7(t){const n=t.filter(o=>{let{sortOrder:s}=o;return s}).map(b7);return n.length===0&&t.length?Object.assign(Object.assign({},b7(t[t.length-1])),{column:void 0}):n.length<=1?n[0]||{}:n}function nk(t,n,o){const s=n.slice().sort((v,d)=>d.multiplePriority-v.multiplePriority),c=t.slice(),m=s.filter(v=>{let{column:{sorter:d},sortOrder:C}=v;return x7(d)&&C});return m.length?c.sort((v,d)=>{for(let C=0;C<m.length;C+=1){const S=m[C],{column:{sorter:R},sortOrder:D}=S,$=x7(R);if($&&D){const H=$(v,d,D);if(H!==0)return D===tT?H:-H}}return 0}).map(v=>{const d=v[o];return d?Object.assign(Object.assign({},v),{[o]:nk(d,n,o)}):v}):c}function EEe(t){let{prefixCls:n,mergedColumns:o,onSorterChange:s,sortDirections:c,tableLocale:m,showSorterTooltip:v}=t;const[d,C]=E.useState(rk(o,!0)),S=E.useMemo(()=>{let Z=!0;const X=rk(o,!1);if(!X.length)return d;const Q=[];function G(Y){Z?Q.push(Y):Q.push(Object.assign(Object.assign({},Y),{sortOrder:null}))}let K=null;return X.forEach(Y=>{K===null?(G(Y),Y.sortOrder&&(Y.multiplePriority===!1?Z=!1:K=!0)):(K&&Y.multiplePriority!==!1||(Z=!1),G(Y))}),Q},[o,d]),R=E.useMemo(()=>{const Z=S.map(X=>{let{column:Q,sortOrder:G}=X;return{column:Q,order:G}});return{sortColumns:Z,sortColumn:Z[0]&&Z[0].column,sortOrder:Z[0]&&Z[0].order}},[S]);function D(Z){let X;Z.multiplePriority===!1||!S.length||S[0].multiplePriority===!1?X=[Z]:X=[].concat(Pr(S.filter(Q=>{let{key:G}=Q;return G!==Z.key})),[Z]),C(X),s(w7(X),X)}return[Z=>EK(n,Z,S,D,c,m,v),S,R,()=>w7(S)]}function TK(t,n){return t.map(o=>{const s=Object.assign({},o);return s.title=bM(o.title,n),"children"in s&&(s.children=TK(s.children,n)),s})}function TEe(t){return[E.useCallback(o=>TK(o,t),[t])]}const IEe=cK((t,n)=>{const{_renderTimes:o}=t,{_renderTimes:s}=n;return o!==s}),MEe=dK((t,n)=>{const{_renderTimes:o}=t,{_renderTimes:s}=n;return o!==s}),PEe=t=>{const{componentCls:n,lineWidth:o,lineType:s,tableBorderColor:c,tableHeaderBg:m,tablePaddingVertical:v,tablePaddingHorizontal:d,calc:C}=t,S=`${Xt(o)} ${s} ${c}`,R=(D,$,H)=>({[`&${n}-${D}`]:{[`> ${n}-container`]:{[`> ${n}-content, > ${n}-body`]:{"\n            > table > tbody > tr > th,\n            > table > tbody > tr > td\n          ":{[`> ${n}-expanded-row-fixed`]:{margin:`${Xt(C($).mul(-1).equal())}
              ${Xt(C(C(H).add(o)).mul(-1).equal())}`}}}}}});return{[`${n}-wrapper`]:{[`${n}${n}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${n}-title`]:{border:S,borderBottom:0},[`> ${n}-container`]:{borderInlineStart:S,borderTop:S,[`
            > ${n}-content,
            > ${n}-header,
            > ${n}-body,
            > ${n}-summary
          `]:{"> table":{"\n                > thead > tr > th,\n                > thead > tr > td,\n                > tbody > tr > th,\n                > tbody > tr > td,\n                > tfoot > tr > th,\n                > tfoot > tr > td\n              ":{borderInlineEnd:S},"> thead":{"> tr:not(:last-child) > th":{borderBottom:S},"> tr > th::before":{backgroundColor:"transparent !important"}},"\n                > thead > tr,\n                > tbody > tr,\n                > tfoot > tr\n              ":{[`> ${n}-cell-fix-right-first::after`]:{borderInlineEnd:S}},"\n                > tbody > tr > th,\n                > tbody > tr > td\n              ":{[`> ${n}-expanded-row-fixed`]:{margin:`${Xt(C(v).mul(-1).equal())} ${Xt(C(C(d).add(o)).mul(-1).equal())}`,"&::after":{position:"absolute",top:0,insetInlineEnd:o,bottom:0,borderInlineEnd:S,content:'""'}}}}}},[`&${n}-scroll-horizontal`]:{[`> ${n}-container > ${n}-body`]:{"> table > tbody":{[`
                > tr${n}-expanded-row,
                > tr${n}-placeholder
              `]:{"> th, > td":{borderInlineEnd:0}}}}}},R("middle",t.tablePaddingVerticalMiddle,t.tablePaddingHorizontalMiddle)),R("small",t.tablePaddingVerticalSmall,t.tablePaddingHorizontalSmall)),{[`> ${n}-footer`]:{border:S,borderTop:0}}),[`${n}-cell`]:{[`${n}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${Xt(o)} 0 ${Xt(o)} ${m}`}},[`${n}-bordered ${n}-cell-scrollbar`]:{borderInlineEnd:S}}}},AEe=t=>{const{componentCls:n}=t;return{[`${n}-wrapper`]:{[`${n}-cell-ellipsis`]:Object.assign(Object.assign({},Vb),{wordBreak:"keep-all",[`
          &${n}-cell-fix-left-last,
          &${n}-cell-fix-right-first
        `]:{overflow:"visible",[`${n}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${n}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}},REe=t=>{const{componentCls:n}=t;return{[`${n}-wrapper`]:{[`${n}-tbody > tr${n}-placeholder`]:{textAlign:"center",color:t.colorTextDisabled,"\n          &:hover > th,\n          &:hover > td,\n        ":{background:t.colorBgContainer}}}}},kEe=t=>{const{componentCls:n,antCls:o,motionDurationSlow:s,lineWidth:c,paddingXS:m,lineType:v,tableBorderColor:d,tableExpandIconBg:C,tableExpandColumnWidth:S,borderRadius:R,tablePaddingVertical:D,tablePaddingHorizontal:$,tableExpandedRowBg:H,paddingXXS:Z,expandIconMarginTop:X,expandIconSize:Q,expandIconHalfInner:G,expandIconScale:K,calc:Y}=t,re=`${Xt(c)} ${v} ${d}`,fe=Y(Z).sub(c).equal();return{[`${n}-wrapper`]:{[`${n}-expand-icon-col`]:{width:S},[`${n}-row-expand-icon-cell`]:{textAlign:"center",[`${n}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${n}-row-indent`]:{height:1,float:"left"},[`${n}-row-expand-icon`]:Object.assign(Object.assign({},fhe(t)),{position:"relative",float:"left",boxSizing:"border-box",width:Q,height:Q,padding:0,color:"inherit",lineHeight:Xt(Q),background:C,border:re,borderRadius:R,transform:`scale(${K})`,transition:`all ${s}`,userSelect:"none","&:focus, &:hover, &:active":{borderColor:"currentcolor"},"&::before, &::after":{position:"absolute",background:"currentcolor",transition:`transform ${s} ease-out`,content:'""'},"&::before":{top:G,insetInlineEnd:fe,insetInlineStart:fe,height:c},"&::after":{top:fe,bottom:fe,insetInlineStart:G,width:c,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${n}-row-indent + ${n}-row-expand-icon`]:{marginTop:X,marginInlineEnd:m},[`tr${n}-expanded-row`]:{"&, &:hover":{"> th, > td":{background:H}},[`${o}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"auto"}}},[`${n}-expanded-row-fixed`]:{position:"relative",margin:`${Xt(Y(D).mul(-1).equal())} ${Xt(Y($).mul(-1).equal())}`,padding:`${Xt(D)} ${Xt($)}`}}}},OEe=t=>{const{componentCls:n,antCls:o,iconCls:s,tableFilterDropdownWidth:c,tableFilterDropdownSearchWidth:m,paddingXXS:v,paddingXS:d,colorText:C,lineWidth:S,lineType:R,tableBorderColor:D,headerIconColor:$,fontSizeSM:H,tablePaddingHorizontal:Z,borderRadius:X,motionDurationSlow:Q,colorTextDescription:G,colorPrimary:K,tableHeaderFilterActiveBg:Y,colorTextDisabled:re,tableFilterDropdownBg:fe,tableFilterDropdownHeight:me,controlItemBgHover:pe,controlItemBgActive:xe,boxShadowSecondary:Se,filterDropdownMenuBg:oe,calc:Re}=t,Ve=`${o}-dropdown`,Oe=`${n}-filter-dropdown`,_e=`${o}-tree`,Fe=`${Xt(S)} ${R} ${D}`;return[{[`${n}-wrapper`]:{[`${n}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${n}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:Re(v).mul(-1).equal(),marginInline:`${Xt(v)} ${Xt(Re(Z).div(2).mul(-1).equal())}`,padding:`0 ${Xt(v)}`,color:$,fontSize:H,borderRadius:X,cursor:"pointer",transition:`all ${Q}`,"&:hover":{color:G,background:Y},"&.active":{color:K}}}},{[`${o}-dropdown`]:{[Oe]:Object.assign(Object.assign({},Oa(t)),{minWidth:c,backgroundColor:fe,borderRadius:X,boxShadow:Se,overflow:"hidden",[`${Ve}-menu`]:{maxHeight:me,overflowX:"hidden",border:0,boxShadow:"none",borderRadius:"unset",backgroundColor:oe,"&:empty::after":{display:"block",padding:`${Xt(d)} 0`,color:re,fontSize:H,textAlign:"center",content:'"Not Found"'}},[`${Oe}-tree`]:{paddingBlock:`${Xt(d)} 0`,paddingInline:d,[_e]:{padding:0},[`${_e}-treenode ${_e}-node-content-wrapper:hover`]:{backgroundColor:pe},[`${_e}-treenode-checkbox-checked ${_e}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:xe}}},[`${Oe}-search`]:{padding:d,borderBottom:Fe,"&-input":{input:{minWidth:m},[s]:{color:re}}},[`${Oe}-checkall`]:{width:"100%",marginBottom:v,marginInlineStart:v},[`${Oe}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${Xt(Re(d).sub(S).equal())} ${Xt(d)}`,overflow:"hidden",borderTop:Fe}})}},{[`${o}-dropdown ${Oe}, ${Oe}-submenu`]:{[`${o}-checkbox-wrapper + span`]:{paddingInlineStart:d,color:C},"> ul":{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]},zEe=t=>{const{componentCls:n,lineWidth:o,colorSplit:s,motionDurationSlow:c,zIndexTableFixed:m,tableBg:v,zIndexTableSticky:d,calc:C}=t,S=s;return{[`${n}-wrapper`]:{[`
        ${n}-cell-fix-left,
        ${n}-cell-fix-right
      `]:{position:"sticky !important",zIndex:m,background:v},[`
        ${n}-cell-fix-left-first::after,
        ${n}-cell-fix-left-last::after
      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:C(o).mul(-1).equal(),width:30,transform:"translateX(100%)",transition:`box-shadow ${c}`,content:'""',pointerEvents:"none"},[`${n}-cell-fix-left-all::after`]:{display:"none"},[`
        ${n}-cell-fix-right-first::after,
        ${n}-cell-fix-right-last::after
      `]:{position:"absolute",top:0,bottom:C(o).mul(-1).equal(),left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${c}`,content:'""',pointerEvents:"none"},[`${n}-container`]:{position:"relative","&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:C(d).add(1).equal({unit:!1}),width:30,transition:`box-shadow ${c}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${n}-ping-left`]:{[`&:not(${n}-has-fix-left) ${n}-container::before`]:{boxShadow:`inset 10px 0 8px -8px ${S}`},[`
          ${n}-cell-fix-left-first::after,
          ${n}-cell-fix-left-last::after
        `]:{boxShadow:`inset 10px 0 8px -8px ${S}`},[`${n}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${n}-ping-right`]:{[`&:not(${n}-has-fix-right) ${n}-container::after`]:{boxShadow:`inset -10px 0 8px -8px ${S}`},[`
          ${n}-cell-fix-right-first::after,
          ${n}-cell-fix-right-last::after
        `]:{boxShadow:`inset -10px 0 8px -8px ${S}`}}}}},DEe=t=>{const{componentCls:n,antCls:o,margin:s}=t;return{[`${n}-wrapper`]:{[`${n}-pagination${o}-pagination`]:{margin:`${Xt(s)} 0`},[`${n}-pagination`]:{display:"flex",flexWrap:"wrap",rowGap:t.paddingXS,"> *":{flex:"none"},"&-left":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-right":{justifyContent:"flex-end"}}}}},LEe=t=>{const{componentCls:n,tableRadius:o}=t;return{[`${n}-wrapper`]:{[n]:{[`${n}-title, ${n}-header`]:{borderRadius:`${Xt(o)} ${Xt(o)} 0 0`},[`${n}-title + ${n}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,[`${n}-header, table`]:{borderRadius:0},"table > thead > tr:first-child":{"th:first-child, th:last-child, td:first-child, td:last-child":{borderRadius:0}}},"&-container":{borderStartStartRadius:o,borderStartEndRadius:o,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:o},"> *:last-child":{borderStartEndRadius:o}}},"&-footer":{borderRadius:`0 0 ${Xt(o)} ${Xt(o)}`}}}}},$Ee=t=>{const{componentCls:n}=t;return{[`${n}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${n}-pagination-left`]:{justifyContent:"flex-end"},[`${n}-pagination-right`]:{justifyContent:"flex-start"},[`${n}-row-expand-icon`]:{float:"right","&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${n}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"},[`${n}-row-indent`]:{float:"right"}}}}},BEe=t=>{const{componentCls:n,antCls:o,iconCls:s,fontSizeIcon:c,padding:m,paddingXS:v,headerIconColor:d,headerIconHoverColor:C,tableSelectionColumnWidth:S,tableSelectedRowBg:R,tableSelectedRowHoverBg:D,tableRowHoverBg:$,tablePaddingHorizontal:H,calc:Z}=t;return{[`${n}-wrapper`]:{[`${n}-selection-col`]:{width:S,[`&${n}-selection-col-with-dropdown`]:{width:Z(S).add(c).add(Z(m).div(4)).equal()}},[`${n}-bordered ${n}-selection-col`]:{width:Z(S).add(Z(v).mul(2)).equal(),[`&${n}-selection-col-with-dropdown`]:{width:Z(S).add(c).add(Z(m).div(4)).add(Z(v).mul(2)).equal()}},[`
        table tr th${n}-selection-column,
        table tr td${n}-selection-column,
        ${n}-selection-column
      `]:{paddingInlineEnd:t.paddingXS,paddingInlineStart:t.paddingXS,textAlign:"center",[`${o}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${n}-selection-column${n}-cell-fix-left`]:{zIndex:t.zIndexTableFixed+1},[`table tr th${n}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${n}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${n}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:Xt(Z(H).div(4).equal()),[s]:{color:d,fontSize:c,verticalAlign:"baseline","&:hover":{color:C}}},[`${n}-tbody`]:{[`${n}-row`]:{[`&${n}-row-selected`]:{[`> ${n}-cell`]:{background:R,"&-row-hover":{background:D}}},[`> ${n}-cell-row-hover`]:{background:$}}}}}},FEe=t=>{const{componentCls:n,tableExpandColumnWidth:o,calc:s}=t,c=(m,v,d,C)=>({[`${n}${n}-${m}`]:{fontSize:C,[`
        ${n}-title,
        ${n}-footer,
        ${n}-cell,
        ${n}-thead > tr > th,
        ${n}-tbody > tr > th,
        ${n}-tbody > tr > td,
        tfoot > tr > th,
        tfoot > tr > td
      `]:{padding:`${Xt(v)} ${Xt(d)}`},[`${n}-filter-trigger`]:{marginInlineEnd:Xt(s(d).div(2).mul(-1).equal())},[`${n}-expanded-row-fixed`]:{margin:`${Xt(s(v).mul(-1).equal())} ${Xt(s(d).mul(-1).equal())}`},[`${n}-tbody`]:{[`${n}-wrapper:only-child ${n}`]:{marginBlock:Xt(s(v).mul(-1).equal()),marginInline:`${Xt(s(o).sub(d).equal())} ${Xt(s(d).mul(-1).equal())}`}},[`${n}-selection-extra`]:{paddingInlineStart:Xt(s(d).div(4).equal())}}});return{[`${n}-wrapper`]:Object.assign(Object.assign({},c("middle",t.tablePaddingVerticalMiddle,t.tablePaddingHorizontalMiddle,t.tableFontSizeMiddle)),c("small",t.tablePaddingVerticalSmall,t.tablePaddingHorizontalSmall,t.tableFontSizeSmall))}},NEe=t=>{const{componentCls:n,marginXXS:o,fontSizeIcon:s,headerIconColor:c,headerIconHoverColor:m}=t;return{[`${n}-wrapper`]:{[`${n}-thead th${n}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"&:hover":{background:t.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:t.colorPrimary},[`
          &${n}-cell-fix-left:hover,
          &${n}-cell-fix-right:hover
        `]:{background:t.tableFixedHeaderSortActiveBg}},[`${n}-thead th${n}-column-sort`]:{background:t.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${n}-column-sort`]:{background:t.tableBodySortBg},[`${n}-column-title`]:{position:"relative",zIndex:1,flex:1},[`${n}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${n}-column-sorter`]:{marginInlineStart:o,color:c,fontSize:0,transition:`color ${t.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:s,"&.active":{color:t.colorPrimary}},[`${n}-column-sorter-up + ${n}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${n}-column-sorters:hover ${n}-column-sorter`]:{color:m}}}},jEe=t=>{const{componentCls:n,opacityLoading:o,tableScrollThumbBg:s,tableScrollThumbBgHover:c,tableScrollThumbSize:m,tableScrollBg:v,zIndexTableSticky:d,stickyScrollBarBorderRadius:C,lineWidth:S,lineType:R,tableBorderColor:D}=t,$=`${Xt(S)} ${R} ${D}`;return{[`${n}-wrapper`]:{[`${n}-sticky`]:{"&-holder":{position:"sticky",zIndex:d,background:t.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${Xt(m)} !important`,zIndex:d,display:"flex",alignItems:"center",background:v,borderTop:$,opacity:o,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:m,backgroundColor:s,borderRadius:C,transition:`all ${t.motionDurationSlow}, transform none`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:c}}}}}}},S7=t=>{const{componentCls:n,lineWidth:o,tableBorderColor:s,calc:c}=t,m=`${Xt(o)} ${t.lineType} ${s}`;return{[`${n}-wrapper`]:{[`${n}-summary`]:{position:"relative",zIndex:t.zIndexTableFixed,background:t.tableBg,"> tr":{"> th, > td":{borderBottom:m}}},[`div${n}-summary`]:{boxShadow:`0 ${Xt(c(o).mul(-1).equal())} 0 ${s}`}}}},VEe=t=>{const{componentCls:n,motionDurationMid:o,lineWidth:s,lineType:c,tableBorderColor:m,calc:v}=t,d=`${Xt(s)} ${c} ${m}`,C=`${n}-expanded-row-cell`;return{[`${n}-wrapper`]:{[`${n}-tbody-virtual`]:{[`${n}-row`]:{display:"flex",boxSizing:"border-box",width:"100%"},[`${n}-cell`]:{borderBottom:d,transition:`background ${o}`},[`${n}-expanded-row`]:{[`${C}${C}-fixed`]:{position:"sticky",insetInlineStart:0,overflow:"hidden",width:`calc(var(--virtual-width) - ${Xt(s)})`,borderInlineEnd:"none"}}},[`${n}-bordered`]:{[`${n}-tbody-virtual`]:{"&:after":{content:'""',insetInline:0,bottom:0,borderBottom:d,position:"absolute"},[`${n}-cell`]:{borderInlineEnd:d,[`&${n}-cell-fix-right-first:before`]:{content:'""',position:"absolute",insetBlock:0,insetInlineStart:v(s).mul(-1).equal(),borderInlineStart:d}}},[`&${n}-virtual`]:{[`${n}-placeholder ${n}-cell`]:{borderInlineEnd:d,borderBottom:d}}}}}},UEe=t=>{const{componentCls:n,fontWeightStrong:o,tablePaddingVertical:s,tablePaddingHorizontal:c,tableExpandColumnWidth:m,lineWidth:v,lineType:d,tableBorderColor:C,tableFontSize:S,tableBg:R,tableRadius:D,tableHeaderTextColor:$,motionDurationMid:H,tableHeaderBg:Z,tableHeaderCellSplitColor:X,tableFooterTextColor:Q,tableFooterBg:G,calc:K}=t,Y=`${Xt(v)} ${d} ${C}`;return{[`${n}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%"},Ub()),{[n]:Object.assign(Object.assign({},Oa(t)),{fontSize:S,background:R,borderRadius:`${Xt(D)} ${Xt(D)} 0 0`}),table:{width:"100%",textAlign:"start",borderRadius:`${Xt(D)} ${Xt(D)} 0 0`,borderCollapse:"separate",borderSpacing:0},[`
          ${n}-cell,
          ${n}-thead > tr > th,
          ${n}-tbody > tr > th,
          ${n}-tbody > tr > td,
          tfoot > tr > th,
          tfoot > tr > td
        `]:{position:"relative",padding:`${Xt(s)} ${Xt(c)}`,overflowWrap:"break-word"},[`${n}-title`]:{padding:`${Xt(s)} ${Xt(c)}`},[`${n}-thead`]:{"\n          > tr > th,\n          > tr > td\n        ":{position:"relative",color:$,fontWeight:o,textAlign:"start",background:Z,borderBottom:Y,transition:`background ${H} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${n}-selection-column):not(${n}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:X,transform:"translateY(-50%)",transition:`background-color ${H}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${n}-tbody`]:{"> tr":{"> th, > td":{transition:`background ${H}, border-color ${H}`,borderBottom:Y,[`
              > ${n}-wrapper:only-child,
              > ${n}-expanded-row-fixed > ${n}-wrapper:only-child
            `]:{[n]:{marginBlock:Xt(K(s).mul(-1).equal()),marginInline:`${Xt(K(m).sub(c).equal())}
                ${Xt(K(c).mul(-1).equal())}`,[`${n}-tbody > tr:last-child > td`]:{borderBottom:0,"&:first-child, &:last-child":{borderRadius:0}}}}},"> th":{position:"relative",color:$,fontWeight:o,textAlign:"start",background:Z,borderBottom:Y,transition:`background ${H} ease`}}},[`${n}-footer`]:{padding:`${Xt(s)} ${Xt(c)}`,color:Q,background:G}})}},HEe=t=>{const{colorFillAlter:n,colorBgContainer:o,colorTextHeading:s,colorFillSecondary:c,colorFillContent:m,controlItemBgActive:v,controlItemBgActiveHover:d,padding:C,paddingSM:S,paddingXS:R,colorBorderSecondary:D,borderRadiusLG:$,controlHeight:H,colorTextPlaceholder:Z,fontSize:X,fontSizeSM:Q,lineHeight:G,lineWidth:K,colorIcon:Y,colorIconHover:re,opacityLoading:fe,controlInteractiveSize:me}=t,pe=new xa(c).onBackground(o).toHexShortString(),xe=new xa(m).onBackground(o).toHexShortString(),Se=new xa(n).onBackground(o).toHexShortString(),oe=new xa(Y),Re=new xa(re),Ve=me/2-K,Oe=Ve*2+K*3;return{headerBg:Se,headerColor:s,headerSortActiveBg:pe,headerSortHoverBg:xe,bodySortBg:Se,rowHoverBg:Se,rowSelectedBg:v,rowSelectedHoverBg:d,rowExpandedBg:n,cellPaddingBlock:C,cellPaddingInline:C,cellPaddingBlockMD:S,cellPaddingInlineMD:R,cellPaddingBlockSM:R,cellPaddingInlineSM:R,borderColor:D,headerBorderRadius:$,footerBg:Se,footerColor:s,cellFontSize:X,cellFontSizeMD:X,cellFontSizeSM:X,headerSplitColor:D,fixedHeaderSortActiveBg:pe,headerFilterHoverBg:m,filterDropdownMenuBg:o,filterDropdownBg:o,expandIconBg:o,selectionColumnWidth:H,stickyScrollBarBg:Z,stickyScrollBarBorderRadius:100,expandIconMarginTop:(X*G-K*3)/2-Math.ceil((Q*1.4-K*3)/2),headerIconColor:oe.clone().setAlpha(oe.getAlpha()*fe).toRgbString(),headerIconHoverColor:Re.clone().setAlpha(Re.getAlpha()*fe).toRgbString(),expandIconHalfInner:Ve,expandIconSize:Oe,expandIconScale:me/Oe}},GEe=os("Table",t=>{const{colorTextHeading:n,colorSplit:o,colorBgContainer:s,controlInteractiveSize:c,headerBg:m,headerColor:v,headerSortActiveBg:d,headerSortHoverBg:C,bodySortBg:S,rowHoverBg:R,rowSelectedBg:D,rowSelectedHoverBg:$,rowExpandedBg:H,cellPaddingBlock:Z,cellPaddingInline:X,cellPaddingBlockMD:Q,cellPaddingInlineMD:G,cellPaddingBlockSM:K,cellPaddingInlineSM:Y,borderColor:re,footerBg:fe,footerColor:me,headerBorderRadius:pe,cellFontSize:xe,cellFontSizeMD:Se,cellFontSizeSM:oe,headerSplitColor:Re,fixedHeaderSortActiveBg:Ve,headerFilterHoverBg:Oe,filterDropdownBg:_e,expandIconBg:Fe,selectionColumnWidth:Le,stickyScrollBarBg:Me,calc:Ce}=t,Ye=2,qe=Yi(t,{tableFontSize:xe,tableBg:s,tableRadius:pe,tablePaddingVertical:Z,tablePaddingHorizontal:X,tablePaddingVerticalMiddle:Q,tablePaddingHorizontalMiddle:G,tablePaddingVerticalSmall:K,tablePaddingHorizontalSmall:Y,tableBorderColor:re,tableHeaderTextColor:v,tableHeaderBg:m,tableFooterTextColor:me,tableFooterBg:fe,tableHeaderCellSplitColor:Re,tableHeaderSortBg:d,tableHeaderSortHoverBg:C,tableBodySortBg:S,tableFixedHeaderSortActiveBg:Ve,tableHeaderFilterActiveBg:Oe,tableFilterDropdownBg:_e,tableRowHoverBg:R,tableSelectedRowBg:D,tableSelectedRowHoverBg:$,zIndexTableFixed:Ye,zIndexTableSticky:Ye+1,tableFontSizeMiddle:Se,tableFontSizeSmall:oe,tableSelectionColumnWidth:Le,tableExpandIconBg:Fe,tableExpandColumnWidth:Ce(c).add(Ce(t.padding).mul(2)).equal(),tableExpandedRowBg:H,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:Me,tableScrollThumbBgHover:n,tableScrollBg:o});return[UEe(qe),DEe(qe),S7(qe),NEe(qe),OEe(qe),PEe(qe),LEe(qe),kEe(qe),S7(qe),REe(qe),BEe(qe),zEe(qe),jEe(qe),AEe(qe),FEe(qe),$Ee(qe),VEe(qe)]},HEe,{unitless:{expandIconScale:!0}}),qEe=[],WEe=(t,n)=>{const{prefixCls:o,className:s,rootClassName:c,style:m,size:v,bordered:d,dropdownPrefixCls:C,dataSource:S,pagination:R,rowSelection:D,rowKey:$="key",rowClassName:H,columns:Z,children:X,childrenColumnName:Q,onChange:G,getPopupContainer:K,loading:Y,expandIcon:re,expandable:fe,expandedRowRender:me,expandIconColumnIndex:pe,indentSize:xe,scroll:Se,sortDirections:oe,locale:Re,showSorterTooltip:Ve=!0,virtual:Oe}=t;Ty();const _e=E.useMemo(()=>Z||Nz(X),[Z,X]),Fe=E.useMemo(()=>_e.some(dt=>dt.responsive),[_e]),Le=mz(Fe),Me=E.useMemo(()=>{const dt=new Set(Object.keys(Le).filter(ir=>Le[ir]));return _e.filter(ir=>!ir.responsive||ir.responsive.some(gr=>dt.has(gr)))},[_e,Le]),Ce=Zs(t,["className","style","columns"]),{locale:Ye=Uf,direction:qe,table:rt,renderEmpty:Qe,getPrefixCls:St,getPopupContainer:jt}=E.useContext(hi),Ot=Gh(v),Tt=Object.assign(Object.assign({},Ye.Table),Re),ct=S||qEe,Ct=St("table",o),kt=St("dropdown",C),[,zt]=Ws(),Nt=Pl(Ct),[Rt,Pt,Dt]=GEe(Ct,Nt),Ut=Object.assign({childrenColumnName:Q,expandIconColumnIndex:pe},fe),{childrenColumnName:sr="children"}=Ut,vt=E.useMemo(()=>ct.some(dt=>dt?.[sr])?"nest":me||fe&&fe.expandedRowRender?"row":null,[ct]),De={body:E.useRef()},ze=JSe(Ct),ve=E.useRef(null),pt=E.useRef(null);XSe(n,()=>Object.assign(Object.assign({},pt.current),{nativeElement:ve.current}));const gt=E.useMemo(()=>typeof $=="function"?$:dt=>dt?.[$],[$]),[$t]=dEe(ct,sr,gt),It={},Mt=function(dt,ir){let gr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var mr,Sr,Gr;const Rr=Object.assign(Object.assign({},It),dt);gr&&((mr=It.resetPagination)===null||mr===void 0||mr.call(It),!((Sr=Rr.pagination)===null||Sr===void 0)&&Sr.current&&(Rr.pagination.current=1),R&&R.onChange&&R.onChange(1,(Gr=Rr.pagination)===null||Gr===void 0?void 0:Gr.pageSize)),Se&&Se.scrollToFirstRowOnChange!==!1&&De.body.current&&Vde(0,{getContainer:()=>De.body.current}),G?.(Rr.pagination,Rr.filters,Rr.sorter,{currentDataSource:_7(nk(ct,Rr.sorterStates,sr),Rr.filterStates),action:ir})},Qt=(dt,ir)=>{Mt({sorter:dt,sorterStates:ir},"sort",!1)},[wr,br,tn,yr]=EEe({prefixCls:Ct,mergedColumns:Me,onSorterChange:Qt,sortDirections:oe||["ascend","descend"],tableLocale:Tt,showSorterTooltip:Ve}),dr=E.useMemo(()=>nk(ct,br,sr),[ct,br]);It.sorter=yr(),It.sorterStates=br;const Wt=(dt,ir)=>{Mt({filters:dt,filterStates:ir},"filter",!0)},[Wr,Fr,en]=hEe({prefixCls:Ct,locale:Tt,dropdownPrefixCls:kt,mergedColumns:Me,onFilterChange:Wt,getPopupContainer:K||jt,rootClassName:Gt(c,Nt)}),Yr=_7(dr,Fr);It.filters=en,It.filterStates=Fr;const fr=E.useMemo(()=>{const dt={};return Object.keys(en).forEach(ir=>{en[ir]!==null&&(dt[ir]=en[ir])}),Object.assign(Object.assign({},tn),{filters:dt})},[tn,en]),[Kr]=TEe(fr),Br=(dt,ir)=>{Mt({pagination:Object.assign(Object.assign({},It.pagination),{current:dt,pageSize:ir})},"paginate")},[an,ni]=mEe(Yr.length,Br,R);It.pagination=R===!1?{}:pEe(an,R),It.resetPagination=ni;const Nr=E.useMemo(()=>{if(R===!1||!an.pageSize)return Yr;const{current:dt=1,total:ir,pageSize:gr=CK}=an;return Yr.length<ir?Yr.length>gr?Yr.slice((dt-1)*gr,dt*gr):Yr:Yr.slice((dt-1)*gr,dt*gr)},[!!R,Yr,an&&an.current,an&&an.pageSize,an&&an.total]),[ii,Pe]=KSe({prefixCls:Ct,data:Yr,pageData:Nr,getRowKey:gt,getRecordByKey:$t,expandType:vt,childrenColumnName:sr,locale:Tt,getPopupContainer:K||jt},D),he=(dt,ir,gr)=>{let mr;return typeof H=="function"?mr=Gt(H(dt,ir,gr)):mr=Gt(H),Gt({[`${Ct}-row-selected`]:Pe.has(gt(dt,ir))},mr)};Ut.__PARENT_RENDER_ICON__=Ut.expandIcon,Ut.expandIcon=Ut.expandIcon||re||YSe(Tt),vt==="nest"&&Ut.expandIconColumnIndex===void 0?Ut.expandIconColumnIndex=D?1:0:Ut.expandIconColumnIndex>0&&D&&(Ut.expandIconColumnIndex-=1),typeof Ut.indentSize!="number"&&(Ut.indentSize=typeof xe=="number"?xe:15);const ge=E.useCallback(dt=>Kr(ii(Wr(wr(dt)))),[wr,Wr,ii]);let Te,$e;if(R!==!1&&an?.total){let dt;an.size?dt=an.size:dt=Ot==="small"||Ot==="middle"?"small":void 0;const ir=Sr=>E.createElement(Jbe,Object.assign({},an,{className:Gt(`${Ct}-pagination ${Ct}-pagination-${Sr}`,an.className),size:dt})),gr=qe==="rtl"?"left":"right",{position:mr}=an;if(mr!==null&&Array.isArray(mr)){const Sr=mr.find(Cr=>Cr.includes("top")),Gr=mr.find(Cr=>Cr.includes("bottom")),Rr=mr.every(Cr=>`${Cr}`=="none");!Sr&&!Gr&&!Rr&&($e=ir(gr)),Sr&&(Te=ir(Sr.toLowerCase().replace("top",""))),Gr&&($e=ir(Gr.toLowerCase().replace("bottom","")))}else $e=ir(gr)}let ke;typeof Y=="boolean"?ke={spinning:Y}:typeof Y=="object"&&(ke=Object.assign({spinning:!0},Y));const Ke=Gt(Dt,Nt,`${Ct}-wrapper`,rt?.className,{[`${Ct}-wrapper-rtl`]:qe==="rtl"},s,c,Pt),Ue=Object.assign(Object.assign({},rt?.style),m),Ne=Re&&Re.emptyText||Qe?.("Table")||E.createElement(wq,{componentName:"Table"}),et=Oe?MEe:IEe,Et={},Yt=E.useMemo(()=>{const{fontSize:dt,lineHeight:ir,padding:gr,paddingXS:mr,paddingSM:Sr}=zt,Gr=Math.floor(dt*ir);switch(Ot){case"large":return gr*2+Gr;case"small":return mr*2+Gr;default:return Sr*2+Gr}},[zt,Ot]);return Oe&&(Et.listItemHeight=Yt),Rt(E.createElement("div",{ref:ve,className:Ke,style:Ue},E.createElement(swe,Object.assign({spinning:!1},ke),Te,E.createElement(et,Object.assign({},Et,Ce,{ref:pt,columns:Me,direction:qe,expandable:Ut,prefixCls:Ct,className:Gt({[`${Ct}-middle`]:Ot==="middle",[`${Ct}-small`]:Ot==="small",[`${Ct}-bordered`]:d,[`${Ct}-empty`]:ct.length===0},Dt,Nt,Pt),data:Nr,rowKey:gt,rowClassName:he,emptyText:Ne,internalHooks:Ew,internalRefs:De,transformColumns:ge,getContainerWidth:ze})),$e)))},KEe=E.forwardRef(WEe),ZEe=(t,n)=>{const o=E.useRef(0);return o.current+=1,E.createElement(KEe,Object.assign({},t,{ref:n,_renderTimes:o.current}))},Xf=E.forwardRef(ZEe);Xf.SELECTION_COLUMN=lm;Xf.EXPAND_COLUMN=hm;Xf.SELECTION_ALL=YR;Xf.SELECTION_INVERT=JR;Xf.SELECTION_NONE=QR;Xf.Column=$Se;Xf.ColumnGroup=BSe;Xf.Summary=XW;const XEe=Xf,YEe=t=>{const{paddingXXS:n,lineWidth:o,tagPaddingHorizontal:s,componentCls:c,calc:m}=t,v=m(s).sub(o).equal(),d=m(n).sub(o).equal();return{[c]:Object.assign(Object.assign({},Oa(t)),{display:"inline-block",height:"auto",marginInlineEnd:t.marginXS,paddingInline:v,fontSize:t.tagFontSize,lineHeight:t.tagLineHeight,whiteSpace:"nowrap",background:t.defaultBg,border:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,opacity:1,transition:`all ${t.motionDurationMid}`,textAlign:"start",position:"relative",[`&${c}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:t.defaultColor},[`${c}-close-icon`]:{marginInlineStart:d,fontSize:t.tagIconSize,color:t.colorTextDescription,cursor:"pointer",transition:`all ${t.motionDurationMid}`,"&:hover":{color:t.colorTextHeading}},[`&${c}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${t.iconCls}-close, ${t.iconCls}-close:hover`]:{color:t.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${c}-checkable-checked):hover`]:{color:t.colorPrimary,backgroundColor:t.colorFillSecondary},"&:active, &-checked":{color:t.colorTextLightSolid},"&-checked":{backgroundColor:t.colorPrimary,"&:hover":{backgroundColor:t.colorPrimaryHover}},"&:active":{backgroundColor:t.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${t.iconCls} + span, > span + ${t.iconCls}`]:{marginInlineStart:v}}),[`${c}-borderless`]:{borderColor:"transparent",background:t.tagBorderlessBg}}},qz=t=>{const{lineWidth:n,fontSizeIcon:o,calc:s}=t,c=t.fontSizeSM;return Yi(t,{tagFontSize:c,tagLineHeight:Xt(s(t.lineHeightSM).mul(c).equal()),tagIconSize:s(o).sub(s(n).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:t.colorFillTertiary})},Wz=t=>({defaultBg:new xa(t.colorFillQuaternary).onBackground(t.colorBgContainer).toHexString(),defaultColor:t.colorText}),IK=os("Tag",t=>{const n=qz(t);return YEe(n)},Wz);var JEe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const QEe=E.forwardRef((t,n)=>{const{prefixCls:o,style:s,className:c,checked:m,onChange:v,onClick:d}=t,C=JEe(t,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:S,tag:R}=E.useContext(hi),D=G=>{v?.(!m),d?.(G)},$=S("tag",o),[H,Z,X]=IK($),Q=Gt($,`${$}-checkable`,{[`${$}-checkable-checked`]:m},R?.className,c,Z,X);return H(E.createElement("span",Object.assign({},C,{ref:n,style:Object.assign(Object.assign({},s),R?.style),className:Q,onClick:D})))}),eTe=QEe,tTe=t=>KH(t,(n,o)=>{let{textColor:s,lightBorderColor:c,lightColor:m,darkColor:v}=o;return{[`${t.componentCls}${t.componentCls}-${n}`]:{color:s,background:m,borderColor:c,"&-inverse":{color:t.colorTextLightSolid,background:v,borderColor:v},[`&${t.componentCls}-borderless`]:{borderColor:"transparent"}}}}),rTe=b0(["Tag","preset"],t=>{const n=qz(t);return tTe(n)},Wz);function nTe(t){return typeof t!="string"?t:t.charAt(0).toUpperCase()+t.slice(1)}const _E=(t,n,o)=>{const s=nTe(o);return{[`${t.componentCls}${t.componentCls}-${n}`]:{color:t[`color${o}`],background:t[`color${s}Bg`],borderColor:t[`color${s}Border`],[`&${t.componentCls}-borderless`]:{borderColor:"transparent"}}}},iTe=b0(["Tag","status"],t=>{const n=qz(t);return[_E(n,"success","Success"),_E(n,"processing","Info"),_E(n,"error","Error"),_E(n,"warning","Warning")]},Wz);var oTe=function(t,n){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(t);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(t,s[c])&&(o[s[c]]=t[s[c]]);return o};const aTe=(t,n)=>{const{prefixCls:o,className:s,rootClassName:c,style:m,children:v,icon:d,color:C,onClose:S,closeIcon:R,closable:D,bordered:$=!0}=t,H=oTe(t,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:Z,direction:X,tag:Q}=E.useContext(hi),[G,K]=E.useState(!0);E.useEffect(()=>{"visible"in H&&K(H.visible)},[H.visible]);const Y=kq(C),re=$ve(C),fe=Y||re,me=Object.assign(Object.assign({backgroundColor:C&&!fe?C:void 0},Q?.style),m),pe=Z("tag",o),[xe,Se,oe]=IK(pe),Re=Gt(pe,Q?.className,{[`${pe}-${C}`]:fe,[`${pe}-has-color`]:C&&!fe,[`${pe}-hidden`]:!G,[`${pe}-rtl`]:X==="rtl",[`${pe}-borderless`]:!$},s,c,Se,oe),Ve=Ce=>{Ce.stopPropagation(),S?.(Ce),!Ce.defaultPrevented&&K(!1)},[,Oe]=zG(D,R,Ce=>Ce===null?E.createElement(cw,{className:`${pe}-close-icon`,onClick:Ve}):E.createElement("span",{className:`${pe}-close-icon`,onClick:Ve},Ce),null,!1),_e=typeof H.onClick=="function"||v&&v.type==="a",Fe=d||null,Le=Fe?E.createElement(E.Fragment,null,Fe,v&&E.createElement("span",null,v)):v,Me=E.createElement("span",Object.assign({},H,{ref:n,className:Re,style:me}),Le,Oe,Y&&E.createElement(rTe,{key:"preset",prefixCls:pe}),re&&E.createElement(iTe,{key:"status",prefixCls:pe}));return xe(_e?E.createElement(tM,{component:"Tag"},Me):Me)},MK=E.forwardRef(aTe);MK.CheckableTag=eTe;const sTe=MK;var Kz={exports:{}},PK=function(n,o){return function(){for(var c=new Array(arguments.length),m=0;m<c.length;m++)c[m]=arguments[m];return n.apply(o,c)}},lTe=PK,qm=Object.prototype.toString;function Zz(t){return Array.isArray(t)}function ik(t){return typeof t>"u"}function cTe(t){return t!==null&&!ik(t)&&t.constructor!==null&&!ik(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function AK(t){return qm.call(t)==="[object ArrayBuffer]"}function uTe(t){return qm.call(t)==="[object FormData]"}function hTe(t){var n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&AK(t.buffer),n}function dTe(t){return typeof t=="string"}function fTe(t){return typeof t=="number"}function RK(t){return t!==null&&typeof t=="object"}function rT(t){if(qm.call(t)!=="[object Object]")return!1;var n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}function pTe(t){return qm.call(t)==="[object Date]"}function mTe(t){return qm.call(t)==="[object File]"}function gTe(t){return qm.call(t)==="[object Blob]"}function kK(t){return qm.call(t)==="[object Function]"}function yTe(t){return RK(t)&&kK(t.pipe)}function vTe(t){return qm.call(t)==="[object URLSearchParams]"}function _Te(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function xTe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Xz(t,n){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Zz(t))for(var o=0,s=t.length;o<s;o++)n.call(null,t[o],o,t);else for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&n.call(null,t[c],c,t)}function ok(){var t={};function n(c,m){rT(t[m])&&rT(c)?t[m]=ok(t[m],c):rT(c)?t[m]=ok({},c):Zz(c)?t[m]=c.slice():t[m]=c}for(var o=0,s=arguments.length;o<s;o++)Xz(arguments[o],n);return t}function bTe(t,n,o){return Xz(n,function(c,m){o&&typeof c=="function"?t[m]=lTe(c,o):t[m]=c}),t}function wTe(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Nc={isArray:Zz,isArrayBuffer:AK,isBuffer:cTe,isFormData:uTe,isArrayBufferView:hTe,isString:dTe,isNumber:fTe,isObject:RK,isPlainObject:rT,isUndefined:ik,isDate:pTe,isFile:mTe,isBlob:gTe,isFunction:kK,isStream:yTe,isURLSearchParams:vTe,isStandardBrowserEnv:xTe,forEach:Xz,merge:ok,extend:bTe,trim:_Te,stripBOM:wTe},c_=Nc;function C7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var OK=function(n,o,s){if(!o)return n;var c;if(s)c=s(o);else if(c_.isURLSearchParams(o))c=o.toString();else{var m=[];c_.forEach(o,function(C,S){C===null||typeof C>"u"||(c_.isArray(C)?S=S+"[]":C=[C],c_.forEach(C,function(D){c_.isDate(D)?D=D.toISOString():c_.isObject(D)&&(D=JSON.stringify(D)),m.push(C7(S)+"="+C7(D))}))}),c=m.join("&")}if(c){var v=n.indexOf("#");v!==-1&&(n=n.slice(0,v)),n+=(n.indexOf("?")===-1?"?":"&")+c}return n},STe=Nc;function wM(){this.handlers=[]}wM.prototype.use=function(n,o,s){return this.handlers.push({fulfilled:n,rejected:o,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};wM.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)};wM.prototype.forEach=function(n){STe.forEach(this.handlers,function(s){s!==null&&n(s)})};var CTe=wM,ETe=Nc,TTe=function(n,o){ETe.forEach(n,function(c,m){m!==o&&m.toUpperCase()===o.toUpperCase()&&(n[o]=c,delete n[m])})},zK=function(n,o,s,c,m){return n.config=o,s&&(n.code=s),n.request=c,n.response=m,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},n},DK={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lA,E7;function LK(){if(E7)return lA;E7=1;var t=zK;return lA=function(o,s,c,m,v){var d=new Error(o);return t(d,s,c,m,v)},lA}var cA,T7;function ITe(){if(T7)return cA;T7=1;var t=LK();return cA=function(o,s,c){var m=c.config.validateStatus;!c.status||!m||m(c.status)?o(c):s(t("Request failed with status code "+c.status,c.config,null,c.request,c))},cA}var uA,I7;function MTe(){if(I7)return uA;I7=1;var t=Nc;return uA=t.isStandardBrowserEnv()?function(){return{write:function(s,c,m,v,d,C){var S=[];S.push(s+"="+encodeURIComponent(c)),t.isNumber(m)&&S.push("expires="+new Date(m).toGMTString()),t.isString(v)&&S.push("path="+v),t.isString(d)&&S.push("domain="+d),C===!0&&S.push("secure"),document.cookie=S.join("; ")},read:function(s){var c=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),uA}var hA,M7;function PTe(){return M7||(M7=1,hA=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}),hA}var dA,P7;function ATe(){return P7||(P7=1,dA=function(n,o){return o?n.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):n}),dA}var fA,A7;function RTe(){if(A7)return fA;A7=1;var t=PTe(),n=ATe();return fA=function(s,c){return s&&!t(c)?n(s,c):c},fA}var pA,R7;function kTe(){if(R7)return pA;R7=1;var t=Nc,n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return pA=function(s){var c={},m,v,d;return s&&t.forEach(s.split(`
`),function(S){if(d=S.indexOf(":"),m=t.trim(S.substr(0,d)).toLowerCase(),v=t.trim(S.substr(d+1)),m){if(c[m]&&n.indexOf(m)>=0)return;m==="set-cookie"?c[m]=(c[m]?c[m]:[]).concat([v]):c[m]=c[m]?c[m]+", "+v:v}}),c},pA}var mA,k7;function OTe(){if(k7)return mA;k7=1;var t=Nc;return mA=t.isStandardBrowserEnv()?function(){var o=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),c;function m(v){var d=v;return o&&(s.setAttribute("href",d),d=s.href),s.setAttribute("href",d),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return c=m(window.location.href),function(d){var C=t.isString(d)?m(d):d;return C.protocol===c.protocol&&C.host===c.host}}():function(){return function(){return!0}}(),mA}var gA,O7;function SM(){if(O7)return gA;O7=1;function t(n){this.message=n}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,gA=t,gA}var yA,z7;function D7(){if(z7)return yA;z7=1;var t=Nc,n=ITe(),o=MTe(),s=OK,c=RTe(),m=kTe(),v=OTe(),d=LK(),C=DK,S=SM();return yA=function(D){return new Promise(function(H,Z){var X=D.data,Q=D.headers,G=D.responseType,K;function Y(){D.cancelToken&&D.cancelToken.unsubscribe(K),D.signal&&D.signal.removeEventListener("abort",K)}t.isFormData(X)&&delete Q["Content-Type"];var re=new XMLHttpRequest;if(D.auth){var fe=D.auth.username||"",me=D.auth.password?unescape(encodeURIComponent(D.auth.password)):"";Q.Authorization="Basic "+btoa(fe+":"+me)}var pe=c(D.baseURL,D.url);re.open(D.method.toUpperCase(),s(pe,D.params,D.paramsSerializer),!0),re.timeout=D.timeout;function xe(){if(re){var oe="getAllResponseHeaders"in re?m(re.getAllResponseHeaders()):null,Re=!G||G==="text"||G==="json"?re.responseText:re.response,Ve={data:Re,status:re.status,statusText:re.statusText,headers:oe,config:D,request:re};n(function(_e){H(_e),Y()},function(_e){Z(_e),Y()},Ve),re=null}}if("onloadend"in re?re.onloadend=xe:re.onreadystatechange=function(){!re||re.readyState!==4||re.status===0&&!(re.responseURL&&re.responseURL.indexOf("file:")===0)||setTimeout(xe)},re.onabort=function(){re&&(Z(d("Request aborted",D,"ECONNABORTED",re)),re=null)},re.onerror=function(){Z(d("Network Error",D,null,re)),re=null},re.ontimeout=function(){var Re=D.timeout?"timeout of "+D.timeout+"ms exceeded":"timeout exceeded",Ve=D.transitional||C;D.timeoutErrorMessage&&(Re=D.timeoutErrorMessage),Z(d(Re,D,Ve.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",re)),re=null},t.isStandardBrowserEnv()){var Se=(D.withCredentials||v(pe))&&D.xsrfCookieName?o.read(D.xsrfCookieName):void 0;Se&&(Q[D.xsrfHeaderName]=Se)}"setRequestHeader"in re&&t.forEach(Q,function(Re,Ve){typeof X>"u"&&Ve.toLowerCase()==="content-type"?delete Q[Ve]:re.setRequestHeader(Ve,Re)}),t.isUndefined(D.withCredentials)||(re.withCredentials=!!D.withCredentials),G&&G!=="json"&&(re.responseType=D.responseType),typeof D.onDownloadProgress=="function"&&re.addEventListener("progress",D.onDownloadProgress),typeof D.onUploadProgress=="function"&&re.upload&&re.upload.addEventListener("progress",D.onUploadProgress),(D.cancelToken||D.signal)&&(K=function(oe){re&&(Z(!oe||oe&&oe.type?new S("canceled"):oe),re.abort(),re=null)},D.cancelToken&&D.cancelToken.subscribe(K),D.signal&&(D.signal.aborted?K():D.signal.addEventListener("abort",K))),X||(X=null),re.send(X)})},yA}var Sl=Nc,L7=TTe,zTe=zK,DTe=DK,LTe={"Content-Type":"application/x-www-form-urlencoded"};function $7(t,n){!Sl.isUndefined(t)&&Sl.isUndefined(t["Content-Type"])&&(t["Content-Type"]=n)}function $Te(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=D7()),t}function BTe(t,n,o){if(Sl.isString(t))try{return(n||JSON.parse)(t),Sl.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(o||JSON.stringify)(t)}var CM={transitional:DTe,adapter:$Te(),transformRequest:[function(n,o){return L7(o,"Accept"),L7(o,"Content-Type"),Sl.isFormData(n)||Sl.isArrayBuffer(n)||Sl.isBuffer(n)||Sl.isStream(n)||Sl.isFile(n)||Sl.isBlob(n)?n:Sl.isArrayBufferView(n)?n.buffer:Sl.isURLSearchParams(n)?($7(o,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):Sl.isObject(n)||o&&o["Content-Type"]==="application/json"?($7(o,"application/json"),BTe(n)):n}],transformResponse:[function(n){var o=this.transitional||CM.transitional,s=o&&o.silentJSONParsing,c=o&&o.forcedJSONParsing,m=!s&&this.responseType==="json";if(m||c&&Sl.isString(n)&&n.length)try{return JSON.parse(n)}catch(v){if(m)throw v.name==="SyntaxError"?zTe(v,this,"E_JSON_PARSE"):v}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Sl.forEach(["delete","get","head"],function(n){CM.headers[n]={}});Sl.forEach(["post","put","patch"],function(n){CM.headers[n]=Sl.merge(LTe)});var Yz=CM,FTe=Nc,NTe=Yz,jTe=function(n,o,s){var c=this||NTe;return FTe.forEach(s,function(v){n=v.call(c,n,o)}),n},vA,B7;function $K(){return B7||(B7=1,vA=function(n){return!!(n&&n.__CANCEL__)}),vA}var F7=Nc,_A=jTe,VTe=$K(),UTe=Yz,HTe=SM();function xA(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new HTe("canceled")}var GTe=function(n){xA(n),n.headers=n.headers||{},n.data=_A.call(n,n.data,n.headers,n.transformRequest),n.headers=F7.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),F7.forEach(["delete","get","head","post","put","patch","common"],function(c){delete n.headers[c]});var o=n.adapter||UTe.adapter;return o(n).then(function(c){return xA(n),c.data=_A.call(n,c.data,c.headers,n.transformResponse),c},function(c){return VTe(c)||(xA(n),c&&c.response&&(c.response.data=_A.call(n,c.response.data,c.response.headers,n.transformResponse))),Promise.reject(c)})},uu=Nc,BK=function(n,o){o=o||{};var s={};function c(R,D){return uu.isPlainObject(R)&&uu.isPlainObject(D)?uu.merge(R,D):uu.isPlainObject(D)?uu.merge({},D):uu.isArray(D)?D.slice():D}function m(R){if(uu.isUndefined(o[R])){if(!uu.isUndefined(n[R]))return c(void 0,n[R])}else return c(n[R],o[R])}function v(R){if(!uu.isUndefined(o[R]))return c(void 0,o[R])}function d(R){if(uu.isUndefined(o[R])){if(!uu.isUndefined(n[R]))return c(void 0,n[R])}else return c(void 0,o[R])}function C(R){if(R in o)return c(n[R],o[R]);if(R in n)return c(void 0,n[R])}var S={url:v,method:v,data:v,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:C};return uu.forEach(Object.keys(n).concat(Object.keys(o)),function(D){var $=S[D]||m,H=$(D);uu.isUndefined(H)&&$!==C||(s[D]=H)}),s},bA,N7;function FK(){return N7||(N7=1,bA={version:"0.26.1"}),bA}var qTe=FK().version,Jz={};["object","boolean","number","function","string","symbol"].forEach(function(t,n){Jz[t]=function(s){return typeof s===t||"a"+(n<1?"n ":" ")+t}});var j7={};Jz.transitional=function(n,o,s){function c(m,v){return"[Axios v"+qTe+"] Transitional option '"+m+"'"+v+(s?". "+s:"")}return function(m,v,d){if(n===!1)throw new Error(c(v," has been removed"+(o?" in "+o:"")));return o&&!j7[v]&&(j7[v]=!0,console.warn(c(v," has been deprecated since v"+o+" and will be removed in the near future"))),n?n(m,v,d):!0}};function WTe(t,n,o){if(typeof t!="object")throw new TypeError("options must be an object");for(var s=Object.keys(t),c=s.length;c-- >0;){var m=s[c],v=n[m];if(v){var d=t[m],C=d===void 0||v(d,m,t);if(C!==!0)throw new TypeError("option "+m+" must be "+C);continue}if(o!==!0)throw Error("Unknown option "+m)}}var KTe={assertOptions:WTe,validators:Jz},NK=Nc,ZTe=OK,V7=CTe,U7=GTe,EM=BK,jK=KTe,u_=jK.validators;function Iw(t){this.defaults=t,this.interceptors={request:new V7,response:new V7}}Iw.prototype.request=function(n,o){typeof n=="string"?(o=o||{},o.url=n):o=n||{},o=EM(this.defaults,o),o.method?o.method=o.method.toLowerCase():this.defaults.method?o.method=this.defaults.method.toLowerCase():o.method="get";var s=o.transitional;s!==void 0&&jK.assertOptions(s,{silentJSONParsing:u_.transitional(u_.boolean),forcedJSONParsing:u_.transitional(u_.boolean),clarifyTimeoutError:u_.transitional(u_.boolean)},!1);var c=[],m=!0;this.interceptors.request.forEach(function(H){typeof H.runWhen=="function"&&H.runWhen(o)===!1||(m=m&&H.synchronous,c.unshift(H.fulfilled,H.rejected))});var v=[];this.interceptors.response.forEach(function(H){v.push(H.fulfilled,H.rejected)});var d;if(!m){var C=[U7,void 0];for(Array.prototype.unshift.apply(C,c),C=C.concat(v),d=Promise.resolve(o);C.length;)d=d.then(C.shift(),C.shift());return d}for(var S=o;c.length;){var R=c.shift(),D=c.shift();try{S=R(S)}catch($){D($);break}}try{d=U7(S)}catch($){return Promise.reject($)}for(;v.length;)d=d.then(v.shift(),v.shift());return d};Iw.prototype.getUri=function(n){return n=EM(this.defaults,n),ZTe(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")};NK.forEach(["delete","get","head","options"],function(n){Iw.prototype[n]=function(o,s){return this.request(EM(s||{},{method:n,url:o,data:(s||{}).data}))}});NK.forEach(["post","put","patch"],function(n){Iw.prototype[n]=function(o,s,c){return this.request(EM(c||{},{method:n,url:o,data:s}))}});var XTe=Iw,wA,H7;function YTe(){if(H7)return wA;H7=1;var t=SM();function n(o){if(typeof o!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(v){s=v});var c=this;this.promise.then(function(m){if(c._listeners){var v,d=c._listeners.length;for(v=0;v<d;v++)c._listeners[v](m);c._listeners=null}}),this.promise.then=function(m){var v,d=new Promise(function(C){c.subscribe(C),v=C}).then(m);return d.cancel=function(){c.unsubscribe(v)},d},o(function(v){c.reason||(c.reason=new t(v),s(c.reason))})}return n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]},n.prototype.unsubscribe=function(s){if(this._listeners){var c=this._listeners.indexOf(s);c!==-1&&this._listeners.splice(c,1)}},n.source=function(){var s,c=new n(function(v){s=v});return{token:c,cancel:s}},wA=n,wA}var SA,G7;function JTe(){return G7||(G7=1,SA=function(n){return function(s){return n.apply(null,s)}}),SA}var CA,q7;function QTe(){if(q7)return CA;q7=1;var t=Nc;return CA=function(o){return t.isObject(o)&&o.isAxiosError===!0},CA}var W7=Nc,eIe=PK,nT=XTe,tIe=BK,rIe=Yz;function VK(t){var n=new nT(t),o=eIe(nT.prototype.request,n);return W7.extend(o,nT.prototype,n),W7.extend(o,n),o.create=function(c){return VK(tIe(t,c))},o}var Hd=VK(rIe);Hd.Axios=nT;Hd.Cancel=SM();Hd.CancelToken=YTe();Hd.isCancel=$K();Hd.VERSION=FK().version;Hd.all=function(n){return Promise.all(n)};Hd.spread=JTe();Hd.isAxiosError=QTe();Kz.exports=Hd;Kz.exports.default=Hd;var nIe=Kz.exports,iIe=nIe;const UK=Nd(iIe);var xE={VITE_BASE_PATH:"/mbw_desk",VITE_KEY_MAP:"wtpM0U1ZmE2s87LEZNSHf63Osc1a2sboaozCQNsy",VITE_API_KEY:"w1Dlh2wRon7mE6sL196TgvLS45fw02uon74pJ0rc",BASE_URL:"/assets/mbw_dms/mbw_fe/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let nI=UK;xE.VITE_BASE_URL&&(nI=UK.create({baseURL:xE.VITE_BASE_URL}),nI.interceptors.request.use(function(t){const n=`Basic ${btoa(`${xE.VITE_AUTH_KEY}:${xE.VITE_AUTH_SECRET}`)}`;return t.headers.Authorization=n,t},function(t){return Promise.reject(t?.response?.data?.message||t)}));nI.interceptors.response.use(function(t){return t.data},function(t){return Promise.reject(t?.response?.data?.message||t)});function HK(){const{currentUser:t}=IU(),[n,o]=E.useState();E.useEffect(()=>{(async()=>{const c=await nI.get("api/method/mbw_service_v2.api.user.get_employee_info");console.log("employee",c),o(c.result)})()},[]);const s=[{label:$r.jsx("a",{href:"/app/user-profile",className:"w-[200px]",children:"My Profile"}),key:"0"},{label:$r.jsx("a",{href:`app/user/${t}`,children:"My Settings"}),key:"1"},{type:"divider"},{label:$r.jsx("a",{href:"/?cmd=web_logout",children:"Log out"}),key:"3"}];return $r.jsx("div",{className:"w-full !border-[red] border bg-white py-[7px] !border-b-4",children:$r.jsx(kz,{className:"justify-end max-w-full ",children:$r.jsx(zz,{menu:{items:s},trigger:["click"],placement:"bottomRight",dropdownRender:c=>$r.jsx("div",{className:"w-[200px]",children:rr.cloneElement(c)}),children:$r.jsx(e_e,{style:{backgroundColor:"#f56a00"},size:32,...n?.image?{src:n?.image}:{},children:!n?.image&&n?.employee_name[0]})})})})}var Oc=function(){return Oc=Object.assign||function(n){for(var o,s=1,c=arguments.length;s<c;s++){o=arguments[s];for(var m in o)Object.prototype.hasOwnProperty.call(o,m)&&(n[m]=o[m])}return n},Oc.apply(this,arguments)};function iI(t,n,o){if(o||arguments.length===2)for(var s=0,c=n.length,m;s<c;s++)(m||!(s in n))&&(m||(m=Array.prototype.slice.call(n,0,s)),m[s]=n[s]);return t.concat(m||Array.prototype.slice.call(n))}var oIe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},du={},l0=typeof process<"u"&&du!==void 0&&(du.REACT_APP_SC_ATTR||du.SC_ATTR)||"data-styled",GK="active",qK="data-styled-version",TM="6.1.8",Qz=`/*!sc*/
`,eD=typeof window<"u"&&"HTMLElement"in window,aIe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&du!==void 0&&du.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&du.REACT_APP_SC_DISABLE_SPEEDY!==""?du.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&du.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&du!==void 0&&du.SC_DISABLE_SPEEDY!==void 0&&du.SC_DISABLE_SPEEDY!==""&&du.SC_DISABLE_SPEEDY!=="false"&&du.SC_DISABLE_SPEEDY),IM=Object.freeze([]),c0=Object.freeze({});function sIe(t,n,o){return o===void 0&&(o=c0),t.theme!==o.theme&&t.theme||n||o.theme}var WK=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),lIe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,cIe=/(^-|-$)/g;function K7(t){return t.replace(lIe,"-").replace(cIe,"")}var uIe=/(a)(d)/gi,bE=52,Z7=function(t){return String.fromCharCode(t+(t>25?39:97))};function ak(t){var n,o="";for(n=Math.abs(t);n>bE;n=n/bE|0)o=Z7(n%bE)+o;return(Z7(n%bE)+o).replace(uIe,"$1-$2")}var EA,KK=5381,P_=function(t,n){for(var o=n.length;o;)t=33*t^n.charCodeAt(--o);return t},ZK=function(t){return P_(KK,t)};function hIe(t){return ak(ZK(t)>>>0)}function dIe(t){return t.displayName||t.name||"Component"}function TA(t){return typeof t=="string"&&!0}var XK=typeof Symbol=="function"&&Symbol.for,YK=XK?Symbol.for("react.memo"):60115,fIe=XK?Symbol.for("react.forward_ref"):60112,pIe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mIe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},JK={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gIe=((EA={})[fIe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EA[YK]=JK,EA);function X7(t){return("type"in(n=t)&&n.type.$$typeof)===YK?JK:"$$typeof"in t?gIe[t.$$typeof]:pIe;var n}var yIe=Object.defineProperty,vIe=Object.getOwnPropertyNames,Y7=Object.getOwnPropertySymbols,_Ie=Object.getOwnPropertyDescriptor,xIe=Object.getPrototypeOf,J7=Object.prototype;function QK(t,n,o){if(typeof n!="string"){if(J7){var s=xIe(n);s&&s!==J7&&QK(t,s,o)}var c=vIe(n);Y7&&(c=c.concat(Y7(n)));for(var m=X7(t),v=X7(n),d=0;d<c.length;++d){var C=c[d];if(!(C in mIe||o&&o[C]||v&&C in v||m&&C in m)){var S=_Ie(n,C);try{yIe(t,C,S)}catch{}}}}return t}function u0(t){return typeof t=="function"}function tD(t){return typeof t=="object"&&"styledComponentId"in t}function ly(t,n){return t&&n?"".concat(t," ").concat(n):t||n||""}function Q7(t,n){if(t.length===0)return"";for(var o=t[0],s=1;s<t.length;s++)o+=n?n+t[s]:t[s];return o}function Yb(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function sk(t,n,o){if(o===void 0&&(o=!1),!o&&!Yb(t)&&!Array.isArray(t))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)t[s]=sk(t[s],n[s]);else if(Yb(n))for(var s in n)t[s]=sk(t[s],n[s]);return t}function rD(t,n){Object.defineProperty(t,"toString",{value:n})}function Mw(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var bIe=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return t.prototype.indexOfGroup=function(n){for(var o=0,s=0;s<n;s++)o+=this.groupSizes[s];return o},t.prototype.insertRules=function(n,o){if(n>=this.groupSizes.length){for(var s=this.groupSizes,c=s.length,m=c;n>=m;)if((m<<=1)<0)throw Mw(16,"".concat(n));this.groupSizes=new Uint32Array(m),this.groupSizes.set(s),this.length=m;for(var v=c;v<m;v++)this.groupSizes[v]=0}for(var d=this.indexOfGroup(n+1),C=(v=0,o.length);v<C;v++)this.tag.insertRule(d,o[v])&&(this.groupSizes[n]++,d++)},t.prototype.clearGroup=function(n){if(n<this.length){var o=this.groupSizes[n],s=this.indexOfGroup(n),c=s+o;this.groupSizes[n]=0;for(var m=s;m<c;m++)this.tag.deleteRule(s)}},t.prototype.getGroup=function(n){var o="";if(n>=this.length||this.groupSizes[n]===0)return o;for(var s=this.groupSizes[n],c=this.indexOfGroup(n),m=c+s,v=c;v<m;v++)o+="".concat(this.tag.getRule(v)).concat(Qz);return o},t}(),iT=new Map,oI=new Map,oT=1,wE=function(t){if(iT.has(t))return iT.get(t);for(;oI.has(oT);)oT++;var n=oT++;return iT.set(t,n),oI.set(n,t),n},wIe=function(t,n){oT=n+1,iT.set(t,n),oI.set(n,t)},SIe="style[".concat(l0,"][").concat(qK,'="').concat(TM,'"]'),CIe=new RegExp("^".concat(l0,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),EIe=function(t,n,o){for(var s,c=o.split(","),m=0,v=c.length;m<v;m++)(s=c[m])&&t.registerName(n,s)},TIe=function(t,n){for(var o,s=((o=n.textContent)!==null&&o!==void 0?o:"").split(Qz),c=[],m=0,v=s.length;m<v;m++){var d=s[m].trim();if(d){var C=d.match(CIe);if(C){var S=0|parseInt(C[1],10),R=C[2];S!==0&&(wIe(R,S),EIe(t,R,C[3]),t.getTag().insertRules(S,c)),c.length=0}else c.push(d)}}};function IIe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var eZ=function(t){var n=document.head,o=t||n,s=document.createElement("style"),c=function(d){var C=Array.from(d.querySelectorAll("style[".concat(l0,"]")));return C[C.length-1]}(o),m=c!==void 0?c.nextSibling:null;s.setAttribute(l0,GK),s.setAttribute(qK,TM);var v=IIe();return v&&s.setAttribute("nonce",v),o.insertBefore(s,m),s},MIe=function(){function t(n){this.element=eZ(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var s=document.styleSheets,c=0,m=s.length;c<m;c++){var v=s[c];if(v.ownerNode===o)return v}throw Mw(17)}(this.element),this.length=0}return t.prototype.insertRule=function(n,o){try{return this.sheet.insertRule(o,n),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},t.prototype.getRule=function(n){var o=this.sheet.cssRules[n];return o&&o.cssText?o.cssText:""},t}(),PIe=function(){function t(n){this.element=eZ(n),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(n,o){if(n<=this.length&&n>=0){var s=document.createTextNode(o);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},t.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),AIe=function(){function t(n){this.rules=[],this.length=0}return t.prototype.insertRule=function(n,o){return n<=this.length&&(this.rules.splice(n,0,o),this.length++,!0)},t.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},t.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),ej=eD,RIe={isServer:!eD,useCSSOMInjection:!aIe},tZ=function(){function t(n,o,s){n===void 0&&(n=c0),o===void 0&&(o={});var c=this;this.options=Oc(Oc({},RIe),n),this.gs=o,this.names=new Map(s),this.server=!!n.isServer,!this.server&&eD&&ej&&(ej=!1,function(m){for(var v=document.querySelectorAll(SIe),d=0,C=v.length;d<C;d++){var S=v[d];S&&S.getAttribute(l0)!==GK&&(TIe(m,S),S.parentNode&&S.parentNode.removeChild(S))}}(this)),rD(this,function(){return function(m){for(var v=m.getTag(),d=v.length,C="",S=function(D){var $=function(G){return oI.get(G)}(D);if($===void 0)return"continue";var H=m.names.get($),Z=v.getGroup(D);if(H===void 0||Z.length===0)return"continue";var X="".concat(l0,".g").concat(D,'[id="').concat($,'"]'),Q="";H!==void 0&&H.forEach(function(G){G.length>0&&(Q+="".concat(G,","))}),C+="".concat(Z).concat(X,'{content:"').concat(Q,'"}').concat(Qz)},R=0;R<d;R++)S(R);return C}(c)})}return t.registerId=function(n){return wE(n)},t.prototype.reconstructWithOptions=function(n,o){return o===void 0&&(o=!0),new t(Oc(Oc({},this.options),n),this.gs,o&&this.names||void 0)},t.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(n=function(o){var s=o.useCSSOMInjection,c=o.target;return o.isServer?new AIe(c):s?new MIe(c):new PIe(c)}(this.options),new bIe(n)));var n},t.prototype.hasNameForId=function(n,o){return this.names.has(n)&&this.names.get(n).has(o)},t.prototype.registerName=function(n,o){if(wE(n),this.names.has(n))this.names.get(n).add(o);else{var s=new Set;s.add(o),this.names.set(n,s)}},t.prototype.insertRules=function(n,o,s){this.registerName(n,o),this.getTag().insertRules(wE(n),s)},t.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},t.prototype.clearRules=function(n){this.getTag().clearGroup(wE(n)),this.clearNames(n)},t.prototype.clearTag=function(){this.tag=void 0},t}(),kIe=/&/g,OIe=/^\s*\/\/.*$/gm;function rZ(t,n){return t.map(function(o){return o.type==="rule"&&(o.value="".concat(n," ").concat(o.value),o.value=o.value.replaceAll(",",",".concat(n," ")),o.props=o.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(o.children)&&o.type!=="@keyframes"&&(o.children=rZ(o.children,n)),o})}function zIe(t){var n,o,s,c=t===void 0?c0:t,m=c.options,v=m===void 0?c0:m,d=c.plugins,C=d===void 0?IM:d,S=function($,H,Z){return Z.startsWith(o)&&Z.endsWith(o)&&Z.replaceAll(o,"").length>0?".".concat(n):$},R=C.slice();R.push(function($){$.type===HI&&$.value.includes("&")&&($.props[0]=$.props[0].replace(kIe,o).replace(s,S))}),v.prefix&&R.push(Uce),R.push(gH);var D=function($,H,Z,X){H===void 0&&(H=""),Z===void 0&&(Z=""),X===void 0&&(X="&"),n=X,o=H,s=new RegExp("\\".concat(o,"\\b"),"g");var Q=$.replace(OIe,""),G=pH(Z||H?"".concat(Z," ").concat(H," { ").concat(Q," }"):Q);v.namespace&&(G=rZ(G,v.namespace));var K=[];return Fb(G,jce(R.concat(Vce(function(Y){return K.push(Y)})))),K};return D.hash=C.length?C.reduce(function($,H){return H.name||Mw(15),P_($,H.name)},KK).toString():"",D}var DIe=new tZ,lk=zIe(),nZ=rr.createContext({shouldForwardProp:void 0,styleSheet:DIe,stylis:lk});nZ.Consumer;rr.createContext(void 0);function tj(){return E.useContext(nZ)}var LIe=function(){function t(n,o){var s=this;this.inject=function(c,m){m===void 0&&(m=lk);var v=s.name+m.hash;c.hasNameForId(s.id,v)||c.insertRules(s.id,v,m(s.rules,v,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=o,rD(this,function(){throw Mw(12,String(s.name))})}return t.prototype.getName=function(n){return n===void 0&&(n=lk),this.name+n.hash},t}(),$Ie=function(t){return t>="A"&&t<="Z"};function rj(t){for(var n="",o=0;o<t.length;o++){var s=t[o];if(o===1&&s==="-"&&t[0]==="-")return t;$Ie(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var iZ=function(t){return t==null||t===!1||t===""},oZ=function(t){var n,o,s=[];for(var c in t){var m=t[c];t.hasOwnProperty(c)&&!iZ(m)&&(Array.isArray(m)&&m.isCss||u0(m)?s.push("".concat(rj(c),":"),m,";"):Yb(m)?s.push.apply(s,iI(iI(["".concat(c," {")],oZ(m),!1),["}"],!1)):s.push("".concat(rj(c),": ").concat((n=c,(o=m)==null||typeof o=="boolean"||o===""?"":typeof o!="number"||o===0||n in oIe||n.startsWith("--")?String(o).trim():"".concat(o,"px")),";")))}return s};function py(t,n,o,s){if(iZ(t))return[];if(tD(t))return[".".concat(t.styledComponentId)];if(u0(t)){if(!u0(m=t)||m.prototype&&m.prototype.isReactComponent||!n)return[t];var c=t(n);return py(c,n,o,s)}var m;return t instanceof LIe?o?(t.inject(o,s),[t.getName(s)]):[t]:Yb(t)?oZ(t):Array.isArray(t)?Array.prototype.concat.apply(IM,t.map(function(v){return py(v,n,o,s)})):[t.toString()]}function BIe(t){for(var n=0;n<t.length;n+=1){var o=t[n];if(u0(o)&&!tD(o))return!1}return!0}var FIe=ZK(TM),NIe=function(){function t(n,o,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&BIe(n),this.componentId=o,this.baseHash=P_(FIe,o),this.baseStyle=s,tZ.registerId(o)}return t.prototype.generateAndInjectStyles=function(n,o,s){var c=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,o,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&o.hasNameForId(this.componentId,this.staticRulesId))c=ly(c,this.staticRulesId);else{var m=Q7(py(this.rules,n,o,s)),v=ak(P_(this.baseHash,m)>>>0);if(!o.hasNameForId(this.componentId,v)){var d=s(m,".".concat(v),void 0,this.componentId);o.insertRules(this.componentId,v,d)}c=ly(c,v),this.staticRulesId=v}else{for(var C=P_(this.baseHash,s.hash),S="",R=0;R<this.rules.length;R++){var D=this.rules[R];if(typeof D=="string")S+=D;else if(D){var $=Q7(py(D,n,o,s));C=P_(C,$+R),S+=$}}if(S){var H=ak(C>>>0);o.hasNameForId(this.componentId,H)||o.insertRules(this.componentId,H,s(S,".".concat(H),void 0,this.componentId)),c=ly(c,H)}}return c},t}(),aZ=rr.createContext(void 0);aZ.Consumer;var IA={};function jIe(t,n,o){var s=tD(t),c=t,m=!TA(t),v=n.attrs,d=v===void 0?IM:v,C=n.componentId,S=C===void 0?function(re,fe){var me=typeof re!="string"?"sc":K7(re);IA[me]=(IA[me]||0)+1;var pe="".concat(me,"-").concat(hIe(TM+me+IA[me]));return fe?"".concat(fe,"-").concat(pe):pe}(n.displayName,n.parentComponentId):C,R=n.displayName,D=R===void 0?function(re){return TA(re)?"styled.".concat(re):"Styled(".concat(dIe(re),")")}(t):R,$=n.displayName&&n.componentId?"".concat(K7(n.displayName),"-").concat(n.componentId):n.componentId||S,H=s&&c.attrs?c.attrs.concat(d).filter(Boolean):d,Z=n.shouldForwardProp;if(s&&c.shouldForwardProp){var X=c.shouldForwardProp;if(n.shouldForwardProp){var Q=n.shouldForwardProp;Z=function(re,fe){return X(re,fe)&&Q(re,fe)}}else Z=X}var G=new NIe(o,$,s?c.componentStyle:void 0);function K(re,fe){return function(me,pe,xe){var Se=me.attrs,oe=me.componentStyle,Re=me.defaultProps,Ve=me.foldedComponentIds,Oe=me.styledComponentId,_e=me.target,Fe=rr.useContext(aZ),Le=tj(),Me=me.shouldForwardProp||Le.shouldForwardProp,Ce=sIe(pe,Fe,Re)||c0,Ye=function(Ot,Tt,ct){for(var Ct,kt=Oc(Oc({},Tt),{className:void 0,theme:ct}),zt=0;zt<Ot.length;zt+=1){var Nt=u0(Ct=Ot[zt])?Ct(kt):Ct;for(var Rt in Nt)kt[Rt]=Rt==="className"?ly(kt[Rt],Nt[Rt]):Rt==="style"?Oc(Oc({},kt[Rt]),Nt[Rt]):Nt[Rt]}return Tt.className&&(kt.className=ly(kt.className,Tt.className)),kt}(Se,pe,Ce),qe=Ye.as||_e,rt={};for(var Qe in Ye)Ye[Qe]===void 0||Qe[0]==="$"||Qe==="as"||Qe==="theme"&&Ye.theme===Ce||(Qe==="forwardedAs"?rt.as=Ye.forwardedAs:Me&&!Me(Qe,qe)||(rt[Qe]=Ye[Qe]));var St=function(Ot,Tt){var ct=tj(),Ct=Ot.generateAndInjectStyles(Tt,ct.styleSheet,ct.stylis);return Ct}(oe,Ye),jt=ly(Ve,Oe);return St&&(jt+=" "+St),Ye.className&&(jt+=" "+Ye.className),rt[TA(qe)&&!WK.has(qe)?"class":"className"]=jt,rt.ref=xe,E.createElement(qe,rt)}(Y,re,fe)}K.displayName=D;var Y=rr.forwardRef(K);return Y.attrs=H,Y.componentStyle=G,Y.displayName=D,Y.shouldForwardProp=Z,Y.foldedComponentIds=s?ly(c.foldedComponentIds,c.styledComponentId):"",Y.styledComponentId=$,Y.target=s?c.target:t,Object.defineProperty(Y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(re){this._foldedDefaultProps=s?function(fe){for(var me=[],pe=1;pe<arguments.length;pe++)me[pe-1]=arguments[pe];for(var xe=0,Se=me;xe<Se.length;xe++)sk(fe,Se[xe],!0);return fe}({},c.defaultProps,re):re}}),rD(Y,function(){return".".concat(Y.styledComponentId)}),m&&QK(Y,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),Y}function nj(t,n){for(var o=[t[0]],s=0,c=n.length;s<c;s+=1)o.push(n[s],t[s+1]);return o}var ij=function(t){return Object.assign(t,{isCss:!0})};function VIe(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(u0(t)||Yb(t))return ij(py(nj(IM,iI([t],n,!0))));var s=t;return n.length===0&&s.length===1&&typeof s[0]=="string"?py(s):ij(py(nj(s,n)))}function ck(t,n,o){if(o===void 0&&(o=c0),!n)throw Mw(1,n);var s=function(c){for(var m=[],v=1;v<arguments.length;v++)m[v-1]=arguments[v];return t(n,o,VIe.apply(void 0,iI([c],m,!1)))};return s.attrs=function(c){return ck(t,n,Oc(Oc({},o),{attrs:Array.prototype.concat(o.attrs,c).filter(Boolean)}))},s.withConfig=function(c){return ck(t,n,Oc(Oc({},o),c))},s}var sZ=function(t){return ck(jIe,t)},Ay=sZ;WK.forEach(function(t){Ay[t]=sZ(t)});const UIe=Ay.div`
& .ant-menu {
    &.ant-menu-vertical  {
        & .ant-menu-item ,&  .ant-menu-submenu .ant-menu-submenu-title {
            padding-top:10px;
        }
    }
    & .ant-menu-item,& .ant-menu-submenu .ant-menu-submenu-title {
        border-radius: 0;
        color: #212B36;
        font-size: 14px;
        font-weight: 400;
        line-height: 22px;
        min-height: 40px;
        height: unset!important;
        & .ant-menu-item-icon {
            color: #637381!important;
        }
        
        &.ant-menu-item-selected a {
            font-weight: 600!important;
            & p {
                width:100%;
                display:block;
                padding: 4px 0!important;
            }
        }

        &.ant-menu-item-selected .ant-menu-item-icon {
            color: #212B36!important;
        }
    }
    & .ant-menu-submenu  {
        & .ant-menu-item-selected a {
            font-weight: 600!important;
            display: block;
            padding: 10px 0;
            white-space: normal!important;
        }
    }

    & .ant-menu-submenu.ant-menu-submenu-vertical.ant-menu-submenu-selected .ant-menu-submenu-title {
        & .ant-menu-item-icon {
            color: #212B36!important;
        }
    }

    & .ant-menu-submenu:has(.ant-menu-item-selected) .ant-menu-item-icon{
        color: #212B36!important;
    }

}



`,HIe=({...t})=>$r.jsx(UIe,{children:$r.jsx(Ez,{...t})});var GIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M959.2 383.9c-.3-82.1-66.9-148.6-149.1-148.6H575.9l21.6 85.2 201 43.7a42.58 42.58 0 0132.9 39.7c.1.5.1 216.1 0 216.6a42.58 42.58 0 01-32.9 39.7l-201 43.7-21.6 85.3h234.2c82.1 0 148.8-66.5 149.1-148.6V383.9zM225.5 660.4a42.58 42.58 0 01-32.9-39.7c-.1-.6-.1-216.1 0-216.6.8-19.4 14.6-35.5 32.9-39.7l201-43.7 21.6-85.2H213.8c-82.1 0-148.8 66.4-149.1 148.6V641c.3 82.1 67 148.6 149.1 148.6H448l-21.6-85.3-200.9-43.9zm200.9-158.8h171v21.3h-171z"}}]},name:"aliyun",theme:"outlined"};const qIe=GIe;var WIe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:qIe}))};const KIe=E.forwardRef(WIe);var ZIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};const XIe=ZIe;var YIe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:XIe}))};const JIe=E.forwardRef(YIe);var QIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"};const eMe=QIe;var tMe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:eMe}))};const rMe=E.forwardRef(tMe);var nMe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};const iMe=nMe;var oMe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:iMe}))};const aMe=E.forwardRef(oMe);var sMe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm144 452H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm445.7 51.5l-93.3-93.3C814.7 780.7 828 743.9 828 704c0-97.2-78.8-176-176-176s-176 78.8-176 176 78.8 176 176 176c35.8 0 69-10.7 96.8-29l94.7 94.7c1.6 1.6 3.6 2.3 5.6 2.3s4.1-.8 5.6-2.3l31-31a7.9 7.9 0 000-11.2zM652 816c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"file-search",theme:"outlined"};const lMe=sMe;var cMe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:lMe}))};const uMe=E.forwardRef(cMe);var hMe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M676 565c-50.8 0-92 41.2-92 92s41.2 92 92 92 92-41.2 92-92-41.2-92-92-92zm0 126c-18.8 0-34-15.2-34-34s15.2-34 34-34 34 15.2 34 34-15.2 34-34 34zm204-523H668c0-30.9-25.1-56-56-56h-80c-30.9 0-56 25.1-56 56H264c-17.7 0-32 14.3-32 32v200h-88c-17.7 0-32 14.3-32 32v448c0 17.7 14.3 32 32 32h336c17.7 0 32-14.3 32-32v-16h368c17.7 0 32-14.3 32-32V200c0-17.7-14.3-32-32-32zm-412 64h72v-56h64v56h72v48H468v-48zm-20 616H176V616h272v232zm0-296H176v-88h272v88zm392 240H512V432c0-17.7-14.3-32-32-32H304V240h100v104h336V240h100v552zM704 408v96c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-96c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zM592 512h48c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8z"}}]},name:"reconciliation",theme:"outlined"};const dMe=hMe;var fMe=function(n,o){return E.createElement(_o,Mr({},n,{ref:o,icon:dMe}))};const pMe=E.forwardRef(fMe),mMe=[{label:$r.jsx(Hs,{className:"",to:"/",children:"Tổng quan"}),icon:$r.jsx(JIe,{style:{fontSize:"22px"}}),key:"dashboard"},{label:$r.jsx(Hs,{className:"",to:"/customers-map",children:"Bản đồ khách hàng"}),icon:$r.jsx(KIe,{style:{fontSize:"22px"}}),key:"csmap"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"#",children:"Giám sát"}),icon:$r.jsx(uMe,{style:{fontSize:"22px"}}),key:"giamsat",children:[{label:$r.jsx(Hs,{className:"",to:"/monitor-album",children:"Giám sát chụp ảnh khách hàng"}),key:"giamsat-image"},{label:$r.jsx(Hs,{className:"",to:"employee-monitor",children:"Giám sát viếng thăm khách hàng"}),key:"employee-monitor"},{label:$r.jsx(Hs,{className:"",to:"employee-monitor-kpi",children:"Giám sát nhân viên theo kpi"}),key:"employee-monitor-kpi"}]},{label:$r.jsx(Hs,{className:"",to:"/router-control",children:"Quản lý tuyến"}),icon:$r.jsx(rMe,{style:{fontSize:"22px"}}),key:"control"},{label:$r.jsx("a",{className:"",href:"/mbw_audit",children:"Chấm điểm trưng bày"}),icon:$r.jsx(aMe,{style:{fontSize:"22px"}}),key:"checkinimage"},{label:$r.jsx(Hs,{to:"#",className:"text-[#212B36] hover:text-[#212B36]",children:"Báo cáo"}),icon:$r.jsx(pMe,{style:{fontSize:"22px"}}),key:"report",children:[{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-customer",children:"Báo cáo tồn kho khách hàng"}),key:"report-customer"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-kpi",children:"Báo cáo KPI"}),key:"report_kpi"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-checkin",children:"Báo cáo viếng thăm"}),key:"report-checkin"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-sales",children:"Báo cáo tổng hợp bán hàng"}),key:"report-sales"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-saleorder",children:"Báo cáo tổng hợp đặt hàng"}),key:"report-saleorder"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-debt",children:"Báo cáo công nợ khách hàng"}),key:"report-debt"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-custom-new",children:"Báo cáo khách hàng mới"}),key:"report-custom-new"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-checkin-first",children:"Báo cáo thống kê khách hàng viếng thăm lần đầu"}),key:"report-checkin-first"},{label:$r.jsx(Hs,{className:"text-[#212B36] hover:text-[#212B36]",to:"/report-distance",children:"Báo cáo tổng hợp cự ly di chuyển từng nhân viên (km)"}),key:"report-distance"}]}],gMe="data:image/svg+xml,%3csvg%20width='50'%20height='50'%20viewBox='0%200%2050%2050'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1598_2739)'%3e%3cpath%20d='M0%206C0%202.7%202.7%200%206%200H44C47.3%200%2050%202.7%2050%206V44C50%2047.3%2047.3%2050%2044%2050H6C2.7%2050%200%2047.3%200%2044V6Z'%20fill='%23C4161C'/%3e%3cpath%20d='M32.85%2016.45H33.7V12H16.5V16.45H21.95H32.85Z'%20fill='white'/%3e%3cpath%20d='M21.95%2033.1V26.95H32.85V22.5H21.95H16.5V37.6H33.85V33.15H21.95V33.1Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1598_2739'%3e%3crect%20width='50'%20height='50'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";function yMe({handleCollapsed:t,collapsed:n}){const[o,s]=E.useState(localStorage.getItem("selectedKey")||"1"),c=v=>{s(v.key),localStorage.setItem("selectedKey",v.key)},m=()=>{t(!n)};return $r.jsxs("div",{children:[$r.jsxs(kz,{className:"justify-between items-center py-4 pl-4",children:[$r.jsx(QT,{children:$r.jsx(Hs,{to:"app",className:"w-[32px] h-[32px]",children:$r.jsx("img",{src:gMe,className:"object-contain w-[32px] h-[32px]"})})}),$r.jsx(QT,{onClick:m,className:"pr-2",children:n?$r.jsx(WR,{}):$r.jsx(qR,{})})]}),$r.jsx("div",{className:"font-semibold text-lg text-[#919EAB] leading-[22px] pl-[8px] mx-2 pb-4",children:$r.jsx(Hs,{className:"font-semibold text-lg !text-[#919EAB] leading-[22px]",to:"/",children:"DMS"})}),$r.jsx(HIe,{theme:"light",onClick:c,selectedKeys:[o],mode:"inline",items:mMe})]})}const{Content:oj,Sider:vMe}=fy,_Me=Ay(vMe)` 
& .ant-layout-sider-trigger {
  display: none;
}
`;function xMe({children:t}){const[n,o]=E.useState(!1);return $r.jsxs(fy,{children:[$r.jsx(_Me,{style:{background:"#fff"},width:n?78:250,collapsible:!0,collapsed:n,children:$r.jsx(yMe,{handleCollapsed:o,collapsed:n})}),$r.jsx(fy,{children:$r.jsxs(oj,{style:{padding:"0 0px"},className:"!bg-[#fff] min-h-screen",children:[$r.jsx(HK,{}),$r.jsx(fy,{style:{padding:"24px 0",background:"#fff",borderRadius:"8px",margin:"0 auto"},children:$r.jsx(oj,{className:"round",style:{padding:"0 24px",minHeight:"90vh",background:"#F4F6F8"},children:$r.jsx("div",{children:t})})})]})})]})}const W3e=Ay(Zf.Item)`
&.ant-form-item {
  margin-bottom: 0;
  line-height: normal;
}

& label.ant-form-item-required{
  &::before {
    display: none!important;
  }
    
}

& .ant-form-item-label {
  & > label {
    color: black;
    font-weight: 400;
    font-size: 14px;
    line-height: 24px;
    height: 24px;

    &::before {
      order: 1;
      margin-left: 4px;
    }

    svg {
      order: 2;
    }
  }
}

& input:empty, & .ant-select-selector {
  background-color: #F5F7FA!important;
}

& .ant-input-affix-wrapper {
  height: 37px;
}
& :where(.css-dev-only-do-not-override-dkbvqv).ant-select-single {
  height: 36px!important;
}

& .ant-picker {
  height: 36px;
}
.ant-form-item-control {
  gap: 4px;
}

.ant-picker {
  width: 100%;
}
}

`,bMe="/assets/mbw_dms/mbw_fe/assets/loading-7fPxzU3K.gif";function aj(){return $r.jsx("div",{className:"flex items-center justify-center w-full h-screen",children:$r.jsx("img",{src:bMe})})}const K3e=Ay(XEe)`
& table {
  border-left: ${t=>t.$border?"":"none"}!important;
  border-right: ${t=>t.$border?"":"none"}!important;
}
& .ant-table-container .ant-table-cell{
  font-size: 14px!important;
  font-weight:500;
  letter-spacing: normal!important;
}

&:not(:has(.ant-table-cell)) .ant-table-thead {
  &>tr {
    & .ant-table-cell {

      color : #637381;
      line-height: 21px;
      font-size: 14px;
      font-weight: 500!important;
      border-radius: 0 !important;

    }
    // border-radius: 16px 16px 0 0 !important;
    border-radius: 0 !important;
    & th {
      white-space : nowrap;
      border-bottom: none
    }
    & th:first-child {
      border-start-start-radius: 0!important;
      border-start-start: 1!important;
    }
  
    & th:last-child {
      border-start-end-radius: 0!important;
    }
  }
}

& .ant-table-tbody>tr:last-child {
  border-radius:  0 0 16px 16px!important;
  & td:first-child {
    border-end-start-radius: 0!important;
  }

  & td:last-child {
    border-end-end-radius: 0!important;
  }
}
& .ant-table-row-expand-icon-cell {
  padding: 0 16px!important;
  border-inline-end: none!important;
}


.ant-table-container {
    table {
      border: 1px solid #ebebeb;
    }

    .ant-table-thead {
      .ant-table-cell {
        background: #fff;
        font-size: 12px;
        font-weight: 500;
        letter-spacing: 0.12em;
        color: #8094ae;
      }
    }
    .ant-table-thead
      > tr
      > th:not(
        :last-child,
        .ant-table-selection-column,
        .ant-table-row-expand-icon-cell,
        [colspan]
      )::before {
      position: unset !important;
    }

    .ant-table-tbody {
      .ant-table-row {
        cursor: pointer;

        .ant-table-cell {
          user-select: none;
        }
      }

      .ant-empty {
        margin-top: 3rem;
        margin-bottom: 2.5rem;

        .ant-empty-image {
          height: 56px;
        }

        .ant-empty-description {
          line-height: 20px;
          color: #565F6B;
        }
      }

      & tr {
        &:hover {
          background-color: transparent !important;
          td {
            background-color: #fff !important;
          }
        }
        &:nth-child(2n + 1) {
          td {
            background: #fff;
          }
        }
      }
    }
  }

  .ant-pagination {
    margin-block: 12px !important;

    .ant-pagination-options {
      position: absolute;
      left: 0;
      margin-left: 0;

      .ant-select {
        .ant-select-selector {
          padding: 6px 12px;
          height: 32px;

          .ant-select-selection-item {
            color: #2C3137;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            padding-inline-end: 24px;
          }
        }

        .ant-select-arrow {
          color: #707C8C;
        }
      }
    }

    .ant-pagination-total-text {
      color: #565F6B;
      margin-right: 1.5rem;
    }

    .ant-pagination-item {
      font-weight: 500;
    }
  }

  & .ant-table-row-expand-icon-cell {
    padding: 16px!important;
  }

  & .ant-table-cell {
    & .ant-table-content {
      padding: 25px 0;
      padding-right: 25px;
      margin-left: -18px;
    }
  }

  /* bang vuong */
  &.ant-table-wrapper {
    & table {
      border-start-start-radius: 0px!important;
      border-start-end-radius: 0px!important;
    }
    & .ant-table-container table>thead>tr:first-child >*:first-child {
      border-start-start-radius: 0px!important;
    }

    & .ant-table-container table>thead>tr:first-child >*:last-child {
      border-start-start-radius: 0px!important;
    }
  } 
`,Z3e=Ay(sTe)`
border-radius: 30px;
color: #1877F2;
font-size: 14px;
line-height: 36px;
`,X3e=({children:t,type:n="Success"})=>$r.jsxs("div",{className:Gt("whitespace-nowrap px-[4px] py-[8px] flex justify-center items-center text-[14px] leading-[21px]",n=="Success"?"bg-[#22c55e14] text-[#22C55E]":"bg-[#ff563014] text-[#FF5630]"),children:["•",t]}),Y3e=({children:t,type:n="Open"})=>$r.jsx("div",{className:Gt("whitespace-nowrap px-2 rounded py-[8px] flex justify-center items-center text-[14px] leading-[21px]",n=="Open"?"bg-[#22c55e14] text-[#22C55E]":"bg-[#919eab14] text-[#919EAB]"),children:t}),J3e=Ay(_w)`
    height: 35px!important;
`;var lZ={exports:{}};(function(t,n){(function(o,s){t.exports=s()})(sI,function(){var o,s,c;function m(d,C){if(!o)o=C;else if(!s)s=C;else{var S="var sharedChunk = {}; ("+o+")(sharedChunk); ("+s+")(sharedChunk);",R={};o(R),c=C(R),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}m(["exports"],function(d){function C(y,f,_,I){return new(_||(_=Promise))(function(k,F){function j(de){try{te(I.next(de))}catch(be){F(be)}}function U(de){try{te(I.throw(de))}catch(be){F(be)}}function te(de){var be;de.done?k(de.value):(be=de.value,be instanceof _?be:new _(function(Ae){Ae(be)})).then(j,U)}te((I=I.apply(y,f||[])).next())})}function S(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}typeof SuppressedError=="function"&&SuppressedError;var R=D;function D(y,f){this.x=y,this.y=f}D.prototype={clone:function(){return new D(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,f){return this.clone()._rotateAround(y,f)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var f=y.x-this.x,_=y.y-this.y;return f*f+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,f){return Math.atan2(this.x*f-this.y*y,this.x*y+this.y*f)},_matMult:function(y){var f=y[2]*this.x+y[3]*this.y;return this.x=y[0]*this.x+y[1]*this.y,this.y=f,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var f=Math.cos(y),_=Math.sin(y),I=_*this.x+f*this.y;return this.x=f*this.x-_*this.y,this.y=I,this},_rotateAround:function(y,f){var _=Math.cos(y),I=Math.sin(y),k=f.y+I*(this.x-f.x)+_*(this.y-f.y);return this.x=f.x+_*(this.x-f.x)-I*(this.y-f.y),this.y=k,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},D.convert=function(y){return y instanceof D?y:Array.isArray(y)?new D(y[0],y[1]):y};var $=S(R),H=Z;function Z(y,f,_,I){this.cx=3*y,this.bx=3*(_-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(I-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=f,this.p2x=_,this.p2y=I}Z.prototype={sampleCurveX:function(y){return((this.ax*y+this.bx)*y+this.cx)*y},sampleCurveY:function(y){return((this.ay*y+this.by)*y+this.cy)*y},sampleCurveDerivativeX:function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},solveCurveX:function(y,f){if(f===void 0&&(f=1e-6),y<0)return 0;if(y>1)return 1;for(var _=y,I=0;I<8;I++){var k=this.sampleCurveX(_)-y;if(Math.abs(k)<f)return _;var F=this.sampleCurveDerivativeX(_);if(Math.abs(F)<1e-6)break;_-=k/F}var j=0,U=1;for(_=y,I=0;I<20&&(k=this.sampleCurveX(_),!(Math.abs(k-y)<f));I++)y>k?j=_:U=_,_=.5*(U-j)+j;return _},solve:function(y,f){return this.sampleCurveY(this.solveCurveX(y,f))}};var X=S(H);let Q,G;function K(){return Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q}function Y(){if(G==null&&(G=!1,K())){const f=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(f){for(let I=0;I<5*5;I++){const k=4*I;f.fillStyle=`rgb(${k},${k+1},${k+2})`,f.fillRect(I%5,Math.floor(I/5),1,1)}const _=f.getImageData(0,0,5,5).data;for(let I=0;I<5*5*4;I++)if(I%4!=3&&_[I]!==I){G=!0;break}}}return G||!1}function re(y,f,_,I){const k=new X(y,f,_,I);return function(F){return k.solve(F)}}const fe=re(.25,.1,.25,1);function me(y,f,_){return Math.min(_,Math.max(f,y))}function pe(y,f,_){const I=_-f,k=((y-f)%I+I)%I+f;return k===f?_:k}function xe(y,...f){for(const _ of f)for(const I in _)y[I]=_[I];return y}let Se=1;function oe(y,f,_){const I={};for(const k in y)I[k]=f.call(_||this,y[k],k,y);return I}function Re(y,f,_){const I={};for(const k in y)f.call(_||this,y[k],k,y)&&(I[k]=y[k]);return I}function Ve(y){return Array.isArray(y)?y.map(Ve):typeof y=="object"&&y?oe(y,Ve):y}const Oe={};function _e(y){Oe[y]||(typeof console<"u"&&console.warn(y),Oe[y]=!0)}function Fe(y,f,_){return(_.y-y.y)*(f.x-y.x)>(f.y-y.y)*(_.x-y.x)}function Le(y){let f=0;for(let _,I,k=0,F=y.length,j=F-1;k<F;j=k++)_=y[k],I=y[j],f+=(I.x-_.x)*(_.y+I.y);return f}function Me(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ce=null;function Ye(y){return typeof ImageBitmap<"u"&&y instanceof ImageBitmap}const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function rt(y,f,_,I,k){return C(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const F=new VideoFrame(y,{timestamp:0});try{const j=F?.format;if(!j||!j.startsWith("BGR")&&!j.startsWith("RGB"))throw new Error(`Unrecognized format ${j}`);const U=j.startsWith("BGR"),te=new Uint8ClampedArray(I*k*4);if(yield F.copyTo(te,function(de,be,Ae,He,ce){const Je=4*Math.max(-be,0),ot=(Math.max(0,Ae)-Ae)*He*4+Je,mt=4*He,wt=Math.max(0,be),qt=Math.max(0,Ae);return{rect:{x:wt,y:qt,width:Math.min(de.width,be+He)-wt,height:Math.min(de.height,Ae+ce)-qt},layout:[{offset:ot,stride:mt}]}}(y,f,_,I,k)),U)for(let de=0;de<te.length;de+=4){const be=te[de];te[de]=te[de+2],te[de+2]=be}return te}finally{F.close()}})}let Qe,St,jt,Ot;const Tt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y){const f=requestAnimationFrame(y);return{cancel:()=>cancelAnimationFrame(f)}},getImageData(y,f=0){return this.getImageCanvasContext(y).getImageData(-f,-f,y.width+2*f,y.height+2*f)},getImageCanvasContext(y){const f=window.document.createElement("canvas"),_=f.getContext("2d",{willReadFrequently:!0});if(!_)throw new Error("failed to create canvas 2d context");return f.width=y.width,f.height=y.height,_.drawImage(y,0,0,y.width,y.height),_},resolveURL:y=>(jt||(jt=document.createElement("a")),jt.href=y,jt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ot==null&&(Ot=matchMedia("(prefers-reduced-motion: reduce)")),Ot.matches)}},ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ct extends Error{constructor(f,_,I,k){super(`AJAXError: ${_} (${f}): ${I}`),this.status=f,this.statusText=_,this.url=I,this.body=k}}const kt=Me()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,zt=y=>ct.REGISTERED_PROTOCOLS[y.substring(0,y.indexOf("://"))];function Nt(y,f){const _=new AbortController,I=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:kt(),signal:_.signal});let k=!1,F=!1;return y.type==="json"&&I.headers.set("Accept","application/json"),F||fetch(I).then(j=>j.ok?(U=>{(y.type==="arrayBuffer"||y.type==="image"?U.arrayBuffer():y.type==="json"?U.json():U.text()).then(te=>{F||(k=!0,f(null,te,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(te=>{F||f(new Error(te.message))})})(j):j.blob().then(U=>f(new Ct(j.status,j.statusText,y.url,U)))).catch(j=>{j.code!==20&&f(new Error(j.message))}),{cancel:()=>{F=!0,k||_.abort()}}}const Rt=function(y,f){if(/:\/\//.test(y.url)&&!/^https?:|^file:/.test(y.url)){if(Me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,f);if(!Me())return(zt(y.url)||Nt)(y,f)}if(!(/^file:/.test(_=y.url)||/^file:/.test(kt())&&!/^\w+:/.test(_))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Nt(y,f);if(Me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,f,void 0,!0)}var _;return function(I,k){const F=new XMLHttpRequest;F.open(I.method||"GET",I.url,!0),I.type!=="arrayBuffer"&&I.type!=="image"||(F.responseType="arraybuffer");for(const j in I.headers)F.setRequestHeader(j,I.headers[j]);return I.type==="json"&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials=I.credentials==="include",F.onerror=()=>{k(new Error(F.statusText))},F.onload=()=>{if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let j=F.response;if(I.type==="json")try{j=JSON.parse(F.response)}catch(U){return k(U)}k(null,j,F.getResponseHeader("Cache-Control"),F.getResponseHeader("Expires"))}else{const j=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});k(new Ct(F.status,F.statusText,I.url,j))}},F.send(I.body),{cancel:()=>F.abort()}}(y,f)},Pt=function(y,f){return Rt(xe(y,{type:"arrayBuffer"}),f)};function Dt(y){if(!y||y.indexOf("://")<=0||y.indexOf("data:image/")===0||y.indexOf("blob:")===0)return!0;const f=new URL(y),_=window.location;return f.protocol===_.protocol&&f.host===_.host}function Ut(y,f,_){_[y]&&_[y].indexOf(f)!==-1||(_[y]=_[y]||[],_[y].push(f))}function sr(y,f,_){if(_&&_[y]){const I=_[y].indexOf(f);I!==-1&&_[y].splice(I,1)}}class vt{constructor(f,_={}){xe(this,_),this.type=f}}class De extends vt{constructor(f,_={}){super("error",xe({error:f},_))}}class ze{on(f,_){return this._listeners=this._listeners||{},Ut(f,_,this._listeners),this}off(f,_){return sr(f,_,this._listeners),sr(f,_,this._oneTimeListeners),this}once(f,_){return _?(this._oneTimeListeners=this._oneTimeListeners||{},Ut(f,_,this._oneTimeListeners),this):new Promise(I=>this.once(f,I))}fire(f,_){typeof f=="string"&&(f=new vt(f,_||{}));const I=f.type;if(this.listens(I)){f.target=this;const k=this._listeners&&this._listeners[I]?this._listeners[I].slice():[];for(const U of k)U.call(this,f);const F=this._oneTimeListeners&&this._oneTimeListeners[I]?this._oneTimeListeners[I].slice():[];for(const U of F)sr(I,U,this._oneTimeListeners),U.call(this,f);const j=this._eventedParent;j&&(xe(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),j.fire(f))}else f instanceof De&&console.error(f.error);return this}listens(f){return this._listeners&&this._listeners[f]&&this._listeners[f].length>0||this._oneTimeListeners&&this._oneTimeListeners[f]&&this._oneTimeListeners[f].length>0||this._eventedParent&&this._eventedParent.listens(f)}setEventedParent(f,_){return this._eventedParent=f,this._eventedParentData=_,this}}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const pt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gt(y,f){const _={};for(const I in y)I!=="ref"&&(_[I]=y[I]);return pt.forEach(I=>{I in f&&(_[I]=f[I])}),_}function $t(y,f){if(Array.isArray(y)){if(!Array.isArray(f)||y.length!==f.length)return!1;for(let _=0;_<y.length;_++)if(!$t(y[_],f[_]))return!1;return!0}if(typeof y=="object"&&y!==null&&f!==null){if(typeof f!="object"||Object.keys(y).length!==Object.keys(f).length)return!1;for(const _ in y)if(!$t(y[_],f[_]))return!1;return!0}return y===f}const It={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mt(y,f,_){_.push({command:It.addSource,args:[y,f[y]]})}function Qt(y,f,_){f.push({command:It.removeSource,args:[y]}),_[y]=!0}function wr(y,f,_,I){Qt(y,_,I),Mt(y,f,_)}function br(y,f,_){let I;for(I in y[_])if(Object.prototype.hasOwnProperty.call(y[_],I)&&I!=="data"&&!$t(y[_][I],f[_][I]))return!1;for(I in f[_])if(Object.prototype.hasOwnProperty.call(f[_],I)&&I!=="data"&&!$t(y[_][I],f[_][I]))return!1;return!0}function tn(y,f,_,I,k,F){let j;for(j in f=f||{},y=y||{})Object.prototype.hasOwnProperty.call(y,j)&&($t(y[j],f[j])||_.push({command:F,args:[I,j,f[j],k]}));for(j in f)Object.prototype.hasOwnProperty.call(f,j)&&!Object.prototype.hasOwnProperty.call(y,j)&&($t(y[j],f[j])||_.push({command:F,args:[I,j,f[j],k]}))}function yr(y){return y.id}function dr(y,f){return y[f.id]=f,y}class Wt{constructor(f,_,I,k){this.message=(f?`${f}: `:"")+I,k&&(this.identifier=k),_!=null&&_.__line__&&(this.line=_.__line__)}}function Wr(y,...f){for(const _ of f)for(const I in _)y[I]=_[I];return y}class Fr extends Error{constructor(f,_){super(_),this.message=_,this.key=f}}class en{constructor(f,_=[]){this.parent=f,this.bindings={};for(const[I,k]of _)this.bindings[I]=k}concat(f){return new en(this,f)}get(f){if(this.bindings[f])return this.bindings[f];if(this.parent)return this.parent.get(f);throw new Error(`${f} not found in scope.`)}has(f){return!!this.bindings[f]||!!this.parent&&this.parent.has(f)}}const Yr={kind:"null"},fr={kind:"number"},Kr={kind:"string"},Br={kind:"boolean"},an={kind:"color"},ni={kind:"object"},Nr={kind:"value"},ii={kind:"collator"},Pe={kind:"formatted"},he={kind:"padding"},ge={kind:"resolvedImage"},Te={kind:"variableAnchorOffsetCollection"};function $e(y,f){return{kind:"array",itemType:y,N:f}}function ke(y){if(y.kind==="array"){const f=ke(y.itemType);return typeof y.N=="number"?`array<${f}, ${y.N}>`:y.itemType.kind==="value"?"array":`array<${f}>`}return y.kind}const Ke=[Yr,fr,Kr,Br,an,Pe,ni,$e(Nr),he,ge,Te];function Ue(y,f){if(f.kind==="error")return null;if(y.kind==="array"){if(f.kind==="array"&&(f.N===0&&f.itemType.kind==="value"||!Ue(y.itemType,f.itemType))&&(typeof y.N!="number"||y.N===f.N))return null}else{if(y.kind===f.kind)return null;if(y.kind==="value"){for(const _ of Ke)if(!Ue(_,f))return null}}return`Expected ${ke(y)} but found ${ke(f)} instead.`}function Ne(y,f){return f.some(_=>_.kind===y.kind)}function et(y,f){return f.some(_=>_==="null"?y===null:_==="array"?Array.isArray(y):_==="object"?y&&!Array.isArray(y)&&typeof y=="object":_===typeof y)}function Et(y,f){return y.kind==="array"&&f.kind==="array"?y.itemType.kind===f.itemType.kind&&typeof y.N=="number":y.kind===f.kind}const Yt=.96422,dt=.82521,ir=4/29,gr=6/29,mr=3*gr*gr,Sr=gr*gr*gr,Gr=Math.PI/180,Rr=180/Math.PI;function Cr(y){return(y%=360)<0&&(y+=360),y}function Lr([y,f,_,I]){let k,F;const j=oi((.2225045*(y=cn(y))+.7168786*(f=cn(f))+.0606169*(_=cn(_)))/1);y===f&&f===_?k=F=j:(k=oi((.4360747*y+.3850649*f+.1430804*_)/Yt),F=oi((.0139322*y+.0971045*f+.7141733*_)/dt));const U=116*j-16;return[U<0?0:U,500*(k-j),200*(j-F),I]}function cn(y){return y<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function oi(y){return y>Sr?Math.pow(y,1/3):y/mr+ir}function Sn([y,f,_,I]){let k=(y+16)/116,F=isNaN(f)?k:k+f/500,j=isNaN(_)?k:k-_/200;return k=1*Li(k),F=Yt*Li(F),j=dt*Li(j),[bi(3.1338561*F-1.6168667*k-.4906146*j),bi(-.9787684*F+1.9161415*k+.033454*j),bi(.0719453*F-.2289914*k+1.4052427*j),I]}function bi(y){return(y=y<=.00304?12.92*y:1.055*Math.pow(y,1/2.4)-.055)<0?0:y>1?1:y}function Li(y){return y>gr?y*y*y:mr*(y-ir)}function no(y){return parseInt(y.padEnd(2,y),16)/255}function ba(y,f){return io(f?y/100:y,0,1)}function io(y,f,_){return Math.min(Math.max(f,y),_)}function ra(y){return!y.some(Number.isNaN)}const fs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Jr{constructor(f,_,I,k=1,F=!0){this.r=f,this.g=_,this.b=I,this.a=k,F||(this.r*=k,this.g*=k,this.b*=k,k||this.overwriteGetter("rgb",[f,_,I,k]))}static parse(f){if(f instanceof Jr)return f;if(typeof f!="string")return;const _=function(I){if((I=I.toLowerCase().trim())==="transparent")return[0,0,0,0];const k=fs[I];if(k){const[j,U,te]=k;return[j/255,U/255,te/255,1]}if(I.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(I)){const j=I.length<6?1:2;let U=1;return[no(I.slice(U,U+=j)),no(I.slice(U,U+=j)),no(I.slice(U,U+=j)),no(I.slice(U,U+j)||"ff")]}if(I.startsWith("rgb")){const j=I.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(j){const[U,te,de,be,Ae,He,ce,Je,ot,mt,wt,qt]=j,Bt=[be||" ",ce||" ",mt].join("");if(Bt==="  "||Bt==="  /"||Bt===",,"||Bt===",,,"){const Kt=[de,He,ot].join(""),cr=Kt==="%%%"?100:Kt===""?255:0;if(cr){const Tr=[io(+te/cr,0,1),io(+Ae/cr,0,1),io(+Je/cr,0,1),wt?ba(+wt,qt):1];if(ra(Tr))return Tr}}return}}const F=I.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(F){const[j,U,te,de,be,Ae,He,ce,Je]=F,ot=[te||" ",be||" ",He].join("");if(ot==="  "||ot==="  /"||ot===",,"||ot===",,,"){const mt=[+U,io(+de,0,100),io(+Ae,0,100),ce?ba(+ce,Je):1];if(ra(mt))return function([wt,qt,Bt,Kt]){function cr(Tr){const sn=(Tr+wt/30)%12,En=qt*Math.min(Bt,1-Bt);return Bt-En*Math.max(-1,Math.min(sn-3,9-sn,1))}return wt=Cr(wt),qt/=100,Bt/=100,[cr(0),cr(8),cr(4),Kt]}(mt)}}}(f);return _?new Jr(..._,!1):void 0}get rgb(){const{r:f,g:_,b:I,a:k}=this,F=k||1/0;return this.overwriteGetter("rgb",[f/F,_/F,I/F,k])}get hcl(){return this.overwriteGetter("hcl",function(f){const[_,I,k,F]=Lr(f),j=Math.sqrt(I*I+k*k);return[Math.round(1e4*j)?Cr(Math.atan2(k,I)*Rr):NaN,j,_,F]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Lr(this.rgb))}overwriteGetter(f,_){return Object.defineProperty(this,f,{value:_}),_}toString(){const[f,_,I,k]=this.rgb;return`rgba(${[f,_,I].map(F=>Math.round(255*F)).join(",")},${k})`}}Jr.black=new Jr(0,0,0,1),Jr.white=new Jr(1,1,1,1),Jr.transparent=new Jr(0,0,0,0),Jr.red=new Jr(1,0,0,1);class di{constructor(f,_,I){this.sensitivity=f?_?"variant":"case":_?"accent":"base",this.locale=I,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(f,_){return this.collator.compare(f,_)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ai{constructor(f,_,I,k,F){this.text=f,this.image=_,this.scale=I,this.fontStack=k,this.textColor=F}}class Ti{constructor(f){this.sections=f}static fromString(f){return new Ti([new Ai(f,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(f=>f.text.length!==0||f.image&&f.image.name.length!==0)}static factory(f){return f instanceof Ti?f:Ti.fromString(f)}toString(){return this.sections.length===0?"":this.sections.map(f=>f.text).join("")}}class Ji{constructor(f){this.values=f.slice()}static parse(f){if(f instanceof Ji)return f;if(typeof f=="number")return new Ji([f,f,f,f]);if(Array.isArray(f)&&!(f.length<1||f.length>4)){for(const _ of f)if(typeof _!="number")return;switch(f.length){case 1:f=[f[0],f[0],f[0],f[0]];break;case 2:f=[f[0],f[1],f[0],f[1]];break;case 3:f=[f[0],f[1],f[2],f[1]]}return new Ji(f)}}toString(){return JSON.stringify(this.values)}}const Xs=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ho{constructor(f){this.values=f.slice()}static parse(f){if(f instanceof Ho)return f;if(Array.isArray(f)&&!(f.length<1)&&f.length%2==0){for(let _=0;_<f.length;_+=2){const I=f[_],k=f[_+1];if(typeof I!="string"||!Xs.has(I)||!Array.isArray(k)||k.length!==2||typeof k[0]!="number"||typeof k[1]!="number")return}return new Ho(f)}}toString(){return JSON.stringify(this.values)}}class ji{constructor(f){this.name=f.name,this.available=f.available}toString(){return this.name}static fromString(f){return f?new ji({name:f,available:!1}):null}}function za(y,f,_,I){return typeof y=="number"&&y>=0&&y<=255&&typeof f=="number"&&f>=0&&f<=255&&typeof _=="number"&&_>=0&&_<=255?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid rgba value [${[y,f,_,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof I=="number"?[y,f,_,I]:[y,f,_]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jn(y){if(y===null||typeof y=="string"||typeof y=="boolean"||typeof y=="number"||y instanceof Jr||y instanceof di||y instanceof Ti||y instanceof Ji||y instanceof Ho||y instanceof ji)return!0;if(Array.isArray(y)){for(const f of y)if(!jn(f))return!1;return!0}if(typeof y=="object"){for(const f in y)if(!jn(y[f]))return!1;return!0}return!1}function jr(y){if(y===null)return Yr;if(typeof y=="string")return Kr;if(typeof y=="boolean")return Br;if(typeof y=="number")return fr;if(y instanceof Jr)return an;if(y instanceof di)return ii;if(y instanceof Ti)return Pe;if(y instanceof Ji)return he;if(y instanceof Ho)return Te;if(y instanceof ji)return ge;if(Array.isArray(y)){const f=y.length;let _;for(const I of y){const k=jr(I);if(_){if(_===k)continue;_=Nr;break}_=k}return $e(_||Nr,f)}return ni}function un(y){const f=typeof y;return y===null?"":f==="string"||f==="number"||f==="boolean"?String(y):y instanceof Jr||y instanceof Ti||y instanceof Ji||y instanceof Ho||y instanceof ji?y.toString():JSON.stringify(y)}class qn{constructor(f,_){this.type=f,this.value=_}static parse(f,_){if(f.length!==2)return _.error(`'literal' expression requires exactly one argument, but found ${f.length-1} instead.`);if(!jn(f[1]))return _.error("invalid value");const I=f[1];let k=jr(I);const F=_.expectedType;return k.kind!=="array"||k.N!==0||!F||F.kind!=="array"||typeof F.N=="number"&&F.N!==0||(k=F),new qn(k,I)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class In{constructor(f){this.name="ExpressionEvaluationError",this.message=f}toJSON(){return this.message}}const Ci={string:Kr,number:fr,boolean:Br,object:ni};class Qr{constructor(f,_){this.type=f,this.args=_}static parse(f,_){if(f.length<2)return _.error("Expected at least one argument.");let I,k=1;const F=f[0];if(F==="array"){let U,te;if(f.length>2){const de=f[1];if(typeof de!="string"||!(de in Ci)||de==="object")return _.error('The item type argument of "array" must be one of string, number, boolean',1);U=Ci[de],k++}else U=Nr;if(f.length>3){if(f[2]!==null&&(typeof f[2]!="number"||f[2]<0||f[2]!==Math.floor(f[2])))return _.error('The length argument to "array" must be a positive integer literal',2);te=f[2],k++}I=$e(U,te)}else{if(!Ci[F])throw new Error(`Types doesn't contain name = ${F}`);I=Ci[F]}const j=[];for(;k<f.length;k++){const U=_.parse(f[k],k,Nr);if(!U)return null;j.push(U)}return new Qr(I,j)}evaluate(f){for(let _=0;_<this.args.length;_++){const I=this.args[_].evaluate(f);if(!Ue(this.type,jr(I)))return I;if(_===this.args.length-1)throw new In(`Expected value to be of type ${ke(this.type)}, but found ${ke(jr(I))} instead.`)}throw new Error}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}const Jn={"to-boolean":Br,"to-color":an,"to-number":fr,"to-string":Kr};class Qi{constructor(f,_){this.type=f,this.args=_}static parse(f,_){if(f.length<2)return _.error("Expected at least one argument.");const I=f[0];if(!Jn[I])throw new Error(`Can't parse ${I} as it is not part of the known types`);if((I==="to-boolean"||I==="to-string")&&f.length!==2)return _.error("Expected one argument.");const k=Jn[I],F=[];for(let j=1;j<f.length;j++){const U=_.parse(f[j],j,Nr);if(!U)return null;F.push(U)}return new Qi(k,F)}evaluate(f){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(f);case"color":{let _,I;for(const k of this.args){if(_=k.evaluate(f),I=null,_ instanceof Jr)return _;if(typeof _=="string"){const F=f.parseColor(_);if(F)return F}else if(Array.isArray(_)&&(I=_.length<3||_.length>4?`Invalid rbga value ${JSON.stringify(_)}: expected an array containing either three or four numeric values.`:za(_[0],_[1],_[2],_[3]),!I))return new Jr(_[0]/255,_[1]/255,_[2]/255,_[3])}throw new In(I||`Could not parse color from value '${typeof _=="string"?_:JSON.stringify(_)}'`)}case"padding":{let _;for(const I of this.args){_=I.evaluate(f);const k=Ji.parse(_);if(k)return k}throw new In(`Could not parse padding from value '${typeof _=="string"?_:JSON.stringify(_)}'`)}case"variableAnchorOffsetCollection":{let _;for(const I of this.args){_=I.evaluate(f);const k=Ho.parse(_);if(k)return k}throw new In(`Could not parse variableAnchorOffsetCollection from value '${typeof _=="string"?_:JSON.stringify(_)}'`)}case"number":{let _=null;for(const I of this.args){if(_=I.evaluate(f),_===null)return 0;const k=Number(_);if(!isNaN(k))return k}throw new In(`Could not convert ${JSON.stringify(_)} to number.`)}case"formatted":return Ti.fromString(un(this.args[0].evaluate(f)));case"resolvedImage":return ji.fromString(un(this.args[0].evaluate(f)));default:return un(this.args[0].evaluate(f))}}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}const Lo=["Unknown","Point","LineString","Polygon"];class Go{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Lo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(f){let _=this._parseColorCache[f];return _||(_=this._parseColorCache[f]=Jr.parse(f)),_}}class Da{constructor(f,_,I=[],k,F=new en,j=[]){this.registry=f,this.path=I,this.key=I.map(U=>`[${U}]`).join(""),this.scope=F,this.errors=j,this.expectedType=k,this._isConstant=_}parse(f,_,I,k,F={}){return _?this.concat(_,I,k)._parse(f,F):this._parse(f,F)}_parse(f,_){function I(k,F,j){return j==="assert"?new Qr(F,[k]):j==="coerce"?new Qi(F,[k]):k}if(f!==null&&typeof f!="string"&&typeof f!="boolean"&&typeof f!="number"||(f=["literal",f]),Array.isArray(f)){if(f.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const k=f[0];if(typeof k!="string")return this.error(`Expression name must be a string, but found ${typeof k} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const F=this.registry[k];if(F){let j=F.parse(f,this);if(!j)return null;if(this.expectedType){const U=this.expectedType,te=j.type;if(U.kind!=="string"&&U.kind!=="number"&&U.kind!=="boolean"&&U.kind!=="object"&&U.kind!=="array"||te.kind!=="value")if(U.kind!=="color"&&U.kind!=="formatted"&&U.kind!=="resolvedImage"||te.kind!=="value"&&te.kind!=="string")if(U.kind!=="padding"||te.kind!=="value"&&te.kind!=="number"&&te.kind!=="array")if(U.kind!=="variableAnchorOffsetCollection"||te.kind!=="value"&&te.kind!=="array"){if(this.checkSubtype(U,te))return null}else j=I(j,U,_.typeAnnotation||"coerce");else j=I(j,U,_.typeAnnotation||"coerce");else j=I(j,U,_.typeAnnotation||"coerce");else j=I(j,U,_.typeAnnotation||"assert")}if(!(j instanceof qn)&&j.type.kind!=="resolvedImage"&&this._isConstant(j)){const U=new Go;try{j=new qn(j.type,j.evaluate(U))}catch(te){return this.error(te.message),null}}return j}return this.error(`Unknown expression "${k}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(f===void 0?"'undefined' value invalid. Use null instead.":typeof f=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof f} instead.`)}concat(f,_,I){const k=typeof f=="number"?this.path.concat(f):this.path,F=I?this.scope.concat(I):this.scope;return new Da(this.registry,this._isConstant,k,_||null,F,this.errors)}error(f,..._){const I=`${this.key}${_.map(k=>`[${k}]`).join("")}`;this.errors.push(new Fr(I,f))}checkSubtype(f,_){const I=Ue(f,_);return I&&this.error(I),I}}class fi{constructor(f,_,I){this.type=ii,this.locale=I,this.caseSensitive=f,this.diacriticSensitive=_}static parse(f,_){if(f.length!==2)return _.error("Expected one argument.");const I=f[1];if(typeof I!="object"||Array.isArray(I))return _.error("Collator options argument must be an object.");const k=_.parse(I["case-sensitive"]!==void 0&&I["case-sensitive"],1,Br);if(!k)return null;const F=_.parse(I["diacritic-sensitive"]!==void 0&&I["diacritic-sensitive"],1,Br);if(!F)return null;let j=null;return I.locale&&(j=_.parse(I.locale,1,Kr),!j)?null:new fi(k,F,j)}evaluate(f){return new di(this.caseSensitive.evaluate(f),this.diacriticSensitive.evaluate(f),this.locale?this.locale.evaluate(f):null)}eachChild(f){f(this.caseSensitive),f(this.diacriticSensitive),this.locale&&f(this.locale)}outputDefined(){return!1}}const gi=8192;function eo(y,f){y[0]=Math.min(y[0],f[0]),y[1]=Math.min(y[1],f[1]),y[2]=Math.max(y[2],f[0]),y[3]=Math.max(y[3],f[1])}function xo(y,f){return!(y[0]<=f[0]||y[2]>=f[2]||y[1]<=f[1]||y[3]>=f[3])}function Po(y,f){const _=(180+y[0])/360,I=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y[1]*Math.PI/360)))/360,k=Math.pow(2,f.z);return[Math.round(_*k*gi),Math.round(I*k*gi)]}function Ha(y,f,_){const I=y[0]-f[0],k=y[1]-f[1],F=y[0]-_[0],j=y[1]-_[1];return I*j-F*k==0&&I*F<=0&&k*j<=0}function Ga(y,f){let _=!1;for(let j=0,U=f.length;j<U;j++){const te=f[j];for(let de=0,be=te.length;de<be-1;de++){if(Ha(y,te[de],te[de+1]))return!1;(k=te[de])[1]>(I=y)[1]!=(F=te[de+1])[1]>I[1]&&I[0]<(F[0]-k[0])*(I[1]-k[1])/(F[1]-k[1])+k[0]&&(_=!_)}}var I,k,F;return _}function qa(y,f){for(let _=0;_<f.length;_++)if(Ga(y,f[_]))return!0;return!1}function zs(y,f,_,I){const k=I[0]-_[0],F=I[1]-_[1],j=(y[0]-_[0])*F-k*(y[1]-_[1]),U=(f[0]-_[0])*F-k*(f[1]-_[1]);return j>0&&U<0||j<0&&U>0}function dl(y,f,_){for(const de of _)for(let be=0;be<de.length-1;++be)if((U=[(j=de[be+1])[0]-(F=de[be])[0],j[1]-F[1]])[0]*(te=[(k=f)[0]-(I=y)[0],k[1]-I[1]])[1]-U[1]*te[0]!=0&&zs(I,k,F,j)&&zs(F,j,I,k))return!0;var I,k,F,j,U,te;return!1}function vr(y,f){for(let _=0;_<y.length;++_)if(!Ga(y[_],f))return!1;for(let _=0;_<y.length-1;++_)if(dl(y[_],y[_+1],f))return!1;return!0}function kn(y,f){for(let _=0;_<f.length;_++)if(vr(y,f[_]))return!0;return!1}function mo(y,f,_){const I=[];for(let k=0;k<y.length;k++){const F=[];for(let j=0;j<y[k].length;j++){const U=Po(y[k][j],_);eo(f,U),F.push(U)}I.push(F)}return I}function Lt(y,f,_){const I=[];for(let k=0;k<y.length;k++){const F=mo(y[k],f,_);I.push(F)}return I}function Zr(y,f,_,I){if(y[0]<_[0]||y[0]>_[2]){const k=.5*I;let F=y[0]-_[0]>k?-I:_[0]-y[0]>k?I:0;F===0&&(F=y[0]-_[2]>k?-I:_[2]-y[0]>k?I:0),y[0]+=F}eo(f,y)}function Cn(y,f,_,I){const k=Math.pow(2,I.z)*gi,F=[I.x*gi,I.y*gi],j=[];for(const U of y)for(const te of U){const de=[te.x+F[0],te.y+F[1]];Zr(de,f,_,k),j.push(de)}return j}function Wn(y,f,_,I){const k=Math.pow(2,I.z)*gi,F=[I.x*gi,I.y*gi],j=[];for(const te of y){const de=[];for(const be of te){const Ae=[be.x+F[0],be.y+F[1]];eo(f,Ae),de.push(Ae)}j.push(de)}if(f[2]-f[0]<=k/2){(U=f)[0]=U[1]=1/0,U[2]=U[3]=-1/0;for(const te of j)for(const de of te)Zr(de,f,_,k)}var U;return j}class ai{constructor(f,_){this.type=Br,this.geojson=f,this.geometries=_}static parse(f,_){if(f.length!==2)return _.error(`'within' expression requires exactly one argument, but found ${f.length-1} instead.`);if(jn(f[1])){const I=f[1];if(I.type==="FeatureCollection")for(let k=0;k<I.features.length;++k){const F=I.features[k].geometry.type;if(F==="Polygon"||F==="MultiPolygon")return new ai(I,I.features[k].geometry)}else if(I.type==="Feature"){const k=I.geometry.type;if(k==="Polygon"||k==="MultiPolygon")return new ai(I,I.geometry)}else if(I.type==="Polygon"||I.type==="MultiPolygon")return new ai(I,I)}return _.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(f){if(f.geometry()!=null&&f.canonicalID()!=null){if(f.geometryType()==="Point")return function(_,I){const k=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],j=_.canonicalID();if(I.type==="Polygon"){const U=mo(I.coordinates,F,j),te=Cn(_.geometry(),k,F,j);if(!xo(k,F))return!1;for(const de of te)if(!Ga(de,U))return!1}if(I.type==="MultiPolygon"){const U=Lt(I.coordinates,F,j),te=Cn(_.geometry(),k,F,j);if(!xo(k,F))return!1;for(const de of te)if(!qa(de,U))return!1}return!0}(f,this.geometries);if(f.geometryType()==="LineString")return function(_,I){const k=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],j=_.canonicalID();if(I.type==="Polygon"){const U=mo(I.coordinates,F,j),te=Wn(_.geometry(),k,F,j);if(!xo(k,F))return!1;for(const de of te)if(!vr(de,U))return!1}if(I.type==="MultiPolygon"){const U=Lt(I.coordinates,F,j),te=Wn(_.geometry(),k,F,j);if(!xo(k,F))return!1;for(const de of te)if(!kn(de,U))return!1}return!0}(f,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class so{constructor(f,_){this.type=_.type,this.name=f,this.boundExpression=_}static parse(f,_){if(f.length!==2||typeof f[1]!="string")return _.error("'var' expression requires exactly one string literal argument.");const I=f[1];return _.scope.has(I)?new so(I,_.scope.get(I)):_.error(`Unknown variable "${I}". Make sure "${I}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(f){return this.boundExpression.evaluate(f)}eachChild(){}outputDefined(){return!1}}class Xi{constructor(f,_,I,k){this.name=f,this.type=_,this._evaluate=I,this.args=k}evaluate(f){return this._evaluate(f,this.args)}eachChild(f){this.args.forEach(f)}outputDefined(){return!1}static parse(f,_){const I=f[0],k=Xi.definitions[I];if(!k)return _.error(`Unknown expression "${I}". If you wanted a literal array, use ["literal", [...]].`,0);const F=Array.isArray(k)?k[0]:k.type,j=Array.isArray(k)?[[k[1],k[2]]]:k.overloads,U=j.filter(([de])=>!Array.isArray(de)||de.length===f.length-1);let te=null;for(const[de,be]of U){te=new Da(_.registry,as,_.path,null,_.scope);const Ae=[];let He=!1;for(let ce=1;ce<f.length;ce++){const Je=f[ce],ot=Array.isArray(de)?de[ce-1]:de.type,mt=te.parse(Je,1+Ae.length,ot);if(!mt){He=!0;break}Ae.push(mt)}if(!He)if(Array.isArray(de)&&de.length!==Ae.length)te.error(`Expected ${de.length} arguments, but found ${Ae.length} instead.`);else{for(let ce=0;ce<Ae.length;ce++){const Je=Array.isArray(de)?de[ce]:de.type,ot=Ae[ce];te.concat(ce+1).checkSubtype(Je,ot.type)}if(te.errors.length===0)return new Xi(I,F,be,Ae)}}if(U.length===1)_.errors.push(...te.errors);else{const de=(U.length?U:j).map(([Ae])=>{return He=Ae,Array.isArray(He)?`(${He.map(ke).join(", ")})`:`(${ke(He.type)}...)`;var He}).join(" | "),be=[];for(let Ae=1;Ae<f.length;Ae++){const He=_.parse(f[Ae],1+be.length);if(!He)return null;be.push(ke(He.type))}_.error(`Expected arguments of type ${de}, but found (${be.join(", ")}) instead.`)}return null}static register(f,_){Xi.definitions=_;for(const I in _)f[I]=Xi}}function as(y){if(y instanceof so)return as(y.boundExpression);if(y instanceof Xi&&y.name==="error"||y instanceof fi||y instanceof ai)return!1;const f=y instanceof Qi||y instanceof Qr;let _=!0;return y.eachChild(I=>{_=f?_&&as(I):_&&I instanceof qn}),!!_&&pc(y)&&Ys(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function pc(y){if(y instanceof Xi&&(y.name==="get"&&y.args.length===1||y.name==="feature-state"||y.name==="has"&&y.args.length===1||y.name==="properties"||y.name==="geometry-type"||y.name==="id"||/^filter-/.test(y.name))||y instanceof ai)return!1;let f=!0;return y.eachChild(_=>{f&&!pc(_)&&(f=!1)}),f}function Eu(y){if(y instanceof Xi&&y.name==="feature-state")return!1;let f=!0;return y.eachChild(_=>{f&&!Eu(_)&&(f=!1)}),f}function Ys(y,f){if(y instanceof Xi&&f.indexOf(y.name)>=0)return!1;let _=!0;return y.eachChild(I=>{_&&!Ys(I,f)&&(_=!1)}),_}function Vr(y,f){const _=y.length-1;let I,k,F=0,j=_,U=0;for(;F<=j;)if(U=Math.floor((F+j)/2),I=y[U],k=y[U+1],I<=f){if(U===_||f<k)return U;F=U+1}else{if(!(I>f))throw new In("Input is not a number.");j=U-1}return 0}class si{constructor(f,_,I){this.type=f,this.input=_,this.labels=[],this.outputs=[];for(const[k,F]of I)this.labels.push(k),this.outputs.push(F)}static parse(f,_){if(f.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if((f.length-1)%2!=0)return _.error("Expected an even number of arguments.");const I=_.parse(f[1],1,fr);if(!I)return null;const k=[];let F=null;_.expectedType&&_.expectedType.kind!=="value"&&(F=_.expectedType);for(let j=1;j<f.length;j+=2){const U=j===1?-1/0:f[j],te=f[j+1],de=j,be=j+1;if(typeof U!="number")return _.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',de);if(k.length&&k[k.length-1][0]>=U)return _.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',de);const Ae=_.parse(te,be,F);if(!Ae)return null;F=F||Ae.type,k.push([U,Ae])}return new si(F,I,k)}evaluate(f){const _=this.labels,I=this.outputs;if(_.length===1)return I[0].evaluate(f);const k=this.input.evaluate(f);if(k<=_[0])return I[0].evaluate(f);const F=_.length;return k>=_[F-1]?I[F-1].evaluate(f):I[Vr(_,k)].evaluate(f)}eachChild(f){f(this.input);for(const _ of this.outputs)f(_)}outputDefined(){return this.outputs.every(f=>f.outputDefined())}}function vn(y,f,_){return y+_*(f-y)}function Ds(y,f,_){return y.map((I,k)=>vn(I,f[k],_))}const ss={number:vn,color:function(y,f,_,I="rgb"){switch(I){case"rgb":{const[k,F,j,U]=Ds(y.rgb,f.rgb,_);return new Jr(k,F,j,U,!1)}case"hcl":{const[k,F,j,U]=y.hcl,[te,de,be,Ae]=f.hcl;let He,ce;if(isNaN(k)||isNaN(te))isNaN(k)?isNaN(te)?He=NaN:(He=te,j!==1&&j!==0||(ce=de)):(He=k,be!==1&&be!==0||(ce=F));else{let qt=te-k;te>k&&qt>180?qt-=360:te<k&&k-te>180&&(qt+=360),He=k+_*qt}const[Je,ot,mt,wt]=function([qt,Bt,Kt,cr]){return qt=isNaN(qt)?0:qt*Gr,Sn([Kt,Math.cos(qt)*Bt,Math.sin(qt)*Bt,cr])}([He,ce??vn(F,de,_),vn(j,be,_),vn(U,Ae,_)]);return new Jr(Je,ot,mt,wt,!1)}case"lab":{const[k,F,j,U]=Sn(Ds(y.lab,f.lab,_));return new Jr(k,F,j,U,!1)}}},array:Ds,padding:function(y,f,_){return new Ji(Ds(y.values,f.values,_))},variableAnchorOffsetCollection:function(y,f,_){const I=y.values,k=f.values;if(I.length!==k.length)throw new In(`Cannot interpolate values of different length. from: ${y.toString()}, to: ${f.toString()}`);const F=[];for(let j=0;j<I.length;j+=2){if(I[j]!==k[j])throw new In(`Cannot interpolate values containing mismatched anchors. from[${j}]: ${I[j]}, to[${j}]: ${k[j]}`);F.push(I[j]);const[U,te]=I[j+1],[de,be]=k[j+1];F.push([vn(U,de,_),vn(te,be,_)])}return new Ho(F)}};class Kn{constructor(f,_,I,k,F){this.type=f,this.operator=_,this.interpolation=I,this.input=k,this.labels=[],this.outputs=[];for(const[j,U]of F)this.labels.push(j),this.outputs.push(U)}static interpolationFactor(f,_,I,k){let F=0;if(f.name==="exponential")F=Wh(_,f.base,I,k);else if(f.name==="linear")F=Wh(_,1,I,k);else if(f.name==="cubic-bezier"){const j=f.controlPoints;F=new X(j[0],j[1],j[2],j[3]).solve(Wh(_,1,I,k))}return F}static parse(f,_){let[I,k,F,...j]=f;if(!Array.isArray(k)||k.length===0)return _.error("Expected an interpolation type expression.",1);if(k[0]==="linear")k={name:"linear"};else if(k[0]==="exponential"){const de=k[1];if(typeof de!="number")return _.error("Exponential interpolation requires a numeric base.",1,1);k={name:"exponential",base:de}}else{if(k[0]!=="cubic-bezier")return _.error(`Unknown interpolation type ${String(k[0])}`,1,0);{const de=k.slice(1);if(de.length!==4||de.some(be=>typeof be!="number"||be<0||be>1))return _.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);k={name:"cubic-bezier",controlPoints:de}}}if(f.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if((f.length-1)%2!=0)return _.error("Expected an even number of arguments.");if(F=_.parse(F,2,fr),!F)return null;const U=[];let te=null;I==="interpolate-hcl"||I==="interpolate-lab"?te=an:_.expectedType&&_.expectedType.kind!=="value"&&(te=_.expectedType);for(let de=0;de<j.length;de+=2){const be=j[de],Ae=j[de+1],He=de+3,ce=de+4;if(typeof be!="number")return _.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',He);if(U.length&&U[U.length-1][0]>=be)return _.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',He);const Je=_.parse(Ae,ce,te);if(!Je)return null;te=te||Je.type,U.push([be,Je])}return Et(te,fr)||Et(te,an)||Et(te,he)||Et(te,Te)||Et(te,$e(fr))?new Kn(te,I,k,F,U):_.error(`Type ${ke(te)} is not interpolatable.`)}evaluate(f){const _=this.labels,I=this.outputs;if(_.length===1)return I[0].evaluate(f);const k=this.input.evaluate(f);if(k<=_[0])return I[0].evaluate(f);const F=_.length;if(k>=_[F-1])return I[F-1].evaluate(f);const j=Vr(_,k),U=Kn.interpolationFactor(this.interpolation,k,_[j],_[j+1]),te=I[j].evaluate(f),de=I[j+1].evaluate(f);switch(this.operator){case"interpolate":return ss[this.type.kind](te,de,U);case"interpolate-hcl":return ss.color(te,de,U,"hcl");case"interpolate-lab":return ss.color(te,de,U,"lab")}}eachChild(f){f(this.input);for(const _ of this.outputs)f(_)}outputDefined(){return this.outputs.every(f=>f.outputDefined())}}function Wh(y,f,_,I){const k=I-_,F=y-_;return k===0?0:f===1?F/k:(Math.pow(f,F)-1)/(Math.pow(f,k)-1)}class Tu{constructor(f,_){this.type=f,this.args=_}static parse(f,_){if(f.length<2)return _.error("Expectected at least one argument.");let I=null;const k=_.expectedType;k&&k.kind!=="value"&&(I=k);const F=[];for(const U of f.slice(1)){const te=_.parse(U,1+F.length,I,void 0,{typeAnnotation:"omit"});if(!te)return null;I=I||te.type,F.push(te)}if(!I)throw new Error("No output type");const j=k&&F.some(U=>Ue(k,U.type));return new Tu(j?Nr:I,F)}evaluate(f){let _,I=null,k=0;for(const F of this.args)if(k++,I=F.evaluate(f),I&&I instanceof ji&&!I.available&&(_||(_=I.name),I=null,k===this.args.length&&(I=_)),I!==null)break;return I}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}class Iu{constructor(f,_){this.type=_.type,this.bindings=[].concat(f),this.result=_}evaluate(f){return this.result.evaluate(f)}eachChild(f){for(const _ of this.bindings)f(_[1]);f(this.result)}static parse(f,_){if(f.length<4)return _.error(`Expected at least 3 arguments, but found ${f.length-1} instead.`);const I=[];for(let F=1;F<f.length-1;F+=2){const j=f[F];if(typeof j!="string")return _.error(`Expected string, but found ${typeof j} instead.`,F);if(/[^a-zA-Z0-9_]/.test(j))return _.error("Variable names must contain only alphanumeric characters or '_'.",F);const U=_.parse(f[F+1],F+1);if(!U)return null;I.push([j,U])}const k=_.parse(f[f.length-1],f.length-1,_.expectedType,I);return k?new Iu(I,k):null}outputDefined(){return this.result.outputDefined()}}class Ss{constructor(f,_,I){this.type=f,this.index=_,this.input=I}static parse(f,_){if(f.length!==3)return _.error(`Expected 2 arguments, but found ${f.length-1} instead.`);const I=_.parse(f[1],1,fr),k=_.parse(f[2],2,$e(_.expectedType||Nr));return I&&k?new Ss(k.type.itemType,I,k):null}evaluate(f){const _=this.index.evaluate(f),I=this.input.evaluate(f);if(_<0)throw new In(`Array index out of bounds: ${_} < 0.`);if(_>=I.length)throw new In(`Array index out of bounds: ${_} > ${I.length-1}.`);if(_!==Math.floor(_))throw new In(`Array index must be an integer, but found ${_} instead.`);return I[_]}eachChild(f){f(this.index),f(this.input)}outputDefined(){return!1}}class qo{constructor(f,_){this.type=Br,this.needle=f,this.haystack=_}static parse(f,_){if(f.length!==3)return _.error(`Expected 2 arguments, but found ${f.length-1} instead.`);const I=_.parse(f[1],1,Nr),k=_.parse(f[2],2,Nr);return I&&k?Ne(I.type,[Br,Kr,fr,Yr,Nr])?new qo(I,k):_.error(`Expected first argument to be of type boolean, string, number or null, but found ${ke(I.type)} instead`):null}evaluate(f){const _=this.needle.evaluate(f),I=this.haystack.evaluate(f);if(!I)return!1;if(!et(_,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${ke(jr(_))} instead.`);if(!et(I,["string","array"]))throw new In(`Expected second argument to be of type array or string, but found ${ke(jr(I))} instead.`);return I.indexOf(_)>=0}eachChild(f){f(this.needle),f(this.haystack)}outputDefined(){return!0}}class Yf{constructor(f,_,I){this.type=fr,this.needle=f,this.haystack=_,this.fromIndex=I}static parse(f,_){if(f.length<=2||f.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${f.length-1} instead.`);const I=_.parse(f[1],1,Nr),k=_.parse(f[2],2,Nr);if(!I||!k)return null;if(!Ne(I.type,[Br,Kr,fr,Yr,Nr]))return _.error(`Expected first argument to be of type boolean, string, number or null, but found ${ke(I.type)} instead`);if(f.length===4){const F=_.parse(f[3],3,fr);return F?new Yf(I,k,F):null}return new Yf(I,k)}evaluate(f){const _=this.needle.evaluate(f),I=this.haystack.evaluate(f);if(!et(_,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${ke(jr(_))} instead.`);if(!et(I,["string","array"]))throw new In(`Expected second argument to be of type array or string, but found ${ke(jr(I))} instead.`);if(this.fromIndex){const k=this.fromIndex.evaluate(f);return I.indexOf(_,k)}return I.indexOf(_)}eachChild(f){f(this.needle),f(this.haystack),this.fromIndex&&f(this.fromIndex)}outputDefined(){return!1}}class ih{constructor(f,_,I,k,F,j){this.inputType=f,this.type=_,this.input=I,this.cases=k,this.outputs=F,this.otherwise=j}static parse(f,_){if(f.length<5)return _.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if(f.length%2!=1)return _.error("Expected an even number of arguments.");let I,k;_.expectedType&&_.expectedType.kind!=="value"&&(k=_.expectedType);const F={},j=[];for(let de=2;de<f.length-1;de+=2){let be=f[de];const Ae=f[de+1];Array.isArray(be)||(be=[be]);const He=_.concat(de);if(be.length===0)return He.error("Expected at least one branch label.");for(const Je of be){if(typeof Je!="number"&&typeof Je!="string")return He.error("Branch labels must be numbers or strings.");if(typeof Je=="number"&&Math.abs(Je)>Number.MAX_SAFE_INTEGER)return He.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Je=="number"&&Math.floor(Je)!==Je)return He.error("Numeric branch labels must be integer values.");if(I){if(He.checkSubtype(I,jr(Je)))return null}else I=jr(Je);if(F[String(Je)]!==void 0)return He.error("Branch labels must be unique.");F[String(Je)]=j.length}const ce=_.parse(Ae,de,k);if(!ce)return null;k=k||ce.type,j.push(ce)}const U=_.parse(f[1],1,Nr);if(!U)return null;const te=_.parse(f[f.length-1],f.length-1,k);return te?U.type.kind!=="value"&&_.concat(1).checkSubtype(I,U.type)?null:new ih(I,k,U,F,j,te):null}evaluate(f){const _=this.input.evaluate(f);return(jr(_)===this.inputType&&this.outputs[this.cases[_]]||this.otherwise).evaluate(f)}eachChild(f){f(this.input),this.outputs.forEach(f),f(this.otherwise)}outputDefined(){return this.outputs.every(f=>f.outputDefined())&&this.otherwise.outputDefined()}}class Gd{constructor(f,_,I){this.type=f,this.branches=_,this.otherwise=I}static parse(f,_){if(f.length<4)return _.error(`Expected at least 3 arguments, but found only ${f.length-1}.`);if(f.length%2!=0)return _.error("Expected an odd number of arguments.");let I;_.expectedType&&_.expectedType.kind!=="value"&&(I=_.expectedType);const k=[];for(let j=1;j<f.length-1;j+=2){const U=_.parse(f[j],j,Br);if(!U)return null;const te=_.parse(f[j+1],j+1,I);if(!te)return null;k.push([U,te]),I=I||te.type}const F=_.parse(f[f.length-1],f.length-1,I);if(!F)return null;if(!I)throw new Error("Can't infer output type");return new Gd(I,k,F)}evaluate(f){for(const[_,I]of this.branches)if(_.evaluate(f))return I.evaluate(f);return this.otherwise.evaluate(f)}eachChild(f){for(const[_,I]of this.branches)f(_),f(I);f(this.otherwise)}outputDefined(){return this.branches.every(([f,_])=>_.outputDefined())&&this.otherwise.outputDefined()}}class Mu{constructor(f,_,I,k){this.type=f,this.input=_,this.beginIndex=I,this.endIndex=k}static parse(f,_){if(f.length<=2||f.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${f.length-1} instead.`);const I=_.parse(f[1],1,Nr),k=_.parse(f[2],2,fr);if(!I||!k)return null;if(!Ne(I.type,[$e(Nr),Kr,Nr]))return _.error(`Expected first argument to be of type array or string, but found ${ke(I.type)} instead`);if(f.length===4){const F=_.parse(f[3],3,fr);return F?new Mu(I.type,I,k,F):null}return new Mu(I.type,I,k)}evaluate(f){const _=this.input.evaluate(f),I=this.beginIndex.evaluate(f);if(!et(_,["string","array"]))throw new In(`Expected first argument to be of type array or string, but found ${ke(jr(_))} instead.`);if(this.endIndex){const k=this.endIndex.evaluate(f);return _.slice(I,k)}return _.slice(I)}eachChild(f){f(this.input),f(this.beginIndex),this.endIndex&&f(this.endIndex)}outputDefined(){return!1}}function Jf(y,f){return y==="=="||y==="!="?f.kind==="boolean"||f.kind==="string"||f.kind==="number"||f.kind==="null"||f.kind==="value":f.kind==="string"||f.kind==="number"||f.kind==="value"}function Wm(y,f,_,I){return I.compare(f,_)===0}function jc(y,f,_){const I=y!=="=="&&y!=="!=";return class cZ{constructor(F,j,U){this.type=Br,this.lhs=F,this.rhs=j,this.collator=U,this.hasUntypedArgument=F.type.kind==="value"||j.type.kind==="value"}static parse(F,j){if(F.length!==3&&F.length!==4)return j.error("Expected two or three arguments.");const U=F[0];let te=j.parse(F[1],1,Nr);if(!te)return null;if(!Jf(U,te.type))return j.concat(1).error(`"${U}" comparisons are not supported for type '${ke(te.type)}'.`);let de=j.parse(F[2],2,Nr);if(!de)return null;if(!Jf(U,de.type))return j.concat(2).error(`"${U}" comparisons are not supported for type '${ke(de.type)}'.`);if(te.type.kind!==de.type.kind&&te.type.kind!=="value"&&de.type.kind!=="value")return j.error(`Cannot compare types '${ke(te.type)}' and '${ke(de.type)}'.`);I&&(te.type.kind==="value"&&de.type.kind!=="value"?te=new Qr(de.type,[te]):te.type.kind!=="value"&&de.type.kind==="value"&&(de=new Qr(te.type,[de])));let be=null;if(F.length===4){if(te.type.kind!=="string"&&de.type.kind!=="string"&&te.type.kind!=="value"&&de.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(be=j.parse(F[3],3,ii),!be)return null}return new cZ(te,de,be)}evaluate(F){const j=this.lhs.evaluate(F),U=this.rhs.evaluate(F);if(I&&this.hasUntypedArgument){const te=jr(j),de=jr(U);if(te.kind!==de.kind||te.kind!=="string"&&te.kind!=="number")throw new In(`Expected arguments for "${y}" to be (string, string) or (number, number), but found (${te.kind}, ${de.kind}) instead.`)}if(this.collator&&!I&&this.hasUntypedArgument){const te=jr(j),de=jr(U);if(te.kind!=="string"||de.kind!=="string")return f(F,j,U)}return this.collator?_(F,j,U,this.collator.evaluate(F)):f(F,j,U)}eachChild(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)}outputDefined(){return!0}}}const Km=jc("==",function(y,f,_){return f===_},Wm),Qf=jc("!=",function(y,f,_){return f!==_},function(y,f,_,I){return!Wm(0,f,_,I)}),Zm=jc("<",function(y,f,_){return f<_},function(y,f,_,I){return I.compare(f,_)<0}),Js=jc(">",function(y,f,_){return f>_},function(y,f,_,I){return I.compare(f,_)>0}),Qn=jc("<=",function(y,f,_){return f<=_},function(y,f,_,I){return I.compare(f,_)<=0}),Xm=jc(">=",function(y,f,_){return f>=_},function(y,f,_,I){return I.compare(f,_)>=0});class qd{constructor(f,_,I,k,F){this.type=Kr,this.number=f,this.locale=_,this.currency=I,this.minFractionDigits=k,this.maxFractionDigits=F}static parse(f,_){if(f.length!==3)return _.error("Expected two arguments.");const I=_.parse(f[1],1,fr);if(!I)return null;const k=f[2];if(typeof k!="object"||Array.isArray(k))return _.error("NumberFormat options argument must be an object.");let F=null;if(k.locale&&(F=_.parse(k.locale,1,Kr),!F))return null;let j=null;if(k.currency&&(j=_.parse(k.currency,1,Kr),!j))return null;let U=null;if(k["min-fraction-digits"]&&(U=_.parse(k["min-fraction-digits"],1,fr),!U))return null;let te=null;return k["max-fraction-digits"]&&(te=_.parse(k["max-fraction-digits"],1,fr),!te)?null:new qd(I,F,j,U,te)}evaluate(f){return new Intl.NumberFormat(this.locale?this.locale.evaluate(f):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(f):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(f):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(f):void 0}).format(this.number.evaluate(f))}eachChild(f){f(this.number),this.locale&&f(this.locale),this.currency&&f(this.currency),this.minFractionDigits&&f(this.minFractionDigits),this.maxFractionDigits&&f(this.maxFractionDigits)}outputDefined(){return!1}}class ps{constructor(f){this.type=Pe,this.sections=f}static parse(f,_){if(f.length<2)return _.error("Expected at least one argument.");const I=f[1];if(!Array.isArray(I)&&typeof I=="object")return _.error("First argument must be an image or text section.");const k=[];let F=!1;for(let j=1;j<=f.length-1;++j){const U=f[j];if(F&&typeof U=="object"&&!Array.isArray(U)){F=!1;let te=null;if(U["font-scale"]&&(te=_.parse(U["font-scale"],1,fr),!te))return null;let de=null;if(U["text-font"]&&(de=_.parse(U["text-font"],1,$e(Kr)),!de))return null;let be=null;if(U["text-color"]&&(be=_.parse(U["text-color"],1,an),!be))return null;const Ae=k[k.length-1];Ae.scale=te,Ae.font=de,Ae.textColor=be}else{const te=_.parse(f[j],1,Nr);if(!te)return null;const de=te.type.kind;if(de!=="string"&&de!=="value"&&de!=="null"&&de!=="resolvedImage")return _.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,k.push({content:te,scale:null,font:null,textColor:null})}}return new ps(k)}evaluate(f){return new Ti(this.sections.map(_=>{const I=_.content.evaluate(f);return jr(I)===ge?new Ai("",I,null,null,null):new Ai(un(I),null,_.scale?_.scale.evaluate(f):null,_.font?_.font.evaluate(f).join(","):null,_.textColor?_.textColor.evaluate(f):null)}))}eachChild(f){for(const _ of this.sections)f(_.content),_.scale&&f(_.scale),_.font&&f(_.font),_.textColor&&f(_.textColor)}outputDefined(){return!1}}class Qs{constructor(f){this.type=ge,this.input=f}static parse(f,_){if(f.length!==2)return _.error("Expected two arguments.");const I=_.parse(f[1],1,Kr);return I?new Qs(I):_.error("No image name provided.")}evaluate(f){const _=this.input.evaluate(f),I=ji.fromString(_);return I&&f.availableImages&&(I.available=f.availableImages.indexOf(_)>-1),I}eachChild(f){f(this.input)}outputDefined(){return!1}}class ep{constructor(f){this.type=fr,this.input=f}static parse(f,_){if(f.length!==2)return _.error(`Expected 1 argument, but found ${f.length-1} instead.`);const I=_.parse(f[1],1);return I?I.type.kind!=="array"&&I.type.kind!=="string"&&I.type.kind!=="value"?_.error(`Expected argument of type string or array, but found ${ke(I.type)} instead.`):new ep(I):null}evaluate(f){const _=this.input.evaluate(f);if(typeof _=="string"||Array.isArray(_))return _.length;throw new In(`Expected value to be of type string or array, but found ${ke(jr(_))} instead.`)}eachChild(f){f(this.input)}outputDefined(){return!1}}const Wl={"==":Km,"!=":Qf,">":Js,"<":Zm,">=":Xm,"<=":Qn,array:Qr,at:Ss,boolean:Qr,case:Gd,coalesce:Tu,collator:fi,format:ps,image:Qs,in:qo,"index-of":Yf,interpolate:Kn,"interpolate-hcl":Kn,"interpolate-lab":Kn,length:ep,let:Iu,literal:qn,match:ih,number:Qr,"number-format":qd,object:Qr,slice:Mu,step:si,string:Qr,"to-boolean":Qi,"to-color":Qi,"to-number":Qi,"to-string":Qi,var:so,within:ai};function fa(y,[f,_,I,k]){f=f.evaluate(y),_=_.evaluate(y),I=I.evaluate(y);const F=k?k.evaluate(y):1,j=za(f,_,I,F);if(j)throw new In(j);return new Jr(f/255,_/255,I/255,F,!1)}function Kh(y,f){return y in f}function Wd(y,f){const _=f[y];return _===void 0?null:_}function Kl(y){return{type:y}}function wa(y){return{result:"success",value:y}}function mc(y){return{result:"error",value:y}}function Pu(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function gc(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function oh(y){return!!y.expression&&y.expression.interpolated}function Ui(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function Ln(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function A0(y){return y}function $i(y,f){const _=f.type==="color",I=y.stops&&typeof y.stops[0][0]=="object",k=I||!(I||y.property!==void 0),F=y.type||(oh(f)?"exponential":"interval");if(_||f.type==="padding"){const be=_?Jr.parse:Ji.parse;(y=Wr({},y)).stops&&(y.stops=y.stops.map(Ae=>[Ae[0],be(Ae[1])])),y.default=be(y.default?y.default:f.default)}if(y.colorSpace&&(j=y.colorSpace)!=="rgb"&&j!=="hcl"&&j!=="lab")throw new Error(`Unknown color space: "${y.colorSpace}"`);var j;let U,te,de;if(F==="exponential")U=yc;else if(F==="interval")U=Wo;else if(F==="categorical"){U=na,te=Object.create(null);for(const be of y.stops)te[be[0]]=be[1];de=typeof y.stops[0][0]}else{if(F!=="identity")throw new Error(`Unknown function type "${F}"`);U=Zl}if(I){const be={},Ae=[];for(let Je=0;Je<y.stops.length;Je++){const ot=y.stops[Je],mt=ot[0].zoom;be[mt]===void 0&&(be[mt]={zoom:mt,type:y.type,property:y.property,default:y.default,stops:[]},Ae.push(mt)),be[mt].stops.push([ot[0].value,ot[1]])}const He=[];for(const Je of Ae)He.push([be[Je].zoom,$i(be[Je],f)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:Kn.interpolationFactor.bind(void 0,ce),zoomStops:He.map(Je=>Je[0]),evaluate:({zoom:Je},ot)=>yc({stops:He,base:y.base},f,Je).evaluate(Je,ot)}}if(k){const be=F==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:be,interpolationFactor:Kn.interpolationFactor.bind(void 0,be),zoomStops:y.stops.map(Ae=>Ae[0]),evaluate:({zoom:Ae})=>U(y,f,Ae,te,de)}}return{kind:"source",evaluate(be,Ae){const He=Ae&&Ae.properties?Ae.properties[y.property]:void 0;return He===void 0?fl(y.default,f.default):U(y,f,He,te,de)}}}function fl(y,f,_){return y!==void 0?y:f!==void 0?f:_!==void 0?_:void 0}function na(y,f,_,I,k){return fl(typeof _===k?I[_]:void 0,y.default,f.default)}function Wo(y,f,_){if(Ui(_)!=="number")return fl(y.default,f.default);const I=y.stops.length;if(I===1||_<=y.stops[0][0])return y.stops[0][1];if(_>=y.stops[I-1][0])return y.stops[I-1][1];const k=Vr(y.stops.map(F=>F[0]),_);return y.stops[k][1]}function yc(y,f,_){const I=y.base!==void 0?y.base:1;if(Ui(_)!=="number")return fl(y.default,f.default);const k=y.stops.length;if(k===1||_<=y.stops[0][0])return y.stops[0][1];if(_>=y.stops[k-1][0])return y.stops[k-1][1];const F=Vr(y.stops.map(be=>be[0]),_),j=function(be,Ae,He,ce){const Je=ce-He,ot=be-He;return Je===0?0:Ae===1?ot/Je:(Math.pow(Ae,ot)-1)/(Math.pow(Ae,Je)-1)}(_,I,y.stops[F][0],y.stops[F+1][0]),U=y.stops[F][1],te=y.stops[F+1][1],de=ss[f.type]||A0;return typeof U.evaluate=="function"?{evaluate(...be){const Ae=U.evaluate.apply(void 0,be),He=te.evaluate.apply(void 0,be);if(Ae!==void 0&&He!==void 0)return de(Ae,He,j,y.colorSpace)}}:de(U,te,j,y.colorSpace)}function Zl(y,f,_){switch(f.type){case"color":_=Jr.parse(_);break;case"formatted":_=Ti.fromString(_.toString());break;case"resolvedImage":_=ji.fromString(_.toString());break;case"padding":_=Ji.parse(_);break;default:Ui(_)===f.type||f.type==="enum"&&f.values[_]||(_=void 0)}return fl(_,y.default,f.default)}Xi.register(Wl,{error:[{kind:"error"},[Kr],(y,[f])=>{throw new In(f.evaluate(y))}],typeof:[Kr,[Nr],(y,[f])=>ke(jr(f.evaluate(y)))],"to-rgba":[$e(fr,4),[an],(y,[f])=>{const[_,I,k,F]=f.evaluate(y).rgb;return[255*_,255*I,255*k,F]}],rgb:[an,[fr,fr,fr],fa],rgba:[an,[fr,fr,fr,fr],fa],has:{type:Br,overloads:[[[Kr],(y,[f])=>Kh(f.evaluate(y),y.properties())],[[Kr,ni],(y,[f,_])=>Kh(f.evaluate(y),_.evaluate(y))]]},get:{type:Nr,overloads:[[[Kr],(y,[f])=>Wd(f.evaluate(y),y.properties())],[[Kr,ni],(y,[f,_])=>Wd(f.evaluate(y),_.evaluate(y))]]},"feature-state":[Nr,[Kr],(y,[f])=>Wd(f.evaluate(y),y.featureState||{})],properties:[ni,[],y=>y.properties()],"geometry-type":[Kr,[],y=>y.geometryType()],id:[Nr,[],y=>y.id()],zoom:[fr,[],y=>y.globals.zoom],"heatmap-density":[fr,[],y=>y.globals.heatmapDensity||0],"line-progress":[fr,[],y=>y.globals.lineProgress||0],accumulated:[Nr,[],y=>y.globals.accumulated===void 0?null:y.globals.accumulated],"+":[fr,Kl(fr),(y,f)=>{let _=0;for(const I of f)_+=I.evaluate(y);return _}],"*":[fr,Kl(fr),(y,f)=>{let _=1;for(const I of f)_*=I.evaluate(y);return _}],"-":{type:fr,overloads:[[[fr,fr],(y,[f,_])=>f.evaluate(y)-_.evaluate(y)],[[fr],(y,[f])=>-f.evaluate(y)]]},"/":[fr,[fr,fr],(y,[f,_])=>f.evaluate(y)/_.evaluate(y)],"%":[fr,[fr,fr],(y,[f,_])=>f.evaluate(y)%_.evaluate(y)],ln2:[fr,[],()=>Math.LN2],pi:[fr,[],()=>Math.PI],e:[fr,[],()=>Math.E],"^":[fr,[fr,fr],(y,[f,_])=>Math.pow(f.evaluate(y),_.evaluate(y))],sqrt:[fr,[fr],(y,[f])=>Math.sqrt(f.evaluate(y))],log10:[fr,[fr],(y,[f])=>Math.log(f.evaluate(y))/Math.LN10],ln:[fr,[fr],(y,[f])=>Math.log(f.evaluate(y))],log2:[fr,[fr],(y,[f])=>Math.log(f.evaluate(y))/Math.LN2],sin:[fr,[fr],(y,[f])=>Math.sin(f.evaluate(y))],cos:[fr,[fr],(y,[f])=>Math.cos(f.evaluate(y))],tan:[fr,[fr],(y,[f])=>Math.tan(f.evaluate(y))],asin:[fr,[fr],(y,[f])=>Math.asin(f.evaluate(y))],acos:[fr,[fr],(y,[f])=>Math.acos(f.evaluate(y))],atan:[fr,[fr],(y,[f])=>Math.atan(f.evaluate(y))],min:[fr,Kl(fr),(y,f)=>Math.min(...f.map(_=>_.evaluate(y)))],max:[fr,Kl(fr),(y,f)=>Math.max(...f.map(_=>_.evaluate(y)))],abs:[fr,[fr],(y,[f])=>Math.abs(f.evaluate(y))],round:[fr,[fr],(y,[f])=>{const _=f.evaluate(y);return _<0?-Math.round(-_):Math.round(_)}],floor:[fr,[fr],(y,[f])=>Math.floor(f.evaluate(y))],ceil:[fr,[fr],(y,[f])=>Math.ceil(f.evaluate(y))],"filter-==":[Br,[Kr,Nr],(y,[f,_])=>y.properties()[f.value]===_.value],"filter-id-==":[Br,[Nr],(y,[f])=>y.id()===f.value],"filter-type-==":[Br,[Kr],(y,[f])=>y.geometryType()===f.value],"filter-<":[Br,[Kr,Nr],(y,[f,_])=>{const I=y.properties()[f.value],k=_.value;return typeof I==typeof k&&I<k}],"filter-id-<":[Br,[Nr],(y,[f])=>{const _=y.id(),I=f.value;return typeof _==typeof I&&_<I}],"filter->":[Br,[Kr,Nr],(y,[f,_])=>{const I=y.properties()[f.value],k=_.value;return typeof I==typeof k&&I>k}],"filter-id->":[Br,[Nr],(y,[f])=>{const _=y.id(),I=f.value;return typeof _==typeof I&&_>I}],"filter-<=":[Br,[Kr,Nr],(y,[f,_])=>{const I=y.properties()[f.value],k=_.value;return typeof I==typeof k&&I<=k}],"filter-id-<=":[Br,[Nr],(y,[f])=>{const _=y.id(),I=f.value;return typeof _==typeof I&&_<=I}],"filter->=":[Br,[Kr,Nr],(y,[f,_])=>{const I=y.properties()[f.value],k=_.value;return typeof I==typeof k&&I>=k}],"filter-id->=":[Br,[Nr],(y,[f])=>{const _=y.id(),I=f.value;return typeof _==typeof I&&_>=I}],"filter-has":[Br,[Nr],(y,[f])=>f.value in y.properties()],"filter-has-id":[Br,[],y=>y.id()!==null&&y.id()!==void 0],"filter-type-in":[Br,[$e(Kr)],(y,[f])=>f.value.indexOf(y.geometryType())>=0],"filter-id-in":[Br,[$e(Nr)],(y,[f])=>f.value.indexOf(y.id())>=0],"filter-in-small":[Br,[Kr,$e(Nr)],(y,[f,_])=>_.value.indexOf(y.properties()[f.value])>=0],"filter-in-large":[Br,[Kr,$e(Nr)],(y,[f,_])=>function(I,k,F,j){for(;F<=j;){const U=F+j>>1;if(k[U]===I)return!0;k[U]>I?j=U-1:F=U+1}return!1}(y.properties()[f.value],_.value,0,_.value.length-1)],all:{type:Br,overloads:[[[Br,Br],(y,[f,_])=>f.evaluate(y)&&_.evaluate(y)],[Kl(Br),(y,f)=>{for(const _ of f)if(!_.evaluate(y))return!1;return!0}]]},any:{type:Br,overloads:[[[Br,Br],(y,[f,_])=>f.evaluate(y)||_.evaluate(y)],[Kl(Br),(y,f)=>{for(const _ of f)if(_.evaluate(y))return!0;return!1}]]},"!":[Br,[Br],(y,[f])=>!f.evaluate(y)],"is-supported-script":[Br,[Kr],(y,[f])=>{const _=y.globals&&y.globals.isSupportedScript;return!_||_(f.evaluate(y))}],upcase:[Kr,[Kr],(y,[f])=>f.evaluate(y).toUpperCase()],downcase:[Kr,[Kr],(y,[f])=>f.evaluate(y).toLowerCase()],concat:[Kr,Kl(Nr),(y,f)=>f.map(_=>un(_.evaluate(y))).join("")],"resolved-locale":[Kr,[ii],(y,[f])=>f.evaluate(y).resolvedLocale()]});class Zh{constructor(f,_){var I;this.expression=f,this._warningHistory={},this._evaluator=new Go,this._defaultValue=_?(I=_).type==="color"&&Ln(I.default)?new Jr(0,0,0,0):I.type==="color"?Jr.parse(I.default)||null:I.type==="padding"?Ji.parse(I.default)||null:I.type==="variableAnchorOffsetCollection"?Ho.parse(I.default)||null:I.default===void 0?null:I.default:null,this._enumValues=_&&_.type==="enum"?_.values:null}evaluateWithoutErrorHandling(f,_,I,k,F,j){return this._evaluator.globals=f,this._evaluator.feature=_,this._evaluator.featureState=I,this._evaluator.canonical=k,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=j,this.expression.evaluate(this._evaluator)}evaluate(f,_,I,k,F,j){this._evaluator.globals=f,this._evaluator.feature=_||null,this._evaluator.featureState=I||null,this._evaluator.canonical=k,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=j||null;try{const U=this.expression.evaluate(this._evaluator);if(U==null||typeof U=="number"&&U!=U)return this._defaultValue;if(this._enumValues&&!(U in this._enumValues))throw new In(`Expected value to be one of ${Object.keys(this._enumValues).map(te=>JSON.stringify(te)).join(", ")}, but found ${JSON.stringify(U)} instead.`);return U}catch(U){return this._warningHistory[U.message]||(this._warningHistory[U.message]=!0,typeof console<"u"&&console.warn(U.message)),this._defaultValue}}}function Kd(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in Wl}function tp(y,f){const _=new Da(Wl,as,[],f?function(k){const F={color:an,string:Kr,number:fr,enum:Kr,boolean:Br,formatted:Pe,padding:he,resolvedImage:ge,variableAnchorOffsetCollection:Te};return k.type==="array"?$e(F[k.value]||Nr,k.length):F[k.type]}(f):void 0),I=_.parse(y,void 0,void 0,void 0,f&&f.type==="string"?{typeAnnotation:"coerce"}:void 0);return I?wa(new Zh(I,f)):mc(_.errors)}class Ym{constructor(f,_){this.kind=f,this._styleExpression=_,this.isStateDependent=f!=="constant"&&!Eu(_.expression)}evaluateWithoutErrorHandling(f,_,I,k,F,j){return this._styleExpression.evaluateWithoutErrorHandling(f,_,I,k,F,j)}evaluate(f,_,I,k,F,j){return this._styleExpression.evaluate(f,_,I,k,F,j)}}class Au{constructor(f,_,I,k){this.kind=f,this.zoomStops=I,this._styleExpression=_,this.isStateDependent=f!=="camera"&&!Eu(_.expression),this.interpolationType=k}evaluateWithoutErrorHandling(f,_,I,k,F,j){return this._styleExpression.evaluateWithoutErrorHandling(f,_,I,k,F,j)}evaluate(f,_,I,k,F,j){return this._styleExpression.evaluate(f,_,I,k,F,j)}interpolationFactor(f,_,I){return this.interpolationType?Kn.interpolationFactor(this.interpolationType,f,_,I):0}}function ah(y,f){const _=tp(y,f);if(_.result==="error")return _;const I=_.value.expression,k=pc(I);if(!k&&!Pu(f))return mc([new Fr("","data expressions not supported")]);const F=Ys(I,["zoom"]);if(!F&&!gc(f))return mc([new Fr("","zoom expressions not supported")]);const j=vc(I);return j||F?j instanceof Fr?mc([j]):j instanceof Kn&&!oh(f)?mc([new Fr("",'"interpolate" expressions cannot be used with this property')]):wa(j?new Au(k?"camera":"composite",_.value,j.labels,j instanceof Kn?j.interpolation:void 0):new Ym(k?"constant":"source",_.value)):mc([new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zd{constructor(f,_){this._parameters=f,this._specification=_,Wr(this,$i(this._parameters,this._specification))}static deserialize(f){return new Zd(f._parameters,f._specification)}static serialize(f){return{_parameters:f._parameters,_specification:f._specification}}}function vc(y){let f=null;if(y instanceof Iu)f=vc(y.result);else if(y instanceof Tu){for(const _ of y.args)if(f=vc(_),f)break}else(y instanceof si||y instanceof Kn)&&y.input instanceof Xi&&y.input.name==="zoom"&&(f=y);return f instanceof Fr||y.eachChild(_=>{const I=vc(_);I instanceof Fr?f=I:!f&&I?f=new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):f&&I&&f!==I&&(f=new Fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),f}function Xh(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(const f of y.slice(1))if(!Xh(f)&&typeof f!="boolean")return!1;return!0;default:return!0}}const rp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _c(y){if(y==null)return{filter:()=>!0,needGeometry:!1};Xh(y)||(y=np(y));const f=tp(y,rp);if(f.result==="error")throw new Error(f.value.map(_=>`${_.key}: ${_.message}`).join(", "));return{filter:(_,I,k)=>f.value.evaluate(_,I,{},k),needGeometry:ky(y)}}function R0(y,f){return y<f?-1:y>f?1:0}function ky(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(let f=1;f<y.length;f++)if(ky(y[f]))return!0;return!1}function np(y){if(!y)return!0;const f=y[0];return y.length<=1?f!=="any":f==="=="?ip(y[1],y[2],"=="):f==="!="?Yh(ip(y[1],y[2],"==")):f==="<"||f===">"||f==="<="||f===">="?ip(y[1],y[2],f):f==="any"?(_=y.slice(1),["any"].concat(_.map(np))):f==="all"?["all"].concat(y.slice(1).map(np)):f==="none"?["all"].concat(y.slice(1).map(np).map(Yh)):f==="in"?Oy(y[1],y.slice(2)):f==="!in"?Yh(Oy(y[1],y.slice(2))):f==="has"?op(y[1]):f==="!has"?Yh(op(y[1])):f!=="within"||y;var _}function ip(y,f,_){switch(y){case"$type":return[`filter-type-${_}`,f];case"$id":return[`filter-id-${_}`,f];default:return[`filter-${_}`,y,f]}}function Oy(y,f){if(f.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",f]];case"$id":return["filter-id-in",["literal",f]];default:return f.length>200&&!f.some(_=>typeof _!=typeof f[0])?["filter-in-large",y,["literal",f.sort(R0)]]:["filter-in-small",y,["literal",f]]}}function op(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function Yh(y){return["!",y]}function Xd(y){const f=typeof y;if(f==="number"||f==="boolean"||f==="string"||y==null)return JSON.stringify(y);if(Array.isArray(y)){let k="[";for(const F of y)k+=`${Xd(F)},`;return`${k}]`}const _=Object.keys(y).sort();let I="{";for(let k=0;k<_.length;k++)I+=`${JSON.stringify(_[k])}:${Xd(y[_[k]])},`;return`${I}}`}function Yd(y){let f="";for(const _ of pt)f+=`/${Xd(y[_])}`;return f}function Jm(y){const f=y.value;return f?[new Wt(y.key,f,"constants have been deprecated as of v8")]:[]}function $o(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function Vc(y){if(Array.isArray(y))return y.map(Vc);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){const f={};for(const _ in y)f[_]=Vc(y[_]);return f}return $o(y)}function Ls(y){const f=y.key,_=y.value,I=y.valueSpec||{},k=y.objectElementValidators||{},F=y.style,j=y.styleSpec,U=y.validateSpec;let te=[];const de=Ui(_);if(de!=="object")return[new Wt(f,_,`object expected, ${de} found`)];for(const be in _){const Ae=be.split(".")[0],He=I[Ae]||I["*"];let ce;if(k[Ae])ce=k[Ae];else if(I[Ae])ce=U;else if(k["*"])ce=k["*"];else{if(!I["*"]){te.push(new Wt(f,_[be],`unknown property "${be}"`));continue}ce=U}te=te.concat(ce({key:(f&&`${f}.`)+be,value:_[be],valueSpec:He,style:F,styleSpec:j,object:_,objectKey:be,validateSpec:U},_))}for(const be in I)k[be]||I[be].required&&I[be].default===void 0&&_[be]===void 0&&te.push(new Wt(f,_,`missing required property "${be}"`));return te}function Ru(y){const f=y.value,_=y.valueSpec,I=y.style,k=y.styleSpec,F=y.key,j=y.arrayElementValidator||y.validateSpec;if(Ui(f)!=="array")return[new Wt(F,f,`array expected, ${Ui(f)} found`)];if(_.length&&f.length!==_.length)return[new Wt(F,f,`array length ${_.length} expected, length ${f.length} found`)];if(_["min-length"]&&f.length<_["min-length"])return[new Wt(F,f,`array length at least ${_["min-length"]} expected, length ${f.length} found`)];let U={type:_.value,values:_.values};k.$version<7&&(U.function=_.function),Ui(_.value)==="object"&&(U=_.value);let te=[];for(let de=0;de<f.length;de++)te=te.concat(j({array:f,arrayIndex:de,value:f[de],valueSpec:U,validateSpec:y.validateSpec,style:I,styleSpec:k,key:`${F}[${de}]`}));return te}function Jh(y){const f=y.key,_=y.value,I=y.valueSpec;let k=Ui(_);return k==="number"&&_!=_&&(k="NaN"),k!=="number"?[new Wt(f,_,`number expected, ${k} found`)]:"minimum"in I&&_<I.minimum?[new Wt(f,_,`${_} is less than the minimum value ${I.minimum}`)]:"maximum"in I&&_>I.maximum?[new Wt(f,_,`${_} is greater than the maximum value ${I.maximum}`)]:[]}function Qh(y){const f=y.valueSpec,_=$o(y.value.type);let I,k,F,j={};const U=_!=="categorical"&&y.value.property===void 0,te=!U,de=Ui(y.value.stops)==="array"&&Ui(y.value.stops[0])==="array"&&Ui(y.value.stops[0][0])==="object",be=Ls({key:y.key,value:y.value,valueSpec:y.styleSpec.function,validateSpec:y.validateSpec,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(ce){if(_==="identity")return[new Wt(ce.key,ce.value,'identity function may not have a "stops" property')];let Je=[];const ot=ce.value;return Je=Je.concat(Ru({key:ce.key,value:ot,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:Ae})),Ui(ot)==="array"&&ot.length===0&&Je.push(new Wt(ce.key,ot,"array must have at least one stop")),Je},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:f,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return _==="identity"&&U&&be.push(new Wt(y.key,y.value,'missing required property "property"')),_==="identity"||y.value.stops||be.push(new Wt(y.key,y.value,'missing required property "stops"')),_==="exponential"&&y.valueSpec.expression&&!oh(y.valueSpec)&&be.push(new Wt(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(te&&!Pu(y.valueSpec)?be.push(new Wt(y.key,y.value,"property functions not supported")):U&&!gc(y.valueSpec)&&be.push(new Wt(y.key,y.value,"zoom functions not supported"))),_!=="categorical"&&!de||y.value.property!==void 0||be.push(new Wt(y.key,y.value,'"property" property is required')),be;function Ae(ce){let Je=[];const ot=ce.value,mt=ce.key;if(Ui(ot)!=="array")return[new Wt(mt,ot,`array expected, ${Ui(ot)} found`)];if(ot.length!==2)return[new Wt(mt,ot,`array length 2 expected, length ${ot.length} found`)];if(de){if(Ui(ot[0])!=="object")return[new Wt(mt,ot,`object expected, ${Ui(ot[0])} found`)];if(ot[0].zoom===void 0)return[new Wt(mt,ot,"object stop key must have zoom")];if(ot[0].value===void 0)return[new Wt(mt,ot,"object stop key must have value")];if(F&&F>$o(ot[0].zoom))return[new Wt(mt,ot[0].zoom,"stop zoom values must appear in ascending order")];$o(ot[0].zoom)!==F&&(F=$o(ot[0].zoom),k=void 0,j={}),Je=Je.concat(Ls({key:`${mt}[0]`,value:ot[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Jh,value:He}}))}else Je=Je.concat(He({key:`${mt}[0]`,value:ot[0],valueSpec:{},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},ot));return Kd(Vc(ot[1]))?Je.concat([new Wt(`${mt}[1]`,ot[1],"expressions are not allowed in function stops.")]):Je.concat(ce.validateSpec({key:`${mt}[1]`,value:ot[1],valueSpec:f,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function He(ce,Je){const ot=Ui(ce.value),mt=$o(ce.value),wt=ce.value!==null?ce.value:Je;if(I){if(ot!==I)return[new Wt(ce.key,wt,`${ot} stop domain type must match previous stop domain type ${I}`)]}else I=ot;if(ot!=="number"&&ot!=="string"&&ot!=="boolean")return[new Wt(ce.key,wt,"stop domain value must be a number, string, or boolean")];if(ot!=="number"&&_!=="categorical"){let qt=`number expected, ${ot} found`;return Pu(f)&&_===void 0&&(qt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Wt(ce.key,wt,qt)]}return _!=="categorical"||ot!=="number"||isFinite(mt)&&Math.floor(mt)===mt?_!=="categorical"&&ot==="number"&&k!==void 0&&mt<k?[new Wt(ce.key,wt,"stop domain values must appear in ascending order")]:(k=mt,_==="categorical"&&mt in j?[new Wt(ce.key,wt,"stop domain values must be unique")]:(j[mt]=!0,[])):[new Wt(ce.key,wt,`integer expected, found ${mt}`)]}}function Zt(y){const f=(y.expressionContext==="property"?ah:tp)(Vc(y.value),y.valueSpec);if(f.result==="error")return f.value.map(I=>new Wt(`${y.key}${I.key}`,y.value,I.message));const _=f.value.expression||f.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!_.outputDefined())return[new Wt(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!Eu(_))return[new Wt(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!Eu(_))return[new Wt(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!Ys(_,["zoom","feature-state"]))return[new Wt(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!pc(_))return[new Wt(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ed(y){const f=y.key,_=y.value,I=y.valueSpec,k=[];return Array.isArray(I.values)?I.values.indexOf($o(_))===-1&&k.push(new Wt(f,_,`expected one of [${I.values.join(", ")}], ${JSON.stringify(_)} found`)):Object.keys(I.values).indexOf($o(_))===-1&&k.push(new Wt(f,_,`expected one of [${Object.keys(I.values).join(", ")}], ${JSON.stringify(_)} found`)),k}function ku(y){return Xh(Vc(y.value))?Zt(Wr({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ap(y)}function ap(y){const f=y.value,_=y.key;if(Ui(f)!=="array")return[new Wt(_,f,`array expected, ${Ui(f)} found`)];const I=y.styleSpec;let k,F=[];if(f.length<1)return[new Wt(_,f,"filter array must have at least 1 element")];switch(F=F.concat(ed({key:`${_}[0]`,value:f[0],valueSpec:I.filter_operator,style:y.style,styleSpec:y.styleSpec})),$o(f[0])){case"<":case"<=":case">":case">=":f.length>=2&&$o(f[1])==="$type"&&F.push(new Wt(_,f,`"$type" cannot be use with operator "${f[0]}"`));case"==":case"!=":f.length!==3&&F.push(new Wt(_,f,`filter array for operator "${f[0]}" must have 3 elements`));case"in":case"!in":f.length>=2&&(k=Ui(f[1]),k!=="string"&&F.push(new Wt(`${_}[1]`,f[1],`string expected, ${k} found`)));for(let j=2;j<f.length;j++)k=Ui(f[j]),$o(f[1])==="$type"?F=F.concat(ed({key:`${_}[${j}]`,value:f[j],valueSpec:I.geometry_type,style:y.style,styleSpec:y.styleSpec})):k!=="string"&&k!=="number"&&k!=="boolean"&&F.push(new Wt(`${_}[${j}]`,f[j],`string, number, or boolean expected, ${k} found`));break;case"any":case"all":case"none":for(let j=1;j<f.length;j++)F=F.concat(ap({key:`${_}[${j}]`,value:f[j],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":k=Ui(f[1]),f.length!==2?F.push(new Wt(_,f,`filter array for "${f[0]}" operator must have 2 elements`)):k!=="string"&&F.push(new Wt(`${_}[1]`,f[1],`string expected, ${k} found`));break;case"within":k=Ui(f[1]),f.length!==2?F.push(new Wt(_,f,`filter array for "${f[0]}" operator must have 2 elements`)):k!=="object"&&F.push(new Wt(`${_}[1]`,f[1],`object expected, ${k} found`))}return F}function Qm(y,f){const _=y.key,I=y.validateSpec,k=y.style,F=y.styleSpec,j=y.value,U=y.objectKey,te=F[`${f}_${y.layerType}`];if(!te)return[];const de=U.match(/^(.*)-transition$/);if(f==="paint"&&de&&te[de[1]]&&te[de[1]].transition)return I({key:_,value:j,valueSpec:F.transition,style:k,styleSpec:F});const be=y.valueSpec||te[U];if(!be)return[new Wt(_,j,`unknown property "${U}"`)];let Ae;if(Ui(j)==="string"&&Pu(be)&&!be.tokens&&(Ae=/^{([^}]+)}$/.exec(j)))return[new Wt(_,j,`"${U}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ae[1])} }\`.`)];const He=[];return y.layerType==="symbol"&&(U==="text-field"&&k&&!k.glyphs&&He.push(new Wt(_,j,'use of "text-field" requires a style "glyphs" property')),U==="text-font"&&Ln(Vc(j))&&$o(j.type)==="identity"&&He.push(new Wt(_,j,'"text-font" does not support identity functions'))),He.concat(I({key:y.key,value:j,valueSpec:be,style:k,styleSpec:F,expressionContext:"property",propertyType:f,propertyKey:U}))}function Jd(y){return Qm(y,"paint")}function xc(y){return Qm(y,"layout")}function sp(y){let f=[];const _=y.value,I=y.key,k=y.style,F=y.styleSpec;_.type||_.ref||f.push(new Wt(I,_,'either "type" or "ref" is required'));let j=$o(_.type);const U=$o(_.ref);if(_.id){const te=$o(_.id);for(let de=0;de<y.arrayIndex;de++){const be=k.layers[de];$o(be.id)===te&&f.push(new Wt(I,_.id,`duplicate layer id "${_.id}", previously used at line ${be.id.__line__}`))}}if("ref"in _){let te;["type","source","source-layer","filter","layout"].forEach(de=>{de in _&&f.push(new Wt(I,_[de],`"${de}" is prohibited for ref layers`))}),k.layers.forEach(de=>{$o(de.id)===U&&(te=de)}),te?te.ref?f.push(new Wt(I,_.ref,"ref cannot reference another ref layer")):j=$o(te.type):f.push(new Wt(I,_.ref,`ref layer "${U}" not found`))}else if(j!=="background")if(_.source){const te=k.sources&&k.sources[_.source],de=te&&$o(te.type);te?de==="vector"&&j==="raster"?f.push(new Wt(I,_.source,`layer "${_.id}" requires a raster source`)):de!=="raster-dem"&&j==="hillshade"?f.push(new Wt(I,_.source,`layer "${_.id}" requires a raster-dem source`)):de==="raster"&&j!=="raster"?f.push(new Wt(I,_.source,`layer "${_.id}" requires a vector source`)):de!=="vector"||_["source-layer"]?de==="raster-dem"&&j!=="hillshade"?f.push(new Wt(I,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):j!=="line"||!_.paint||!_.paint["line-gradient"]||de==="geojson"&&te.lineMetrics||f.push(new Wt(I,_,`layer "${_.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):f.push(new Wt(I,_,`layer "${_.id}" must specify a "source-layer"`)):f.push(new Wt(I,_.source,`source "${_.source}" not found`))}else f.push(new Wt(I,_,'missing required property "source"'));return f=f.concat(Ls({key:I,value:_,valueSpec:F.layer,style:y.style,styleSpec:y.styleSpec,validateSpec:y.validateSpec,objectElementValidators:{"*":()=>[],type:()=>y.validateSpec({key:`${I}.type`,value:_.type,valueSpec:F.layer.type,style:y.style,styleSpec:y.styleSpec,validateSpec:y.validateSpec,object:_,objectKey:"type"}),filter:ku,layout:te=>Ls({layer:_,key:te.key,value:te.value,style:te.style,styleSpec:te.styleSpec,validateSpec:te.validateSpec,objectElementValidators:{"*":de=>xc(Wr({layerType:j},de))}}),paint:te=>Ls({layer:_,key:te.key,value:te.value,style:te.style,styleSpec:te.styleSpec,validateSpec:te.validateSpec,objectElementValidators:{"*":de=>Jd(Wr({layerType:j},de))}})}})),f}function Cs(y){const f=y.value,_=y.key,I=Ui(f);return I!=="string"?[new Wt(_,f,`string expected, ${I} found`)]:[]}const Ou={promoteId:function({key:y,value:f}){if(Ui(f)==="string")return Cs({key:y,value:f});{const _=[];for(const I in f)_.push(...Cs({key:`${y}.${I}`,value:f[I]}));return _}}};function ls(y){const f=y.value,_=y.key,I=y.styleSpec,k=y.style,F=y.validateSpec;if(!f.type)return[new Wt(_,f,'"type" is required')];const j=$o(f.type);let U;switch(j){case"vector":case"raster":return U=Ls({key:_,value:f,valueSpec:I[`source_${j.replace("-","_")}`],style:y.style,styleSpec:I,objectElementValidators:Ou,validateSpec:F}),U;case"raster-dem":return U=function(te){var de;const be=(de=te.sourceName)!==null&&de!==void 0?de:"",Ae=te.value,He=te.styleSpec,ce=He.source_raster_dem,Je=te.style;let ot=[];const mt=Ui(Ae);if(Ae===void 0)return ot;if(mt!=="object")return ot.push(new Wt("source_raster_dem",Ae,`object expected, ${mt} found`)),ot;const wt=$o(Ae.encoding)==="custom",qt=["redFactor","greenFactor","blueFactor","baseShift"],Bt=te.value.encoding?`"${te.value.encoding}"`:"Default";for(const Kt in Ae)!wt&&qt.includes(Kt)?ot.push(new Wt(Kt,Ae[Kt],`In "${be}": "${Kt}" is only valid when "encoding" is set to "custom". ${Bt} encoding found`)):ce[Kt]?ot=ot.concat(te.validateSpec({key:Kt,value:Ae[Kt],valueSpec:ce[Kt],validateSpec:te.validateSpec,style:Je,styleSpec:He})):ot.push(new Wt(Kt,Ae[Kt],`unknown property "${Kt}"`));return ot}({sourceName:_,value:f,style:y.style,styleSpec:I,validateSpec:F}),U;case"geojson":if(U=Ls({key:_,value:f,valueSpec:I.source_geojson,style:k,styleSpec:I,validateSpec:F,objectElementValidators:Ou}),f.cluster)for(const te in f.clusterProperties){const[de,be]=f.clusterProperties[te],Ae=typeof de=="string"?[de,["accumulated"],["get",te]]:de;U.push(...Zt({key:`${_}.${te}.map`,value:be,validateSpec:F,expressionContext:"cluster-map"})),U.push(...Zt({key:`${_}.${te}.reduce`,value:Ae,validateSpec:F,expressionContext:"cluster-reduce"}))}return U;case"video":return Ls({key:_,value:f,valueSpec:I.source_video,style:k,validateSpec:F,styleSpec:I});case"image":return Ls({key:_,value:f,valueSpec:I.source_image,style:k,validateSpec:F,styleSpec:I});case"canvas":return[new Wt(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ed({key:`${_}.type`,value:f.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:k,validateSpec:F,styleSpec:I})}}function sh(y){const f=y.value,_=y.styleSpec,I=_.light,k=y.style;let F=[];const j=Ui(f);if(f===void 0)return F;if(j!=="object")return F=F.concat([new Wt("light",f,`object expected, ${j} found`)]),F;for(const U in f){const te=U.match(/^(.*)-transition$/);F=F.concat(te&&I[te[1]]&&I[te[1]].transition?y.validateSpec({key:U,value:f[U],valueSpec:_.transition,validateSpec:y.validateSpec,style:k,styleSpec:_}):I[U]?y.validateSpec({key:U,value:f[U],valueSpec:I[U],validateSpec:y.validateSpec,style:k,styleSpec:_}):[new Wt(U,f[U],`unknown property "${U}"`)])}return F}function zy(y){const f=y.value,_=y.styleSpec,I=_.terrain,k=y.style;let F=[];const j=Ui(f);if(f===void 0)return F;if(j!=="object")return F=F.concat([new Wt("terrain",f,`object expected, ${j} found`)]),F;for(const U in f)F=F.concat(I[U]?y.validateSpec({key:U,value:f[U],valueSpec:I[U],validateSpec:y.validateSpec,style:k,styleSpec:_}):[new Wt(U,f[U],`unknown property "${U}"`)]);return F}function eg(y){let f=[];const _=y.value,I=y.key;if(Array.isArray(_)){const k=[],F=[];for(const j in _)_[j].id&&k.includes(_[j].id)&&f.push(new Wt(I,_,`all the sprites' ids must be unique, but ${_[j].id} is duplicated`)),k.push(_[j].id),_[j].url&&F.includes(_[j].url)&&f.push(new Wt(I,_,`all the sprites' URLs must be unique, but ${_[j].url} is duplicated`)),F.push(_[j].url),f=f.concat(Ls({key:`${I}[${j}]`,value:_[j],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:y.validateSpec}));return f}return Cs({key:I,value:_})}const tg={"*":()=>[],array:Ru,boolean:function(y){const f=y.value,_=y.key,I=Ui(f);return I!=="boolean"?[new Wt(_,f,`boolean expected, ${I} found`)]:[]},number:Jh,color:function(y){const f=y.key,_=y.value,I=Ui(_);return I!=="string"?[new Wt(f,_,`color expected, ${I} found`)]:Jr.parse(String(_))?[]:[new Wt(f,_,`color expected, "${_}" found`)]},constants:Jm,enum:ed,filter:ku,function:Qh,layer:sp,object:Ls,source:ls,light:sh,terrain:zy,string:Cs,formatted:function(y){return Cs(y).length===0?[]:Zt(y)},resolvedImage:function(y){return Cs(y).length===0?[]:Zt(y)},padding:function(y){const f=y.key,_=y.value;if(Ui(_)==="array"){if(_.length<1||_.length>4)return[new Wt(f,_,`padding requires 1 to 4 values; ${_.length} values found`)];const I={type:"number"};let k=[];for(let F=0;F<_.length;F++)k=k.concat(y.validateSpec({key:`${f}[${F}]`,value:_[F],validateSpec:y.validateSpec,valueSpec:I}));return k}return Jh({key:f,value:_,valueSpec:{}})},variableAnchorOffsetCollection:function(y){const f=y.key,_=y.value,I=Ui(_),k=y.styleSpec;if(I!=="array"||_.length<1||_.length%2!=0)return[new Wt(f,_,"variableAnchorOffsetCollection requires a non-empty array of even length")];let F=[];for(let j=0;j<_.length;j+=2)F=F.concat(ed({key:`${f}[${j}]`,value:_[j],valueSpec:k.layout_symbol["text-anchor"]})),F=F.concat(Ru({key:`${f}[${j+1}]`,value:_[j+1],valueSpec:{length:2,value:"number"},validateSpec:y.validateSpec,style:y.style,styleSpec:k}));return F},sprite:eg};function Xl(y){const f=y.value,_=y.valueSpec,I=y.styleSpec;return y.validateSpec=Xl,_.expression&&Ln($o(f))?Qh(y):_.expression&&Kd(Vc(f))?Zt(y):_.type&&tg[_.type]?tg[_.type](y):Ls(Wr({},y,{valueSpec:_.type?I[_.type]:_}))}function Dy(y){const f=y.value,_=y.key,I=Cs(y);return I.length||(f.indexOf("{fontstack}")===-1&&I.push(new Wt(_,f,'"glyphs" url must include a "{fontstack}" token')),f.indexOf("{range}")===-1&&I.push(new Wt(_,f,'"glyphs" url must include a "{range}" token'))),I}function Al(y,f=ve){let _=[];return _=_.concat(Xl({key:"",value:y,valueSpec:f.$root,styleSpec:f,style:y,validateSpec:Xl,objectElementValidators:{glyphs:Dy,"*":()=>[]}})),y.constants&&(_=_.concat(Jm({key:"constants",value:y.constants,style:y,styleSpec:f,validateSpec:Xl}))),lp(_)}function Uc(y){return function(f){return y({...f,validateSpec:Xl})}}function lp(y){return[].concat(y).sort((f,_)=>f.line-_.line)}function bc(y){return function(...f){return lp(y.apply(this,f))}}Al.source=bc(Uc(ls)),Al.sprite=bc(Uc(eg)),Al.glyphs=bc(Uc(Dy)),Al.light=bc(Uc(sh)),Al.terrain=bc(Uc(zy)),Al.layer=bc(Uc(sp)),Al.filter=bc(Uc(ku)),Al.paintProperty=bc(Uc(Jd)),Al.layoutProperty=bc(Uc(xc));const Hc=Al,cp=Hc.light,rg=Hc.paintProperty,ng=Hc.layoutProperty;function td(y,f){let _=!1;if(f&&f.length)for(const I of f)y.fire(new De(new Error(I.message))),_=!0;return _}class Gc{constructor(f,_,I){const k=this.cells=[];if(f instanceof ArrayBuffer){this.arrayBuffer=f;const j=new Int32Array(this.arrayBuffer);f=j[0],this.d=(_=j[1])+2*(I=j[2]);for(let te=0;te<this.d*this.d;te++){const de=j[3+te],be=j[3+te+1];k.push(de===be?null:j.subarray(de,be))}const U=j[3+k.length+1];this.keys=j.subarray(j[3+k.length],U),this.bboxes=j.subarray(U),this.insert=this._insertReadonly}else{this.d=_+2*I;for(let j=0;j<this.d*this.d;j++)k.push([]);this.keys=[],this.bboxes=[]}this.n=_,this.extent=f,this.padding=I,this.scale=_/f,this.uid=0;const F=I/_*f;this.min=-F,this.max=f+F}insert(f,_,I,k,F){this._forEachCell(_,I,k,F,this._insertCell,this.uid++,void 0,void 0),this.keys.push(f),this.bboxes.push(_),this.bboxes.push(I),this.bboxes.push(k),this.bboxes.push(F)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(f,_,I,k,F,j){this.cells[F].push(j)}query(f,_,I,k,F){const j=this.min,U=this.max;if(f<=j&&_<=j&&U<=I&&U<=k&&!F)return Array.prototype.slice.call(this.keys);{const te=[];return this._forEachCell(f,_,I,k,this._queryCell,te,{},F),te}}_queryCell(f,_,I,k,F,j,U,te){const de=this.cells[F];if(de!==null){const be=this.keys,Ae=this.bboxes;for(let He=0;He<de.length;He++){const ce=de[He];if(U[ce]===void 0){const Je=4*ce;(te?te(Ae[Je+0],Ae[Je+1],Ae[Je+2],Ae[Je+3]):f<=Ae[Je+2]&&_<=Ae[Je+3]&&I>=Ae[Je+0]&&k>=Ae[Je+1])?(U[ce]=!0,j.push(be[ce])):U[ce]=!1}}}}_forEachCell(f,_,I,k,F,j,U,te){const de=this._convertToCellCoord(f),be=this._convertToCellCoord(_),Ae=this._convertToCellCoord(I),He=this._convertToCellCoord(k);for(let ce=de;ce<=Ae;ce++)for(let Je=be;Je<=He;Je++){const ot=this.d*Je+ce;if((!te||te(this._convertFromCellCoord(ce),this._convertFromCellCoord(Je),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(Je+1)))&&F.call(this,f,_,I,k,ot,j,U,te))return}}_convertFromCellCoord(f){return(f-this.padding)/this.scale}_convertToCellCoord(f){return Math.max(0,Math.min(this.d-1,Math.floor(f*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const f=this.cells,_=3+this.cells.length+1+1;let I=0;for(let j=0;j<this.cells.length;j++)I+=this.cells[j].length;const k=new Int32Array(_+I+this.keys.length+this.bboxes.length);k[0]=this.extent,k[1]=this.n,k[2]=this.padding;let F=_;for(let j=0;j<f.length;j++){const U=f[j];k[3+j]=F,k.set(U,F),F+=U.length}return k[3+f.length]=F,k.set(this.keys,F),F+=this.keys.length,k[3+f.length+1]=F,k.set(this.bboxes,F),F+=this.bboxes.length,k.buffer}static serialize(f,_){const I=f.toArrayBuffer();return _&&_.push(I),{buffer:I}}static deserialize(f){return new Gc(f.buffer)}}const Yl={};function _n(y,f,_={}){if(Yl[y])throw new Error(`${y} is already registered.`);Object.defineProperty(f,"_classRegistryKey",{value:y,writeable:!1}),Yl[y]={klass:f,omit:_.omit||[],shallow:_.shallow||[]}}_n("Object",Object),_n("TransferableGridIndex",Gc),_n("Color",Jr),_n("Error",Error),_n("AJAXError",Ct),_n("ResolvedImage",ji),_n("StylePropertyFunction",Zd),_n("StyleExpression",Zh,{omit:["_evaluator"]}),_n("ZoomDependentExpression",Au),_n("ZoomConstantExpression",Ym),_n("CompoundExpression",Xi,{omit:["_evaluate"]});for(const y in Wl)Wl[y]._classRegistryKey||_n(`Expression_${y}`,Wl[y]);function rd(y){return y&&typeof ArrayBuffer<"u"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function Rl(y,f){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob)return y;if(rd(y)||Ye(y))return f&&f.push(y),y;if(ArrayBuffer.isView(y)){const _=y;return f&&f.push(_.buffer),_}if(y instanceof ImageData)return f&&f.push(y.data.buffer),y;if(Array.isArray(y)){const _=[];for(const I of y)_.push(Rl(I,f));return _}if(typeof y=="object"){const _=y.constructor,I=_._classRegistryKey;if(!I)throw new Error("can't serialize object of unregistered class");if(!Yl[I])throw new Error(`${I} is not registered.`);const k=_.serialize?_.serialize(y,f):{};if(_.serialize){if(f&&k===f[f.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const F in y){if(!y.hasOwnProperty(F)||Yl[I].omit.indexOf(F)>=0)continue;const j=y[F];k[F]=Yl[I].shallow.indexOf(F)>=0?j:Rl(j,f)}y instanceof Error&&(k.message=y.message)}if(k.$name)throw new Error("$name property is reserved for worker serialization logic.");return I!=="Object"&&(k.$name=I),k}throw new Error("can't serialize object of type "+typeof y)}function qc(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob||rd(y)||Ye(y)||ArrayBuffer.isView(y)||y instanceof ImageData)return y;if(Array.isArray(y))return y.map(qc);if(typeof y=="object"){const f=y.$name||"Object";if(!Yl[f])throw new Error(`can't deserialize unregistered class ${f}`);const{klass:_}=Yl[f];if(!_)throw new Error(`can't deserialize unregistered class ${f}`);if(_.deserialize)return _.deserialize(y);const I=Object.create(_.prototype);for(const k of Object.keys(y)){if(k==="$name")continue;const F=y[k];I[k]=Yl[f].shallow.indexOf(k)>=0?F:qc(F)}return I}throw new Error("can't deserialize object of type "+typeof y)}class up{constructor(){this.first=!0}update(f,_){const I=Math.floor(f);return this.first?(this.first=!1,this.lastIntegerZoom=I,this.lastIntegerZoomTime=0,this.lastZoom=f,this.lastFloorZoom=I,!0):(this.lastFloorZoom>I?(this.lastIntegerZoom=I+1,this.lastIntegerZoomTime=_):this.lastFloorZoom<I&&(this.lastIntegerZoom=I,this.lastIntegerZoomTime=_),f!==this.lastZoom&&(this.lastZoom=f,this.lastFloorZoom=I,!0))}}const fn={"Latin-1 Supplement":y=>y>=128&&y<=255,Arabic:y=>y>=1536&&y<=1791,"Arabic Supplement":y=>y>=1872&&y<=1919,"Arabic Extended-A":y=>y>=2208&&y<=2303,"Hangul Jamo":y=>y>=4352&&y<=4607,"Unified Canadian Aboriginal Syllabics":y=>y>=5120&&y<=5759,Khmer:y=>y>=6016&&y<=6143,"Unified Canadian Aboriginal Syllabics Extended":y=>y>=6320&&y<=6399,"General Punctuation":y=>y>=8192&&y<=8303,"Letterlike Symbols":y=>y>=8448&&y<=8527,"Number Forms":y=>y>=8528&&y<=8591,"Miscellaneous Technical":y=>y>=8960&&y<=9215,"Control Pictures":y=>y>=9216&&y<=9279,"Optical Character Recognition":y=>y>=9280&&y<=9311,"Enclosed Alphanumerics":y=>y>=9312&&y<=9471,"Geometric Shapes":y=>y>=9632&&y<=9727,"Miscellaneous Symbols":y=>y>=9728&&y<=9983,"Miscellaneous Symbols and Arrows":y=>y>=11008&&y<=11263,"CJK Radicals Supplement":y=>y>=11904&&y<=12031,"Kangxi Radicals":y=>y>=12032&&y<=12255,"Ideographic Description Characters":y=>y>=12272&&y<=12287,"CJK Symbols and Punctuation":y=>y>=12288&&y<=12351,Hiragana:y=>y>=12352&&y<=12447,Katakana:y=>y>=12448&&y<=12543,Bopomofo:y=>y>=12544&&y<=12591,"Hangul Compatibility Jamo":y=>y>=12592&&y<=12687,Kanbun:y=>y>=12688&&y<=12703,"Bopomofo Extended":y=>y>=12704&&y<=12735,"CJK Strokes":y=>y>=12736&&y<=12783,"Katakana Phonetic Extensions":y=>y>=12784&&y<=12799,"Enclosed CJK Letters and Months":y=>y>=12800&&y<=13055,"CJK Compatibility":y=>y>=13056&&y<=13311,"CJK Unified Ideographs Extension A":y=>y>=13312&&y<=19903,"Yijing Hexagram Symbols":y=>y>=19904&&y<=19967,"CJK Unified Ideographs":y=>y>=19968&&y<=40959,"Yi Syllables":y=>y>=40960&&y<=42127,"Yi Radicals":y=>y>=42128&&y<=42191,"Hangul Jamo Extended-A":y=>y>=43360&&y<=43391,"Hangul Syllables":y=>y>=44032&&y<=55215,"Hangul Jamo Extended-B":y=>y>=55216&&y<=55295,"Private Use Area":y=>y>=57344&&y<=63743,"CJK Compatibility Ideographs":y=>y>=63744&&y<=64255,"Arabic Presentation Forms-A":y=>y>=64336&&y<=65023,"Vertical Forms":y=>y>=65040&&y<=65055,"CJK Compatibility Forms":y=>y>=65072&&y<=65103,"Small Form Variants":y=>y>=65104&&y<=65135,"Arabic Presentation Forms-B":y=>y>=65136&&y<=65279,"Halfwidth and Fullwidth Forms":y=>y>=65280&&y<=65519};function Qd(y){for(const f of y)if(dp(f.charCodeAt(0)))return!0;return!1}function hp(y){for(const f of y)if(!ig(f.charCodeAt(0)))return!1;return!0}function ig(y){return!(fn.Arabic(y)||fn["Arabic Supplement"](y)||fn["Arabic Extended-A"](y)||fn["Arabic Presentation Forms-A"](y)||fn["Arabic Presentation Forms-B"](y))}function dp(y){return!(y!==746&&y!==747&&(y<4352||!(fn["Bopomofo Extended"](y)||fn.Bopomofo(y)||fn["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||fn["CJK Compatibility Ideographs"](y)||fn["CJK Compatibility"](y)||fn["CJK Radicals Supplement"](y)||fn["CJK Strokes"](y)||!(!fn["CJK Symbols and Punctuation"](y)||y>=12296&&y<=12305||y>=12308&&y<=12319||y===12336)||fn["CJK Unified Ideographs Extension A"](y)||fn["CJK Unified Ideographs"](y)||fn["Enclosed CJK Letters and Months"](y)||fn["Hangul Compatibility Jamo"](y)||fn["Hangul Jamo Extended-A"](y)||fn["Hangul Jamo Extended-B"](y)||fn["Hangul Jamo"](y)||fn["Hangul Syllables"](y)||fn.Hiragana(y)||fn["Ideographic Description Characters"](y)||fn.Kanbun(y)||fn["Kangxi Radicals"](y)||fn["Katakana Phonetic Extensions"](y)||fn.Katakana(y)&&y!==12540||!(!fn["Halfwidth and Fullwidth Forms"](y)||y===65288||y===65289||y===65293||y>=65306&&y<=65310||y===65339||y===65341||y===65343||y>=65371&&y<=65503||y===65507||y>=65512&&y<=65519)||!(!fn["Small Form Variants"](y)||y>=65112&&y<=65118||y>=65123&&y<=65126)||fn["Unified Canadian Aboriginal Syllabics"](y)||fn["Unified Canadian Aboriginal Syllabics Extended"](y)||fn["Vertical Forms"](y)||fn["Yijing Hexagram Symbols"](y)||fn["Yi Syllables"](y)||fn["Yi Radicals"](y))))}function fp(y){return!(dp(y)||function(f){return!!(fn["Latin-1 Supplement"](f)&&(f===167||f===169||f===174||f===177||f===188||f===189||f===190||f===215||f===247)||fn["General Punctuation"](f)&&(f===8214||f===8224||f===8225||f===8240||f===8241||f===8251||f===8252||f===8258||f===8263||f===8264||f===8265||f===8273)||fn["Letterlike Symbols"](f)||fn["Number Forms"](f)||fn["Miscellaneous Technical"](f)&&(f>=8960&&f<=8967||f>=8972&&f<=8991||f>=8996&&f<=9e3||f===9003||f>=9085&&f<=9114||f>=9150&&f<=9165||f===9167||f>=9169&&f<=9179||f>=9186&&f<=9215)||fn["Control Pictures"](f)&&f!==9251||fn["Optical Character Recognition"](f)||fn["Enclosed Alphanumerics"](f)||fn["Geometric Shapes"](f)||fn["Miscellaneous Symbols"](f)&&!(f>=9754&&f<=9759)||fn["Miscellaneous Symbols and Arrows"](f)&&(f>=11026&&f<=11055||f>=11088&&f<=11097||f>=11192&&f<=11243)||fn["CJK Symbols and Punctuation"](f)||fn.Katakana(f)||fn["Private Use Area"](f)||fn["CJK Compatibility Forms"](f)||fn["Small Form Variants"](f)||fn["Halfwidth and Fullwidth Forms"](f)||f===8734||f===8756||f===8757||f>=9984&&f<=10087||f>=10102&&f<=10131||f===65532||f===65533)}(y))}function ef(y){return y>=1424&&y<=2303||fn["Arabic Presentation Forms-A"](y)||fn["Arabic Presentation Forms-B"](y)}function pp(y,f){return!(!f&&ef(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||fn.Khmer(y))}function og(y){for(const f of y)if(ef(f.charCodeAt(0)))return!0;return!1}const Mn="deferred",mp="loading",nd="loaded";let gp=null,$s="unavailable",Wc=null;const wc=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&($s="error"),gp&&gp(y)};function yp(){tf.fire(new vt("pluginStateChange",{pluginStatus:$s,pluginURL:Wc}))}const tf=new ze,ag=function(){return $s},Ly=function(){if($s!==Mn||!Wc)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$s=mp,yp(),Wc&&Pt({url:Wc},y=>{y?wc(y):($s=nd,yp())})},Bs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>$s===nd||Bs.applyArabicShaping!=null,isLoading:()=>$s===mp,setState(y){if(!Me())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");$s=y.pluginStatus,Wc=y.pluginURL},isParsed(){if(!Me())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Bs.applyArabicShaping!=null&&Bs.processBidirectionalText!=null&&Bs.processStyledBidirectionalText!=null},getPluginURL(){if(!Me())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Wc}};class Ao{constructor(f,_){this.zoom=f,_?(this.now=_.now,this.fadeDuration=_.fadeDuration,this.zoomHistory=_.zoomHistory,this.transition=_.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new up,this.transition={})}isSupportedScript(f){return function(_,I){for(const k of _)if(!pp(k.charCodeAt(0),I))return!1;return!0}(f,Bs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const f=this.zoom,_=f-Math.floor(f),I=this.crossFadingFactor();return f>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:_+(1-_)*I}:{fromScale:.5,toScale:1,t:1-(1-I)*_}}}class id{constructor(f,_){this.property=f,this.value=_,this.expression=function(I,k){if(Ln(I))return new Zd(I,k);if(Kd(I)){const F=ah(I,k);if(F.result==="error")throw new Error(F.value.map(j=>`${j.key}: ${j.message}`).join(", "));return F.value}{let F=I;return k.type==="color"&&typeof I=="string"?F=Jr.parse(I):k.type!=="padding"||typeof I!="number"&&!Array.isArray(I)?k.type==="variableAnchorOffsetCollection"&&Array.isArray(I)&&(F=Ho.parse(I)):F=Ji.parse(I),{kind:"constant",evaluate:()=>F}}}(_===void 0?f.specification.default:_,f.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(f,_,I){return this.property.possiblyEvaluate(this,f,_,I)}}class rf{constructor(f){this.property=f,this.value=new id(f,void 0)}transitioned(f,_){return new lg(this.property,this.value,_,xe({},f.transition,this.transition),f.now)}untransitioned(){return new lg(this.property,this.value,null,{},0)}}class sg{constructor(f){this._properties=f,this._values=Object.create(f.defaultTransitionablePropertyValues)}getValue(f){return Ve(this._values[f].value.value)}setValue(f,_){Object.prototype.hasOwnProperty.call(this._values,f)||(this._values[f]=new rf(this._values[f].property)),this._values[f].value=new id(this._values[f].property,_===null?void 0:Ve(_))}getTransition(f){return Ve(this._values[f].transition)}setTransition(f,_){Object.prototype.hasOwnProperty.call(this._values,f)||(this._values[f]=new rf(this._values[f].property)),this._values[f].transition=Ve(_)||void 0}serialize(){const f={};for(const _ of Object.keys(this._values)){const I=this.getValue(_);I!==void 0&&(f[_]=I);const k=this.getTransition(_);k!==void 0&&(f[`${_}-transition`]=k)}return f}transitioned(f,_){const I=new $y(this._properties);for(const k of Object.keys(this._values))I._values[k]=this._values[k].transitioned(f,_._values[k]);return I}untransitioned(){const f=new $y(this._properties);for(const _ of Object.keys(this._values))f._values[_]=this._values[_].untransitioned();return f}}class lg{constructor(f,_,I,k,F){this.property=f,this.value=_,this.begin=F+k.delay||0,this.end=this.begin+k.duration||0,f.specification.transition&&(k.delay||k.duration)&&(this.prior=I)}possiblyEvaluate(f,_,I){const k=f.now||0,F=this.value.possiblyEvaluate(f,_,I),j=this.prior;if(j){if(k>this.end)return this.prior=null,F;if(this.value.isDataDriven())return this.prior=null,F;if(k<this.begin)return j.possiblyEvaluate(f,_,I);{const U=(k-this.begin)/(this.end-this.begin);return this.property.interpolate(j.possiblyEvaluate(f,_,I),F,function(te){if(te<=0)return 0;if(te>=1)return 1;const de=te*te,be=de*te;return 4*(te<.5?be:3*(te-de)+be-.75)}(U))}}return F}}class $y{constructor(f){this._properties=f,this._values=Object.create(f.defaultTransitioningPropertyValues)}possiblyEvaluate(f,_,I){const k=new of(this._properties);for(const F of Object.keys(this._values))k._values[F]=this._values[F].possiblyEvaluate(f,_,I);return k}hasTransition(){for(const f of Object.keys(this._values))if(this._values[f].prior)return!0;return!1}}class nf{constructor(f){this._properties=f,this._values=Object.create(f.defaultPropertyValues)}hasValue(f){return this._values[f].value!==void 0}getValue(f){return Ve(this._values[f].value)}setValue(f,_){this._values[f]=new id(this._values[f].property,_===null?void 0:Ve(_))}serialize(){const f={};for(const _ of Object.keys(this._values)){const I=this.getValue(_);I!==void 0&&(f[_]=I)}return f}possiblyEvaluate(f,_,I){const k=new of(this._properties);for(const F of Object.keys(this._values))k._values[F]=this._values[F].possiblyEvaluate(f,_,I);return k}}class Wa{constructor(f,_,I){this.property=f,this.value=_,this.parameters=I}isConstant(){return this.value.kind==="constant"}constantOr(f){return this.value.kind==="constant"?this.value.value:f}evaluate(f,_,I,k){return this.property.evaluate(this.value,this.parameters,f,_,I,k)}}class of{constructor(f){this._properties=f,this._values=Object.create(f.defaultPossiblyEvaluatedValues)}get(f){return this._values[f]}}class Pn{constructor(f){this.specification=f}possiblyEvaluate(f,_){if(f.isDataDriven())throw new Error("Value should not be data driven");return f.expression.evaluate(_)}interpolate(f,_,I){const k=ss[this.specification.type];return k?k(f,_,I):f}}class Vn{constructor(f,_){this.specification=f,this.overrides=_}possiblyEvaluate(f,_,I,k){return new Wa(this,f.expression.kind==="constant"||f.expression.kind==="camera"?{kind:"constant",value:f.expression.evaluate(_,null,{},I,k)}:f.expression,_)}interpolate(f,_,I){if(f.value.kind!=="constant"||_.value.kind!=="constant")return f;if(f.value.value===void 0||_.value.value===void 0)return new Wa(this,{kind:"constant",value:void 0},f.parameters);const k=ss[this.specification.type];if(k){const F=k(f.value.value,_.value.value,I);return new Wa(this,{kind:"constant",value:F},f.parameters)}return f}evaluate(f,_,I,k,F,j){return f.kind==="constant"?f.value:f.evaluate(_,I,k,F,j)}}class el extends Vn{possiblyEvaluate(f,_,I,k){if(f.value===void 0)return new Wa(this,{kind:"constant",value:void 0},_);if(f.expression.kind==="constant"){const F=f.expression.evaluate(_,null,{},I,k),j=f.property.specification.type==="resolvedImage"&&typeof F!="string"?F.name:F,U=this._calculate(j,j,j,_);return new Wa(this,{kind:"constant",value:U},_)}if(f.expression.kind==="camera"){const F=this._calculate(f.expression.evaluate({zoom:_.zoom-1}),f.expression.evaluate({zoom:_.zoom}),f.expression.evaluate({zoom:_.zoom+1}),_);return new Wa(this,{kind:"constant",value:F},_)}return new Wa(this,f.expression,_)}evaluate(f,_,I,k,F,j){if(f.kind==="source"){const U=f.evaluate(_,I,k,F,j);return this._calculate(U,U,U,_)}return f.kind==="composite"?this._calculate(f.evaluate({zoom:Math.floor(_.zoom)-1},I,k),f.evaluate({zoom:Math.floor(_.zoom)},I,k),f.evaluate({zoom:Math.floor(_.zoom)+1},I,k),_):f.value}_calculate(f,_,I,k){return k.zoom>k.zoomHistory.lastIntegerZoom?{from:f,to:_}:{from:I,to:_}}interpolate(f){return f}}class af{constructor(f){this.specification=f}possiblyEvaluate(f,_,I,k){if(f.value!==void 0){if(f.expression.kind==="constant"){const F=f.expression.evaluate(_,null,{},I,k);return this._calculate(F,F,F,_)}return this._calculate(f.expression.evaluate(new Ao(Math.floor(_.zoom-1),_)),f.expression.evaluate(new Ao(Math.floor(_.zoom),_)),f.expression.evaluate(new Ao(Math.floor(_.zoom+1),_)),_)}}_calculate(f,_,I,k){return k.zoom>k.zoomHistory.lastIntegerZoom?{from:f,to:_}:{from:I,to:_}}interpolate(f){return f}}class vp{constructor(f){this.specification=f}possiblyEvaluate(f,_,I,k){return!!f.expression.evaluate(_,null,{},I,k)}interpolate(){return!1}}class sa{constructor(f){this.properties=f,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const _ in f){const I=f[_];I.specification.overridable&&this.overridableProperties.push(_);const k=this.defaultPropertyValues[_]=new id(I,void 0),F=this.defaultTransitionablePropertyValues[_]=new rf(I);this.defaultTransitioningPropertyValues[_]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[_]=k.possiblyEvaluate({})}}}_n("DataDrivenProperty",Vn),_n("DataConstantProperty",Pn),_n("CrossFadedDataDrivenProperty",el),_n("CrossFadedProperty",af),_n("ColorRampProperty",vp);const _p="-transition";class tl extends ze{constructor(f,_){if(super(),this.id=f.id,this.type=f.type,this._featureFilter={filter:()=>!0,needGeometry:!1},f.type!=="custom"&&(this.metadata=f.metadata,this.minzoom=f.minzoom,this.maxzoom=f.maxzoom,f.type!=="background"&&(this.source=f.source,this.sourceLayer=f["source-layer"],this.filter=f.filter),_.layout&&(this._unevaluatedLayout=new nf(_.layout)),_.paint)){this._transitionablePaint=new sg(_.paint);for(const I in f.paint)this.setPaintProperty(I,f.paint[I],{validate:!1});for(const I in f.layout)this.setLayoutProperty(I,f.layout[I],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new of(_.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(f){return f==="visibility"?this.visibility:this._unevaluatedLayout.getValue(f)}setLayoutProperty(f,_,I={}){_!=null&&this._validate(ng,`layers.${this.id}.layout.${f}`,f,_,I)||(f!=="visibility"?this._unevaluatedLayout.setValue(f,_):this.visibility=_)}getPaintProperty(f){return f.endsWith(_p)?this._transitionablePaint.getTransition(f.slice(0,-11)):this._transitionablePaint.getValue(f)}setPaintProperty(f,_,I={}){if(_!=null&&this._validate(rg,`layers.${this.id}.paint.${f}`,f,_,I))return!1;if(f.endsWith(_p))return this._transitionablePaint.setTransition(f.slice(0,-11),_||void 0),!1;{const k=this._transitionablePaint._values[f],F=k.property.specification["property-type"]==="cross-faded-data-driven",j=k.value.isDataDriven(),U=k.value;this._transitionablePaint.setValue(f,_),this._handleSpecialPaintPropertyUpdate(f);const te=this._transitionablePaint._values[f].value;return te.isDataDriven()||j||F||this._handleOverridablePaintPropertyUpdate(f,U,te)}}_handleSpecialPaintPropertyUpdate(f){}_handleOverridablePaintPropertyUpdate(f,_,I){return!1}isHidden(f){return!!(this.minzoom&&f<this.minzoom)||!!(this.maxzoom&&f>=this.maxzoom)||this.visibility==="none"}updateTransitions(f){this._transitioningPaint=this._transitionablePaint.transitioned(f,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(f,_){f.getCrossfadeParameters&&(this._crossfadeParameters=f.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(f,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(f,void 0,_)}serialize(){const f={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(f.layout=f.layout||{},f.layout.visibility=this.visibility),Re(f,(_,I)=>!(_===void 0||I==="layout"&&!Object.keys(_).length||I==="paint"&&!Object.keys(_).length))}_validate(f,_,I,k,F={}){return(!F||F.validate!==!1)&&td(this,f.call(Hc,{key:_,layerType:this.type,objectKey:I,value:k,styleSpec:ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const f in this.paint._values){const _=this.paint.get(f);if(_ instanceof Wa&&Pu(_.property.specification)&&(_.value.kind==="source"||_.value.kind==="composite")&&_.value.isStateDependent)return!0}return!1}}const By={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kc{constructor(f,_){this._structArray=f,this._pos1=_*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class la{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(f,_){return f._trim(),_&&(f.isTransferred=!0,_.push(f.arrayBuffer)),{length:f.length,arrayBuffer:f.arrayBuffer}}static deserialize(f){const _=Object.create(this.prototype);return _.arrayBuffer=f.arrayBuffer,_.length=f.length,_.capacity=f.arrayBuffer.byteLength/_.bytesPerElement,_._refreshViews(),_}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(f){this.reserve(f),this.length=f}reserve(f){if(f>this.capacity){this.capacity=Math.max(f,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const _=this.uint8;this._refreshViews(),_&&this.uint8.set(_)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Bo(y,f=1){let _=0,I=0;return{members:y.map(k=>{const F=By[k.type].BYTES_PER_ELEMENT,j=_=od(_,Math.max(f,F)),U=k.components||1;return I=Math.max(I,F),_+=F*U,{name:k.name,type:k.type,components:U,offset:j}}),size:od(_,Math.max(I,f)),alignment:f}}function od(y,f){return Math.ceil(y/f)*f}class lh extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,_){const I=this.length;return this.resize(I+1),this.emplace(I,f,_)}emplace(f,_,I){const k=2*f;return this.int16[k+0]=_,this.int16[k+1]=I,f}}lh.prototype.bytesPerElement=4,_n("StructArrayLayout2i4",lh);class sf extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,_,I){const k=this.length;return this.resize(k+1),this.emplace(k,f,_,I)}emplace(f,_,I,k){const F=3*f;return this.int16[F+0]=_,this.int16[F+1]=I,this.int16[F+2]=k,f}}sf.prototype.bytesPerElement=6,_n("StructArrayLayout3i6",sf);class Zc extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,_,I,k){const F=this.length;return this.resize(F+1),this.emplace(F,f,_,I,k)}emplace(f,_,I,k,F){const j=4*f;return this.int16[j+0]=_,this.int16[j+1]=I,this.int16[j+2]=k,this.int16[j+3]=F,f}}Zc.prototype.bytesPerElement=8,_n("StructArrayLayout4i8",Zc);class cg extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j){const U=this.length;return this.resize(U+1),this.emplace(U,f,_,I,k,F,j)}emplace(f,_,I,k,F,j,U){const te=6*f;return this.int16[te+0]=_,this.int16[te+1]=I,this.int16[te+2]=k,this.int16[te+3]=F,this.int16[te+4]=j,this.int16[te+5]=U,f}}cg.prototype.bytesPerElement=12,_n("StructArrayLayout2i4i12",cg);class ad extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j){const U=this.length;return this.resize(U+1),this.emplace(U,f,_,I,k,F,j)}emplace(f,_,I,k,F,j,U){const te=4*f,de=8*f;return this.int16[te+0]=_,this.int16[te+1]=I,this.uint8[de+4]=k,this.uint8[de+5]=F,this.uint8[de+6]=j,this.uint8[de+7]=U,f}}ad.prototype.bytesPerElement=8,_n("StructArrayLayout2i4ub8",ad);class sd extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,_){const I=this.length;return this.resize(I+1),this.emplace(I,f,_)}emplace(f,_,I){const k=2*f;return this.float32[k+0]=_,this.float32[k+1]=I,f}}sd.prototype.bytesPerElement=8,_n("StructArrayLayout2f8",sd);class xp extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j,U,te,de,be){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,f,_,I,k,F,j,U,te,de,be)}emplace(f,_,I,k,F,j,U,te,de,be,Ae){const He=10*f;return this.uint16[He+0]=_,this.uint16[He+1]=I,this.uint16[He+2]=k,this.uint16[He+3]=F,this.uint16[He+4]=j,this.uint16[He+5]=U,this.uint16[He+6]=te,this.uint16[He+7]=de,this.uint16[He+8]=be,this.uint16[He+9]=Ae,f}}xp.prototype.bytesPerElement=20,_n("StructArrayLayout10ui20",xp);class bp extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j,U,te,de,be,Ae,He){const ce=this.length;return this.resize(ce+1),this.emplace(ce,f,_,I,k,F,j,U,te,de,be,Ae,He)}emplace(f,_,I,k,F,j,U,te,de,be,Ae,He,ce){const Je=12*f;return this.int16[Je+0]=_,this.int16[Je+1]=I,this.int16[Je+2]=k,this.int16[Je+3]=F,this.uint16[Je+4]=j,this.uint16[Je+5]=U,this.uint16[Je+6]=te,this.uint16[Je+7]=de,this.int16[Je+8]=be,this.int16[Je+9]=Ae,this.int16[Je+10]=He,this.int16[Je+11]=ce,f}}bp.prototype.bytesPerElement=24,_n("StructArrayLayout4i4ui4i24",bp);class Vi extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,_,I){const k=this.length;return this.resize(k+1),this.emplace(k,f,_,I)}emplace(f,_,I,k){const F=3*f;return this.float32[F+0]=_,this.float32[F+1]=I,this.float32[F+2]=k,f}}Vi.prototype.bytesPerElement=12,_n("StructArrayLayout3f12",Vi);class L extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(f){const _=this.length;return this.resize(_+1),this.emplace(_,f)}emplace(f,_){return this.uint32[1*f+0]=_,f}}L.prototype.bytesPerElement=4,_n("StructArrayLayout1ul4",L);class p extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j,U,te,de){const be=this.length;return this.resize(be+1),this.emplace(be,f,_,I,k,F,j,U,te,de)}emplace(f,_,I,k,F,j,U,te,de,be){const Ae=10*f,He=5*f;return this.int16[Ae+0]=_,this.int16[Ae+1]=I,this.int16[Ae+2]=k,this.int16[Ae+3]=F,this.int16[Ae+4]=j,this.int16[Ae+5]=U,this.uint32[He+3]=te,this.uint16[Ae+8]=de,this.uint16[Ae+9]=be,f}}p.prototype.bytesPerElement=20,_n("StructArrayLayout6i1ul2ui20",p);class w extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j){const U=this.length;return this.resize(U+1),this.emplace(U,f,_,I,k,F,j)}emplace(f,_,I,k,F,j,U){const te=6*f;return this.int16[te+0]=_,this.int16[te+1]=I,this.int16[te+2]=k,this.int16[te+3]=F,this.int16[te+4]=j,this.int16[te+5]=U,f}}w.prototype.bytesPerElement=12,_n("StructArrayLayout2i2i2i12",w);class P extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F){const j=this.length;return this.resize(j+1),this.emplace(j,f,_,I,k,F)}emplace(f,_,I,k,F,j){const U=4*f,te=8*f;return this.float32[U+0]=_,this.float32[U+1]=I,this.float32[U+2]=k,this.int16[te+6]=F,this.int16[te+7]=j,f}}P.prototype.bytesPerElement=16,_n("StructArrayLayout2f1f2i16",P);class z extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,_,I,k){const F=this.length;return this.resize(F+1),this.emplace(F,f,_,I,k)}emplace(f,_,I,k,F){const j=12*f,U=3*f;return this.uint8[j+0]=_,this.uint8[j+1]=I,this.float32[U+1]=k,this.float32[U+2]=F,f}}z.prototype.bytesPerElement=12,_n("StructArrayLayout2ub2f12",z);class N extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,_,I){const k=this.length;return this.resize(k+1),this.emplace(k,f,_,I)}emplace(f,_,I,k){const F=3*f;return this.uint16[F+0]=_,this.uint16[F+1]=I,this.uint16[F+2]=k,f}}N.prototype.bytesPerElement=6,_n("StructArrayLayout3ui6",N);class J extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot,mt,wt){const qt=this.length;return this.resize(qt+1),this.emplace(qt,f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot,mt,wt)}emplace(f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot,mt,wt,qt){const Bt=24*f,Kt=12*f,cr=48*f;return this.int16[Bt+0]=_,this.int16[Bt+1]=I,this.uint16[Bt+2]=k,this.uint16[Bt+3]=F,this.uint32[Kt+2]=j,this.uint32[Kt+3]=U,this.uint32[Kt+4]=te,this.uint16[Bt+10]=de,this.uint16[Bt+11]=be,this.uint16[Bt+12]=Ae,this.float32[Kt+7]=He,this.float32[Kt+8]=ce,this.uint8[cr+36]=Je,this.uint8[cr+37]=ot,this.uint8[cr+38]=mt,this.uint32[Kt+10]=wt,this.int16[Bt+22]=qt,f}}J.prototype.bytesPerElement=48,_n("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",J);class ee extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot,mt,wt,qt,Bt,Kt,cr,Tr,sn,En,xr,ln,nn,bn){const on=this.length;return this.resize(on+1),this.emplace(on,f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot,mt,wt,qt,Bt,Kt,cr,Tr,sn,En,xr,ln,nn,bn)}emplace(f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot,mt,wt,qt,Bt,Kt,cr,Tr,sn,En,xr,ln,nn,bn,on){const Dr=32*f,$n=16*f;return this.int16[Dr+0]=_,this.int16[Dr+1]=I,this.int16[Dr+2]=k,this.int16[Dr+3]=F,this.int16[Dr+4]=j,this.int16[Dr+5]=U,this.int16[Dr+6]=te,this.int16[Dr+7]=de,this.uint16[Dr+8]=be,this.uint16[Dr+9]=Ae,this.uint16[Dr+10]=He,this.uint16[Dr+11]=ce,this.uint16[Dr+12]=Je,this.uint16[Dr+13]=ot,this.uint16[Dr+14]=mt,this.uint16[Dr+15]=wt,this.uint16[Dr+16]=qt,this.uint16[Dr+17]=Bt,this.uint16[Dr+18]=Kt,this.uint16[Dr+19]=cr,this.uint16[Dr+20]=Tr,this.uint16[Dr+21]=sn,this.uint16[Dr+22]=En,this.uint32[$n+12]=xr,this.float32[$n+13]=ln,this.float32[$n+14]=nn,this.uint16[Dr+30]=bn,this.uint16[Dr+31]=on,f}}ee.prototype.bytesPerElement=64,_n("StructArrayLayout8i15ui1ul2f2ui64",ee);class se extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f){const _=this.length;return this.resize(_+1),this.emplace(_,f)}emplace(f,_){return this.float32[1*f+0]=_,f}}se.prototype.bytesPerElement=4,_n("StructArrayLayout1f4",se);class ye extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,_,I){const k=this.length;return this.resize(k+1),this.emplace(k,f,_,I)}emplace(f,_,I,k){const F=3*f;return this.uint16[6*f+0]=_,this.float32[F+1]=I,this.float32[F+2]=k,f}}ye.prototype.bytesPerElement=12,_n("StructArrayLayout1ui2f12",ye);class we extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,_,I){const k=this.length;return this.resize(k+1),this.emplace(k,f,_,I)}emplace(f,_,I,k){const F=4*f;return this.uint32[2*f+0]=_,this.uint16[F+2]=I,this.uint16[F+3]=k,f}}we.prototype.bytesPerElement=8,_n("StructArrayLayout1ul2ui8",we);class Ie extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,_){const I=this.length;return this.resize(I+1),this.emplace(I,f,_)}emplace(f,_,I){const k=2*f;return this.uint16[k+0]=_,this.uint16[k+1]=I,f}}Ie.prototype.bytesPerElement=4,_n("StructArrayLayout2ui4",Ie);class We extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f){const _=this.length;return this.resize(_+1),this.emplace(_,f)}emplace(f,_){return this.uint16[1*f+0]=_,f}}We.prototype.bytesPerElement=2,_n("StructArrayLayout1ui2",We);class at extends la{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,_,I,k){const F=this.length;return this.resize(F+1),this.emplace(F,f,_,I,k)}emplace(f,_,I,k,F){const j=4*f;return this.float32[j+0]=_,this.float32[j+1]=I,this.float32[j+2]=k,this.float32[j+3]=F,f}}at.prototype.bytesPerElement=16,_n("StructArrayLayout4f16",at);class st extends Kc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new $(this.anchorPointX,this.anchorPointY)}}st.prototype.size=20;class ht extends p{get(f){return new st(this,f)}}_n("CollisionBoxArray",ht);class it extends Kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(f){this._structArray.uint8[this._pos1+37]=f}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(f){this._structArray.uint8[this._pos1+38]=f}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(f){this._structArray.uint32[this._pos4+10]=f}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}it.prototype.size=48;class Vt extends J{get(f){return new it(this,f)}}_n("PlacedSymbolArray",Vt);class ar extends Kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(f){this._structArray.uint32[this._pos4+12]=f}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ar.prototype.size=64;class _t extends ee{get(f){return new ar(this,f)}}_n("SymbolInstanceArray",_t);class Ht extends se{getoffsetX(f){return this.float32[1*f+0]}}_n("GlyphOffsetArray",Ht);class ur extends sf{getx(f){return this.int16[3*f+0]}gety(f){return this.int16[3*f+1]}gettileUnitDistanceFromAnchor(f){return this.int16[3*f+2]}}_n("SymbolLineVertexArray",ur);class hr extends Kc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}hr.prototype.size=12;class _r extends ye{get(f){return new hr(this,f)}}_n("TextAnchorOffsetArray",_r);class zr extends Kc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}zr.prototype.size=8;class Ar extends we{get(f){return new zr(this,f)}}_n("FeatureIndexArray",Ar);class Xr extends lh{}class wn extends lh{}class Bi extends lh{}class pn extends cg{}class Hn extends ad{}class An extends sd{}class lo extends xp{}class Ii extends bp{}class li extends Vi{}class Ri extends L{}class bo extends w{}class wo extends z{}class La extends N{}class pa extends Ie{}const co=Bo([{name:"a_pos",components:2,type:"Int16"}],4),{members:rl}=co;class Fo{constructor(f=[]){this.segments=f}prepareSegment(f,_,I,k){let F=this.segments[this.segments.length-1];return f>Fo.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${Fo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${f}`),(!F||F.vertexLength+f>Fo.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==k)&&(F={vertexOffset:_.length,primitiveOffset:I.length,vertexLength:0,primitiveLength:0},k!==void 0&&(F.sortKey=k),this.segments.push(F)),F}get(){return this.segments}destroy(){for(const f of this.segments)for(const _ in f.vaos)f.vaos[_].destroy()}static simpleSegment(f,_,I,k){return new Fo([{vertexOffset:f,primitiveOffset:_,vertexLength:I,primitiveLength:k,vaos:{},sortKey:0}])}}function Jl(y,f){return 256*(y=me(Math.floor(y),0,255))+me(Math.floor(f),0,255)}Fo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_n("SegmentVector",Fo);const Es=Bo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Xc={exports:{}},Sc={exports:{}};Sc.exports=function(y,f){var _,I,k,F,j,U,te,de;for(I=y.length-(_=3&y.length),k=f,j=3432918353,U=461845907,de=0;de<I;)te=255&y.charCodeAt(de)|(255&y.charCodeAt(++de))<<8|(255&y.charCodeAt(++de))<<16|(255&y.charCodeAt(++de))<<24,++de,k=27492+(65535&(F=5*(65535&(k=(k^=te=(65535&(te=(te=(65535&te)*j+(((te>>>16)*j&65535)<<16)&4294967295)<<15|te>>>17))*U+(((te>>>16)*U&65535)<<16)&4294967295)<<13|k>>>19))+((5*(k>>>16)&65535)<<16)&4294967295))+((58964+(F>>>16)&65535)<<16);switch(te=0,_){case 3:te^=(255&y.charCodeAt(de+2))<<16;case 2:te^=(255&y.charCodeAt(de+1))<<8;case 1:k^=te=(65535&(te=(te=(65535&(te^=255&y.charCodeAt(de)))*j+(((te>>>16)*j&65535)<<16)&4294967295)<<15|te>>>17))*U+(((te>>>16)*U&65535)<<16)&4294967295}return k^=y.length,k=2246822507*(65535&(k^=k>>>16))+((2246822507*(k>>>16)&65535)<<16)&4294967295,k=3266489909*(65535&(k^=k>>>13))+((3266489909*(k>>>16)&65535)<<16)&4294967295,(k^=k>>>16)>>>0};var zu=Sc.exports,Ka={exports:{}};Ka.exports=function(y,f){for(var _,I=y.length,k=f^I,F=0;I>=4;)_=1540483477*(65535&(_=255&y.charCodeAt(F)|(255&y.charCodeAt(++F))<<8|(255&y.charCodeAt(++F))<<16|(255&y.charCodeAt(++F))<<24))+((1540483477*(_>>>16)&65535)<<16),k=1540483477*(65535&k)+((1540483477*(k>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),I-=4,++F;switch(I){case 3:k^=(255&y.charCodeAt(F+2))<<16;case 2:k^=(255&y.charCodeAt(F+1))<<8;case 1:k=1540483477*(65535&(k^=255&y.charCodeAt(F)))+((1540483477*(k>>>16)&65535)<<16)}return k=1540483477*(65535&(k^=k>>>13))+((1540483477*(k>>>16)&65535)<<16),(k^=k>>>15)>>>0};var cs=zu,Ts=Ka.exports;Xc.exports=cs,Xc.exports.murmur3=cs,Xc.exports.murmur2=Ts;var kl=S(Xc.exports);class ma{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(f,_,I,k){this.ids.push(Za(f)),this.positions.push(_,I,k)}getPositions(f){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const _=Za(f);let I=0,k=this.ids.length-1;for(;I<k;){const j=I+k>>1;this.ids[j]>=_?k=j:I=j+1}const F=[];for(;this.ids[I]===_;)F.push({index:this.positions[3*I],start:this.positions[3*I+1],end:this.positions[3*I+2]}),I++;return F}static serialize(f,_){const I=new Float64Array(f.ids),k=new Uint32Array(f.positions);return Fs(I,k,0,I.length-1),_&&_.push(I.buffer,k.buffer),{ids:I,positions:k}}static deserialize(f){const _=new ma;return _.ids=f.ids,_.positions=f.positions,_.indexed=!0,_}}function Za(y){const f=+y;return!isNaN(f)&&f<=Number.MAX_SAFE_INTEGER?f:kl(String(y))}function Fs(y,f,_,I){for(;_<I;){const k=y[_+I>>1];let F=_-1,j=I+1;for(;;){do F++;while(y[F]<k);do j--;while(y[j]>k);if(F>=j)break;Xo(y,F,j),Xo(f,3*F,3*j),Xo(f,3*F+1,3*j+1),Xo(f,3*F+2,3*j+2)}j-_<I-j?(Fs(y,f,_,j),_=j+1):(Fs(y,f,j+1,I),I=j)}}function Xo(y,f,_){const I=y[f];y[f]=y[_],y[_]=I}_n("FeaturePositionMap",ma);class Yc{constructor(f,_){this.gl=f.gl,this.location=_}}class lf extends Yc{constructor(f,_){super(f,_),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class ug extends Yc{constructor(f,_){super(f,_),this.current=[0,0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3]))}}class cf extends Yc{constructor(f,_){super(f,_),this.current=Jr.transparent}set(f){f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a))}}const hg=new Float32Array(16);function wp(y){return[Jl(255*y.r,255*y.g),Jl(255*y.b,255*y.a)]}class Ql{constructor(f,_,I){this.value=f,this.uniformNames=_.map(k=>`u_${k}`),this.type=I}setUniform(f,_,I){f.set(I.constantOr(this.value))}getBinding(f,_,I){return this.type==="color"?new cf(f,_):new lf(f,_)}}class Du{constructor(f,_){this.uniformNames=_.map(I=>`u_${I}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(f,_){this.pixelRatioFrom=_.pixelRatio,this.pixelRatioTo=f.pixelRatio,this.patternFrom=_.tlbr,this.patternTo=f.tlbr}setUniform(f,_,I,k){const F=k==="u_pattern_to"?this.patternTo:k==="u_pattern_from"?this.patternFrom:k==="u_pixel_ratio_to"?this.pixelRatioTo:k==="u_pixel_ratio_from"?this.pixelRatioFrom:null;F&&f.set(F)}getBinding(f,_,I){return I.substr(0,9)==="u_pattern"?new ug(f,_):new lf(f,_)}}class ec{constructor(f,_,I,k){this.expression=f,this.type=I,this.maxValue=0,this.paintVertexAttributes=_.map(F=>({name:`a_${F}`,type:"Float32",components:I==="color"?2:1,offset:0})),this.paintVertexArray=new k}populatePaintArray(f,_,I,k,F){const j=this.paintVertexArray.length,U=this.expression.evaluate(new Ao(0),_,{},k,[],F);this.paintVertexArray.resize(f),this._setPaintValue(j,f,U)}updatePaintArray(f,_,I,k){const F=this.expression.evaluate({zoom:0},I,k);this._setPaintValue(f,_,F)}_setPaintValue(f,_,I){if(this.type==="color"){const k=wp(I);for(let F=f;F<_;F++)this.paintVertexArray.emplace(F,k[0],k[1])}else{for(let k=f;k<_;k++)this.paintVertexArray.emplace(k,I);this.maxValue=Math.max(this.maxValue,Math.abs(I))}}upload(f){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=f.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pl{constructor(f,_,I,k,F,j){this.expression=f,this.uniformNames=_.map(U=>`u_${U}_t`),this.type=I,this.useIntegerZoom=k,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=_.map(U=>({name:`a_${U}`,type:"Float32",components:I==="color"?4:2,offset:0})),this.paintVertexArray=new j}populatePaintArray(f,_,I,k,F){const j=this.expression.evaluate(new Ao(this.zoom),_,{},k,[],F),U=this.expression.evaluate(new Ao(this.zoom+1),_,{},k,[],F),te=this.paintVertexArray.length;this.paintVertexArray.resize(f),this._setPaintValue(te,f,j,U)}updatePaintArray(f,_,I,k){const F=this.expression.evaluate({zoom:this.zoom},I,k),j=this.expression.evaluate({zoom:this.zoom+1},I,k);this._setPaintValue(f,_,F,j)}_setPaintValue(f,_,I,k){if(this.type==="color"){const F=wp(I),j=wp(k);for(let U=f;U<_;U++)this.paintVertexArray.emplace(U,F[0],F[1],j[0],j[1])}else{for(let F=f;F<_;F++)this.paintVertexArray.emplace(F,I,k);this.maxValue=Math.max(this.maxValue,Math.abs(I),Math.abs(k))}}upload(f){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=f.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(f,_){const I=this.useIntegerZoom?Math.floor(_.zoom):_.zoom,k=me(this.expression.interpolationFactor(I,this.zoom,this.zoom+1),0,1);f.set(k)}getBinding(f,_,I){return new lf(f,_)}}class Ns{constructor(f,_,I,k,F,j){this.expression=f,this.type=_,this.useIntegerZoom=I,this.zoom=k,this.layerId=j,this.zoomInPaintVertexArray=new F,this.zoomOutPaintVertexArray=new F}populatePaintArray(f,_,I){const k=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(f),this.zoomOutPaintVertexArray.resize(f),this._setPaintValues(k,f,_.patterns&&_.patterns[this.layerId],I)}updatePaintArray(f,_,I,k,F){this._setPaintValues(f,_,I.patterns&&I.patterns[this.layerId],F)}_setPaintValues(f,_,I,k){if(!k||!I)return;const{min:F,mid:j,max:U}=I,te=k[F],de=k[j],be=k[U];if(te&&de&&be)for(let Ae=f;Ae<_;Ae++)this.zoomInPaintVertexArray.emplace(Ae,de.tl[0],de.tl[1],de.br[0],de.br[1],te.tl[0],te.tl[1],te.br[0],te.br[1],de.pixelRatio,te.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ae,de.tl[0],de.tl[1],de.br[0],de.br[1],be.tl[0],be.tl[1],be.br[0],be.br[1],de.pixelRatio,be.pixelRatio)}upload(f){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=f.createVertexBuffer(this.zoomInPaintVertexArray,Es.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=f.createVertexBuffer(this.zoomOutPaintVertexArray,Es.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Sp{constructor(f,_,I){this.binders={},this._buffers=[];const k=[];for(const F in f.paint._values){if(!I(F))continue;const j=f.paint.get(F);if(!(j instanceof Wa&&Pu(j.property.specification)))continue;const U=MM(F,f.type),te=j.value,de=j.property.specification.type,be=j.property.useIntegerZoom,Ae=j.property.specification["property-type"],He=Ae==="cross-faded"||Ae==="cross-faded-data-driven";if(te.kind==="constant")this.binders[F]=He?new Du(te.value,U):new Ql(te.value,U,de),k.push(`/u_${F}`);else if(te.kind==="source"||He){const ce=k0(F,de,"source");this.binders[F]=He?new Ns(te,de,be,_,ce,f.id):new ec(te,U,de,ce),k.push(`/a_${F}`)}else{const ce=k0(F,de,"composite");this.binders[F]=new pl(te,U,de,be,_,ce),k.push(`/z_${F}`)}}this.cacheKey=k.sort().join("")}getMaxValue(f){const _=this.binders[f];return _ instanceof ec||_ instanceof pl?_.maxValue:0}populatePaintArrays(f,_,I,k,F){for(const j in this.binders){const U=this.binders[j];(U instanceof ec||U instanceof pl||U instanceof Ns)&&U.populatePaintArray(f,_,I,k,F)}}setConstantPatternPositions(f,_){for(const I in this.binders){const k=this.binders[I];k instanceof Du&&k.setConstantPatternPositions(f,_)}}updatePaintArrays(f,_,I,k,F){let j=!1;for(const U in f){const te=_.getPositions(U);for(const de of te){const be=I.feature(de.index);for(const Ae in this.binders){const He=this.binders[Ae];if((He instanceof ec||He instanceof pl||He instanceof Ns)&&He.expression.isStateDependent===!0){const ce=k.paint.get(Ae);He.expression=ce.value,He.updatePaintArray(de.start,de.end,be,f[U],F),j=!0}}}}return j}defines(){const f=[];for(const _ in this.binders){const I=this.binders[_];(I instanceof Ql||I instanceof Du)&&f.push(...I.uniformNames.map(k=>`#define HAS_UNIFORM_${k}`))}return f}getBinderAttributes(){const f=[];for(const _ in this.binders){const I=this.binders[_];if(I instanceof ec||I instanceof pl)for(let k=0;k<I.paintVertexAttributes.length;k++)f.push(I.paintVertexAttributes[k].name);else if(I instanceof Ns)for(let k=0;k<Es.members.length;k++)f.push(Es.members[k].name)}return f}getBinderUniforms(){const f=[];for(const _ in this.binders){const I=this.binders[_];if(I instanceof Ql||I instanceof Du||I instanceof pl)for(const k of I.uniformNames)f.push(k)}return f}getPaintVertexBuffers(){return this._buffers}getUniforms(f,_){const I=[];for(const k in this.binders){const F=this.binders[k];if(F instanceof Ql||F instanceof Du||F instanceof pl){for(const j of F.uniformNames)if(_[j]){const U=F.getBinding(f,_[j],j);I.push({name:j,property:k,binding:U})}}}return I}setUniforms(f,_,I,k){for(const{name:F,property:j,binding:U}of _)this.binders[j].setUniform(U,k,I.get(j),F)}updatePaintBuffers(f){this._buffers=[];for(const _ in this.binders){const I=this.binders[_];if(f&&I instanceof Ns){const k=f.fromScale===2?I.zoomInPaintVertexBuffer:I.zoomOutPaintVertexBuffer;k&&this._buffers.push(k)}else(I instanceof ec||I instanceof pl)&&I.paintVertexBuffer&&this._buffers.push(I.paintVertexBuffer)}}upload(f){for(const _ in this.binders){const I=this.binders[_];(I instanceof ec||I instanceof pl||I instanceof Ns)&&I.upload(f)}this.updatePaintBuffers()}destroy(){for(const f in this.binders){const _=this.binders[f];(_ instanceof ec||_ instanceof pl||_ instanceof Ns)&&_.destroy()}}}class Cc{constructor(f,_,I=()=>!0){this.programConfigurations={};for(const k of f)this.programConfigurations[k.id]=new Sp(k,_,I);this.needsUpload=!1,this._featureMap=new ma,this._bufferOffset=0}populatePaintArrays(f,_,I,k,F,j){for(const U in this.programConfigurations)this.programConfigurations[U].populatePaintArrays(f,_,k,F,j);_.id!==void 0&&this._featureMap.add(_.id,I,this._bufferOffset,f),this._bufferOffset=f,this.needsUpload=!0}updatePaintArrays(f,_,I,k){for(const F of I)this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(f,this._featureMap,_,F,k)||this.needsUpload}get(f){return this.programConfigurations[f]}upload(f){if(this.needsUpload){for(const _ in this.programConfigurations)this.programConfigurations[_].upload(f);this.needsUpload=!1}}destroy(){for(const f in this.programConfigurations)this.programConfigurations[f].destroy()}}function MM(y,f){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[y]||[y.replace(`${f}-`,"").replace(/-/g,"_")]}function k0(y,f,_){const I={color:{source:sd,composite:at},number:{source:se,composite:sd}},k=function(F){return{"line-pattern":{source:lo,composite:lo},"fill-pattern":{source:lo,composite:lo},"fill-extrusion-pattern":{source:lo,composite:lo}}[F]}(y);return k&&k[_]||I[f][_]}_n("ConstantBinder",Ql),_n("CrossFadedConstantBinder",Du),_n("SourceExpressionBinder",ec),_n("CrossFadedCompositeBinder",Ns),_n("CompositeExpressionBinder",pl),_n("ProgramConfiguration",Sp,{omit:["_buffers"]}),_n("ProgramConfigurationSet",Cc);const Sa=8192,Fy=Math.pow(2,14)-1,O0=-Fy-1;function ld(y){const f=Sa/y.extent,_=y.loadGeometry();for(let I=0;I<_.length;I++){const k=_[I];for(let F=0;F<k.length;F++){const j=k[F],U=Math.round(j.x*f),te=Math.round(j.y*f);j.x=me(U,O0,Fy),j.y=me(te,O0,Fy),(U<j.x||U>j.x+1||te<j.y||te>j.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return _}function cd(y,f){return{type:y.type,id:y.id,properties:y.properties,geometry:f?ld(y):[]}}function $a(y,f,_,I,k){y.emplaceBack(2*f+(I+1)/2,2*_+(k+1)/2)}class z0{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(_=>_.id),this.index=f.index,this.hasPattern=!1,this.layoutVertexArray=new wn,this.indexArray=new La,this.segments=new Fo,this.programConfigurations=new Cc(f.layers,f.zoom),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(f,_,I){const k=this.layers[0],F=[];let j=null,U=!1;k.type==="circle"&&(j=k.layout.get("circle-sort-key"),U=!j.isConstant());for(const{feature:te,id:de,index:be,sourceLayerIndex:Ae}of f){const He=this.layers[0]._featureFilter.needGeometry,ce=cd(te,He);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom),ce,I))continue;const Je=U?j.evaluate(ce,{},I):void 0,ot={id:de,properties:te.properties,type:te.type,sourceLayerIndex:Ae,index:be,geometry:He?ce.geometry:ld(te),patterns:{},sortKey:Je};F.push(ot)}U&&F.sort((te,de)=>te.sortKey-de.sortKey);for(const te of F){const{geometry:de,index:be,sourceLayerIndex:Ae}=te,He=f[be].feature;this.addFeature(te,de,be,I),_.featureIndex.insert(He,de,be,Ae,this.index)}}update(f,_,I){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,_,this.stateDependentLayers,I)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,rl),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(f,_,I,k){for(const F of _)for(const j of F){const U=j.x,te=j.y;if(U<0||U>=Sa||te<0||te>=Sa)continue;const de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,f.sortKey),be=de.vertexLength;$a(this.layoutVertexArray,U,te,-1,-1),$a(this.layoutVertexArray,U,te,1,-1),$a(this.layoutVertexArray,U,te,1,1),$a(this.layoutVertexArray,U,te,-1,1),this.indexArray.emplaceBack(be,be+1,be+2),this.indexArray.emplaceBack(be,be+3,be+2),de.vertexLength+=4,de.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,I,{},k)}}function D0(y,f){for(let _=0;_<y.length;_++)if(Ep(f,y[_]))return!0;for(let _=0;_<f.length;_++)if(Ep(y,f[_]))return!0;return!!L0(y,f)}function Cp(y,f,_){return!!Ep(y,f)||!!$0(f,y,_)}function Aw(y,f){if(y.length===1)return Ny(f,y[0]);for(let _=0;_<f.length;_++){const I=f[_];for(let k=0;k<I.length;k++)if(Ep(y,I[k]))return!0}for(let _=0;_<y.length;_++)if(Ny(f,y[_]))return!0;for(let _=0;_<f.length;_++)if(L0(y,f[_]))return!0;return!1}function PM(y,f,_){if(y.length>1){if(L0(y,f))return!0;for(let I=0;I<f.length;I++)if($0(f[I],y,_))return!0}for(let I=0;I<y.length;I++)if($0(y[I],f,_))return!0;return!1}function L0(y,f){if(y.length===0||f.length===0)return!1;for(let _=0;_<y.length-1;_++){const I=y[_],k=y[_+1];for(let F=0;F<f.length-1;F++)if(AM(I,k,f[F],f[F+1]))return!0}return!1}function AM(y,f,_,I){return Fe(y,_,I)!==Fe(f,_,I)&&Fe(y,f,_)!==Fe(y,f,I)}function $0(y,f,_){const I=_*_;if(f.length===1)return y.distSqr(f[0])<I;for(let k=1;k<f.length;k++)if(Rw(y,f[k-1],f[k])<I)return!0;return!1}function Rw(y,f,_){const I=f.distSqr(_);if(I===0)return y.distSqr(f);const k=((y.x-f.x)*(_.x-f.x)+(y.y-f.y)*(_.y-f.y))/I;return y.distSqr(k<0?f:k>1?_:_.sub(f)._mult(k)._add(f))}function Ny(y,f){let _,I,k,F=!1;for(let j=0;j<y.length;j++){_=y[j];for(let U=0,te=_.length-1;U<_.length;te=U++)I=_[U],k=_[te],I.y>f.y!=k.y>f.y&&f.x<(k.x-I.x)*(f.y-I.y)/(k.y-I.y)+I.x&&(F=!F)}return F}function Ep(y,f){let _=!1;for(let I=0,k=y.length-1;I<y.length;k=I++){const F=y[I],j=y[k];F.y>f.y!=j.y>f.y&&f.x<(j.x-F.x)*(f.y-F.y)/(j.y-F.y)+F.x&&(_=!_)}return _}function RM(y,f,_){const I=_[0],k=_[2];if(y.x<I.x&&f.x<I.x||y.x>k.x&&f.x>k.x||y.y<I.y&&f.y<I.y||y.y>k.y&&f.y>k.y)return!1;const F=Fe(y,f,_[0]);return F!==Fe(y,f,_[1])||F!==Fe(y,f,_[2])||F!==Fe(y,f,_[3])}function dg(y,f,_){const I=f.paint.get(y).value;return I.kind==="constant"?I.value:_.programConfigurations.get(f.id).getMaxValue(y)}function Ol(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function uf(y,f,_,I,k){if(!f[0]&&!f[1])return y;const F=$.convert(f)._mult(k);_==="viewport"&&F._rotate(-I);const j=[];for(let U=0;U<y.length;U++)j.push(y[U].sub(F));return j}let kw,ch;_n("CircleBucket",z0,{omit:["layers"]});var Lu={get paint(){return ch=ch||new sa({"circle-radius":new Vn(ve.paint_circle["circle-radius"]),"circle-color":new Vn(ve.paint_circle["circle-color"]),"circle-blur":new Vn(ve.paint_circle["circle-blur"]),"circle-opacity":new Vn(ve.paint_circle["circle-opacity"]),"circle-translate":new Pn(ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Pn(ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pn(ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pn(ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vn(ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vn(ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vn(ve.paint_circle["circle-stroke-opacity"])})},get layout(){return kw=kw||new sa({"circle-sort-key":new Vn(ve.layout_circle["circle-sort-key"])})}},Xa=1e-6,uh=typeof Float32Array<"u"?Float32Array:Array;function rn(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function B0(y,f,_){var I=f[0],k=f[1],F=f[2],j=f[3],U=f[4],te=f[5],de=f[6],be=f[7],Ae=f[8],He=f[9],ce=f[10],Je=f[11],ot=f[12],mt=f[13],wt=f[14],qt=f[15],Bt=_[0],Kt=_[1],cr=_[2],Tr=_[3];return y[0]=Bt*I+Kt*U+cr*Ae+Tr*ot,y[1]=Bt*k+Kt*te+cr*He+Tr*mt,y[2]=Bt*F+Kt*de+cr*ce+Tr*wt,y[3]=Bt*j+Kt*be+cr*Je+Tr*qt,y[4]=(Bt=_[4])*I+(Kt=_[5])*U+(cr=_[6])*Ae+(Tr=_[7])*ot,y[5]=Bt*k+Kt*te+cr*He+Tr*mt,y[6]=Bt*F+Kt*de+cr*ce+Tr*wt,y[7]=Bt*j+Kt*be+cr*Je+Tr*qt,y[8]=(Bt=_[8])*I+(Kt=_[9])*U+(cr=_[10])*Ae+(Tr=_[11])*ot,y[9]=Bt*k+Kt*te+cr*He+Tr*mt,y[10]=Bt*F+Kt*de+cr*ce+Tr*wt,y[11]=Bt*j+Kt*be+cr*Je+Tr*qt,y[12]=(Bt=_[12])*I+(Kt=_[13])*U+(cr=_[14])*Ae+(Tr=_[15])*ot,y[13]=Bt*k+Kt*te+cr*He+Tr*mt,y[14]=Bt*F+Kt*de+cr*ce+Tr*wt,y[15]=Bt*j+Kt*be+cr*Je+Tr*qt,y}Math.hypot||(Math.hypot=function(){for(var y=0,f=arguments.length;f--;)y+=arguments[f]*arguments[f];return Math.sqrt(y)});var Tp,Ip=B0;function hh(y,f,_){var I=f[0],k=f[1],F=f[2],j=f[3];return y[0]=_[0]*I+_[4]*k+_[8]*F+_[12]*j,y[1]=_[1]*I+_[5]*k+_[9]*F+_[13]*j,y[2]=_[2]*I+_[6]*k+_[10]*F+_[14]*j,y[3]=_[3]*I+_[7]*k+_[11]*F+_[15]*j,y}Tp=new uh(4),uh!=Float32Array&&(Tp[0]=0,Tp[1]=0,Tp[2]=0,Tp[3]=0);class mn extends tl{constructor(f){super(f,Lu)}createBucket(f){return new z0(f)}queryRadius(f){const _=f;return dg("circle-radius",this,_)+dg("circle-stroke-width",this,_)+Ol(this.paint.get("circle-translate"))}queryIntersectsFeature(f,_,I,k,F,j,U,te){const de=uf(f,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),j.angle,U),be=this.paint.get("circle-radius").evaluate(_,I)+this.paint.get("circle-stroke-width").evaluate(_,I),Ae=this.paint.get("circle-pitch-alignment")==="map",He=Ae?de:function(Je,ot){return Je.map(mt=>jy(mt,ot))}(de,te),ce=Ae?be*U:be;for(const Je of k)for(const ot of Je){const mt=Ae?ot:jy(ot,te);let wt=ce;const qt=hh([],[ot.x,ot.y,0,1],te);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?wt*=qt[3]/j.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(wt*=j.cameraToCenterDistance/qt[3]),Cp(He,mt,wt))return!0}return!1}}function jy(y,f){const _=hh([],[y.x,y.y,0,1],f);return new $(_[0]/_[3],_[1]/_[3])}class Ow extends z0{}let zw;_n("HeatmapBucket",Ow,{omit:["layers"]});var F0={get paint(){return zw=zw||new sa({"heatmap-radius":new Vn(ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vn(ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pn(ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vp(ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pn(ve.paint_heatmap["heatmap-opacity"])})}};function Vy(y,{width:f,height:_},I,k){if(k){if(k instanceof Uint8ClampedArray)k=new Uint8Array(k.buffer);else if(k.length!==f*_*I)throw new RangeError(`mismatched image size. expected: ${k.length} but got: ${f*_*I}`)}else k=new Uint8Array(f*_*I);return y.width=f,y.height=_,y.data=k,y}function N0(y,{width:f,height:_},I){if(f===y.width&&_===y.height)return;const k=Vy({},{width:f,height:_},I);j0(y,k,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,f),height:Math.min(y.height,_)},I),y.width=f,y.height=_,y.data=k.data}function j0(y,f,_,I,k,F){if(k.width===0||k.height===0)return f;if(k.width>y.width||k.height>y.height||_.x>y.width-k.width||_.y>y.height-k.height)throw new RangeError("out of range source coordinates for image copy");if(k.width>f.width||k.height>f.height||I.x>f.width-k.width||I.y>f.height-k.height)throw new RangeError("out of range destination coordinates for image copy");const j=y.data,U=f.data;if(j===U)throw new Error("srcData equals dstData, so image is already copied");for(let te=0;te<k.height;te++){const de=((_.y+te)*y.width+_.x)*F,be=((I.y+te)*f.width+I.x)*F;for(let Ae=0;Ae<k.width*F;Ae++)U[be+Ae]=j[de+Ae]}return f}class fg{constructor(f,_){Vy(this,f,1,_)}resize(f){N0(this,f,1)}clone(){return new fg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(f,_,I,k,F){j0(f,_,I,k,F,1)}}class ml{constructor(f,_){Vy(this,f,4,_)}resize(f){N0(this,f,4)}replace(f,_){_?this.data.set(f):this.data=f instanceof Uint8ClampedArray?new Uint8Array(f.buffer):f}clone(){return new ml({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(f,_,I,k,F){j0(f,_,I,k,F,4)}}function Uy(y){const f={},_=y.resolution||256,I=y.clips?y.clips.length:1,k=y.image||new ml({width:_,height:I});if(Math.log(_)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${_}`);const F=(j,U,te)=>{f[y.evaluationKey]=te;const de=y.expression.evaluate(f);k.data[j+U+0]=Math.floor(255*de.r/de.a),k.data[j+U+1]=Math.floor(255*de.g/de.a),k.data[j+U+2]=Math.floor(255*de.b/de.a),k.data[j+U+3]=Math.floor(255*de.a)};if(y.clips)for(let j=0,U=0;j<I;++j,U+=4*_)for(let te=0,de=0;te<_;te++,de+=4){const be=te/(_-1),{start:Ae,end:He}=y.clips[j];F(U,de,Ae*(1-be)+He*be)}else for(let j=0,U=0;j<_;j++,U+=4)F(0,U,j/(_-1));return k}_n("AlphaImage",fg),_n("RGBAImage",ml);class V0 extends tl{createBucket(f){return new Ow(f)}constructor(f){super(f,F0),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(f){f==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Hy;var zl={get paint(){return Hy=Hy||new sa({"hillshade-illumination-direction":new Pn(ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pn(ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pn(ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pn(ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pn(ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pn(ve.paint_hillshade["hillshade-accent-color"])})}};class ud extends tl{constructor(f){super(f,zl)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Dw=Bo([{name:"a_pos",components:2,type:"Int16"}],4),{members:U0}=Dw;var pg={exports:{}};function Mp(y,f,_){_=_||2;var I,k,F,j,U,te,de,be=f&&f.length,Ae=be?f[0]*_:y.length,He=H0(y,0,Ae,_,!0),ce=[];if(!He||He.next===He.prev)return ce;if(be&&(He=function(ot,mt,wt,qt){var Bt,Kt,cr,Tr=[];for(Bt=0,Kt=mt.length;Bt<Kt;Bt++)(cr=H0(ot,mt[Bt]*qt,Bt<Kt-1?mt[Bt+1]*qt:ot.length,qt,!1))===cr.next&&(cr.steiner=!0),Tr.push(Ir(cr));for(Tr.sort($w),Bt=0;Bt<Tr.length;Bt++)wt=kM(Tr[Bt],wt);return wt}(y,f,He,_)),y.length>80*_){I=F=y[0],k=j=y[1];for(var Je=_;Je<Ae;Je+=_)(U=y[Je])<I&&(I=U),(te=y[Je+1])<k&&(k=te),U>F&&(F=U),te>j&&(j=te);de=(de=Math.max(F-I,j-k))!==0?32767/de:0}return uo(He,ce,_,I,k,de,0),ce}function H0(y,f,_,I,k){var F,j;if(k===Wy(y,f,_,I)>0)for(F=f;F<_;F+=I)j=_g(F,y[F],y[F+1],j);else for(F=_-I;F>=f;F-=I)j=_g(F,y[F],y[F+1],j);return j&&us(j,j.next)&&(ho(j),j=j.next),j}function Is(y,f){if(!y)return y;f||(f=y);var _,I=y;do if(_=!1,I.steiner||!us(I,I.next)&&vi(I.prev,I,I.next)!==0)I=I.next;else{if(ho(I),(I=f=I.prev)===I.next)break;_=!0}while(_||I!==f);return f}function uo(y,f,_,I,k,F,j){if(y){!j&&F&&function(be,Ae,He,ce){var Je=be;do Je.z===0&&(Je.z=hf(Je.x,Je.y,Ae,He,ce)),Je.prevZ=Je.prev,Je.nextZ=Je.next,Je=Je.next;while(Je!==be);Je.prevZ.nextZ=null,Je.prevZ=null,function(ot){var mt,wt,qt,Bt,Kt,cr,Tr,sn,En=1;do{for(wt=ot,ot=null,Kt=null,cr=0;wt;){for(cr++,qt=wt,Tr=0,mt=0;mt<En&&(Tr++,qt=qt.nextZ);mt++);for(sn=En;Tr>0||sn>0&&qt;)Tr!==0&&(sn===0||!qt||wt.z<=qt.z)?(Bt=wt,wt=wt.nextZ,Tr--):(Bt=qt,qt=qt.nextZ,sn--),Kt?Kt.nextZ=Bt:ot=Bt,Bt.prevZ=Kt,Kt=Bt;wt=qt}Kt.nextZ=null,En*=2}while(cr>1)}(Je)}(y,I,k,F);for(var U,te,de=y;y.prev!==y.next;)if(U=y.prev,te=y.next,F?G0(y,I,k,F):Gy(y))f.push(U.i/_|0),f.push(y.i/_|0),f.push(te.i/_|0),ho(y),y=te.next,de=te.next;else if((y=te)===de){j?j===1?uo(y=mg(Is(y),f,_),f,_,I,k,F,2):j===2&&Lw(y,f,_,I,k,F):uo(Is(y),f,_,I,k,F,1);break}}}function Gy(y){var f=y.prev,_=y,I=y.next;if(vi(f,_,I)>=0)return!1;for(var k=f.x,F=_.x,j=I.x,U=f.y,te=_.y,de=I.y,be=k<F?k<j?k:j:F<j?F:j,Ae=U<te?U<de?U:de:te<de?te:de,He=k>F?k>j?k:j:F>j?F:j,ce=U>te?U>de?U:de:te>de?te:de,Je=I.next;Je!==f;){if(Je.x>=be&&Je.x<=He&&Je.y>=Ae&&Je.y<=ce&&gn(k,U,F,te,j,de,Je.x,Je.y)&&vi(Je.prev,Je,Je.next)>=0)return!1;Je=Je.next}return!0}function G0(y,f,_,I){var k=y.prev,F=y,j=y.next;if(vi(k,F,j)>=0)return!1;for(var U=k.x,te=F.x,de=j.x,be=k.y,Ae=F.y,He=j.y,ce=U<te?U<de?U:de:te<de?te:de,Je=be<Ae?be<He?be:He:Ae<He?Ae:He,ot=U>te?U>de?U:de:te>de?te:de,mt=be>Ae?be>He?be:He:Ae>He?Ae:He,wt=hf(ce,Je,f,_,I),qt=hf(ot,mt,f,_,I),Bt=y.prevZ,Kt=y.nextZ;Bt&&Bt.z>=wt&&Kt&&Kt.z<=qt;){if(Bt.x>=ce&&Bt.x<=ot&&Bt.y>=Je&&Bt.y<=mt&&Bt!==k&&Bt!==j&&gn(U,be,te,Ae,de,He,Bt.x,Bt.y)&&vi(Bt.prev,Bt,Bt.next)>=0||(Bt=Bt.prevZ,Kt.x>=ce&&Kt.x<=ot&&Kt.y>=Je&&Kt.y<=mt&&Kt!==k&&Kt!==j&&gn(U,be,te,Ae,de,He,Kt.x,Kt.y)&&vi(Kt.prev,Kt,Kt.next)>=0))return!1;Kt=Kt.nextZ}for(;Bt&&Bt.z>=wt;){if(Bt.x>=ce&&Bt.x<=ot&&Bt.y>=Je&&Bt.y<=mt&&Bt!==k&&Bt!==j&&gn(U,be,te,Ae,de,He,Bt.x,Bt.y)&&vi(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.prevZ}for(;Kt&&Kt.z<=qt;){if(Kt.x>=ce&&Kt.x<=ot&&Kt.y>=Je&&Kt.y<=mt&&Kt!==k&&Kt!==j&&gn(U,be,te,Ae,de,He,Kt.x,Kt.y)&&vi(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.nextZ}return!0}function mg(y,f,_){var I=y;do{var k=I.prev,F=I.next.next;!us(k,F)&&qy(k,I,I.next,F)&&vg(k,F)&&vg(F,k)&&(f.push(k.i/_|0),f.push(I.i/_|0),f.push(F.i/_|0),ho(I),ho(I.next),I=y=F),I=I.next}while(I!==y);return Is(I)}function Lw(y,f,_,I,k,F){var j=y;do{for(var U=j.next.next;U!==j.prev;){if(j.i!==U.i&&gg(j,U)){var te=Bw(j,U);return j=Is(j,j.next),te=Is(te,te.next),uo(j,f,_,I,k,F,0),void uo(te,f,_,I,k,F,0)}U=U.next}j=j.next}while(j!==y)}function $w(y,f){return y.x-f.x}function kM(y,f){var _=function(k,F){var j,U=F,te=k.x,de=k.y,be=-1/0;do{if(de<=U.y&&de>=U.next.y&&U.next.y!==U.y){var Ae=U.x+(de-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(Ae<=te&&Ae>be&&(be=Ae,j=U.x<U.next.x?U:U.next,Ae===te))return j}U=U.next}while(U!==F);if(!j)return null;var He,ce=j,Je=j.x,ot=j.y,mt=1/0;U=j;do te>=U.x&&U.x>=Je&&te!==U.x&&gn(de<ot?te:be,de,Je,ot,de<ot?be:te,de,U.x,U.y)&&(He=Math.abs(de-U.y)/(te-U.x),vg(U,k)&&(He<mt||He===mt&&(U.x>j.x||U.x===j.x&&Pp(j,U)))&&(j=U,mt=He)),U=U.next;while(U!==ce);return j}(y,f);if(!_)return f;var I=Bw(_,y);return Is(I,I.next),Is(_,_.next)}function Pp(y,f){return vi(y.prev,y,f.prev)<0&&vi(f.next,y,y.next)<0}function hf(y,f,_,I,k){return(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-_)*k|0)|y<<8))|y<<4))|y<<2))|y<<1))|(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-I)*k|0)|f<<8))|f<<4))|f<<2))|f<<1))<<1}function Ir(y){var f=y,_=y;do(f.x<_.x||f.x===_.x&&f.y<_.y)&&(_=f),f=f.next;while(f!==y);return _}function gn(y,f,_,I,k,F,j,U){return(k-j)*(f-U)>=(y-j)*(F-U)&&(y-j)*(I-U)>=(_-j)*(f-U)&&(_-j)*(F-U)>=(k-j)*(I-U)}function gg(y,f){return y.next.i!==f.i&&y.prev.i!==f.i&&!function(_,I){var k=_;do{if(k.i!==_.i&&k.next.i!==_.i&&k.i!==I.i&&k.next.i!==I.i&&qy(k,k.next,_,I))return!0;k=k.next}while(k!==_);return!1}(y,f)&&(vg(y,f)&&vg(f,y)&&function(_,I){var k=_,F=!1,j=(_.x+I.x)/2,U=(_.y+I.y)/2;do k.y>U!=k.next.y>U&&k.next.y!==k.y&&j<(k.next.x-k.x)*(U-k.y)/(k.next.y-k.y)+k.x&&(F=!F),k=k.next;while(k!==_);return F}(y,f)&&(vi(y.prev,y,f.prev)||vi(y,f.prev,f))||us(y,f)&&vi(y.prev,y,y.next)>0&&vi(f.prev,f,f.next)>0)}function vi(y,f,_){return(f.y-y.y)*(_.x-f.x)-(f.x-y.x)*(_.y-f.y)}function us(y,f){return y.x===f.x&&y.y===f.y}function qy(y,f,_,I){var k=nl(vi(y,f,_)),F=nl(vi(y,f,I)),j=nl(vi(_,I,y)),U=nl(vi(_,I,f));return k!==F&&j!==U||!(k!==0||!yg(y,_,f))||!(F!==0||!yg(y,I,f))||!(j!==0||!yg(_,y,I))||!(U!==0||!yg(_,f,I))}function yg(y,f,_){return f.x<=Math.max(y.x,_.x)&&f.x>=Math.min(y.x,_.x)&&f.y<=Math.max(y.y,_.y)&&f.y>=Math.min(y.y,_.y)}function nl(y){return y>0?1:y<0?-1:0}function vg(y,f){return vi(y.prev,y,y.next)<0?vi(y,f,y.next)>=0&&vi(y,y.prev,f)>=0:vi(y,f,y.prev)<0||vi(y,y.next,f)<0}function Bw(y,f){var _=new ki(y.i,y.x,y.y),I=new ki(f.i,f.x,f.y),k=y.next,F=f.prev;return y.next=f,f.prev=y,_.next=k,k.prev=_,I.next=_,_.prev=I,F.next=I,I.prev=F,I}function _g(y,f,_,I){var k=new ki(y,f,_);return I?(k.next=I.next,k.prev=I,I.next.prev=k,I.next=k):(k.prev=k,k.next=k),k}function ho(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function ki(y,f,_){this.i=y,this.x=f,this.y=_,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wy(y,f,_,I){for(var k=0,F=f,j=_-I;F<_;F+=I)k+=(y[j]-y[F])*(y[F+1]+y[j+1]),j=F;return k}pg.exports=Mp,pg.exports.default=Mp,Mp.deviation=function(y,f,_,I){var k=f&&f.length,F=Math.abs(Wy(y,0,k?f[0]*_:y.length,_));if(k)for(var j=0,U=f.length;j<U;j++)F-=Math.abs(Wy(y,f[j]*_,j<U-1?f[j+1]*_:y.length,_));var te=0;for(j=0;j<I.length;j+=3){var de=I[j]*_,be=I[j+1]*_,Ae=I[j+2]*_;te+=Math.abs((y[de]-y[Ae])*(y[be+1]-y[de+1])-(y[de]-y[be])*(y[Ae+1]-y[de+1]))}return F===0&&te===0?0:Math.abs((te-F)/F)},Mp.flatten=function(y){for(var f=y[0][0].length,_={vertices:[],holes:[],dimensions:f},I=0,k=0;k<y.length;k++){for(var F=0;F<y[k].length;F++)for(var j=0;j<f;j++)_.vertices.push(y[k][F][j]);k>0&&_.holes.push(I+=y[k-1].length)}return _};var gl=S(pg.exports);function Ky(y,f,_,I,k){hd(y,f,_||0,I||y.length-1,k||q0)}function hd(y,f,_,I,k){for(;I>_;){if(I-_>600){var F=I-_+1,j=f-_+1,U=Math.log(F),te=.5*Math.exp(2*U/3),de=.5*Math.sqrt(U*te*(F-te)/F)*(j-F/2<0?-1:1);hd(y,f,Math.max(_,Math.floor(f-j*te/F+de)),Math.min(I,Math.floor(f+(F-j)*te/F+de)),k)}var be=y[f],Ae=_,He=I;for(df(y,_,f),k(y[I],be)>0&&df(y,_,I);Ae<He;){for(df(y,Ae,He),Ae++,He--;k(y[Ae],be)<0;)Ae++;for(;k(y[He],be)>0;)He--}k(y[_],be)===0?df(y,_,He):df(y,++He,I),He<=f&&(_=He+1),f<=He&&(I=He-1)}}function df(y,f,_){var I=y[f];y[f]=y[_],y[_]=I}function q0(y,f){return y<f?-1:y>f?1:0}function $u(y,f){const _=y.length;if(_<=1)return[y];const I=[];let k,F;for(let j=0;j<_;j++){const U=Le(y[j]);U!==0&&(y[j].area=Math.abs(U),F===void 0&&(F=U<0),F===U<0?(k&&I.push(k),k=[y[j]]):k.push(y[j]))}if(k&&I.push(k),f>1)for(let j=0;j<I.length;j++)I[j].length<=f||(Ky(I[j],f,1,I[j].length-1,dd),I[j]=I[j].slice(0,f));return I}function dd(y,f){return f.area-y.area}function Ap(y,f,_){const I=_.patternDependencies;let k=!1;for(const F of f){const j=F.paint.get(`${y}-pattern`);j.isConstant()||(k=!0);const U=j.constantOr(null);U&&(k=!0,I[U.to]=!0,I[U.from]=!0)}return k}function Rp(y,f,_,I,k){const F=k.patternDependencies;for(const j of f){const U=j.paint.get(`${y}-pattern`).value;if(U.kind!=="constant"){let te=U.evaluate({zoom:I-1},_,{},k.availableImages),de=U.evaluate({zoom:I},_,{},k.availableImages),be=U.evaluate({zoom:I+1},_,{},k.availableImages);te=te&&te.name?te.name:te,de=de&&de.name?de.name:de,be=be&&be.name?be.name:be,F[te]=!0,F[de]=!0,F[be]=!0,_.patterns[j.id]={min:te,mid:de,max:be}}}return _}class xg{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(_=>_.id),this.index=f.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bi,this.indexArray=new La,this.indexArray2=new pa,this.programConfigurations=new Cc(f.layers,f.zoom),this.segments=new Fo,this.segments2=new Fo,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(f,_,I){this.hasPattern=Ap("fill",this.layers,_);const k=this.layers[0].layout.get("fill-sort-key"),F=!k.isConstant(),j=[];for(const{feature:U,id:te,index:de,sourceLayerIndex:be}of f){const Ae=this.layers[0]._featureFilter.needGeometry,He=cd(U,Ae);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom),He,I))continue;const ce=F?k.evaluate(He,{},I,_.availableImages):void 0,Je={id:te,properties:U.properties,type:U.type,sourceLayerIndex:be,index:de,geometry:Ae?He.geometry:ld(U),patterns:{},sortKey:ce};j.push(Je)}F&&j.sort((U,te)=>U.sortKey-te.sortKey);for(const U of j){const{geometry:te,index:de,sourceLayerIndex:be}=U;if(this.hasPattern){const Ae=Rp("fill",this.layers,U,this.zoom,_);this.patternFeatures.push(Ae)}else this.addFeature(U,te,de,I,{});_.featureIndex.insert(f[de].feature,te,de,be,this.index)}}update(f,_,I){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,_,this.stateDependentLayers,I)}addFeatures(f,_,I){for(const k of this.patternFeatures)this.addFeature(k,k.geometry,k.index,_,I)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,U0),this.indexBuffer=f.createIndexBuffer(this.indexArray),this.indexBuffer2=f.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(f,_,I,k,F){for(const j of $u(_,500)){let U=0;for(const ce of j)U+=ce.length;const te=this.segments.prepareSegment(U,this.layoutVertexArray,this.indexArray),de=te.vertexLength,be=[],Ae=[];for(const ce of j){if(ce.length===0)continue;ce!==j[0]&&Ae.push(be.length/2);const Je=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),ot=Je.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(ot+ce.length-1,ot),be.push(ce[0].x),be.push(ce[0].y);for(let mt=1;mt<ce.length;mt++)this.layoutVertexArray.emplaceBack(ce[mt].x,ce[mt].y),this.indexArray2.emplaceBack(ot+mt-1,ot+mt),be.push(ce[mt].x),be.push(ce[mt].y);Je.vertexLength+=ce.length,Je.primitiveLength+=ce.length}const He=gl(be,Ae);for(let ce=0;ce<He.length;ce+=3)this.indexArray.emplaceBack(de+He[ce],de+He[ce+1],de+He[ce+2]);te.vertexLength+=U,te.primitiveLength+=He.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,I,F,k)}}let Zy,Xy;_n("FillBucket",xg,{omit:["layers","patternFeatures"]});var fd={get paint(){return Xy=Xy||new sa({"fill-antialias":new Pn(ve.paint_fill["fill-antialias"]),"fill-opacity":new Vn(ve.paint_fill["fill-opacity"]),"fill-color":new Vn(ve.paint_fill["fill-color"]),"fill-outline-color":new Vn(ve.paint_fill["fill-outline-color"]),"fill-translate":new Pn(ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Pn(ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new el(ve.paint_fill["fill-pattern"])})},get layout(){return Zy=Zy||new sa({"fill-sort-key":new Vn(ve.layout_fill["fill-sort-key"])})}};class W0 extends tl{constructor(f){super(f,fd)}recalculate(f,_){super.recalculate(f,_);const I=this.paint._values["fill-outline-color"];I.value.kind==="constant"&&I.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(f){return new xg(f)}queryRadius(){return Ol(this.paint.get("fill-translate"))}queryIntersectsFeature(f,_,I,k,F,j,U){return Aw(uf(f,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),j.angle,U),k)}isTileClipped(){return!0}}const Yy=Bo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),K0=Bo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Z0}=Yy;var yl={},Ca=R,Jy=pd;function pd(y,f,_,I,k){this.properties={},this.extent=_,this.type=0,this._pbf=y,this._geometry=-1,this._keys=I,this._values=k,y.readFields(bg,this,f)}function bg(y,f,_){y==1?f.id=_.readVarint():y==2?function(I,k){for(var F=I.readVarint()+I.pos;I.pos<F;){var j=k._keys[I.readVarint()],U=k._values[I.readVarint()];k.properties[j]=U}}(_,f):y==3?f.type=_.readVarint():y==4&&(f._geometry=_.pos)}function ff(y){for(var f,_,I=0,k=0,F=y.length,j=F-1;k<F;j=k++)I+=((_=y[j]).x-(f=y[k]).x)*(f.y+_.y);return I}pd.types=["Unknown","Point","LineString","Polygon"],pd.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var f,_=y.readVarint()+y.pos,I=1,k=0,F=0,j=0,U=[];y.pos<_;){if(k<=0){var te=y.readVarint();I=7&te,k=te>>3}if(k--,I===1||I===2)F+=y.readSVarint(),j+=y.readSVarint(),I===1&&(f&&U.push(f),f=[]),f.push(new Ca(F,j));else{if(I!==7)throw new Error("unknown command "+I);f&&f.push(f[0].clone())}}return f&&U.push(f),U},pd.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var f=y.readVarint()+y.pos,_=1,I=0,k=0,F=0,j=1/0,U=-1/0,te=1/0,de=-1/0;y.pos<f;){if(I<=0){var be=y.readVarint();_=7&be,I=be>>3}if(I--,_===1||_===2)(k+=y.readSVarint())<j&&(j=k),k>U&&(U=k),(F+=y.readSVarint())<te&&(te=F),F>de&&(de=F);else if(_!==7)throw new Error("unknown command "+_)}return[j,te,U,de]},pd.prototype.toGeoJSON=function(y,f,_){var I,k,F=this.extent*Math.pow(2,_),j=this.extent*y,U=this.extent*f,te=this.loadGeometry(),de=pd.types[this.type];function be(ce){for(var Je=0;Je<ce.length;Je++){var ot=ce[Je];ce[Je]=[360*(ot.x+j)/F-180,360/Math.PI*Math.atan(Math.exp((180-360*(ot.y+U)/F)*Math.PI/180))-90]}}switch(this.type){case 1:var Ae=[];for(I=0;I<te.length;I++)Ae[I]=te[I][0];be(te=Ae);break;case 2:for(I=0;I<te.length;I++)be(te[I]);break;case 3:for(te=function(ce){var Je=ce.length;if(Je<=1)return[ce];for(var ot,mt,wt=[],qt=0;qt<Je;qt++){var Bt=ff(ce[qt]);Bt!==0&&(mt===void 0&&(mt=Bt<0),mt===Bt<0?(ot&&wt.push(ot),ot=[ce[qt]]):ot.push(ce[qt]))}return ot&&wt.push(ot),wt}(te),I=0;I<te.length;I++)for(k=0;k<te[I].length;k++)be(te[I][k])}te.length===1?te=te[0]:de="Multi"+de;var He={type:"Feature",geometry:{type:de,coordinates:te},properties:this.properties};return"id"in this&&(He.id=this.id),He};var X0=Jy,Qy=kp;function kp(y,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(wg,this,f),this.length=this._features.length}function wg(y,f,_){y===15?f.version=_.readVarint():y===1?f.name=_.readString():y===5?f.extent=_.readVarint():y===2?f._features.push(_.pos):y===3?f._keys.push(_.readString()):y===4&&f._values.push(function(I){for(var k=null,F=I.readVarint()+I.pos;I.pos<F;){var j=I.readVarint()>>3;k=j===1?I.readString():j===2?I.readFloat():j===3?I.readDouble():j===4?I.readVarint64():j===5?I.readVarint():j===6?I.readSVarint():j===7?I.readBoolean():null}return k}(_))}kp.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var f=this._pbf.readVarint()+this._pbf.pos;return new X0(this._pbf,f,this.extent,this._keys,this._values)};var Y0=Qy;function ev(y,f,_){if(y===3){var I=new Y0(_,_.readVarint()+_.pos);I.length&&(f[I.name]=I)}}yl.VectorTile=function(y,f){this.layers=y.readFields(ev,{},f)},yl.VectorTileFeature=Jy,yl.VectorTileLayer=Qy;const J0=yl.VectorTileFeature.types,tv=Math.pow(2,13);function pf(y,f,_,I,k,F,j,U){y.emplaceBack(f,_,2*Math.floor(I*tv)+j,k*tv*2,F*tv*2,Math.round(U))}class rv{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(_=>_.id),this.index=f.index,this.hasPattern=!1,this.layoutVertexArray=new pn,this.centroidVertexArray=new Xr,this.indexArray=new La,this.programConfigurations=new Cc(f.layers,f.zoom),this.segments=new Fo,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(f,_,I){this.features=[],this.hasPattern=Ap("fill-extrusion",this.layers,_);for(const{feature:k,id:F,index:j,sourceLayerIndex:U}of f){const te=this.layers[0]._featureFilter.needGeometry,de=cd(k,te);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom),de,I))continue;const be={id:F,sourceLayerIndex:U,index:j,geometry:te?de.geometry:ld(k),properties:k.properties,type:k.type,patterns:{}};this.hasPattern?this.features.push(Rp("fill-extrusion",this.layers,be,this.zoom,_)):this.addFeature(be,be.geometry,j,I,{}),_.featureIndex.insert(k,be.geometry,j,U,this.index,!0)}}addFeatures(f,_,I){for(const k of this.features){const{geometry:F}=k;this.addFeature(k,F,k.index,_,I)}}update(f,_,I){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,_,this.stateDependentLayers,I)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,Z0),this.centroidVertexBuffer=f.createVertexBuffer(this.centroidVertexArray,K0.members,!0),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(f,_,I,k,F){const j={x:0,y:0,vertexCount:0};for(const U of $u(_,500)){let te=0;for(const Je of U)te+=Je.length;let de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Je of U){if(Je.length===0||Nw(Je))continue;let ot=0;for(let mt=0;mt<Je.length;mt++){const wt=Je[mt];if(mt>=1){const qt=Je[mt-1];if(!Fw(wt,qt)){de.vertexLength+4>Fo.MAX_VERTEX_ARRAY_LENGTH&&(de=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Bt=wt.sub(qt)._perp()._unit(),Kt=qt.dist(wt);ot+Kt>32768&&(ot=0),pf(this.layoutVertexArray,wt.x,wt.y,Bt.x,Bt.y,0,0,ot),pf(this.layoutVertexArray,wt.x,wt.y,Bt.x,Bt.y,0,1,ot),j.x+=2*wt.x,j.y+=2*wt.y,j.vertexCount+=2,ot+=Kt,pf(this.layoutVertexArray,qt.x,qt.y,Bt.x,Bt.y,0,0,ot),pf(this.layoutVertexArray,qt.x,qt.y,Bt.x,Bt.y,0,1,ot),j.x+=2*qt.x,j.y+=2*qt.y,j.vertexCount+=2;const cr=de.vertexLength;this.indexArray.emplaceBack(cr,cr+2,cr+1),this.indexArray.emplaceBack(cr+1,cr+2,cr+3),de.vertexLength+=4,de.primitiveLength+=2}}}}if(de.vertexLength+te>Fo.MAX_VERTEX_ARRAY_LENGTH&&(de=this.segments.prepareSegment(te,this.layoutVertexArray,this.indexArray)),J0[f.type]!=="Polygon")continue;const be=[],Ae=[],He=de.vertexLength;for(const Je of U)if(Je.length!==0){Je!==U[0]&&Ae.push(be.length/2);for(let ot=0;ot<Je.length;ot++){const mt=Je[ot];pf(this.layoutVertexArray,mt.x,mt.y,0,0,1,1,0),j.x+=mt.x,j.y+=mt.y,j.vertexCount+=1,be.push(mt.x),be.push(mt.y)}}const ce=gl(be,Ae);for(let Je=0;Je<ce.length;Je+=3)this.indexArray.emplaceBack(He+ce[Je],He+ce[Je+2],He+ce[Je+1]);de.primitiveLength+=ce.length/3,de.vertexLength+=te}for(let U=0;U<j.vertexCount;U++)this.centroidVertexArray.emplaceBack(Math.floor(j.x/j.vertexCount),Math.floor(j.y/j.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,I,F,k)}}function Fw(y,f){return y.x===f.x&&(y.x<0||y.x>Sa)||y.y===f.y&&(y.y<0||y.y>Sa)}function Nw(y){return y.every(f=>f.x<0)||y.every(f=>f.x>Sa)||y.every(f=>f.y<0)||y.every(f=>f.y>Sa)}let Q0;_n("FillExtrusionBucket",rv,{omit:["layers","features"]});var jw={get paint(){return Q0=Q0||new sa({"fill-extrusion-opacity":new Pn(ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vn(ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pn(ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pn(ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new el(ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vn(ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vn(ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pn(ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Vw extends tl{constructor(f){super(f,jw)}createBucket(f){return new rv(f)}queryRadius(){return Ol(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(f,_,I,k,F,j,U,te){const de=uf(f,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),j.angle,U),be=this.paint.get("fill-extrusion-height").evaluate(_,I),Ae=this.paint.get("fill-extrusion-base").evaluate(_,I),He=function(Je,ot,mt,wt){const qt=[];for(const Bt of Je){const Kt=[Bt.x,Bt.y,0,1];hh(Kt,Kt,ot),qt.push(new $(Kt[0]/Kt[3],Kt[1]/Kt[3]))}return qt}(de,te),ce=function(Je,ot,mt,wt){const qt=[],Bt=[],Kt=wt[8]*ot,cr=wt[9]*ot,Tr=wt[10]*ot,sn=wt[11]*ot,En=wt[8]*mt,xr=wt[9]*mt,ln=wt[10]*mt,nn=wt[11]*mt;for(const bn of Je){const on=[],Dr=[];for(const $n of bn){const Rn=$n.x,Pi=$n.y,to=wt[0]*Rn+wt[4]*Pi+wt[12],Xn=wt[1]*Rn+wt[5]*Pi+wt[13],ca=wt[2]*Rn+wt[6]*Pi+wt[14],Ya=wt[3]*Rn+wt[7]*Pi+wt[15],Co=ca+Tr,Ba=Ya+sn,ga=to+En,hs=Xn+xr,Yo=ca+ln,Jo=Ya+nn,Ja=new $((to+Kt)/Ba,(Xn+cr)/Ba);Ja.z=Co/Ba,on.push(Ja);const ya=new $(ga/Jo,hs/Jo);ya.z=Yo/Jo,Dr.push(ya)}qt.push(on),Bt.push(Dr)}return[qt,Bt]}(k,Ae,be,te);return function(Je,ot,mt){let wt=1/0;Aw(mt,ot)&&(wt=e1(mt,ot[0]));for(let qt=0;qt<ot.length;qt++){const Bt=ot[qt],Kt=Je[qt];for(let cr=0;cr<Bt.length-1;cr++){const Tr=Bt[cr],sn=[Tr,Bt[cr+1],Kt[cr+1],Kt[cr],Tr];D0(mt,sn)&&(wt=Math.min(wt,e1(mt,sn)))}}return wt!==1/0&&wt}(ce[0],ce[1],He)}}function Op(y,f){return y.x*f.x+y.y*f.y}function e1(y,f){if(y.length===1){let _=0;const I=f[_++];let k;for(;!k||I.equals(k);)if(k=f[_++],!k)return 1/0;for(;_<f.length;_++){const F=f[_],j=y[0],U=k.sub(I),te=F.sub(I),de=j.sub(I),be=Op(U,U),Ae=Op(U,te),He=Op(te,te),ce=Op(de,U),Je=Op(de,te),ot=be*He-Ae*Ae,mt=(He*ce-Ae*Je)/ot,wt=(be*Je-Ae*ce)/ot,qt=I.z*(1-mt-wt)+k.z*mt+F.z*wt;if(isFinite(qt))return qt}return 1/0}{let _=1/0;for(const I of f)_=Math.min(_,I.z);return _}}const Uw=Bo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:OM}=Uw,zM=Bo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:qi}=zM,Hw=yl.VectorTileFeature.types,DM=Math.cos(Math.PI/180*37.5),Gw=Math.pow(2,14)/.5;class zp{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(_=>_.id),this.index=f.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(_=>{this.gradients[_.id]={}}),this.layoutVertexArray=new Hn,this.layoutVertexArray2=new An,this.indexArray=new La,this.programConfigurations=new Cc(f.layers,f.zoom),this.segments=new Fo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(f,_,I){this.hasPattern=Ap("line",this.layers,_);const k=this.layers[0].layout.get("line-sort-key"),F=!k.isConstant(),j=[];for(const{feature:U,id:te,index:de,sourceLayerIndex:be}of f){const Ae=this.layers[0]._featureFilter.needGeometry,He=cd(U,Ae);if(!this.layers[0]._featureFilter.filter(new Ao(this.zoom),He,I))continue;const ce=F?k.evaluate(He,{},I):void 0,Je={id:te,properties:U.properties,type:U.type,sourceLayerIndex:be,index:de,geometry:Ae?He.geometry:ld(U),patterns:{},sortKey:ce};j.push(Je)}F&&j.sort((U,te)=>U.sortKey-te.sortKey);for(const U of j){const{geometry:te,index:de,sourceLayerIndex:be}=U;if(this.hasPattern){const Ae=Rp("line",this.layers,U,this.zoom,_);this.patternFeatures.push(Ae)}else this.addFeature(U,te,de,I,{});_.featureIndex.insert(f[de].feature,te,de,be,this.index)}}update(f,_,I){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,_,this.stateDependentLayers,I)}addFeatures(f,_,I){for(const k of this.patternFeatures)this.addFeature(k,k.geometry,k.index,_,I)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=f.createVertexBuffer(this.layoutVertexArray2,qi)),this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,OM),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(f){if(f.properties&&Object.prototype.hasOwnProperty.call(f.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(f.properties,"mapbox_clip_end"))return{start:+f.properties.mapbox_clip_start,end:+f.properties.mapbox_clip_end}}addFeature(f,_,I,k,F){const j=this.layers[0].layout,U=j.get("line-join").evaluate(f,{}),te=j.get("line-cap"),de=j.get("line-miter-limit"),be=j.get("line-round-limit");this.lineClips=this.lineFeatureClips(f);for(const Ae of _)this.addLine(Ae,f,U,te,de,be);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,I,F,k)}addLine(f,_,I,k,F,j){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let wt=0;wt<f.length-1;wt++)this.totalDistance+=f[wt].dist(f[wt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const U=Hw[_.type]==="Polygon";let te=f.length;for(;te>=2&&f[te-1].equals(f[te-2]);)te--;let de=0;for(;de<te-1&&f[de].equals(f[de+1]);)de++;if(te<(U?3:2))return;I==="bevel"&&(F=1.05);const be=this.overscaling<=16?15*Sa/(512*this.overscaling):0,Ae=this.segments.prepareSegment(10*te,this.layoutVertexArray,this.indexArray);let He,ce,Je,ot,mt;this.e1=this.e2=-1,U&&(He=f[te-2],mt=f[de].sub(He)._unit()._perp());for(let wt=de;wt<te;wt++){if(Je=wt===te-1?U?f[de+1]:void 0:f[wt+1],Je&&f[wt].equals(Je))continue;mt&&(ot=mt),He&&(ce=He),He=f[wt],mt=Je?Je.sub(He)._unit()._perp():ot,ot=ot||mt;let qt=ot.add(mt);qt.x===0&&qt.y===0||qt._unit();const Bt=ot.x*mt.x+ot.y*mt.y,Kt=qt.x*mt.x+qt.y*mt.y,cr=Kt!==0?1/Kt:1/0,Tr=2*Math.sqrt(2-2*Kt),sn=Kt<DM&&ce&&Je,En=ot.x*mt.y-ot.y*mt.x>0;if(sn&&wt>de){const nn=He.dist(ce);if(nn>2*be){const bn=He.sub(He.sub(ce)._mult(be/nn)._round());this.updateDistance(ce,bn),this.addCurrentVertex(bn,ot,0,0,Ae),ce=bn}}const xr=ce&&Je;let ln=xr?I:U?"butt":k;if(xr&&ln==="round"&&(cr<j?ln="miter":cr<=2&&(ln="fakeround")),ln==="miter"&&cr>F&&(ln="bevel"),ln==="bevel"&&(cr>2&&(ln="flipbevel"),cr<F&&(ln="miter")),ce&&this.updateDistance(ce,He),ln==="miter")qt._mult(cr),this.addCurrentVertex(He,qt,0,0,Ae);else if(ln==="flipbevel"){if(cr>100)qt=mt.mult(-1);else{const nn=cr*ot.add(mt).mag()/ot.sub(mt).mag();qt._perp()._mult(nn*(En?-1:1))}this.addCurrentVertex(He,qt,0,0,Ae),this.addCurrentVertex(He,qt.mult(-1),0,0,Ae)}else if(ln==="bevel"||ln==="fakeround"){const nn=-Math.sqrt(cr*cr-1),bn=En?nn:0,on=En?0:nn;if(ce&&this.addCurrentVertex(He,ot,bn,on,Ae),ln==="fakeround"){const Dr=Math.round(180*Tr/Math.PI/20);for(let $n=1;$n<Dr;$n++){let Rn=$n/Dr;if(Rn!==.5){const to=Rn-.5;Rn+=Rn*to*(Rn-1)*((1.0904+Bt*(Bt*(3.55645-1.43519*Bt)-3.2452))*to*to+(.848013+Bt*(.215638*Bt-1.06021)))}const Pi=mt.sub(ot)._mult(Rn)._add(ot)._unit()._mult(En?-1:1);this.addHalfVertex(He,Pi.x,Pi.y,!1,En,0,Ae)}}Je&&this.addCurrentVertex(He,mt,-bn,-on,Ae)}else if(ln==="butt")this.addCurrentVertex(He,qt,0,0,Ae);else if(ln==="square"){const nn=ce?1:-1;this.addCurrentVertex(He,qt,nn,nn,Ae)}else ln==="round"&&(ce&&(this.addCurrentVertex(He,ot,0,0,Ae),this.addCurrentVertex(He,ot,1,1,Ae,!0)),Je&&(this.addCurrentVertex(He,mt,-1,-1,Ae,!0),this.addCurrentVertex(He,mt,0,0,Ae)));if(sn&&wt<te-1){const nn=He.dist(Je);if(nn>2*be){const bn=He.add(Je.sub(He)._mult(be/nn)._round());this.updateDistance(He,bn),this.addCurrentVertex(bn,mt,0,0,Ae),He=bn}}}}addCurrentVertex(f,_,I,k,F,j=!1){const U=_.y*k-_.x,te=-_.y-_.x*k;this.addHalfVertex(f,_.x+_.y*I,_.y-_.x*I,j,!1,I,F),this.addHalfVertex(f,U,te,j,!0,-k,F),this.distance>Gw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(f,_,I,k,F,j))}addHalfVertex({x:f,y:_},I,k,F,j,U,te){const de=.5*(this.lineClips?this.scaledDistance*(Gw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((f<<1)+(F?1:0),(_<<1)+(j?1:0),Math.round(63*I)+128,Math.round(63*k)+128,1+(U===0?0:U<0?-1:1)|(63&de)<<2,de>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const be=te.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,be),te.primitiveLength++),j?this.e2=be:this.e1=be}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(f,_){this.distance+=f.dist(_),this.updateScaledDistance()}}let t1,qw;_n("LineBucket",zp,{omit:["layers","patternFeatures"]});var r1={get paint(){return qw=qw||new sa({"line-opacity":new Vn(ve.paint_line["line-opacity"]),"line-color":new Vn(ve.paint_line["line-color"]),"line-translate":new Pn(ve.paint_line["line-translate"]),"line-translate-anchor":new Pn(ve.paint_line["line-translate-anchor"]),"line-width":new Vn(ve.paint_line["line-width"]),"line-gap-width":new Vn(ve.paint_line["line-gap-width"]),"line-offset":new Vn(ve.paint_line["line-offset"]),"line-blur":new Vn(ve.paint_line["line-blur"]),"line-dasharray":new af(ve.paint_line["line-dasharray"]),"line-pattern":new el(ve.paint_line["line-pattern"]),"line-gradient":new vp(ve.paint_line["line-gradient"])})},get layout(){return t1=t1||new sa({"line-cap":new Pn(ve.layout_line["line-cap"]),"line-join":new Vn(ve.layout_line["line-join"]),"line-miter-limit":new Pn(ve.layout_line["line-miter-limit"]),"line-round-limit":new Pn(ve.layout_line["line-round-limit"]),"line-sort-key":new Vn(ve.layout_line["line-sort-key"])})}};class Ww extends Vn{possiblyEvaluate(f,_){return _=new Ao(Math.floor(_.zoom),{now:_.now,fadeDuration:_.fadeDuration,zoomHistory:_.zoomHistory,transition:_.transition}),super.possiblyEvaluate(f,_)}evaluate(f,_,I,k){return _=xe({},_,{zoom:Math.floor(_.zoom)}),super.evaluate(f,_,I,k)}}let nv;class n1 extends tl{constructor(f){super(f,r1),this.gradientVersion=0,nv||(nv=new Ww(r1.paint.properties["line-width"].specification),nv.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(f){if(f==="line-gradient"){const _=this.gradientExpression();this.stepInterpolant=!!function(I){return I._styleExpression!==void 0}(_)&&_._styleExpression.expression instanceof si,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(f,_){super.recalculate(f,_),this.paint._values["line-floorwidth"]=nv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)}createBucket(f){return new zp(f)}queryRadius(f){const _=f,I=Dp(dg("line-width",this,_),dg("line-gap-width",this,_)),k=dg("line-offset",this,_);return I/2+Math.abs(k)+Ol(this.paint.get("line-translate"))}queryIntersectsFeature(f,_,I,k,F,j,U){const te=uf(f,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),j.angle,U),de=U/2*Dp(this.paint.get("line-width").evaluate(_,I),this.paint.get("line-gap-width").evaluate(_,I)),be=this.paint.get("line-offset").evaluate(_,I);return be&&(k=function(Ae,He){const ce=[];for(let Je=0;Je<Ae.length;Je++){const ot=Ae[Je],mt=[];for(let wt=0;wt<ot.length;wt++){const qt=ot[wt-1],Bt=ot[wt],Kt=ot[wt+1],cr=wt===0?new $(0,0):Bt.sub(qt)._unit()._perp(),Tr=wt===ot.length-1?new $(0,0):Kt.sub(Bt)._unit()._perp(),sn=cr._add(Tr)._unit(),En=sn.x*Tr.x+sn.y*Tr.y;En!==0&&sn._mult(1/En),mt.push(sn._mult(He)._add(Bt))}ce.push(mt)}return ce}(k,be*U)),function(Ae,He,ce){for(let Je=0;Je<He.length;Je++){const ot=He[Je];if(Ae.length>=3){for(let mt=0;mt<ot.length;mt++)if(Ep(Ae,ot[mt]))return!0}if(PM(Ae,ot,ce))return!0}return!1}(te,k,de)}isTileClipped(){return!0}}function Dp(y,f){return f>0?f+2*y:y}const Kw=Bo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),i1=Bo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Bo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const iv=Bo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Bo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bu=Bo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ci=Bo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Er(y,f,_){return y.sections.forEach(I=>{I.text=function(k,F,j){const U=F.layout.get("text-transform").evaluate(j,{});return U==="uppercase"?k=k.toLocaleUpperCase():U==="lowercase"&&(k=k.toLocaleLowerCase()),Bs.applyArabicShaping&&(k=Bs.applyArabicShaping(k)),k}(I.text,f,_)}),y}Bo([{name:"triangle",components:3,type:"Uint16"}]),Bo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Bo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Bo([{type:"Float32",name:"offsetX"}]),Bo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Bo([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ei={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var xn=24,vl=dn,mf=function(y,f,_,I,k){var F,j,U=8*k-I-1,te=(1<<U)-1,de=te>>1,be=-7,Ae=_?k-1:0,He=_?-1:1,ce=y[f+Ae];for(Ae+=He,F=ce&(1<<-be)-1,ce>>=-be,be+=U;be>0;F=256*F+y[f+Ae],Ae+=He,be-=8);for(j=F&(1<<-be)-1,F>>=-be,be+=I;be>0;j=256*j+y[f+Ae],Ae+=He,be-=8);if(F===0)F=1-de;else{if(F===te)return j?NaN:1/0*(ce?-1:1);j+=Math.pow(2,I),F-=de}return(ce?-1:1)*j*Math.pow(2,F-I)},Zw=function(y,f,_,I,k,F){var j,U,te,de=8*F-k-1,be=(1<<de)-1,Ae=be>>1,He=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=I?0:F-1,Je=I?1:-1,ot=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(U=isNaN(f)?1:0,j=be):(j=Math.floor(Math.log(f)/Math.LN2),f*(te=Math.pow(2,-j))<1&&(j--,te*=2),(f+=j+Ae>=1?He/te:He*Math.pow(2,1-Ae))*te>=2&&(j++,te/=2),j+Ae>=be?(U=0,j=be):j+Ae>=1?(U=(f*te-1)*Math.pow(2,k),j+=Ae):(U=f*Math.pow(2,Ae-1)*Math.pow(2,k),j=0));k>=8;y[_+ce]=255&U,ce+=Je,U/=256,k-=8);for(j=j<<k|U,de+=k;de>0;y[_+ce]=255&j,ce+=Je,j/=256,de-=8);y[_+ce-Je]|=128*ot};function dn(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}dn.Varint=0,dn.Fixed64=1,dn.Bytes=2,dn.Fixed32=5;var o1=4294967296,a1=1/o1,Xw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Jc(y){return y.type===dn.Bytes?y.readVarint()+y.pos:y.pos+1}function md(y,f,_){return _?4294967296*f+(y>>>0):4294967296*(f>>>0)+(y>>>0)}function Lp(y,f,_){var I=f<=16383?1:f<=2097151?2:f<=268435455?3:Math.floor(Math.log(f)/(7*Math.LN2));_.realloc(I);for(var k=_.pos-1;k>=y;k--)_.buf[k+I]=_.buf[k]}function $p(y,f){for(var _=0;_<y.length;_++)f.writeVarint(y[_])}function dh(y,f){for(var _=0;_<y.length;_++)f.writeSVarint(y[_])}function Qc(y,f){for(var _=0;_<y.length;_++)f.writeFloat(y[_])}function gd(y,f){for(var _=0;_<y.length;_++)f.writeDouble(y[_])}function gf(y,f){for(var _=0;_<y.length;_++)f.writeBoolean(y[_])}function yd(y,f){for(var _=0;_<y.length;_++)f.writeFixed32(y[_])}function LM(y,f){for(var _=0;_<y.length;_++)f.writeSFixed32(y[_])}function $M(y,f){for(var _=0;_<y.length;_++)f.writeFixed64(y[_])}function BM(y,f){for(var _=0;_<y.length;_++)f.writeSFixed64(y[_])}function ov(y,f){return(y[f]|y[f+1]<<8|y[f+2]<<16)+16777216*y[f+3]}function yf(y,f,_){y[_]=f,y[_+1]=f>>>8,y[_+2]=f>>>16,y[_+3]=f>>>24}function Dl(y,f){return(y[f]|y[f+1]<<8|y[f+2]<<16)+(y[f+3]<<24)}dn.prototype={destroy:function(){this.buf=null},readFields:function(y,f,_){for(_=_||this.length;this.pos<_;){var I=this.readVarint(),k=I>>3,F=this.pos;this.type=7&I,y(k,f,this),this.pos===F&&this.skip(I)}return f},readMessage:function(y,f){return this.readFields(y,f,this.readVarint()+this.pos)},readFixed32:function(){var y=ov(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=Dl(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=ov(this.buf,this.pos)+ov(this.buf,this.pos+4)*o1;return this.pos+=8,y},readSFixed64:function(){var y=ov(this.buf,this.pos)+Dl(this.buf,this.pos+4)*o1;return this.pos+=8,y},readFloat:function(){var y=mf(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=mf(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var f,_,I=this.buf;return f=127&(_=I[this.pos++]),_<128?f:(f|=(127&(_=I[this.pos++]))<<7,_<128?f:(f|=(127&(_=I[this.pos++]))<<14,_<128?f:(f|=(127&(_=I[this.pos++]))<<21,_<128?f:function(k,F,j){var U,te,de=j.buf;if(U=(112&(te=de[j.pos++]))>>4,te<128||(U|=(127&(te=de[j.pos++]))<<3,te<128)||(U|=(127&(te=de[j.pos++]))<<10,te<128)||(U|=(127&(te=de[j.pos++]))<<17,te<128)||(U|=(127&(te=de[j.pos++]))<<24,te<128)||(U|=(1&(te=de[j.pos++]))<<31,te<128))return md(k,U,F);throw new Error("Expected varint not more than 10 bytes")}(f|=(15&(_=I[this.pos]))<<28,y,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2==1?(y+1)/-2:y/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var y=this.readVarint()+this.pos,f=this.pos;return this.pos=y,y-f>=12&&Xw?function(_,I,k){return Xw.decode(_.subarray(I,k))}(this.buf,f,y):function(_,I,k){for(var F="",j=I;j<k;){var U,te,de,be=_[j],Ae=null,He=be>239?4:be>223?3:be>191?2:1;if(j+He>k)break;He===1?be<128&&(Ae=be):He===2?(192&(U=_[j+1]))==128&&(Ae=(31&be)<<6|63&U)<=127&&(Ae=null):He===3?(te=_[j+2],(192&(U=_[j+1]))==128&&(192&te)==128&&((Ae=(15&be)<<12|(63&U)<<6|63&te)<=2047||Ae>=55296&&Ae<=57343)&&(Ae=null)):He===4&&(te=_[j+2],de=_[j+3],(192&(U=_[j+1]))==128&&(192&te)==128&&(192&de)==128&&((Ae=(15&be)<<18|(63&U)<<12|(63&te)<<6|63&de)<=65535||Ae>=1114112)&&(Ae=null)),Ae===null?(Ae=65533,He=1):Ae>65535&&(Ae-=65536,F+=String.fromCharCode(Ae>>>10&1023|55296),Ae=56320|1023&Ae),F+=String.fromCharCode(Ae),j+=He}return F}(this.buf,f,y)},readBytes:function(){var y=this.readVarint()+this.pos,f=this.buf.subarray(this.pos,y);return this.pos=y,f},readPackedVarint:function(y,f){if(this.type!==dn.Bytes)return y.push(this.readVarint(f));var _=Jc(this);for(y=y||[];this.pos<_;)y.push(this.readVarint(f));return y},readPackedSVarint:function(y){if(this.type!==dn.Bytes)return y.push(this.readSVarint());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==dn.Bytes)return y.push(this.readBoolean());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==dn.Bytes)return y.push(this.readFloat());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==dn.Bytes)return y.push(this.readDouble());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==dn.Bytes)return y.push(this.readFixed32());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==dn.Bytes)return y.push(this.readSFixed32());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==dn.Bytes)return y.push(this.readFixed64());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==dn.Bytes)return y.push(this.readSFixed64());var f=Jc(this);for(y=y||[];this.pos<f;)y.push(this.readSFixed64());return y},skip:function(y){var f=7&y;if(f===dn.Varint)for(;this.buf[this.pos++]>127;);else if(f===dn.Bytes)this.pos=this.readVarint()+this.pos;else if(f===dn.Fixed32)this.pos+=4;else{if(f!==dn.Fixed64)throw new Error("Unimplemented type: "+f);this.pos+=8}},writeTag:function(y,f){this.writeVarint(y<<3|f)},realloc:function(y){for(var f=this.length||16;f<this.pos+y;)f*=2;if(f!==this.length){var _=new Uint8Array(f);_.set(this.buf),this.buf=_,this.length=f}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),yf(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),yf(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),yf(this.buf,-1&y,this.pos),yf(this.buf,Math.floor(y*a1),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),yf(this.buf,-1&y,this.pos),yf(this.buf,Math.floor(y*a1),this.pos+4),this.pos+=8},writeVarint:function(y){(y=+y||0)>268435455||y<0?function(f,_){var I,k;if(f>=0?(I=f%4294967296|0,k=f/4294967296|0):(k=~(-f/4294967296),4294967295^(I=~(-f%4294967296))?I=I+1|0:(I=0,k=k+1|0)),f>=18446744073709552e3||f<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(F,j,U){U.buf[U.pos++]=127&F|128,F>>>=7,U.buf[U.pos++]=127&F|128,F>>>=7,U.buf[U.pos++]=127&F|128,F>>>=7,U.buf[U.pos++]=127&F|128,U.buf[U.pos]=127&(F>>>=7)}(I,0,_),function(F,j){var U=(7&F)<<4;j.buf[j.pos++]|=U|((F>>>=3)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F)))))}(k,_)}(y,this):(this.realloc(4),this.buf[this.pos++]=127&y|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=y>>>7&127))))},writeSVarint:function(y){this.writeVarint(y<0?2*-y-1:2*y)},writeBoolean:function(y){this.writeVarint(!!y)},writeString:function(y){y=String(y),this.realloc(4*y.length),this.pos++;var f=this.pos;this.pos=function(I,k,F){for(var j,U,te=0;te<k.length;te++){if((j=k.charCodeAt(te))>55295&&j<57344){if(!U){j>56319||te+1===k.length?(I[F++]=239,I[F++]=191,I[F++]=189):U=j;continue}if(j<56320){I[F++]=239,I[F++]=191,I[F++]=189,U=j;continue}j=U-55296<<10|j-56320|65536,U=null}else U&&(I[F++]=239,I[F++]=191,I[F++]=189,U=null);j<128?I[F++]=j:(j<2048?I[F++]=j>>6|192:(j<65536?I[F++]=j>>12|224:(I[F++]=j>>18|240,I[F++]=j>>12&63|128),I[F++]=j>>6&63|128),I[F++]=63&j|128)}return F}(this.buf,y,this.pos);var _=this.pos-f;_>=128&&Lp(f,_,this),this.pos=f-1,this.writeVarint(_),this.pos+=_},writeFloat:function(y){this.realloc(4),Zw(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),Zw(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var f=y.length;this.writeVarint(f),this.realloc(f);for(var _=0;_<f;_++)this.buf[this.pos++]=y[_]},writeRawMessage:function(y,f){this.pos++;var _=this.pos;y(f,this);var I=this.pos-_;I>=128&&Lp(_,I,this),this.pos=_-1,this.writeVarint(I),this.pos+=I},writeMessage:function(y,f,_){this.writeTag(y,dn.Bytes),this.writeRawMessage(f,_)},writePackedVarint:function(y,f){f.length&&this.writeMessage(y,$p,f)},writePackedSVarint:function(y,f){f.length&&this.writeMessage(y,dh,f)},writePackedBoolean:function(y,f){f.length&&this.writeMessage(y,gf,f)},writePackedFloat:function(y,f){f.length&&this.writeMessage(y,Qc,f)},writePackedDouble:function(y,f){f.length&&this.writeMessage(y,gd,f)},writePackedFixed32:function(y,f){f.length&&this.writeMessage(y,yd,f)},writePackedSFixed32:function(y,f){f.length&&this.writeMessage(y,LM,f)},writePackedFixed64:function(y,f){f.length&&this.writeMessage(y,$M,f)},writePackedSFixed64:function(y,f){f.length&&this.writeMessage(y,BM,f)},writeBytesField:function(y,f){this.writeTag(y,dn.Bytes),this.writeBytes(f)},writeFixed32Field:function(y,f){this.writeTag(y,dn.Fixed32),this.writeFixed32(f)},writeSFixed32Field:function(y,f){this.writeTag(y,dn.Fixed32),this.writeSFixed32(f)},writeFixed64Field:function(y,f){this.writeTag(y,dn.Fixed64),this.writeFixed64(f)},writeSFixed64Field:function(y,f){this.writeTag(y,dn.Fixed64),this.writeSFixed64(f)},writeVarintField:function(y,f){this.writeTag(y,dn.Varint),this.writeVarint(f)},writeSVarintField:function(y,f){this.writeTag(y,dn.Varint),this.writeSVarint(f)},writeStringField:function(y,f){this.writeTag(y,dn.Bytes),this.writeString(f)},writeFloatField:function(y,f){this.writeTag(y,dn.Fixed32),this.writeFloat(f)},writeDoubleField:function(y,f){this.writeTag(y,dn.Fixed64),this.writeDouble(f)},writeBooleanField:function(y,f){this.writeVarintField(y,!!f)}};var Ea=S(vl);const Ta=3;function Yw(y,f,_){y===1&&_.readMessage(Jw,f)}function Jw(y,f,_){if(y===3){const{id:I,bitmap:k,width:F,height:j,left:U,top:te,advance:de}=_.readMessage(FM,{});f.push({id:I,bitmap:new fg({width:F+2*Ta,height:j+2*Ta},k),metrics:{width:F,height:j,left:U,top:te,advance:de}})}}function FM(y,f,_){y===1?f.id=_.readVarint():y===2?f.bitmap=_.readBytes():y===3?f.width=_.readVarint():y===4?f.height=_.readVarint():y===5?f.left=_.readSVarint():y===6?f.top=_.readSVarint():y===7&&(f.advance=_.readVarint())}const Qw=Ta;function So(y){let f=0,_=0;for(const j of y)f+=j.w*j.h,_=Math.max(_,j.w);y.sort((j,U)=>U.h-j.h);const I=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(f/.95)),_),h:1/0}];let k=0,F=0;for(const j of y)for(let U=I.length-1;U>=0;U--){const te=I[U];if(!(j.w>te.w||j.h>te.h)){if(j.x=te.x,j.y=te.y,F=Math.max(F,j.y+j.h),k=Math.max(k,j.x+j.w),j.w===te.w&&j.h===te.h){const de=I.pop();U<I.length&&(I[U]=de)}else j.h===te.h?(te.x+=j.w,te.w-=j.w):j.w===te.w?(te.y+=j.h,te.h-=j.h):(I.push({x:te.x+j.w,y:te.y,w:te.w-j.w,h:j.h}),te.y+=j.h,te.h-=j.h);break}}return{w:k,h:F,fill:f/(k*F)||0}}const js=1;class Fu{constructor(f,{pixelRatio:_,version:I,stretchX:k,stretchY:F,content:j}){this.paddedRect=f,this.pixelRatio=_,this.stretchX=k,this.stretchY=F,this.content=j,this.version=I}get tl(){return[this.paddedRect.x+js,this.paddedRect.y+js]}get br(){return[this.paddedRect.x+this.paddedRect.w-js,this.paddedRect.y+this.paddedRect.h-js]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*js)/this.pixelRatio,(this.paddedRect.h-2*js)/this.pixelRatio]}}class s1{constructor(f,_){const I={},k={};this.haveRenderCallbacks=[];const F=[];this.addImages(f,I,F),this.addImages(_,k,F);const{w:j,h:U}=So(F),te=new ml({width:j||1,height:U||1});for(const de in f){const be=f[de],Ae=I[de].paddedRect;ml.copy(be.data,te,{x:0,y:0},{x:Ae.x+js,y:Ae.y+js},be.data)}for(const de in _){const be=_[de],Ae=k[de].paddedRect,He=Ae.x+js,ce=Ae.y+js,Je=be.data.width,ot=be.data.height;ml.copy(be.data,te,{x:0,y:0},{x:He,y:ce},be.data),ml.copy(be.data,te,{x:0,y:ot-1},{x:He,y:ce-1},{width:Je,height:1}),ml.copy(be.data,te,{x:0,y:0},{x:He,y:ce+ot},{width:Je,height:1}),ml.copy(be.data,te,{x:Je-1,y:0},{x:He-1,y:ce},{width:1,height:ot}),ml.copy(be.data,te,{x:0,y:0},{x:He+Je,y:ce},{width:1,height:ot})}this.image=te,this.iconPositions=I,this.patternPositions=k}addImages(f,_,I){for(const k in f){const F=f[k],j={x:0,y:0,w:F.data.width+2*js,h:F.data.height+2*js};I.push(j),_[k]=new Fu(j,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(k)}}patchUpdatedImages(f,_){f.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const I in f.updatedImages)this.patchUpdatedImage(this.iconPositions[I],f.getImage(I),_),this.patchUpdatedImage(this.patternPositions[I],f.getImage(I),_)}patchUpdatedImage(f,_,I){if(!f||!_||f.version===_.version)return;f.version=_.version;const[k,F]=f.tl;I.update(_.data,void 0,{x:k,y:F})}}var fh;_n("ImagePosition",Fu),_n("ImageAtlas",s1),d.ai=void 0,(fh=d.ai||(d.ai={}))[fh.none=0]="none",fh[fh.horizontal=1]="horizontal",fh[fh.vertical=2]="vertical",fh[fh.horizontalOnly=3]="horizontalOnly";const Bp=-17;class go{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(f,_){const I=new go;return I.scale=f||1,I.fontStack=_,I}static forImage(f){const _=new go;return _.imageName=f,_}}class vd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(f,_){const I=new vd;for(let k=0;k<f.sections.length;k++){const F=f.sections[k];F.image?I.addImageSection(F):I.addTextSection(F,_)}return I}length(){return this.text.length}getSection(f){return this.sections[this.sectionIndex[f]]}getSectionIndex(f){return this.sectionIndex[f]}getCharCode(f){return this.text.charCodeAt(f)}verticalizePunctuation(){this.text=function(f){let _="";for(let I=0;I<f.length;I++){const k=f.charCodeAt(I+1)||null,F=f.charCodeAt(I-1)||null;_+=k&&fp(k)&&!ei[f[I+1]]||F&&fp(F)&&!ei[f[I-1]]||!ei[f[I]]?f[I]:ei[f[I]]}return _}(this.text)}trim(){let f=0;for(let I=0;I<this.text.length&&Sg[this.text.charCodeAt(I)];I++)f++;let _=this.text.length;for(let I=this.text.length-1;I>=0&&I>=f&&Sg[this.text.charCodeAt(I)];I--)_--;this.text=this.text.substring(f,_),this.sectionIndex=this.sectionIndex.slice(f,_)}substring(f,_){const I=new vd;return I.text=this.text.substring(f,_),I.sectionIndex=this.sectionIndex.slice(f,_),I.sections=this.sections,I}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((f,_)=>Math.max(f,this.sections[_].scale),0)}addTextSection(f,_){this.text+=f.text,this.sections.push(go.forText(f.scale,f.fontStack||_));const I=this.sections.length-1;for(let k=0;k<f.text.length;++k)this.sectionIndex.push(I)}addImageSection(f){const _=f.image?f.image.name:"";if(_.length===0)return void _e("Can't add FormattedSection with an empty image.");const I=this.getNextImageSectionCharCode();I?(this.text+=String.fromCharCode(I),this.sections.push(go.forImage(_)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tc(y,f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot){const mt=vd.fromFeature(y,k);let wt;Ae===d.ai.vertical&&mt.verticalizePunctuation();const{processBidirectionalText:qt,processStyledBidirectionalText:Bt}=Bs;if(qt&&mt.sections.length===1){wt=[];const Tr=qt(mt.toString(),av(mt,de,F,f,I,ce,Je));for(const sn of Tr){const En=new vd;En.text=sn,En.sections=mt.sections;for(let xr=0;xr<sn.length;xr++)En.sectionIndex.push(0);wt.push(En)}}else if(Bt){wt=[];const Tr=Bt(mt.text,mt.sectionIndex,av(mt,de,F,f,I,ce,Je));for(const sn of Tr){const En=new vd;En.text=sn[0],En.sectionIndex=sn[1],En.sections=mt.sections,wt.push(En)}}else wt=function(Tr,sn){const En=[],xr=Tr.text;let ln=0;for(const nn of sn)En.push(Tr.substring(ln,nn)),ln=nn;return ln<xr.length&&En.push(Tr.substring(ln,xr.length)),En}(mt,av(mt,de,F,f,I,ce,Je));const Kt=[],cr={positionedLines:Kt,text:mt.toString(),top:be[1],bottom:be[1],left:be[0],right:be[0],writingMode:Ae,iconsInText:!1,verticalizable:!1};return function(Tr,sn,En,xr,ln,nn,bn,on,Dr,$n,Rn,Pi){let to=0,Xn=Bp,ca=0,Ya=0;const Co=on==="right"?1:on==="left"?0:.5;let Ba=0;for(const Ja of ln){Ja.trim();const ya=Ja.getMaxScale(),Ms=(ya-1)*xn,il={positionedGlyphs:[],lineOffset:0};Tr.positionedLines[Ba]=il;const gs=il.positionedGlyphs;let ia=0;if(!Ja.length()){Xn+=nn,++Ba;continue}for(let Fa=0;Fa<Ja.length();Fa++){const Fi=Ja.getSection(Fa),ys=Ja.getSectionIndex(Fa),Qa=Ja.getCharCode(Fa);let Ma=0,Vs=null,ua=null,xl=null,Tc=xn;const ic=!(Dr===d.ai.horizontal||!Rn&&!dp(Qa)||Rn&&(Sg[Qa]||(ga=Qa,fn.Arabic(ga)||fn["Arabic Supplement"](ga)||fn["Arabic Extended-A"](ga)||fn["Arabic Presentation Forms-A"](ga)||fn["Arabic Presentation Forms-B"](ga))));if(Fi.imageName){const vs=xr[Fi.imageName];if(!vs)continue;xl=Fi.imageName,Tr.iconsInText=Tr.iconsInText||!0,ua=vs.paddedRect;const Us=vs.displaySize;Fi.scale=Fi.scale*xn/Pi,Vs={width:Us[0],height:Us[1],left:js,top:-Qw,advance:ic?Us[1]:Us[0]},Ma=Ms+(xn-Us[1]*Fi.scale),Tc=Vs.advance;const nu=ic?Us[0]*Fi.scale-xn*ya:Us[1]*Fi.scale-xn*ya;nu>0&&nu>ia&&(ia=nu)}else{const vs=En[Fi.fontStack],Us=vs&&vs[Qa];if(Us&&Us.rect)ua=Us.rect,Vs=Us.metrics;else{const nu=sn[Fi.fontStack],Up=nu&&nu[Qa];if(!Up)continue;Vs=Up.metrics}Ma=(ya-Fi.scale)*xn}ic?(Tr.verticalizable=!0,gs.push({glyph:Qa,imageName:xl,x:to,y:Xn+Ma,vertical:ic,scale:Fi.scale,fontStack:Fi.fontStack,sectionIndex:ys,metrics:Vs,rect:ua}),to+=Tc*Fi.scale+$n):(gs.push({glyph:Qa,imageName:xl,x:to,y:Xn+Ma,vertical:ic,scale:Fi.scale,fontStack:Fi.fontStack,sectionIndex:ys,metrics:Vs,rect:ua}),to+=Vs.advance*Fi.scale+$n)}gs.length!==0&&(ca=Math.max(to-$n,ca),Zn(gs,0,gs.length-1,Co,ia)),to=0;const Ia=nn*ya+ia;il.lineOffset=Math.max(ia,Ms),Xn+=Ia,Ya=Math.max(Ia,Ya),++Ba}var ga;const hs=Xn-Bp,{horizontalAlign:Yo,verticalAlign:Jo}=sv(bn);(function(Ja,ya,Ms,il,gs,ia,Ia,Fa,Fi){const ys=(ya-Ms)*gs;let Qa=0;Qa=ia!==Ia?-Fa*il-Bp:(-il*Fi+.5)*Ia;for(const Ma of Ja)for(const Vs of Ma.positionedGlyphs)Vs.x+=ys,Vs.y+=Qa})(Tr.positionedLines,Co,Yo,Jo,ca,Ya,nn,hs,ln.length),Tr.top+=-Jo*hs,Tr.bottom=Tr.top+hs,Tr.left+=-Yo*ca,Tr.right=Tr.left+ca}(cr,f,_,I,wt,j,U,te,Ae,de,He,ot),!function(Tr){for(const sn of Tr)if(sn.positionedGlyphs.length!==0)return!1;return!0}(Kt)&&cr}const Sg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},eS={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function l1(y,f,_,I,k,F){if(f.imageName){const j=I[f.imageName];return j?j.displaySize[0]*f.scale*xn/F+k:0}{const j=_[f.fontStack],U=j&&j[y];return U?U.metrics.advance*f.scale+k:0}}function Wi(y,f,_,I){const k=Math.pow(y-f,2);return I?y<f?k/2:2*k:k+Math.abs(_)*_}function c1(y,f,_){let I=0;return y===10&&(I-=1e4),_&&(I+=150),y!==40&&y!==65288||(I+=50),f!==41&&f!==65289||(I+=50),I}function Ll(y,f,_,I,k,F){let j=null,U=Wi(f,_,k,F);for(const te of I){const de=Wi(f-te.x,_,k,F)+te.badness;de<=U&&(j=te,U=de)}return{index:y,x:f,priorBreak:j,badness:U}}function u1(y){return y?u1(y.priorBreak).concat(y.index):[]}function av(y,f,_,I,k,F,j){if(F!=="point")return[];if(!y)return[];const U=[],te=function(He,ce,Je,ot,mt,wt){let qt=0;for(let Bt=0;Bt<He.length();Bt++){const Kt=He.getSection(Bt);qt+=l1(He.getCharCode(Bt),Kt,ot,mt,ce,wt)}return qt/Math.max(1,Math.ceil(qt/Je))}(y,f,_,I,k,j),de=y.text.indexOf("​")>=0;let be=0;for(let He=0;He<y.length();He++){const ce=y.getSection(He),Je=y.getCharCode(He);if(Sg[Je]||(be+=l1(Je,ce,I,k,f,j)),He<y.length()-1){const ot=!((Ae=Je)<11904||!(fn["Bopomofo Extended"](Ae)||fn.Bopomofo(Ae)||fn["CJK Compatibility Forms"](Ae)||fn["CJK Compatibility Ideographs"](Ae)||fn["CJK Compatibility"](Ae)||fn["CJK Radicals Supplement"](Ae)||fn["CJK Strokes"](Ae)||fn["CJK Symbols and Punctuation"](Ae)||fn["CJK Unified Ideographs Extension A"](Ae)||fn["CJK Unified Ideographs"](Ae)||fn["Enclosed CJK Letters and Months"](Ae)||fn["Halfwidth and Fullwidth Forms"](Ae)||fn.Hiragana(Ae)||fn["Ideographic Description Characters"](Ae)||fn["Kangxi Radicals"](Ae)||fn["Katakana Phonetic Extensions"](Ae)||fn.Katakana(Ae)||fn["Vertical Forms"](Ae)||fn["Yi Radicals"](Ae)||fn["Yi Syllables"](Ae)));(eS[Je]||ot||ce.imageName)&&U.push(Ll(He+1,be,te,U,c1(Je,y.getCharCode(He+1),ot&&de),!1))}}var Ae;return u1(Ll(y.length(),be,te,U,0,!0))}function sv(y){let f=.5,_=.5;switch(y){case"right":case"top-right":case"bottom-right":f=1;break;case"left":case"top-left":case"bottom-left":f=0}switch(y){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:f,verticalAlign:_}}function Zn(y,f,_,I,k){if(!I&&!k)return;const F=y[_],j=(y[_].x+F.metrics.advance*F.scale)*I;for(let U=f;U<=_;U++)y[U].x-=j,y[U].y+=k}function h1(y,f,_){const{horizontalAlign:I,verticalAlign:k}=sv(_),F=f[0]-y.displaySize[0]*I,j=f[1]-y.displaySize[1]*k;return{image:y,top:j,bottom:j+y.displaySize[1],left:F,right:F+y.displaySize[0]}}function Ko(y,f,_,I,k,F){const j=y.image;let U;if(j.content){const mt=j.content,wt=j.pixelRatio||1;U=[mt[0]/wt,mt[1]/wt,j.displaySize[0]-mt[2]/wt,j.displaySize[1]-mt[3]/wt]}const te=f.left*F,de=f.right*F;let be,Ae,He,ce;_==="width"||_==="both"?(ce=k[0]+te-I[3],Ae=k[0]+de+I[1]):(ce=k[0]+(te+de-j.displaySize[0])/2,Ae=ce+j.displaySize[0]);const Je=f.top*F,ot=f.bottom*F;return _==="height"||_==="both"?(be=k[1]+Je-I[0],He=k[1]+ot+I[2]):(be=k[1]+(Je+ot-j.displaySize[1])/2,He=be+j.displaySize[1]),{image:j,top:be,right:Ae,bottom:He,left:ce,collisionPadding:U}}const Fp=255,eu=128,ph=Fp*eu;function d1(y,f){const{expression:_}=f;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new Ao(y+1))};if(_.kind==="source")return{kind:"source"};{const{zoomStops:I,interpolationType:k}=_;let F=0;for(;F<I.length&&I[F]<=y;)F++;F=Math.max(0,F-1);let j=F;for(;j<I.length&&I[j]<y+1;)j++;j=Math.min(I.length-1,j);const U=I[F],te=I[j];return _.kind==="composite"?{kind:"composite",minZoom:U,maxZoom:te,interpolationType:k}:{kind:"camera",minZoom:U,maxZoom:te,minSize:_.evaluate(new Ao(U)),maxSize:_.evaluate(new Ao(te)),interpolationType:k}}}function lv(y,f,_){let I="never";const k=y.get(f);return k?I=k:y.get(_)&&(I="always"),I}const tS=yl.VectorTileFeature.types,rS=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cg(y,f,_,I,k,F,j,U,te,de,be,Ae,He){const ce=U?Math.min(ph,Math.round(U[0])):0,Je=U?Math.min(ph,Math.round(U[1])):0;y.emplaceBack(f,_,Math.round(32*I),Math.round(32*k),F,j,(ce<<1)+(te?1:0),Je,16*de,16*be,256*Ae,256*He)}function Nn(y,f,_){y.emplaceBack(f.x,f.y,_),y.emplaceBack(f.x,f.y,_),y.emplaceBack(f.x,f.y,_),y.emplaceBack(f.x,f.y,_)}function Gn(y){for(const f of y.sections)if(og(f.text))return!0;return!1}class Eg{constructor(f){this.layoutVertexArray=new Ii,this.indexArray=new La,this.programConfigurations=f,this.segments=new Fo,this.dynamicLayoutVertexArray=new li,this.opacityVertexArray=new Ri,this.hasVisibleVertices=!1,this.placedSymbolArray=new Vt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(f,_,I,k){this.isEmpty()||(I&&(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,Kw.members),this.indexBuffer=f.createIndexBuffer(this.indexArray,_),this.dynamicLayoutVertexBuffer=f.createVertexBuffer(this.dynamicLayoutVertexArray,i1.members,!0),this.opacityVertexBuffer=f.createVertexBuffer(this.opacityVertexArray,rS,!0),this.opacityVertexBuffer.itemSize=1),(I||k)&&this.programConfigurations.upload(f))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_n("SymbolBuffers",Eg);class tu{constructor(f,_,I){this.layoutVertexArray=new f,this.layoutAttributes=_,this.indexArray=new I,this.segments=new Fo,this.collisionVertexArray=new wo}upload(f){this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=f.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=f.createVertexBuffer(this.collisionVertexArray,iv.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_n("CollisionBuffers",tu);class vf{constructor(f){this.collisionBoxArray=f.collisionBoxArray,this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(j=>j.id),this.index=f.index,this.pixelRatio=f.pixelRatio,this.sourceLayerIndex=f.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=rn([]),this.placementViewportMatrix=rn([]);const _=this.layers[0]._unevaluatedLayout._values;this.textSizeData=d1(this.zoom,_["text-size"]),this.iconSizeData=d1(this.zoom,_["icon-size"]);const I=this.layers[0].layout,k=I.get("symbol-sort-key"),F=I.get("symbol-z-order");this.canOverlap=lv(I,"text-overlap","text-allow-overlap")!=="never"||lv(I,"icon-overlap","icon-allow-overlap")!=="never"||I.get("text-ignore-placement")||I.get("icon-ignore-placement"),this.sortFeaturesByKey=F!=="viewport-y"&&!k.isConstant(),this.sortFeaturesByY=(F==="viewport-y"||F==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,I.get("symbol-placement")==="point"&&(this.writingModes=I.get("text-writing-mode").map(j=>d.ai[j])),this.stateDependentLayerIds=this.layers.filter(j=>j.isStateDependent()).map(j=>j.id),this.sourceID=f.sourceID}createArrays(){this.text=new Eg(new Cc(this.layers,this.zoom,f=>/^text/.test(f))),this.icon=new Eg(new Cc(this.layers,this.zoom,f=>/^icon/.test(f))),this.glyphOffsetArray=new Ht,this.lineVertexArray=new ur,this.symbolInstances=new _t,this.textAnchorOffsets=new _r}calculateGlyphDependencies(f,_,I,k,F){for(let j=0;j<f.length;j++)if(_[f.charCodeAt(j)]=!0,(I||k)&&F){const U=ei[f.charAt(j)];U&&(_[U.charCodeAt(0)]=!0)}}populate(f,_,I){const k=this.layers[0],F=k.layout,j=F.get("text-font"),U=F.get("text-field"),te=F.get("icon-image"),de=(U.value.kind!=="constant"||U.value.value instanceof Ti&&!U.value.value.isEmpty()||U.value.value.toString().length>0)&&(j.value.kind!=="constant"||j.value.value.length>0),be=te.value.kind!=="constant"||!!te.value.value||Object.keys(te.parameters).length>0,Ae=F.get("symbol-sort-key");if(this.features=[],!de&&!be)return;const He=_.iconDependencies,ce=_.glyphDependencies,Je=_.availableImages,ot=new Ao(this.zoom);for(const{feature:mt,id:wt,index:qt,sourceLayerIndex:Bt}of f){const Kt=k._featureFilter.needGeometry,cr=cd(mt,Kt);if(!k._featureFilter.filter(ot,cr,I))continue;let Tr,sn;if(Kt||(cr.geometry=ld(mt)),de){const xr=k.getValueAndResolveTokens("text-field",cr,I,Je),ln=Ti.factory(xr);Gn(ln)&&(this.hasRTLText=!0),(!this.hasRTLText||ag()==="unavailable"||this.hasRTLText&&Bs.isParsed())&&(Tr=Er(ln,k,cr))}if(be){const xr=k.getValueAndResolveTokens("icon-image",cr,I,Je);sn=xr instanceof ji?xr:ji.fromString(xr)}if(!Tr&&!sn)continue;const En=this.sortFeaturesByKey?Ae.evaluate(cr,{},I):void 0;if(this.features.push({id:wt,text:Tr,icon:sn,index:qt,sourceLayerIndex:Bt,geometry:cr.geometry,properties:mt.properties,type:tS[mt.type],sortKey:En}),sn&&(He[sn.name]=!0),Tr){const xr=j.evaluate(cr,{},I).join(","),ln=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ai.vertical)>=0;for(const nn of Tr.sections)if(nn.image)He[nn.image.name]=!0;else{const bn=Qd(Tr.toString()),on=nn.fontStack||xr,Dr=ce[on]=ce[on]||{};this.calculateGlyphDependencies(nn.text,Dr,ln,this.allowVerticalPlacement,bn)}}}F.get("symbol-placement")==="line"&&(this.features=function(mt){const wt={},qt={},Bt=[];let Kt=0;function cr(xr){Bt.push(mt[xr]),Kt++}function Tr(xr,ln,nn){const bn=qt[xr];return delete qt[xr],qt[ln]=bn,Bt[bn].geometry[0].pop(),Bt[bn].geometry[0]=Bt[bn].geometry[0].concat(nn[0]),bn}function sn(xr,ln,nn){const bn=wt[ln];return delete wt[ln],wt[xr]=bn,Bt[bn].geometry[0].shift(),Bt[bn].geometry[0]=nn[0].concat(Bt[bn].geometry[0]),bn}function En(xr,ln,nn){const bn=nn?ln[0][ln[0].length-1]:ln[0][0];return`${xr}:${bn.x}:${bn.y}`}for(let xr=0;xr<mt.length;xr++){const ln=mt[xr],nn=ln.geometry,bn=ln.text?ln.text.toString():null;if(!bn){cr(xr);continue}const on=En(bn,nn),Dr=En(bn,nn,!0);if(on in qt&&Dr in wt&&qt[on]!==wt[Dr]){const $n=sn(on,Dr,nn),Rn=Tr(on,Dr,Bt[$n].geometry);delete wt[on],delete qt[Dr],qt[En(bn,Bt[Rn].geometry,!0)]=Rn,Bt[$n].geometry=null}else on in qt?Tr(on,Dr,nn):Dr in wt?sn(on,Dr,nn):(cr(xr),wt[on]=Kt-1,qt[Dr]=Kt-1)}return Bt.filter(xr=>xr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((mt,wt)=>mt.sortKey-wt.sortKey)}update(f,_,I){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(f,_,this.layers,I),this.icon.programConfigurations.updatePaintArrays(f,_,this.layers,I))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(f){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(f),this.iconCollisionBox.upload(f)),this.text.upload(f,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(f,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(f,_){const I=this.lineVertexArray.length;if(f.segment!==void 0){let k=f.dist(_[f.segment+1]),F=f.dist(_[f.segment]);const j={};for(let U=f.segment+1;U<_.length;U++)j[U]={x:_[U].x,y:_[U].y,tileUnitDistanceFromAnchor:k},U<_.length-1&&(k+=_[U+1].dist(_[U]));for(let U=f.segment||0;U>=0;U--)j[U]={x:_[U].x,y:_[U].y,tileUnitDistanceFromAnchor:F},U>0&&(F+=_[U-1].dist(_[U]));for(let U=0;U<_.length;U++){const te=j[U];this.lineVertexArray.emplaceBack(te.x,te.y,te.tileUnitDistanceFromAnchor)}}return{lineStartIndex:I,lineLength:this.lineVertexArray.length-I}}addSymbols(f,_,I,k,F,j,U,te,de,be,Ae,He){const ce=f.indexArray,Je=f.layoutVertexArray,ot=f.segments.prepareSegment(4*_.length,Je,ce,this.canOverlap?j.sortKey:void 0),mt=this.glyphOffsetArray.length,wt=ot.vertexLength,qt=this.allowVerticalPlacement&&U===d.ai.vertical?Math.PI/2:0,Bt=j.text&&j.text.sections;for(let Kt=0;Kt<_.length;Kt++){const{tl:cr,tr:Tr,bl:sn,br:En,tex:xr,pixelOffsetTL:ln,pixelOffsetBR:nn,minFontScaleX:bn,minFontScaleY:on,glyphOffset:Dr,isSDF:$n,sectionIndex:Rn}=_[Kt],Pi=ot.vertexLength,to=Dr[1];Cg(Je,te.x,te.y,cr.x,to+cr.y,xr.x,xr.y,I,$n,ln.x,ln.y,bn,on),Cg(Je,te.x,te.y,Tr.x,to+Tr.y,xr.x+xr.w,xr.y,I,$n,nn.x,ln.y,bn,on),Cg(Je,te.x,te.y,sn.x,to+sn.y,xr.x,xr.y+xr.h,I,$n,ln.x,nn.y,bn,on),Cg(Je,te.x,te.y,En.x,to+En.y,xr.x+xr.w,xr.y+xr.h,I,$n,nn.x,nn.y,bn,on),Nn(f.dynamicLayoutVertexArray,te,qt),ce.emplaceBack(Pi,Pi+1,Pi+2),ce.emplaceBack(Pi+1,Pi+2,Pi+3),ot.vertexLength+=4,ot.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Dr[0]),Kt!==_.length-1&&Rn===_[Kt+1].sectionIndex||f.programConfigurations.populatePaintArrays(Je.length,j,j.index,{},He,Bt&&Bt[Rn])}f.placedSymbolArray.emplaceBack(te.x,te.y,mt,this.glyphOffsetArray.length-mt,wt,de,be,te.segment,I?I[0]:0,I?I[1]:0,k[0],k[1],U,0,!1,0,Ae)}_addCollisionDebugVertex(f,_,I,k,F,j){return _.emplaceBack(0,0),f.emplaceBack(I.x,I.y,k,F,Math.round(j.x),Math.round(j.y))}addCollisionDebugVertices(f,_,I,k,F,j,U){const te=F.segments.prepareSegment(4,F.layoutVertexArray,F.indexArray),de=te.vertexLength,be=F.layoutVertexArray,Ae=F.collisionVertexArray,He=U.anchorX,ce=U.anchorY;this._addCollisionDebugVertex(be,Ae,j,He,ce,new $(f,_)),this._addCollisionDebugVertex(be,Ae,j,He,ce,new $(I,_)),this._addCollisionDebugVertex(be,Ae,j,He,ce,new $(I,k)),this._addCollisionDebugVertex(be,Ae,j,He,ce,new $(f,k)),te.vertexLength+=4;const Je=F.indexArray;Je.emplaceBack(de,de+1),Je.emplaceBack(de+1,de+2),Je.emplaceBack(de+2,de+3),Je.emplaceBack(de+3,de),te.primitiveLength+=4}addDebugCollisionBoxes(f,_,I,k){for(let F=f;F<_;F++){const j=this.collisionBoxArray.get(F);this.addCollisionDebugVertices(j.x1,j.y1,j.x2,j.y2,k?this.textCollisionBox:this.iconCollisionBox,j.anchorPoint,I)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new tu(bo,Bu.members,pa),this.iconCollisionBox=new tu(bo,Bu.members,pa);for(let f=0;f<this.symbolInstances.length;f++){const _=this.symbolInstances.get(f);this.addDebugCollisionBoxes(_.textBoxStartIndex,_.textBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.iconBoxStartIndex,_.iconBoxEndIndex,_,!1),this.addDebugCollisionBoxes(_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_,!1)}}_deserializeCollisionBoxesForSymbol(f,_,I,k,F,j,U,te,de){const be={};for(let Ae=_;Ae<I;Ae++){const He=f.get(Ae);be.textBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},be.textFeatureIndex=He.featureIndex;break}for(let Ae=k;Ae<F;Ae++){const He=f.get(Ae);be.verticalTextBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},be.verticalTextFeatureIndex=He.featureIndex;break}for(let Ae=j;Ae<U;Ae++){const He=f.get(Ae);be.iconBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},be.iconFeatureIndex=He.featureIndex;break}for(let Ae=te;Ae<de;Ae++){const He=f.get(Ae);be.verticalIconBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},be.verticalIconFeatureIndex=He.featureIndex;break}return be}deserializeCollisionBoxes(f){this.collisionArrays=[];for(let _=0;_<this.symbolInstances.length;_++){const I=this.symbolInstances.get(_);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(f,I.textBoxStartIndex,I.textBoxEndIndex,I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I.iconBoxStartIndex,I.iconBoxEndIndex,I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(f,_){const I=f.placedSymbolArray.get(_),k=I.vertexStartIndex+4*I.numGlyphs;for(let F=I.vertexStartIndex;F<k;F+=4)f.indexArray.emplaceBack(F,F+1,F+2),f.indexArray.emplaceBack(F+1,F+2,F+3)}getSortedSymbolIndexes(f){if(this.sortedAngle===f&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const _=Math.sin(f),I=Math.cos(f),k=[],F=[],j=[];for(let U=0;U<this.symbolInstances.length;++U){j.push(U);const te=this.symbolInstances.get(U);k.push(0|Math.round(_*te.anchorX+I*te.anchorY)),F.push(te.featureIndex)}return j.sort((U,te)=>k[U]-k[te]||F[te]-F[U]),j}addToSortKeyRanges(f,_){const I=this.sortKeyRanges[this.sortKeyRanges.length-1];I&&I.sortKey===_?I.symbolInstanceEnd=f+1:this.sortKeyRanges.push({sortKey:_,symbolInstanceStart:f,symbolInstanceEnd:f+1})}sortFeatures(f){if(this.sortFeaturesByY&&this.sortedAngle!==f&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(f),this.sortedAngle=f,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const _ of this.symbolInstanceIndexes){const I=this.symbolInstances.get(_);this.featureSortOrder.push(I.featureIndex),[I.rightJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.leftJustifiedTextSymbolIndex].forEach((k,F,j)=>{k>=0&&j.indexOf(k)===F&&this.addIndicesForPlacedSymbol(this.text,k)}),I.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,I.verticalPlacedTextSymbolIndex),I.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.placedIconSymbolIndex),I.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let f1,p1;_n("SymbolBucket",vf,{omit:["layers","collisionBoxArray","features","compareText"]}),vf.MAX_GLYPHS=65535,vf.addDynamicAttributes=Nn;var cv={get paint(){return p1=p1||new sa({"icon-opacity":new Vn(ve.paint_symbol["icon-opacity"]),"icon-color":new Vn(ve.paint_symbol["icon-color"]),"icon-halo-color":new Vn(ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vn(ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vn(ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Pn(ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pn(ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vn(ve.paint_symbol["text-opacity"]),"text-color":new Vn(ve.paint_symbol["text-color"],{runtimeType:an,getOverride:y=>y.textColor,hasOverride:y=>!!y.textColor}),"text-halo-color":new Vn(ve.paint_symbol["text-halo-color"]),"text-halo-width":new Vn(ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Vn(ve.paint_symbol["text-halo-blur"]),"text-translate":new Pn(ve.paint_symbol["text-translate"]),"text-translate-anchor":new Pn(ve.paint_symbol["text-translate-anchor"])})},get layout(){return f1=f1||new sa({"symbol-placement":new Pn(ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Pn(ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pn(ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vn(ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pn(ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pn(ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Pn(ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Pn(ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pn(ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pn(ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vn(ve.layout_symbol["icon-size"]),"icon-text-fit":new Pn(ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pn(ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vn(ve.layout_symbol["icon-image"]),"icon-rotate":new Vn(ve.layout_symbol["icon-rotate"]),"icon-padding":new Vn(ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Pn(ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Vn(ve.layout_symbol["icon-offset"]),"icon-anchor":new Vn(ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pn(ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pn(ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pn(ve.layout_symbol["text-rotation-alignment"]),"text-field":new Vn(ve.layout_symbol["text-field"]),"text-font":new Vn(ve.layout_symbol["text-font"]),"text-size":new Vn(ve.layout_symbol["text-size"]),"text-max-width":new Vn(ve.layout_symbol["text-max-width"]),"text-line-height":new Pn(ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Vn(ve.layout_symbol["text-letter-spacing"]),"text-justify":new Vn(ve.layout_symbol["text-justify"]),"text-radial-offset":new Vn(ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pn(ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Vn(ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Vn(ve.layout_symbol["text-anchor"]),"text-max-angle":new Pn(ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Pn(ve.layout_symbol["text-writing-mode"]),"text-rotate":new Vn(ve.layout_symbol["text-rotate"]),"text-padding":new Pn(ve.layout_symbol["text-padding"]),"text-keep-upright":new Pn(ve.layout_symbol["text-keep-upright"]),"text-transform":new Vn(ve.layout_symbol["text-transform"]),"text-offset":new Vn(ve.layout_symbol["text-offset"]),"text-allow-overlap":new Pn(ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Pn(ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Pn(ve.layout_symbol["text-ignore-placement"]),"text-optional":new Pn(ve.layout_symbol["text-optional"])})}};class m1{constructor(f){if(f.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=f.property.overrides?f.property.overrides.runtimeType:Yr,this.defaultValue=f}evaluate(f){if(f.formattedSection){const _=this.defaultValue.property.overrides;if(_&&_.hasOverride(f.formattedSection))return _.getOverride(f.formattedSection)}return f.feature&&f.featureState?this.defaultValue.evaluate(f.feature,f.featureState):this.defaultValue.property.specification.default}eachChild(f){this.defaultValue.isConstant()||f(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_n("FormatSectionOverride",m1,{omit:["defaultValue"]});class Tg extends tl{constructor(f){super(f,cv)}recalculate(f,_){if(super.recalculate(f,_),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const I=this.layout.get("text-writing-mode");if(I){const k=[];for(const F of I)k.indexOf(F)<0&&k.push(F);this.layout._values["text-writing-mode"]=k}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(f,_,I,k){const F=this.layout.get(f).evaluate(_,{},I,k),j=this._unevaluatedLayout._values[f];return j.isDataDriven()||Kd(j.value)||!F?F:function(U,te){return te.replace(/{([^{}]+)}/g,(de,be)=>U&&be in U?String(U[be]):"")}(_.properties,F)}createBucket(f){return new vf(f)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const f of cv.paint.overridableProperties){if(!Tg.hasPaintOverride(this.layout,f))continue;const _=this.paint.get(f),I=new m1(_),k=new Zh(I,_.property.specification);let F=null;F=_.value.kind==="constant"||_.value.kind==="source"?new Ym("source",k):new Au("composite",k,_.value.zoomStops),this.paint._values[f]=new Wa(_.property,F,_.parameters)}}_handleOverridablePaintPropertyUpdate(f,_,I){return!(!this.layout||_.isDataDriven()||I.isDataDriven())&&Tg.hasPaintOverride(this.layout,f)}static hasPaintOverride(f,_){const I=f.get("text-field"),k=cv.paint.properties[_];let F=!1;const j=U=>{for(const te of U)if(k.overrides&&k.overrides.hasOverride(te))return void(F=!0)};if(I.value.kind==="constant"&&I.value.value instanceof Ti)j(I.value.value.sections);else if(I.value.kind==="source"){const U=de=>{F||(de instanceof qn&&jr(de.value)===Pe?j(de.value.sections):de instanceof ps?j(de.sections):de.eachChild(U))},te=I.value;te._styleExpression&&U(te._styleExpression.expression)}return F}}let g1;var nS={get paint(){return g1=g1||new sa({"background-color":new Pn(ve.paint_background["background-color"]),"background-pattern":new af(ve.paint_background["background-pattern"]),"background-opacity":new Pn(ve.paint_background["background-opacity"])})}};class iS extends tl{constructor(f){super(f,nS)}}let y1;var mh={get paint(){return y1=y1||new sa({"raster-opacity":new Pn(ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pn(ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pn(ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pn(ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Pn(ve.paint_raster["raster-saturation"]),"raster-contrast":new Pn(ve.paint_raster["raster-contrast"]),"raster-resampling":new Pn(ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Pn(ve.paint_raster["raster-fade-duration"])})}};class NM extends tl{constructor(f){super(f,mh)}}class pi extends tl{constructor(f){super(f,{}),this.onAdd=_=>{this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},this.onRemove=_=>{this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},this.implementation=f}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class v1{constructor(f){this._callback=f,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const $l=63710088e-1;class gh{constructor(f,_){if(isNaN(f)||isNaN(_))throw new Error(`Invalid LngLat object: (${f}, ${_})`);if(this.lng=+f,this.lat=+_,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new gh(pe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(f){const _=Math.PI/180,I=this.lat*_,k=f.lat*_,F=Math.sin(I)*Math.sin(k)+Math.cos(I)*Math.cos(k)*Math.cos((f.lng-this.lng)*_);return $l*Math.acos(Math.min(F,1))}static convert(f){if(f instanceof gh)return f;if(Array.isArray(f)&&(f.length===2||f.length===3))return new gh(Number(f[0]),Number(f[1]));if(!Array.isArray(f)&&typeof f=="object"&&f!==null)return new gh(Number("lng"in f?f.lng:f.lon),Number(f.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const _1=2*Math.PI*$l;function x1(y){return _1*Math.cos(y*Math.PI/180)}function b1(y){return(180+y)/360}function w1(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function S1(y,f){return y/x1(f)}function C1(y){return 360*y-180}function uv(y){return 360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90}class Ig{constructor(f,_,I=0){this.x=+f,this.y=+_,this.z=+I}static fromLngLat(f,_=0){const I=gh.convert(f);return new Ig(b1(I.lng),w1(I.lat),S1(_,I.lat))}toLngLat(){return new gh(C1(this.x),uv(this.y))}toAltitude(){return this.z*x1(uv(this.y))}meterInMercatorCoordinateUnits(){return 1/_1*(f=uv(this.y),1/Math.cos(f*Math.PI/180));var f}}function oS(y,f,_){var I=2*Math.PI*6378137/256/Math.pow(2,_);return[y*I-2*Math.PI*6378137/2,f*I-2*Math.PI*6378137/2]}class Mg{constructor(f,_,I){if(f<0||f>25||I<0||I>=Math.pow(2,f)||_<0||_>=Math.pow(2,f))throw new Error(`x=${_}, y=${I}, z=${f} outside of bounds. 0<=x<${Math.pow(2,f)}, 0<=y<${Math.pow(2,f)} 0<=z<=25 `);this.z=f,this.x=_,this.y=I,this.key=nc(0,f,f,_,I)}equals(f){return this.z===f.z&&this.x===f.x&&this.y===f.y}url(f,_,I){const k=(j=this.y,U=this.z,te=oS(256*(F=this.x),256*(j=Math.pow(2,U)-j-1),U),de=oS(256*(F+1),256*(j+1),U),te[0]+","+te[1]+","+de[0]+","+de[1]);var F,j,U,te,de;const be=function(Ae,He,ce){let Je,ot="";for(let mt=Ae;mt>0;mt--)Je=1<<mt-1,ot+=(He&Je?1:0)+(ce&Je?2:0);return ot}(this.z,this.x,this.y);return f[(this.x+this.y)%f.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,_>1?"@2x":"").replace(/{quadkey}/g,be).replace(/{bbox-epsg-3857}/g,k)}isChildOf(f){const _=this.z-f.z;return _>0&&f.x===this.x>>_&&f.y===this.y>>_}getTilePoint(f){const _=Math.pow(2,this.z);return new $((f.x*_-this.x)*Sa,(f.y*_-this.y)*Sa)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _d{constructor(f,_){this.wrap=f,this.canonical=_,this.key=nc(f,_.z,_.z,_.x,_.y)}}class rc{constructor(f,_,I,k,F){if(f<I)throw new Error(`overscaledZ should be >= z; overscaledZ = ${f}; z = ${I}`);this.overscaledZ=f,this.wrap=_,this.canonical=new Mg(I,+k,+F),this.key=nc(_,f,I,k,F)}clone(){return new rc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(f){return this.overscaledZ===f.overscaledZ&&this.wrap===f.wrap&&this.canonical.equals(f.canonical)}scaledTo(f){if(f>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${f}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-f;return f>this.canonical.z?new rc(f,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rc(f,this.wrap,f,this.canonical.x>>_,this.canonical.y>>_)}calculateScaledKey(f,_){if(f>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${f}; overscaledZ = ${this.overscaledZ}`);const I=this.canonical.z-f;return f>this.canonical.z?nc(this.wrap*+_,f,this.canonical.z,this.canonical.x,this.canonical.y):nc(this.wrap*+_,f,f,this.canonical.x>>I,this.canonical.y>>I)}isChildOf(f){if(f.wrap!==this.wrap)return!1;const _=this.canonical.z-f.canonical.z;return f.overscaledZ===0||f.overscaledZ<this.overscaledZ&&f.canonical.x===this.canonical.x>>_&&f.canonical.y===this.canonical.y>>_}children(f){if(this.overscaledZ>=f)return[new rc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const _=this.canonical.z+1,I=2*this.canonical.x,k=2*this.canonical.y;return[new rc(_,this.wrap,_,I,k),new rc(_,this.wrap,_,I+1,k),new rc(_,this.wrap,_,I,k+1),new rc(_,this.wrap,_,I+1,k+1)]}isLessThan(f){return this.wrap<f.wrap||!(this.wrap>f.wrap)&&(this.overscaledZ<f.overscaledZ||!(this.overscaledZ>f.overscaledZ)&&(this.canonical.x<f.canonical.x||!(this.canonical.x>f.canonical.x)&&this.canonical.y<f.canonical.y))}wrapped(){return new rc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(f){return new rc(this.overscaledZ,f,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _d(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(f){return this.canonical.getTilePoint(new Ig(f.x-this.wrap,f.y))}}function nc(y,f,_,I,k){(y*=2)<0&&(y=-1*y-1);const F=1<<_;return(F*F*y+F*k+I).toString(36)+_.toString(36)+f.toString(36)}_n("CanonicalTileID",Mg),_n("OverscaledTileID",rc,{omit:["posMatrix"]});class Bl{constructor(f,_,I,k=1,F=1,j=1,U=0){if(this.uid=f,_.height!==_.width)throw new RangeError("DEM tiles must be square");if(I&&!["mapbox","terrarium","custom"].includes(I))return void _e(`"${I}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=_.height;const te=this.dim=_.height-2;switch(this.data=new Uint32Array(_.data.buffer),I){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=k,this.greenFactor=F,this.blueFactor=j,this.baseShift=U;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let de=0;de<te;de++)this.data[this._idx(-1,de)]=this.data[this._idx(0,de)],this.data[this._idx(te,de)]=this.data[this._idx(te-1,de)],this.data[this._idx(de,-1)]=this.data[this._idx(de,0)],this.data[this._idx(de,te)]=this.data[this._idx(de,te-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(te,-1)]=this.data[this._idx(te-1,0)],this.data[this._idx(-1,te)]=this.data[this._idx(0,te-1)],this.data[this._idx(te,te)]=this.data[this._idx(te-1,te-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let de=0;de<te;de++)for(let be=0;be<te;be++){const Ae=this.get(de,be);Ae>this.max&&(this.max=Ae),Ae<this.min&&(this.min=Ae)}}get(f,_){const I=new Uint8Array(this.data.buffer),k=4*this._idx(f,_);return this.unpack(I[k],I[k+1],I[k+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(f,_){if(f<-1||f>=this.dim+1||_<-1||_>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(_+1)*this.stride+(f+1)}unpack(f,_,I){return f*this.redFactor+_*this.greenFactor+I*this.blueFactor-this.baseShift}getPixels(){return new ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(f,_,I){if(this.dim!==f.dim)throw new Error("dem dimension mismatch");let k=_*this.dim,F=_*this.dim+this.dim,j=I*this.dim,U=I*this.dim+this.dim;switch(_){case-1:k=F-1;break;case 1:F=k+1}switch(I){case-1:j=U-1;break;case 1:U=j+1}const te=-_*this.dim,de=-I*this.dim;for(let be=j;be<U;be++)for(let Ae=k;Ae<F;Ae++)this.data[this._idx(Ae,be)]=f.data[this._idx(Ae+te,be+de)]}}_n("DEMData",Bl);class E1{constructor(f){this._stringToNumber={},this._numberToString=[];for(let _=0;_<f.length;_++){const I=f[_];this._stringToNumber[I]=_,this._numberToString[_]=I}}encode(f){return this._stringToNumber[f]}decode(f){if(f>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${f} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[f]}}class Pg{constructor(f,_,I,k,F){this.type="Feature",this._vectorTileFeature=f,f._z=_,f._x=I,f._y=k,this.properties=f.properties,this.id=F}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(f){this._geometry=f}toJSON(){const f={geometry:this.geometry};for(const _ in this)_!=="_geometry"&&_!=="_vectorTileFeature"&&(f[_]=this[_]);return f}}class hv{constructor(f,_){this.tileID=f,this.x=f.canonical.x,this.y=f.canonical.y,this.z=f.canonical.z,this.grid=new Gc(Sa,16,0),this.grid3D=new Gc(Sa,16,0),this.featureIndexArray=new Ar,this.promoteId=_}insert(f,_,I,k,F,j){const U=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(I,k,F);const te=j?this.grid3D:this.grid;for(let de=0;de<_.length;de++){const be=_[de],Ae=[1/0,1/0,-1/0,-1/0];for(let He=0;He<be.length;He++){const ce=be[He];Ae[0]=Math.min(Ae[0],ce.x),Ae[1]=Math.min(Ae[1],ce.y),Ae[2]=Math.max(Ae[2],ce.x),Ae[3]=Math.max(Ae[3],ce.y)}Ae[0]<Sa&&Ae[1]<Sa&&Ae[2]>=0&&Ae[3]>=0&&te.insert(U,Ae[0],Ae[1],Ae[2],Ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new yl.VectorTile(new Ea(this.rawTileData)).layers,this.sourceLayerCoder=new E1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(f,_,I,k){this.loadVTLayers();const F=f.params||{},j=Sa/f.tileSize/f.scale,U=_c(F.filter),te=f.queryGeometry,de=f.queryPadding*j,be=I1(te),Ae=this.grid.query(be.minX-de,be.minY-de,be.maxX+de,be.maxY+de),He=I1(f.cameraQueryGeometry),ce=this.grid3D.query(He.minX-de,He.minY-de,He.maxX+de,He.maxY+de,(mt,wt,qt,Bt)=>function(Kt,cr,Tr,sn,En){for(const ln of Kt)if(cr<=ln.x&&Tr<=ln.y&&sn>=ln.x&&En>=ln.y)return!0;const xr=[new $(cr,Tr),new $(cr,En),new $(sn,En),new $(sn,Tr)];if(Kt.length>2){for(const ln of xr)if(Ep(Kt,ln))return!0}for(let ln=0;ln<Kt.length-1;ln++)if(RM(Kt[ln],Kt[ln+1],xr))return!0;return!1}(f.cameraQueryGeometry,mt-de,wt-de,qt+de,Bt+de));for(const mt of ce)Ae.push(mt);Ae.sort(aS);const Je={};let ot;for(let mt=0;mt<Ae.length;mt++){const wt=Ae[mt];if(wt===ot)continue;ot=wt;const qt=this.featureIndexArray.get(wt);let Bt=null;this.loadMatchingFeature(Je,qt.bucketIndex,qt.sourceLayerIndex,qt.featureIndex,U,F.layers,F.availableImages,_,I,k,(Kt,cr,Tr)=>(Bt||(Bt=ld(Kt)),cr.queryIntersectsFeature(te,Kt,Tr,Bt,this.z,f.transform,j,f.pixelPosMatrix)))}return Je}loadMatchingFeature(f,_,I,k,F,j,U,te,de,be,Ae){const He=this.bucketLayerIDs[_];if(j&&!function(mt,wt){for(let qt=0;qt<mt.length;qt++)if(wt.indexOf(mt[qt])>=0)return!0;return!1}(j,He))return;const ce=this.sourceLayerCoder.decode(I),Je=this.vtLayers[ce].feature(k);if(F.needGeometry){const mt=cd(Je,!0);if(!F.filter(new Ao(this.tileID.overscaledZ),mt,this.tileID.canonical))return}else if(!F.filter(new Ao(this.tileID.overscaledZ),Je))return;const ot=this.getId(Je,ce);for(let mt=0;mt<He.length;mt++){const wt=He[mt];if(j&&j.indexOf(wt)<0)continue;const qt=te[wt];if(!qt)continue;let Bt={};ot&&be&&(Bt=be.getState(qt.sourceLayer||"_geojsonTileLayer",ot));const Kt=xe({},de[wt]);Kt.paint=T1(Kt.paint,qt.paint,Je,Bt,U),Kt.layout=T1(Kt.layout,qt.layout,Je,Bt,U);const cr=!Ae||Ae(Je,qt,Bt);if(!cr)continue;const Tr=new Pg(Je,this.z,this.x,this.y,ot);Tr.layer=Kt;let sn=f[wt];sn===void 0&&(sn=f[wt]=[]),sn.push({featureIndex:k,feature:Tr,intersectionZ:cr})}}lookupSymbolFeatures(f,_,I,k,F,j,U,te){const de={};this.loadVTLayers();const be=_c(F);for(const Ae of f)this.loadMatchingFeature(de,I,k,Ae,be,j,U,te,_);return de}hasLayer(f){for(const _ of this.bucketLayerIDs)for(const I of _)if(f===I)return!0;return!1}getId(f,_){let I=f.id;return this.promoteId&&(I=f.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[_]],typeof I=="boolean"&&(I=Number(I))),I}}function T1(y,f,_,I,k){return oe(y,(F,j)=>{const U=f instanceof of?f.get(j):null;return U&&U.evaluate?U.evaluate(_,I,k):U})}function I1(y){let f=1/0,_=1/0,I=-1/0,k=-1/0;for(const F of y)f=Math.min(f,F.x),_=Math.min(_,F.y),I=Math.max(I,F.x),k=Math.max(k,F.y);return{minX:f,minY:_,maxX:I,maxY:k}}function aS(y,f){return f-y}function M1(y,f,_,I,k){const F=[];for(let j=0;j<y.length;j++){const U=y[j];let te;for(let de=0;de<U.length-1;de++){let be=U[de],Ae=U[de+1];be.x<f&&Ae.x<f||(be.x<f?be=new $(f,be.y+(f-be.x)/(Ae.x-be.x)*(Ae.y-be.y))._round():Ae.x<f&&(Ae=new $(f,be.y+(f-be.x)/(Ae.x-be.x)*(Ae.y-be.y))._round()),be.y<_&&Ae.y<_||(be.y<_?be=new $(be.x+(_-be.y)/(Ae.y-be.y)*(Ae.x-be.x),_)._round():Ae.y<_&&(Ae=new $(be.x+(_-be.y)/(Ae.y-be.y)*(Ae.x-be.x),_)._round()),be.x>=I&&Ae.x>=I||(be.x>=I?be=new $(I,be.y+(I-be.x)/(Ae.x-be.x)*(Ae.y-be.y))._round():Ae.x>=I&&(Ae=new $(I,be.y+(I-be.x)/(Ae.x-be.x)*(Ae.y-be.y))._round()),be.y>=k&&Ae.y>=k||(be.y>=k?be=new $(be.x+(k-be.y)/(Ae.y-be.y)*(Ae.x-be.x),k)._round():Ae.y>=k&&(Ae=new $(be.x+(k-be.y)/(Ae.y-be.y)*(Ae.x-be.x),k)._round()),te&&be.equals(te[te.length-1])||(te=[be],F.push(te)),te.push(Ae)))))}}return F}_n("FeatureIndex",hv,{omit:["rawTileData","sourceLayerCoder"]});class ru extends ${constructor(f,_,I,k){super(f,_),this.angle=I,k!==void 0&&(this.segment=k)}clone(){return new ru(this.x,this.y,this.angle,this.segment)}}function P1(y,f,_,I,k){if(f.segment===void 0||_===0)return!0;let F=f,j=f.segment+1,U=0;for(;U>-_/2;){if(j--,j<0)return!1;U-=y[j].dist(F),F=y[j]}U+=y[j].dist(y[j+1]),j++;const te=[];let de=0;for(;U<_/2;){const be=y[j],Ae=y[j+1];if(!Ae)return!1;let He=y[j-1].angleTo(be)-be.angleTo(Ae);for(He=Math.abs((He+3*Math.PI)%(2*Math.PI)-Math.PI),te.push({distance:U,angleDelta:He}),de+=He;U-te[0].distance>I;)de-=te.shift().angleDelta;if(de>k)return!1;j++,U+=be.dist(Ae)}return!0}function A1(y){let f=0;for(let _=0;_<y.length-1;_++)f+=y[_].dist(y[_+1]);return f}function R1(y,f,_){return y?.6*f*_:0}function k1(y,f){return Math.max(y?y.right-y.left:0,f?f.right-f.left:0)}function sS(y,f,_,I,k,F){const j=R1(_,k,F),U=k1(_,I)*F;let te=0;const de=A1(y)/2;for(let be=0;be<y.length-1;be++){const Ae=y[be],He=y[be+1],ce=Ae.dist(He);if(te+ce>de){const Je=(de-te)/ce,ot=ss.number(Ae.x,He.x,Je),mt=ss.number(Ae.y,He.y,Je),wt=new ru(ot,mt,He.angleTo(Ae),be);return wt._round(),!j||P1(y,wt,U,j,f)?wt:void 0}te+=ce}}function O1(y,f,_,I,k,F,j,U,te){const de=R1(I,F,j),be=k1(I,k),Ae=be*j,He=y[0].x===0||y[0].x===te||y[0].y===0||y[0].y===te;return f-Ae<f/4&&(f=Ae+f/4),Ec(y,He?f/2*U%f:(be/2+2*F)*j*U%f,f,de,_,Ae,He,!1,te)}function Ec(y,f,_,I,k,F,j,U,te){const de=F/2,be=A1(y);let Ae=0,He=f-_,ce=[];for(let Je=0;Je<y.length-1;Je++){const ot=y[Je],mt=y[Je+1],wt=ot.dist(mt),qt=mt.angleTo(ot);for(;He+_<Ae+wt;){He+=_;const Bt=(He-Ae)/wt,Kt=ss.number(ot.x,mt.x,Bt),cr=ss.number(ot.y,mt.y,Bt);if(Kt>=0&&Kt<te&&cr>=0&&cr<te&&He-de>=0&&He+de<=be){const Tr=new ru(Kt,cr,qt,Je);Tr._round(),I&&!P1(y,Tr,F,I,k)||ce.push(Tr)}}Ae+=wt}return U||ce.length||j||(ce=Ec(y,Ae/2,_,I,k,F,j,!0,te)),ce}_n("Anchor",ru);const _f=js;function z1(y,f,_,I){const k=[],F=y.image,j=F.pixelRatio,U=F.paddedRect.w-2*_f,te=F.paddedRect.h-2*_f,de=y.right-y.left,be=y.bottom-y.top,Ae=F.stretchX||[[0,U]],He=F.stretchY||[[0,te]],ce=(nn,bn)=>nn+bn[1]-bn[0],Je=Ae.reduce(ce,0),ot=He.reduce(ce,0),mt=U-Je,wt=te-ot;let qt=0,Bt=Je,Kt=0,cr=ot,Tr=0,sn=mt,En=0,xr=wt;if(F.content&&I){const nn=F.content;qt=dv(Ae,0,nn[0]),Kt=dv(He,0,nn[1]),Bt=dv(Ae,nn[0],nn[2]),cr=dv(He,nn[1],nn[3]),Tr=nn[0]-qt,En=nn[1]-Kt,sn=nn[2]-nn[0]-Bt,xr=nn[3]-nn[1]-cr}const ln=(nn,bn,on,Dr)=>{const $n=Np(nn.stretch-qt,Bt,de,y.left),Rn=pv(nn.fixed-Tr,sn,nn.stretch,Je),Pi=Np(bn.stretch-Kt,cr,be,y.top),to=pv(bn.fixed-En,xr,bn.stretch,ot),Xn=Np(on.stretch-qt,Bt,de,y.left),ca=pv(on.fixed-Tr,sn,on.stretch,Je),Ya=Np(Dr.stretch-Kt,cr,be,y.top),Co=pv(Dr.fixed-En,xr,Dr.stretch,ot),Ba=new $($n,Pi),ga=new $(Xn,Pi),hs=new $(Xn,Ya),Yo=new $($n,Ya),Jo=new $(Rn/j,to/j),Ja=new $(ca/j,Co/j),ya=f*Math.PI/180;if(ya){const gs=Math.sin(ya),ia=Math.cos(ya),Ia=[ia,-gs,gs,ia];Ba._matMult(Ia),ga._matMult(Ia),Yo._matMult(Ia),hs._matMult(Ia)}const Ms=nn.stretch+nn.fixed,il=bn.stretch+bn.fixed;return{tl:Ba,tr:ga,bl:Yo,br:hs,tex:{x:F.paddedRect.x+_f+Ms,y:F.paddedRect.y+_f+il,w:on.stretch+on.fixed-Ms,h:Dr.stretch+Dr.fixed-il},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jo,pixelOffsetBR:Ja,minFontScaleX:sn/j/de,minFontScaleY:xr/j/be,isSDF:_}};if(I&&(F.stretchX||F.stretchY)){const nn=fv(Ae,mt,Je),bn=fv(He,wt,ot);for(let on=0;on<nn.length-1;on++){const Dr=nn[on],$n=nn[on+1];for(let Rn=0;Rn<bn.length-1;Rn++)k.push(ln(Dr,bn[Rn],$n,bn[Rn+1]))}}else k.push(ln({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:U+1},{fixed:0,stretch:te+1}));return k}function dv(y,f,_){let I=0;for(const k of y)I+=Math.max(f,Math.min(_,k[1]))-Math.max(f,Math.min(_,k[0]));return I}function fv(y,f,_){const I=[{fixed:-_f,stretch:0}];for(const[k,F]of y){const j=I[I.length-1];I.push({fixed:k-j.stretch,stretch:j.stretch}),I.push({fixed:k-j.stretch,stretch:j.stretch+(F-k)})}return I.push({fixed:f+_f,stretch:_}),I}function Np(y,f,_,I){return y/f*_+I}function pv(y,f,_,I){return y-f*_/I}class Fl{constructor(f,_,I,k,F,j,U,te,de,be){if(this.boxStartIndex=f.length,de){let Ae=j.top,He=j.bottom;const ce=j.collisionPadding;ce&&(Ae-=ce[1],He+=ce[3]);let Je=He-Ae;Je>0&&(Je=Math.max(10,Je),this.circleDiameter=Je)}else{let Ae=j.top*U-te[0],He=j.bottom*U+te[2],ce=j.left*U-te[3],Je=j.right*U+te[1];const ot=j.collisionPadding;if(ot&&(ce-=ot[0]*U,Ae-=ot[1]*U,Je+=ot[2]*U,He+=ot[3]*U),be){const mt=new $(ce,Ae),wt=new $(Je,Ae),qt=new $(ce,He),Bt=new $(Je,He),Kt=be*Math.PI/180;mt._rotate(Kt),wt._rotate(Kt),qt._rotate(Kt),Bt._rotate(Kt),ce=Math.min(mt.x,wt.x,qt.x,Bt.x),Je=Math.max(mt.x,wt.x,qt.x,Bt.x),Ae=Math.min(mt.y,wt.y,qt.y,Bt.y),He=Math.max(mt.y,wt.y,qt.y,Bt.y)}f.emplaceBack(_.x,_.y,ce,Ae,Je,He,I,k,F)}this.boxEndIndex=f.length}}class jM{constructor(f=[],_=wi){if(this.data=f,this.length=this.data.length,this.compare=_,this.length>0)for(let I=(this.length>>1)-1;I>=0;I--)this._down(I)}push(f){this.data.push(f),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const f=this.data[0],_=this.data.pop();return this.length--,this.length>0&&(this.data[0]=_,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:_,compare:I}=this,k=_[f];for(;f>0;){const F=f-1>>1,j=_[F];if(I(k,j)>=0)break;_[f]=j,f=F}_[f]=k}_down(f){const{data:_,compare:I}=this,k=this.length>>1,F=_[f];for(;f<k;){let j=1+(f<<1),U=_[j];const te=j+1;if(te<this.length&&I(_[te],U)<0&&(j=te,U=_[te]),I(U,F)>=0)break;_[f]=U,f=j}_[f]=F}}function wi(y,f){return y<f?-1:y>f?1:0}function D1(y,f=1,_=!1){let I=1/0,k=1/0,F=-1/0,j=-1/0;const U=y[0];for(let ce=0;ce<U.length;ce++){const Je=U[ce];(!ce||Je.x<I)&&(I=Je.x),(!ce||Je.y<k)&&(k=Je.y),(!ce||Je.x>F)&&(F=Je.x),(!ce||Je.y>j)&&(j=Je.y)}const te=Math.min(F-I,j-k);let de=te/2;const be=new jM([],_l);if(te===0)return new $(I,k);for(let ce=I;ce<F;ce+=te)for(let Je=k;Je<j;Je+=te)be.push(new Nl(ce+de,Je+de,de,y));let Ae=function(ce){let Je=0,ot=0,mt=0;const wt=ce[0];for(let qt=0,Bt=wt.length,Kt=Bt-1;qt<Bt;Kt=qt++){const cr=wt[qt],Tr=wt[Kt],sn=cr.x*Tr.y-Tr.x*cr.y;ot+=(cr.x+Tr.x)*sn,mt+=(cr.y+Tr.y)*sn,Je+=3*sn}return new Nl(ot/Je,mt/Je,0,ce)}(y),He=be.length;for(;be.length;){const ce=be.pop();(ce.d>Ae.d||!Ae.d)&&(Ae=ce,_&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,He)),ce.max-Ae.d<=f||(de=ce.h/2,be.push(new Nl(ce.p.x-de,ce.p.y-de,de,y)),be.push(new Nl(ce.p.x+de,ce.p.y-de,de,y)),be.push(new Nl(ce.p.x-de,ce.p.y+de,de,y)),be.push(new Nl(ce.p.x+de,ce.p.y+de,de,y)),He+=4)}return _&&(console.log(`num probes: ${He}`),console.log(`best distance: ${Ae.d}`)),Ae.p}function _l(y,f){return f.max-y.max}function Nl(y,f,_,I){this.p=new $(y,f),this.h=_,this.d=function(k,F){let j=!1,U=1/0;for(let te=0;te<F.length;te++){const de=F[te];for(let be=0,Ae=de.length,He=Ae-1;be<Ae;He=be++){const ce=de[be],Je=de[He];ce.y>k.y!=Je.y>k.y&&k.x<(Je.x-ce.x)*(k.y-ce.y)/(Je.y-ce.y)+ce.x&&(j=!j),U=Math.min(U,Rw(k,ce,Je))}}return(j?1:-1)*Math.sqrt(U)}(this.p,I),this.max=this.d+this.h*Math.SQRT2}var ms;d.aq=void 0,(ms=d.aq||(d.aq={}))[ms.center=1]="center",ms[ms.left=2]="left",ms[ms.right=3]="right",ms[ms.top=4]="top",ms[ms.bottom=5]="bottom",ms[ms["top-left"]=6]="top-left",ms[ms["top-right"]=7]="top-right",ms[ms["bottom-left"]=8]="bottom-left",ms[ms["bottom-right"]=9]="bottom-right";const yh=7,Ag=Number.POSITIVE_INFINITY;function L1(y,f){return f[1]!==Ag?function(_,I,k){let F=0,j=0;switch(I=Math.abs(I),k=Math.abs(k),_){case"top-right":case"top-left":case"top":j=k-yh;break;case"bottom-right":case"bottom-left":case"bottom":j=-k+yh}switch(_){case"top-right":case"bottom-right":case"right":F=-I;break;case"top-left":case"bottom-left":case"left":F=I}return[F,j]}(y,f[0],f[1]):function(_,I){let k=0,F=0;I<0&&(I=0);const j=I/Math.SQRT2;switch(_){case"top-right":case"top-left":F=j-yh;break;case"bottom-right":case"bottom-left":F=-j+yh;break;case"bottom":F=-I+yh;break;case"top":F=I-yh}switch(_){case"top-right":case"bottom-right":k=-j;break;case"top-left":case"bottom-left":k=j;break;case"left":k=I;break;case"right":k=-I}return[k,F]}(y,f[0])}function $1(y,f,_){var I;const k=y.layout,F=(I=k.get("text-variable-anchor-offset"))===null||I===void 0?void 0:I.evaluate(f,{},_);if(F){const U=F.values,te=[];for(let de=0;de<U.length;de+=2){const be=te[de]=U[de],Ae=U[de+1].map(He=>He*xn);be.startsWith("top")?Ae[1]-=yh:be.startsWith("bottom")&&(Ae[1]+=yh),te[de+1]=Ae}return new Ho(te)}const j=k.get("text-variable-anchor");if(j){let U;U=y._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[k.get("text-radial-offset").evaluate(f,{},_)*xn,Ag]:k.get("text-offset").evaluate(f,{},_).map(de=>de*xn);const te=[];for(const de of j)te.push(de,L1(de,U));return new Ho(te)}return null}function mv(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lS(y,f,_,I,k,F,j,U,te,de,be){let Ae=F.textMaxSize.evaluate(f,{});Ae===void 0&&(Ae=j);const He=y.layers[0].layout,ce=He.get("icon-offset").evaluate(f,{},be),Je=Rg(_.horizontal),ot=j/24,mt=y.tilePixelRatio*ot,wt=y.tilePixelRatio*Ae/24,qt=y.tilePixelRatio*U,Bt=y.tilePixelRatio*He.get("symbol-spacing"),Kt=He.get("text-padding")*y.tilePixelRatio,cr=function(Dr,$n,Rn,Pi=1){const to=Dr.get("icon-padding").evaluate($n,{},Rn),Xn=to&&to.values;return[Xn[0]*Pi,Xn[1]*Pi,Xn[2]*Pi,Xn[3]*Pi]}(He,f,be,y.tilePixelRatio),Tr=He.get("text-max-angle")/180*Math.PI,sn=He.get("text-rotation-alignment")!=="viewport"&&He.get("symbol-placement")!=="point",En=He.get("icon-rotation-alignment")==="map"&&He.get("symbol-placement")!=="point",xr=He.get("symbol-placement"),ln=Bt/2,nn=He.get("icon-text-fit");let bn;I&&nn!=="none"&&(y.allowVerticalPlacement&&_.vertical&&(bn=Ko(I,_.vertical,nn,He.get("icon-text-fit-padding"),ce,ot)),Je&&(I=Ko(I,Je,nn,He.get("icon-text-fit-padding"),ce,ot)));const on=(Dr,$n)=>{$n.x<0||$n.x>=Sa||$n.y<0||$n.y>=Sa||function(Rn,Pi,to,Xn,ca,Ya,Co,Ba,ga,hs,Yo,Jo,Ja,ya,Ms,il,gs,ia,Ia,Fa,Fi,ys,Qa,Ma,Vs){const ua=Rn.addToLineVertexArray(Pi,to);let xl,Tc,ic,vs,Us=0,nu=0,Up=0,V1=0,Na=-1,bv=-1;const Nu={};let cS=kl("");if(Rn.allowVerticalPlacement&&Xn.vertical){const ro=Ba.layout.get("text-rotate").evaluate(Fi,{},Ma)+90;ic=new Fl(ga,Pi,hs,Yo,Jo,Xn.vertical,Ja,ya,Ms,ro),Co&&(vs=new Fl(ga,Pi,hs,Yo,Jo,Co,gs,ia,Ms,ro))}if(ca){const ro=Ba.layout.get("icon-rotate").evaluate(Fi,{}),Eo=Ba.layout.get("icon-text-fit")!=="none",Oi=z1(ca,ro,Qa,Eo),va=Co?z1(Co,ro,Qa,Eo):void 0;Tc=new Fl(ga,Pi,hs,Yo,Jo,ca,gs,ia,!1,ro),Us=4*Oi.length;const Ro=Rn.iconSizeData;let ou=null;Ro.kind==="source"?(ou=[eu*Ba.layout.get("icon-size").evaluate(Fi,{})],ou[0]>ph&&_e(`${Rn.layerIds[0]}: Value for "icon-size" is >= ${Fp}. Reduce your "icon-size".`)):Ro.kind==="composite"&&(ou=[eu*ys.compositeIconSizes[0].evaluate(Fi,{},Ma),eu*ys.compositeIconSizes[1].evaluate(Fi,{},Ma)],(ou[0]>ph||ou[1]>ph)&&_e(`${Rn.layerIds[0]}: Value for "icon-size" is >= ${Fp}. Reduce your "icon-size".`)),Rn.addSymbols(Rn.icon,Oi,ou,Fa,Ia,Fi,d.ai.none,Pi,ua.lineStartIndex,ua.lineLength,-1,Ma),Na=Rn.icon.placedSymbolArray.length-1,va&&(nu=4*va.length,Rn.addSymbols(Rn.icon,va,ou,Fa,Ia,Fi,d.ai.vertical,Pi,ua.lineStartIndex,ua.lineLength,-1,Ma),bv=Rn.icon.placedSymbolArray.length-1)}const uS=Object.keys(Xn.horizontal);for(const ro of uS){const Eo=Xn.horizontal[ro];if(!xl){cS=kl(Eo.text);const va=Ba.layout.get("text-rotate").evaluate(Fi,{},Ma);xl=new Fl(ga,Pi,hs,Yo,Jo,Eo,Ja,ya,Ms,va)}const Oi=Eo.positionedLines.length===1;if(Up+=B1(Rn,Pi,Eo,Ya,Ba,Ms,Fi,il,ua,Xn.vertical?d.ai.horizontal:d.ai.horizontalOnly,Oi?uS:[ro],Nu,Na,ys,Ma),Oi)break}Xn.vertical&&(V1+=B1(Rn,Pi,Xn.vertical,Ya,Ba,Ms,Fi,il,ua,d.ai.vertical,["vertical"],Nu,bv,ys,Ma));const hS=xl?xl.boxStartIndex:Rn.collisionBoxArray.length,dS=xl?xl.boxEndIndex:Rn.collisionBoxArray.length,wv=ic?ic.boxStartIndex:Rn.collisionBoxArray.length,fS=ic?ic.boxEndIndex:Rn.collisionBoxArray.length,VM=Tc?Tc.boxStartIndex:Rn.collisionBoxArray.length,UM=Tc?Tc.boxEndIndex:Rn.collisionBoxArray.length,HM=vs?vs.boxStartIndex:Rn.collisionBoxArray.length,Hp=vs?vs.boxEndIndex:Rn.collisionBoxArray.length;let oc=-1;const iu=(ro,Eo)=>ro&&ro.circleDiameter?Math.max(ro.circleDiameter,Eo):Eo;oc=iu(xl,oc),oc=iu(ic,oc),oc=iu(Tc,oc),oc=iu(vs,oc);const zn=oc>-1?1:0;zn&&(oc*=Vs/xn),Rn.glyphOffsetArray.length>=vf.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fi.sortKey!==void 0&&Rn.addToSortKeyRanges(Rn.symbolInstances.length,Fi.sortKey);const GM=$1(Ba,Fi,Ma),[qM,Sv]=function(ro,Eo){const Oi=ro.length,va=Eo?.values;if(va?.length>0)for(let Ro=0;Ro<va.length;Ro+=2){const ou=va[Ro+1];ro.emplaceBack(d.aq[va[Ro]],ou[0],ou[1])}return[Oi,ro.length]}(Rn.textAnchorOffsets,GM);Rn.symbolInstances.emplaceBack(Pi.x,Pi.y,Nu.right>=0?Nu.right:-1,Nu.center>=0?Nu.center:-1,Nu.left>=0?Nu.left:-1,Nu.vertical||-1,Na,bv,cS,hS,dS,wv,fS,VM,UM,HM,Hp,hs,Up,V1,Us,nu,zn,0,Ja,oc,qM,Sv)}(y,$n,Dr,_,I,k,bn,y.layers[0],y.collisionBoxArray,f.index,f.sourceLayerIndex,y.index,mt,[Kt,Kt,Kt,Kt],sn,te,qt,cr,En,ce,f,F,de,be,j)};if(xr==="line")for(const Dr of M1(f.geometry,0,0,Sa,Sa)){const $n=O1(Dr,Bt,Tr,_.vertical||Je,I,24,wt,y.overscaling,Sa);for(const Rn of $n)Je&&ti(y,Je.text,ln,Rn)||on(Dr,Rn)}else if(xr==="line-center"){for(const Dr of f.geometry)if(Dr.length>1){const $n=sS(Dr,Tr,_.vertical||Je,I,24,wt);$n&&on(Dr,$n)}}else if(f.type==="Polygon")for(const Dr of $u(f.geometry,0)){const $n=D1(Dr,16);on(Dr[0],new ru($n.x,$n.y,0))}else if(f.type==="LineString")for(const Dr of f.geometry)on(Dr,new ru(Dr[0].x,Dr[0].y,0));else if(f.type==="Point")for(const Dr of f.geometry)for(const $n of Dr)on([$n],new ru($n.x,$n.y,0))}function B1(y,f,_,I,k,F,j,U,te,de,be,Ae,He,ce,Je){const ot=function(qt,Bt,Kt,cr,Tr,sn,En,xr){const ln=cr.layout.get("text-rotate").evaluate(sn,{})*Math.PI/180,nn=[];for(const bn of Bt.positionedLines)for(const on of bn.positionedGlyphs){if(!on.rect)continue;const Dr=on.rect||{};let $n=Qw+1,Rn=!0,Pi=1,to=0;const Xn=(Tr||xr)&&on.vertical,ca=on.metrics.advance*on.scale/2;if(xr&&Bt.verticalizable&&(to=bn.lineOffset/2-(on.imageName?-(xn-on.metrics.width*on.scale)/2:(on.scale-1)*xn)),on.imageName){const Fa=En[on.imageName];Rn=Fa.sdf,Pi=Fa.pixelRatio,$n=js/Pi}const Ya=Tr?[on.x+ca,on.y]:[0,0];let Co=Tr?[0,0]:[on.x+ca+Kt[0],on.y+Kt[1]-to],Ba=[0,0];Xn&&(Ba=Co,Co=[0,0]);const ga=on.metrics.isDoubleResolution?2:1,hs=(on.metrics.left-$n)*on.scale-ca+Co[0],Yo=(-on.metrics.top-$n)*on.scale+Co[1],Jo=hs+Dr.w/ga*on.scale/Pi,Ja=Yo+Dr.h/ga*on.scale/Pi,ya=new $(hs,Yo),Ms=new $(Jo,Yo),il=new $(hs,Ja),gs=new $(Jo,Ja);if(Xn){const Fa=new $(-ca,ca-Bp),Fi=-Math.PI/2,ys=xn/2-ca,Qa=new $(5-Bp-ys,-(on.imageName?ys:0)),Ma=new $(...Ba);ya._rotateAround(Fi,Fa)._add(Qa)._add(Ma),Ms._rotateAround(Fi,Fa)._add(Qa)._add(Ma),il._rotateAround(Fi,Fa)._add(Qa)._add(Ma),gs._rotateAround(Fi,Fa)._add(Qa)._add(Ma)}if(ln){const Fa=Math.sin(ln),Fi=Math.cos(ln),ys=[Fi,-Fa,Fa,Fi];ya._matMult(ys),Ms._matMult(ys),il._matMult(ys),gs._matMult(ys)}const ia=new $(0,0),Ia=new $(0,0);nn.push({tl:ya,tr:Ms,bl:il,br:gs,tex:Dr,writingMode:Bt.writingMode,glyphOffset:Ya,sectionIndex:on.sectionIndex,isSDF:Rn,pixelOffsetTL:ia,pixelOffsetBR:Ia,minFontScaleX:0,minFontScaleY:0})}return nn}(0,_,U,k,F,j,I,y.allowVerticalPlacement),mt=y.textSizeData;let wt=null;mt.kind==="source"?(wt=[eu*k.layout.get("text-size").evaluate(j,{})],wt[0]>ph&&_e(`${y.layerIds[0]}: Value for "text-size" is >= ${Fp}. Reduce your "text-size".`)):mt.kind==="composite"&&(wt=[eu*ce.compositeTextSizes[0].evaluate(j,{},Je),eu*ce.compositeTextSizes[1].evaluate(j,{},Je)],(wt[0]>ph||wt[1]>ph)&&_e(`${y.layerIds[0]}: Value for "text-size" is >= ${Fp}. Reduce your "text-size".`)),y.addSymbols(y.text,ot,wt,U,F,j,de,f,te.lineStartIndex,te.lineLength,He,Je);for(const qt of be)Ae[qt]=y.text.placedSymbolArray.length-1;return 4*ot.length}function Rg(y){for(const f in y)return y[f];return null}function ti(y,f,_,I){const k=y.compareText;if(f in k){const F=k[f];for(let j=F.length-1;j>=0;j--)if(I.dist(F[j])<_)return!0}else k[f]=[];return k[f].push(I),!1}const gv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vh{static from(f){if(!(f instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[_,I]=new Uint8Array(f,0,2);if(_!==219)throw new Error("Data does not appear to be in a KDBush format.");const k=I>>4;if(k!==1)throw new Error(`Got v${k} data when expected v1.`);const F=gv[15&I];if(!F)throw new Error("Unrecognized array type.");const[j]=new Uint16Array(f,2,1),[U]=new Uint32Array(f,4,1);return new vh(U,j,F,f)}constructor(f,_=64,I=Float64Array,k){if(isNaN(f)||f<0)throw new Error(`Unpexpected numItems value: ${f}.`);this.numItems=+f,this.nodeSize=Math.min(Math.max(+_,2),65535),this.ArrayType=I,this.IndexArrayType=f<65536?Uint16Array:Uint32Array;const F=gv.indexOf(this.ArrayType),j=2*f*this.ArrayType.BYTES_PER_ELEMENT,U=f*this.IndexArrayType.BYTES_PER_ELEMENT,te=(8-U%8)%8;if(F<0)throw new Error(`Unexpected typed array class: ${I}.`);k&&k instanceof ArrayBuffer?(this.data=k,this.ids=new this.IndexArrayType(this.data,8,f),this.coords=new this.ArrayType(this.data,8+U+te,2*f),this._pos=2*f,this._finished=!0):(this.data=new ArrayBuffer(8+j+U+te),this.ids=new this.IndexArrayType(this.data,8,f),this.coords=new this.ArrayType(this.data,8+U+te,2*f),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+F]),new Uint16Array(this.data,2,1)[0]=_,new Uint32Array(this.data,4,1)[0]=f)}add(f,_){const I=this._pos>>1;return this.ids[I]=I,this.coords[this._pos++]=f,this.coords[this._pos++]=_,I}finish(){const f=this._pos>>1;if(f!==this.numItems)throw new Error(`Added ${f} items when expected ${this.numItems}.`);return yv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(f,_,I,k){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:F,coords:j,nodeSize:U}=this,te=[0,F.length-1,0],de=[];for(;te.length;){const be=te.pop()||0,Ae=te.pop()||0,He=te.pop()||0;if(Ae-He<=U){for(let mt=He;mt<=Ae;mt++){const wt=j[2*mt],qt=j[2*mt+1];wt>=f&&wt<=I&&qt>=_&&qt<=k&&de.push(F[mt])}continue}const ce=He+Ae>>1,Je=j[2*ce],ot=j[2*ce+1];Je>=f&&Je<=I&&ot>=_&&ot<=k&&de.push(F[ce]),(be===0?f<=Je:_<=ot)&&(te.push(He),te.push(ce-1),te.push(1-be)),(be===0?I>=Je:k>=ot)&&(te.push(ce+1),te.push(Ae),te.push(1-be))}return de}within(f,_,I){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:F,nodeSize:j}=this,U=[0,k.length-1,0],te=[],de=I*I;for(;U.length;){const be=U.pop()||0,Ae=U.pop()||0,He=U.pop()||0;if(Ae-He<=j){for(let mt=He;mt<=Ae;mt++)N1(F[2*mt],F[2*mt+1],f,_)<=de&&te.push(k[mt]);continue}const ce=He+Ae>>1,Je=F[2*ce],ot=F[2*ce+1];N1(Je,ot,f,_)<=de&&te.push(k[ce]),(be===0?f-I<=Je:_-I<=ot)&&(U.push(He),U.push(ce-1),U.push(1-be)),(be===0?f+I>=Je:_+I>=ot)&&(U.push(ce+1),U.push(Ae),U.push(1-be))}return te}}function yv(y,f,_,I,k,F){if(k-I<=_)return;const j=I+k>>1;F1(y,f,j,I,k,F),yv(y,f,_,I,j-1,1-F),yv(y,f,_,j+1,k,1-F)}function F1(y,f,_,I,k,F){for(;k>I;){if(k-I>600){const de=k-I+1,be=_-I+1,Ae=Math.log(de),He=.5*Math.exp(2*Ae/3),ce=.5*Math.sqrt(Ae*He*(de-He)/de)*(be-de/2<0?-1:1);F1(y,f,_,Math.max(I,Math.floor(_-be*He/de+ce)),Math.min(k,Math.floor(_+(de-be)*He/de+ce)),F)}const j=f[2*_+F];let U=I,te=k;for(jp(y,f,I,_),f[2*k+F]>j&&jp(y,f,I,k);U<te;){for(jp(y,f,U,te),U++,te--;f[2*U+F]<j;)U++;for(;f[2*te+F]>j;)te--}f[2*I+F]===j?jp(y,f,I,te):(te++,jp(y,f,te,k)),te<=_&&(I=te+1),_<=te&&(k=te-1)}}function jp(y,f,_,I){vv(y,_,I),vv(f,2*_,2*I),vv(f,2*_+1,2*I+1)}function vv(y,f,_){const I=y[f];y[f]=y[_],y[_]=I}function N1(y,f,_,I){const k=y-_,F=f-I;return k*k+F*F}var _v;d.bh=void 0,(_v=d.bh||(d.bh={})).create="create",_v.load="load",_v.fullLoad="fullLoad";let kg=null,Vp=[];const xv=1e3/60,j1="loadTime",Og="fullLoadTime",Hi={mark(y){performance.mark(y)},frame(y){const f=y;kg!=null&&Vp.push(f-kg),kg=f},clearMetrics(){kg=null,Vp=[],performance.clearMeasures(j1),performance.clearMeasures(Og);for(const y in d.bh)performance.clearMarks(d.bh[y])},getPerformanceMetrics(){performance.measure(j1,d.bh.create,d.bh.load),performance.measure(Og,d.bh.create,d.bh.fullLoad);const y=performance.getEntriesByName(j1)[0].duration,f=performance.getEntriesByName(Og)[0].duration,_=Vp.length,I=1/(Vp.reduce((F,j)=>F+j,0)/_/1e3),k=Vp.filter(F=>F>xv).reduce((F,j)=>F+(j-xv)/xv,0);return{loadTime:y,fullLoadTime:f,fps:I,percentDroppedFrames:k/(_+k)*100,totalFrames:_}}};d.$=function(y,f,_){var I,k,F,j,U,te,de,be,Ae,He,ce,Je,ot=_[0],mt=_[1],wt=_[2];return f===y?(y[12]=f[0]*ot+f[4]*mt+f[8]*wt+f[12],y[13]=f[1]*ot+f[5]*mt+f[9]*wt+f[13],y[14]=f[2]*ot+f[6]*mt+f[10]*wt+f[14],y[15]=f[3]*ot+f[7]*mt+f[11]*wt+f[15]):(k=f[1],F=f[2],j=f[3],U=f[4],te=f[5],de=f[6],be=f[7],Ae=f[8],He=f[9],ce=f[10],Je=f[11],y[0]=I=f[0],y[1]=k,y[2]=F,y[3]=j,y[4]=U,y[5]=te,y[6]=de,y[7]=be,y[8]=Ae,y[9]=He,y[10]=ce,y[11]=Je,y[12]=I*ot+U*mt+Ae*wt+f[12],y[13]=k*ot+te*mt+He*wt+f[13],y[14]=F*ot+de*mt+ce*wt+f[14],y[15]=j*ot+be*mt+Je*wt+f[15]),y},d.A=uh,d.B=ss,d.C=class{constructor(y,f,_){this.receive=I=>{const k=I.data,F=k.id;if(F&&(!k.targetMapId||this.mapId===k.targetMapId))if(k.type==="<cancel>"){delete this.tasks[F];const j=this.cancelCallbacks[F];delete this.cancelCallbacks[F],j&&j()}else Me()||k.mustQueue?(this.tasks[F]=k,this.taskQueue.push(F),this.invoker.trigger()):this.processTask(F,k)},this.process=()=>{if(!this.taskQueue.length)return;const I=this.taskQueue.shift(),k=this.tasks[I];delete this.tasks[I],this.taskQueue.length&&this.invoker.trigger(),k&&this.processTask(I,k)},this.target=y,this.parent=f,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new v1(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Me()?y:window}send(y,f,_,I,k=!1){const F=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[F]=_);const j=[],U={id:F,type:y,hasCallback:!!_,targetMapId:I,mustQueue:k,sourceMapId:this.mapId,data:Rl(f,j)};return this.target.postMessage(U,{transfer:j}),{cancel:()=>{_&&delete this.callbacks[F],this.target.postMessage({id:F,type:"<cancel>",targetMapId:I,sourceMapId:this.mapId})}}}processTask(y,f){if(f.type==="<response>"){const _=this.callbacks[y];delete this.callbacks[y],_&&(f.error?_(qc(f.error)):_(null,qc(f.data)))}else{let _=!1;const I=[],k=f.hasCallback?(U,te)=>{_=!0,delete this.cancelCallbacks[y];const de={id:y,type:"<response>",sourceMapId:this.mapId,error:U?Rl(U):null,data:Rl(te,I)};this.target.postMessage(de,{transfer:I})}:U=>{_=!0};let F=null;const j=qc(f.data);if(this.parent[f.type])F=this.parent[f.type](f.sourceMapId,j,k);else if("getWorkerSource"in this.parent){const U=f.type.split(".");F=this.parent.getWorkerSource(f.sourceMapId,U[0],j.source)[U[1]](j,k)}else k(new Error(`Could not find function ${f.type}`));!_&&F&&F.cancel&&(this.cancelCallbacks[y]=F.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},d.D=Pn,d.E=ze,d.F=function(y,f){const _={};for(let I=0;I<f.length;I++){const k=f[I];k in y&&(_[k]=y[k])}return _},d.G=b1,d.H=w1,d.I=Fu,d.J=K,d.K=Y,d.L=gh,d.M=rt,d.N=Sa,d.O=rc,d.P=$,d.Q=Bo,d.R=ml,d.S=Fo,d.T=sg,d.U=Ig,d.V=class extends Zc{},d.W=Mg,d.X=function(y,f){const _=window.document.createElement("video");_.muted=!0,_.onloadstart=function(){f(null,_)};for(let I=0;I<y.length;I++){const k=window.document.createElement("source");Dt(y[I])||(_.crossOrigin="Anonymous"),k.src=y[I],_.appendChild(k)}return{cancel:()=>{}}},d.Y=Wt,d.Z=function(){var y=new uh(16);return uh!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y},d._=C,d.a=Ye,d.a$=class extends We{},d.a0=function(y,f,_){var I=_[0],k=_[1],F=_[2];return y[0]=f[0]*I,y[1]=f[1]*I,y[2]=f[2]*I,y[3]=f[3]*I,y[4]=f[4]*k,y[5]=f[5]*k,y[6]=f[6]*k,y[7]=f[7]*k,y[8]=f[8]*F,y[9]=f[9]*F,y[10]=f[10]*F,y[11]=f[11]*F,y[12]=f[12],y[13]=f[13],y[14]=f[14],y[15]=f[15],y},d.a1=B0,d.a2=function(){return Se++},d.a3=ht,d.a4=vf,d.a5=function(){Bs.isLoading()||Bs.isLoaded()||ag()!=="deferred"||Ly()},d.a6=_c,d.a7=cd,d.a8=Ao,d.a9=Pg,d.aA=wc,d.aB=function(y){y=y.slice();const f=Object.create(null);for(let _=0;_<y.length;_++)f[y[_].id]=y[_];for(let _=0;_<y.length;_++)"ref"in y[_]&&(y[_]=gt(y[_],f[y[_].ref]));return y},d.aC=function(y){if(y.type==="custom")return new pi(y);switch(y.type){case"background":return new iS(y);case"circle":return new mn(y);case"fill":return new W0(y);case"fill-extrusion":return new Vw(y);case"heatmap":return new V0(y);case"hillshade":return new ud(y);case"line":return new n1(y);case"raster":return new NM(y);case"symbol":return new Tg(y)}},d.aD=Ve,d.aE=function(y,f){if(!y)return[{command:It.setStyle,args:[f]}];let _=[];try{if(!$t(y.version,f.version))return[{command:It.setStyle,args:[f]}];$t(y.center,f.center)||_.push({command:It.setCenter,args:[f.center]}),$t(y.zoom,f.zoom)||_.push({command:It.setZoom,args:[f.zoom]}),$t(y.bearing,f.bearing)||_.push({command:It.setBearing,args:[f.bearing]}),$t(y.pitch,f.pitch)||_.push({command:It.setPitch,args:[f.pitch]}),$t(y.sprite,f.sprite)||_.push({command:It.setSprite,args:[f.sprite]}),$t(y.glyphs,f.glyphs)||_.push({command:It.setGlyphs,args:[f.glyphs]}),$t(y.transition,f.transition)||_.push({command:It.setTransition,args:[f.transition]}),$t(y.light,f.light)||_.push({command:It.setLight,args:[f.light]});const I={},k=[];(function(j,U,te,de){let be;for(be in U=U||{},j=j||{})Object.prototype.hasOwnProperty.call(j,be)&&(Object.prototype.hasOwnProperty.call(U,be)||Qt(be,te,de));for(be in U)Object.prototype.hasOwnProperty.call(U,be)&&(Object.prototype.hasOwnProperty.call(j,be)?$t(j[be],U[be])||(j[be].type==="geojson"&&U[be].type==="geojson"&&br(j,U,be)?te.push({command:It.setGeoJSONSourceData,args:[be,U[be].data]}):wr(be,U,te,de)):Mt(be,U,te))})(y.sources,f.sources,k,I);const F=[];y.layers&&y.layers.forEach(j=>{I[j.source]?_.push({command:It.removeLayer,args:[j.id]}):F.push(j)}),_=_.concat(k),function(j,U,te){U=U||[];const de=(j=j||[]).map(yr),be=U.map(yr),Ae=j.reduce(dr,{}),He=U.reduce(dr,{}),ce=de.slice(),Je=Object.create(null);let ot,mt,wt,qt,Bt,Kt,cr;for(ot=0,mt=0;ot<de.length;ot++)wt=de[ot],Object.prototype.hasOwnProperty.call(He,wt)?mt++:(te.push({command:It.removeLayer,args:[wt]}),ce.splice(ce.indexOf(wt,mt),1));for(ot=0,mt=0;ot<be.length;ot++)wt=be[be.length-1-ot],ce[ce.length-1-ot]!==wt&&(Object.prototype.hasOwnProperty.call(Ae,wt)?(te.push({command:It.removeLayer,args:[wt]}),ce.splice(ce.lastIndexOf(wt,ce.length-mt),1)):mt++,Kt=ce[ce.length-ot],te.push({command:It.addLayer,args:[He[wt],Kt]}),ce.splice(ce.length-ot,0,wt),Je[wt]=!0);for(ot=0;ot<be.length;ot++)if(wt=be[ot],qt=Ae[wt],Bt=He[wt],!Je[wt]&&!$t(qt,Bt))if($t(qt.source,Bt.source)&&$t(qt["source-layer"],Bt["source-layer"])&&$t(qt.type,Bt.type)){for(cr in tn(qt.layout,Bt.layout,te,wt,null,It.setLayoutProperty),tn(qt.paint,Bt.paint,te,wt,null,It.setPaintProperty),$t(qt.filter,Bt.filter)||te.push({command:It.setFilter,args:[wt,Bt.filter]}),$t(qt.minzoom,Bt.minzoom)&&$t(qt.maxzoom,Bt.maxzoom)||te.push({command:It.setLayerZoomRange,args:[wt,Bt.minzoom,Bt.maxzoom]}),qt)Object.prototype.hasOwnProperty.call(qt,cr)&&cr!=="layout"&&cr!=="paint"&&cr!=="filter"&&cr!=="metadata"&&cr!=="minzoom"&&cr!=="maxzoom"&&(cr.indexOf("paint.")===0?tn(qt[cr],Bt[cr],te,wt,cr.slice(6),It.setPaintProperty):$t(qt[cr],Bt[cr])||te.push({command:It.setLayerProperty,args:[wt,cr,Bt[cr]]}));for(cr in Bt)Object.prototype.hasOwnProperty.call(Bt,cr)&&!Object.prototype.hasOwnProperty.call(qt,cr)&&cr!=="layout"&&cr!=="paint"&&cr!=="filter"&&cr!=="metadata"&&cr!=="minzoom"&&cr!=="maxzoom"&&(cr.indexOf("paint.")===0?tn(qt[cr],Bt[cr],te,wt,cr.slice(6),It.setPaintProperty):$t(qt[cr],Bt[cr])||te.push({command:It.setLayerProperty,args:[wt,cr,Bt[cr]]}))}else te.push({command:It.removeLayer,args:[wt]}),Kt=ce[ce.lastIndexOf(wt)+1],te.push({command:It.addLayer,args:[Bt,Kt]})}(F,f.layers,_)}catch(I){console.warn("Unable to compute style diff:",I),_=[{command:It.setStyle,args:[f]}]}return _},d.aF=function(y){const f=[],_=y.id;return _===void 0&&f.push({message:`layers.${_}: missing required property "id"`}),y.render===void 0&&f.push({message:`layers.${_}: missing required method "render"`}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&f.push({message:`layers.${_}: property "renderingMode" must be either "2d" or "3d"`}),f},d.aG=function y(f,_){if(Array.isArray(f)){if(!Array.isArray(_)||f.length!==_.length)return!1;for(let I=0;I<f.length;I++)if(!y(f[I],_[I]))return!1;return!0}if(typeof f=="object"&&f!==null&&_!==null){if(typeof _!="object"||Object.keys(f).length!==Object.keys(_).length)return!1;for(const I in f)if(!y(f[I],_[I]))return!1;return!0}return f===_},d.aH=oe,d.aI=Re,d.aJ=tf,d.aK=function(y){return y({pluginStatus:$s,pluginURL:Wc}),tf.on("pluginStateChange",y),y},d.aL=class extends Yc{constructor(y,f){super(y,f),this.current=0}set(y){this.current!==y&&(this.current=y,this.gl.uniform1i(this.location,y))}},d.aM=lf,d.aN=class extends Yc{constructor(y,f){super(y,f),this.current=hg}set(y){if(y[12]!==this.current[12]||y[0]!==this.current[0])return this.current=y,void this.gl.uniformMatrix4fv(this.location,!1,y);for(let f=1;f<16;f++)if(y[f]!==this.current[f]){this.current=y,this.gl.uniformMatrix4fv(this.location,!1,y);break}}},d.aO=ug,d.aP=class extends Yc{constructor(y,f){super(y,f),this.current=[0,0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]&&y[2]===this.current[2]||(this.current=y,this.gl.uniform3f(this.location,y[0],y[1],y[2]))}},d.aQ=class extends Yc{constructor(y,f){super(y,f),this.current=[0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]||(this.current=y,this.gl.uniform2f(this.location,y[0],y[1]))}},d.aR=cf,d.aS=function(y,f,_,I,k,F,j){var U=1/(f-_),te=1/(I-k),de=1/(F-j);return y[0]=-2*U,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*te,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*de,y[11]=0,y[12]=(f+_)*U,y[13]=(k+I)*te,y[14]=(j+F)*de,y[15]=1,y},d.aT=Jr,d.aU=Ip,d.aV=class extends P{},d.aW=ci,d.aX=class extends N{},d.aY=function(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))},d.aZ=Uy,d.a_=Xr,d.aa=function(y){const f={};if(y.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(_,I,k,F)=>{const j=k||F;return f[I]=!j||j.toLowerCase(),""}),f["max-age"]){const _=parseInt(f["max-age"],10);isNaN(_)?delete f["max-age"]:f["max-age"]=_}return f},d.ab=function(y,f){const _=[];for(const I in y)I in f||_.push(I);return _},d.ac=function(y){if(Ce==null){const f=y.navigator?y.navigator.userAgent:null;Ce=!!y.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Ce},d.ad=me,d.ae=function(y,f,_){var I=Math.sin(_),k=Math.cos(_),F=f[0],j=f[1],U=f[2],te=f[3],de=f[4],be=f[5],Ae=f[6],He=f[7];return f!==y&&(y[8]=f[8],y[9]=f[9],y[10]=f[10],y[11]=f[11],y[12]=f[12],y[13]=f[13],y[14]=f[14],y[15]=f[15]),y[0]=F*k+de*I,y[1]=j*k+be*I,y[2]=U*k+Ae*I,y[3]=te*k+He*I,y[4]=de*k-F*I,y[5]=be*k-j*I,y[6]=Ae*k-U*I,y[7]=He*k-te*I,y},d.af=function(y){var f=new uh(16);return f[0]=y[0],f[1]=y[1],f[2]=y[2],f[3]=y[3],f[4]=y[4],f[5]=y[5],f[6]=y[6],f[7]=y[7],f[8]=y[8],f[9]=y[9],f[10]=y[10],f[11]=y[11],f[12]=y[12],f[13]=y[13],f[14]=y[14],f[15]=y[15],f},d.ag=hh,d.ah=function(y,f){let _=0,I=0;if(y.kind==="constant")I=y.layoutSize;else if(y.kind!=="source"){const{interpolationType:k,minZoom:F,maxZoom:j}=y,U=k?me(Kn.interpolationFactor(k,f,F,j),0,1):0;y.kind==="camera"?I=ss.number(y.minSize,y.maxSize,U):_=U}return{uSizeT:_,uSize:I}},d.aj=function(y,{uSize:f,uSizeT:_},{lowerSize:I,upperSize:k}){return y.kind==="source"?I/eu:y.kind==="composite"?ss.number(I/eu,k/eu,_):f},d.ak=Nn,d.al=function(y,f,_,I){const k=f.y-y.y,F=f.x-y.x,j=I.y-_.y,U=I.x-_.x,te=j*F-U*k;if(te===0)return null;const de=(U*(y.y-_.y)-j*(y.x-_.x))/te;return new $(y.x+de*F,y.y+de*k)},d.am=M1,d.an=D0,d.ao=rn,d.ap=xn,d.ar=lv,d.as=function(y,f){var _=f[0],I=f[1],k=f[2],F=f[3],j=f[4],U=f[5],te=f[6],de=f[7],be=f[8],Ae=f[9],He=f[10],ce=f[11],Je=f[12],ot=f[13],mt=f[14],wt=f[15],qt=_*U-I*j,Bt=_*te-k*j,Kt=_*de-F*j,cr=I*te-k*U,Tr=I*de-F*U,sn=k*de-F*te,En=be*ot-Ae*Je,xr=be*mt-He*Je,ln=be*wt-ce*Je,nn=Ae*mt-He*ot,bn=Ae*wt-ce*ot,on=He*wt-ce*mt,Dr=qt*on-Bt*bn+Kt*nn+cr*ln-Tr*xr+sn*En;return Dr?(y[0]=(U*on-te*bn+de*nn)*(Dr=1/Dr),y[1]=(k*bn-I*on-F*nn)*Dr,y[2]=(ot*sn-mt*Tr+wt*cr)*Dr,y[3]=(He*Tr-Ae*sn-ce*cr)*Dr,y[4]=(te*ln-j*on-de*xr)*Dr,y[5]=(_*on-k*ln+F*xr)*Dr,y[6]=(mt*Kt-Je*sn-wt*Bt)*Dr,y[7]=(be*sn-He*Kt+ce*Bt)*Dr,y[8]=(j*bn-U*ln+de*En)*Dr,y[9]=(I*ln-_*bn-F*En)*Dr,y[10]=(Je*Tr-ot*Kt+wt*qt)*Dr,y[11]=(Ae*Kt-be*Tr-ce*qt)*Dr,y[12]=(U*xr-j*nn-te*En)*Dr,y[13]=(_*nn-I*xr+k*En)*Dr,y[14]=(ot*Bt-Je*cr-mt*qt)*Dr,y[15]=(be*cr-Ae*Bt+He*qt)*Dr,y):null},d.at=mv,d.au=sv,d.av=vh,d.aw=function(){const y={},f=ve.$version;for(const _ in ve.$root){const I=ve.$root[_];if(I.required){let k=null;k=_==="version"?f:I.type==="array"?[]:{},k!=null&&(y[_]=k)}}return y},d.ax=It,d.ay=up,d.az=kt,d.b=function(y,f){const _=new Blob([new Uint8Array(y)],{type:"image/png"});createImageBitmap(_).then(I=>{f(null,I)}).catch(I=>{f(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},d.b0=La,d.b1=function(y,f){var _=y[0],I=y[1],k=y[2],F=y[3],j=y[4],U=y[5],te=y[6],de=y[7],be=y[8],Ae=y[9],He=y[10],ce=y[11],Je=y[12],ot=y[13],mt=y[14],wt=y[15],qt=f[0],Bt=f[1],Kt=f[2],cr=f[3],Tr=f[4],sn=f[5],En=f[6],xr=f[7],ln=f[8],nn=f[9],bn=f[10],on=f[11],Dr=f[12],$n=f[13],Rn=f[14],Pi=f[15];return Math.abs(_-qt)<=Xa*Math.max(1,Math.abs(_),Math.abs(qt))&&Math.abs(I-Bt)<=Xa*Math.max(1,Math.abs(I),Math.abs(Bt))&&Math.abs(k-Kt)<=Xa*Math.max(1,Math.abs(k),Math.abs(Kt))&&Math.abs(F-cr)<=Xa*Math.max(1,Math.abs(F),Math.abs(cr))&&Math.abs(j-Tr)<=Xa*Math.max(1,Math.abs(j),Math.abs(Tr))&&Math.abs(U-sn)<=Xa*Math.max(1,Math.abs(U),Math.abs(sn))&&Math.abs(te-En)<=Xa*Math.max(1,Math.abs(te),Math.abs(En))&&Math.abs(de-xr)<=Xa*Math.max(1,Math.abs(de),Math.abs(xr))&&Math.abs(be-ln)<=Xa*Math.max(1,Math.abs(be),Math.abs(ln))&&Math.abs(Ae-nn)<=Xa*Math.max(1,Math.abs(Ae),Math.abs(nn))&&Math.abs(He-bn)<=Xa*Math.max(1,Math.abs(He),Math.abs(bn))&&Math.abs(ce-on)<=Xa*Math.max(1,Math.abs(ce),Math.abs(on))&&Math.abs(Je-Dr)<=Xa*Math.max(1,Math.abs(Je),Math.abs(Dr))&&Math.abs(ot-$n)<=Xa*Math.max(1,Math.abs(ot),Math.abs($n))&&Math.abs(mt-Rn)<=Xa*Math.max(1,Math.abs(mt),Math.abs(Rn))&&Math.abs(wt-Pi)<=Xa*Math.max(1,Math.abs(wt),Math.abs(Pi))},d.b2=function(y,f){return y[0]=f[0],y[1]=f[1],y[2]=f[2],y[3]=f[3],y[4]=f[4],y[5]=f[5],y[6]=f[6],y[7]=f[7],y[8]=f[8],y[9]=f[9],y[10]=f[10],y[11]=f[11],y[12]=f[12],y[13]=f[13],y[14]=f[14],y[15]=f[15],y},d.b3=function(y,f,_){return y[0]=f[0]*_[0],y[1]=f[1]*_[1],y[2]=f[2]*_[2],y[3]=f[3]*_[3],y},d.b4=function(y,f){return y[0]*f[0]+y[1]*f[1]+y[2]*f[2]+y[3]*f[3]},d.b5=pe,d.b6=_d,d.b7=S1,d.b8=function(y,f,_,I,k){var F,j=1/Math.tan(f/2);return y[0]=j/_,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=j,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,k!=null&&k!==1/0?(y[10]=(k+I)*(F=1/(I-k)),y[14]=2*k*I*F):(y[10]=-1,y[14]=-2*I),y},d.b9=function(y,f,_){var I=Math.sin(_),k=Math.cos(_),F=f[4],j=f[5],U=f[6],te=f[7],de=f[8],be=f[9],Ae=f[10],He=f[11];return f!==y&&(y[0]=f[0],y[1]=f[1],y[2]=f[2],y[3]=f[3],y[12]=f[12],y[13]=f[13],y[14]=f[14],y[15]=f[15]),y[4]=F*k+de*I,y[5]=j*k+be*I,y[6]=U*k+Ae*I,y[7]=te*k+He*I,y[8]=de*k-F*I,y[9]=be*k-j*I,y[10]=Ae*k-U*I,y[11]=He*k-te*I,y},d.bA=R,d.bB=vl,d.bC=tp,d.bD=Bs,d.ba=re,d.bb=fe,d.bc=function(y,f){return y[0]=f[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=f[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=f[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},d.bd=class extends sf{},d.be=$l,d.bf=C1,d.bg=Hi,d.bi=Ct,d.bj=function(y,f,_=!1){if($s===Mn||$s===mp||$s===nd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Wc=Tt.resolveURL(y),$s=Mn,gp=f,yp(),_||Ly()},d.bk=ag,d.bl=function(y,f){const _={};for(let k=0;k<y.length;k++){const F=f&&f[y[k].id]||Yd(y[k]);f&&(f[y[k].id]=F);let j=_[F];j||(j=_[F]=[]),j.push(y[k])}const I=[];for(const k in _)I.push(_[k]);return I},d.bm=_n,d.bn=E1,d.bo=hv,d.bp=s1,d.bq=function(y){y.bucket.createArrays(),y.bucket.tilePixelRatio=Sa/(512*y.bucket.overscaling),y.bucket.compareText={},y.bucket.iconsNeedLinear=!1;const f=y.bucket.layers[0],_=f.layout,I=f._unevaluatedLayout._values,k={layoutIconSize:I["icon-size"].possiblyEvaluate(new Ao(y.bucket.zoom+1),y.canonical),layoutTextSize:I["text-size"].possiblyEvaluate(new Ao(y.bucket.zoom+1),y.canonical),textMaxSize:I["text-size"].possiblyEvaluate(new Ao(18))};if(y.bucket.textSizeData.kind==="composite"){const{minZoom:de,maxZoom:be}=y.bucket.textSizeData;k.compositeTextSizes=[I["text-size"].possiblyEvaluate(new Ao(de),y.canonical),I["text-size"].possiblyEvaluate(new Ao(be),y.canonical)]}if(y.bucket.iconSizeData.kind==="composite"){const{minZoom:de,maxZoom:be}=y.bucket.iconSizeData;k.compositeIconSizes=[I["icon-size"].possiblyEvaluate(new Ao(de),y.canonical),I["icon-size"].possiblyEvaluate(new Ao(be),y.canonical)]}const F=_.get("text-line-height")*xn,j=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point",U=_.get("text-keep-upright"),te=_.get("text-size");for(const de of y.bucket.features){const be=_.get("text-font").evaluate(de,{},y.canonical).join(","),Ae=te.evaluate(de,{},y.canonical),He=k.layoutTextSize.evaluate(de,{},y.canonical),ce=k.layoutIconSize.evaluate(de,{},y.canonical),Je={horizontal:{},vertical:void 0},ot=de.text;let mt,wt=[0,0];if(ot){const Kt=ot.toString(),cr=_.get("text-letter-spacing").evaluate(de,{},y.canonical)*xn,Tr=hp(Kt)?cr:0,sn=_.get("text-anchor").evaluate(de,{},y.canonical),En=$1(f,de,y.canonical);if(!En){const on=_.get("text-radial-offset").evaluate(de,{},y.canonical);wt=on?L1(sn,[on*xn,Ag]):_.get("text-offset").evaluate(de,{},y.canonical).map(Dr=>Dr*xn)}let xr=j?"center":_.get("text-justify").evaluate(de,{},y.canonical);const ln=_.get("symbol-placement"),nn=ln==="point"?_.get("text-max-width").evaluate(de,{},y.canonical)*xn:0,bn=()=>{y.bucket.allowVerticalPlacement&&Qd(Kt)&&(Je.vertical=tc(ot,y.glyphMap,y.glyphPositions,y.imagePositions,be,nn,F,sn,"left",Tr,wt,d.ai.vertical,!0,ln,He,Ae))};if(!j&&En){const on=new Set;if(xr==="auto")for(let $n=0;$n<En.values.length;$n+=2)on.add(mv(En.values[$n]));else on.add(xr);let Dr=!1;for(const $n of on)if(!Je.horizontal[$n])if(Dr)Je.horizontal[$n]=Je.horizontal[0];else{const Rn=tc(ot,y.glyphMap,y.glyphPositions,y.imagePositions,be,nn,F,"center",$n,Tr,wt,d.ai.horizontal,!1,ln,He,Ae);Rn&&(Je.horizontal[$n]=Rn,Dr=Rn.positionedLines.length===1)}bn()}else{xr==="auto"&&(xr=mv(sn));const on=tc(ot,y.glyphMap,y.glyphPositions,y.imagePositions,be,nn,F,sn,xr,Tr,wt,d.ai.horizontal,!1,ln,He,Ae);on&&(Je.horizontal[xr]=on),bn(),Qd(Kt)&&j&&U&&(Je.vertical=tc(ot,y.glyphMap,y.glyphPositions,y.imagePositions,be,nn,F,sn,xr,Tr,wt,d.ai.vertical,!1,ln,He,Ae))}}let qt=!1;if(de.icon&&de.icon.name){const Kt=y.imageMap[de.icon.name];Kt&&(mt=h1(y.imagePositions[de.icon.name],_.get("icon-offset").evaluate(de,{},y.canonical),_.get("icon-anchor").evaluate(de,{},y.canonical)),qt=!!Kt.sdf,y.bucket.sdfIcons===void 0?y.bucket.sdfIcons=qt:y.bucket.sdfIcons!==qt&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Kt.pixelRatio!==y.bucket.pixelRatio||_.get("icon-rotate").constantOr(1)!==0)&&(y.bucket.iconsNeedLinear=!0))}const Bt=Rg(Je.horizontal)||Je.vertical;y.bucket.iconsInText=!!Bt&&Bt.iconsInText,(Bt||mt)&&lS(y.bucket,de,Je,mt,y.imageMap,k,He,ce,wt,qt,y.canonical)}y.showCollisionBoxes&&y.bucket.generateCollisionDebugBuffers()},d.br=zp,d.bs=xg,d.bt=rv,d.bu=class{constructor(y){this._marks={start:[y.url,"start"].join("#"),end:[y.url,"end"].join("#"),measure:y.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let y=performance.getEntriesByName(this._marks.measure);return y.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),y=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),y}},d.bv=Ea,d.bw=yl,d.bx=function(y,f,_,I,k){return C(this,void 0,void 0,function*(){if(Y())try{return yield rt(y,f,_,I,k)}catch{}return function(F,j,U,te,de){const be=F.width,Ae=F.height;Qe&&St||(Qe=new OffscreenCanvas(be,Ae),St=Qe.getContext("2d",{willReadFrequently:!0})),Qe.width=be,Qe.height=Ae,St.drawImage(F,0,0,be,Ae);const He=St.getImageData(j,U,te,de);return St.clearRect(0,0,be,Ae),He.data}(y,f,_,I,k)})},d.by=Bl,d.bz=S,d.c=ct,d.d=function(y,f){const _=new Image;_.onload=()=>{f(null,_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame(()=>{_.src=qe})},_.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(y)],{type:"image/png"});_.src=y.byteLength?URL.createObjectURL(I):qe},d.e=xe,d.f=function(y,f){return Rt(xe(y,{type:"json"}),f)},d.g=zt,d.h=Tt,d.i=Me,d.j=De,d.k=vt,d.l=Pt,d.m=Rt,d.n=function(y){return new Ea(y).readFields(Yw,[])},d.o=function(y,f,_){if(!y.length)return _(null,[]);let I=y.length;const k=new Array(y.length);let F=null;y.forEach((j,U)=>{f(j,(te,de)=>{te&&(F=te),k[U]=de,--I==0&&_(F,k)})})},d.p=So,d.q=fg,d.r=sa,d.s=Dt,d.t=cp,d.u=fn,d.v=ve,d.w=_e,d.x=td,d.y=Hc,d.z=function([y,f,_]){return f+=90,f*=Math.PI/180,_*=Math.PI/180,{x:y*Math.cos(f)*Math.sin(_),y:y*Math.sin(f)*Math.sin(_),z:y*Math.cos(_)}}}),m(["./shared"],function(d){class C{constructor(he){this.keyCache={},he&&this.replace(he)}replace(he){this._layerConfigs={},this._layers={},this.update(he,[])}update(he,ge){for(const $e of he){this._layerConfigs[$e.id]=$e;const ke=this._layers[$e.id]=d.aC($e);ke._featureFilter=d.a6(ke.filter),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(const $e of ge)delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e];this.familiesBySource={};const Te=d.bl(Object.values(this._layerConfigs),this.keyCache);for(const $e of Te){const ke=$e.map(Yt=>this._layers[Yt.id]),Ke=ke[0];if(Ke.visibility==="none")continue;const Ue=Ke.source||"";let Ne=this.familiesBySource[Ue];Ne||(Ne=this.familiesBySource[Ue]={});const et=Ke.sourceLayer||"_geojsonTileLayer";let Et=Ne[et];Et||(Et=Ne[et]=[]),Et.push(ke)}}}class S{constructor(he){const ge={},Te=[];for(const Ue in he){const Ne=he[Ue],et=ge[Ue]={};for(const Et in Ne){const Yt=Ne[+Et];if(!Yt||Yt.bitmap.width===0||Yt.bitmap.height===0)continue;const dt={x:0,y:0,w:Yt.bitmap.width+2,h:Yt.bitmap.height+2};Te.push(dt),et[Et]={rect:dt,metrics:Yt.metrics}}}const{w:$e,h:ke}=d.p(Te),Ke=new d.q({width:$e||1,height:ke||1});for(const Ue in he){const Ne=he[Ue];for(const et in Ne){const Et=Ne[+et];if(!Et||Et.bitmap.width===0||Et.bitmap.height===0)continue;const Yt=ge[Ue][et].rect;d.q.copy(Et.bitmap,Ke,{x:0,y:0},{x:Yt.x+1,y:Yt.y+1},Et.bitmap)}}this.image=Ke,this.positions=ge}}d.bm("GlyphAtlas",S);class R{constructor(he){this.tileID=new d.O(he.tileID.overscaledZ,he.tileID.wrap,he.tileID.canonical.z,he.tileID.canonical.x,he.tileID.canonical.y),this.uid=he.uid,this.zoom=he.zoom,this.pixelRatio=he.pixelRatio,this.tileSize=he.tileSize,this.source=he.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=he.showCollisionBoxes,this.collectResourceTiming=!!he.collectResourceTiming,this.returnDependencies=!!he.returnDependencies,this.promoteId=he.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(he,ge,Te,$e,ke){this.status="parsing",this.data=he,this.collisionBoxArray=new d.a3;const Ke=new d.bn(Object.keys(he.layers).sort()),Ue=new d.bo(this.tileID,this.promoteId);Ue.bucketLayerIDs=[];const Ne={},et={featureIndex:Ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Te},Et=ge.familiesBySource[this.source];for(const Lr in Et){const cn=he.layers[Lr];if(!cn)continue;cn.version===1&&d.w(`Vector tile source "${this.source}" layer "${Lr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const oi=Ke.encode(Lr),Sn=[];for(let bi=0;bi<cn.length;bi++){const Li=cn.feature(bi),no=Ue.getId(Li,Lr);Sn.push({feature:Li,id:no,index:bi,sourceLayerIndex:oi})}for(const bi of Et[Lr]){const Li=bi[0];Li.source!==this.source&&d.w(`layer.source = ${Li.source} does not equal this.source = ${this.source}`),Li.minzoom&&this.zoom<Math.floor(Li.minzoom)||Li.maxzoom&&this.zoom>=Li.maxzoom||Li.visibility!=="none"&&(D(bi,this.zoom,Te),(Ne[Li.id]=Li.createBucket({index:Ue.bucketLayerIDs.length,layers:bi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:oi,sourceID:this.source})).populate(Sn,et,this.tileID.canonical),Ue.bucketLayerIDs.push(bi.map(no=>no.id)))}}let Yt,dt,ir,gr;const mr=d.aH(et.glyphDependencies,Lr=>Object.keys(Lr).map(Number));this.inFlightDependencies.forEach(Lr=>Lr?.cancel()),this.inFlightDependencies=[];const Sr=++this.dependencySentinel;Object.keys(mr).length?this.inFlightDependencies.push($e.send("getGlyphs",{uid:this.uid,stacks:mr,source:this.source,tileID:this.tileID,type:"glyphs"},(Lr,cn)=>{Sr===this.dependencySentinel&&(Yt||(Yt=Lr,dt=cn,Cr.call(this)))})):dt={};const Gr=Object.keys(et.iconDependencies);Gr.length?this.inFlightDependencies.push($e.send("getImages",{icons:Gr,source:this.source,tileID:this.tileID,type:"icons"},(Lr,cn)=>{Sr===this.dependencySentinel&&(Yt||(Yt=Lr,ir=cn,Cr.call(this)))})):ir={};const Rr=Object.keys(et.patternDependencies);function Cr(){if(Yt)return ke(Yt);if(dt&&ir&&gr){const Lr=new S(dt),cn=new d.bp(ir,gr);for(const oi in Ne){const Sn=Ne[oi];Sn instanceof d.a4?(D(Sn.layers,this.zoom,Te),d.bq({bucket:Sn,glyphMap:dt,glyphPositions:Lr.positions,imageMap:ir,imagePositions:cn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Sn.hasPattern&&(Sn instanceof d.br||Sn instanceof d.bs||Sn instanceof d.bt)&&(D(Sn.layers,this.zoom,Te),Sn.addFeatures(et,this.tileID.canonical,cn.patternPositions))}this.status="done",ke(null,{buckets:Object.values(Ne).filter(oi=>!oi.isEmpty()),featureIndex:Ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lr.image,imageAtlas:cn,glyphMap:this.returnDependencies?dt:null,iconMap:this.returnDependencies?ir:null,glyphPositions:this.returnDependencies?Lr.positions:null})}}Rr.length?this.inFlightDependencies.push($e.send("getImages",{icons:Rr,source:this.source,tileID:this.tileID,type:"patterns"},(Lr,cn)=>{Sr===this.dependencySentinel&&(Yt||(Yt=Lr,gr=cn,Cr.call(this)))})):gr={},Cr.call(this)}}function D(Pe,he,ge){const Te=new d.a8(he);for(const $e of Pe)$e.recalculate(Te,ge)}function $(Pe,he){const ge=d.l(Pe.request,(Te,$e,ke,Ke)=>{if(Te)he(Te);else if($e)try{const Ue=new d.bw.VectorTile(new d.bv($e));he(null,{vectorTile:Ue,rawData:$e,cacheControl:ke,expires:Ke})}catch(Ue){const Ne=new Uint8Array($e);let et=`Unable to parse the tile at ${Pe.request.url}, `;et+=Ne[0]===31&&Ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ue.messge}`,he(new Error(et))}});return()=>{ge.cancel(),he()}}class H{constructor(he,ge,Te,$e){this.actor=he,this.layerIndex=ge,this.availableImages=Te,this.loadVectorData=$e||$,this.fetching={},this.loading={},this.loaded={}}loadTile(he,ge){const Te=he.uid;this.loading||(this.loading={});const $e=!!(he&&he.request&&he.request.collectResourceTiming)&&new d.bu(he.request),ke=this.loading[Te]=new R(he);ke.abort=this.loadVectorData(he,(Ke,Ue)=>{if(delete this.loading[Te],Ke||!Ue)return ke.status="done",this.loaded[Te]=ke,ge(Ke);const Ne=Ue.rawData,et={};Ue.expires&&(et.expires=Ue.expires),Ue.cacheControl&&(et.cacheControl=Ue.cacheControl);const Et={};if($e){const Yt=$e.finish();Yt&&(Et.resourceTiming=JSON.parse(JSON.stringify(Yt)))}ke.vectorTile=Ue.vectorTile,ke.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,(Yt,dt)=>{if(delete this.fetching[Te],Yt||!dt)return ge(Yt);ge(null,d.e({rawTileData:Ne.slice(0)},dt,et,Et))}),this.loaded=this.loaded||{},this.loaded[Te]=ke,this.fetching[Te]={rawTileData:Ne,cacheControl:et,resourceTiming:Et}})}reloadTile(he,ge){const Te=this.loaded,$e=he.uid;if(Te&&Te[$e]){const ke=Te[$e];ke.showCollisionBoxes=he.showCollisionBoxes,ke.status==="parsing"?ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ke,Ue)=>{if(Ke||!Ue)return ge(Ke,Ue);let Ne;if(this.fetching[$e]){const{rawTileData:et,cacheControl:Et,resourceTiming:Yt}=this.fetching[$e];delete this.fetching[$e],Ne=d.e({rawTileData:et.slice(0)},Ue,Et,Yt)}else Ne=Ue;ge(null,Ne)}):ke.status==="done"&&(ke.vectorTile?ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,ge):ge())}}abortTile(he,ge){const Te=this.loading,$e=he.uid;Te&&Te[$e]&&Te[$e].abort&&(Te[$e].abort(),delete Te[$e]),ge()}removeTile(he,ge){const Te=this.loaded,$e=he.uid;Te&&Te[$e]&&delete Te[$e],ge()}}class Z{constructor(){this.loaded={}}loadTile(he,ge){return d._(this,void 0,void 0,function*(){const{uid:Te,encoding:$e,rawImageData:ke,redFactor:Ke,greenFactor:Ue,blueFactor:Ne,baseShift:et}=he,Et=ke.width+2,Yt=ke.height+2,dt=d.a(ke)?new d.R({width:Et,height:Yt},yield d.bx(ke,-1,-1,Et,Yt)):ke,ir=new d.by(Te,dt,$e,Ke,Ue,Ne,et);this.loaded=this.loaded||{},this.loaded[Te]=ir,ge(null,ir)})}removeTile(he){const ge=this.loaded,Te=he.uid;ge&&ge[Te]&&delete ge[Te]}}function X(Pe,he){if(Pe.length!==0){Q(Pe[0],he);for(var ge=1;ge<Pe.length;ge++)Q(Pe[ge],!he)}}function Q(Pe,he){for(var ge=0,Te=0,$e=0,ke=Pe.length,Ke=ke-1;$e<ke;Ke=$e++){var Ue=(Pe[$e][0]-Pe[Ke][0])*(Pe[Ke][1]+Pe[$e][1]),Ne=ge+Ue;Te+=Math.abs(ge)>=Math.abs(Ue)?ge-Ne+Ue:Ue-Ne+ge,ge=Ne}ge+Te>=0!=!!he&&Pe.reverse()}var G=d.bz(function Pe(he,ge){var Te,$e=he&&he.type;if($e==="FeatureCollection")for(Te=0;Te<he.features.length;Te++)Pe(he.features[Te],ge);else if($e==="GeometryCollection")for(Te=0;Te<he.geometries.length;Te++)Pe(he.geometries[Te],ge);else if($e==="Feature")Pe(he.geometry,ge);else if($e==="Polygon")X(he.coordinates,ge);else if($e==="MultiPolygon")for(Te=0;Te<he.coordinates.length;Te++)X(he.coordinates[Te],ge);return he});const K=d.bw.VectorTileFeature.prototype.toGeoJSON;var Y={exports:{}},re=d.bA,fe=d.bw.VectorTileFeature,me=pe;function pe(Pe,he){this.options=he||{},this.features=Pe,this.length=Pe.length}function xe(Pe,he){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=he||4096}pe.prototype.feature=function(Pe){return new xe(this.features[Pe],this.options.extent)},xe.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var he=0;he<Pe.length;he++){for(var ge=Pe[he],Te=[],$e=0;$e<ge.length;$e++)Te.push(new re(ge[$e][0],ge[$e][1]));this.geometry.push(Te)}return this.geometry},xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,he=1/0,ge=-1/0,Te=1/0,$e=-1/0,ke=0;ke<Pe.length;ke++)for(var Ke=Pe[ke],Ue=0;Ue<Ke.length;Ue++){var Ne=Ke[Ue];he=Math.min(he,Ne.x),ge=Math.max(ge,Ne.x),Te=Math.min(Te,Ne.y),$e=Math.max($e,Ne.y)}return[he,Te,ge,$e]},xe.prototype.toGeoJSON=fe.prototype.toGeoJSON;var Se=d.bB,oe=me;function Re(Pe){var he=new Se;return function(ge,Te){for(var $e in ge.layers)Te.writeMessage(3,Ve,ge.layers[$e])}(Pe,he),he.finish()}function Ve(Pe,he){var ge;he.writeVarintField(15,Pe.version||1),he.writeStringField(1,Pe.name||""),he.writeVarintField(5,Pe.extent||4096);var Te={keys:[],values:[],keycache:{},valuecache:{}};for(ge=0;ge<Pe.length;ge++)Te.feature=Pe.feature(ge),he.writeMessage(2,Oe,Te);var $e=Te.keys;for(ge=0;ge<$e.length;ge++)he.writeStringField(3,$e[ge]);var ke=Te.values;for(ge=0;ge<ke.length;ge++)he.writeMessage(4,Ce,ke[ge])}function Oe(Pe,he){var ge=Pe.feature;ge.id!==void 0&&he.writeVarintField(1,ge.id),he.writeMessage(2,_e,Pe),he.writeVarintField(3,ge.type),he.writeMessage(4,Me,ge)}function _e(Pe,he){var ge=Pe.feature,Te=Pe.keys,$e=Pe.values,ke=Pe.keycache,Ke=Pe.valuecache;for(var Ue in ge.properties){var Ne=ge.properties[Ue],et=ke[Ue];if(Ne!==null){et===void 0&&(Te.push(Ue),ke[Ue]=et=Te.length-1),he.writeVarint(et);var Et=typeof Ne;Et!=="string"&&Et!=="boolean"&&Et!=="number"&&(Ne=JSON.stringify(Ne));var Yt=Et+":"+Ne,dt=Ke[Yt];dt===void 0&&($e.push(Ne),Ke[Yt]=dt=$e.length-1),he.writeVarint(dt)}}}function Fe(Pe,he){return(he<<3)+(7&Pe)}function Le(Pe){return Pe<<1^Pe>>31}function Me(Pe,he){for(var ge=Pe.loadGeometry(),Te=Pe.type,$e=0,ke=0,Ke=ge.length,Ue=0;Ue<Ke;Ue++){var Ne=ge[Ue],et=1;Te===1&&(et=Ne.length),he.writeVarint(Fe(1,et));for(var Et=Te===3?Ne.length-1:Ne.length,Yt=0;Yt<Et;Yt++){Yt===1&&Te!==1&&he.writeVarint(Fe(2,Et-1));var dt=Ne[Yt].x-$e,ir=Ne[Yt].y-ke;he.writeVarint(Le(dt)),he.writeVarint(Le(ir)),$e+=dt,ke+=ir}Te===3&&he.writeVarint(Fe(7,1))}}function Ce(Pe,he){var ge=typeof Pe;ge==="string"?he.writeStringField(1,Pe):ge==="boolean"?he.writeBooleanField(7,Pe):ge==="number"&&(Pe%1!=0?he.writeDoubleField(3,Pe):Pe<0?he.writeSVarintField(6,Pe):he.writeVarintField(5,Pe))}Y.exports=Re,Y.exports.fromVectorTileJs=Re,Y.exports.fromGeojsonVt=function(Pe,he){he=he||{};var ge={};for(var Te in Pe)ge[Te]=new oe(Pe[Te].features,he),ge[Te].name=Te,ge[Te].version=he.version,ge[Te].extent=he.extent;return Re({layers:ge})},Y.exports.GeoJSONWrapper=oe;var Ye=d.bz(Y.exports);const qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},rt=Math.fround||(Qe=new Float32Array(1),Pe=>(Qe[0]=+Pe,Qe[0]));var Qe;const St=3,jt=5,Ot=6;class Tt{constructor(he){this.options=Object.assign(Object.create(qe),he),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(he){const{log:ge,minZoom:Te,maxZoom:$e}=this.options;ge&&console.time("total time");const ke=`prepare ${he.length} points`;ge&&console.time(ke),this.points=he;const Ke=[];for(let Ne=0;Ne<he.length;Ne++){const et=he[Ne];if(!et.geometry)continue;const[Et,Yt]=et.geometry.coordinates,dt=rt(kt(Et)),ir=rt(zt(Yt));Ke.push(dt,ir,1/0,Ne,-1,1),this.options.reduce&&Ke.push(0)}let Ue=this.trees[$e+1]=this._createTree(Ke);ge&&console.timeEnd(ke);for(let Ne=$e;Ne>=Te;Ne--){const et=+Date.now();Ue=this.trees[Ne]=this._createTree(this._cluster(Ue,Ne)),ge&&console.log("z%d: %d clusters in %dms",Ne,Ue.numItems,+Date.now()-et)}return ge&&console.timeEnd("total time"),this}getClusters(he,ge){let Te=((he[0]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,he[1]));let ke=he[2]===180?180:((he[2]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,he[3]));if(he[2]-he[0]>=360)Te=-180,ke=180;else if(Te>ke){const Yt=this.getClusters([Te,$e,180,Ke],ge),dt=this.getClusters([-180,$e,ke,Ke],ge);return Yt.concat(dt)}const Ue=this.trees[this._limitZoom(ge)],Ne=Ue.range(kt(Te),zt(Ke),kt(ke),zt($e)),et=Ue.data,Et=[];for(const Yt of Ne){const dt=this.stride*Yt;Et.push(et[dt+jt]>1?ct(et,dt,this.clusterProps):this.points[et[dt+St]])}return Et}getChildren(he){const ge=this._getOriginId(he),Te=this._getOriginZoom(he),$e="No cluster with the specified id.",ke=this.trees[Te];if(!ke)throw new Error($e);const Ke=ke.data;if(ge*this.stride>=Ke.length)throw new Error($e);const Ue=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),Ne=ke.within(Ke[ge*this.stride],Ke[ge*this.stride+1],Ue),et=[];for(const Et of Ne){const Yt=Et*this.stride;Ke[Yt+4]===he&&et.push(Ke[Yt+jt]>1?ct(Ke,Yt,this.clusterProps):this.points[Ke[Yt+St]])}if(et.length===0)throw new Error($e);return et}getLeaves(he,ge,Te){const $e=[];return this._appendLeaves($e,he,ge=ge||10,Te=Te||0,0),$e}getTile(he,ge,Te){const $e=this.trees[this._limitZoom(he)],ke=Math.pow(2,he),{extent:Ke,radius:Ue}=this.options,Ne=Ue/Ke,et=(Te-Ne)/ke,Et=(Te+1+Ne)/ke,Yt={features:[]};return this._addTileFeatures($e.range((ge-Ne)/ke,et,(ge+1+Ne)/ke,Et),$e.data,ge,Te,ke,Yt),ge===0&&this._addTileFeatures($e.range(1-Ne/ke,et,1,Et),$e.data,ke,Te,ke,Yt),ge===ke-1&&this._addTileFeatures($e.range(0,et,Ne/ke,Et),$e.data,-1,Te,ke,Yt),Yt.features.length?Yt:null}getClusterExpansionZoom(he){let ge=this._getOriginZoom(he)-1;for(;ge<=this.options.maxZoom;){const Te=this.getChildren(he);if(ge++,Te.length!==1)break;he=Te[0].properties.cluster_id}return ge}_appendLeaves(he,ge,Te,$e,ke){const Ke=this.getChildren(ge);for(const Ue of Ke){const Ne=Ue.properties;if(Ne&&Ne.cluster?ke+Ne.point_count<=$e?ke+=Ne.point_count:ke=this._appendLeaves(he,Ne.cluster_id,Te,$e,ke):ke<$e?ke++:he.push(Ue),he.length===Te)break}return ke}_createTree(he){const ge=new d.av(he.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Te=0;Te<he.length;Te+=this.stride)ge.add(he[Te],he[Te+1]);return ge.finish(),ge.data=he,ge}_addTileFeatures(he,ge,Te,$e,ke,Ke){for(const Ue of he){const Ne=Ue*this.stride,et=ge[Ne+jt]>1;let Et,Yt,dt;if(et)Et=Ct(ge,Ne,this.clusterProps),Yt=ge[Ne],dt=ge[Ne+1];else{const mr=this.points[ge[Ne+St]];Et=mr.properties;const[Sr,Gr]=mr.geometry.coordinates;Yt=kt(Sr),dt=zt(Gr)}const ir={type:1,geometry:[[Math.round(this.options.extent*(Yt*ke-Te)),Math.round(this.options.extent*(dt*ke-$e))]],tags:Et};let gr;gr=et||this.options.generateId?ge[Ne+St]:this.points[ge[Ne+St]].id,gr!==void 0&&(ir.id=gr),Ke.features.push(ir)}}_limitZoom(he){return Math.max(this.options.minZoom,Math.min(Math.floor(+he),this.options.maxZoom+1))}_cluster(he,ge){const{radius:Te,extent:$e,reduce:ke,minPoints:Ke}=this.options,Ue=Te/($e*Math.pow(2,ge)),Ne=he.data,et=[],Et=this.stride;for(let Yt=0;Yt<Ne.length;Yt+=Et){if(Ne[Yt+2]<=ge)continue;Ne[Yt+2]=ge;const dt=Ne[Yt],ir=Ne[Yt+1],gr=he.within(Ne[Yt],Ne[Yt+1],Ue),mr=Ne[Yt+jt];let Sr=mr;for(const Gr of gr){const Rr=Gr*Et;Ne[Rr+2]>ge&&(Sr+=Ne[Rr+jt])}if(Sr>mr&&Sr>=Ke){let Gr,Rr=dt*mr,Cr=ir*mr,Lr=-1;const cn=((Yt/Et|0)<<5)+(ge+1)+this.points.length;for(const oi of gr){const Sn=oi*Et;if(Ne[Sn+2]<=ge)continue;Ne[Sn+2]=ge;const bi=Ne[Sn+jt];Rr+=Ne[Sn]*bi,Cr+=Ne[Sn+1]*bi,Ne[Sn+4]=cn,ke&&(Gr||(Gr=this._map(Ne,Yt,!0),Lr=this.clusterProps.length,this.clusterProps.push(Gr)),ke(Gr,this._map(Ne,Sn)))}Ne[Yt+4]=cn,et.push(Rr/Sr,Cr/Sr,1/0,cn,-1,Sr),ke&&et.push(Lr)}else{for(let Gr=0;Gr<Et;Gr++)et.push(Ne[Yt+Gr]);if(Sr>1)for(const Gr of gr){const Rr=Gr*Et;if(!(Ne[Rr+2]<=ge)){Ne[Rr+2]=ge;for(let Cr=0;Cr<Et;Cr++)et.push(Ne[Rr+Cr])}}}}return et}_getOriginId(he){return he-this.points.length>>5}_getOriginZoom(he){return(he-this.points.length)%32}_map(he,ge,Te){if(he[ge+jt]>1){const Ke=this.clusterProps[he[ge+Ot]];return Te?Object.assign({},Ke):Ke}const $e=this.points[he[ge+St]].properties,ke=this.options.map($e);return Te&&ke===$e?Object.assign({},ke):ke}}function ct(Pe,he,ge){return{type:"Feature",id:Pe[he+St],properties:Ct(Pe,he,ge),geometry:{type:"Point",coordinates:[(Te=Pe[he],360*(Te-.5)),Nt(Pe[he+1])]}};var Te}function Ct(Pe,he,ge){const Te=Pe[he+jt],$e=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te,ke=Pe[he+Ot],Ke=ke===-1?{}:Object.assign({},ge[ke]);return Object.assign(Ke,{cluster:!0,cluster_id:Pe[he+St],point_count:Te,point_count_abbreviated:$e})}function kt(Pe){return Pe/360+.5}function zt(Pe){const he=Math.sin(Pe*Math.PI/180),ge=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return ge<0?0:ge>1?1:ge}function Nt(Pe){const he=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(he))/Math.PI-90}function Rt(Pe,he,ge,Te){for(var $e,ke=Te,Ke=ge-he>>1,Ue=ge-he,Ne=Pe[he],et=Pe[he+1],Et=Pe[ge],Yt=Pe[ge+1],dt=he+3;dt<ge;dt+=3){var ir=Pt(Pe[dt],Pe[dt+1],Ne,et,Et,Yt);if(ir>ke)$e=dt,ke=ir;else if(ir===ke){var gr=Math.abs(dt-Ke);gr<Ue&&($e=dt,Ue=gr)}}ke>Te&&($e-he>3&&Rt(Pe,he,$e,Te),Pe[$e+2]=ke,ge-$e>3&&Rt(Pe,$e,ge,Te))}function Pt(Pe,he,ge,Te,$e,ke){var Ke=$e-ge,Ue=ke-Te;if(Ke!==0||Ue!==0){var Ne=((Pe-ge)*Ke+(he-Te)*Ue)/(Ke*Ke+Ue*Ue);Ne>1?(ge=$e,Te=ke):Ne>0&&(ge+=Ke*Ne,Te+=Ue*Ne)}return(Ke=Pe-ge)*Ke+(Ue=he-Te)*Ue}function Dt(Pe,he,ge,Te){var $e={id:Pe===void 0?null:Pe,type:he,geometry:ge,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Ke=ke.geometry,Ue=ke.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")Ut(ke,Ke);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var Ne=0;Ne<Ke.length;Ne++)Ut(ke,Ke[Ne]);else if(Ue==="MultiPolygon")for(Ne=0;Ne<Ke.length;Ne++)for(var et=0;et<Ke[Ne].length;et++)Ut(ke,Ke[Ne][et])}($e),$e}function Ut(Pe,he){for(var ge=0;ge<he.length;ge+=3)Pe.minX=Math.min(Pe.minX,he[ge]),Pe.minY=Math.min(Pe.minY,he[ge+1]),Pe.maxX=Math.max(Pe.maxX,he[ge]),Pe.maxY=Math.max(Pe.maxY,he[ge+1])}function sr(Pe,he,ge,Te){if(he.geometry){var $e=he.geometry.coordinates,ke=he.geometry.type,Ke=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2),Ue=[],Ne=he.id;if(ge.promoteId?Ne=he.properties[ge.promoteId]:ge.generateId&&(Ne=Te||0),ke==="Point")vt($e,Ue);else if(ke==="MultiPoint")for(var et=0;et<$e.length;et++)vt($e[et],Ue);else if(ke==="LineString")De($e,Ue,Ke,!1);else if(ke==="MultiLineString"){if(ge.lineMetrics){for(et=0;et<$e.length;et++)De($e[et],Ue=[],Ke,!1),Pe.push(Dt(Ne,"LineString",Ue,he.properties));return}ze($e,Ue,Ke,!1)}else if(ke==="Polygon")ze($e,Ue,Ke,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(et=0;et<he.geometry.geometries.length;et++)sr(Pe,{id:Ne,geometry:he.geometry.geometries[et],properties:he.properties},ge,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(et=0;et<$e.length;et++){var Et=[];ze($e[et],Et,Ke,!0),Ue.push(Et)}}Pe.push(Dt(Ne,ke,Ue,he.properties))}}function vt(Pe,he){he.push(ve(Pe[0])),he.push(pt(Pe[1])),he.push(0)}function De(Pe,he,ge,Te){for(var $e,ke,Ke=0,Ue=0;Ue<Pe.length;Ue++){var Ne=ve(Pe[Ue][0]),et=pt(Pe[Ue][1]);he.push(Ne),he.push(et),he.push(0),Ue>0&&(Ke+=Te?($e*et-Ne*ke)/2:Math.sqrt(Math.pow(Ne-$e,2)+Math.pow(et-ke,2))),$e=Ne,ke=et}var Et=he.length-3;he[2]=1,Rt(he,0,Et,ge),he[Et+2]=1,he.size=Math.abs(Ke),he.start=0,he.end=he.size}function ze(Pe,he,ge,Te){for(var $e=0;$e<Pe.length;$e++){var ke=[];De(Pe[$e],ke,ge,Te),he.push(ke)}}function ve(Pe){return Pe/360+.5}function pt(Pe){var he=Math.sin(Pe*Math.PI/180),ge=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return ge<0?0:ge>1?1:ge}function gt(Pe,he,ge,Te,$e,ke,Ke,Ue){if(Te/=he,ke>=(ge/=he)&&Ke<Te)return Pe;if(Ke<ge||ke>=Te)return null;for(var Ne=[],et=0;et<Pe.length;et++){var Et=Pe[et],Yt=Et.geometry,dt=Et.type,ir=$e===0?Et.minX:Et.minY,gr=$e===0?Et.maxX:Et.maxY;if(ir>=ge&&gr<Te)Ne.push(Et);else if(!(gr<ge||ir>=Te)){var mr=[];if(dt==="Point"||dt==="MultiPoint")$t(Yt,mr,ge,Te,$e);else if(dt==="LineString")It(Yt,mr,ge,Te,$e,!1,Ue.lineMetrics);else if(dt==="MultiLineString")Qt(Yt,mr,ge,Te,$e,!1);else if(dt==="Polygon")Qt(Yt,mr,ge,Te,$e,!0);else if(dt==="MultiPolygon")for(var Sr=0;Sr<Yt.length;Sr++){var Gr=[];Qt(Yt[Sr],Gr,ge,Te,$e,!0),Gr.length&&mr.push(Gr)}if(mr.length){if(Ue.lineMetrics&&dt==="LineString"){for(Sr=0;Sr<mr.length;Sr++)Ne.push(Dt(Et.id,dt,mr[Sr],Et.tags));continue}dt!=="LineString"&&dt!=="MultiLineString"||(mr.length===1?(dt="LineString",mr=mr[0]):dt="MultiLineString"),dt!=="Point"&&dt!=="MultiPoint"||(dt=mr.length===3?"Point":"MultiPoint"),Ne.push(Dt(Et.id,dt,mr,Et.tags))}}}return Ne.length?Ne:null}function $t(Pe,he,ge,Te,$e){for(var ke=0;ke<Pe.length;ke+=3){var Ke=Pe[ke+$e];Ke>=ge&&Ke<=Te&&(he.push(Pe[ke]),he.push(Pe[ke+1]),he.push(Pe[ke+2]))}}function It(Pe,he,ge,Te,$e,ke,Ke){for(var Ue,Ne,et=Mt(Pe),Et=$e===0?br:tn,Yt=Pe.start,dt=0;dt<Pe.length-3;dt+=3){var ir=Pe[dt],gr=Pe[dt+1],mr=Pe[dt+2],Sr=Pe[dt+3],Gr=Pe[dt+4],Rr=$e===0?ir:gr,Cr=$e===0?Sr:Gr,Lr=!1;Ke&&(Ue=Math.sqrt(Math.pow(ir-Sr,2)+Math.pow(gr-Gr,2))),Rr<ge?Cr>ge&&(Ne=Et(et,ir,gr,Sr,Gr,ge),Ke&&(et.start=Yt+Ue*Ne)):Rr>Te?Cr<Te&&(Ne=Et(et,ir,gr,Sr,Gr,Te),Ke&&(et.start=Yt+Ue*Ne)):wr(et,ir,gr,mr),Cr<ge&&Rr>=ge&&(Ne=Et(et,ir,gr,Sr,Gr,ge),Lr=!0),Cr>Te&&Rr<=Te&&(Ne=Et(et,ir,gr,Sr,Gr,Te),Lr=!0),!ke&&Lr&&(Ke&&(et.end=Yt+Ue*Ne),he.push(et),et=Mt(Pe)),Ke&&(Yt+=Ue)}var cn=Pe.length-3;ir=Pe[cn],gr=Pe[cn+1],mr=Pe[cn+2],(Rr=$e===0?ir:gr)>=ge&&Rr<=Te&&wr(et,ir,gr,mr),cn=et.length-3,ke&&cn>=3&&(et[cn]!==et[0]||et[cn+1]!==et[1])&&wr(et,et[0],et[1],et[2]),et.length&&he.push(et)}function Mt(Pe){var he=[];return he.size=Pe.size,he.start=Pe.start,he.end=Pe.end,he}function Qt(Pe,he,ge,Te,$e,ke){for(var Ke=0;Ke<Pe.length;Ke++)It(Pe[Ke],he,ge,Te,$e,ke,!1)}function wr(Pe,he,ge,Te){Pe.push(he),Pe.push(ge),Pe.push(Te)}function br(Pe,he,ge,Te,$e,ke){var Ke=(ke-he)/(Te-he);return Pe.push(ke),Pe.push(ge+($e-ge)*Ke),Pe.push(1),Ke}function tn(Pe,he,ge,Te,$e,ke){var Ke=(ke-ge)/($e-ge);return Pe.push(he+(Te-he)*Ke),Pe.push(ke),Pe.push(1),Ke}function yr(Pe,he){for(var ge=[],Te=0;Te<Pe.length;Te++){var $e,ke=Pe[Te],Ke=ke.type;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")$e=dr(ke.geometry,he);else if(Ke==="MultiLineString"||Ke==="Polygon"){$e=[];for(var Ue=0;Ue<ke.geometry.length;Ue++)$e.push(dr(ke.geometry[Ue],he))}else if(Ke==="MultiPolygon")for($e=[],Ue=0;Ue<ke.geometry.length;Ue++){for(var Ne=[],et=0;et<ke.geometry[Ue].length;et++)Ne.push(dr(ke.geometry[Ue][et],he));$e.push(Ne)}ge.push(Dt(ke.id,Ke,$e,ke.tags))}return ge}function dr(Pe,he){var ge=[];ge.size=Pe.size,Pe.start!==void 0&&(ge.start=Pe.start,ge.end=Pe.end);for(var Te=0;Te<Pe.length;Te+=3)ge.push(Pe[Te]+he,Pe[Te+1],Pe[Te+2]);return ge}function Wt(Pe,he){if(Pe.transformed)return Pe;var ge,Te,$e,ke=1<<Pe.z,Ke=Pe.x,Ue=Pe.y;for(ge=0;ge<Pe.features.length;ge++){var Ne=Pe.features[ge],et=Ne.geometry,Et=Ne.type;if(Ne.geometry=[],Et===1)for(Te=0;Te<et.length;Te+=2)Ne.geometry.push(Wr(et[Te],et[Te+1],he,ke,Ke,Ue));else for(Te=0;Te<et.length;Te++){var Yt=[];for($e=0;$e<et[Te].length;$e+=2)Yt.push(Wr(et[Te][$e],et[Te][$e+1],he,ke,Ke,Ue));Ne.geometry.push(Yt)}}return Pe.transformed=!0,Pe}function Wr(Pe,he,ge,Te,$e,ke){return[Math.round(ge*(Pe*Te-$e)),Math.round(ge*(he*Te-ke))]}function Fr(Pe,he,ge,Te,$e){for(var ke=he===$e.maxZoom?0:$e.tolerance/((1<<he)*$e.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ge,y:Te,z:he,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<Pe.length;Ue++){Ke.numFeatures++,en(Ke,Pe[Ue],ke,$e);var Ne=Pe[Ue].minX,et=Pe[Ue].minY,Et=Pe[Ue].maxX,Yt=Pe[Ue].maxY;Ne<Ke.minX&&(Ke.minX=Ne),et<Ke.minY&&(Ke.minY=et),Et>Ke.maxX&&(Ke.maxX=Et),Yt>Ke.maxY&&(Ke.maxY=Yt)}return Ke}function en(Pe,he,ge,Te){var $e=he.geometry,ke=he.type,Ke=[];if(ke==="Point"||ke==="MultiPoint")for(var Ue=0;Ue<$e.length;Ue+=3)Ke.push($e[Ue]),Ke.push($e[Ue+1]),Pe.numPoints++,Pe.numSimplified++;else if(ke==="LineString")Yr(Ke,$e,Pe,ge,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(Ue=0;Ue<$e.length;Ue++)Yr(Ke,$e[Ue],Pe,ge,ke==="Polygon",Ue===0);else if(ke==="MultiPolygon")for(var Ne=0;Ne<$e.length;Ne++){var et=$e[Ne];for(Ue=0;Ue<et.length;Ue++)Yr(Ke,et[Ue],Pe,ge,!0,Ue===0)}if(Ke.length){var Et=he.tags||null;if(ke==="LineString"&&Te.lineMetrics){for(var Yt in Et={},he.tags)Et[Yt]=he.tags[Yt];Et.mapbox_clip_start=$e.start/$e.size,Et.mapbox_clip_end=$e.end/$e.size}var dt={geometry:Ke,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:Et};he.id!==null&&(dt.id=he.id),Pe.features.push(dt)}}function Yr(Pe,he,ge,Te,$e,ke){var Ke=Te*Te;if(Te>0&&he.size<($e?Ke:Te))ge.numPoints+=he.length/3;else{for(var Ue=[],Ne=0;Ne<he.length;Ne+=3)(Te===0||he[Ne+2]>Ke)&&(ge.numSimplified++,Ue.push(he[Ne]),Ue.push(he[Ne+1])),ge.numPoints++;$e&&function(et,Et){for(var Yt=0,dt=0,ir=et.length,gr=ir-2;dt<ir;gr=dt,dt+=2)Yt+=(et[dt]-et[gr])*(et[dt+1]+et[gr+1]);if(Yt>0===Et)for(dt=0,ir=et.length;dt<ir/2;dt+=2){var mr=et[dt],Sr=et[dt+1];et[dt]=et[ir-2-dt],et[dt+1]=et[ir-1-dt],et[ir-2-dt]=mr,et[ir-1-dt]=Sr}}(Ue,ke),Pe.push(Ue)}}function fr(Pe,he){var ge=(he=this.options=function($e,ke){for(var Ke in ke)$e[Ke]=ke[Ke];return $e}(Object.create(this.options),he)).debug;if(ge&&console.time("preprocess data"),he.maxZoom<0||he.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(he.promoteId&&he.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te=function($e,ke){var Ke=[];if($e.type==="FeatureCollection")for(var Ue=0;Ue<$e.features.length;Ue++)sr(Ke,$e.features[Ue],ke,Ue);else sr(Ke,$e.type==="Feature"?$e:{geometry:$e},ke);return Ke}(Pe,he);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",he.indexMaxZoom,he.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Te=function($e,ke){var Ke=ke.buffer/ke.extent,Ue=$e,Ne=gt($e,1,-1-Ke,Ke,0,-1,2,ke),et=gt($e,1,1-Ke,2+Ke,0,-1,2,ke);return(Ne||et)&&(Ue=gt($e,1,-Ke,1+Ke,0,-1,2,ke)||[],Ne&&(Ue=yr(Ne,1).concat(Ue)),et&&(Ue=Ue.concat(yr(et,-1)))),Ue}(Te,he),Te.length&&this.splitTile(Te,0,0,0),ge&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kr(Pe,he,ge){return 32*((1<<Pe)*ge+he)+Pe}function Br(Pe,he){return he?Pe.properties[he]:Pe.id}function an(Pe,he){if(Pe==null)return!0;if(Pe.type==="Feature")return Br(Pe,he)!=null;if(Pe.type==="FeatureCollection"){const ge=new Set;for(const Te of Pe.features){const $e=Br(Te,he);if($e==null||ge.has($e))return!1;ge.add($e)}return!0}return!1}function ni(Pe,he){const ge=new Map;if(Pe!=null)if(Pe.type==="Feature")ge.set(Br(Pe,he),Pe);else for(const Te of Pe.features)ge.set(Br(Te,he),Te);return ge}fr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fr.prototype.splitTile=function(Pe,he,ge,Te,$e,ke,Ke){for(var Ue=[Pe,he,ge,Te],Ne=this.options,et=Ne.debug;Ue.length;){Te=Ue.pop(),ge=Ue.pop(),he=Ue.pop(),Pe=Ue.pop();var Et=1<<he,Yt=Kr(he,ge,Te),dt=this.tiles[Yt];if(!dt&&(et>1&&console.time("creation"),dt=this.tiles[Yt]=Fr(Pe,he,ge,Te,Ne),this.tileCoords.push({z:he,x:ge,y:Te}),et)){et>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",he,ge,Te,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation"));var ir="z"+he;this.stats[ir]=(this.stats[ir]||0)+1,this.total++}if(dt.source=Pe,$e){if(he===Ne.maxZoom||he===$e)continue;var gr=1<<$e-he;if(ge!==Math.floor(ke/gr)||Te!==Math.floor(Ke/gr))continue}else if(he===Ne.indexMaxZoom||dt.numPoints<=Ne.indexMaxPoints)continue;if(dt.source=null,Pe.length!==0){et>1&&console.time("clipping");var mr,Sr,Gr,Rr,Cr,Lr,cn=.5*Ne.buffer/Ne.extent,oi=.5-cn,Sn=.5+cn,bi=1+cn;mr=Sr=Gr=Rr=null,Cr=gt(Pe,Et,ge-cn,ge+Sn,0,dt.minX,dt.maxX,Ne),Lr=gt(Pe,Et,ge+oi,ge+bi,0,dt.minX,dt.maxX,Ne),Pe=null,Cr&&(mr=gt(Cr,Et,Te-cn,Te+Sn,1,dt.minY,dt.maxY,Ne),Sr=gt(Cr,Et,Te+oi,Te+bi,1,dt.minY,dt.maxY,Ne),Cr=null),Lr&&(Gr=gt(Lr,Et,Te-cn,Te+Sn,1,dt.minY,dt.maxY,Ne),Rr=gt(Lr,Et,Te+oi,Te+bi,1,dt.minY,dt.maxY,Ne),Lr=null),et>1&&console.timeEnd("clipping"),Ue.push(mr||[],he+1,2*ge,2*Te),Ue.push(Sr||[],he+1,2*ge,2*Te+1),Ue.push(Gr||[],he+1,2*ge+1,2*Te),Ue.push(Rr||[],he+1,2*ge+1,2*Te+1)}}},fr.prototype.getTile=function(Pe,he,ge){var Te=this.options,$e=Te.extent,ke=Te.debug;if(Pe<0||Pe>24)return null;var Ke=1<<Pe,Ue=Kr(Pe,he=(he%Ke+Ke)%Ke,ge);if(this.tiles[Ue])return Wt(this.tiles[Ue],$e);ke>1&&console.log("drilling down to z%d-%d-%d",Pe,he,ge);for(var Ne,et=Pe,Et=he,Yt=ge;!Ne&&et>0;)et--,Et=Math.floor(Et/2),Yt=Math.floor(Yt/2),Ne=this.tiles[Kr(et,Et,Yt)];return Ne&&Ne.source?(ke>1&&console.log("found parent tile z%d-%d-%d",et,Et,Yt),ke>1&&console.time("drilling down"),this.splitTile(Ne.source,et,Et,Yt,Pe,he,ge),ke>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Wt(this.tiles[Ue],$e):null):null};class Nr extends H{constructor(he,ge,Te,$e){super(he,ge,Te),this._dataUpdateable=new Map,this.loadGeoJSON=(ke,Ke)=>{const{promoteId:Ue}=ke;if(ke.request)return d.f(ke.request,(Ne,et,Et,Yt)=>{this._dataUpdateable=an(et,Ue)?ni(et,Ue):void 0,Ke(Ne,et,Et,Yt)});if(typeof ke.data=="string")try{const Ne=JSON.parse(ke.data);this._dataUpdateable=an(Ne,Ue)?ni(Ne,Ue):void 0,Ke(null,Ne)}catch{Ke(new Error(`Input data given to '${ke.source}' is not a valid GeoJSON object.`))}else ke.dataDiff?this._dataUpdateable?(function(Ne,et,Et){var Yt,dt,ir,gr;if(et.removeAll&&Ne.clear(),et.remove)for(const mr of et.remove)Ne.delete(mr);if(et.add)for(const mr of et.add){const Sr=Br(mr,Et);Sr!=null&&Ne.set(Sr,mr)}if(et.update)for(const mr of et.update){let Sr=Ne.get(mr.id);if(Sr==null)continue;const Gr=!mr.removeAllProperties&&(((Yt=mr.removeProperties)===null||Yt===void 0?void 0:Yt.length)>0||((dt=mr.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0);if((mr.newGeometry||mr.removeAllProperties||Gr)&&(Sr=Object.assign({},Sr),Ne.set(mr.id,Sr),Gr&&(Sr.properties=Object.assign({},Sr.properties))),mr.newGeometry&&(Sr.geometry=mr.newGeometry),mr.removeAllProperties)Sr.properties={};else if(((ir=mr.removeProperties)===null||ir===void 0?void 0:ir.length)>0)for(const Rr of mr.removeProperties)Object.prototype.hasOwnProperty.call(Sr.properties,Rr)&&delete Sr.properties[Rr];if(((gr=mr.addOrUpdateProperties)===null||gr===void 0?void 0:gr.length)>0)for(const{key:Rr,value:Cr}of mr.addOrUpdateProperties)Sr.properties[Rr]=Cr}}(this._dataUpdateable,ke.dataDiff,Ue),Ke(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ke(new Error(`Cannot update existing geojson data in ${ke.source}`)):Ke(new Error(`Input data given to '${ke.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,$e&&(this.loadGeoJSON=$e)}loadGeoJSONTile(he,ge){const Te=he.tileID.canonical;if(!this._geoJSONIndex)return ge(null,null);const $e=this._geoJSONIndex.getTile(Te.z,Te.x,Te.y);if(!$e)return ge(null,null);const ke=new class{constructor(Ue){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.N,this.length=Ue.length,this._features=Ue}feature(Ue){return new class{constructor(Ne){this._feature=Ne,this.extent=d.N,this.type=Ne.type,this.properties=Ne.tags,"id"in Ne&&!isNaN(Ne.id)&&(this.id=parseInt(Ne.id,10))}loadGeometry(){if(this._feature.type===1){const Ne=[];for(const et of this._feature.geometry)Ne.push([new d.P(et[0],et[1])]);return Ne}{const Ne=[];for(const et of this._feature.geometry){const Et=[];for(const Yt of et)Et.push(new d.P(Yt[0],Yt[1]));Ne.push(Et)}return Ne}}toGeoJSON(Ne,et,Et){return K.call(this,Ne,et,Et)}}(this._features[Ue])}}($e.features);let Ke=Ye(ke);Ke.byteOffset===0&&Ke.byteLength===Ke.buffer.byteLength||(Ke=new Uint8Array(Ke)),ge(null,{vectorTile:ke,rawData:Ke.buffer})}loadData(he,ge){var Te;(Te=this._pendingRequest)===null||Te===void 0||Te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const $e=!!(he&&he.request&&he.request.collectResourceTiming)&&new d.bu(he.request);this._pendingCallback=ge,this._pendingRequest=this.loadGeoJSON(he,(ke,Ke)=>{if(delete this._pendingCallback,delete this._pendingRequest,ke||!Ke)return ge(ke);if(typeof Ke!="object")return ge(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`));{G(Ke,!0);try{if(he.filter){const Ne=d.bC(he.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(Et=>`${Et.key}: ${Et.message}`).join(", "));Ke={type:"FeatureCollection",features:Ke.features.filter(Et=>Ne.value.evaluate({zoom:0},Et))}}this._geoJSONIndex=he.cluster?new Tt(function({superclusterOptions:Ne,clusterProperties:et}){if(!et||!Ne)return Ne;const Et={},Yt={},dt={accumulated:null,zoom:0},ir={properties:null},gr=Object.keys(et);for(const mr of gr){const[Sr,Gr]=et[mr],Rr=d.bC(Gr),Cr=d.bC(typeof Sr=="string"?[Sr,["accumulated"],["get",mr]]:Sr);Et[mr]=Rr.value,Yt[mr]=Cr.value}return Ne.map=mr=>{ir.properties=mr;const Sr={};for(const Gr of gr)Sr[Gr]=Et[Gr].evaluate(dt,ir);return Sr},Ne.reduce=(mr,Sr)=>{ir.properties=Sr;for(const Gr of gr)dt.accumulated=mr[Gr],mr[Gr]=Yt[Gr].evaluate(dt,ir)},Ne}(he)).load(Ke.features):function(Ne,et){return new fr(Ne,et)}(Ke,he.geojsonVtOptions)}catch(Ne){return ge(Ne)}this.loaded={};const Ue={};if($e){const Ne=$e.finish();Ne&&(Ue.resourceTiming={},Ue.resourceTiming[he.source]=JSON.parse(JSON.stringify(Ne)))}ge(null,Ue)}})}reloadTile(he,ge){const Te=this.loaded;return Te&&Te[he.uid]?super.reloadTile(he,ge):this.loadTile(he,ge)}removeSource(he,ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ge()}getClusterExpansionZoom(he,ge){try{ge(null,this._geoJSONIndex.getClusterExpansionZoom(he.clusterId))}catch(Te){ge(Te)}}getClusterChildren(he,ge){try{ge(null,this._geoJSONIndex.getChildren(he.clusterId))}catch(Te){ge(Te)}}getClusterLeaves(he,ge){try{ge(null,this._geoJSONIndex.getLeaves(he.clusterId,he.limit,he.offset))}catch(Te){ge(Te)}}}class ii{constructor(he){this.self=he,this.actor=new d.C(he,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:H,geojson:Nr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ge,Te)=>{if(this.workerSourceTypes[ge])throw new Error(`Worker source with name "${ge}" already registered.`);this.workerSourceTypes[ge]=Te},this.self.registerRTLTextPlugin=ge=>{if(d.bD.isParsed())throw new Error("RTL text plugin already registered.");d.bD.applyArabicShaping=ge.applyArabicShaping,d.bD.processBidirectionalText=ge.processBidirectionalText,d.bD.processStyledBidirectionalText=ge.processStyledBidirectionalText}}setReferrer(he,ge){this.referrer=ge}setImages(he,ge,Te){this.availableImages[he]=ge;for(const $e in this.workerSources[he]){const ke=this.workerSources[he][$e];for(const Ke in ke)ke[Ke].availableImages=ge}Te()}setLayers(he,ge,Te){this.getLayerIndex(he).replace(ge),Te()}updateLayers(he,ge,Te){this.getLayerIndex(he).update(ge.layers,ge.removedIds),Te()}loadTile(he,ge,Te){this.getWorkerSource(he,ge.type,ge.source).loadTile(ge,Te)}loadDEMTile(he,ge,Te){this.getDEMWorkerSource(he,ge.source).loadTile(ge,Te)}reloadTile(he,ge,Te){this.getWorkerSource(he,ge.type,ge.source).reloadTile(ge,Te)}abortTile(he,ge,Te){this.getWorkerSource(he,ge.type,ge.source).abortTile(ge,Te)}removeTile(he,ge,Te){this.getWorkerSource(he,ge.type,ge.source).removeTile(ge,Te)}removeDEMTile(he,ge){this.getDEMWorkerSource(he,ge.source).removeTile(ge)}removeSource(he,ge,Te){if(!this.workerSources[he]||!this.workerSources[he][ge.type]||!this.workerSources[he][ge.type][ge.source])return;const $e=this.workerSources[he][ge.type][ge.source];delete this.workerSources[he][ge.type][ge.source],$e.removeSource!==void 0?$e.removeSource(ge,Te):Te()}loadWorkerSource(he,ge,Te){try{this.self.importScripts(ge.url),Te()}catch($e){Te($e.toString())}}syncRTLPluginState(he,ge,Te){try{d.bD.setState(ge);const $e=d.bD.getPluginURL();if(d.bD.isLoaded()&&!d.bD.isParsed()&&$e!=null){this.self.importScripts($e);const ke=d.bD.isParsed();Te(ke?void 0:new Error(`RTL Text Plugin failed to import scripts from ${$e}`),ke)}}catch($e){Te($e.toString())}}getAvailableImages(he){let ge=this.availableImages[he];return ge||(ge=[]),ge}getLayerIndex(he){let ge=this.layerIndexes[he];return ge||(ge=this.layerIndexes[he]=new C),ge}getWorkerSource(he,ge,Te){return this.workerSources[he]||(this.workerSources[he]={}),this.workerSources[he][ge]||(this.workerSources[he][ge]={}),this.workerSources[he][ge][Te]||(this.workerSources[he][ge][Te]=new this.workerSourceTypes[ge]({send:($e,ke,Ke)=>{this.actor.send($e,ke,Ke,he)}},this.getLayerIndex(he),this.getAvailableImages(he))),this.workerSources[he][ge][Te]}getDEMWorkerSource(he,ge){return this.demWorkerSources[he]||(this.demWorkerSources[he]={}),this.demWorkerSources[he][ge]||(this.demWorkerSources[he][ge]=new Z),this.demWorkerSources[he][ge]}}return d.i()&&(self.worker=new ii(self)),ii}),m(["./shared"],function(d){var C="3.6.2";class S{static testProp(p){if(!S.docStyle)return p[0];for(let w=0;w<p.length;w++)if(p[w]in S.docStyle)return p[w];return p[0]}static create(p,w,P){const z=window.document.createElement(p);return w!==void 0&&(z.className=w),P&&P.appendChild(z),z}static createNS(p,w){return window.document.createElementNS(p,w)}static disableDrag(){S.docStyle&&S.selectProp&&(S.userSelect=S.docStyle[S.selectProp],S.docStyle[S.selectProp]="none")}static enableDrag(){S.docStyle&&S.selectProp&&(S.docStyle[S.selectProp]=S.userSelect)}static setTransform(p,w){p.style[S.transformProp]=w}static addEventListener(p,w,P,z={}){p.addEventListener(w,P,"passive"in z?z:z.capture)}static removeEventListener(p,w,P,z={}){p.removeEventListener(w,P,"passive"in z?z:z.capture)}static suppressClickInternal(p){p.preventDefault(),p.stopPropagation(),window.removeEventListener("click",S.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",S.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",S.suppressClickInternal,!0)},0)}static mousePos(p,w){const P=p.getBoundingClientRect();return new d.P(w.clientX-P.left-p.clientLeft,w.clientY-P.top-p.clientTop)}static touchPos(p,w){const P=p.getBoundingClientRect(),z=[];for(let N=0;N<w.length;N++)z.push(new d.P(w[N].clientX-P.left-p.clientLeft,w[N].clientY-P.top-p.clientTop));return z}static mouseButton(p){return p.button}static remove(p){p.parentNode&&p.parentNode.removeChild(p)}}S.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,S.selectProp=S.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),S.transformProp=S.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(L){!H&&$&&(Z?X(L):D=L)}};let D,$,H=!1,Z=!1;function X(L){const p=L.createTexture();L.bindTexture(L.TEXTURE_2D,p);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,$),L.isContextLost())return;R.supported=!0}catch{}L.deleteTexture(p),H=!0}var Q,G;typeof document<"u"&&($=document.createElement("img"),$.onload=function(){D&&X(D),D=null,Z=!0},$.onerror=function(){H=!0,D=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(L){let p,w,P,z;L.resetRequestQueue=()=>{p=[],w=0,P=0,z={}},L.addThrottleControl=ye=>{const we=P++;return z[we]=ye,we},L.removeThrottleControl=ye=>{delete z[ye],ee()},L.getImage=(ye,we,Ie=!0)=>{R.supported&&(ye.headers||(ye.headers={}),ye.headers.accept="image/webp,*/*");const We={requestParameters:ye,supportImageRefresh:Ie,callback:we,cancelled:!1,completed:!1,cancel:()=>{We.completed||We.cancelled||(We.cancelled=!0,We.innerRequest&&(We.innerRequest.cancel(),w--),ee())}};return p.push(We),ee(),We};const N=ye=>{const{requestParameters:we,supportImageRefresh:Ie,callback:We}=ye;return d.e(we,{type:"image"}),(Ie!==!1||d.i()||d.g(we.url)||we.headers&&!Object.keys(we.headers).reduce((at,st)=>at&&st==="accept",!0)?d.m:se)(we,(at,st,ht,it)=>{J(ye,We,at,st,ht,it)})},J=(ye,we,Ie,We,at,st)=>{Ie?we(Ie):We instanceof HTMLImageElement||d.a(We)?we(null,We):We&&((ht,it)=>{typeof createImageBitmap=="function"?d.b(ht,it):d.d(ht,it)})(We,(ht,it)=>{ht!=null?we(ht):it!=null&&we(null,it,{cacheControl:at,expires:st})}),ye.cancelled||(ye.completed=!0,w--,ee())},ee=()=>{const ye=(()=>{const we=Object.keys(z);let Ie=!1;if(we.length>0){for(const We of we)if(Ie=z[We](),Ie)break}return Ie})()?d.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:d.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let we=w;we<ye&&p.length>0;we++){const Ie=p.shift();if(Ie.cancelled){we--;continue}const We=N(Ie);w++,Ie.innerRequest=We}},se=(ye,we)=>{const Ie=new Image,We=ye.url;let at=!1;const st=ye.credentials;return st&&st==="include"?Ie.crossOrigin="use-credentials":(st&&st==="same-origin"||!d.s(We))&&(Ie.crossOrigin="anonymous"),Ie.fetchPriority="high",Ie.onload=()=>{we(null,Ie),Ie.onerror=Ie.onload=null},Ie.onerror=()=>{at||we(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),Ie.onerror=Ie.onload=null},Ie.src=We,{cancel:()=>{at=!0,Ie.src=""}}}}(Q||(Q={})),Q.resetRequestQueue(),function(L){L.Glyphs="Glyphs",L.Image="Image",L.Source="Source",L.SpriteImage="SpriteImage",L.SpriteJSON="SpriteJSON",L.Style="Style",L.Tile="Tile",L.Unknown="Unknown"}(G||(G={}));class K{constructor(p){this._transformRequestFn=p}transformRequest(p,w){return this._transformRequestFn&&this._transformRequestFn(p,w)||{url:p}}normalizeSpriteURL(p,w,P){const z=function(N){const J=N.match(Y);if(!J)throw new Error(`Unable to parse URL "${N}"`);return{protocol:J[1],authority:J[2],path:J[3]||"/",params:J[4]?J[4].split("&"):[]}}(p);return z.path+=`${w}${P}`,function(N){const J=N.params.length?`?${N.params.join("&")}`:"";return`${N.protocol}://${N.authority}${N.path}${J}`}(z)}setTransformRequest(p){this._transformRequestFn=p}}const Y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function re(L){var p=new d.A(3);return p[0]=L[0],p[1]=L[1],p[2]=L[2],p}var fe,me=function(L,p,w){return L[0]=p[0]-w[0],L[1]=p[1]-w[1],L[2]=p[2]-w[2],L};fe=new d.A(3),d.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var pe=function(L){var p=L[0],w=L[1];return p*p+w*w};function xe(L){const p=[];if(typeof L=="string")p.push({id:"default",url:L});else if(L&&L.length>0){const w=[];for(const{id:P,url:z}of L){const N=`${P}${z}`;w.indexOf(N)===-1&&(w.push(N),p.push({id:P,url:z}))}}return p}function Se(L,p,w,P,z){if(P)return void L(P);if(z!==Object.values(p).length||z!==Object.values(w).length)return;const N={};for(const J in p){N[J]={};const ee=d.h.getImageCanvasContext(w[J]),se=p[J];for(const ye in se){const{width:we,height:Ie,x:We,y:at,sdf:st,pixelRatio:ht,stretchX:it,stretchY:Vt,content:ar}=se[ye];N[J][ye]={data:null,pixelRatio:ht,sdf:st,stretchX:it,stretchY:Vt,content:ar,spriteData:{width:we,height:Ie,x:We,y:at,context:ee}}}}L(null,N)}(function(){var L=new d.A(2);d.A!=Float32Array&&(L[0]=0,L[1]=0)})();class oe{constructor(p,w,P,z){this.context=p,this.format=P,this.texture=p.gl.createTexture(),this.update(w,z)}update(p,w,P){const{width:z,height:N}=p,J=!(this.size&&this.size[0]===z&&this.size[1]===N||P),{context:ee}=this,{gl:se}=ee;if(this.useMipmap=!!(w&&w.useMipmap),se.bindTexture(se.TEXTURE_2D,this.texture),ee.pixelStoreUnpackFlipY.set(!1),ee.pixelStoreUnpack.set(1),ee.pixelStoreUnpackPremultiplyAlpha.set(this.format===se.RGBA&&(!w||w.premultiply!==!1)),J)this.size=[z,N],p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof HTMLVideoElement||p instanceof ImageData||d.a(p)?se.texImage2D(se.TEXTURE_2D,0,this.format,this.format,se.UNSIGNED_BYTE,p):se.texImage2D(se.TEXTURE_2D,0,this.format,z,N,0,this.format,se.UNSIGNED_BYTE,p.data);else{const{x:ye,y:we}=P||{x:0,y:0};p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof HTMLVideoElement||p instanceof ImageData||d.a(p)?se.texSubImage2D(se.TEXTURE_2D,0,ye,we,se.RGBA,se.UNSIGNED_BYTE,p):se.texSubImage2D(se.TEXTURE_2D,0,ye,we,z,N,se.RGBA,se.UNSIGNED_BYTE,p.data)}this.useMipmap&&this.isSizePowerOfTwo()&&se.generateMipmap(se.TEXTURE_2D)}bind(p,w,P){const{context:z}=this,{gl:N}=z;N.bindTexture(N.TEXTURE_2D,this.texture),P!==N.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(P=N.LINEAR),p!==this.filter&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,p),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,P||p),this.filter=p),w!==this.wrap&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,w),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,w),this.wrap=w)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:p}=this.context;p.deleteTexture(this.texture),this.texture=null}}function Re(L){const{userImage:p}=L;return!!(p&&p.render&&p.render())&&(L.data.replace(new Uint8Array(p.data.buffer)),!0)}class Ve extends d.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new d.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(p){if(this.loaded!==p&&(this.loaded=p,p)){for(const{ids:w,callback:P}of this.requestors)this._notify(w,P);this.requestors=[]}}getImage(p){const w=this.images[p];if(w&&!w.data&&w.spriteData){const P=w.spriteData;w.data=new d.R({width:P.width,height:P.height},P.context.getImageData(P.x,P.y,P.width,P.height).data),w.spriteData=null}return w}addImage(p,w){if(this.images[p])throw new Error(`Image id ${p} already exist, use updateImage instead`);this._validate(p,w)&&(this.images[p]=w)}_validate(p,w){let P=!0;const z=w.data||w.spriteData;return this._validateStretch(w.stretchX,z&&z.width)||(this.fire(new d.j(new Error(`Image "${p}" has invalid "stretchX" value`))),P=!1),this._validateStretch(w.stretchY,z&&z.height)||(this.fire(new d.j(new Error(`Image "${p}" has invalid "stretchY" value`))),P=!1),this._validateContent(w.content,w)||(this.fire(new d.j(new Error(`Image "${p}" has invalid "content" value`))),P=!1),P}_validateStretch(p,w){if(!p)return!0;let P=0;for(const z of p){if(z[0]<P||z[1]<z[0]||w<z[1])return!1;P=z[1]}return!0}_validateContent(p,w){if(!p)return!0;if(p.length!==4)return!1;const P=w.spriteData,z=P&&P.width||w.data.width,N=P&&P.height||w.data.height;return!(p[0]<0||z<p[0]||p[1]<0||N<p[1]||p[2]<0||z<p[2]||p[3]<0||N<p[3]||p[2]<p[0]||p[3]<p[1])}updateImage(p,w,P=!0){const z=this.getImage(p);if(P&&(z.data.width!==w.data.width||z.data.height!==w.data.height))throw new Error(`size mismatch between old image (${z.data.width}x${z.data.height}) and new image (${w.data.width}x${w.data.height}).`);w.version=z.version+1,this.images[p]=w,this.updatedImages[p]=!0}removeImage(p){const w=this.images[p];delete this.images[p],delete this.patterns[p],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(p,w){let P=!0;if(!this.isLoaded())for(const z of p)this.images[z]||(P=!1);this.isLoaded()||P?this._notify(p,w):this.requestors.push({ids:p,callback:w})}_notify(p,w){const P={};for(const z of p){let N=this.getImage(z);N||(this.fire(new d.k("styleimagemissing",{id:z})),N=this.getImage(z)),N?P[z]={data:N.data.clone(),pixelRatio:N.pixelRatio,sdf:N.sdf,version:N.version,stretchX:N.stretchX,stretchY:N.stretchY,content:N.content,hasRenderCallback:!!(N.userImage&&N.userImage.render)}:d.w(`Image "${z}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}w(null,P)}getPixelSize(){const{width:p,height:w}=this.atlasImage;return{width:p,height:w}}getPattern(p){const w=this.patterns[p],P=this.getImage(p);if(!P)return null;if(w&&w.position.version===P.version)return w.position;if(w)w.position.version=P.version;else{const z={w:P.data.width+2,h:P.data.height+2,x:0,y:0},N=new d.I(z,P);this.patterns[p]={bin:z,position:N}}return this._updatePatternAtlas(),this.patterns[p].position}bind(p){const w=p.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(p,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)}_updatePatternAtlas(){const p=[];for(const N in this.patterns)p.push(this.patterns[N].bin);const{w,h:P}=d.p(p),z=this.atlasImage;z.resize({width:w||1,height:P||1});for(const N in this.patterns){const{bin:J}=this.patterns[N],ee=J.x+1,se=J.y+1,ye=this.getImage(N).data,we=ye.width,Ie=ye.height;d.R.copy(ye,z,{x:0,y:0},{x:ee,y:se},{width:we,height:Ie}),d.R.copy(ye,z,{x:0,y:Ie-1},{x:ee,y:se-1},{width:we,height:1}),d.R.copy(ye,z,{x:0,y:0},{x:ee,y:se+Ie},{width:we,height:1}),d.R.copy(ye,z,{x:we-1,y:0},{x:ee-1,y:se},{width:1,height:Ie}),d.R.copy(ye,z,{x:0,y:0},{x:ee+we,y:se},{width:1,height:Ie})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(p){for(const w of p){if(this.callbackDispatchedThisFrame[w])continue;this.callbackDispatchedThisFrame[w]=!0;const P=this.getImage(w);P||d.w(`Image with ID: "${w}" was not found`),Re(P)&&this.updateImage(w,P)}}}const Oe=1e20;function _e(L,p,w,P,z,N,J,ee,se){for(let ye=p;ye<p+P;ye++)Fe(L,w*N+ye,N,z,J,ee,se);for(let ye=w;ye<w+z;ye++)Fe(L,ye*N+p,1,P,J,ee,se)}function Fe(L,p,w,P,z,N,J){N[0]=0,J[0]=-Oe,J[1]=Oe,z[0]=L[p];for(let ee=1,se=0,ye=0;ee<P;ee++){z[ee]=L[p+ee*w];const we=ee*ee;do{const Ie=N[se];ye=(z[ee]-z[Ie]+we-Ie*Ie)/(ee-Ie)/2}while(ye<=J[se]&&--se>-1);se++,N[se]=ee,J[se]=ye,J[se+1]=Oe}for(let ee=0,se=0;ee<P;ee++){for(;J[se+1]<ee;)se++;const ye=N[se],we=ee-ye;L[p+ee*w]=z[ye]+we*we}}class Le{constructor(p,w){this.requestManager=p,this.localIdeographFontFamily=w,this.entries={}}setURL(p){this.url=p}getGlyphs(p,w){const P=[];for(const z in p)for(const N of p[z])P.push({stack:z,id:N});d.o(P,({stack:z,id:N},J)=>{let ee=this.entries[z];ee||(ee=this.entries[z]={glyphs:{},requests:{},ranges:{}});let se=ee.glyphs[N];if(se!==void 0)return void J(null,{stack:z,id:N,glyph:se});if(se=this._tinySDF(ee,z,N),se)return ee.glyphs[N]=se,void J(null,{stack:z,id:N,glyph:se});const ye=Math.floor(N/256);if(256*ye>65535)return void J(new Error("glyphs > 65535 not supported"));if(ee.ranges[ye])return void J(null,{stack:z,id:N,glyph:se});if(!this.url)return void J(new Error("glyphsUrl is not set"));let we=ee.requests[ye];we||(we=ee.requests[ye]=[],Le.loadGlyphRange(z,ye,this.url,this.requestManager,(Ie,We)=>{if(We){for(const at in We)this._doesCharSupportLocalGlyph(+at)||(ee.glyphs[+at]=We[+at]);ee.ranges[ye]=!0}for(const at of we)at(Ie,We);delete ee.requests[ye]})),we.push((Ie,We)=>{Ie?J(Ie):We&&J(null,{stack:z,id:N,glyph:We[N]||null})})},(z,N)=>{if(z)w(z);else if(N){const J={};for(const{stack:ee,id:se,glyph:ye}of N)(J[ee]||(J[ee]={}))[se]=ye&&{id:ye.id,bitmap:ye.bitmap.clone(),metrics:ye.metrics};w(null,J)}})}_doesCharSupportLocalGlyph(p){return!!this.localIdeographFontFamily&&(d.u["CJK Unified Ideographs"](p)||d.u["Hangul Syllables"](p)||d.u.Hiragana(p)||d.u.Katakana(p))}_tinySDF(p,w,P){const z=this.localIdeographFontFamily;if(!z||!this._doesCharSupportLocalGlyph(P))return;let N=p.tinySDF;if(!N){let ee="400";/bold/i.test(w)?ee="900":/medium/i.test(w)?ee="500":/light/i.test(w)&&(ee="200"),N=p.tinySDF=new Le.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:z,fontWeight:ee})}const J=N.draw(String.fromCharCode(P));return{id:P,bitmap:new d.q({width:J.width||60,height:J.height||60},J.data),metrics:{width:J.glyphWidth/2||24,height:J.glyphHeight/2||24,left:J.glyphLeft/2+.5||0,top:J.glyphTop/2-27.5||-8,advance:J.glyphAdvance/2||24,isDoubleResolution:!0}}}}Le.loadGlyphRange=function(L,p,w,P,z){const N=256*p,J=N+255,ee=P.transformRequest(w.replace("{fontstack}",L).replace("{range}",`${N}-${J}`),G.Glyphs);d.l(ee,(se,ye)=>{if(se)z(se);else if(ye){const we={};for(const Ie of d.n(ye))we[Ie.id]=Ie;z(null,we)}})},Le.TinySDF=class{constructor({fontSize:L=24,buffer:p=3,radius:w=8,cutoff:P=.25,fontFamily:z="sans-serif",fontWeight:N="normal",fontStyle:J="normal"}={}){this.buffer=p,this.cutoff=P,this.radius=w;const ee=this.size=L+4*p,se=this._createCanvas(ee),ye=this.ctx=se.getContext("2d",{willReadFrequently:!0});ye.font=`${J} ${N} ${L}px ${z}`,ye.textBaseline="alphabetic",ye.textAlign="left",ye.fillStyle="black",this.gridOuter=new Float64Array(ee*ee),this.gridInner=new Float64Array(ee*ee),this.f=new Float64Array(ee),this.z=new Float64Array(ee+1),this.v=new Uint16Array(ee)}_createCanvas(L){const p=document.createElement("canvas");return p.width=p.height=L,p}draw(L){const{width:p,actualBoundingBoxAscent:w,actualBoundingBoxDescent:P,actualBoundingBoxLeft:z,actualBoundingBoxRight:N}=this.ctx.measureText(L),J=Math.ceil(w),ee=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(N-z))),se=Math.min(this.size-this.buffer,J+Math.ceil(P)),ye=ee+2*this.buffer,we=se+2*this.buffer,Ie=Math.max(ye*we,0),We=new Uint8ClampedArray(Ie),at={data:We,width:ye,height:we,glyphWidth:ee,glyphHeight:se,glyphTop:J,glyphLeft:0,glyphAdvance:p};if(ee===0||se===0)return at;const{ctx:st,buffer:ht,gridInner:it,gridOuter:Vt}=this;st.clearRect(ht,ht,ee,se),st.fillText(L,ht,ht+J);const ar=st.getImageData(ht,ht,ee,se);Vt.fill(Oe,0,Ie),it.fill(0,0,Ie);for(let _t=0;_t<se;_t++)for(let Ht=0;Ht<ee;Ht++){const ur=ar.data[4*(_t*ee+Ht)+3]/255;if(ur===0)continue;const hr=(_t+ht)*ye+Ht+ht;if(ur===1)Vt[hr]=0,it[hr]=Oe;else{const _r=.5-ur;Vt[hr]=_r>0?_r*_r:0,it[hr]=_r<0?_r*_r:0}}_e(Vt,0,0,ye,we,ye,this.f,this.v,this.z),_e(it,ht,ht,ee,se,ye,this.f,this.v,this.z);for(let _t=0;_t<Ie;_t++){const Ht=Math.sqrt(Vt[_t])-Math.sqrt(it[_t]);We[_t]=Math.round(255-255*(Ht/this.radius+this.cutoff))}return at}};class Me{constructor(){this.specification=d.v.light.position}possiblyEvaluate(p,w){return d.z(p.expression.evaluate(w))}interpolate(p,w,P){return{x:d.B.number(p.x,w.x,P),y:d.B.number(p.y,w.y,P),z:d.B.number(p.z,w.z,P)}}}let Ce;class Ye extends d.E{constructor(p){super(),Ce=Ce||new d.r({anchor:new d.D(d.v.light.anchor),position:new Me,color:new d.D(d.v.light.color),intensity:new d.D(d.v.light.intensity)}),this._transitionable=new d.T(Ce),this.setLight(p),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(p,w={}){if(!this._validate(d.t,p,w))for(const P in p){const z=p[P];P.endsWith("-transition")?this._transitionable.setTransition(P.slice(0,-11),z):this._transitionable.setValue(P,z)}}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,w,P){return(!P||P.validate!==!1)&&d.x(this,p.call(d.y,d.e({value:w,style:{glyphs:!0,sprite:!0},styleSpec:d.v})))}}class qe{constructor(p,w){this.width=p,this.height=w,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(p,w){const P=p.join(",")+String(w);return this.dashEntry[P]||(this.dashEntry[P]=this.addDash(p,w)),this.dashEntry[P]}getDashRanges(p,w,P){const z=[];let N=p.length%2==1?-p[p.length-1]*P:0,J=p[0]*P,ee=!0;z.push({left:N,right:J,isDash:ee,zeroLength:p[0]===0});let se=p[0];for(let ye=1;ye<p.length;ye++){ee=!ee;const we=p[ye];N=se*P,se+=we,J=se*P,z.push({left:N,right:J,isDash:ee,zeroLength:we===0})}return z}addRoundDash(p,w,P){const z=w/2;for(let N=-P;N<=P;N++){const J=this.width*(this.nextRow+P+N);let ee=0,se=p[ee];for(let ye=0;ye<this.width;ye++){ye/se.right>1&&(se=p[++ee]);const we=Math.abs(ye-se.left),Ie=Math.abs(ye-se.right),We=Math.min(we,Ie);let at;const st=N/P*(z+1);if(se.isDash){const ht=z-Math.abs(st);at=Math.sqrt(We*We+ht*ht)}else at=z-Math.sqrt(We*We+st*st);this.data[J+ye]=Math.max(0,Math.min(255,at+128))}}}addRegularDash(p){for(let ee=p.length-1;ee>=0;--ee){const se=p[ee],ye=p[ee+1];se.zeroLength?p.splice(ee,1):ye&&ye.isDash===se.isDash&&(ye.left=se.left,p.splice(ee,1))}const w=p[0],P=p[p.length-1];w.isDash===P.isDash&&(w.left=P.left-this.width,P.right=w.right+this.width);const z=this.width*this.nextRow;let N=0,J=p[N];for(let ee=0;ee<this.width;ee++){ee/J.right>1&&(J=p[++N]);const se=Math.abs(ee-J.left),ye=Math.abs(ee-J.right),we=Math.min(se,ye);this.data[z+ee]=Math.max(0,Math.min(255,(J.isDash?we:-we)+128))}}addDash(p,w){const P=w?7:0,z=2*P+1;if(this.nextRow+z>this.height)return d.w("LineAtlas out of space"),null;let N=0;for(let ee=0;ee<p.length;ee++)N+=p[ee];if(N!==0){const ee=this.width/N,se=this.getDashRanges(p,this.width,ee);w?this.addRoundDash(se,ee,P):this.addRegularDash(se)}const J={y:(this.nextRow+P+.5)/this.height,height:2*P/this.height,width:N};return this.nextRow+=z,this.dirty=!0,J}bind(p){const w=p.gl;this.texture?(w.bindTexture(w.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,w.texSubImage2D(w.TEXTURE_2D,0,0,0,this.width,this.height,w.ALPHA,w.UNSIGNED_BYTE,this.data))):(this.texture=w.createTexture(),w.bindTexture(w.TEXTURE_2D,this.texture),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.REPEAT),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.REPEAT),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR),w.texImage2D(w.TEXTURE_2D,0,w.ALPHA,this.width,this.height,0,w.ALPHA,w.UNSIGNED_BYTE,this.data))}}class rt{constructor(p,w,P){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=P;const z=this.workerPool.acquire(P);for(let N=0;N<z.length;N++){const J=new d.C(z[N],w,P);J.name=`Worker ${N}`,this.actors.push(J)}if(!this.actors.length)throw new Error("No actors found")}broadcast(p,w,P){d.o(this.actors,(z,N)=>{z.send(p,w,N)},P=P||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(p=!0){this.actors.forEach(w=>{w.remove()}),this.actors=[],p&&this.workerPool.release(this.id)}}function Qe(L,p,w){const P=function(z,N){if(z)return w(z);if(N){const J=d.F(d.e(N,L),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);N.vector_layers&&(J.vectorLayers=N.vector_layers,J.vectorLayerIds=J.vectorLayers.map(ee=>ee.id)),w(null,J)}};return L.url?d.f(p.transformRequest(L.url,G.Source),P):d.h.frame(()=>P(null,L))}class St{constructor(p,w){p&&(w?this.setSouthWest(p).setNorthEast(w):Array.isArray(p)&&(p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1])))}setNorthEast(p){return this._ne=p instanceof d.L?new d.L(p.lng,p.lat):d.L.convert(p),this}setSouthWest(p){return this._sw=p instanceof d.L?new d.L(p.lng,p.lat):d.L.convert(p),this}extend(p){const w=this._sw,P=this._ne;let z,N;if(p instanceof d.L)z=p,N=p;else{if(!(p instanceof St))return Array.isArray(p)?p.length===4||p.every(Array.isArray)?this.extend(St.convert(p)):this.extend(d.L.convert(p)):p&&("lng"in p||"lon"in p)&&"lat"in p?this.extend(d.L.convert(p)):this;if(z=p._sw,N=p._ne,!z||!N)return this}return w||P?(w.lng=Math.min(z.lng,w.lng),w.lat=Math.min(z.lat,w.lat),P.lng=Math.max(N.lng,P.lng),P.lat=Math.max(N.lat,P.lat)):(this._sw=new d.L(z.lng,z.lat),this._ne=new d.L(N.lng,N.lat)),this}getCenter(){return new d.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new d.L(this.getWest(),this.getNorth())}getSouthEast(){return new d.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(p){const{lng:w,lat:P}=d.L.convert(p);let z=this._sw.lng<=w&&w<=this._ne.lng;return this._sw.lng>this._ne.lng&&(z=this._sw.lng>=w&&w>=this._ne.lng),this._sw.lat<=P&&P<=this._ne.lat&&z}static convert(p){return p instanceof St?p:p&&new St(p)}static fromLngLat(p,w=0){const P=360*w/40075017,z=P/Math.cos(Math.PI/180*p.lat);return new St(new d.L(p.lng-z,p.lat-P),new d.L(p.lng+z,p.lat+P))}}class jt{constructor(p,w,P){this.bounds=St.convert(this.validateBounds(p)),this.minzoom=w||0,this.maxzoom=P||24}validateBounds(p){return Array.isArray(p)&&p.length===4?[Math.max(-180,p[0]),Math.max(-90,p[1]),Math.min(180,p[2]),Math.min(90,p[3])]:[-180,-90,180,90]}contains(p){const w=Math.pow(2,p.z),P=Math.floor(d.G(this.bounds.getWest())*w),z=Math.floor(d.H(this.bounds.getNorth())*w),N=Math.ceil(d.G(this.bounds.getEast())*w),J=Math.ceil(d.H(this.bounds.getSouth())*w);return p.x>=P&&p.x<N&&p.y>=z&&p.y<J}}class Ot extends d.E{constructor(p,w,P,z){if(super(),this.load=()=>{this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Qe(this._options,this.map._requestManager,(N,J)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),N?this.fire(new d.j(N)):J&&(d.e(this,J),J.bounds&&(this.tileBounds=new jt(J.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>d.e({},this._options),this.id=p,this.dispatcher=P,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,d.e(this,d.F(w,["url","scheme","tileSize","promoteId"])),this._options=d.e({type:"vector"},w),this._collectResourceTiming=w.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(z)}loaded(){return this._loaded}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}onAdd(p){this.map=p,this.load()}setSourceProperty(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.load()}setTiles(p){return this.setSourceProperty(()=>{this._options.tiles=p}),this}setUrl(p){return this.setSourceProperty(()=>{this.url=p,this._options.url=p}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(p,w){const P=p.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),z={request:this.map._requestManager.transformRequest(P,G.Tile),uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function N(J,ee){return delete p.request,p.aborted?w(null):J&&J.status!==404?w(J):(ee&&ee.resourceTiming&&(p.resourceTiming=ee.resourceTiming),this.map._refreshExpiredTiles&&ee&&p.setExpiryData(ee),p.loadVectorData(ee,this.map.painter),w(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}z.request.collectResourceTiming=this._collectResourceTiming,p.actor&&p.state!=="expired"?p.state==="loading"?p.reloadCallback=w:p.request=p.actor.send("reloadTile",z,N.bind(this)):(p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",z,N.bind(this)))}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id},void 0)}unloadTile(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Tt extends d.E{constructor(p,w,P,z){super(),this.id=p,this.dispatcher=P,this.setEventedParent(z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=d.e({type:"raster"},w),d.e(this,d.F(w,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Qe(this._options,this.map._requestManager,(p,w)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new d.j(p)):w&&(d.e(this,w),w.bounds&&(this.tileBounds=new jt(w.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(p){this.map=p,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.load()}setTiles(p){return this.setSourceProperty(()=>{this._options.tiles=p}),this}serialize(){return d.e({},this._options)}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,w){const P=p.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);p.request=Q.getImage(this.map._requestManager.transformRequest(P,G.Tile),(z,N,J)=>{if(delete p.request,p.aborted)p.state="unloaded",w(null);else if(z)p.state="errored",w(z);else if(N){this.map._refreshExpiredTiles&&J&&p.setExpiryData(J);const ee=this.map.painter.context,se=ee.gl;p.texture=this.map.painter.getTileTexture(N.width),p.texture?p.texture.update(N,{useMipmap:!0}):(p.texture=new oe(ee,N,se.RGBA,{useMipmap:!0}),p.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),ee.extTextureFilterAnisotropic&&se.texParameterf(se.TEXTURE_2D,ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ee.extTextureFilterAnisotropicMax)),p.state="loaded",w(null)}},this.map._refreshExpiredTiles)}abortTile(p,w){p.request&&(p.request.cancel(),delete p.request),w()}unloadTile(p,w){p.texture&&this.map.painter.saveTileTexture(p.texture),w()}hasTransition(){return!1}}class ct extends Tt{constructor(p,w,P,z){super(p,w,P,z),this.type="raster-dem",this.maxzoom=22,this._options=d.e({type:"raster-dem"},w),this.encoding=w.encoding||"mapbox",this.redFactor=w.redFactor,this.greenFactor=w.greenFactor,this.blueFactor=w.blueFactor,this.baseShift=w.baseShift}loadTile(p,w){const P=p.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),z=this.map._requestManager.transformRequest(P,G.Tile);function N(J,ee){J&&(p.state="errored",w(J)),ee&&(p.dem=ee,p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0,p.state="loaded",w(null))}p.neighboringTiles=this._getNeighboringTiles(p.tileID),p.request=Q.getImage(z,(J,ee,se)=>d._(this,void 0,void 0,function*(){if(delete p.request,p.aborted)p.state="unloaded",w(null);else if(J)p.state="errored",w(J);else if(ee){this.map._refreshExpiredTiles&&p.setExpiryData(se);const ye=d.a(ee)&&d.J()?ee:yield function(Ie){return d._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&d.K()){const We=Ie.width+2,at=Ie.height+2;try{return new d.R({width:We,height:at},yield d.M(Ie,-1,-1,We,at))}catch{}}return d.h.getImageData(Ie,1)})}(ee),we={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:ye,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",we,N))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(p){const w=p.canonical,P=Math.pow(2,w.z),z=(w.x-1+P)%P,N=w.x===0?p.wrap-1:p.wrap,J=(w.x+1+P)%P,ee=w.x+1===P?p.wrap+1:p.wrap,se={};return se[new d.O(p.overscaledZ,N,w.z,z,w.y).key]={backfilled:!1},se[new d.O(p.overscaledZ,ee,w.z,J,w.y).key]={backfilled:!1},w.y>0&&(se[new d.O(p.overscaledZ,N,w.z,z,w.y-1).key]={backfilled:!1},se[new d.O(p.overscaledZ,p.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},se[new d.O(p.overscaledZ,ee,w.z,J,w.y-1).key]={backfilled:!1}),w.y+1<P&&(se[new d.O(p.overscaledZ,N,w.z,z,w.y+1).key]={backfilled:!1},se[new d.O(p.overscaledZ,p.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},se[new d.O(p.overscaledZ,ee,w.z,J,w.y+1).key]={backfilled:!1}),se}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded",p.actor&&p.actor.send("removeDEMTile",{uid:p.uid,source:this.id})}}class Ct extends d.E{constructor(p,w,P,z){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>d.e({},this._options,{type:this.type,data:this._data}),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=P.getActor(),this.setEventedParent(z),this._data=w.data,this._options=d.e({},w),this._collectResourceTiming=w.collectResourceTiming,w.maxzoom!==void 0&&(this.maxzoom=w.maxzoom),w.type&&(this.type=w.type),w.attribution&&(this.attribution=w.attribution),this.promoteId=w.promoteId;const N=d.N/this.tileSize;this.workerOptions=d.e({source:this.id,cluster:w.cluster||!1,geojsonVtOptions:{buffer:(w.buffer!==void 0?w.buffer:128)*N,tolerance:(w.tolerance!==void 0?w.tolerance:.375)*N,extent:d.N,maxZoom:this.maxzoom,lineMetrics:w.lineMetrics||!1,generateId:w.generateId||!1},superclusterOptions:{maxZoom:w.clusterMaxZoom!==void 0?w.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,w.clusterMinPoints||2),extent:d.N,radius:(w.clusterRadius||50)*N,log:!1,generateId:w.generateId||!1},clusterProperties:w.clusterProperties,filter:w.filter},w.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(p){this.map=p,this.load()}setData(p){return this._data=p,this._updateWorkerData(),this}updateData(p){return this._updateWorkerData(p),this}setClusterOptions(p){return this.workerOptions.cluster=p.cluster,p&&(p.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=p.clusterRadius),p.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=p.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(p,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},w),this}getClusterChildren(p,w){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},w),this}getClusterLeaves(p,w,P,z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:w,offset:P},z),this}_updateWorkerData(p){const w=d.e({},this.workerOptions);p?w.dataDiff=p:typeof this._data=="string"?(w.request=this.map._requestManager.transformRequest(d.h.resolveURL(this._data),G.Source),w.request.collectResourceTiming=this._collectResourceTiming):w.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new d.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,w,(P,z)=>{if(this._pendingLoads--,this._removed||z&&z.abandoned)return void this.fire(new d.k("dataabort",{dataType:"source"}));let N=null;if(z&&z.resourceTiming&&z.resourceTiming[this.id]&&(N=z.resourceTiming[this.id].slice(0)),P)return void this.fire(new d.j(P));const J={dataType:"source"};this._collectResourceTiming&&N&&N.length>0&&d.e(J,{resourceTiming:N}),this.fire(new d.k("data",Object.assign(Object.assign({},J),{sourceDataType:"metadata"}))),this.fire(new d.k("data",Object.assign(Object.assign({},J),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(p,w){const P=p.actor?"reloadTile":"loadTile";p.actor=this.actor;const z={type:this.type,uid:p.uid,tileID:p.tileID,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request=this.actor.send(P,z,(N,J)=>(delete p.request,p.unloadVectorData(),p.aborted?w(null):N?w(N):(p.loadVectorData(J,this.map.painter,P==="reloadTile"),w(null))))}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var kt=d.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class zt extends d.E{constructor(p,w,P,z){super(),this.load=(N,J)=>{this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Q.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(ee,se)=>{this._request=null,this._loaded=!0,ee?this.fire(new d.j(ee)):se&&(this.image=se,N&&(this.coordinates=N),J&&J(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const N=this.map.painter.context,J=N.gl;this.boundsBuffer||(this.boundsBuffer=N.createVertexBuffer(this._boundsArray,kt.members)),this.boundsSegments||(this.boundsSegments=d.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new oe(N,this.image,J.RGBA),this.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE));let ee=!1;for(const se in this.tiles){const ye=this.tiles[se];ye.state!=="loaded"&&(ye.state="loaded",ye.texture=this.texture,ee=!0)}ee&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=p,this.dispatcher=P,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(z),this.options=w}loaded(){return this._loaded}updateImage(p){return p.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=p.url,this.load(p.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(p){this.map=p,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(p){this.coordinates=p;const w=p.map(d.U.fromLngLat);this.tileID=function(z){let N=1/0,J=1/0,ee=-1/0,se=-1/0;for(const We of z)N=Math.min(N,We.x),J=Math.min(J,We.y),ee=Math.max(ee,We.x),se=Math.max(se,We.y);const ye=Math.max(ee-N,se-J),we=Math.max(0,Math.floor(-Math.log(ye)/Math.LN2)),Ie=Math.pow(2,we);return new d.W(we,Math.floor((N+ee)/2*Ie),Math.floor((J+se)/2*Ie))}(w),this.minzoom=this.maxzoom=this.tileID.z;const P=w.map(z=>this.tileID.getTilePoint(z)._round());return this._boundsArray=new d.V,this._boundsArray.emplaceBack(P[0].x,P[0].y,0,0),this._boundsArray.emplaceBack(P[1].x,P[1].y,d.N,0),this._boundsArray.emplaceBack(P[3].x,P[3].y,0,d.N),this._boundsArray.emplaceBack(P[2].x,P[2].y,d.N,d.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(p,w){this.tileID&&this.tileID.equals(p.tileID.canonical)?(this.tiles[String(p.tileID.wrap)]=p,p.buckets={},w(null)):(p.state="errored",w(null))}hasTransition(){return!1}}class Nt extends zt{constructor(p,w,P,z){super(p,w,P,z),this.load=()=>{this._loaded=!1;const N=this.options;this.urls=[];for(const J of N.urls)this.urls.push(this.map._requestManager.transformRequest(J,G.Source).url);d.X(this.urls,(J,ee)=>{this._loaded=!0,J?this.fire(new d.j(J)):ee&&(this.video=ee,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const N=this.map.painter.context,J=N.gl;this.boundsBuffer||(this.boundsBuffer=N.createVertexBuffer(this._boundsArray,kt.members)),this.boundsSegments||(this.boundsSegments=d.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE),J.texSubImage2D(J.TEXTURE_2D,0,0,0,J.RGBA,J.UNSIGNED_BYTE,this.video)):(this.texture=new oe(N,this.video,J.RGBA),this.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE));let ee=!1;for(const se in this.tiles){const ye=this.tiles[se];ye.state!=="loaded"&&(ye.state="loaded",ye.texture=this.texture,ee=!0)}ee&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=w}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const w=this.video.seekable;p<w.start(0)||p>w.end(0)?this.fire(new d.j(new d.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${w.start(0)} and ${w.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Rt extends zt{constructor(p,w,P,z){super(p,w,P,z),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new d.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let N=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,N=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,N=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const J=this.map.painter.context,ee=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,kt.members)),this.boundsSegments||(this.boundsSegments=d.S.simpleSegment(0,0,4,2)),this.texture?(N||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(J,this.canvas,ee.RGBA,{premultiply:!0});let se=!1;for(const ye in this.tiles){const we=this.tiles[ye];we.state!=="loaded"&&(we.state="loaded",we.texture=this.texture,se=!0)}se&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),w.coordinates?Array.isArray(w.coordinates)&&w.coordinates.length===4&&!w.coordinates.some(N=>!Array.isArray(N)||N.length!==2||N.some(J=>typeof J!="number"))||this.fire(new d.j(new d.Y(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new d.j(new d.Y(`sources.${p}`,null,'missing required property "coordinates"'))),w.animate&&typeof w.animate!="boolean"&&this.fire(new d.j(new d.Y(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),w.canvas?typeof w.canvas=="string"||w.canvas instanceof HTMLCanvasElement||this.fire(new d.j(new d.Y(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new d.j(new d.Y(`sources.${p}`,null,'missing required property "canvas"'))),this.options=w,this.animate=w.animate===void 0||w.animate}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}}const Pt={},Dt=L=>{switch(L){case"geojson":return Ct;case"image":return zt;case"raster":return Tt;case"raster-dem":return ct;case"vector":return Ot;case"video":return Nt;case"canvas":return Rt}return Pt[L]};function Ut(L,p){const w=d.Z();return d.$(w,w,[1,1,0]),d.a0(w,w,[.5*L.width,.5*L.height,1]),d.a1(w,w,L.calculatePosMatrix(p.toUnwrapped()))}function sr(L,p,w,P,z,N){const J=function(Ie,We,at){if(Ie)for(const st of Ie){const ht=We[st];if(ht&&ht.source===at&&ht.type==="fill-extrusion")return!0}else for(const st in We){const ht=We[st];if(ht.source===at&&ht.type==="fill-extrusion")return!0}return!1}(z&&z.layers,p,L.id),ee=N.maxPitchScaleFactor(),se=L.tilesIn(P,ee,J);se.sort(vt);const ye=[];for(const Ie of se)ye.push({wrappedTileID:Ie.tileID.wrapped().key,queryResults:Ie.tile.queryRenderedFeatures(p,w,L._state,Ie.queryGeometry,Ie.cameraQueryGeometry,Ie.scale,z,N,ee,Ut(L.transform,Ie.tileID))});const we=function(Ie){const We={},at={};for(const st of Ie){const ht=st.queryResults,it=st.wrappedTileID,Vt=at[it]=at[it]||{};for(const ar in ht){const _t=ht[ar],Ht=Vt[ar]=Vt[ar]||{},ur=We[ar]=We[ar]||[];for(const hr of _t)Ht[hr.featureIndex]||(Ht[hr.featureIndex]=!0,ur.push(hr))}}return We}(ye);for(const Ie in we)we[Ie].forEach(We=>{const at=We.feature,st=L.getFeatureState(at.layer["source-layer"],at.id);at.source=at.layer.source,at.layer["source-layer"]&&(at.sourceLayer=at.layer["source-layer"]),at.state=st});return we}function vt(L,p){const w=L.tileID,P=p.tileID;return w.overscaledZ-P.overscaledZ||w.canonical.y-P.canonical.y||w.wrap-P.wrap||w.canonical.x-P.canonical.x}class De{constructor(p,w){this.timeAdded=0,this.fadeEndTime=0,this.tileID=p,this.uid=d.a2(),this.uses=0,this.tileSize=w,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(p){const w=p+this.timeAdded;w<this.fadeEndTime||(this.fadeEndTime=w)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(p){this.demTexture&&p.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(p,w,P){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",p){p.featureIndex&&(this.latestFeatureIndex=p.featureIndex,p.rawTileData?(this.latestRawTileData=p.rawTileData,this.latestFeatureIndex.rawTileData=p.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=p.collisionBoxArray,this.buckets=function(z,N){const J={};if(!N)return J;for(const ee of z){const se=ee.layerIds.map(ye=>N.getLayer(ye)).filter(Boolean);if(se.length!==0){ee.layers=se,ee.stateDependentLayerIds&&(ee.stateDependentLayers=ee.stateDependentLayerIds.map(ye=>se.filter(we=>we.id===ye)[0]));for(const ye of se)J[ye.id]=ee}}return J}(p.buckets,w.style),this.hasSymbolBuckets=!1;for(const z in this.buckets){const N=this.buckets[z];if(N instanceof d.a4){if(this.hasSymbolBuckets=!0,!P)break;N.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const z in this.buckets){const N=this.buckets[z];if(N instanceof d.a4&&N.hasRTLText){this.hasRTLText=!0,d.a5();break}}this.queryPadding=0;for(const z in this.buckets){const N=this.buckets[z];this.queryPadding=Math.max(this.queryPadding,w.style.getLayer(z).queryRadius(N))}p.imageAtlas&&(this.imageAtlas=p.imageAtlas),p.glyphAtlasImage&&(this.glyphAtlasImage=p.glyphAtlasImage)}else this.collisionBoxArray=new d.a3}unloadVectorData(){for(const p in this.buckets)this.buckets[p].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(p){return this.buckets[p.id]}upload(p){for(const P in this.buckets){const z=this.buckets[P];z.uploadPending()&&z.upload(p)}const w=p.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(p,this.imageAtlas.image,w.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(p,this.glyphAtlasImage,w.ALPHA),this.glyphAtlasImage=null)}prepare(p){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(p,this.imageAtlasTexture)}queryRenderedFeatures(p,w,P,z,N,J,ee,se,ye,we){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:z,cameraQueryGeometry:N,scale:J,tileSize:this.tileSize,pixelPosMatrix:we,transform:se,params:ee,queryPadding:this.queryPadding*ye},p,w,P):{}}querySourceFeatures(p,w){const P=this.latestFeatureIndex;if(!P||!P.rawTileData)return;const z=P.loadVTLayers(),N=w&&w.sourceLayer?w.sourceLayer:"",J=z._geojsonTileLayer||z[N];if(!J)return;const ee=d.a6(w&&w.filter),{z:se,x:ye,y:we}=this.tileID.canonical,Ie={z:se,x:ye,y:we};for(let We=0;We<J.length;We++){const at=J.feature(We);if(ee.needGeometry){const it=d.a7(at,!0);if(!ee.filter(new d.a8(this.tileID.overscaledZ),it,this.tileID.canonical))continue}else if(!ee.filter(new d.a8(this.tileID.overscaledZ),at))continue;const st=P.getId(at,N),ht=new d.a9(at,se,ye,we,st);ht.tile=Ie,p.push(ht)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(p){const w=this.expirationTime;if(p.cacheControl){const P=d.aa(p.cacheControl);P["max-age"]&&(this.expirationTime=Date.now()+1e3*P["max-age"])}else p.expires&&(this.expirationTime=new Date(p.expires).getTime());if(this.expirationTime){const P=Date.now();let z=!1;if(this.expirationTime>P)z=!1;else if(w)if(this.expirationTime<w)z=!0;else{const N=this.expirationTime-w;N?this.expirationTime=P+Math.max(N,3e4):z=!0}else z=!0;z?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(p,w){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(p).length===0)return;const P=this.latestFeatureIndex.loadVTLayers();for(const z in this.buckets){if(!w.style.hasLayer(z))continue;const N=this.buckets[z],J=N.layers[0].sourceLayer||"_geojsonTileLayer",ee=P[J],se=p[J];if(!ee||!se||Object.keys(se).length===0)continue;N.update(se,ee,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ye=w&&w.style&&w.style.getLayer(z);ye&&(this.queryPadding=Math.max(this.queryPadding,ye.queryRadius(N)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<d.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(p){this.symbolFadeHoldUntil=d.h.now()+p}setDependencies(p,w){const P={};for(const z of w)P[z]=!0;this.dependencies[p]=P}hasDependency(p,w){for(const P of p){const z=this.dependencies[P];if(z){for(const N of w)if(z[N])return!0}}return!1}}class ze{constructor(p,w){this.max=p,this.onRemove=w,this.reset()}reset(){for(const p in this.data)for(const w of this.data[p])w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value);return this.data={},this.order=[],this}add(p,w,P){const z=p.wrapped().key;this.data[z]===void 0&&(this.data[z]=[]);const N={value:w,timeout:void 0};if(P!==void 0&&(N.timeout=setTimeout(()=>{this.remove(p,N)},P)),this.data[z].push(N),this.order.push(z),this.order.length>this.max){const J=this._getAndRemoveByKey(this.order[0]);J&&this.onRemove(J)}return this}has(p){return p.wrapped().key in this.data}getAndRemove(p){return this.has(p)?this._getAndRemoveByKey(p.wrapped().key):null}_getAndRemoveByKey(p){const w=this.data[p].shift();return w.timeout&&clearTimeout(w.timeout),this.data[p].length===0&&delete this.data[p],this.order.splice(this.order.indexOf(p),1),w.value}getByKey(p){const w=this.data[p];return w?w[0].value:null}get(p){return this.has(p)?this.data[p.wrapped().key][0].value:null}remove(p,w){if(!this.has(p))return this;const P=p.wrapped().key,z=w===void 0?0:this.data[P].indexOf(w),N=this.data[P][z];return this.data[P].splice(z,1),N.timeout&&clearTimeout(N.timeout),this.data[P].length===0&&delete this.data[P],this.onRemove(N.value),this.order.splice(this.order.indexOf(P),1),this}setMaxSize(p){for(this.max=p;this.order.length>this.max;){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}filter(p){const w=[];for(const P in this.data)for(const z of this.data[P])p(z.value)||w.push(z);for(const P of w)this.remove(P.value.tileID,P)}}class ve{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(p,w,P){const z=String(w);if(this.stateChanges[p]=this.stateChanges[p]||{},this.stateChanges[p][z]=this.stateChanges[p][z]||{},d.e(this.stateChanges[p][z],P),this.deletedStates[p]===null){this.deletedStates[p]={};for(const N in this.state[p])N!==z&&(this.deletedStates[p][N]=null)}else if(this.deletedStates[p]&&this.deletedStates[p][z]===null){this.deletedStates[p][z]={};for(const N in this.state[p][z])P[N]||(this.deletedStates[p][z][N]=null)}else for(const N in P)this.deletedStates[p]&&this.deletedStates[p][z]&&this.deletedStates[p][z][N]===null&&delete this.deletedStates[p][z][N]}removeFeatureState(p,w,P){if(this.deletedStates[p]===null)return;const z=String(w);if(this.deletedStates[p]=this.deletedStates[p]||{},P&&w!==void 0)this.deletedStates[p][z]!==null&&(this.deletedStates[p][z]=this.deletedStates[p][z]||{},this.deletedStates[p][z][P]=null);else if(w!==void 0)if(this.stateChanges[p]&&this.stateChanges[p][z])for(P in this.deletedStates[p][z]={},this.stateChanges[p][z])this.deletedStates[p][z][P]=null;else this.deletedStates[p][z]=null;else this.deletedStates[p]=null}getState(p,w){const P=String(w),z=d.e({},(this.state[p]||{})[P],(this.stateChanges[p]||{})[P]);if(this.deletedStates[p]===null)return{};if(this.deletedStates[p]){const N=this.deletedStates[p][w];if(N===null)return{};for(const J in N)delete z[J]}return z}initializeTileState(p,w){p.setFeatureState(this.state,w)}coalesceChanges(p,w){const P={};for(const z in this.stateChanges){this.state[z]=this.state[z]||{};const N={};for(const J in this.stateChanges[z])this.state[z][J]||(this.state[z][J]={}),d.e(this.state[z][J],this.stateChanges[z][J]),N[J]=this.state[z][J];P[z]=N}for(const z in this.deletedStates){this.state[z]=this.state[z]||{};const N={};if(this.deletedStates[z]===null)for(const J in this.state[z])N[J]={},this.state[z][J]={};else for(const J in this.deletedStates[z]){if(this.deletedStates[z][J]===null)this.state[z][J]={};else for(const ee of Object.keys(this.deletedStates[z][J]))delete this.state[z][J][ee];N[J]=this.state[z][J]}P[z]=P[z]||{},d.e(P[z],N)}if(this.stateChanges={},this.deletedStates={},Object.keys(P).length!==0)for(const z in p)p[z].setFeatureState(P,w)}}class pt extends d.E{constructor(p,w,P){super(),this.id=p,this.dispatcher=P,this.on("data",z=>{z.dataType==="source"&&z.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&z.dataType==="source"&&z.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((z,N,J,ee)=>{const se=new(Dt(N.type))(z,N,J,ee);if(se.id!==z)throw new Error(`Expected Source id to be ${z} instead of ${se.id}`);return se})(p,w,P,this),this._tiles={},this._cache=new ze(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ve,this._didEmitContent=!1,this._updated=!1}onAdd(p){this.map=p,this._maxTileCacheSize=p?p._maxTileCacheSize:null,this._maxTileCacheZoomLevels=p?p._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(p)}onRemove(p){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(p)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const p in this._tiles){const w=this._tiles[p];if(w.state!=="loaded"&&w.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const p=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,p&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(p,w){return this._source.loadTile(p,w)}_unloadTile(p){if(this._source.unloadTile)return this._source.unloadTile(p,()=>{})}_abortTile(p){this._source.abortTile&&this._source.abortTile(p,()=>{}),this._source.fire(new d.k("dataabort",{tile:p,coord:p.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(p){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const w in this._tiles){const P=this._tiles[w];P.upload(p),P.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(p=>p.tileID).sort(gt).map(p=>p.key)}getRenderableIds(p){const w=[];for(const P in this._tiles)this._isIdRenderable(P,p)&&w.push(this._tiles[P]);return p?w.sort((P,z)=>{const N=P.tileID,J=z.tileID,ee=new d.P(N.canonical.x,N.canonical.y)._rotate(this.transform.angle),se=new d.P(J.canonical.x,J.canonical.y)._rotate(this.transform.angle);return N.overscaledZ-J.overscaledZ||se.y-ee.y||se.x-ee.x}).map(P=>P.tileID.key):w.map(P=>P.tileID).sort(gt).map(P=>P.key)}hasRenderableParent(p){const w=this.findLoadedParent(p,0);return!!w&&this._isIdRenderable(w.tileID.key)}_isIdRenderable(p,w){return this._tiles[p]&&this._tiles[p].hasData()&&!this._coveredTiles[p]&&(w||!this._tiles[p].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(p,w){const P=this._tiles[p];P&&(P.state!=="loading"&&(P.state=w),this._loadTile(P,this._tileLoaded.bind(this,P,p,w)))}_tileLoaded(p,w,P,z){if(z)return p.state="errored",void(z.status!==404?this._source.fire(new d.j(z,{tile:p})):this.update(this.transform,this.terrain));p.timeAdded=d.h.now(),P==="expired"&&(p.refreshedUponExpiration=!0),this._setTileReloadTimer(w,p),this.getSource().type==="raster-dem"&&p.dem&&this._backfillDEM(p),this._state.initializeTileState(p,this.map?this.map.painter:null),p.aborted||this._source.fire(new d.k("data",{dataType:"source",tile:p,coord:p.tileID}))}_backfillDEM(p){const w=this.getRenderableIds();for(let z=0;z<w.length;z++){const N=w[z];if(p.neighboringTiles&&p.neighboringTiles[N]){const J=this.getTileByID(N);P(p,J),P(J,p)}}function P(z,N){z.needsHillshadePrepare=!0,z.needsTerrainPrepare=!0;let J=N.tileID.canonical.x-z.tileID.canonical.x;const ee=N.tileID.canonical.y-z.tileID.canonical.y,se=Math.pow(2,z.tileID.canonical.z),ye=N.tileID.key;J===0&&ee===0||Math.abs(ee)>1||(Math.abs(J)>1&&(Math.abs(J+se)===1?J+=se:Math.abs(J-se)===1&&(J-=se)),N.dem&&z.dem&&(z.dem.backfillBorder(N.dem,J,ee),z.neighboringTiles&&z.neighboringTiles[ye]&&(z.neighboringTiles[ye].backfilled=!0)))}}getTile(p){return this.getTileByID(p.key)}getTileByID(p){return this._tiles[p]}_retainLoadedChildren(p,w,P,z){for(const N in this._tiles){let J=this._tiles[N];if(z[N]||!J.hasData()||J.tileID.overscaledZ<=w||J.tileID.overscaledZ>P)continue;let ee=J.tileID;for(;J&&J.tileID.overscaledZ>w+1;){const ye=J.tileID.scaledTo(J.tileID.overscaledZ-1);J=this._tiles[ye.key],J&&J.hasData()&&(ee=ye)}let se=ee;for(;se.overscaledZ>w;)if(se=se.scaledTo(se.overscaledZ-1),p[se.key]){z[ee.key]=ee;break}}}findLoadedParent(p,w){if(p.key in this._loadedParentTiles){const P=this._loadedParentTiles[p.key];return P&&P.tileID.overscaledZ>=w?P:null}for(let P=p.overscaledZ-1;P>=w;P--){const z=p.scaledTo(P),N=this._getLoadedTile(z);if(N)return N}}_getLoadedTile(p){const w=this._tiles[p.key];return w&&w.hasData()?w:this._cache.getByKey(p.wrapped().key)}updateCacheSize(p){const w=Math.ceil(p.width/this._source.tileSize)+1,P=Math.ceil(p.height/this._source.tileSize)+1,z=Math.floor(w*P*(this._maxTileCacheZoomLevels===null?d.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),N=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,z):z;this._cache.setMaxSize(N)}handleWrapJump(p){const w=Math.round((p-(this._prevLng===void 0?p:this._prevLng))/360);if(this._prevLng=p,w){const P={};for(const z in this._tiles){const N=this._tiles[z];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+w),P[N.tileID.key]=N}this._tiles=P;for(const z in this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(const z in this._tiles)this._setTileReloadTimer(z,this._tiles[z])}}update(p,w){if(this.transform=p,this.terrain=w,!this._sourceLoaded||this._paused)return;let P;this.updateCacheSize(p),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?P=p.getVisibleUnwrappedCoordinates(this._source.tileID).map(we=>new d.O(we.canonical.z,we.wrap,we.canonical.z,we.canonical.x,we.canonical.y)):(P=p.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:w}),this._source.hasTile&&(P=P.filter(we=>this._source.hasTile(we)))):P=[];const z=p.coveringZoomLevel(this._source),N=Math.max(z-pt.maxOverzooming,this._source.minzoom),J=Math.max(z+pt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const we={};for(const Ie of P)if(Ie.canonical.z>this._source.minzoom){const We=Ie.scaledTo(Ie.canonical.z-1);we[We.key]=We;const at=Ie.scaledTo(Math.max(this._source.minzoom,Math.min(Ie.canonical.z,5)));we[at.key]=at}P=P.concat(Object.values(we))}const ee=P.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,ee&&this.fire(new d.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const se=this._updateRetainedTiles(P,z);if($t(this._source.type)){const we={},Ie={},We=Object.keys(se),at=d.h.now();for(const st of We){const ht=se[st],it=this._tiles[st];if(!it||it.fadeEndTime!==0&&it.fadeEndTime<=at)continue;const Vt=this.findLoadedParent(ht,N);Vt&&(this._addTile(Vt.tileID),we[Vt.tileID.key]=Vt.tileID),Ie[st]=ht}this._retainLoadedChildren(Ie,z,J,se);for(const st in we)se[st]||(this._coveredTiles[st]=!0,se[st]=we[st]);if(w){const st={},ht={};for(const it of P)this._tiles[it.key].hasData()?st[it.key]=it:ht[it.key]=it;for(const it in ht){const Vt=ht[it].children(this._source.maxzoom);this._tiles[Vt[0].key]&&this._tiles[Vt[1].key]&&this._tiles[Vt[2].key]&&this._tiles[Vt[3].key]&&(st[Vt[0].key]=se[Vt[0].key]=Vt[0],st[Vt[1].key]=se[Vt[1].key]=Vt[1],st[Vt[2].key]=se[Vt[2].key]=Vt[2],st[Vt[3].key]=se[Vt[3].key]=Vt[3],delete ht[it])}for(const it in ht){const Vt=this.findLoadedParent(ht[it],this._source.minzoom);if(Vt){st[Vt.tileID.key]=se[Vt.tileID.key]=Vt.tileID;for(const ar in st)st[ar].isChildOf(Vt.tileID)&&delete st[ar]}}for(const it in this._tiles)st[it]||(this._coveredTiles[it]=!0)}}for(const we in se)this._tiles[we].clearFadeHold();const ye=d.ab(this._tiles,se);for(const we of ye){const Ie=this._tiles[we];Ie.hasSymbolBuckets&&!Ie.holdingForFade()?Ie.setHoldDuration(this.map._fadeDuration):Ie.hasSymbolBuckets&&!Ie.symbolFadeFinished()||this._removeTile(we)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const p in this._tiles)this._tiles[p].holdingForFade()&&this._removeTile(p)}_updateRetainedTiles(p,w){const P={},z={},N=Math.max(w-pt.maxOverzooming,this._source.minzoom),J=Math.max(w+pt.maxUnderzooming,this._source.minzoom),ee={};for(const se of p){const ye=this._addTile(se);P[se.key]=se,ye.hasData()||w<this._source.maxzoom&&(ee[se.key]=se)}this._retainLoadedChildren(ee,w,J,P);for(const se of p){let ye=this._tiles[se.key];if(ye.hasData())continue;if(w+1>this._source.maxzoom){const Ie=se.children(this._source.maxzoom)[0],We=this.getTile(Ie);if(We&&We.hasData()){P[Ie.key]=Ie;continue}}else{const Ie=se.children(this._source.maxzoom);if(P[Ie[0].key]&&P[Ie[1].key]&&P[Ie[2].key]&&P[Ie[3].key])continue}let we=ye.wasRequested();for(let Ie=se.overscaledZ-1;Ie>=N;--Ie){const We=se.scaledTo(Ie);if(z[We.key])break;if(z[We.key]=!0,ye=this.getTile(We),!ye&&we&&(ye=this._addTile(We)),ye){const at=ye.hasData();if((we||at)&&(P[We.key]=We),we=ye.wasRequested(),at)break}}}return P}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const p in this._tiles){const w=[];let P,z=this._tiles[p].tileID;for(;z.overscaledZ>0;){if(z.key in this._loadedParentTiles){P=this._loadedParentTiles[z.key];break}w.push(z.key);const N=z.scaledTo(z.overscaledZ-1);if(P=this._getLoadedTile(N),P)break;z=N}for(const N of w)this._loadedParentTiles[N]=P}}_addTile(p){let w=this._tiles[p.key];if(w)return w;w=this._cache.getAndRemove(p),w&&(this._setTileReloadTimer(p.key,w),w.tileID=p,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[p.key]&&(clearTimeout(this._cacheTimers[p.key]),delete this._cacheTimers[p.key],this._setTileReloadTimer(p.key,w)));const P=w;return w||(w=new De(p,this._source.tileSize*p.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,p.key,w.state))),w.uses++,this._tiles[p.key]=w,P||this._source.fire(new d.k("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w}_setTileReloadTimer(p,w){p in this._timers&&(clearTimeout(this._timers[p]),delete this._timers[p]);const P=w.getExpiryTimeout();P&&(this._timers[p]=setTimeout(()=>{this._reloadTile(p,"expired"),delete this._timers[p]},P))}_removeTile(p){const w=this._tiles[p];w&&(w.uses--,delete this._tiles[p],this._timers[p]&&(clearTimeout(this._timers[p]),delete this._timers[p]),w.uses>0||(w.hasData()&&w.state!=="reloading"?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const p in this._tiles)this._removeTile(p);this._cache.reset()}tilesIn(p,w,P){const z=[],N=this.transform;if(!N)return z;const J=P?N.getCameraQueryGeometry(p):p,ee=p.map(st=>N.pointCoordinate(st,this.terrain)),se=J.map(st=>N.pointCoordinate(st,this.terrain)),ye=this.getIds();let we=1/0,Ie=1/0,We=-1/0,at=-1/0;for(const st of se)we=Math.min(we,st.x),Ie=Math.min(Ie,st.y),We=Math.max(We,st.x),at=Math.max(at,st.y);for(let st=0;st<ye.length;st++){const ht=this._tiles[ye[st]];if(ht.holdingForFade())continue;const it=ht.tileID,Vt=Math.pow(2,N.zoom-ht.tileID.overscaledZ),ar=w*ht.queryPadding*d.N/ht.tileSize/Vt,_t=[it.getTilePoint(new d.U(we,Ie)),it.getTilePoint(new d.U(We,at))];if(_t[0].x-ar<d.N&&_t[0].y-ar<d.N&&_t[1].x+ar>=0&&_t[1].y+ar>=0){const Ht=ee.map(hr=>it.getTilePoint(hr)),ur=se.map(hr=>it.getTilePoint(hr));z.push({tile:ht,tileID:it,queryGeometry:Ht,cameraQueryGeometry:ur,scale:Vt})}}return z}getVisibleCoordinates(p){const w=this.getRenderableIds(p).map(P=>this._tiles[P].tileID);for(const P of w)P.posMatrix=this.transform.calculatePosMatrix(P.toUnwrapped());return w}hasTransition(){if(this._source.hasTransition())return!0;if($t(this._source.type)){const p=d.h.now();for(const w in this._tiles)if(this._tiles[w].fadeEndTime>=p)return!0}return!1}setFeatureState(p,w,P){this._state.updateState(p=p||"_geojsonTileLayer",w,P)}removeFeatureState(p,w,P){this._state.removeFeatureState(p=p||"_geojsonTileLayer",w,P)}getFeatureState(p,w){return this._state.getState(p=p||"_geojsonTileLayer",w)}setDependencies(p,w,P){const z=this._tiles[p];z&&z.setDependencies(w,P)}reloadTilesForDependencies(p,w){for(const P in this._tiles)this._tiles[P].hasDependency(p,w)&&this._reloadTile(P,"reloading");this._cache.filter(P=>!P.hasDependency(p,w))}}function gt(L,p){const w=Math.abs(2*L.wrap)-+(L.wrap<0),P=Math.abs(2*p.wrap)-+(p.wrap<0);return L.overscaledZ-p.overscaledZ||P-w||p.canonical.y-L.canonical.y||p.canonical.x-L.canonical.x}function $t(L){return L==="raster"||L==="image"||L==="video"}pt.maxOverzooming=10,pt.maxUnderzooming=3;const It="mapboxgl_preloaded_worker_pool";class Mt{constructor(){this.active={}}acquire(p){if(!this.workers)for(this.workers=[];this.workers.length<Mt.workerCount;)this.workers.push(new Worker(d.c.WORKER_URL));return this.active[p]=!0,this.workers.slice()}release(p){delete this.active[p],this.numActive()===0&&(this.workers.forEach(w=>{w.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[It]}numActive(){return Object.keys(this.active).length}}const Qt=Math.floor(d.h.hardwareConcurrency/2);let wr;function br(){return wr||(wr=new Mt),wr}Mt.workerCount=d.ac(globalThis)?Math.max(Math.min(Qt,3),1):1;class tn{constructor(p,w){this.reset(p,w)}reset(p,w){this.points=p||[],this._distances=[0];for(let P=1;P<this.points.length;P++)this._distances[P]=this._distances[P-1]+this.points[P].dist(this.points[P-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(w||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(p){if(this.points.length===1)return this.points[0];p=d.ad(p,0,1);let w=1,P=this._distances[w];const z=p*this.paddedLength+this.padding;for(;P<z&&w<this._distances.length;)P=this._distances[++w];const N=w-1,J=this._distances[N],ee=P-J,se=ee>0?(z-J)/ee:0;return this.points[N].mult(1-se).add(this.points[w].mult(se))}}function yr(L,p){let w=!0;return L==="always"||L!=="never"&&p!=="never"||(w=!1),w}class dr{constructor(p,w,P){const z=this.boxCells=[],N=this.circleCells=[];this.xCellCount=Math.ceil(p/P),this.yCellCount=Math.ceil(w/P);for(let J=0;J<this.xCellCount*this.yCellCount;J++)z.push([]),N.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=p,this.height=w,this.xScale=this.xCellCount/p,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(p,w,P,z,N){this._forEachCell(w,P,z,N,this._insertBoxCell,this.boxUid++),this.boxKeys.push(p),this.bboxes.push(w),this.bboxes.push(P),this.bboxes.push(z),this.bboxes.push(N)}insertCircle(p,w,P,z){this._forEachCell(w-z,P-z,w+z,P+z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(p),this.circles.push(w),this.circles.push(P),this.circles.push(z)}_insertBoxCell(p,w,P,z,N,J){this.boxCells[N].push(J)}_insertCircleCell(p,w,P,z,N,J){this.circleCells[N].push(J)}_query(p,w,P,z,N,J,ee){if(P<0||p>this.width||z<0||w>this.height)return[];const se=[];if(p<=0&&w<=0&&this.width<=P&&this.height<=z){if(N)return[{key:null,x1:p,y1:w,x2:P,y2:z}];for(let ye=0;ye<this.boxKeys.length;ye++)se.push({key:this.boxKeys[ye],x1:this.bboxes[4*ye],y1:this.bboxes[4*ye+1],x2:this.bboxes[4*ye+2],y2:this.bboxes[4*ye+3]});for(let ye=0;ye<this.circleKeys.length;ye++){const we=this.circles[3*ye],Ie=this.circles[3*ye+1],We=this.circles[3*ye+2];se.push({key:this.circleKeys[ye],x1:we-We,y1:Ie-We,x2:we+We,y2:Ie+We})}}else this._forEachCell(p,w,P,z,this._queryCell,se,{hitTest:N,overlapMode:J,seenUids:{box:{},circle:{}}},ee);return se}query(p,w,P,z){return this._query(p,w,P,z,!1,null)}hitTest(p,w,P,z,N,J){return this._query(p,w,P,z,!0,N,J).length>0}hitTestCircle(p,w,P,z,N){const J=p-P,ee=p+P,se=w-P,ye=w+P;if(ee<0||J>this.width||ye<0||se>this.height)return!1;const we=[];return this._forEachCell(J,se,ee,ye,this._queryCellCircle,we,{hitTest:!0,overlapMode:z,circle:{x:p,y:w,radius:P},seenUids:{box:{},circle:{}}},N),we.length>0}_queryCell(p,w,P,z,N,J,ee,se){const{seenUids:ye,hitTest:we,overlapMode:Ie}=ee,We=this.boxCells[N];if(We!==null){const st=this.bboxes;for(const ht of We)if(!ye.box[ht]){ye.box[ht]=!0;const it=4*ht,Vt=this.boxKeys[ht];if(p<=st[it+2]&&w<=st[it+3]&&P>=st[it+0]&&z>=st[it+1]&&(!se||se(Vt))&&(!we||!yr(Ie,Vt.overlapMode))&&(J.push({key:Vt,x1:st[it],y1:st[it+1],x2:st[it+2],y2:st[it+3]}),we))return!0}}const at=this.circleCells[N];if(at!==null){const st=this.circles;for(const ht of at)if(!ye.circle[ht]){ye.circle[ht]=!0;const it=3*ht,Vt=this.circleKeys[ht];if(this._circleAndRectCollide(st[it],st[it+1],st[it+2],p,w,P,z)&&(!se||se(Vt))&&(!we||!yr(Ie,Vt.overlapMode))){const ar=st[it],_t=st[it+1],Ht=st[it+2];if(J.push({key:Vt,x1:ar-Ht,y1:_t-Ht,x2:ar+Ht,y2:_t+Ht}),we)return!0}}}return!1}_queryCellCircle(p,w,P,z,N,J,ee,se){const{circle:ye,seenUids:we,overlapMode:Ie}=ee,We=this.boxCells[N];if(We!==null){const st=this.bboxes;for(const ht of We)if(!we.box[ht]){we.box[ht]=!0;const it=4*ht,Vt=this.boxKeys[ht];if(this._circleAndRectCollide(ye.x,ye.y,ye.radius,st[it+0],st[it+1],st[it+2],st[it+3])&&(!se||se(Vt))&&!yr(Ie,Vt.overlapMode))return J.push(!0),!0}}const at=this.circleCells[N];if(at!==null){const st=this.circles;for(const ht of at)if(!we.circle[ht]){we.circle[ht]=!0;const it=3*ht,Vt=this.circleKeys[ht];if(this._circlesCollide(st[it],st[it+1],st[it+2],ye.x,ye.y,ye.radius)&&(!se||se(Vt))&&!yr(Ie,Vt.overlapMode))return J.push(!0),!0}}}_forEachCell(p,w,P,z,N,J,ee,se){const ye=this._convertToXCellCoord(p),we=this._convertToYCellCoord(w),Ie=this._convertToXCellCoord(P),We=this._convertToYCellCoord(z);for(let at=ye;at<=Ie;at++)for(let st=we;st<=We;st++)if(N.call(this,p,w,P,z,this.xCellCount*st+at,J,ee,se))return}_convertToXCellCoord(p){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(p*this.xScale)))}_convertToYCellCoord(p){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(p*this.yScale)))}_circlesCollide(p,w,P,z,N,J){const ee=z-p,se=N-w,ye=P+J;return ye*ye>ee*ee+se*se}_circleAndRectCollide(p,w,P,z,N,J,ee){const se=(J-z)/2,ye=Math.abs(p-(z+se));if(ye>se+P)return!1;const we=(ee-N)/2,Ie=Math.abs(w-(N+we));if(Ie>we+P)return!1;if(ye<=se||Ie<=we)return!0;const We=ye-se,at=Ie-we;return We*We+at*at<=P*P}}function Wt(L,p,w,P,z){const N=d.Z();return p?(d.a0(N,N,[1/z,1/z,1]),w||d.ae(N,N,P.angle)):d.a1(N,P.labelPlaneMatrix,L),N}function Wr(L,p,w,P,z){if(p){const N=d.af(L);return d.a0(N,N,[z,z,1]),w||d.ae(N,N,-P.angle),N}return P.glCoordMatrix}function Fr(L,p,w){let P;w?(P=[L.x,L.y,w(L.x,L.y),1],d.ag(P,P,p)):(P=[L.x,L.y,0,1],$e(P,P,p));const z=P[3];return{point:new d.P(P[0]/z,P[1]/z),signedDistanceFromCamera:z}}function en(L,p){return .5+L/p*.5}function Yr(L,p){const w=L[0]/L[3],P=L[1]/L[3];return w>=-p[0]&&w<=p[0]&&P>=-p[1]&&P<=p[1]}function fr(L,p,w,P,z,N,J,ee,se,ye){const we=P?L.textSizeData:L.iconSizeData,Ie=d.ah(we,w.transform.zoom),We=[256/w.width*2+1,256/w.height*2+1],at=P?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;at.clear();const st=L.lineVertexArray,ht=P?L.text.placedSymbolArray:L.icon.placedSymbolArray,it=w.transform.width/w.transform.height;let Vt=!1;for(let ar=0;ar<ht.length;ar++){const _t=ht.get(ar);if(_t.hidden||_t.writingMode===d.ai.vertical&&!Vt){Te(_t.numGlyphs,at);continue}let Ht;if(Vt=!1,ye?(Ht=[_t.anchorX,_t.anchorY,ye(_t.anchorX,_t.anchorY),1],d.ag(Ht,Ht,p)):(Ht=[_t.anchorX,_t.anchorY,0,1],$e(Ht,Ht,p)),!Yr(Ht,We)){Te(_t.numGlyphs,at);continue}const ur=en(w.transform.cameraToCenterDistance,Ht[3]),hr=d.aj(we,Ie,_t),_r=J?hr/ur:hr*ur,zr=new d.P(_t.anchorX,_t.anchorY),Ar=Fr(zr,z,ye).point,Xr={projections:{},offsets:{}},wn=an(_t,_r,!1,ee,p,z,N,L.glyphOffsetArray,st,at,Ar,zr,Xr,it,se,ye);Vt=wn.useVertical,(wn.notEnoughRoom||Vt||wn.needsFlipping&&an(_t,_r,!0,ee,p,z,N,L.glyphOffsetArray,st,at,Ar,zr,Xr,it,se,ye).notEnoughRoom)&&Te(_t.numGlyphs,at)}P?L.text.dynamicLayoutVertexBuffer.updateData(at):L.icon.dynamicLayoutVertexBuffer.updateData(at)}function Kr(L,p,w,P,z,N,J,ee,se,ye,we,Ie,We){const at=ee.glyphStartIndex+ee.numGlyphs,st=ee.lineStartIndex,ht=ee.lineStartIndex+ee.lineLength,it=p.getoffsetX(ee.glyphStartIndex),Vt=p.getoffsetX(at-1),ar=he(L*it,w,P,z,N,J,ee.segment,st,ht,se,ye,we,Ie,We);if(!ar)return null;const _t=he(L*Vt,w,P,z,N,J,ee.segment,st,ht,se,ye,we,Ie,We);return _t?{first:ar,last:_t}:null}function Br(L,p,w,P){return L===d.ai.horizontal&&Math.abs(w.y-p.y)>Math.abs(w.x-p.x)*P?{useVertical:!0}:(L===d.ai.vertical?p.y<w.y:p.x>w.x)?{needsFlipping:!0}:null}function an(L,p,w,P,z,N,J,ee,se,ye,we,Ie,We,at,st,ht){const it=p/24,Vt=L.lineOffsetX*it,ar=L.lineOffsetY*it;let _t;if(L.numGlyphs>1){const Ht=L.glyphStartIndex+L.numGlyphs,ur=L.lineStartIndex,hr=L.lineStartIndex+L.lineLength,_r=Kr(it,ee,Vt,ar,w,we,Ie,L,se,N,We,st,ht);if(!_r)return{notEnoughRoom:!0};const zr=Fr(_r.first.point,J,ht).point,Ar=Fr(_r.last.point,J,ht).point;if(P&&!w){const Xr=Br(L.writingMode,zr,Ar,at);if(Xr)return Xr}_t=[_r.first];for(let Xr=L.glyphStartIndex+1;Xr<Ht-1;Xr++)_t.push(he(it*ee.getoffsetX(Xr),Vt,ar,w,we,Ie,L.segment,ur,hr,se,N,We,st,ht));_t.push(_r.last)}else{if(P&&!w){const ur=Fr(Ie,z,ht).point,hr=L.lineStartIndex+L.segment+1,_r=new d.P(se.getx(hr),se.gety(hr)),zr=Fr(_r,z,ht),Ar=zr.signedDistanceFromCamera>0?zr.point:ni(Ie,_r,ur,1,z,ht),Xr=Br(L.writingMode,ur,Ar,at);if(Xr)return Xr}const Ht=he(it*ee.getoffsetX(L.glyphStartIndex),Vt,ar,w,we,Ie,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,se,N,We,st,ht);if(!Ht)return{notEnoughRoom:!0};_t=[Ht]}for(const Ht of _t)d.ak(ye,Ht.point,Ht.angle);return{}}function ni(L,p,w,P,z,N){const J=Fr(L.add(L.sub(p)._unit()),z,N).point,ee=w.sub(J);return w.add(ee._mult(P/ee.mag()))}function Nr(L,p){const{projectionCache:w,lineVertexArray:P,labelPlaneMatrix:z,tileAnchorPoint:N,distanceFromAnchor:J,getElevation:ee,previousVertex:se,direction:ye,absOffsetX:we}=p;if(w.projections[L])return w.projections[L];const Ie=new d.P(P.getx(L),P.gety(L)),We=Fr(Ie,z,ee);if(We.signedDistanceFromCamera>0)return w.projections[L]=We.point,We.point;const at=L-ye;return ni(J===0?N:new d.P(P.getx(at),P.gety(at)),Ie,se,we-J+1,z,ee)}function ii(L,p,w){return L._unit()._perp()._mult(p*w)}function Pe(L,p,w,P,z,N,J,ee){const{projectionCache:se,direction:ye}=ee;if(se.offsets[L])return se.offsets[L];const we=w.add(p);if(L+ye<P||L+ye>=z)return se.offsets[L]=we,we;const Ie=Nr(L+ye,ee),We=ii(Ie.sub(w),J,ye),at=w.add(We),st=Ie.add(We);return se.offsets[L]=d.al(N,we,at,st)||we,se.offsets[L]}function he(L,p,w,P,z,N,J,ee,se,ye,we,Ie,We,at){const st=P?L-p:L+p;let ht=st>0?1:-1,it=0;P&&(ht*=-1,it=Math.PI),ht<0&&(it+=Math.PI);let Vt,ar,_t=ht>0?ee+J:ee+J+1,Ht=z,ur=z,hr=0,_r=0;const zr=Math.abs(st),Ar=[];let Xr;for(;hr+_r<=zr;){if(_t+=ht,_t<ee||_t>=se)return null;hr+=_r,ur=Ht,ar=Vt;const pn={projectionCache:Ie,lineVertexArray:ye,labelPlaneMatrix:we,tileAnchorPoint:N,distanceFromAnchor:hr,getElevation:at,previousVertex:ur,direction:ht,absOffsetX:zr};if(Ht=Nr(_t,pn),w===0)Ar.push(ur),Xr=Ht.sub(ur);else{let Hn;const An=Ht.sub(ur);Hn=An.mag()===0?ii(Nr(_t+ht,pn).sub(Ht),w,ht):ii(An,w,ht),ar||(ar=ur.add(Hn)),Vt=Pe(_t,Hn,Ht,ee,se,ar,w,pn),Ar.push(ar),Xr=Vt.sub(ar)}_r=Xr.mag()}const wn=Xr._mult((zr-hr)/_r)._add(ar||ur),Bi=it+Math.atan2(Ht.y-ur.y,Ht.x-ur.x);return Ar.push(wn),{point:wn,angle:We?Bi:0,path:Ar}}const ge=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Te(L,p){for(let w=0;w<L;w++){const P=p.length;p.resize(P+4),p.float32.set(ge,3*P)}}function $e(L,p,w){const P=p[0],z=p[1];return L[0]=w[0]*P+w[4]*z+w[12],L[1]=w[1]*P+w[5]*z+w[13],L[3]=w[3]*P+w[7]*z+w[15],L}const ke=100;class Ke{constructor(p,w=new dr(p.width+200,p.height+200,25),P=new dr(p.width+200,p.height+200,25)){this.transform=p,this.grid=w,this.ignoredGrid=P,this.pitchfactor=Math.cos(p._pitch)*p.cameraToCenterDistance,this.screenRightBoundary=p.width+ke,this.screenBottomBoundary=p.height+ke,this.gridRightBoundary=p.width+200,this.gridBottomBoundary=p.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(p,w,P,z,N,J){const ee=this.projectAndGetPerspectiveRatio(z,p.anchorPointX,p.anchorPointY,J),se=P*ee.perspectiveRatio,ye=p.x1*se+ee.point.x,we=p.y1*se+ee.point.y,Ie=p.x2*se+ee.point.x,We=p.y2*se+ee.point.y;return!this.isInsideGrid(ye,we,Ie,We)||w!=="always"&&this.grid.hitTest(ye,we,Ie,We,w,N)||ee.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ye,we,Ie,We],offscreen:this.isOffscreen(ye,we,Ie,We)}}placeCollisionCircles(p,w,P,z,N,J,ee,se,ye,we,Ie,We,at,st){const ht=[],it=new d.P(w.anchorX,w.anchorY),Vt=Fr(it,J,st),ar=en(this.transform.cameraToCenterDistance,Vt.signedDistanceFromCamera),_t=(we?N/ar:N*ar)/d.ap,Ht=Fr(it,ee,st).point,ur=Kr(_t,z,w.lineOffsetX*_t,w.lineOffsetY*_t,!1,Ht,it,w,P,ee,{projections:{},offsets:{}},!1,st);let hr=!1,_r=!1,zr=!0;if(ur){const Ar=.5*We*ar+at,Xr=new d.P(-100,-100),wn=new d.P(this.screenRightBoundary,this.screenBottomBoundary),Bi=new tn,pn=ur.first,Hn=ur.last;let An=[];for(let li=pn.path.length-1;li>=1;li--)An.push(pn.path[li]);for(let li=1;li<Hn.path.length;li++)An.push(Hn.path[li]);const lo=2.5*Ar;if(se){const li=An.map(Ri=>Fr(Ri,se,st));An=li.some(Ri=>Ri.signedDistanceFromCamera<=0)?[]:li.map(Ri=>Ri.point)}let Ii=[];if(An.length>0){const li=An[0].clone(),Ri=An[0].clone();for(let bo=1;bo<An.length;bo++)li.x=Math.min(li.x,An[bo].x),li.y=Math.min(li.y,An[bo].y),Ri.x=Math.max(Ri.x,An[bo].x),Ri.y=Math.max(Ri.y,An[bo].y);Ii=li.x>=Xr.x&&Ri.x<=wn.x&&li.y>=Xr.y&&Ri.y<=wn.y?[An]:Ri.x<Xr.x||li.x>wn.x||Ri.y<Xr.y||li.y>wn.y?[]:d.am([An],Xr.x,Xr.y,wn.x,wn.y)}for(const li of Ii){Bi.reset(li,.25*Ar);let Ri=0;Ri=Bi.length<=.5*Ar?1:Math.ceil(Bi.paddedLength/lo)+1;for(let bo=0;bo<Ri;bo++){const wo=bo/Math.max(Ri-1,1),La=Bi.lerp(wo),pa=La.x+ke,co=La.y+ke;ht.push(pa,co,Ar,0);const rl=pa-Ar,Fo=co-Ar,Jl=pa+Ar,Es=co+Ar;if(zr=zr&&this.isOffscreen(rl,Fo,Jl,Es),_r=_r||this.isInsideGrid(rl,Fo,Jl,Es),p!=="always"&&this.grid.hitTestCircle(pa,co,Ar,p,Ie)&&(hr=!0,!ye))return{circles:[],offscreen:!1,collisionDetected:hr}}}}return{circles:!ye&&hr||!_r||ar<this.perspectiveRatioCutoff?[]:ht,offscreen:zr,collisionDetected:hr}}queryRenderedSymbols(p){if(p.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const w=[];let P=1/0,z=1/0,N=-1/0,J=-1/0;for(const we of p){const Ie=new d.P(we.x+ke,we.y+ke);P=Math.min(P,Ie.x),z=Math.min(z,Ie.y),N=Math.max(N,Ie.x),J=Math.max(J,Ie.y),w.push(Ie)}const ee=this.grid.query(P,z,N,J).concat(this.ignoredGrid.query(P,z,N,J)),se={},ye={};for(const we of ee){const Ie=we.key;if(se[Ie.bucketInstanceId]===void 0&&(se[Ie.bucketInstanceId]={}),se[Ie.bucketInstanceId][Ie.featureIndex])continue;const We=[new d.P(we.x1,we.y1),new d.P(we.x2,we.y1),new d.P(we.x2,we.y2),new d.P(we.x1,we.y2)];d.an(w,We)&&(se[Ie.bucketInstanceId][Ie.featureIndex]=!0,ye[Ie.bucketInstanceId]===void 0&&(ye[Ie.bucketInstanceId]=[]),ye[Ie.bucketInstanceId].push(Ie.featureIndex))}return ye}insertCollisionBox(p,w,P,z,N,J){(P?this.ignoredGrid:this.grid).insert({bucketInstanceId:z,featureIndex:N,collisionGroupID:J,overlapMode:w},p[0],p[1],p[2],p[3])}insertCollisionCircles(p,w,P,z,N,J){const ee=P?this.ignoredGrid:this.grid,se={bucketInstanceId:z,featureIndex:N,collisionGroupID:J,overlapMode:w};for(let ye=0;ye<p.length;ye+=4)ee.insertCircle(se,p[ye],p[ye+1],p[ye+2])}projectAndGetPerspectiveRatio(p,w,P,z){let N;return z?(N=[w,P,z(w,P),1],d.ag(N,N,p)):(N=[w,P,0,1],$e(N,N,p)),{point:new d.P((N[0]/N[3]+1)/2*this.transform.width+ke,(-N[1]/N[3]+1)/2*this.transform.height+ke),perspectiveRatio:.5+this.transform.cameraToCenterDistance/N[3]*.5}}isOffscreen(p,w,P,z){return P<ke||p>=this.screenRightBoundary||z<ke||w>this.screenBottomBoundary}isInsideGrid(p,w,P,z){return P>=0&&p<this.gridRightBoundary&&z>=0&&w<this.gridBottomBoundary}getViewportMatrix(){const p=d.ao([]);return d.$(p,p,[-100,-100,0]),p}}function Ue(L,p,w){return p*(d.N/(L.tileSize*Math.pow(2,w-L.tileID.overscaledZ)))}class Ne{constructor(p,w,P,z){this.opacity=p?Math.max(0,Math.min(1,p.opacity+(p.placed?w:-w))):z&&P?1:0,this.placed=P}isHidden(){return this.opacity===0&&!this.placed}}class et{constructor(p,w,P,z,N){this.text=new Ne(p?p.text:null,w,P,N),this.icon=new Ne(p?p.icon:null,w,z,N)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Et{constructor(p,w,P){this.text=p,this.icon=w,this.skipFade=P}}class Yt{constructor(){this.invProjMatrix=d.Z(),this.viewportMatrix=d.Z(),this.circles=[]}}class dt{constructor(p,w,P,z,N){this.bucketInstanceId=p,this.featureIndex=w,this.sourceLayerIndex=P,this.bucketIndex=z,this.tileID=N}}class ir{constructor(p){this.crossSourceCollisions=p,this.maxGroupID=0,this.collisionGroups={}}get(p){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[p]){const w=++this.maxGroupID;this.collisionGroups[p]={ID:w,predicate:P=>P.collisionGroupID===w}}return this.collisionGroups[p]}}function gr(L,p,w,P,z){const{horizontalAlign:N,verticalAlign:J}=d.au(L);return new d.P(-(N-.5)*p+P[0]*z,-(J-.5)*w+P[1]*z)}function mr(L,p,w,P,z,N){const{x1:J,x2:ee,y1:se,y2:ye,anchorPointX:we,anchorPointY:Ie}=L,We=new d.P(p,w);return P&&We._rotate(z?N:-N),{x1:J+We.x,y1:se+We.y,x2:ee+We.x,y2:ye+We.y,anchorPointX:we,anchorPointY:Ie}}class Sr{constructor(p,w,P,z,N){this.transform=p.clone(),this.terrain=w,this.collisionIndex=new Ke(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=P,this.retainedQueryData={},this.collisionGroups=new ir(z),this.collisionCircleArrays={},this.prevPlacement=N,N&&(N.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(p,w,P,z){const N=P.getBucket(w),J=P.latestFeatureIndex;if(!N||!J||w.id!==N.layerIds[0])return;const ee=P.collisionBoxArray,se=N.layers[0].layout,ye=Math.pow(2,this.transform.zoom-P.tileID.overscaledZ),we=P.tileSize/d.N,Ie=this.transform.calculatePosMatrix(P.tileID.toUnwrapped()),We=se.get("text-pitch-alignment")==="map",at=se.get("text-rotation-alignment")==="map",st=Ue(P,1,this.transform.zoom),ht=Wt(Ie,We,at,this.transform,st);let it=null;if(We){const ar=Wr(Ie,We,at,this.transform,st);it=d.a1([],this.transform.labelPlaneMatrix,ar)}this.retainedQueryData[N.bucketInstanceId]=new dt(N.bucketInstanceId,J,N.sourceLayerIndex,N.index,P.tileID);const Vt={bucket:N,layout:se,posMatrix:Ie,textLabelPlaneMatrix:ht,labelToScreenMatrix:it,scale:ye,textPixelRatio:we,holdingForFade:P.holdingForFade(),collisionBoxArray:ee,partiallyEvaluatedTextSize:d.ah(N.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(N.sourceID)};if(z)for(const ar of N.sortKeyRanges){const{sortKey:_t,symbolInstanceStart:Ht,symbolInstanceEnd:ur}=ar;p.push({sortKey:_t,symbolInstanceStart:Ht,symbolInstanceEnd:ur,parameters:Vt})}else p.push({symbolInstanceStart:0,symbolInstanceEnd:N.symbolInstances.length,parameters:Vt})}attemptAnchorPlacement(p,w,P,z,N,J,ee,se,ye,we,Ie,We,at,st,ht,it){const Vt=d.aq[p.textAnchor],ar=[p.textOffset0,p.textOffset1],_t=gr(Vt,P,z,ar,N),Ht=this.collisionIndex.placeCollisionBox(mr(w,_t.x,_t.y,J,ee,this.transform.angle),Ie,se,ye,we.predicate,it);if((!ht||this.collisionIndex.placeCollisionBox(mr(ht,_t.x,_t.y,J,ee,this.transform.angle),Ie,se,ye,we.predicate,it).box.length!==0)&&Ht.box.length>0){let ur;if(this.prevPlacement&&this.prevPlacement.variableOffsets[We.crossTileID]&&this.prevPlacement.placements[We.crossTileID]&&this.prevPlacement.placements[We.crossTileID].text&&(ur=this.prevPlacement.variableOffsets[We.crossTileID].anchor),We.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[We.crossTileID]={textOffset:ar,width:P,height:z,anchor:Vt,textBoxScale:N,prevAnchor:ur},this.markUsedJustification(at,Vt,We,st),at.allowVerticalPlacement&&(this.markUsedOrientation(at,st,We),this.placedOrientations[We.crossTileID]=st),{shift:_t,placedGlyphBoxes:Ht}}}placeLayerBucketPart(p,w,P){const{bucket:z,layout:N,posMatrix:J,textLabelPlaneMatrix:ee,labelToScreenMatrix:se,textPixelRatio:ye,holdingForFade:we,collisionBoxArray:Ie,partiallyEvaluatedTextSize:We,collisionGroup:at}=p.parameters,st=N.get("text-optional"),ht=N.get("icon-optional"),it=d.ar(N,"text-overlap","text-allow-overlap"),Vt=it==="always",ar=d.ar(N,"icon-overlap","icon-allow-overlap"),_t=ar==="always",Ht=N.get("text-rotation-alignment")==="map",ur=N.get("text-pitch-alignment")==="map",hr=N.get("icon-text-fit")!=="none",_r=N.get("symbol-z-order")==="viewport-y",zr=Vt&&(_t||!z.hasIconData()||ht),Ar=_t&&(Vt||!z.hasTextData()||st);!z.collisionArrays&&Ie&&z.deserializeCollisionBoxes(Ie);const Xr=this.retainedQueryData[z.bucketInstanceId].tileID,wn=this.terrain?(pn,Hn)=>this.terrain.getElevation(Xr,pn,Hn):null,Bi=(pn,Hn)=>{var An,lo;if(w[pn.crossTileID])return;if(we)return void(this.placements[pn.crossTileID]=new Et(!1,!1,!1));let Ii=!1,li=!1,Ri=!0,bo=null,wo={box:null,offscreen:null},La={box:null,offscreen:null},pa=null,co=null,rl=null,Fo=0,Jl=0,Es=0;Hn.textFeatureIndex?Fo=Hn.textFeatureIndex:pn.useRuntimeCollisionCircles&&(Fo=pn.featureIndex),Hn.verticalTextFeatureIndex&&(Jl=Hn.verticalTextFeatureIndex);const Xc=Hn.textBox;if(Xc){const Ka=ma=>{let Za=d.ai.horizontal;if(z.allowVerticalPlacement&&!ma&&this.prevPlacement){const Fs=this.prevPlacement.placedOrientations[pn.crossTileID];Fs&&(this.placedOrientations[pn.crossTileID]=Fs,Za=Fs,this.markUsedOrientation(z,Za,pn))}return Za},cs=(ma,Za)=>{if(z.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&Hn.verticalTextBox){for(const Fs of z.writingModes)if(Fs===d.ai.vertical?(wo=Za(),La=wo):wo=ma(),wo&&wo.box&&wo.box.length)break}else wo=ma()},Ts=pn.textAnchorOffsetStartIndex,kl=pn.textAnchorOffsetEndIndex;if(kl===Ts){const ma=(Za,Fs)=>{const Xo=this.collisionIndex.placeCollisionBox(Za,it,ye,J,at.predicate,wn);return Xo&&Xo.box&&Xo.box.length&&(this.markUsedOrientation(z,Fs,pn),this.placedOrientations[pn.crossTileID]=Fs),Xo};cs(()=>ma(Xc,d.ai.horizontal),()=>{const Za=Hn.verticalTextBox;return z.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&Za?ma(Za,d.ai.vertical):{box:null,offscreen:null}}),Ka(wo&&wo.box&&wo.box.length)}else{let ma=d.aq[(lo=(An=this.prevPlacement)===null||An===void 0?void 0:An.variableOffsets[pn.crossTileID])===null||lo===void 0?void 0:lo.anchor];const Za=(Xo,Yc,lf)=>{const ug=Xo.x2-Xo.x1,cf=Xo.y2-Xo.y1,hg=pn.textBoxScale,wp=hr&&ar==="never"?Yc:null;let Ql={box:[],offscreen:!1},Du=it==="never"?1:2,ec="never";ma&&Du++;for(let pl=0;pl<Du;pl++){for(let Ns=Ts;Ns<kl;Ns++){const Sp=z.textAnchorOffsets.get(Ns);if(ma&&Sp.textAnchor!==ma)continue;const Cc=this.attemptAnchorPlacement(Sp,Xo,ug,cf,hg,Ht,ur,ye,J,at,ec,pn,z,lf,wp,wn);if(Cc&&(Ql=Cc.placedGlyphBoxes,Ql&&Ql.box&&Ql.box.length))return Ii=!0,bo=Cc.shift,Ql}ma?ma=null:ec=it}return Ql};cs(()=>Za(Xc,Hn.iconBox,d.ai.horizontal),()=>{const Xo=Hn.verticalTextBox;return z.allowVerticalPlacement&&!(wo&&wo.box&&wo.box.length)&&pn.numVerticalGlyphVertices>0&&Xo?Za(Xo,Hn.verticalIconBox,d.ai.vertical):{box:null,offscreen:null}}),wo&&(Ii=wo.box,Ri=wo.offscreen);const Fs=Ka(wo&&wo.box);if(!Ii&&this.prevPlacement){const Xo=this.prevPlacement.variableOffsets[pn.crossTileID];Xo&&(this.variableOffsets[pn.crossTileID]=Xo,this.markUsedJustification(z,Xo.anchor,pn,Fs))}}}if(pa=wo,Ii=pa&&pa.box&&pa.box.length>0,Ri=pa&&pa.offscreen,pn.useRuntimeCollisionCircles){const Ka=z.text.placedSymbolArray.get(pn.centerJustifiedTextSymbolIndex),cs=d.aj(z.textSizeData,We,Ka),Ts=N.get("text-padding");co=this.collisionIndex.placeCollisionCircles(it,Ka,z.lineVertexArray,z.glyphOffsetArray,cs,J,ee,se,P,ur,at.predicate,pn.collisionCircleDiameter,Ts,wn),co.circles.length&&co.collisionDetected&&!P&&d.w("Collisions detected, but collision boxes are not shown"),Ii=Vt||co.circles.length>0&&!co.collisionDetected,Ri=Ri&&co.offscreen}if(Hn.iconFeatureIndex&&(Es=Hn.iconFeatureIndex),Hn.iconBox){const Ka=cs=>{const Ts=hr&&bo?mr(cs,bo.x,bo.y,Ht,ur,this.transform.angle):cs;return this.collisionIndex.placeCollisionBox(Ts,ar,ye,J,at.predicate,wn)};La&&La.box&&La.box.length&&Hn.verticalIconBox?(rl=Ka(Hn.verticalIconBox),li=rl.box.length>0):(rl=Ka(Hn.iconBox),li=rl.box.length>0),Ri=Ri&&rl.offscreen}const Sc=st||pn.numHorizontalGlyphVertices===0&&pn.numVerticalGlyphVertices===0,zu=ht||pn.numIconVertices===0;if(Sc||zu?zu?Sc||(li=li&&Ii):Ii=li&&Ii:li=Ii=li&&Ii,Ii&&pa&&pa.box&&this.collisionIndex.insertCollisionBox(pa.box,it,N.get("text-ignore-placement"),z.bucketInstanceId,La&&La.box&&Jl?Jl:Fo,at.ID),li&&rl&&this.collisionIndex.insertCollisionBox(rl.box,ar,N.get("icon-ignore-placement"),z.bucketInstanceId,Es,at.ID),co&&(Ii&&this.collisionIndex.insertCollisionCircles(co.circles,it,N.get("text-ignore-placement"),z.bucketInstanceId,Fo,at.ID),P)){const Ka=z.bucketInstanceId;let cs=this.collisionCircleArrays[Ka];cs===void 0&&(cs=this.collisionCircleArrays[Ka]=new Yt);for(let Ts=0;Ts<co.circles.length;Ts+=4)cs.circles.push(co.circles[Ts+0]),cs.circles.push(co.circles[Ts+1]),cs.circles.push(co.circles[Ts+2]),cs.circles.push(co.collisionDetected?1:0)}if(pn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(z.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pn.crossTileID]=new Et(Ii||zr,li||Ar,Ri||z.justReloaded),w[pn.crossTileID]=!0};if(_r){if(p.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pn=z.getSortedSymbolIndexes(this.transform.angle);for(let Hn=pn.length-1;Hn>=0;--Hn){const An=pn[Hn];Bi(z.symbolInstances.get(An),z.collisionArrays[An])}}else for(let pn=p.symbolInstanceStart;pn<p.symbolInstanceEnd;pn++)Bi(z.symbolInstances.get(pn),z.collisionArrays[pn]);if(P&&z.bucketInstanceId in this.collisionCircleArrays){const pn=this.collisionCircleArrays[z.bucketInstanceId];d.as(pn.invProjMatrix,J),pn.viewportMatrix=this.collisionIndex.getViewportMatrix()}z.justReloaded=!1}markUsedJustification(p,w,P,z){let N;N=z===d.ai.vertical?P.verticalPlacedTextSymbolIndex:{left:P.leftJustifiedTextSymbolIndex,center:P.centerJustifiedTextSymbolIndex,right:P.rightJustifiedTextSymbolIndex}[d.at(w)];const J=[P.leftJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.rightJustifiedTextSymbolIndex,P.verticalPlacedTextSymbolIndex];for(const ee of J)ee>=0&&(p.text.placedSymbolArray.get(ee).crossTileID=N>=0&&ee!==N?0:P.crossTileID)}markUsedOrientation(p,w,P){const z=w===d.ai.horizontal||w===d.ai.horizontalOnly?w:0,N=w===d.ai.vertical?w:0,J=[P.leftJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.rightJustifiedTextSymbolIndex];for(const ee of J)p.text.placedSymbolArray.get(ee).placedOrientation=z;P.verticalPlacedTextSymbolIndex&&(p.text.placedSymbolArray.get(P.verticalPlacedTextSymbolIndex).placedOrientation=N)}commit(p){this.commitTime=p,this.zoomAtLastRecencyCheck=this.transform.zoom;const w=this.prevPlacement;let P=!1;this.prevZoomAdjustment=w?w.zoomAdjustment(this.transform.zoom):0;const z=w?w.symbolFadeChange(p):1,N=w?w.opacities:{},J=w?w.variableOffsets:{},ee=w?w.placedOrientations:{};for(const se in this.placements){const ye=this.placements[se],we=N[se];we?(this.opacities[se]=new et(we,z,ye.text,ye.icon),P=P||ye.text!==we.text.placed||ye.icon!==we.icon.placed):(this.opacities[se]=new et(null,z,ye.text,ye.icon,ye.skipFade),P=P||ye.text||ye.icon)}for(const se in N){const ye=N[se];if(!this.opacities[se]){const we=new et(ye,z,!1,!1);we.isHidden()||(this.opacities[se]=we,P=P||ye.text.placed||ye.icon.placed)}}for(const se in J)this.variableOffsets[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.variableOffsets[se]=J[se]);for(const se in ee)this.placedOrientations[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.placedOrientations[se]=ee[se]);if(w&&w.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");P?this.lastPlacementChangeTime=p:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=w?w.lastPlacementChangeTime:p)}updateLayerOpacities(p,w){const P={};for(const z of w){const N=z.getBucket(p);N&&z.latestFeatureIndex&&p.id===N.layerIds[0]&&this.updateBucketOpacities(N,P,z.collisionBoxArray)}}updateBucketOpacities(p,w,P){p.hasTextData()&&(p.text.opacityVertexArray.clear(),p.text.hasVisibleVertices=!1),p.hasIconData()&&(p.icon.opacityVertexArray.clear(),p.icon.hasVisibleVertices=!1),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexArray.clear(),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexArray.clear();const z=p.layers[0],N=z.layout,J=new et(null,0,!1,!1,!0),ee=N.get("text-allow-overlap"),se=N.get("icon-allow-overlap"),ye=z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"),we=N.get("text-rotation-alignment")==="map",Ie=N.get("text-pitch-alignment")==="map",We=N.get("icon-text-fit")!=="none",at=new et(null,0,ee&&(se||!p.hasIconData()||N.get("icon-optional")),se&&(ee||!p.hasTextData()||N.get("text-optional")),!0);!p.collisionArrays&&P&&(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData())&&p.deserializeCollisionBoxes(P);const st=(ht,it,Vt)=>{for(let ar=0;ar<it/4;ar++)ht.opacityVertexArray.emplaceBack(Vt);ht.hasVisibleVertices=ht.hasVisibleVertices||Vt!==no};for(let ht=0;ht<p.symbolInstances.length;ht++){const it=p.symbolInstances.get(ht),{numHorizontalGlyphVertices:Vt,numVerticalGlyphVertices:ar,crossTileID:_t}=it;let Ht=this.opacities[_t];w[_t]?Ht=J:Ht||(Ht=at,this.opacities[_t]=Ht),w[_t]=!0;const ur=it.numIconVertices>0,hr=this.placedOrientations[it.crossTileID],_r=hr===d.ai.vertical,zr=hr===d.ai.horizontal||hr===d.ai.horizontalOnly;if(Vt>0||ar>0){const Ar=Li(Ht.text);st(p.text,Vt,_r?no:Ar),st(p.text,ar,zr?no:Ar);const Xr=Ht.text.isHidden();[it.rightJustifiedTextSymbolIndex,it.centerJustifiedTextSymbolIndex,it.leftJustifiedTextSymbolIndex].forEach(pn=>{pn>=0&&(p.text.placedSymbolArray.get(pn).hidden=Xr||_r?1:0)}),it.verticalPlacedTextSymbolIndex>=0&&(p.text.placedSymbolArray.get(it.verticalPlacedTextSymbolIndex).hidden=Xr||zr?1:0);const wn=this.variableOffsets[it.crossTileID];wn&&this.markUsedJustification(p,wn.anchor,it,hr);const Bi=this.placedOrientations[it.crossTileID];Bi&&(this.markUsedJustification(p,"left",it,Bi),this.markUsedOrientation(p,Bi,it))}if(ur){const Ar=Li(Ht.icon),Xr=!(We&&it.verticalPlacedIconSymbolIndex&&_r);it.placedIconSymbolIndex>=0&&(st(p.icon,it.numIconVertices,Xr?Ar:no),p.icon.placedSymbolArray.get(it.placedIconSymbolIndex).hidden=Ht.icon.isHidden()),it.verticalPlacedIconSymbolIndex>=0&&(st(p.icon,it.numVerticalIconVertices,Xr?no:Ar),p.icon.placedSymbolArray.get(it.verticalPlacedIconSymbolIndex).hidden=Ht.icon.isHidden())}if(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData()){const Ar=p.collisionArrays[ht];if(Ar){let Xr=new d.P(0,0);if(Ar.textBox||Ar.verticalTextBox){let Bi=!0;if(ye){const pn=this.variableOffsets[_t];pn?(Xr=gr(pn.anchor,pn.width,pn.height,pn.textOffset,pn.textBoxScale),we&&Xr._rotate(Ie?this.transform.angle:-this.transform.angle)):Bi=!1}Ar.textBox&&Gr(p.textCollisionBox.collisionVertexArray,Ht.text.placed,!Bi||_r,Xr.x,Xr.y),Ar.verticalTextBox&&Gr(p.textCollisionBox.collisionVertexArray,Ht.text.placed,!Bi||zr,Xr.x,Xr.y)}const wn=!!(!zr&&Ar.verticalIconBox);Ar.iconBox&&Gr(p.iconCollisionBox.collisionVertexArray,Ht.icon.placed,wn,We?Xr.x:0,We?Xr.y:0),Ar.verticalIconBox&&Gr(p.iconCollisionBox.collisionVertexArray,Ht.icon.placed,!wn,We?Xr.x:0,We?Xr.y:0)}}}if(p.sortFeatures(this.transform.angle),this.retainedQueryData[p.bucketInstanceId]&&(this.retainedQueryData[p.bucketInstanceId].featureSortOrder=p.featureSortOrder),p.hasTextData()&&p.text.opacityVertexBuffer&&p.text.opacityVertexBuffer.updateData(p.text.opacityVertexArray),p.hasIconData()&&p.icon.opacityVertexBuffer&&p.icon.opacityVertexBuffer.updateData(p.icon.opacityVertexArray),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexBuffer&&p.iconCollisionBox.collisionVertexBuffer.updateData(p.iconCollisionBox.collisionVertexArray),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexBuffer&&p.textCollisionBox.collisionVertexBuffer.updateData(p.textCollisionBox.collisionVertexArray),p.text.opacityVertexArray.length!==p.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${p.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${p.text.layoutVertexArray.length}) / 4`);if(p.icon.opacityVertexArray.length!==p.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${p.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${p.icon.layoutVertexArray.length}) / 4`);if(p.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[p.bucketInstanceId];p.placementInvProjMatrix=ht.invProjMatrix,p.placementViewportMatrix=ht.viewportMatrix,p.collisionCircleArray=ht.circles,delete this.collisionCircleArrays[p.bucketInstanceId]}}symbolFadeChange(p){return this.fadeDuration===0?1:(p-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(p){return Math.max(0,(this.transform.zoom-p)/1.5)}hasTransitions(p){return this.stale||p-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(p,w){const P=this.zoomAtLastRecencyCheck===w?1-this.zoomAdjustment(w):1;return this.zoomAtLastRecencyCheck=w,this.commitTime+this.fadeDuration*P>p}setStale(){this.stale=!0}}function Gr(L,p,w,P,z){L.emplaceBack(p?1:0,w?1:0,P||0,z||0),L.emplaceBack(p?1:0,w?1:0,P||0,z||0),L.emplaceBack(p?1:0,w?1:0,P||0,z||0),L.emplaceBack(p?1:0,w?1:0,P||0,z||0)}const Rr=Math.pow(2,25),Cr=Math.pow(2,24),Lr=Math.pow(2,17),cn=Math.pow(2,16),oi=Math.pow(2,9),Sn=Math.pow(2,8),bi=Math.pow(2,1);function Li(L){if(L.opacity===0&&!L.placed)return 0;if(L.opacity===1&&L.placed)return 4294967295;const p=L.placed?1:0,w=Math.floor(127*L.opacity);return w*Rr+p*Cr+w*Lr+p*cn+w*oi+p*Sn+w*bi+p}const no=0;class ba{constructor(p){this._sortAcrossTiles=p.layout.get("symbol-z-order")!=="viewport-y"&&!p.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(p,w,P,z,N){const J=this._bucketParts;for(;this._currentTileIndex<p.length;)if(w.getBucketParts(J,z,p[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,N())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,J.sort((ee,se)=>ee.sortKey-se.sortKey));this._currentPartIndex<J.length;)if(w.placeLayerBucketPart(J[this._currentPartIndex],this._seenCrossTileIDs,P),this._currentPartIndex++,N())return!0;return!1}}class io{constructor(p,w,P,z,N,J,ee,se){this.placement=new Sr(p,w,J,ee,se),this._currentPlacementIndex=P.length-1,this._forceFullPlacement=z,this._showCollisionBoxes=N,this._done=!1}isDone(){return this._done}continuePlacement(p,w,P){const z=d.h.now(),N=()=>!this._forceFullPlacement&&d.h.now()-z>2;for(;this._currentPlacementIndex>=0;){const J=w[p[this._currentPlacementIndex]],ee=this.placement.collisionIndex.transform.zoom;if(J.type==="symbol"&&(!J.minzoom||J.minzoom<=ee)&&(!J.maxzoom||J.maxzoom>ee)){if(this._inProgressLayer||(this._inProgressLayer=new ba(J)),this._inProgressLayer.continuePlacement(P[J.source],this.placement,this._showCollisionBoxes,J,N))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(p){return this.placement.commit(p),this.placement}}const ra=512/d.N/2;class fs{constructor(p,w,P){this.tileID=p,this.bucketInstanceId=P,this._symbolsByKey={};const z=new Map;for(let N=0;N<w.length;N++){const J=w.get(N),ee=J.key,se=z.get(ee);se?se.push(J):z.set(ee,[J])}for(const[N,J]of z){const ee={positions:J.map(se=>({x:Math.floor(se.anchorX*ra),y:Math.floor(se.anchorY*ra)})),crossTileIDs:J.map(se=>se.crossTileID)};if(ee.positions.length>128){const se=new d.av(ee.positions.length,16,Uint16Array);for(const{x:ye,y:we}of ee.positions)se.add(ye,we);se.finish(),delete ee.positions,ee.index=se}this._symbolsByKey[N]=ee}}getScaledCoordinates(p,w){const{x:P,y:z,z:N}=this.tileID.canonical,{x:J,y:ee,z:se}=w.canonical,ye=ra/Math.pow(2,se-N),we=(ee*d.N+p.anchorY)*ye,Ie=z*d.N*ra;return{x:Math.floor((J*d.N+p.anchorX)*ye-P*d.N*ra),y:Math.floor(we-Ie)}}findMatches(p,w,P){const z=this.tileID.canonical.z<w.canonical.z?1:Math.pow(2,this.tileID.canonical.z-w.canonical.z);for(let N=0;N<p.length;N++){const J=p.get(N);if(J.crossTileID)continue;const ee=this._symbolsByKey[J.key];if(!ee)continue;const se=this.getScaledCoordinates(J,w);if(ee.index){const ye=ee.index.range(se.x-z,se.y-z,se.x+z,se.y+z).sort();for(const we of ye){const Ie=ee.crossTileIDs[we];if(!P[Ie]){P[Ie]=!0,J.crossTileID=Ie;break}}}else if(ee.positions)for(let ye=0;ye<ee.positions.length;ye++){const we=ee.positions[ye],Ie=ee.crossTileIDs[ye];if(Math.abs(we.x-se.x)<=z&&Math.abs(we.y-se.y)<=z&&!P[Ie]){P[Ie]=!0,J.crossTileID=Ie;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:p})=>p)}}class Jr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class di{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(p){const w=Math.round((p-this.lng)/360);if(w!==0)for(const P in this.indexes){const z=this.indexes[P],N={};for(const J in z){const ee=z[J];ee.tileID=ee.tileID.unwrapTo(ee.tileID.wrap+w),N[ee.tileID.key]=ee}this.indexes[P]=N}this.lng=p}addBucket(p,w,P){if(this.indexes[p.overscaledZ]&&this.indexes[p.overscaledZ][p.key]){if(this.indexes[p.overscaledZ][p.key].bucketInstanceId===w.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(p.overscaledZ,this.indexes[p.overscaledZ][p.key])}for(let N=0;N<w.symbolInstances.length;N++)w.symbolInstances.get(N).crossTileID=0;this.usedCrossTileIDs[p.overscaledZ]||(this.usedCrossTileIDs[p.overscaledZ]={});const z=this.usedCrossTileIDs[p.overscaledZ];for(const N in this.indexes){const J=this.indexes[N];if(Number(N)>p.overscaledZ)for(const ee in J){const se=J[ee];se.tileID.isChildOf(p)&&se.findMatches(w.symbolInstances,p,z)}else{const ee=J[p.scaledTo(Number(N)).key];ee&&ee.findMatches(w.symbolInstances,p,z)}}for(let N=0;N<w.symbolInstances.length;N++){const J=w.symbolInstances.get(N);J.crossTileID||(J.crossTileID=P.generate(),z[J.crossTileID]=!0)}return this.indexes[p.overscaledZ]===void 0&&(this.indexes[p.overscaledZ]={}),this.indexes[p.overscaledZ][p.key]=new fs(p,w.symbolInstances,w.bucketInstanceId),!0}removeBucketCrossTileIDs(p,w){for(const P of w.getCrossTileIDsLists())for(const z of P)delete this.usedCrossTileIDs[p][z]}removeStaleBuckets(p){let w=!1;for(const P in this.indexes){const z=this.indexes[P];for(const N in z)p[z[N].bucketInstanceId]||(this.removeBucketCrossTileIDs(P,z[N]),delete z[N],w=!0)}return w}}class Ai{constructor(){this.layerIndexes={},this.crossTileIDs=new Jr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(p,w,P){let z=this.layerIndexes[p.id];z===void 0&&(z=this.layerIndexes[p.id]=new di);let N=!1;const J={};z.handleWrapJump(P);for(const ee of w){const se=ee.getBucket(p);se&&p.id===se.layerIds[0]&&(se.bucketInstanceId||(se.bucketInstanceId=++this.maxBucketInstanceId),z.addBucket(ee.tileID,se,this.crossTileIDs)&&(N=!0),J[se.bucketInstanceId]=!0)}return z.removeStaleBuckets(J)&&(N=!0),N}pruneUnusedLayers(p){const w={};p.forEach(P=>{w[P]=!0});for(const P in this.layerIndexes)w[P]||delete this.layerIndexes[P]}}const Ti=(L,p)=>d.x(L,p&&p.filter(w=>w.identifier!=="source.canvas")),Ji=d.F(d.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Xs=d.F(d.ax,["setCenter","setZoom","setBearing","setPitch"]),Ho=d.aw();class ji extends d.E{constructor(p,w={}){super(),this.map=p,this.dispatcher=new rt(br(),this,p._getMapId()),this.imageManager=new Ve,this.imageManager.setEventedParent(this),this.glyphManager=new Le(p._requestManager,w.localIdeographFontFamily),this.lineAtlas=new qe(256,512),this.crossTileSymbolIndex=new Ai,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new d.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",d.az());const P=this;this._rtlTextPluginCallback=ji.registerForPluginStateChange(z=>{P.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},(N,J)=>{if(d.aA(N),J&&J.every(ee=>ee))for(const ee in P.sourceCaches){const se=P.sourceCaches[ee].getSource().type;se!=="vector"&&se!=="geojson"||P.sourceCaches[ee].reload()}})}),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const N=this.sourceCaches[z.sourceId];if(!N)return;const J=N.getSource();if(J&&J.vectorLayerIds)for(const ee in this._layers){const se=this._layers[ee];se.source===J.id&&this._validateLayer(se)}})}loadURL(p,w={},P){this.fire(new d.k("dataloading",{dataType:"style"})),w.validate=typeof w.validate!="boolean"||w.validate;const z=this.map._requestManager.transformRequest(p,G.Style);this._request=d.f(z,(N,J)=>{this._request=null,N?this.fire(new d.j(N)):J&&this._load(J,w,P)})}loadJSON(p,w={},P){this.fire(new d.k("dataloading",{dataType:"style"})),this._request=d.h.frame(()=>{this._request=null,w.validate=w.validate!==!1,this._load(p,w,P)})}loadEmpty(){this.fire(new d.k("dataloading",{dataType:"style"})),this._load(Ho,{validate:!1})}_load(p,w,P){var z;const N=w.transformStyle?w.transformStyle(P,p):p;if(!w.validate||!Ti(this,d.y(N))){this._loaded=!0,this.stylesheet=N;for(const J in N.sources)this.addSource(J,N.sources[J],{validate:!1});N.sprite?this._loadSprite(N.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(N.glyphs),this._createLayers(),this.light=new Ye(this.stylesheet.light),this.map.setTerrain((z=this.stylesheet.terrain)!==null&&z!==void 0?z:null),this.fire(new d.k("data",{dataType:"style"})),this.fire(new d.k("style.load"))}}_createLayers(){const p=d.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",p),this._order=p.map(w=>w.id),this._layers={},this._serializedLayers=null;for(const w of p){const P=d.aC(w);P.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=P}}_loadSprite(p,w=!1,P=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(z,N,J,ee){const se=xe(z),ye=se.length,we=J>1?"@2x":"",Ie={},We={},at={};for(const{id:st,url:ht}of se){const it=N.transformRequest(N.normalizeSpriteURL(ht,we,".json"),G.SpriteJSON),Vt=`${st}_${it.url}`;Ie[Vt]=d.f(it,(Ht,ur)=>{delete Ie[Vt],We[st]=ur,Se(ee,We,at,Ht,ye)});const ar=N.transformRequest(N.normalizeSpriteURL(ht,we,".png"),G.SpriteImage),_t=`${st}_${ar.url}`;Ie[_t]=Q.getImage(ar,(Ht,ur)=>{delete Ie[_t],at[st]=ur,Se(ee,We,at,Ht,ye)})}return{cancel(){for(const st of Object.values(Ie))st.cancel()}}}(p,this.map._requestManager,this.map.getPixelRatio(),(z,N)=>{if(this._spriteRequest=null,z)this.fire(new d.j(z));else if(N)for(const J in N){this._spritesImagesIds[J]=[];const ee=this._spritesImagesIds[J]?this._spritesImagesIds[J].filter(se=>!(se in N)):[];for(const se of ee)this.imageManager.removeImage(se),this._changedImages[se]=!0;for(const se in N[J]){const ye=J==="default"?se:`${J}:${se}`;this._spritesImagesIds[J].push(ye),ye in this.imageManager.images?this.imageManager.updateImage(ye,N[J][se],!1):this.imageManager.addImage(ye,N[J][se]),w&&(this._changedImages[ye]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),w&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"})),P&&P(z)})}_unloadSprite(){for(const p of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(p),this._changedImages[p]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}_validateLayer(p){const w=this.sourceCaches[p.source];if(!w)return;const P=p.sourceLayer;if(!P)return;const z=w.getSource();(z.type==="geojson"||z.vectorLayerIds&&z.vectorLayerIds.indexOf(P)===-1)&&this.fire(new d.j(new Error(`Source layer "${P}" does not exist on source "${z.id}" as specified by style layer "${p.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const p in this.sourceCaches)if(!this.sourceCaches[p].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(p){const w=this._serializedAllLayers();if(!p||p.length===0)return Object.values(w);const P=[];for(const z of p)w[z]&&P.push(w[z]);return P}_serializedAllLayers(){let p=this._serializedLayers;if(p)return p;p=this._serializedLayers={};const w=Object.keys(this._layers);for(const P of w){const z=this._layers[P];z.type!=="custom"&&(p[P]=z.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(p){if(!this._loaded)return;const w=this._changed;if(this._changed){const z=Object.keys(this._updatedLayers),N=Object.keys(this._removedLayers);(z.length||N.length)&&this._updateWorkerLayers(z,N);for(const J in this._updatedSources){const ee=this._updatedSources[J];if(ee==="reload")this._reloadSource(J);else{if(ee!=="clear")throw new Error(`Invalid action ${ee}`);this._clearSource(J)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const J in this._updatedPaintProps)this._layers[J].updateTransitions(p);this.light.updateTransitions(p),this._resetUpdates()}const P={};for(const z in this.sourceCaches){const N=this.sourceCaches[z];P[z]=N.used,N.used=!1}for(const z of this._order){const N=this._layers[z];N.recalculate(p,this._availableImages),!N.isHidden(p.zoom)&&N.source&&(this.sourceCaches[N.source].used=!0)}for(const z in P){const N=this.sourceCaches[z];P[z]!==N.used&&N.fire(new d.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:z}))}this.light.recalculate(p),this.z=p.zoom,w&&this.fire(new d.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const p=Object.keys(this._changedImages);if(p.length){for(const w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],p);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(p,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(p),removedIds:w})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(p,w={}){this._checkLoaded();const P=this.serialize();if(p=w.transformStyle?w.transformStyle(P,p):p,Ti(this,d.y(p)))return!1;(p=d.aD(p)).layers=d.aB(p.layers);const z=d.aE(P,p).filter(J=>!(J.command in Xs));if(z.length===0)return!1;const N=z.filter(J=>!(J.command in Ji));if(N.length>0)throw new Error(`Unimplemented: ${N.map(J=>J.command).join(", ")}.`);for(const J of z)J.command!=="setTransition"&&this[J.command].apply(this,J.args);return this.stylesheet=p,this._serializedLayers=null,!0}addImage(p,w){if(this.getImage(p))return this.fire(new d.j(new Error(`An image named "${p}" already exists.`)));this.imageManager.addImage(p,w),this._afterImageUpdated(p)}updateImage(p,w){this.imageManager.updateImage(p,w)}getImage(p){return this.imageManager.getImage(p)}removeImage(p){if(!this.getImage(p))return this.fire(new d.j(new Error(`An image named "${p}" does not exist.`)));this.imageManager.removeImage(p),this._afterImageUpdated(p)}_afterImageUpdated(p){this._availableImages=this.imageManager.listImages(),this._changedImages[p]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(p,w,P={}){if(this._checkLoaded(),this.sourceCaches[p]!==void 0)throw new Error(`Source "${p}" already exists.`);if(!w.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(w).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(d.y.source,`sources.${p}`,w,null,P))return;this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);const z=this.sourceCaches[p]=new pt(p,w,this.dispatcher);z.style=this,z.setEventedParent(this,()=>({isSourceLoaded:z.loaded(),source:z.serialize(),sourceId:p})),z.onAdd(this.map),this._changed=!0}removeSource(p){if(this._checkLoaded(),this.sourceCaches[p]===void 0)throw new Error("There is no source with this ID");for(const P in this._layers)if(this._layers[P].source===p)return this.fire(new d.j(new Error(`Source "${p}" cannot be removed while layer "${P}" is using it.`)));const w=this.sourceCaches[p];delete this.sourceCaches[p],delete this._updatedSources[p],w.fire(new d.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:p})),w.setEventedParent(null),w.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(p,w){if(this._checkLoaded(),this.sourceCaches[p]===void 0)throw new Error(`There is no source with this ID=${p}`);const P=this.sourceCaches[p].getSource();if(P.type!=="geojson")throw new Error(`geojsonSource.type is ${P.type}, which is !== 'geojson`);P.setData(w),this._changed=!0}getSource(p){return this.sourceCaches[p]&&this.sourceCaches[p].getSource()}addLayer(p,w,P={}){this._checkLoaded();const z=p.id;if(this.getLayer(z))return void this.fire(new d.j(new Error(`Layer "${z}" already exists on this map.`)));let N;if(p.type==="custom"){if(Ti(this,d.aF(p)))return;N=d.aC(p)}else{if("source"in p&&typeof p.source=="object"&&(this.addSource(z,p.source),p=d.aD(p),p=d.e(p,{source:z})),this._validate(d.y.layer,`layers.${z}`,p,{arrayIndex:-1},P))return;N=d.aC(p),this._validateLayer(N),N.setEventedParent(this,{layer:{id:z}})}const J=w?this._order.indexOf(w):this._order.length;if(w&&J===-1)this.fire(new d.j(new Error(`Cannot add layer "${z}" before non-existing layer "${w}".`)));else{if(this._order.splice(J,0,z),this._layerOrderChanged=!0,this._layers[z]=N,this._removedLayers[z]&&N.source&&N.type!=="custom"){const ee=this._removedLayers[z];delete this._removedLayers[z],ee.type!==N.type?this._updatedSources[N.source]="clear":(this._updatedSources[N.source]="reload",this.sourceCaches[N.source].pause())}this._updateLayer(N),N.onAdd&&N.onAdd(this.map)}}moveLayer(p,w){if(this._checkLoaded(),this._changed=!0,!this._layers[p])return void this.fire(new d.j(new Error(`The layer '${p}' does not exist in the map's style and cannot be moved.`)));if(p===w)return;const P=this._order.indexOf(p);this._order.splice(P,1);const z=w?this._order.indexOf(w):this._order.length;w&&z===-1?this.fire(new d.j(new Error(`Cannot move layer "${p}" before non-existing layer "${w}".`))):(this._order.splice(z,0,p),this._layerOrderChanged=!0)}removeLayer(p){this._checkLoaded();const w=this._layers[p];if(!w)return void this.fire(new d.j(new Error(`Cannot remove non-existing layer "${p}".`)));w.setEventedParent(null);const P=this._order.indexOf(p);this._order.splice(P,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[p]=w,delete this._layers[p],this._serializedLayers&&delete this._serializedLayers[p],delete this._updatedLayers[p],delete this._updatedPaintProps[p],w.onRemove&&w.onRemove(this.map)}getLayer(p){return this._layers[p]}getLayersOrder(){return[...this._order]}hasLayer(p){return p in this._layers}setLayerZoomRange(p,w,P){this._checkLoaded();const z=this.getLayer(p);z?z.minzoom===w&&z.maxzoom===P||(w!=null&&(z.minzoom=w),P!=null&&(z.maxzoom=P),this._updateLayer(z)):this.fire(new d.j(new Error(`Cannot set the zoom range of non-existing layer "${p}".`)))}setFilter(p,w,P={}){this._checkLoaded();const z=this.getLayer(p);if(z){if(!d.aG(z.filter,w))return w==null?(z.filter=void 0,void this._updateLayer(z)):void(this._validate(d.y.filter,`layers.${z.id}.filter`,w,null,P)||(z.filter=d.aD(w),this._updateLayer(z)))}else this.fire(new d.j(new Error(`Cannot filter non-existing layer "${p}".`)))}getFilter(p){return d.aD(this.getLayer(p).filter)}setLayoutProperty(p,w,P,z={}){this._checkLoaded();const N=this.getLayer(p);N?d.aG(N.getLayoutProperty(w),P)||(N.setLayoutProperty(w,P,z),this._updateLayer(N)):this.fire(new d.j(new Error(`Cannot style non-existing layer "${p}".`)))}getLayoutProperty(p,w){const P=this.getLayer(p);if(P)return P.getLayoutProperty(w);this.fire(new d.j(new Error(`Cannot get style of non-existing layer "${p}".`)))}setPaintProperty(p,w,P,z={}){this._checkLoaded();const N=this.getLayer(p);N?d.aG(N.getPaintProperty(w),P)||(N.setPaintProperty(w,P,z)&&this._updateLayer(N),this._changed=!0,this._updatedPaintProps[p]=!0):this.fire(new d.j(new Error(`Cannot style non-existing layer "${p}".`)))}getPaintProperty(p,w){return this.getLayer(p).getPaintProperty(w)}setFeatureState(p,w){this._checkLoaded();const P=p.source,z=p.sourceLayer,N=this.sourceCaches[P];if(N===void 0)return void this.fire(new d.j(new Error(`The source '${P}' does not exist in the map's style.`)));const J=N.getSource().type;J==="geojson"&&z?this.fire(new d.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):J!=="vector"||z?(p.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),N.setFeatureState(z,p.id,w)):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(p,w){this._checkLoaded();const P=p.source,z=this.sourceCaches[P];if(z===void 0)return void this.fire(new d.j(new Error(`The source '${P}' does not exist in the map's style.`)));const N=z.getSource().type,J=N==="vector"?p.sourceLayer:void 0;N!=="vector"||J?w&&typeof p.id!="string"&&typeof p.id!="number"?this.fire(new d.j(new Error("A feature id is required to remove its specific state property."))):z.removeFeatureState(J,p.id,w):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(p){this._checkLoaded();const w=p.source,P=p.sourceLayer,z=this.sourceCaches[w];if(z!==void 0)return z.getSource().type!=="vector"||P?(p.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),z.getFeatureState(P,p.id)):void this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new d.j(new Error(`The source '${w}' does not exist in the map's style.`)))}getTransition(){return d.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const p=d.aH(this.sourceCaches,N=>N.serialize()),w=this._serializeByIds(this._order),P=this.map.getTerrain()||void 0,z=this.stylesheet;return d.aI({version:z.version,name:z.name,metadata:z.metadata,light:z.light,center:z.center,zoom:z.zoom,bearing:z.bearing,pitch:z.pitch,sprite:z.sprite,glyphs:z.glyphs,transition:z.transition,sources:p,layers:w,terrain:P},N=>N!==void 0)}_updateLayer(p){this._updatedLayers[p.id]=!0,p.source&&!this._updatedSources[p.source]&&this.sourceCaches[p.source].getSource().type!=="raster"&&(this._updatedSources[p.source]="reload",this.sourceCaches[p.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(p){const w=J=>this._layers[J].type==="fill-extrusion",P={},z=[];for(let J=this._order.length-1;J>=0;J--){const ee=this._order[J];if(w(ee)){P[ee]=J;for(const se of p){const ye=se[ee];if(ye)for(const we of ye)z.push(we)}}}z.sort((J,ee)=>ee.intersectionZ-J.intersectionZ);const N=[];for(let J=this._order.length-1;J>=0;J--){const ee=this._order[J];if(w(ee))for(let se=z.length-1;se>=0;se--){const ye=z[se].feature;if(P[ye.layer.id]<J)break;N.push(ye),z.pop()}else for(const se of p){const ye=se[ee];if(ye)for(const we of ye)N.push(we.feature)}}return N}queryRenderedFeatures(p,w,P){w&&w.filter&&this._validate(d.y.filter,"queryRenderedFeatures.filter",w.filter,null,w);const z={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new d.j(new Error("parameters.layers must be an Array."))),[];for(const ee of w.layers){const se=this._layers[ee];if(!se)return this.fire(new d.j(new Error(`The layer '${ee}' does not exist in the map's style and cannot be queried for features.`))),[];z[se.source]=!0}}const N=[];w.availableImages=this._availableImages;const J=this._serializedAllLayers();for(const ee in this.sourceCaches)w.layers&&!z[ee]||N.push(sr(this.sourceCaches[ee],this._layers,J,p,w,P));return this.placement&&N.push(function(ee,se,ye,we,Ie,We,at){const st={},ht=We.queryRenderedSymbols(we),it=[];for(const Vt of Object.keys(ht).map(Number))it.push(at[Vt]);it.sort(vt);for(const Vt of it){const ar=Vt.featureIndex.lookupSymbolFeatures(ht[Vt.bucketInstanceId],se,Vt.bucketIndex,Vt.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,ee);for(const _t in ar){const Ht=st[_t]=st[_t]||[],ur=ar[_t];ur.sort((hr,_r)=>{const zr=Vt.featureSortOrder;if(zr){const Ar=zr.indexOf(hr.featureIndex);return zr.indexOf(_r.featureIndex)-Ar}return _r.featureIndex-hr.featureIndex});for(const hr of ur)Ht.push(hr)}}for(const Vt in st)st[Vt].forEach(ar=>{const _t=ar.feature,Ht=ye[ee[Vt].source].getFeatureState(_t.layer["source-layer"],_t.id);_t.source=_t.layer.source,_t.layer["source-layer"]&&(_t.sourceLayer=_t.layer["source-layer"]),_t.state=Ht});return st}(this._layers,J,this.sourceCaches,p,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(N)}querySourceFeatures(p,w){w&&w.filter&&this._validate(d.y.filter,"querySourceFeatures.filter",w.filter,null,w);const P=this.sourceCaches[p];return P?function(z,N){const J=z.getRenderableIds().map(ye=>z.getTileByID(ye)),ee=[],se={};for(let ye=0;ye<J.length;ye++){const we=J[ye],Ie=we.tileID.canonical.key;se[Ie]||(se[Ie]=!0,we.querySourceFeatures(ee,N))}return ee}(P,w):[]}addSourceType(p,w,P){return Dt(p)?P(new Error(`A source type called "${p}" already exists.`)):(((z,N)=>{Pt[z]=N})(p,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:p,url:w.workerSourceURL},P):P(null,null))}getLight(){return this.light.getLight()}setLight(p,w={}){this._checkLoaded();const P=this.light.getLight();let z=!1;for(const J in p)if(!d.aG(p[J],P[J])){z=!0;break}if(!z)return;const N={now:d.h.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(p,w),this.light.updateTransitions(N)}_validate(p,w,P,z,N={}){return(!N||N.validate!==!1)&&Ti(this,p.call(d.y,d.e({key:w,style:this.serialize(),value:P,styleSpec:d.v},z)))}_remove(p=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),d.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const w in this._layers)this._layers[w].setEventedParent(null);for(const w in this.sourceCaches){const P=this.sourceCaches[w];P.setEventedParent(null),P.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(p)}_clearSource(p){this.sourceCaches[p].clearTiles()}_reloadSource(p){this.sourceCaches[p].resume(),this.sourceCaches[p].reload()}_updateSources(p){for(const w in this.sourceCaches)this.sourceCaches[w].update(p,this.map.terrain)}_generateCollisionBoxes(){for(const p in this.sourceCaches)this._reloadSource(p)}_updatePlacement(p,w,P,z,N=!1){let J=!1,ee=!1;const se={};for(const ye of this._order){const we=this._layers[ye];if(we.type!=="symbol")continue;if(!se[we.source]){const We=this.sourceCaches[we.source];se[we.source]=We.getRenderableIds(!0).map(at=>We.getTileByID(at)).sort((at,st)=>st.tileID.overscaledZ-at.tileID.overscaledZ||(at.tileID.isLessThan(st.tileID)?-1:1))}const Ie=this.crossTileSymbolIndex.addLayer(we,se[we.source],p.center.lng);J=J||Ie}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((N=N||this._layerOrderChanged||P===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(d.h.now(),p.zoom))&&(this.pauseablePlacement=new io(p,this.map.terrain,this._order,N,w,P,z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,se),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(d.h.now()),ee=!0),J&&this.pauseablePlacement.placement.setStale()),ee||J)for(const ye of this._order){const we=this._layers[ye];we.type==="symbol"&&this.placement.updateLayerOpacities(we,se[we.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(d.h.now())}_releaseSymbolFadeTiles(){for(const p in this.sourceCaches)this.sourceCaches[p].releaseSymbolFadeTiles()}getImages(p,w,P){this.imageManager.getImages(w.icons,P),this._updateTilesForChangedImages();const z=this.sourceCaches[w.source];z&&z.setDependencies(w.tileID.key,w.type,w.icons)}getGlyphs(p,w,P){this.glyphManager.getGlyphs(w.stacks,P);const z=this.sourceCaches[w.source];z&&z.setDependencies(w.tileID.key,w.type,[""])}getResource(p,w,P){return d.m(w,P)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(p,w={}){this._checkLoaded(),p&&this._validate(d.y.glyphs,"glyphs",p,null,w)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=p,this.glyphManager.entries={},this.glyphManager.setURL(p))}addSprite(p,w,P={},z){this._checkLoaded();const N=[{id:p,url:w}],J=[...xe(this.stylesheet.sprite),...N];this._validate(d.y.sprite,"sprite",J,null,P)||(this.stylesheet.sprite=J,this._loadSprite(N,!0,z))}removeSprite(p){this._checkLoaded();const w=xe(this.stylesheet.sprite);if(w.find(P=>P.id===p)){if(this._spritesImagesIds[p])for(const P of this._spritesImagesIds[p])this.imageManager.removeImage(P),this._changedImages[P]=!0;w.splice(w.findIndex(P=>P.id===p),1),this.stylesheet.sprite=w.length>0?w:void 0,delete this._spritesImagesIds[p],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}else this.fire(new d.j(new Error(`Sprite "${p}" doesn't exists on this map.`)))}getSprite(){return xe(this.stylesheet.sprite)}setSprite(p,w={},P){this._checkLoaded(),p&&this._validate(d.y.sprite,"sprite",p,null,w)||(this.stylesheet.sprite=p,p?this._loadSprite(p,!0,P):(this._unloadSprite(),P&&P(null)))}}ji.registerForPluginStateChange=d.aK;var za=d.Q([{name:"a_pos",type:"Int16",components:2}]),jn="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const jr={prelude:un(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:un(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:un(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:un(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:un("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:un(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:un(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:un("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:un("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:un("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:un(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:un(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:un(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:un(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:un(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:un(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:un(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:un(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:un(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:un(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:un(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:un(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:un(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:un(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:un(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:un(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:un("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",jn),terrainDepth:un("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",jn),terrainCoords:un("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",jn)};function un(L,p){const w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,P=p.match(/attribute ([\w]+) ([\w]+)/g),z=L.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),J=N?N.concat(z):z,ee={};return{fragmentSource:L=L.replace(w,(se,ye,we,Ie,We)=>(ee[We]=!0,ye==="define"?`
#ifndef HAS_UNIFORM_u_${We}
varying ${we} ${Ie} ${We};
#else
uniform ${we} ${Ie} u_${We};
#endif
`:`
#ifdef HAS_UNIFORM_u_${We}
    ${we} ${Ie} ${We} = u_${We};
#endif
`)),vertexSource:p=p.replace(w,(se,ye,we,Ie,We)=>{const at=Ie==="float"?"vec2":"vec4",st=We.match(/color/)?"color":at;return ee[We]?ye==="define"?`
#ifndef HAS_UNIFORM_u_${We}
uniform lowp float u_${We}_t;
attribute ${we} ${at} a_${We};
varying ${we} ${Ie} ${We};
#else
uniform ${we} ${Ie} u_${We};
#endif
`:st==="vec4"?`
#ifndef HAS_UNIFORM_u_${We}
    ${We} = a_${We};
#else
    ${we} ${Ie} ${We} = u_${We};
#endif
`:`
#ifndef HAS_UNIFORM_u_${We}
    ${We} = unpack_mix_${st}(a_${We}, u_${We}_t);
#else
    ${we} ${Ie} ${We} = u_${We};
#endif
`:ye==="define"?`
#ifndef HAS_UNIFORM_u_${We}
uniform lowp float u_${We}_t;
attribute ${we} ${at} a_${We};
#else
uniform ${we} ${Ie} u_${We};
#endif
`:st==="vec4"?`
#ifndef HAS_UNIFORM_u_${We}
    ${we} ${Ie} ${We} = a_${We};
#else
    ${we} ${Ie} ${We} = u_${We};
#endif
`:`
#ifndef HAS_UNIFORM_u_${We}
    ${we} ${Ie} ${We} = unpack_mix_${st}(a_${We}, u_${We}_t);
#else
    ${we} ${Ie} ${We} = u_${We};
#endif
`}),staticAttributes:P,staticUniforms:J}}class qn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(p,w,P,z,N,J,ee,se,ye){this.context=p;let we=this.boundPaintVertexBuffers.length!==z.length;for(let Ie=0;!we&&Ie<z.length;Ie++)this.boundPaintVertexBuffers[Ie]!==z[Ie]&&(we=!0);!this.vao||this.boundProgram!==w||this.boundLayoutVertexBuffer!==P||we||this.boundIndexBuffer!==N||this.boundVertexOffset!==J||this.boundDynamicVertexBuffer!==ee||this.boundDynamicVertexBuffer2!==se||this.boundDynamicVertexBuffer3!==ye?this.freshBind(w,P,z,N,J,ee,se,ye):(p.bindVertexArray.set(this.vao),ee&&ee.bind(),N&&N.dynamicDraw&&N.bind(),se&&se.bind(),ye&&ye.bind())}freshBind(p,w,P,z,N,J,ee,se){const ye=p.numAttributes,we=this.context,Ie=we.gl;this.vao&&this.destroy(),this.vao=we.createVertexArray(),we.bindVertexArray.set(this.vao),this.boundProgram=p,this.boundLayoutVertexBuffer=w,this.boundPaintVertexBuffers=P,this.boundIndexBuffer=z,this.boundVertexOffset=N,this.boundDynamicVertexBuffer=J,this.boundDynamicVertexBuffer2=ee,this.boundDynamicVertexBuffer3=se,w.enableAttributes(Ie,p);for(const We of P)We.enableAttributes(Ie,p);J&&J.enableAttributes(Ie,p),ee&&ee.enableAttributes(Ie,p),se&&se.enableAttributes(Ie,p),w.bind(),w.setVertexAttribPointers(Ie,p,N);for(const We of P)We.bind(),We.setVertexAttribPointers(Ie,p,N);J&&(J.bind(),J.setVertexAttribPointers(Ie,p,N)),z&&z.bind(),ee&&(ee.bind(),ee.setVertexAttribPointers(Ie,p,N)),se&&(se.bind(),se.setVertexAttribPointers(Ie,p,N)),we.currentNumAttributes=ye}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function In(L){const p=[];for(let w=0;w<L.length;w++){if(L[w]===null)continue;const P=L[w].split(" ");p.push(P.pop())}return p}class Ci{constructor(p,w,P,z,N,J){const ee=p.gl;this.program=ee.createProgram();const se=In(w.staticAttributes),ye=P?P.getBinderAttributes():[],we=se.concat(ye),Ie=jr.prelude.staticUniforms?In(jr.prelude.staticUniforms):[],We=w.staticUniforms?In(w.staticUniforms):[],at=P?P.getBinderUniforms():[],st=Ie.concat(We).concat(at),ht=[];for(const hr of st)ht.indexOf(hr)<0&&ht.push(hr);const it=P?P.defines():[];N&&it.push("#define OVERDRAW_INSPECTOR;"),J&&it.push("#define TERRAIN3D;");const Vt=it.concat(jr.prelude.fragmentSource,w.fragmentSource).join(`
`),ar=it.concat(jr.prelude.vertexSource,w.vertexSource).join(`
`),_t=ee.createShader(ee.FRAGMENT_SHADER);if(ee.isContextLost())return void(this.failedToCreate=!0);if(ee.shaderSource(_t,Vt),ee.compileShader(_t),!ee.getShaderParameter(_t,ee.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ee.getShaderInfoLog(_t)}`);ee.attachShader(this.program,_t);const Ht=ee.createShader(ee.VERTEX_SHADER);if(ee.isContextLost())return void(this.failedToCreate=!0);if(ee.shaderSource(Ht,ar),ee.compileShader(Ht),!ee.getShaderParameter(Ht,ee.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ee.getShaderInfoLog(Ht)}`);ee.attachShader(this.program,Ht),this.attributes={};const ur={};this.numAttributes=we.length;for(let hr=0;hr<this.numAttributes;hr++)we[hr]&&(ee.bindAttribLocation(this.program,hr,we[hr]),this.attributes[we[hr]]=hr);if(ee.linkProgram(this.program),!ee.getProgramParameter(this.program,ee.LINK_STATUS))throw new Error(`Program failed to link: ${ee.getProgramInfoLog(this.program)}`);ee.deleteShader(Ht),ee.deleteShader(_t);for(let hr=0;hr<ht.length;hr++){const _r=ht[hr];if(_r&&!ur[_r]){const zr=ee.getUniformLocation(this.program,_r);zr&&(ur[_r]=zr)}}this.fixedUniforms=z(p,ur),this.terrainUniforms=((hr,_r)=>({u_depth:new d.aL(hr,_r.u_depth),u_terrain:new d.aL(hr,_r.u_terrain),u_terrain_dim:new d.aM(hr,_r.u_terrain_dim),u_terrain_matrix:new d.aN(hr,_r.u_terrain_matrix),u_terrain_unpack:new d.aO(hr,_r.u_terrain_unpack),u_terrain_exaggeration:new d.aM(hr,_r.u_terrain_exaggeration)}))(p,ur),this.binderUniforms=P?P.getUniforms(p,ur):[]}draw(p,w,P,z,N,J,ee,se,ye,we,Ie,We,at,st,ht,it,Vt,ar){const _t=p.gl;if(this.failedToCreate)return;if(p.program.set(this.program),p.setDepthMode(P),p.setStencilMode(z),p.setColorMode(N),p.setCullFace(J),se){p.activeTexture.set(_t.TEXTURE2),_t.bindTexture(_t.TEXTURE_2D,se.depthTexture),p.activeTexture.set(_t.TEXTURE3),_t.bindTexture(_t.TEXTURE_2D,se.texture);for(const ur in this.terrainUniforms)this.terrainUniforms[ur].set(se[ur])}for(const ur in this.fixedUniforms)this.fixedUniforms[ur].set(ee[ur]);ht&&ht.setUniforms(p,this.binderUniforms,at,{zoom:st});let Ht=0;switch(w){case _t.LINES:Ht=2;break;case _t.TRIANGLES:Ht=3;break;case _t.LINE_STRIP:Ht=1}for(const ur of We.get()){const hr=ur.vaos||(ur.vaos={});(hr[ye]||(hr[ye]=new qn)).bind(p,this,we,ht?ht.getPaintVertexBuffers():[],Ie,ur.vertexOffset,it,Vt,ar),_t.drawElements(w,ur.primitiveLength*Ht,_t.UNSIGNED_SHORT,ur.primitiveOffset*Ht*2)}}}function Qr(L,p,w){const P=1/Ue(w,1,p.transform.tileZoom),z=Math.pow(2,w.tileID.overscaledZ),N=w.tileSize*Math.pow(2,p.transform.tileZoom)/z,J=N*(w.tileID.canonical.x+w.tileID.wrap*z),ee=N*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[P,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[J>>16,ee>>16],u_pixel_coord_lower:[65535&J,65535&ee]}}const Jn=(L,p,w,P)=>{const z=p.style.light,N=z.properties.get("position"),J=[N.x,N.y,N.z],ee=function(){var ye=new d.A(9);return d.A!=Float32Array&&(ye[1]=0,ye[2]=0,ye[3]=0,ye[5]=0,ye[6]=0,ye[7]=0),ye[0]=1,ye[4]=1,ye[8]=1,ye}();z.properties.get("anchor")==="viewport"&&function(ye,we){var Ie=Math.sin(we),We=Math.cos(we);ye[0]=We,ye[1]=Ie,ye[2]=0,ye[3]=-Ie,ye[4]=We,ye[5]=0,ye[6]=0,ye[7]=0,ye[8]=1}(ee,-p.transform.angle),function(ye,we,Ie){var We=we[0],at=we[1],st=we[2];ye[0]=We*Ie[0]+at*Ie[3]+st*Ie[6],ye[1]=We*Ie[1]+at*Ie[4]+st*Ie[7],ye[2]=We*Ie[2]+at*Ie[5]+st*Ie[8]}(J,J,ee);const se=z.properties.get("color");return{u_matrix:L,u_lightpos:J,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+w,u_opacity:P}},Qi=(L,p,w,P,z,N,J)=>d.e(Jn(L,p,w,P),Qr(N,p,J),{u_height_factor:-Math.pow(2,z.overscaledZ)/J.tileSize/8}),Lo=L=>({u_matrix:L}),Go=(L,p,w,P)=>d.e(Lo(L),Qr(w,p,P)),Da=(L,p)=>({u_matrix:L,u_world:p}),fi=(L,p,w,P,z)=>d.e(Go(L,p,w,P),{u_world:z}),gi=(L,p,w,P)=>{const z=L.transform;let N,J;if(P.paint.get("circle-pitch-alignment")==="map"){const ee=Ue(w,1,z.zoom);N=!0,J=[ee,ee]}else N=!1,J=z.pixelsToGLUnits;return{u_camera_to_center_distance:z.cameraToCenterDistance,u_scale_with_map:+(P.paint.get("circle-pitch-scale")==="map"),u_matrix:L.translatePosMatrix(p.posMatrix,w,P.paint.get("circle-translate"),P.paint.get("circle-translate-anchor")),u_pitch_with_map:+N,u_device_pixel_ratio:L.pixelRatio,u_extrude_scale:J}},eo=(L,p,w)=>{const P=Ue(w,1,p.zoom),z=Math.pow(2,p.zoom-w.tileID.overscaledZ),N=w.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:P,u_extrude_scale:[p.pixelsToGLUnits[0]/(P*z),p.pixelsToGLUnits[1]/(P*z)],u_overscale_factor:N}},xo=(L,p,w=1)=>({u_matrix:L,u_color:p,u_overlay:0,u_overlay_scale:w}),Po=L=>({u_matrix:L}),Ha=(L,p,w,P)=>({u_matrix:L,u_extrude_scale:Ue(p,1,w),u_intensity:P});function Ga(L,p){const w=Math.pow(2,p.canonical.z),P=p.canonical.y;return[new d.U(0,P/w).toLngLat().lat,new d.U(0,(P+1)/w).toLngLat().lat]}const qa=(L,p,w,P)=>{const z=L.transform;return{u_matrix:mo(L,p,w,P),u_ratio:1/Ue(p,1,z.zoom),u_device_pixel_ratio:L.pixelRatio,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]]}},zs=(L,p,w,P,z)=>d.e(qa(L,p,w,z),{u_image:0,u_image_height:P}),dl=(L,p,w,P,z)=>{const N=L.transform,J=kn(p,N);return{u_matrix:mo(L,p,w,z),u_texsize:p.imageAtlasTexture.size,u_ratio:1/Ue(p,1,N.zoom),u_device_pixel_ratio:L.pixelRatio,u_image:0,u_scale:[J,P.fromScale,P.toScale],u_fade:P.t,u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]]}},vr=(L,p,w,P,z,N)=>{const J=L.lineAtlas,ee=kn(p,L.transform),se=w.layout.get("line-cap")==="round",ye=J.getDash(P.from,se),we=J.getDash(P.to,se),Ie=ye.width*z.fromScale,We=we.width*z.toScale;return d.e(qa(L,p,w,N),{u_patternscale_a:[ee/Ie,-ye.height/2],u_patternscale_b:[ee/We,-we.height/2],u_sdfgamma:J.width/(256*Math.min(Ie,We)*L.pixelRatio)/2,u_image:0,u_tex_y_a:ye.y,u_tex_y_b:we.y,u_mix:z.t})};function kn(L,p){return 1/Ue(L,1,p.tileZoom)}function mo(L,p,w,P){return L.translatePosMatrix(P?P.posMatrix:p.tileID.posMatrix,p,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}const Lt=(L,p,w,P,z)=>{return{u_matrix:L,u_tl_parent:p,u_scale_parent:w,u_buffer_scale:1,u_fade_t:P.mix,u_opacity:P.opacity*z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:z.paint.get("raster-brightness-min"),u_brightness_high:z.paint.get("raster-brightness-max"),u_saturation_factor:(J=z.paint.get("raster-saturation"),J>0?1-1/(1.001-J):-J),u_contrast_factor:(N=z.paint.get("raster-contrast"),N>0?1/(1-N):1+N),u_spin_weights:Zr(z.paint.get("raster-hue-rotate"))};var N,J};function Zr(L){L*=Math.PI/180;const p=Math.sin(L),w=Math.cos(L);return[(2*w+1)/3,(-Math.sqrt(3)*p-w+1)/3,(Math.sqrt(3)*p-w+1)/3]}const Cn=(L,p,w,P,z,N,J,ee,se,ye)=>{const we=z.transform;return{u_is_size_zoom_constant:+(L==="constant"||L==="source"),u_is_size_feature_constant:+(L==="constant"||L==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:we.cameraToCenterDistance,u_pitch:we.pitch/360*2*Math.PI,u_rotate_symbol:+w,u_aspect_ratio:we.width/we.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_matrix:N,u_label_plane_matrix:J,u_coord_matrix:ee,u_is_text:+se,u_pitch_with_map:+P,u_texsize:ye,u_texture:0}},Wn=(L,p,w,P,z,N,J,ee,se,ye,we)=>{const Ie=z.transform;return d.e(Cn(L,p,w,P,z,N,J,ee,se,ye),{u_gamma_scale:P?Math.cos(Ie._pitch)*Ie.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:+we})},ai=(L,p,w,P,z,N,J,ee,se,ye)=>d.e(Wn(L,p,w,P,z,N,J,ee,!0,se,!0),{u_texsize_icon:ye,u_texture_icon:1}),so=(L,p,w)=>({u_matrix:L,u_opacity:p,u_color:w}),Xi=(L,p,w,P,z,N)=>d.e(function(J,ee,se,ye){const we=se.imageManager.getPattern(J.from.toString()),Ie=se.imageManager.getPattern(J.to.toString()),{width:We,height:at}=se.imageManager.getPixelSize(),st=Math.pow(2,ye.tileID.overscaledZ),ht=ye.tileSize*Math.pow(2,se.transform.tileZoom)/st,it=ht*(ye.tileID.canonical.x+ye.tileID.wrap*st),Vt=ht*ye.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:we.tl,u_pattern_br_a:we.br,u_pattern_tl_b:Ie.tl,u_pattern_br_b:Ie.br,u_texsize:[We,at],u_mix:ee.t,u_pattern_size_a:we.displaySize,u_pattern_size_b:Ie.displaySize,u_scale_a:ee.fromScale,u_scale_b:ee.toScale,u_tile_units_to_pixels:1/Ue(ye,1,se.transform.tileZoom),u_pixel_coord_upper:[it>>16,Vt>>16],u_pixel_coord_lower:[65535&it,65535&Vt]}}(P,N,w,z),{u_matrix:L,u_opacity:p}),as={fillExtrusion:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_lightpos:new d.aP(L,p.u_lightpos),u_lightintensity:new d.aM(L,p.u_lightintensity),u_lightcolor:new d.aP(L,p.u_lightcolor),u_vertical_gradient:new d.aM(L,p.u_vertical_gradient),u_opacity:new d.aM(L,p.u_opacity)}),fillExtrusionPattern:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_lightpos:new d.aP(L,p.u_lightpos),u_lightintensity:new d.aM(L,p.u_lightintensity),u_lightcolor:new d.aP(L,p.u_lightcolor),u_vertical_gradient:new d.aM(L,p.u_vertical_gradient),u_height_factor:new d.aM(L,p.u_height_factor),u_image:new d.aL(L,p.u_image),u_texsize:new d.aQ(L,p.u_texsize),u_pixel_coord_upper:new d.aQ(L,p.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(L,p.u_pixel_coord_lower),u_scale:new d.aP(L,p.u_scale),u_fade:new d.aM(L,p.u_fade),u_opacity:new d.aM(L,p.u_opacity)}),fill:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix)}),fillPattern:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_image:new d.aL(L,p.u_image),u_texsize:new d.aQ(L,p.u_texsize),u_pixel_coord_upper:new d.aQ(L,p.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(L,p.u_pixel_coord_lower),u_scale:new d.aP(L,p.u_scale),u_fade:new d.aM(L,p.u_fade)}),fillOutline:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_world:new d.aQ(L,p.u_world)}),fillOutlinePattern:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_world:new d.aQ(L,p.u_world),u_image:new d.aL(L,p.u_image),u_texsize:new d.aQ(L,p.u_texsize),u_pixel_coord_upper:new d.aQ(L,p.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(L,p.u_pixel_coord_lower),u_scale:new d.aP(L,p.u_scale),u_fade:new d.aM(L,p.u_fade)}),circle:(L,p)=>({u_camera_to_center_distance:new d.aM(L,p.u_camera_to_center_distance),u_scale_with_map:new d.aL(L,p.u_scale_with_map),u_pitch_with_map:new d.aL(L,p.u_pitch_with_map),u_extrude_scale:new d.aQ(L,p.u_extrude_scale),u_device_pixel_ratio:new d.aM(L,p.u_device_pixel_ratio),u_matrix:new d.aN(L,p.u_matrix)}),collisionBox:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_camera_to_center_distance:new d.aM(L,p.u_camera_to_center_distance),u_pixels_to_tile_units:new d.aM(L,p.u_pixels_to_tile_units),u_extrude_scale:new d.aQ(L,p.u_extrude_scale),u_overscale_factor:new d.aM(L,p.u_overscale_factor)}),collisionCircle:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_inv_matrix:new d.aN(L,p.u_inv_matrix),u_camera_to_center_distance:new d.aM(L,p.u_camera_to_center_distance),u_viewport_size:new d.aQ(L,p.u_viewport_size)}),debug:(L,p)=>({u_color:new d.aR(L,p.u_color),u_matrix:new d.aN(L,p.u_matrix),u_overlay:new d.aL(L,p.u_overlay),u_overlay_scale:new d.aM(L,p.u_overlay_scale)}),clippingMask:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix)}),heatmap:(L,p)=>({u_extrude_scale:new d.aM(L,p.u_extrude_scale),u_intensity:new d.aM(L,p.u_intensity),u_matrix:new d.aN(L,p.u_matrix)}),heatmapTexture:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_world:new d.aQ(L,p.u_world),u_image:new d.aL(L,p.u_image),u_color_ramp:new d.aL(L,p.u_color_ramp),u_opacity:new d.aM(L,p.u_opacity)}),hillshade:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_image:new d.aL(L,p.u_image),u_latrange:new d.aQ(L,p.u_latrange),u_light:new d.aQ(L,p.u_light),u_shadow:new d.aR(L,p.u_shadow),u_highlight:new d.aR(L,p.u_highlight),u_accent:new d.aR(L,p.u_accent)}),hillshadePrepare:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_image:new d.aL(L,p.u_image),u_dimension:new d.aQ(L,p.u_dimension),u_zoom:new d.aM(L,p.u_zoom),u_unpack:new d.aO(L,p.u_unpack)}),line:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_ratio:new d.aM(L,p.u_ratio),u_device_pixel_ratio:new d.aM(L,p.u_device_pixel_ratio),u_units_to_pixels:new d.aQ(L,p.u_units_to_pixels)}),lineGradient:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_ratio:new d.aM(L,p.u_ratio),u_device_pixel_ratio:new d.aM(L,p.u_device_pixel_ratio),u_units_to_pixels:new d.aQ(L,p.u_units_to_pixels),u_image:new d.aL(L,p.u_image),u_image_height:new d.aM(L,p.u_image_height)}),linePattern:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_texsize:new d.aQ(L,p.u_texsize),u_ratio:new d.aM(L,p.u_ratio),u_device_pixel_ratio:new d.aM(L,p.u_device_pixel_ratio),u_image:new d.aL(L,p.u_image),u_units_to_pixels:new d.aQ(L,p.u_units_to_pixels),u_scale:new d.aP(L,p.u_scale),u_fade:new d.aM(L,p.u_fade)}),lineSDF:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_ratio:new d.aM(L,p.u_ratio),u_device_pixel_ratio:new d.aM(L,p.u_device_pixel_ratio),u_units_to_pixels:new d.aQ(L,p.u_units_to_pixels),u_patternscale_a:new d.aQ(L,p.u_patternscale_a),u_patternscale_b:new d.aQ(L,p.u_patternscale_b),u_sdfgamma:new d.aM(L,p.u_sdfgamma),u_image:new d.aL(L,p.u_image),u_tex_y_a:new d.aM(L,p.u_tex_y_a),u_tex_y_b:new d.aM(L,p.u_tex_y_b),u_mix:new d.aM(L,p.u_mix)}),raster:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_tl_parent:new d.aQ(L,p.u_tl_parent),u_scale_parent:new d.aM(L,p.u_scale_parent),u_buffer_scale:new d.aM(L,p.u_buffer_scale),u_fade_t:new d.aM(L,p.u_fade_t),u_opacity:new d.aM(L,p.u_opacity),u_image0:new d.aL(L,p.u_image0),u_image1:new d.aL(L,p.u_image1),u_brightness_low:new d.aM(L,p.u_brightness_low),u_brightness_high:new d.aM(L,p.u_brightness_high),u_saturation_factor:new d.aM(L,p.u_saturation_factor),u_contrast_factor:new d.aM(L,p.u_contrast_factor),u_spin_weights:new d.aP(L,p.u_spin_weights)}),symbolIcon:(L,p)=>({u_is_size_zoom_constant:new d.aL(L,p.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aL(L,p.u_is_size_feature_constant),u_size_t:new d.aM(L,p.u_size_t),u_size:new d.aM(L,p.u_size),u_camera_to_center_distance:new d.aM(L,p.u_camera_to_center_distance),u_pitch:new d.aM(L,p.u_pitch),u_rotate_symbol:new d.aL(L,p.u_rotate_symbol),u_aspect_ratio:new d.aM(L,p.u_aspect_ratio),u_fade_change:new d.aM(L,p.u_fade_change),u_matrix:new d.aN(L,p.u_matrix),u_label_plane_matrix:new d.aN(L,p.u_label_plane_matrix),u_coord_matrix:new d.aN(L,p.u_coord_matrix),u_is_text:new d.aL(L,p.u_is_text),u_pitch_with_map:new d.aL(L,p.u_pitch_with_map),u_texsize:new d.aQ(L,p.u_texsize),u_texture:new d.aL(L,p.u_texture)}),symbolSDF:(L,p)=>({u_is_size_zoom_constant:new d.aL(L,p.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aL(L,p.u_is_size_feature_constant),u_size_t:new d.aM(L,p.u_size_t),u_size:new d.aM(L,p.u_size),u_camera_to_center_distance:new d.aM(L,p.u_camera_to_center_distance),u_pitch:new d.aM(L,p.u_pitch),u_rotate_symbol:new d.aL(L,p.u_rotate_symbol),u_aspect_ratio:new d.aM(L,p.u_aspect_ratio),u_fade_change:new d.aM(L,p.u_fade_change),u_matrix:new d.aN(L,p.u_matrix),u_label_plane_matrix:new d.aN(L,p.u_label_plane_matrix),u_coord_matrix:new d.aN(L,p.u_coord_matrix),u_is_text:new d.aL(L,p.u_is_text),u_pitch_with_map:new d.aL(L,p.u_pitch_with_map),u_texsize:new d.aQ(L,p.u_texsize),u_texture:new d.aL(L,p.u_texture),u_gamma_scale:new d.aM(L,p.u_gamma_scale),u_device_pixel_ratio:new d.aM(L,p.u_device_pixel_ratio),u_is_halo:new d.aL(L,p.u_is_halo)}),symbolTextAndIcon:(L,p)=>({u_is_size_zoom_constant:new d.aL(L,p.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aL(L,p.u_is_size_feature_constant),u_size_t:new d.aM(L,p.u_size_t),u_size:new d.aM(L,p.u_size),u_camera_to_center_distance:new d.aM(L,p.u_camera_to_center_distance),u_pitch:new d.aM(L,p.u_pitch),u_rotate_symbol:new d.aL(L,p.u_rotate_symbol),u_aspect_ratio:new d.aM(L,p.u_aspect_ratio),u_fade_change:new d.aM(L,p.u_fade_change),u_matrix:new d.aN(L,p.u_matrix),u_label_plane_matrix:new d.aN(L,p.u_label_plane_matrix),u_coord_matrix:new d.aN(L,p.u_coord_matrix),u_is_text:new d.aL(L,p.u_is_text),u_pitch_with_map:new d.aL(L,p.u_pitch_with_map),u_texsize:new d.aQ(L,p.u_texsize),u_texsize_icon:new d.aQ(L,p.u_texsize_icon),u_texture:new d.aL(L,p.u_texture),u_texture_icon:new d.aL(L,p.u_texture_icon),u_gamma_scale:new d.aM(L,p.u_gamma_scale),u_device_pixel_ratio:new d.aM(L,p.u_device_pixel_ratio),u_is_halo:new d.aL(L,p.u_is_halo)}),background:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_opacity:new d.aM(L,p.u_opacity),u_color:new d.aR(L,p.u_color)}),backgroundPattern:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_opacity:new d.aM(L,p.u_opacity),u_image:new d.aL(L,p.u_image),u_pattern_tl_a:new d.aQ(L,p.u_pattern_tl_a),u_pattern_br_a:new d.aQ(L,p.u_pattern_br_a),u_pattern_tl_b:new d.aQ(L,p.u_pattern_tl_b),u_pattern_br_b:new d.aQ(L,p.u_pattern_br_b),u_texsize:new d.aQ(L,p.u_texsize),u_mix:new d.aM(L,p.u_mix),u_pattern_size_a:new d.aQ(L,p.u_pattern_size_a),u_pattern_size_b:new d.aQ(L,p.u_pattern_size_b),u_scale_a:new d.aM(L,p.u_scale_a),u_scale_b:new d.aM(L,p.u_scale_b),u_pixel_coord_upper:new d.aQ(L,p.u_pixel_coord_upper),u_pixel_coord_lower:new d.aQ(L,p.u_pixel_coord_lower),u_tile_units_to_pixels:new d.aM(L,p.u_tile_units_to_pixels)}),terrain:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_texture:new d.aL(L,p.u_texture),u_ele_delta:new d.aM(L,p.u_ele_delta)}),terrainDepth:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_ele_delta:new d.aM(L,p.u_ele_delta)}),terrainCoords:(L,p)=>({u_matrix:new d.aN(L,p.u_matrix),u_texture:new d.aL(L,p.u_texture),u_terrain_coords_id:new d.aM(L,p.u_terrain_coords_id),u_ele_delta:new d.aM(L,p.u_ele_delta)})};class pc{constructor(p,w,P){this.context=p;const z=p.gl;this.buffer=z.createBuffer(),this.dynamicDraw=!!P,this.context.unbindVAO(),p.bindElementBuffer.set(this.buffer),z.bufferData(z.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(p){const w=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),w.bufferSubData(w.ELEMENT_ARRAY_BUFFER,0,p.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Eu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ys{constructor(p,w,P,z){this.length=w.length,this.attributes=P,this.itemSize=w.bytesPerElement,this.dynamicDraw=z,this.context=p;const N=p.gl;this.buffer=N.createBuffer(),p.bindVertexBuffer.set(this.buffer),N.bufferData(N.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?N.DYNAMIC_DRAW:N.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(p){if(p.length!==this.length)throw new Error(`Length of new data is ${p.length}, which doesn't match current length of ${this.length}`);const w=this.context.gl;this.bind(),w.bufferSubData(w.ARRAY_BUFFER,0,p.arrayBuffer)}enableAttributes(p,w){for(let P=0;P<this.attributes.length;P++){const z=w.attributes[this.attributes[P].name];z!==void 0&&p.enableVertexAttribArray(z)}}setVertexAttribPointers(p,w,P){for(let z=0;z<this.attributes.length;z++){const N=this.attributes[z],J=w.attributes[N.name];J!==void 0&&p.vertexAttribPointer(J,N.components,p[Eu[N.type]],!1,this.itemSize,N.offset+this.itemSize*(P||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Vr=new WeakMap;function si(L){var p;if(Vr.has(L))return Vr.get(L);{const w=(p=L.getParameter(L.VERSION))===null||p===void 0?void 0:p.startsWith("WebGL 2.0");return Vr.set(L,w),w}}class vn{constructor(p){this.gl=p.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(p){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ds extends vn{getDefault(){return d.aT.transparent}set(p){const w=this.current;(p.r!==w.r||p.g!==w.g||p.b!==w.b||p.a!==w.a||this.dirty)&&(this.gl.clearColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)}}class ss extends vn{getDefault(){return 1}set(p){(p!==this.current||this.dirty)&&(this.gl.clearDepth(p),this.current=p,this.dirty=!1)}}class Kn extends vn{getDefault(){return 0}set(p){(p!==this.current||this.dirty)&&(this.gl.clearStencil(p),this.current=p,this.dirty=!1)}}class Wh extends vn{getDefault(){return[!0,!0,!0,!0]}set(p){const w=this.current;(p[0]!==w[0]||p[1]!==w[1]||p[2]!==w[2]||p[3]!==w[3]||this.dirty)&&(this.gl.colorMask(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)}}class Tu extends vn{getDefault(){return!0}set(p){(p!==this.current||this.dirty)&&(this.gl.depthMask(p),this.current=p,this.dirty=!1)}}class Iu extends vn{getDefault(){return 255}set(p){(p!==this.current||this.dirty)&&(this.gl.stencilMask(p),this.current=p,this.dirty=!1)}}class Ss extends vn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(p){const w=this.current;(p.func!==w.func||p.ref!==w.ref||p.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(p.func,p.ref,p.mask),this.current=p,this.dirty=!1)}}class qo extends vn{getDefault(){const p=this.gl;return[p.KEEP,p.KEEP,p.KEEP]}set(p){const w=this.current;(p[0]!==w[0]||p[1]!==w[1]||p[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(p[0],p[1],p[2]),this.current=p,this.dirty=!1)}}class Yf extends vn{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;p?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=p,this.dirty=!1}}class ih extends vn{getDefault(){return[0,1]}set(p){const w=this.current;(p[0]!==w[0]||p[1]!==w[1]||this.dirty)&&(this.gl.depthRange(p[0],p[1]),this.current=p,this.dirty=!1)}}class Gd extends vn{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;p?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=p,this.dirty=!1}}class Mu extends vn{getDefault(){return this.gl.LESS}set(p){(p!==this.current||this.dirty)&&(this.gl.depthFunc(p),this.current=p,this.dirty=!1)}}class Jf extends vn{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;p?w.enable(w.BLEND):w.disable(w.BLEND),this.current=p,this.dirty=!1}}class Wm extends vn{getDefault(){const p=this.gl;return[p.ONE,p.ZERO]}set(p){const w=this.current;(p[0]!==w[0]||p[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(p[0],p[1]),this.current=p,this.dirty=!1)}}class jc extends vn{getDefault(){return d.aT.transparent}set(p){const w=this.current;(p.r!==w.r||p.g!==w.g||p.b!==w.b||p.a!==w.a||this.dirty)&&(this.gl.blendColor(p.r,p.g,p.b,p.a),this.current=p,this.dirty=!1)}}class Km extends vn{getDefault(){return this.gl.FUNC_ADD}set(p){(p!==this.current||this.dirty)&&(this.gl.blendEquation(p),this.current=p,this.dirty=!1)}}class Qf extends vn{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;p?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=p,this.dirty=!1}}class Zm extends vn{getDefault(){return this.gl.BACK}set(p){(p!==this.current||this.dirty)&&(this.gl.cullFace(p),this.current=p,this.dirty=!1)}}class Js extends vn{getDefault(){return this.gl.CCW}set(p){(p!==this.current||this.dirty)&&(this.gl.frontFace(p),this.current=p,this.dirty=!1)}}class Qn extends vn{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}}class Xm extends vn{getDefault(){return this.gl.TEXTURE0}set(p){(p!==this.current||this.dirty)&&(this.gl.activeTexture(p),this.current=p,this.dirty=!1)}}class qd extends vn{getDefault(){const p=this.gl;return[0,0,p.drawingBufferWidth,p.drawingBufferHeight]}set(p){const w=this.current;(p[0]!==w[0]||p[1]!==w[1]||p[2]!==w[2]||p[3]!==w[3]||this.dirty)&&(this.gl.viewport(p[0],p[1],p[2],p[3]),this.current=p,this.dirty=!1)}}class ps extends vn{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,p),this.current=p,this.dirty=!1}}class Qs extends vn{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,p),this.current=p,this.dirty=!1}}class ep extends vn{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;w.bindTexture(w.TEXTURE_2D,p),this.current=p,this.dirty=!1}}class Wl extends vn{getDefault(){return null}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,p),this.current=p,this.dirty=!1}}class fa extends vn{getDefault(){return null}set(p){const w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,p),this.current=p,this.dirty=!1}}class Kh extends vn{getDefault(){return null}set(p){var w;if(p===this.current&&!this.dirty)return;const P=this.gl;si(P)?P.bindVertexArray(p):(w=P.getExtension("OES_vertex_array_object"))===null||w===void 0||w.bindVertexArrayOES(p),this.current=p,this.dirty=!1}}class Wd extends vn{getDefault(){return 4}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,p),this.current=p,this.dirty=!1}}class Kl extends vn{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p),this.current=p,this.dirty=!1}}class wa extends vn{getDefault(){return!1}set(p){if(p===this.current&&!this.dirty)return;const w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,p),this.current=p,this.dirty=!1}}class mc extends vn{constructor(p,w){super(p),this.context=p,this.parent=w}getDefault(){return null}}class Pu extends mc{setDirty(){this.dirty=!0}set(p){if(p===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,p,0),this.current=p,this.dirty=!1}}class gc extends mc{set(p){if(p===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,p),this.current=p,this.dirty=!1}}class oh extends mc{set(p){if(p===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,p),this.current=p,this.dirty=!1}}class Ui{constructor(p,w,P,z,N){this.context=p,this.width=w,this.height=P;const J=p.gl,ee=this.framebuffer=J.createFramebuffer();if(this.colorAttachment=new Pu(p,ee),z)this.depthAttachment=N?new oh(p,ee):new gc(p,ee);else if(N)throw new Error("Stencil cannot be setted without depth");if(J.checkFramebufferStatus(J.FRAMEBUFFER)!==J.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const p=this.context.gl,w=this.colorAttachment.get();if(w&&p.deleteTexture(w),this.depthAttachment){const P=this.depthAttachment.get();P&&p.deleteRenderbuffer(P)}p.deleteFramebuffer(this.framebuffer)}}class Ln{constructor(p,w,P){this.blendFunction=p,this.blendColor=w,this.mask=P}}Ln.Replace=[1,0],Ln.disabled=new Ln(Ln.Replace,d.aT.transparent,[!1,!1,!1,!1]),Ln.unblended=new Ln(Ln.Replace,d.aT.transparent,[!0,!0,!0,!0]),Ln.alphaBlended=new Ln([1,771],d.aT.transparent,[!0,!0,!0,!0]);class A0{constructor(p){var w,P;if(this.gl=p,this.clearColor=new Ds(this),this.clearDepth=new ss(this),this.clearStencil=new Kn(this),this.colorMask=new Wh(this),this.depthMask=new Tu(this),this.stencilMask=new Iu(this),this.stencilFunc=new Ss(this),this.stencilOp=new qo(this),this.stencilTest=new Yf(this),this.depthRange=new ih(this),this.depthTest=new Gd(this),this.depthFunc=new Mu(this),this.blend=new Jf(this),this.blendFunc=new Wm(this),this.blendColor=new jc(this),this.blendEquation=new Km(this),this.cullFace=new Qf(this),this.cullFaceSide=new Zm(this),this.frontFace=new Js(this),this.program=new Qn(this),this.activeTexture=new Xm(this),this.viewport=new qd(this),this.bindFramebuffer=new ps(this),this.bindRenderbuffer=new Qs(this),this.bindTexture=new ep(this),this.bindVertexBuffer=new Wl(this),this.bindElementBuffer=new fa(this),this.bindVertexArray=new Kh(this),this.pixelStoreUnpack=new Wd(this),this.pixelStoreUnpackPremultiplyAlpha=new Kl(this),this.pixelStoreUnpackFlipY=new wa(this),this.extTextureFilterAnisotropic=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=p.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE),si(p)){this.HALF_FLOAT=p.HALF_FLOAT;const z=p.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(w=p.RGBA16F)!==null&&w!==void 0?w:z?.RGBA16F_EXT,this.RGB16F=(P=p.RGB16F)!==null&&P!==void 0?P:z?.RGB16F_EXT,p.getExtension("EXT_color_buffer_float")}else{p.getExtension("EXT_color_buffer_half_float"),p.getExtension("OES_texture_half_float_linear");const z=p.getExtension("OES_texture_half_float");this.HALF_FLOAT=z?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(p,w){return new pc(this,p,w)}createVertexBuffer(p,w,P){return new Ys(this,p,w,P)}createRenderbuffer(p,w,P){const z=this.gl,N=z.createRenderbuffer();return this.bindRenderbuffer.set(N),z.renderbufferStorage(z.RENDERBUFFER,p,w,P),this.bindRenderbuffer.set(null),N}createFramebuffer(p,w,P,z){return new Ui(this,p,w,P,z)}clear({color:p,depth:w,stencil:P}){const z=this.gl;let N=0;p&&(N|=z.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(N|=z.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),P!==void 0&&(N|=z.STENCIL_BUFFER_BIT,this.clearStencil.set(P),this.stencilMask.set(255)),z.clear(N)}setCullFace(p){p.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(p.mode),this.frontFace.set(p.frontFace))}setDepthMode(p){p.func!==this.gl.ALWAYS||p.mask?(this.depthTest.set(!0),this.depthFunc.set(p.func),this.depthMask.set(p.mask),this.depthRange.set(p.range)):this.depthTest.set(!1)}setStencilMode(p){p.test.func!==this.gl.ALWAYS||p.mask?(this.stencilTest.set(!0),this.stencilMask.set(p.mask),this.stencilOp.set([p.fail,p.depthFail,p.pass]),this.stencilFunc.set({func:p.test.func,ref:p.ref,mask:p.test.mask})):this.stencilTest.set(!1)}setColorMode(p){d.aG(p.blendFunction,Ln.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(p.blendFunction),this.blendColor.set(p.blendColor)),this.colorMask.set(p.mask)}createVertexArray(){var p;return si(this.gl)?this.gl.createVertexArray():(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.createVertexArrayOES()}deleteVertexArray(p){var w;return si(this.gl)?this.gl.deleteVertexArray(p):(w=this.gl.getExtension("OES_vertex_array_object"))===null||w===void 0?void 0:w.deleteVertexArrayOES(p)}unbindVAO(){this.bindVertexArray.set(null)}}class $i{constructor(p,w,P){this.func=p,this.mask=w,this.range=P}}$i.ReadOnly=!1,$i.ReadWrite=!0,$i.disabled=new $i(519,$i.ReadOnly,[0,1]);const fl=7680;class na{constructor(p,w,P,z,N,J){this.test=p,this.ref=w,this.mask=P,this.fail=z,this.depthFail=N,this.pass=J}}na.disabled=new na({func:519,mask:0},0,0,fl,fl,fl);class Wo{constructor(p,w,P){this.enable=p,this.mode=w,this.frontFace=P}}let yc;function Zl(L,p,w,P,z,N,J){const ee=L.context,se=ee.gl,ye=L.useProgram("collisionBox"),we=[];let Ie=0,We=0;for(let _t=0;_t<P.length;_t++){const Ht=P[_t],ur=p.getTile(Ht),hr=ur.getBucket(w);if(!hr)continue;let _r=Ht.posMatrix;z[0]===0&&z[1]===0||(_r=L.translatePosMatrix(Ht.posMatrix,ur,z,N));const zr=J?hr.textCollisionBox:hr.iconCollisionBox,Ar=hr.collisionCircleArray;if(Ar.length>0){const Xr=d.Z(),wn=_r;d.aU(Xr,hr.placementInvProjMatrix,L.transform.glCoordMatrix),d.aU(Xr,Xr,hr.placementViewportMatrix),we.push({circleArray:Ar,circleOffset:We,transform:wn,invTransform:Xr,coord:Ht}),Ie+=Ar.length/4,We=Ie}zr&&ye.draw(ee,se.LINES,$i.disabled,na.disabled,L.colorModeForRenderPass(),Wo.disabled,eo(_r,L.transform,ur),L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ht),w.id,zr.layoutVertexBuffer,zr.indexBuffer,zr.segments,null,L.transform.zoom,null,null,zr.collisionVertexBuffer)}if(!J||!we.length)return;const at=L.useProgram("collisionCircle"),st=new d.aV;st.resize(4*Ie),st._trim();let ht=0;for(const _t of we)for(let Ht=0;Ht<_t.circleArray.length/4;Ht++){const ur=4*Ht,hr=_t.circleArray[ur+0],_r=_t.circleArray[ur+1],zr=_t.circleArray[ur+2],Ar=_t.circleArray[ur+3];st.emplace(ht++,hr,_r,zr,Ar,0),st.emplace(ht++,hr,_r,zr,Ar,1),st.emplace(ht++,hr,_r,zr,Ar,2),st.emplace(ht++,hr,_r,zr,Ar,3)}(!yc||yc.length<2*Ie)&&(yc=function(_t){const Ht=2*_t,ur=new d.aX;ur.resize(Ht),ur._trim();for(let hr=0;hr<Ht;hr++){const _r=6*hr;ur.uint16[_r+0]=4*hr+0,ur.uint16[_r+1]=4*hr+1,ur.uint16[_r+2]=4*hr+2,ur.uint16[_r+3]=4*hr+2,ur.uint16[_r+4]=4*hr+3,ur.uint16[_r+5]=4*hr+0}return ur}(Ie));const it=ee.createIndexBuffer(yc,!0),Vt=ee.createVertexBuffer(st,d.aW.members,!0);for(const _t of we){const Ht={u_matrix:_t.transform,u_inv_matrix:_t.invTransform,u_camera_to_center_distance:(ar=L.transform).cameraToCenterDistance,u_viewport_size:[ar.width,ar.height]};at.draw(ee,se.TRIANGLES,$i.disabled,na.disabled,L.colorModeForRenderPass(),Wo.disabled,Ht,L.style.map.terrain&&L.style.map.terrain.getTerrainData(_t.coord),w.id,Vt,it,d.S.simpleSegment(0,2*_t.circleOffset,_t.circleArray.length,_t.circleArray.length/2),null,L.transform.zoom,null,null,null)}var ar;Vt.destroy(),it.destroy()}Wo.disabled=new Wo(!1,1029,2305),Wo.backCCW=new Wo(!0,1029,2305);const Zh=d.ao(new Float32Array(16));function Kd(L,p,w,P,z,N){const{horizontalAlign:J,verticalAlign:ee}=d.au(L);return new d.P((-(J-.5)*p/z+P[0])*N,(-(ee-.5)*w/z+P[1])*N)}function tp(L,p,w,P,z,N,J,ee,se,ye,we){const Ie=L.text.placedSymbolArray,We=L.text.dynamicLayoutVertexArray,at=L.icon.dynamicLayoutVertexArray,st={};We.clear();for(let ht=0;ht<Ie.length;ht++){const it=Ie.get(ht),Vt=it.hidden||!it.crossTileID||L.allowVerticalPlacement&&!it.placedOrientation?null:P[it.crossTileID];if(Vt){const ar=new d.P(it.anchorX,it.anchorY),_t=Fr(ar,w?J:N,we),Ht=en(z.cameraToCenterDistance,_t.signedDistanceFromCamera);let ur=d.aj(L.textSizeData,se,it)*Ht/d.ap;w&&(ur*=L.tilePixelRatio/ee);const{width:hr,height:_r,anchor:zr,textOffset:Ar,textBoxScale:Xr}=Vt,wn=Kd(zr,hr,_r,Ar,Xr,ur),Bi=w?Fr(ar.add(wn),N,we).point:_t.point.add(p?wn.rotate(-z.angle):wn),pn=L.allowVerticalPlacement&&it.placedOrientation===d.ai.vertical?Math.PI/2:0;for(let Hn=0;Hn<it.numGlyphs;Hn++)d.ak(We,Bi,pn);ye&&it.associatedIconIndex>=0&&(st[it.associatedIconIndex]={shiftedAnchor:Bi,angle:pn})}else Te(it.numGlyphs,We)}if(ye){at.clear();const ht=L.icon.placedSymbolArray;for(let it=0;it<ht.length;it++){const Vt=ht.get(it);if(Vt.hidden)Te(Vt.numGlyphs,at);else{const ar=st[it];if(ar)for(let _t=0;_t<Vt.numGlyphs;_t++)d.ak(at,ar.shiftedAnchor,ar.angle);else Te(Vt.numGlyphs,at)}}L.icon.dynamicLayoutVertexBuffer.updateData(at)}L.text.dynamicLayoutVertexBuffer.updateData(We)}function Ym(L,p,w){return w.iconsInText&&p?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Au(L,p,w,P,z,N,J,ee,se,ye,we,Ie){const We=L.context,at=We.gl,st=L.transform,ht=ee==="map",it=se==="map",Vt=ee!=="viewport"&&w.layout.get("symbol-placement")!=="point",ar=ht&&!it&&!Vt,_t=!w.layout.get("symbol-sort-key").isConstant();let Ht=!1;const ur=L.depthModeForSublayer(0,$i.ReadOnly),hr=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),_r=[];for(const zr of P){const Ar=p.getTile(zr),Xr=Ar.getBucket(w);if(!Xr)continue;const wn=z?Xr.text:Xr.icon;if(!wn||!wn.segments.get().length||!wn.hasVisibleVertices)continue;const Bi=wn.programConfigurations.get(w.id),pn=z||Xr.sdfIcons,Hn=z?Xr.textSizeData:Xr.iconSizeData,An=it||st.pitch!==0,lo=L.useProgram(Ym(pn,z,Xr),Bi),Ii=d.ah(Hn,st.zoom),li=L.style.map.terrain&&L.style.map.terrain.getTerrainData(zr);let Ri,bo,wo,La,pa=[0,0],co=null;if(z)bo=Ar.glyphAtlasTexture,wo=at.LINEAR,Ri=Ar.glyphAtlasTexture.size,Xr.iconsInText&&(pa=Ar.imageAtlasTexture.size,co=Ar.imageAtlasTexture,La=An||L.options.rotating||L.options.zooming||Hn.kind==="composite"||Hn.kind==="camera"?at.LINEAR:at.NEAREST);else{const ma=w.layout.get("icon-size").constantOr(0)!==1||Xr.iconsNeedLinear;bo=Ar.imageAtlasTexture,wo=pn||L.options.rotating||L.options.zooming||ma||An?at.LINEAR:at.NEAREST,Ri=Ar.imageAtlasTexture.size}const rl=Ue(Ar,1,L.transform.zoom),Fo=Wt(zr.posMatrix,it,ht,L.transform,rl),Jl=Wr(zr.posMatrix,it,ht,L.transform,rl),Es=hr&&Xr.hasTextData(),Xc=w.layout.get("icon-text-fit")!=="none"&&Es&&Xr.hasIconData();if(Vt){const ma=L.style.map.terrain?(Fs,Xo)=>L.style.map.terrain.getElevation(zr,Fs,Xo):null,Za=w.layout.get("text-rotation-alignment")==="map";fr(Xr,zr.posMatrix,L,z,Fo,Jl,it,ye,Za,ma)}const Sc=L.translatePosMatrix(zr.posMatrix,Ar,N,J),zu=Vt||z&&hr||Xc?Zh:Fo,Ka=L.translatePosMatrix(Jl,Ar,N,J,!0),cs=pn&&w.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ts;Ts=pn?Xr.iconsInText?ai(Hn.kind,Ii,ar,it,L,Sc,zu,Ka,Ri,pa):Wn(Hn.kind,Ii,ar,it,L,Sc,zu,Ka,z,Ri,!0):Cn(Hn.kind,Ii,ar,it,L,Sc,zu,Ka,z,Ri);const kl={program:lo,buffers:wn,uniformValues:Ts,atlasTexture:bo,atlasTextureIcon:co,atlasInterpolation:wo,atlasInterpolationIcon:La,isSDF:pn,hasHalo:cs};if(_t&&Xr.canOverlap){Ht=!0;const ma=wn.segments.get();for(const Za of ma)_r.push({segments:new d.S([Za]),sortKey:Za.sortKey,state:kl,terrainData:li})}else _r.push({segments:wn.segments,sortKey:0,state:kl,terrainData:li})}Ht&&_r.sort((zr,Ar)=>zr.sortKey-Ar.sortKey);for(const zr of _r){const Ar=zr.state;if(We.activeTexture.set(at.TEXTURE0),Ar.atlasTexture.bind(Ar.atlasInterpolation,at.CLAMP_TO_EDGE),Ar.atlasTextureIcon&&(We.activeTexture.set(at.TEXTURE1),Ar.atlasTextureIcon&&Ar.atlasTextureIcon.bind(Ar.atlasInterpolationIcon,at.CLAMP_TO_EDGE)),Ar.isSDF){const Xr=Ar.uniformValues;Ar.hasHalo&&(Xr.u_is_halo=1,ah(Ar.buffers,zr.segments,w,L,Ar.program,ur,we,Ie,Xr,zr.terrainData)),Xr.u_is_halo=0}ah(Ar.buffers,zr.segments,w,L,Ar.program,ur,we,Ie,Ar.uniformValues,zr.terrainData)}}function ah(L,p,w,P,z,N,J,ee,se,ye){const we=P.context;z.draw(we,we.gl.TRIANGLES,N,J,ee,Wo.disabled,se,ye,w.id,L.layoutVertexBuffer,L.indexBuffer,p,w.paint,P.transform.zoom,L.programConfigurations.get(w.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Zd(L,p,w,P,z){if(!w||!P||!P.imageAtlas)return;const N=P.imageAtlas.patternPositions;let J=N[w.to.toString()],ee=N[w.from.toString()];if(!J&&ee&&(J=ee),!ee&&J&&(ee=J),!J||!ee){const se=z.getPaintProperty(p);J=N[se],ee=N[se]}J&&ee&&L.setConstantPatternPositions(J,ee)}function vc(L,p,w,P,z,N,J){const ee=L.context.gl,se="fill-pattern",ye=w.paint.get(se),we=ye&&ye.constantOr(1),Ie=w.getCrossfadeParameters();let We,at,st,ht,it;J?(at=we&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",We=ee.LINES):(at=we?"fillPattern":"fill",We=ee.TRIANGLES);const Vt=ye.constantOr(null);for(const ar of P){const _t=p.getTile(ar);if(we&&!_t.patternsLoaded())continue;const Ht=_t.getBucket(w);if(!Ht)continue;const ur=Ht.programConfigurations.get(w.id),hr=L.useProgram(at,ur),_r=L.style.map.terrain&&L.style.map.terrain.getTerrainData(ar);we&&(L.context.activeTexture.set(ee.TEXTURE0),_t.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),ur.updatePaintBuffers(Ie)),Zd(ur,se,Vt,_t,w);const zr=_r?ar:null,Ar=L.translatePosMatrix(zr?zr.posMatrix:ar.posMatrix,_t,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(J){ht=Ht.indexBuffer2,it=Ht.segments2;const Xr=[ee.drawingBufferWidth,ee.drawingBufferHeight];st=at==="fillOutlinePattern"&&we?fi(Ar,L,Ie,_t,Xr):Da(Ar,Xr)}else ht=Ht.indexBuffer,it=Ht.segments,st=we?Go(Ar,L,Ie,_t):Lo(Ar);hr.draw(L.context,We,z,L.stencilModeForClipping(ar),N,Wo.disabled,st,_r,w.id,Ht.layoutVertexBuffer,ht,it,w.paint,L.transform.zoom,ur)}}function Xh(L,p,w,P,z,N,J){const ee=L.context,se=ee.gl,ye="fill-extrusion-pattern",we=w.paint.get(ye),Ie=we.constantOr(1),We=w.getCrossfadeParameters(),at=w.paint.get("fill-extrusion-opacity"),st=we.constantOr(null);for(const ht of P){const it=p.getTile(ht),Vt=it.getBucket(w);if(!Vt)continue;const ar=L.style.map.terrain&&L.style.map.terrain.getTerrainData(ht),_t=Vt.programConfigurations.get(w.id),Ht=L.useProgram(Ie?"fillExtrusionPattern":"fillExtrusion",_t);Ie&&(L.context.activeTexture.set(se.TEXTURE0),it.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),_t.updatePaintBuffers(We)),Zd(_t,ye,st,it,w);const ur=L.translatePosMatrix(ht.posMatrix,it,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),hr=w.paint.get("fill-extrusion-vertical-gradient"),_r=Ie?Qi(ur,L,hr,at,ht,We,it):Jn(ur,L,hr,at);Ht.draw(ee,ee.gl.TRIANGLES,z,N,J,Wo.backCCW,_r,ar,w.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,w.paint,L.transform.zoom,_t,L.style.map.terrain&&Vt.centroidVertexBuffer)}}function rp(L,p,w,P,z,N,J){const ee=L.context,se=ee.gl,ye=w.fbo;if(!ye)return;const we=L.useProgram("hillshade"),Ie=L.style.map.terrain&&L.style.map.terrain.getTerrainData(p);ee.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,ye.colorAttachment.get()),we.draw(ee,se.TRIANGLES,z,N,J,Wo.disabled,((We,at,st,ht)=>{const it=st.paint.get("hillshade-shadow-color"),Vt=st.paint.get("hillshade-highlight-color"),ar=st.paint.get("hillshade-accent-color");let _t=st.paint.get("hillshade-illumination-direction")*(Math.PI/180);st.paint.get("hillshade-illumination-anchor")==="viewport"&&(_t-=We.transform.angle);const Ht=!We.options.moving;return{u_matrix:ht?ht.posMatrix:We.transform.calculatePosMatrix(at.tileID.toUnwrapped(),Ht),u_image:0,u_latrange:Ga(0,at.tileID),u_light:[st.paint.get("hillshade-exaggeration"),_t],u_shadow:it,u_highlight:Vt,u_accent:ar}})(L,w,P,Ie?p:null),Ie,P.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}function _c(L,p,w,P,z,N){const J=L.context,ee=J.gl,se=p.dem;if(se&&se.data){const ye=se.dim,we=se.stride,Ie=se.getPixels();if(J.activeTexture.set(ee.TEXTURE1),J.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||L.getTileTexture(we),p.demTexture){const at=p.demTexture;at.update(Ie,{premultiply:!1}),at.bind(ee.NEAREST,ee.CLAMP_TO_EDGE)}else p.demTexture=new oe(J,Ie,ee.RGBA,{premultiply:!1}),p.demTexture.bind(ee.NEAREST,ee.CLAMP_TO_EDGE);J.activeTexture.set(ee.TEXTURE0);let We=p.fbo;if(!We){const at=new oe(J,{width:ye,height:ye,data:null},ee.RGBA);at.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),We=p.fbo=J.createFramebuffer(ye,ye,!0,!1),We.colorAttachment.set(at.texture)}J.bindFramebuffer.set(We.framebuffer),J.viewport.set([0,0,ye,ye]),L.useProgram("hillshadePrepare").draw(J,ee.TRIANGLES,P,z,N,Wo.disabled,((at,st)=>{const ht=st.stride,it=d.Z();return d.aS(it,0,d.N,-d.N,0,0,1),d.$(it,it,[0,-d.N,0]),{u_matrix:it,u_image:1,u_dimension:[ht,ht],u_zoom:at.overscaledZ,u_unpack:st.getUnpackVector()}})(p.tileID,se),null,w.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function R0(L,p,w,P,z,N){const J=P.paint.get("raster-fade-duration");if(!N&&J>0){const ee=d.h.now(),se=(ee-L.timeAdded)/J,ye=p?(ee-p.timeAdded)/J:-1,we=w.getSource(),Ie=z.coveringZoomLevel({tileSize:we.tileSize,roundZoom:we.roundZoom}),We=!p||Math.abs(p.tileID.overscaledZ-Ie)>Math.abs(L.tileID.overscaledZ-Ie),at=We&&L.refreshedUponExpiration?1:d.ad(We?se:1-ye,0,1);return L.refreshedUponExpiration&&se>=1&&(L.refreshedUponExpiration=!1),p?{opacity:1,mix:1-at}:{opacity:at,mix:0}}return{opacity:1,mix:0}}const ky=new d.aT(1,0,0,1),np=new d.aT(0,1,0,1),ip=new d.aT(0,0,1,1),Oy=new d.aT(1,0,1,1),op=new d.aT(0,1,1,1);function Yh(L,p,w,P){Yd(L,0,p+w/2,L.transform.width,w,P)}function Xd(L,p,w,P){Yd(L,p-w/2,0,w,L.transform.height,P)}function Yd(L,p,w,P,z,N){const J=L.context,ee=J.gl;ee.enable(ee.SCISSOR_TEST),ee.scissor(p*L.pixelRatio,w*L.pixelRatio,P*L.pixelRatio,z*L.pixelRatio),J.clear({color:N}),ee.disable(ee.SCISSOR_TEST)}function Jm(L,p,w){const P=L.context,z=P.gl,N=w.posMatrix,J=L.useProgram("debug"),ee=$i.disabled,se=na.disabled,ye=L.colorModeForRenderPass(),we="$debug",Ie=L.style.map.terrain&&L.style.map.terrain.getTerrainData(w);P.activeTexture.set(z.TEXTURE0);const We=p.getTileByID(w.key).latestRawTileData,at=Math.floor((We&&We.byteLength||0)/1024),st=p.getTile(w).tileSize,ht=512/Math.min(st,512)*(w.overscaledZ/L.transform.zoom)*.5;let it=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(it+=` => ${w.overscaledZ}`),function(Vt,ar){Vt.initDebugOverlayCanvas();const _t=Vt.debugOverlayCanvas,Ht=Vt.context.gl,ur=Vt.debugOverlayCanvas.getContext("2d");ur.clearRect(0,0,_t.width,_t.height),ur.shadowColor="white",ur.shadowBlur=2,ur.lineWidth=1.5,ur.strokeStyle="white",ur.textBaseline="top",ur.font="bold 36px Open Sans, sans-serif",ur.fillText(ar,5,5),ur.strokeText(ar,5,5),Vt.debugOverlayTexture.update(_t),Vt.debugOverlayTexture.bind(Ht.LINEAR,Ht.CLAMP_TO_EDGE)}(L,`${it} ${at}kB`),J.draw(P,z.TRIANGLES,ee,se,Ln.alphaBlended,Wo.disabled,xo(N,d.aT.transparent,ht),null,we,L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments),J.draw(P,z.LINE_STRIP,ee,se,ye,Wo.disabled,xo(N,d.aT.red),Ie,we,L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments)}function $o(L,p,w){const P=L.context,z=P.gl,N=L.colorModeForRenderPass(),J=new $i(z.LEQUAL,$i.ReadWrite,L.depthRangeFor3D),ee=L.useProgram("terrain"),se=p.getTerrainMesh();P.bindFramebuffer.set(null),P.viewport.set([0,0,L.width,L.height]);for(const ye of w){const we=L.renderToTexture.getTexture(ye),Ie=p.getTerrainData(ye.tileID);P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,we.texture);const We={u_matrix:L.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_texture:0,u_ele_delta:p.getMeshFrameDelta(L.transform.zoom)};ee.draw(P,z.TRIANGLES,J,na.disabled,N,Wo.backCCW,We,Ie,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}}class Vc{constructor(p,w){this.context=new A0(p),this.transform=w,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:d.Z(),renderTime:0},this.setup(),this.numSublayers=pt.maxUnderzooming+pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ai}resize(p,w,P){if(this.width=Math.floor(p*P),this.height=Math.floor(w*P),this.pixelRatio=P,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const z of this.style._order)this.style._layers[z].resize()}setup(){const p=this.context,w=new d.a_;w.emplaceBack(0,0),w.emplaceBack(d.N,0),w.emplaceBack(0,d.N),w.emplaceBack(d.N,d.N),this.tileExtentBuffer=p.createVertexBuffer(w,za.members),this.tileExtentSegments=d.S.simpleSegment(0,0,4,2);const P=new d.a_;P.emplaceBack(0,0),P.emplaceBack(d.N,0),P.emplaceBack(0,d.N),P.emplaceBack(d.N,d.N),this.debugBuffer=p.createVertexBuffer(P,za.members),this.debugSegments=d.S.simpleSegment(0,0,4,5);const z=new d.V;z.emplaceBack(0,0,0,0),z.emplaceBack(d.N,0,d.N,0),z.emplaceBack(0,d.N,0,d.N),z.emplaceBack(d.N,d.N,d.N,d.N),this.rasterBoundsBuffer=p.createVertexBuffer(z,kt.members),this.rasterBoundsSegments=d.S.simpleSegment(0,0,4,2);const N=new d.a_;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=p.createVertexBuffer(N,za.members),this.viewportSegments=d.S.simpleSegment(0,0,4,2);const J=new d.a$;J.emplaceBack(0),J.emplaceBack(1),J.emplaceBack(3),J.emplaceBack(2),J.emplaceBack(0),this.tileBorderIndexBuffer=p.createIndexBuffer(J);const ee=new d.b0;ee.emplaceBack(0,1,2),ee.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=p.createIndexBuffer(ee);const se=this.context.gl;this.stencilClearMode=new na({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO)}clearStencil(){const p=this.context,w=p.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const P=d.Z();d.aS(P,0,this.width,this.height,0,0,1),d.a0(P,P,[w.drawingBufferWidth,w.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(p,w.TRIANGLES,$i.disabled,this.stencilClearMode,Ln.disabled,Wo.disabled,Po(P),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(p,w){if(this.currentStencilSource===p.source||!p.isTileClipped()||!w||!w.length)return;this.currentStencilSource=p.source;const P=this.context,z=P.gl;this.nextStencilID+w.length>256&&this.clearStencil(),P.setColorMode(Ln.disabled),P.setDepthMode($i.disabled);const N=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const J of w){const ee=this._tileClippingMaskIDs[J.key]=this.nextStencilID++,se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(J);N.draw(P,z.TRIANGLES,$i.disabled,new na({func:z.ALWAYS,mask:0},ee,255,z.KEEP,z.KEEP,z.REPLACE),Ln.disabled,Wo.disabled,Po(J.posMatrix),se,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const p=this.nextStencilID++,w=this.context.gl;return new na({func:w.NOTEQUAL,mask:255},p,255,w.KEEP,w.KEEP,w.REPLACE)}stencilModeForClipping(p){const w=this.context.gl;return new na({func:w.EQUAL,mask:255},this._tileClippingMaskIDs[p.key],0,w.KEEP,w.KEEP,w.REPLACE)}stencilConfigForOverlap(p){const w=this.context.gl,P=p.sort((J,ee)=>ee.overscaledZ-J.overscaledZ),z=P[P.length-1].overscaledZ,N=P[0].overscaledZ-z+1;if(N>1){this.currentStencilSource=void 0,this.nextStencilID+N>256&&this.clearStencil();const J={};for(let ee=0;ee<N;ee++)J[ee+z]=new na({func:w.GEQUAL,mask:255},ee+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=N,[J,P]}return[{[z]:na.disabled},P]}colorModeForRenderPass(){const p=this.context.gl;return this._showOverdrawInspector?new Ln([p.CONSTANT_COLOR,p.ONE],new d.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ln.unblended:Ln.alphaBlended}depthModeForSublayer(p,w,P){if(!this.opaquePassEnabledForLayer())return $i.disabled;const z=1-((1+this.currentLayer)*this.numSublayers+p)*this.depthEpsilon;return new $i(P||this.context.gl.LEQUAL,w,[z,z])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(p,w){this.style=p,this.options=w,this.lineAtlas=p.lineAtlas,this.imageManager=p.imageManager,this.glyphManager=p.glyphManager,this.symbolFadeChange=p.placement.symbolFadeChange(d.h.now()),this.imageManager.beginFrame();const P=this.style._order,z=this.style.sourceCaches,N={},J={},ee={};for(const se in z){const ye=z[se];ye.used&&ye.prepare(this.context),N[se]=ye.getVisibleCoordinates(),J[se]=N[se].slice().reverse(),ee[se]=ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let se=0;se<P.length;se++)if(this.style._layers[P[se]].is3D()){this.opaquePassCutoff=se;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const se=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!d.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||se.length)&&(d.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ye,we){const Ie=ye.context,We=Ie.gl,at=Ln.unblended,st=new $i(We.LEQUAL,$i.ReadWrite,[0,1]),ht=we.getTerrainMesh(),it=we.sourceCache.getRenderableTiles(),Vt=ye.useProgram("terrainDepth");Ie.bindFramebuffer.set(we.getFramebuffer("depth").framebuffer),Ie.viewport.set([0,0,ye.width/devicePixelRatio,ye.height/devicePixelRatio]),Ie.clear({color:d.aT.transparent,depth:1});for(const ar of it){const _t=we.getTerrainData(ar.tileID),Ht={u_matrix:ye.transform.calculatePosMatrix(ar.tileID.toUnwrapped()),u_ele_delta:we.getMeshFrameDelta(ye.transform.zoom)};Vt.draw(Ie,We.TRIANGLES,st,na.disabled,at,Wo.backCCW,Ht,_t,"terrain",ht.vertexBuffer,ht.indexBuffer,ht.segments)}Ie.bindFramebuffer.set(null),Ie.viewport.set([0,0,ye.width,ye.height])}(this,this.style.map.terrain),function(ye,we){const Ie=ye.context,We=Ie.gl,at=Ln.unblended,st=new $i(We.LEQUAL,$i.ReadWrite,[0,1]),ht=we.getTerrainMesh(),it=we.getCoordsTexture(),Vt=we.sourceCache.getRenderableTiles(),ar=ye.useProgram("terrainCoords");Ie.bindFramebuffer.set(we.getFramebuffer("coords").framebuffer),Ie.viewport.set([0,0,ye.width/devicePixelRatio,ye.height/devicePixelRatio]),Ie.clear({color:d.aT.transparent,depth:1}),we.coordsIndex=[];for(const _t of Vt){const Ht=we.getTerrainData(_t.tileID);Ie.activeTexture.set(We.TEXTURE0),We.bindTexture(We.TEXTURE_2D,it.texture);const ur={u_matrix:ye.transform.calculatePosMatrix(_t.tileID.toUnwrapped()),u_terrain_coords_id:(255-we.coordsIndex.length)/255,u_texture:0,u_ele_delta:we.getMeshFrameDelta(ye.transform.zoom)};ar.draw(Ie,We.TRIANGLES,st,na.disabled,at,Wo.backCCW,ur,Ht,"terrain",ht.vertexBuffer,ht.indexBuffer,ht.segments),we.coordsIndex.push(_t.tileID.key)}Ie.bindFramebuffer.set(null),Ie.viewport.set([0,0,ye.width,ye.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const se of P){const ye=this.style._layers[se];if(!ye.hasOffscreenPass()||ye.isHidden(this.transform.zoom))continue;const we=J[ye.source];(ye.type==="custom"||we.length)&&this.renderLayer(this,z[ye.source],ye,we)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:w.showOverdrawInspector?d.aT.black:d.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=w.showOverdrawInspector,this.depthRangeFor3D=[0,1-(p._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=P.length-1;this.currentLayer>=0;this.currentLayer--){const se=this.style._layers[P[this.currentLayer]],ye=z[se.source],we=N[se.source];this._renderTileClippingMasks(se,we),this.renderLayer(this,ye,se,we)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<P.length;this.currentLayer++){const se=this.style._layers[P[this.currentLayer]],ye=z[se.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(se))continue;const we=(se.type==="symbol"?ee:J)[se.source];this._renderTileClippingMasks(se,N[se.source]),this.renderLayer(this,ye,se,we)}if(this.options.showTileBoundaries){const se=function(ye,we){let Ie=null;const We=Object.values(ye._layers).flatMap(it=>it.source&&!it.isHidden(we)?[ye.sourceCaches[it.source]]:[]),at=We.filter(it=>it.getSource().type==="vector"),st=We.filter(it=>it.getSource().type!=="vector"),ht=it=>{(!Ie||Ie.getSource().maxzoom<it.getSource().maxzoom)&&(Ie=it)};return at.forEach(it=>ht(it)),Ie||st.forEach(it=>ht(it)),Ie}(this.style,this.transform.zoom);se&&function(ye,we,Ie){for(let We=0;We<Ie.length;We++)Jm(ye,we,Ie[We])}(this,se,se.getVisibleCoordinates())}this.options.showPadding&&function(se){const ye=se.transform.padding;Yh(se,se.transform.height-(ye.top||0),3,ky),Yh(se,ye.bottom||0,3,np),Xd(se,ye.left||0,3,ip),Xd(se,se.transform.width-(ye.right||0),3,Oy);const we=se.transform.centerPoint;(function(Ie,We,at,st){Yd(Ie,We-1,at-10,2,20,st),Yd(Ie,We-10,at-1,20,2,st)})(se,we.x,se.transform.height-we.y,op)}(this),this.context.setDefault()}renderLayer(p,w,P,z){if(!P.isHidden(this.transform.zoom)&&(P.type==="background"||P.type==="custom"||(z||[]).length))switch(this.id=P.id,P.type){case"symbol":(function(N,J,ee,se,ye){if(N.renderPass!=="translucent")return;const we=na.disabled,Ie=N.colorModeForRenderPass();(ee._unevaluatedLayout.hasValue("text-variable-anchor")||ee._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(We,at,st,ht,it,Vt,ar){const _t=at.transform,Ht=it==="map",ur=Vt==="map";for(const hr of We){const _r=ht.getTile(hr),zr=_r.getBucket(st);if(!zr||!zr.text||!zr.text.segments.get().length)continue;const Ar=d.ah(zr.textSizeData,_t.zoom),Xr=Ue(_r,1,at.transform.zoom),wn=Wt(hr.posMatrix,ur,Ht,at.transform,Xr),Bi=st.layout.get("icon-text-fit")!=="none"&&zr.hasIconData();if(Ar){const pn=Math.pow(2,_t.zoom-_r.tileID.overscaledZ);tp(zr,Ht,ur,ar,_t,wn,hr.posMatrix,pn,Ar,Bi,at.style.map.terrain?(Hn,An)=>at.style.map.terrain.getElevation(hr,Hn,An):null)}}}(se,N,ee,J,ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ye),ee.paint.get("icon-opacity").constantOr(1)!==0&&Au(N,J,ee,se,!1,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),ee.layout.get("icon-rotation-alignment"),ee.layout.get("icon-pitch-alignment"),ee.layout.get("icon-keep-upright"),we,Ie),ee.paint.get("text-opacity").constantOr(1)!==0&&Au(N,J,ee,se,!0,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.layout.get("text-keep-upright"),we,Ie),J.map.showCollisionBoxes&&(Zl(N,J,ee,se,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),!0),Zl(N,J,ee,se,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),!1))})(p,w,P,z,this.style.placement.variableOffsets);break;case"circle":(function(N,J,ee,se){if(N.renderPass!=="translucent")return;const ye=ee.paint.get("circle-opacity"),we=ee.paint.get("circle-stroke-width"),Ie=ee.paint.get("circle-stroke-opacity"),We=!ee.layout.get("circle-sort-key").isConstant();if(ye.constantOr(1)===0&&(we.constantOr(1)===0||Ie.constantOr(1)===0))return;const at=N.context,st=at.gl,ht=N.depthModeForSublayer(0,$i.ReadOnly),it=na.disabled,Vt=N.colorModeForRenderPass(),ar=[];for(let _t=0;_t<se.length;_t++){const Ht=se[_t],ur=J.getTile(Ht),hr=ur.getBucket(ee);if(!hr)continue;const _r=hr.programConfigurations.get(ee.id),zr=N.useProgram("circle",_r),Ar=hr.layoutVertexBuffer,Xr=hr.indexBuffer,wn=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Ht),Bi={programConfiguration:_r,program:zr,layoutVertexBuffer:Ar,indexBuffer:Xr,uniformValues:gi(N,Ht,ur,ee),terrainData:wn};if(We){const pn=hr.segments.get();for(const Hn of pn)ar.push({segments:new d.S([Hn]),sortKey:Hn.sortKey,state:Bi})}else ar.push({segments:hr.segments,sortKey:0,state:Bi})}We&&ar.sort((_t,Ht)=>_t.sortKey-Ht.sortKey);for(const _t of ar){const{programConfiguration:Ht,program:ur,layoutVertexBuffer:hr,indexBuffer:_r,uniformValues:zr,terrainData:Ar}=_t.state;ur.draw(at,st.TRIANGLES,ht,it,Vt,Wo.disabled,zr,Ar,ee.id,hr,_r,_t.segments,ee.paint,N.transform.zoom,Ht)}})(p,w,P,z);break;case"heatmap":(function(N,J,ee,se){if(ee.paint.get("heatmap-opacity")!==0)if(N.renderPass==="offscreen"){const ye=N.context,we=ye.gl,Ie=na.disabled,We=new Ln([we.ONE,we.ONE],d.aT.transparent,[!0,!0,!0,!0]);(function(at,st,ht){const it=at.gl;at.activeTexture.set(it.TEXTURE1),at.viewport.set([0,0,st.width/4,st.height/4]);let Vt=ht.heatmapFbo;if(Vt)it.bindTexture(it.TEXTURE_2D,Vt.colorAttachment.get()),at.bindFramebuffer.set(Vt.framebuffer);else{const ar=it.createTexture();it.bindTexture(it.TEXTURE_2D,ar),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_S,it.CLAMP_TO_EDGE),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_T,it.CLAMP_TO_EDGE),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MIN_FILTER,it.LINEAR),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MAG_FILTER,it.LINEAR),Vt=ht.heatmapFbo=at.createFramebuffer(st.width/4,st.height/4,!1,!1),function(_t,Ht,ur,hr){var _r,zr;const Ar=_t.gl,Xr=(_r=_t.HALF_FLOAT)!==null&&_r!==void 0?_r:Ar.UNSIGNED_BYTE,wn=(zr=_t.RGBA16F)!==null&&zr!==void 0?zr:Ar.RGBA;Ar.texImage2D(Ar.TEXTURE_2D,0,wn,Ht.width/4,Ht.height/4,0,Ar.RGBA,Xr,null),hr.colorAttachment.set(ur)}(at,st,ar,Vt)}})(ye,N,ee),ye.clear({color:d.aT.transparent});for(let at=0;at<se.length;at++){const st=se[at];if(J.hasRenderableParent(st))continue;const ht=J.getTile(st),it=ht.getBucket(ee);if(!it)continue;const Vt=it.programConfigurations.get(ee.id),ar=N.useProgram("heatmap",Vt),{zoom:_t}=N.transform;ar.draw(ye,we.TRIANGLES,$i.disabled,Ie,We,Wo.disabled,Ha(st.posMatrix,ht,_t,ee.paint.get("heatmap-intensity")),null,ee.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,ee.paint,N.transform.zoom,Vt)}ye.viewport.set([0,0,N.width,N.height])}else N.renderPass==="translucent"&&(N.context.setColorMode(N.colorModeForRenderPass()),function(ye,we){const Ie=ye.context,We=Ie.gl,at=we.heatmapFbo;if(!at)return;Ie.activeTexture.set(We.TEXTURE0),We.bindTexture(We.TEXTURE_2D,at.colorAttachment.get()),Ie.activeTexture.set(We.TEXTURE1);let st=we.colorRampTexture;st||(st=we.colorRampTexture=new oe(Ie,we.colorRamp,We.RGBA)),st.bind(We.LINEAR,We.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(Ie,We.TRIANGLES,$i.disabled,na.disabled,ye.colorModeForRenderPass(),Wo.disabled,((ht,it,Vt,ar)=>{const _t=d.Z();d.aS(_t,0,ht.width,ht.height,0,0,1);const Ht=ht.context.gl;return{u_matrix:_t,u_world:[Ht.drawingBufferWidth,Ht.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:it.paint.get("heatmap-opacity")}})(ye,we),null,we.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,we.paint,ye.transform.zoom)}(N,ee))})(p,w,P,z);break;case"line":(function(N,J,ee,se){if(N.renderPass!=="translucent")return;const ye=ee.paint.get("line-opacity"),we=ee.paint.get("line-width");if(ye.constantOr(1)===0||we.constantOr(1)===0)return;const Ie=N.depthModeForSublayer(0,$i.ReadOnly),We=N.colorModeForRenderPass(),at=ee.paint.get("line-dasharray"),st=ee.paint.get("line-pattern"),ht=st.constantOr(1),it=ee.paint.get("line-gradient"),Vt=ee.getCrossfadeParameters(),ar=ht?"linePattern":at?"lineSDF":it?"lineGradient":"line",_t=N.context,Ht=_t.gl;let ur=!0;for(const hr of se){const _r=J.getTile(hr);if(ht&&!_r.patternsLoaded())continue;const zr=_r.getBucket(ee);if(!zr)continue;const Ar=zr.programConfigurations.get(ee.id),Xr=N.context.program.get(),wn=N.useProgram(ar,Ar),Bi=ur||wn.program!==Xr,pn=N.style.map.terrain&&N.style.map.terrain.getTerrainData(hr),Hn=st.constantOr(null);if(Hn&&_r.imageAtlas){const Ii=_r.imageAtlas,li=Ii.patternPositions[Hn.to.toString()],Ri=Ii.patternPositions[Hn.from.toString()];li&&Ri&&Ar.setConstantPatternPositions(li,Ri)}const An=pn?hr:null,lo=ht?dl(N,_r,ee,Vt,An):at?vr(N,_r,ee,at,Vt,An):it?zs(N,_r,ee,zr.lineClipsArray.length,An):qa(N,_r,ee,An);if(ht)_t.activeTexture.set(Ht.TEXTURE0),_r.imageAtlasTexture.bind(Ht.LINEAR,Ht.CLAMP_TO_EDGE),Ar.updatePaintBuffers(Vt);else if(at&&(Bi||N.lineAtlas.dirty))_t.activeTexture.set(Ht.TEXTURE0),N.lineAtlas.bind(_t);else if(it){const Ii=zr.gradients[ee.id];let li=Ii.texture;if(ee.gradientVersion!==Ii.version){let Ri=256;if(ee.stepInterpolant){const bo=J.getSource().maxzoom,wo=hr.canonical.z===bo?Math.ceil(1<<N.transform.maxZoom-hr.canonical.z):1;Ri=d.ad(d.aY(zr.maxLineLength/d.N*1024*wo),256,_t.maxTextureSize)}Ii.gradient=d.aZ({expression:ee.gradientExpression(),evaluationKey:"lineProgress",resolution:Ri,image:Ii.gradient||void 0,clips:zr.lineClipsArray}),Ii.texture?Ii.texture.update(Ii.gradient):Ii.texture=new oe(_t,Ii.gradient,Ht.RGBA),Ii.version=ee.gradientVersion,li=Ii.texture}_t.activeTexture.set(Ht.TEXTURE0),li.bind(ee.stepInterpolant?Ht.NEAREST:Ht.LINEAR,Ht.CLAMP_TO_EDGE)}wn.draw(_t,Ht.TRIANGLES,Ie,N.stencilModeForClipping(hr),We,Wo.disabled,lo,pn,ee.id,zr.layoutVertexBuffer,zr.indexBuffer,zr.segments,ee.paint,N.transform.zoom,Ar,zr.layoutVertexBuffer2),ur=!1}})(p,w,P,z);break;case"fill":(function(N,J,ee,se){const ye=ee.paint.get("fill-color"),we=ee.paint.get("fill-opacity");if(we.constantOr(1)===0)return;const Ie=N.colorModeForRenderPass(),We=ee.paint.get("fill-pattern"),at=N.opaquePassEnabledForLayer()&&!We.constantOr(1)&&ye.constantOr(d.aT.transparent).a===1&&we.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===at){const st=N.depthModeForSublayer(1,N.renderPass==="opaque"?$i.ReadWrite:$i.ReadOnly);vc(N,J,ee,se,st,Ie,!1)}if(N.renderPass==="translucent"&&ee.paint.get("fill-antialias")){const st=N.depthModeForSublayer(ee.getPaintProperty("fill-outline-color")?2:0,$i.ReadOnly);vc(N,J,ee,se,st,Ie,!0)}})(p,w,P,z);break;case"fill-extrusion":(function(N,J,ee,se){const ye=ee.paint.get("fill-extrusion-opacity");if(ye!==0&&N.renderPass==="translucent"){const we=new $i(N.context.gl.LEQUAL,$i.ReadWrite,N.depthRangeFor3D);if(ye!==1||ee.paint.get("fill-extrusion-pattern").constantOr(1))Xh(N,J,ee,se,we,na.disabled,Ln.disabled),Xh(N,J,ee,se,we,N.stencilModeFor3D(),N.colorModeForRenderPass());else{const Ie=N.colorModeForRenderPass();Xh(N,J,ee,se,we,na.disabled,Ie)}}})(p,w,P,z);break;case"hillshade":(function(N,J,ee,se){if(N.renderPass!=="offscreen"&&N.renderPass!=="translucent")return;const ye=N.context,we=N.depthModeForSublayer(0,$i.ReadOnly),Ie=N.colorModeForRenderPass(),[We,at]=N.renderPass==="translucent"?N.stencilConfigForOverlap(se):[{},se];for(const st of at){const ht=J.getTile(st);ht.needsHillshadePrepare!==void 0&&ht.needsHillshadePrepare&&N.renderPass==="offscreen"?_c(N,ht,ee,we,na.disabled,Ie):N.renderPass==="translucent"&&rp(N,st,ht,ee,we,We[st.overscaledZ],Ie)}ye.viewport.set([0,0,N.width,N.height])})(p,w,P,z);break;case"raster":(function(N,J,ee,se){if(N.renderPass!=="translucent"||ee.paint.get("raster-opacity")===0||!se.length)return;const ye=N.context,we=ye.gl,Ie=J.getSource(),We=N.useProgram("raster"),at=N.colorModeForRenderPass(),[st,ht]=Ie instanceof zt?[{},se]:N.stencilConfigForOverlap(se),it=ht[ht.length-1].overscaledZ,Vt=!N.options.moving;for(const ar of ht){const _t=N.depthModeForSublayer(ar.overscaledZ-it,ee.paint.get("raster-opacity")===1?$i.ReadWrite:$i.ReadOnly,we.LESS),Ht=J.getTile(ar);Ht.registerFadeDuration(ee.paint.get("raster-fade-duration"));const ur=J.findLoadedParent(ar,0),hr=R0(Ht,ur,J,ee,N.transform,N.style.map.terrain);let _r,zr;const Ar=ee.paint.get("raster-resampling")==="nearest"?we.NEAREST:we.LINEAR;ye.activeTexture.set(we.TEXTURE0),Ht.texture.bind(Ar,we.CLAMP_TO_EDGE,we.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(we.TEXTURE1),ur?(ur.texture.bind(Ar,we.CLAMP_TO_EDGE,we.LINEAR_MIPMAP_NEAREST),_r=Math.pow(2,ur.tileID.overscaledZ-Ht.tileID.overscaledZ),zr=[Ht.tileID.canonical.x*_r%1,Ht.tileID.canonical.y*_r%1]):Ht.texture.bind(Ar,we.CLAMP_TO_EDGE,we.LINEAR_MIPMAP_NEAREST);const Xr=N.style.map.terrain&&N.style.map.terrain.getTerrainData(ar),wn=Xr?ar:null,Bi=wn?wn.posMatrix:N.transform.calculatePosMatrix(ar.toUnwrapped(),Vt),pn=Lt(Bi,zr||[0,0],_r||1,hr,ee);Ie instanceof zt?We.draw(ye,we.TRIANGLES,_t,na.disabled,at,Wo.disabled,pn,Xr,ee.id,Ie.boundsBuffer,N.quadTriangleIndexBuffer,Ie.boundsSegments):We.draw(ye,we.TRIANGLES,_t,st[ar.overscaledZ],at,Wo.disabled,pn,Xr,ee.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}})(p,w,P,z);break;case"background":(function(N,J,ee,se){const ye=ee.paint.get("background-color"),we=ee.paint.get("background-opacity");if(we===0)return;const Ie=N.context,We=Ie.gl,at=N.transform,st=at.tileSize,ht=ee.paint.get("background-pattern");if(N.isPatternMissing(ht))return;const it=!ht&&ye.a===1&&we===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass!==it)return;const Vt=na.disabled,ar=N.depthModeForSublayer(0,it==="opaque"?$i.ReadWrite:$i.ReadOnly),_t=N.colorModeForRenderPass(),Ht=N.useProgram(ht?"backgroundPattern":"background"),ur=se||at.coveringTiles({tileSize:st,terrain:N.style.map.terrain});ht&&(Ie.activeTexture.set(We.TEXTURE0),N.imageManager.bind(N.context));const hr=ee.getCrossfadeParameters();for(const _r of ur){const zr=se?_r.posMatrix:N.transform.calculatePosMatrix(_r.toUnwrapped()),Ar=ht?Xi(zr,we,N,ht,{tileID:_r,tileSize:st},hr):so(zr,we,ye),Xr=N.style.map.terrain&&N.style.map.terrain.getTerrainData(_r);Ht.draw(Ie,We.TRIANGLES,ar,Vt,_t,Wo.disabled,Ar,Xr,ee.id,N.tileExtentBuffer,N.quadTriangleIndexBuffer,N.tileExtentSegments)}})(p,0,P,z);break;case"custom":(function(N,J,ee){const se=N.context,ye=ee.implementation;if(N.renderPass==="offscreen"){const we=ye.prerender;we&&(N.setCustomLayerDefaults(),se.setColorMode(N.colorModeForRenderPass()),we.call(ye,se.gl,N.transform.customLayerMatrix()),se.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),se.setColorMode(N.colorModeForRenderPass()),se.setStencilMode(na.disabled);const we=ye.renderingMode==="3d"?new $i(N.context.gl.LEQUAL,$i.ReadWrite,N.depthRangeFor3D):N.depthModeForSublayer(0,$i.ReadOnly);se.setDepthMode(we),ye.render(se.gl,N.transform.customLayerMatrix()),se.setDirty(),N.setBaseState(),se.bindFramebuffer.set(null)}})(p,0,P)}}translatePosMatrix(p,w,P,z,N){if(!P[0]&&!P[1])return p;const J=N?z==="map"?this.transform.angle:0:z==="viewport"?-this.transform.angle:0;if(J){const ye=Math.sin(J),we=Math.cos(J);P=[P[0]*we-P[1]*ye,P[0]*ye+P[1]*we]}const ee=[N?P[0]:Ue(w,P[0],this.transform.zoom),N?P[1]:Ue(w,P[1],this.transform.zoom),0],se=new Float32Array(16);return d.$(se,p,ee),se}saveTileTexture(p){const w=this._tileTextures[p.size[0]];w?w.push(p):this._tileTextures[p.size[0]]=[p]}getTileTexture(p){const w=this._tileTextures[p];return w&&w.length>0?w.pop():null}isPatternMissing(p){if(!p)return!1;if(!p.from||!p.to)return!0;const w=this.imageManager.getPattern(p.from.toString()),P=this.imageManager.getPattern(p.to.toString());return!w||!P}useProgram(p,w){this.cache=this.cache||{};const P=p+(w?w.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[P]||(this.cache[P]=new Ci(this.context,jr[p],w,as[p],this._showOverdrawInspector,this.style.map.terrain)),this.cache[P]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const p=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(p.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:p,drawingBufferHeight:w}=this.context.gl;return this.width!==p||this.height!==w}}class Ls{constructor(p,w){this.points=p,this.planes=w}static fromInvProjectionMatrix(p,w,P){const z=Math.pow(2,P),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ee=>{const se=1/(ee=d.ag([],ee,p))[3]/w*z;return d.b3(ee,ee,[se,se,1/ee[3],se])}),J=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ee=>{const se=function(We,at){var st=at[0],ht=at[1],it=at[2],Vt=st*st+ht*ht+it*it;return Vt>0&&(Vt=1/Math.sqrt(Vt)),We[0]=at[0]*Vt,We[1]=at[1]*Vt,We[2]=at[2]*Vt,We}([],function(We,at,st){var ht=at[0],it=at[1],Vt=at[2],ar=st[0],_t=st[1],Ht=st[2];return We[0]=it*Ht-Vt*_t,We[1]=Vt*ar-ht*Ht,We[2]=ht*_t-it*ar,We}([],me([],N[ee[0]],N[ee[1]]),me([],N[ee[2]],N[ee[1]]))),ye=-((we=se)[0]*(Ie=N[ee[1]])[0]+we[1]*Ie[1]+we[2]*Ie[2]);var we,Ie;return se.concat(ye)});return new Ls(N,J)}}class Ru{constructor(p,w){this.min=p,this.max=w,this.center=function(P,z,N){return P[0]=.5*z[0],P[1]=.5*z[1],P[2]=.5*z[2],P}([],function(P,z,N){return P[0]=z[0]+N[0],P[1]=z[1]+N[1],P[2]=z[2]+N[2],P}([],this.min,this.max))}quadrant(p){const w=[p%2==0,p<2],P=re(this.min),z=re(this.max);for(let N=0;N<w.length;N++)P[N]=w[N]?this.min[N]:this.center[N],z[N]=w[N]?this.center[N]:this.max[N];return z[2]=this.max[2],new Ru(P,z)}distanceX(p){return Math.max(Math.min(this.max[0],p[0]),this.min[0])-p[0]}distanceY(p){return Math.max(Math.min(this.max[1],p[1]),this.min[1])-p[1]}intersects(p){const w=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let P=!0;for(let z=0;z<p.planes.length;z++){const N=p.planes[z];let J=0;for(let ee=0;ee<w.length;ee++)d.b4(N,w[ee])>=0&&J++;if(J===0)return 0;J!==w.length&&(P=!1)}if(P)return 2;for(let z=0;z<3;z++){let N=Number.MAX_VALUE,J=-Number.MAX_VALUE;for(let ee=0;ee<p.points.length;ee++){const se=p.points[ee][z]-this.min[z];N=Math.min(N,se),J=Math.max(J,se)}if(J<0||N>this.max[z]-this.min[z])return 0}return 1}}class Jh{constructor(p=0,w=0,P=0,z=0){if(isNaN(p)||p<0||isNaN(w)||w<0||isNaN(P)||P<0||isNaN(z)||z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=p,this.bottom=w,this.left=P,this.right=z}interpolate(p,w,P){return w.top!=null&&p.top!=null&&(this.top=d.B.number(p.top,w.top,P)),w.bottom!=null&&p.bottom!=null&&(this.bottom=d.B.number(p.bottom,w.bottom,P)),w.left!=null&&p.left!=null&&(this.left=d.B.number(p.left,w.left,P)),w.right!=null&&p.right!=null&&(this.right=d.B.number(p.right,w.right,P)),this}getCenter(p,w){const P=d.ad((this.left+p-this.right)/2,0,p),z=d.ad((this.top+w-this.bottom)/2,0,w);return new d.P(P,z)}equals(p){return this.top===p.top&&this.bottom===p.bottom&&this.left===p.left&&this.right===p.right}clone(){return new Jh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Qh{constructor(p,w,P,z,N){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=N===void 0||!!N,this._minZoom=p||0,this._maxZoom=w||22,this._minPitch=P??0,this._maxPitch=z??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new d.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Jh,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const p=new Qh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return p.apply(this),p}apply(p){this.tileSize=p.tileSize,this.latRange=p.latRange,this.width=p.width,this.height=p.height,this._center=p._center,this._elevation=p._elevation,this._minEleveationForCurrentTile=p._minEleveationForCurrentTile,this.zoom=p.zoom,this.angle=p.angle,this._fov=p._fov,this._pitch=p._pitch,this._unmodified=p._unmodified,this._edgeInsets=p._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(p){this._minZoom!==p&&(this._minZoom=p,this.zoom=Math.max(this.zoom,p))}get maxZoom(){return this._maxZoom}set maxZoom(p){this._maxZoom!==p&&(this._maxZoom=p,this.zoom=Math.min(this.zoom,p))}get minPitch(){return this._minPitch}set minPitch(p){this._minPitch!==p&&(this._minPitch=p,this.pitch=Math.max(this.pitch,p))}get maxPitch(){return this._maxPitch}set maxPitch(p){this._maxPitch!==p&&(this._maxPitch=p,this.pitch=Math.min(this.pitch,p))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(p){p===void 0?p=!0:p===null&&(p=!1),this._renderWorldCopies=p}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new d.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(p){const w=-d.b5(p,-180,180)*Math.PI/180;this.angle!==w&&(this._unmodified=!1,this.angle=w,this._calcMatrices(),this.rotationMatrix=function(){var P=new d.A(4);return d.A!=Float32Array&&(P[1]=0,P[2]=0),P[0]=1,P[3]=1,P}(),function(P,z,N){var J=z[0],ee=z[1],se=z[2],ye=z[3],we=Math.sin(N),Ie=Math.cos(N);P[0]=J*Ie+se*we,P[1]=ee*Ie+ye*we,P[2]=J*-we+se*Ie,P[3]=ee*-we+ye*Ie}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(p){const w=d.ad(p,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==w&&(this._unmodified=!1,this._pitch=w,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(p){p=Math.max(.01,Math.min(60,p)),this._fov!==p&&(this._unmodified=!1,this._fov=p/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(p){const w=Math.min(Math.max(p,this.minZoom),this.maxZoom);this._zoom!==w&&(this._unmodified=!1,this._zoom=w,this.tileZoom=Math.max(0,Math.floor(w)),this.scale=this.zoomScale(w),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(p){p.lat===this._center.lat&&p.lng===this._center.lng||(this._unmodified=!1,this._center=p,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(p){p!==this._elevation&&(this._elevation=p,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(p){this._edgeInsets.equals(p)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,p,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(p){return this._edgeInsets.equals(p)}interpolatePadding(p,w,P){this._unmodified=!1,this._edgeInsets.interpolate(p,w,P),this._constrain(),this._calcMatrices()}coveringZoomLevel(p){const w=(p.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/p.tileSize));return Math.max(0,w)}getVisibleUnwrappedCoordinates(p){const w=[new d.b6(0,p)];if(this._renderWorldCopies){const P=this.pointCoordinate(new d.P(0,0)),z=this.pointCoordinate(new d.P(this.width,0)),N=this.pointCoordinate(new d.P(this.width,this.height)),J=this.pointCoordinate(new d.P(0,this.height)),ee=Math.floor(Math.min(P.x,z.x,N.x,J.x)),se=Math.floor(Math.max(P.x,z.x,N.x,J.x)),ye=1;for(let we=ee-ye;we<=se+ye;we++)we!==0&&w.push(new d.b6(we,p))}return w}coveringTiles(p){var w,P;let z=this.coveringZoomLevel(p);const N=z;if(p.minzoom!==void 0&&z<p.minzoom)return[];p.maxzoom!==void 0&&z>p.maxzoom&&(z=p.maxzoom);const J=this.pointCoordinate(this.getCameraPoint()),ee=d.U.fromLngLat(this.center),se=Math.pow(2,z),ye=[se*J.x,se*J.y,0],we=[se*ee.x,se*ee.y,0],Ie=Ls.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z);let We=p.minzoom||0;!p.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(We=z);const at=p.terrain?2/Math.min(this.tileSize,p.tileSize)*this.tileSize:3,st=_t=>({aabb:new Ru([_t*se,0,0],[(_t+1)*se,se,0]),zoom:0,x:0,y:0,wrap:_t,fullyVisible:!1}),ht=[],it=[],Vt=z,ar=p.reparseOverscaled?N:z;if(this._renderWorldCopies)for(let _t=1;_t<=3;_t++)ht.push(st(-_t)),ht.push(st(_t));for(ht.push(st(0));ht.length>0;){const _t=ht.pop(),Ht=_t.x,ur=_t.y;let hr=_t.fullyVisible;if(!hr){const wn=_t.aabb.intersects(Ie);if(wn===0)continue;hr=wn===2}const _r=p.terrain?ye:we,zr=_t.aabb.distanceX(_r),Ar=_t.aabb.distanceY(_r),Xr=Math.max(Math.abs(zr),Math.abs(Ar));if(_t.zoom===Vt||Xr>at+(1<<Vt-_t.zoom)-2&&_t.zoom>=We){const wn=Vt-_t.zoom,Bi=ye[0]-.5-(Ht<<wn),pn=ye[1]-.5-(ur<<wn);it.push({tileID:new d.O(_t.zoom===Vt?ar:_t.zoom,_t.wrap,_t.zoom,Ht,ur),distanceSq:pe([we[0]-.5-Ht,we[1]-.5-ur]),tileDistanceToCamera:Math.sqrt(Bi*Bi+pn*pn)})}else for(let wn=0;wn<4;wn++){const Bi=(Ht<<1)+wn%2,pn=(ur<<1)+(wn>>1),Hn=_t.zoom+1;let An=_t.aabb.quadrant(wn);if(p.terrain){const lo=new d.O(Hn,_t.wrap,Hn,Bi,pn),Ii=p.terrain.getMinMaxElevation(lo),li=(w=Ii.minElevation)!==null&&w!==void 0?w:this.elevation,Ri=(P=Ii.maxElevation)!==null&&P!==void 0?P:this.elevation;An=new Ru([An.min[0],An.min[1],li],[An.max[0],An.max[1],Ri])}ht.push({aabb:An,zoom:Hn,x:Bi,y:pn,wrap:_t.wrap,fullyVisible:hr})}}return it.sort((_t,Ht)=>_t.distanceSq-Ht.distanceSq).map(_t=>_t.tileID)}resize(p,w){this.width=p,this.height=w,this.pixelsToGLUnits=[2/p,-2/w],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(p){return Math.pow(2,p)}scaleZoom(p){return Math.log(p)/Math.LN2}project(p){const w=d.ad(p.lat,-this.maxValidLatitude,this.maxValidLatitude);return new d.P(d.G(p.lng)*this.worldSize,d.H(w)*this.worldSize)}unproject(p){return new d.U(p.x/this.worldSize,p.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(p){const w=this.pointLocation(this.centerPoint,p),P=p.getElevationForLngLatZoom(w,this.tileZoom);if(!(this.elevation-P))return;const z=this.getCameraPosition(),N=d.U.fromLngLat(z.lngLat,z.altitude),J=d.U.fromLngLat(w,P),ee=N.x-J.x,se=N.y-J.y,ye=N.z-J.z,we=Math.sqrt(ee*ee+se*se+ye*ye),Ie=this.scaleZoom(this.cameraToCenterDistance/we/this.tileSize);this._elevation=P,this._center=w,this.zoom=Ie}setLocationAtPoint(p,w){const P=this.pointCoordinate(w),z=this.pointCoordinate(this.centerPoint),N=this.locationCoordinate(p),J=new d.U(N.x-(P.x-z.x),N.y-(P.y-z.y));this.center=this.coordinateLocation(J),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(p,w){return w?this.coordinatePoint(this.locationCoordinate(p),w.getElevationForLngLatZoom(p,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(p))}pointLocation(p,w){return this.coordinateLocation(this.pointCoordinate(p,w))}locationCoordinate(p){return d.U.fromLngLat(p)}coordinateLocation(p){return p&&p.toLngLat()}pointCoordinate(p,w){if(w){const We=w.pointCoordinate(p);if(We!=null)return We}const P=[p.x,p.y,0,1],z=[p.x,p.y,1,1];d.ag(P,P,this.pixelMatrixInverse),d.ag(z,z,this.pixelMatrixInverse);const N=P[3],J=z[3],ee=P[1]/N,se=z[1]/J,ye=P[2]/N,we=z[2]/J,Ie=ye===we?0:(0-ye)/(we-ye);return new d.U(d.B.number(P[0]/N,z[0]/J,Ie)/this.worldSize,d.B.number(ee,se,Ie)/this.worldSize)}coordinatePoint(p,w=0,P=this.pixelMatrix){const z=[p.x*this.worldSize,p.y*this.worldSize,w,1];return d.ag(z,z,P),new d.P(z[0]/z[3],z[1]/z[3])}getBounds(){const p=Math.max(0,this.height/2-this.getHorizon());return new St().extend(this.pointLocation(new d.P(0,p))).extend(this.pointLocation(new d.P(this.width,p))).extend(this.pointLocation(new d.P(this.width,this.height))).extend(this.pointLocation(new d.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new St([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(p){p?(this.lngRange=[p.getWest(),p.getEast()],this.latRange=[p.getSouth(),p.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(p,w=!1){const P=p.key,z=w?this._alignedPosMatrixCache:this._posMatrixCache;if(z[P])return z[P];const N=p.canonical,J=this.worldSize/this.zoomScale(N.z),ee=N.x+Math.pow(2,N.z)*p.wrap,se=d.ao(new Float64Array(16));return d.$(se,se,[ee*J,N.y*J,0]),d.a0(se,se,[J/d.N,J/d.N,1]),d.a1(se,w?this.alignedProjMatrix:this.projMatrix,se),z[P]=new Float32Array(se),z[P]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let p,w,P,z,N=-90,J=90,ee=-180,se=180;const ye=this.size,we=this._unmodified;if(this.latRange){const at=this.latRange;N=d.H(at[1])*this.worldSize,J=d.H(at[0])*this.worldSize,p=J-N<ye.y?ye.y/(J-N):0}if(this.lngRange){const at=this.lngRange;ee=d.b5(d.G(at[0])*this.worldSize,0,this.worldSize),se=d.b5(d.G(at[1])*this.worldSize,0,this.worldSize),se<ee&&(se+=this.worldSize),w=se-ee<ye.x?ye.x/(se-ee):0}const Ie=this.point,We=Math.max(w||0,p||0);if(We)return this.center=this.unproject(new d.P(w?(se+ee)/2:Ie.x,p?(J+N)/2:Ie.y)),this.zoom+=this.scaleZoom(We),this._unmodified=we,void(this._constraining=!1);if(this.latRange){const at=Ie.y,st=ye.y/2;at-st<N&&(z=N+st),at+st>J&&(z=J-st)}if(this.lngRange){const at=(ee+se)/2,st=d.b5(Ie.x,at-this.worldSize/2,at+this.worldSize/2),ht=ye.x/2;st-ht<ee&&(P=ee+ht),st+ht>se&&(P=se-ht)}P===void 0&&z===void 0||(this.center=this.unproject(new d.P(P!==void 0?P:Ie.x,z!==void 0?z:Ie.y)).wrap()),this._unmodified=we,this._constraining=!1}_calcMatrices(){if(!this.height)return;const p=this.centerOffset,w=this.point.x,P=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=d.b7(1,this.center.lat)*this.worldSize;let z=d.ao(new Float64Array(16));d.a0(z,z,[this.width/2,-this.height/2,1]),d.$(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=d.ao(new Float64Array(16)),d.a0(z,z,[1,-1,1]),d.$(z,z,[-1,-1,0]),d.a0(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z;const N=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),J=Math.min(this.elevation,this._minEleveationForCurrentTile),ee=N-J*this._pixelPerMeter/Math.cos(this._pitch),se=J<0?ee:N,ye=Math.PI/2+this._pitch,we=this._fov*(.5+p.y/this.height),Ie=Math.sin(we)*se/Math.sin(d.ad(Math.PI-ye-we,.01,Math.PI-.01)),We=this.getHorizon(),at=2*Math.atan(We/this.cameraToCenterDistance)*(.5+p.y/(2*We)),st=Math.sin(at)*se/Math.sin(d.ad(Math.PI-ye-at,.01,Math.PI-.01)),ht=Math.min(Ie,st),it=1.01*(Math.cos(Math.PI/2-this._pitch)*ht+se),Vt=this.height/50;z=new Float64Array(16),d.b8(z,this._fov,this.width/this.height,Vt,it),z[8]=2*-p.x/this.width,z[9]=2*p.y/this.height,d.a0(z,z,[1,-1,1]),d.$(z,z,[0,0,-this.cameraToCenterDistance]),d.b9(z,z,this._pitch),d.ae(z,z,this.angle),d.$(z,z,[-w,-P,0]),this.mercatorMatrix=d.a0([],z,[this.worldSize,this.worldSize,this.worldSize]),d.a0(z,z,[1,1,this._pixelPerMeter]),this.pixelMatrix=d.a1(new Float64Array(16),this.labelPlaneMatrix,z),d.$(z,z,[0,0,-this.elevation]),this.projMatrix=z,this.invProjMatrix=d.as([],z),this.pixelMatrix3D=d.a1(new Float64Array(16),this.labelPlaneMatrix,z);const ar=this.width%2/2,_t=this.height%2/2,Ht=Math.cos(this.angle),ur=Math.sin(this.angle),hr=w-Math.round(w)+Ht*ar+ur*_t,_r=P-Math.round(P)+Ht*_t+ur*ar,zr=new Float64Array(z);if(d.$(zr,zr,[hr>.5?hr-1:hr,_r>.5?_r-1:_r,0]),this.alignedProjMatrix=zr,z=d.as(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");this.pixelMatrixInverse=z,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const p=this.pointCoordinate(new d.P(0,0)),w=[p.x*this.worldSize,p.y*this.worldSize,0,1];return d.ag(w,w,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const p=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new d.P(0,p))}getCameraQueryGeometry(p){const w=this.getCameraPoint();if(p.length===1)return[p[0],w];{let P=w.x,z=w.y,N=w.x,J=w.y;for(const ee of p)P=Math.min(P,ee.x),z=Math.min(z,ee.y),N=Math.max(N,ee.x),J=Math.max(J,ee.y);return[new d.P(P,z),new d.P(N,z),new d.P(N,J),new d.P(P,J),new d.P(P,z)]}}}function Zt(L,p){let w,P=!1,z=null,N=null;const J=()=>{z=null,P&&(L.apply(N,w),z=setTimeout(J,p),P=!1)};return(...ee)=>(P=!0,N=this,w=ee,z||J(),z)}class ed{constructor(p){this._getCurrentHash=()=>{const w=window.location.hash.replace("#","");if(this._hashName){let P;return w.split("&").map(z=>z.split("=")).forEach(z=>{z[0]===this._hashName&&(P=z)}),(P&&P[1]||"").split("/")}return w.split("/")},this._onHashChange=()=>{const w=this._getCurrentHash();if(w.length>=3&&!w.some(P=>isNaN(P))){const P=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(w[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+w[2],+w[1]],zoom:+w[0],bearing:P,pitch:+(w[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const w=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,w)}catch{}},this._updateHash=Zt(this._updateHashUnthrottled,300),this._hashName=p&&encodeURIComponent(p)}addTo(p){return this._map=p,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(p){const w=this._map.getCenter(),P=Math.round(100*this._map.getZoom())/100,z=Math.ceil((P*Math.LN2+Math.log(512/360/.5))/Math.LN10),N=Math.pow(10,z),J=Math.round(w.lng*N)/N,ee=Math.round(w.lat*N)/N,se=this._map.getBearing(),ye=this._map.getPitch();let we="";if(we+=p?`/${J}/${ee}/${P}`:`${P}/${ee}/${J}`,(se||ye)&&(we+="/"+Math.round(10*se)/10),ye&&(we+=`/${Math.round(ye)}`),this._hashName){const Ie=this._hashName;let We=!1;const at=window.location.hash.slice(1).split("&").map(st=>{const ht=st.split("=")[0];return ht===Ie?(We=!0,`${ht}=${we}`):st}).filter(st=>st);return We||at.push(`${Ie}=${we}`),`#${at.join("&")}`}return`#${we}`}}const ku={linearity:.3,easing:d.ba(0,0,.3,1)},ap=d.e({deceleration:2500,maxSpeed:1400},ku),Qm=d.e({deceleration:20,maxSpeed:1400},ku),Jd=d.e({deceleration:1e3,maxSpeed:360},ku),xc=d.e({deceleration:1e3,maxSpeed:90},ku);class sp{constructor(p){this._map=p,this.clear()}clear(){this._inertiaBuffer=[]}record(p){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:d.h.now(),settings:p})}_drainInertiaBuffer(){const p=this._inertiaBuffer,w=d.h.now();for(;p.length>0&&w-p[0].time>160;)p.shift()}_onMoveEnd(p){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const w={zoom:0,bearing:0,pitch:0,pan:new d.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:N}of this._inertiaBuffer)w.zoom+=N.zoomDelta||0,w.bearing+=N.bearingDelta||0,w.pitch+=N.pitchDelta||0,N.panDelta&&w.pan._add(N.panDelta),N.around&&(w.around=N.around),N.pinchAround&&(w.pinchAround=N.pinchAround);const P=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(w.pan.mag()){const N=Ou(w.pan.mag(),P,d.e({},ap,p||{}));z.offset=w.pan.mult(N.amount/w.pan.mag()),z.center=this._map.transform.center,Cs(z,N)}if(w.zoom){const N=Ou(w.zoom,P,Qm);z.zoom=this._map.transform.zoom+N.amount,Cs(z,N)}if(w.bearing){const N=Ou(w.bearing,P,Jd);z.bearing=this._map.transform.bearing+d.ad(N.amount,-179,179),Cs(z,N)}if(w.pitch){const N=Ou(w.pitch,P,xc);z.pitch=this._map.transform.pitch+N.amount,Cs(z,N)}if(z.zoom||z.bearing){const N=w.pinchAround===void 0?w.around:w.pinchAround;z.around=N?this._map.unproject(N):this._map.getCenter()}return this.clear(),d.e(z,{noMoveStart:!0})}}function Cs(L,p){(!L.duration||L.duration<p.duration)&&(L.duration=p.duration,L.easing=p.easing)}function Ou(L,p,w){const{maxSpeed:P,linearity:z,deceleration:N}=w,J=d.ad(L*z/(p/1e3),-P,P),ee=Math.abs(J)/(N*z);return{easing:w.easing,duration:1e3*ee,amount:J*(ee/2)}}class ls extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(p,w,P,z={}){const N=S.mousePos(w.getCanvasContainer(),P),J=w.unproject(N);super(p,d.e({point:N,lngLat:J,originalEvent:P},z)),this._defaultPrevented=!1,this.target=w}}class sh extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(p,w,P){const z=p==="touchend"?P.changedTouches:P.touches,N=S.touchPos(w.getCanvasContainer(),z),J=N.map(se=>w.unproject(se)),ee=N.reduce((se,ye,we,Ie)=>se.add(ye.div(Ie.length)),new d.P(0,0));super(p,{points:N,point:ee,lngLats:J,lngLat:w.unproject(ee),originalEvent:P}),this._defaultPrevented=!1}}class zy extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(p,w,P){super(p,{originalEvent:P}),this._defaultPrevented=!1}}class eg{constructor(p,w){this._map=p,this._clickTolerance=w.clickTolerance}reset(){delete this._mousedownPos}wheel(p){return this._firePreventable(new zy(p.type,this._map,p))}mousedown(p,w){return this._mousedownPos=w,this._firePreventable(new ls(p.type,this._map,p))}mouseup(p){this._map.fire(new ls(p.type,this._map,p))}click(p,w){this._mousedownPos&&this._mousedownPos.dist(w)>=this._clickTolerance||this._map.fire(new ls(p.type,this._map,p))}dblclick(p){return this._firePreventable(new ls(p.type,this._map,p))}mouseover(p){this._map.fire(new ls(p.type,this._map,p))}mouseout(p){this._map.fire(new ls(p.type,this._map,p))}touchstart(p){return this._firePreventable(new sh(p.type,this._map,p))}touchmove(p){this._map.fire(new sh(p.type,this._map,p))}touchend(p){this._map.fire(new sh(p.type,this._map,p))}touchcancel(p){this._map.fire(new sh(p.type,this._map,p))}_firePreventable(p){if(this._map.fire(p),p.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class tg{constructor(p){this._map=p}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(p){this._map.fire(new ls(p.type,this._map,p))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ls("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(p){this._delayContextMenu?this._contextMenuEvent=p:this._ignoreContextMenu||this._map.fire(new ls(p.type,this._map,p)),this._map.listens("contextmenu")&&p.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xl{constructor(p){this._map=p}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(p){return this.transform.pointLocation(d.P.convert(p),this._map.terrain)}}class Dy{constructor(p,w){this._map=p,this._tr=new Xl(p),this._el=p.getCanvasContainer(),this._container=p.getContainer(),this._clickTolerance=w.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(p,w){this.isEnabled()&&p.shiftKey&&p.button===0&&(S.disableDrag(),this._startPos=this._lastPos=w,this._active=!0)}mousemoveWindow(p,w){if(!this._active)return;const P=w;if(this._lastPos.equals(P)||!this._box&&P.dist(this._startPos)<this._clickTolerance)return;const z=this._startPos;this._lastPos=P,this._box||(this._box=S.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",p));const N=Math.min(z.x,P.x),J=Math.max(z.x,P.x),ee=Math.min(z.y,P.y),se=Math.max(z.y,P.y);S.setTransform(this._box,`translate(${N}px,${ee}px)`),this._box.style.width=J-N+"px",this._box.style.height=se-ee+"px"}mouseupWindow(p,w){if(!this._active||p.button!==0)return;const P=this._startPos,z=w;if(this.reset(),S.suppressClick(),P.x!==z.x||P.y!==z.y)return this._map.fire(new d.k("boxzoomend",{originalEvent:p})),{cameraAnimation:N=>N.fitScreenCoordinates(P,z,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",p)}keydown(p){this._active&&p.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",p))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(S.remove(this._box),this._box=null),S.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(p,w){return this._map.fire(new d.k(p,{originalEvent:w}))}}function Al(L,p){if(L.length!==p.length)throw new Error(`The number of touches and points are not equal - touches ${L.length}, points ${p.length}`);const w={};for(let P=0;P<L.length;P++)w[L[P].identifier]=p[P];return w}class Uc{constructor(p){this.reset(),this.numTouches=p.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(p,w,P){(this.centroid||P.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=p.timeStamp),P.length===this.numTouches&&(this.centroid=function(z){const N=new d.P(0,0);for(const J of z)N._add(J);return N.div(z.length)}(w),this.touches=Al(P,w)))}touchmove(p,w,P){if(this.aborted||!this.centroid)return;const z=Al(P,w);for(const N in this.touches){const J=z[N];(!J||J.dist(this.touches[N])>30)&&(this.aborted=!0)}}touchend(p,w,P){if((!this.centroid||p.timeStamp-this.startTime>500)&&(this.aborted=!0),P.length===0){const z=!this.aborted&&this.centroid;if(this.reset(),z)return z}}}class lp{constructor(p){this.singleTap=new Uc(p),this.numTaps=p.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(p,w,P){this.singleTap.touchstart(p,w,P)}touchmove(p,w,P){this.singleTap.touchmove(p,w,P)}touchend(p,w,P){const z=this.singleTap.touchend(p,w,P);if(z){const N=p.timeStamp-this.lastTime<500,J=!this.lastTap||this.lastTap.dist(z)<30;if(N&&J||this.reset(),this.count++,this.lastTime=p.timeStamp,this.lastTap=z,this.count===this.numTaps)return this.reset(),z}}}class bc{constructor(p){this._tr=new Xl(p),this._zoomIn=new lp({numTouches:1,numTaps:2}),this._zoomOut=new lp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(p,w,P){this._zoomIn.touchstart(p,w,P),this._zoomOut.touchstart(p,w,P)}touchmove(p,w,P){this._zoomIn.touchmove(p,w,P),this._zoomOut.touchmove(p,w,P)}touchend(p,w,P){const z=this._zoomIn.touchend(p,w,P),N=this._zoomOut.touchend(p,w,P),J=this._tr;return z?(this._active=!0,p.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:J.zoom+1,around:J.unproject(z)},{originalEvent:p})}):N?(this._active=!0,p.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:J.zoom-1,around:J.unproject(N)},{originalEvent:p})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hc{constructor(p){this._enabled=!!p.enable,this._moveStateManager=p.moveStateManager,this._clickTolerance=p.clickTolerance||1,this._moveFunction=p.move,this._activateOnStart=!!p.activateOnStart,p.assignEvents(this),this.reset()}reset(p){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(p)}_move(...p){const w=this._moveFunction(...p);if(w.bearingDelta||w.pitchDelta||w.around||w.panDelta)return this._active=!0,w}dragStart(p,w){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(p)&&(this._moveStateManager.startMove(p),this._lastPoint=w.length?w[0]:w,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(p,w){if(!this.isEnabled())return;const P=this._lastPoint;if(!P)return;if(p.preventDefault(),!this._moveStateManager.isValidMoveEvent(p))return void this.reset(p);const z=w.length?w[0]:w;return!this._moved&&z.dist(P)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=z,this._move(P,z))}dragEnd(p){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(p)&&(this._moved&&S.suppressClick(),this.reset(p))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const cp={0:1,2:2};class rg{constructor(p){this._correctEvent=p.checkCorrectEvent}startMove(p){const w=S.mouseButton(p);this._eventButton=w}endMove(p){delete this._eventButton}isValidStartEvent(p){return this._correctEvent(p)}isValidMoveEvent(p){return!function(w,P){const z=cp[P];return w.buttons===void 0||(w.buttons&z)!==z}(p,this._eventButton)}isValidEndEvent(p){return S.mouseButton(p)===this._eventButton}}class ng{constructor(){this._firstTouch=void 0}_isOneFingerTouch(p){return p.targetTouches.length===1}_isSameTouchEvent(p){return p.targetTouches[0].identifier===this._firstTouch}startMove(p){this._firstTouch=p.targetTouches[0].identifier}endMove(p){delete this._firstTouch}isValidStartEvent(p){return this._isOneFingerTouch(p)}isValidMoveEvent(p){return this._isOneFingerTouch(p)&&this._isSameTouchEvent(p)}isValidEndEvent(p){return this._isOneFingerTouch(p)&&this._isSameTouchEvent(p)}}const td=L=>{L.mousedown=L.dragStart,L.mousemoveWindow=L.dragMove,L.mouseup=L.dragEnd,L.contextmenu=function(p){p.preventDefault()}},Gc=({enable:L,clickTolerance:p,bearingDegreesPerPixelMoved:w=.8})=>{const P=new rg({checkCorrectEvent:z=>S.mouseButton(z)===0&&z.ctrlKey||S.mouseButton(z)===2});return new Hc({clickTolerance:p,move:(z,N)=>({bearingDelta:(N.x-z.x)*w}),moveStateManager:P,enable:L,assignEvents:td})},Yl=({enable:L,clickTolerance:p,pitchDegreesPerPixelMoved:w=-.5})=>{const P=new rg({checkCorrectEvent:z=>S.mouseButton(z)===0&&z.ctrlKey||S.mouseButton(z)===2});return new Hc({clickTolerance:p,move:(z,N)=>({pitchDelta:(N.y-z.y)*w}),moveStateManager:P,enable:L,assignEvents:td})};class _n{constructor(p,w){this._minTouches=p.cooperativeGestures?2:1,this._clickTolerance=p.clickTolerance||1,this._map=w,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new d.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(p,w,P){return this._calculateTransform(p,w,P)}touchmove(p,w,P){if(this._map._cooperativeGestures&&(this._minTouches===2&&P.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(p,!1,P.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(P.length<this._minTouches))return p.preventDefault(),this._calculateTransform(p,w,P)}touchend(p,w,P){this._calculateTransform(p,w,P),this._active&&P.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(p,w,P){P.length>0&&(this._active=!0);const z=Al(P,w),N=new d.P(0,0),J=new d.P(0,0);let ee=0;for(const ye in z){const we=z[ye],Ie=this._touches[ye];Ie&&(N._add(we),J._add(we.sub(Ie)),ee++,z[ye]=we)}if(this._touches=z,ee<this._minTouches||!J.mag())return;const se=J.div(ee);return this._sum._add(se),this._sum.mag()<this._clickTolerance?void 0:{around:N.div(ee),panDelta:se}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(p,w,P){this._firstTwoTouches||P.length<2||(this._firstTwoTouches=[P[0].identifier,P[1].identifier],this._start([w[0],w[1]]))}touchmove(p,w,P){if(!this._firstTwoTouches)return;p.preventDefault();const[z,N]=this._firstTwoTouches,J=Rl(P,w,z),ee=Rl(P,w,N);if(!J||!ee)return;const se=this._aroundCenter?null:J.add(ee).div(2);return this._move([J,ee],se,p)}touchend(p,w,P){if(!this._firstTwoTouches)return;const[z,N]=this._firstTwoTouches,J=Rl(P,w,z),ee=Rl(P,w,N);J&&ee||(this._active&&S.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(p){this._enabled=!0,this._aroundCenter=!!p&&p.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Rl(L,p,w){for(let P=0;P<L.length;P++)if(L[P].identifier===w)return p[P]}function qc(L,p){return Math.log(L/p)/Math.LN2}class up extends rd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(p){this._startDistance=this._distance=p[0].dist(p[1])}_move(p,w){const P=this._distance;if(this._distance=p[0].dist(p[1]),this._active||!(Math.abs(qc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qc(this._distance,P),pinchAround:w}}}function fn(L,p){return 180*L.angleWith(p)/Math.PI}class Qd extends rd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(p){this._startVector=this._vector=p[0].sub(p[1]),this._minDiameter=p[0].dist(p[1])}_move(p,w){const P=this._vector;if(this._vector=p[0].sub(p[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fn(this._vector,P),pinchAround:w}}_isBelowThreshold(p){this._minDiameter=Math.min(this._minDiameter,p.mag());const w=25/(Math.PI*this._minDiameter)*360,P=fn(p,this._startVector);return Math.abs(P)<w}}function hp(L){return Math.abs(L.y)>Math.abs(L.x)}class ig extends rd{constructor(p){super(),this._map=p}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(p,w,P){super.touchstart(p,w,P),this._currentTouchCount=P.length}_start(p){this._lastPoints=p,hp(p[0].sub(p[1]))&&(this._valid=!1)}_move(p,w,P){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const z=p[0].sub(this._lastPoints[0]),N=p[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(z,N,P.timeStamp),this._valid?(this._lastPoints=p,this._active=!0,{pitchDelta:(z.y+N.y)/2*-.5}):void 0}gestureBeginsVertically(p,w,P){if(this._valid!==void 0)return this._valid;const z=p.mag()>=2,N=w.mag()>=2;if(!z&&!N)return;if(!z||!N)return this._firstMove===void 0&&(this._firstMove=P),P-this._firstMove<100&&void 0;const J=p.y>0==w.y>0;return hp(p)&&hp(w)&&J}}const dp={panStep:100,bearingStep:15,pitchStep:10};class fp{constructor(p){this._tr=new Xl(p);const w=dp;this._panStep=w.panStep,this._bearingStep=w.bearingStep,this._pitchStep=w.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(p){if(p.altKey||p.ctrlKey||p.metaKey)return;let w=0,P=0,z=0,N=0,J=0;switch(p.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:p.shiftKey?P=-1:(p.preventDefault(),N=-1);break;case 39:p.shiftKey?P=1:(p.preventDefault(),N=1);break;case 38:p.shiftKey?z=1:(p.preventDefault(),J=-1);break;case 40:p.shiftKey?z=-1:(p.preventDefault(),J=1);break;default:return}return this._rotationDisabled&&(P=0,z=0),{cameraAnimation:ee=>{const se=this._tr;ee.easeTo({duration:300,easeId:"keyboardHandler",easing:ef,zoom:w?Math.round(se.zoom)+w*(p.shiftKey?2:1):se.zoom,bearing:se.bearing+P*this._bearingStep,pitch:se.pitch+z*this._pitchStep,offset:[-N*this._panStep,-J*this._panStep],center:se.center},{originalEvent:p})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ef(L){return L*(2-L)}const pp=4.000244140625;class og{constructor(p,w){this._onTimeout=P=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(P)},this._map=p,this._tr=new Xl(p),this._el=p.getCanvasContainer(),this._triggerRenderFrame=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(p){this._defaultZoomRate=p}setWheelZoomRate(p){this._wheelZoomRate=p}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(p){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!p&&p.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(p){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!p[this._map._metaKey])return;p.preventDefault()}let w=p.deltaMode===WheelEvent.DOM_DELTA_LINE?40*p.deltaY:p.deltaY;const P=d.h.now(),z=P-(this._lastWheelEventTime||0);this._lastWheelEventTime=P,w!==0&&w%pp==0?this._type="wheel":w!==0&&Math.abs(w)<4?this._type="trackpad":z>400?(this._type=null,this._lastValue=w,this._timeout=setTimeout(this._onTimeout,40,p)):this._type||(this._type=Math.abs(z*w)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,w+=this._lastValue)),p.shiftKey&&w&&(w/=4),this._type&&(this._lastWheelEvent=p,this._delta-=w,this._active||this._start(p)),p.preventDefault()}_start(p){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const w=S.mousePos(this._el,p),P=this._tr;this._around=d.L.convert(this._aroundCenter?P.center:P.unproject(w)),this._aroundPoint=P.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const p=this._tr.transform;if(this._delta!==0){const ee=this._type==="wheel"&&Math.abs(this._delta)>pp?this._wheelZoomRate:this._defaultZoomRate;let se=2/(1+Math.exp(-Math.abs(this._delta*ee)));this._delta<0&&se!==0&&(se=1/se);const ye=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(ye*se))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const w=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,P=this._startZoom,z=this._easing;let N,J=!1;if(this._type==="wheel"&&P&&z){const ee=Math.min((d.h.now()-this._lastWheelEventTime)/200,1),se=z(ee);N=d.B.number(P,w,se),ee<1?this._frameId||(this._frameId=!0):J=!0}else N=w,J=!0;return this._active=!0,J&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!J,zoomDelta:N-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(p){let w=d.bb;if(this._prevEase){const P=this._prevEase,z=(d.h.now()-P.start)/P.duration,N=P.easing(z+.01)-P.easing(z),J=.27/Math.sqrt(N*N+1e-4)*.01,ee=Math.sqrt(.0729-J*J);w=d.ba(J,ee,.25,1)}return this._prevEase={start:d.h.now(),duration:p,easing:w},w}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Mn{constructor(p,w){this._clickZoom=p,this._tapZoom=w}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class mp{constructor(p){this._tr=new Xl(p),this.reset()}reset(){this._active=!1}dblclick(p,w){return p.preventDefault(),{cameraAnimation:P=>{P.easeTo({duration:300,zoom:this._tr.zoom+(p.shiftKey?-1:1),around:this._tr.unproject(w)},{originalEvent:p})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nd{constructor(){this._tap=new lp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(p,w,P){if(!this._swipePoint)if(this._tapTime){const z=w[0],N=p.timeStamp-this._tapTime<500,J=this._tapPoint.dist(z)<30;N&&J?P.length>0&&(this._swipePoint=z,this._swipeTouch=P[0].identifier):this.reset()}else this._tap.touchstart(p,w,P)}touchmove(p,w,P){if(this._tapTime){if(this._swipePoint){if(P[0].identifier!==this._swipeTouch)return;const z=w[0],N=z.y-this._swipePoint.y;return this._swipePoint=z,p.preventDefault(),this._active=!0,{zoomDelta:N/128}}}else this._tap.touchmove(p,w,P)}touchend(p,w,P){if(this._tapTime)this._swipePoint&&P.length===0&&this.reset();else{const z=this._tap.touchend(p,w,P);z&&(this._tapTime=p.timeStamp,this._tapPoint=z)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gp{constructor(p,w,P){this._el=p,this._mousePan=w,this._touchPan=P}enable(p){this._inertiaOptions=p||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $s{constructor(p,w,P){this._pitchWithRotate=p.pitchWithRotate,this._mouseRotate=w,this._mousePitch=P}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wc{constructor(p,w,P,z){this._el=p,this._touchZoom=w,this._touchRotate=P,this._tapDragZoom=z,this._rotationDisabled=!1,this._enabled=!0}enable(p){this._touchZoom.enable(p),this._rotationDisabled||this._touchRotate.enable(p),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const wc=L=>L.zoom||L.drag||L.pitch||L.rotate;class yp extends d.k{}function tf(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}class ag{constructor(p,w){this.handleWindowEvent=z=>{this.handleEvent(z,`${z.type}Window`)},this.handleEvent=(z,N)=>{if(z.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const J=z.type==="renderFrame"?void 0:z,ee={needsRenderFrame:!1},se={},ye={},we=z.touches,Ie=we?this._getMapTouches(we):void 0,We=Ie?S.touchPos(this._el,Ie):S.mousePos(this._el,z);for(const{handlerName:ht,handler:it,allowed:Vt}of this._handlers){if(!it.isEnabled())continue;let ar;this._blockedByActive(ye,Vt,ht)?it.reset():it[N||z.type]&&(ar=it[N||z.type](z,We,Ie),this.mergeHandlerResult(ee,se,ar,ht,J),ar&&ar.needsRenderFrame&&this._triggerRenderFrame()),(ar||it.isActive())&&(ye[ht]=it)}const at={};for(const ht in this._previousActiveHandlers)ye[ht]||(at[ht]=J);this._previousActiveHandlers=ye,(Object.keys(at).length||tf(ee))&&(this._changes.push([ee,se,at]),this._triggerRenderFrame()),(Object.keys(ye).length||tf(ee))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:st}=ee;st&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],st(this._map))},this._map=p,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sp(p),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(w);const P=this._el;this._listeners=[[P,"touchstart",{passive:!0}],[P,"touchmove",{passive:!1}],[P,"touchend",void 0],[P,"touchcancel",void 0],[P,"mousedown",void 0],[P,"mousemove",void 0],[P,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[P,"mouseover",void 0],[P,"mouseout",void 0],[P,"dblclick",void 0],[P,"click",void 0],[P,"keydown",{capture:!1}],[P,"keyup",void 0],[P,"wheel",{passive:!1}],[P,"contextmenu",void 0],[window,"blur",void 0]];for(const[z,N,J]of this._listeners)S.addEventListener(z,N,z===document?this.handleWindowEvent:this.handleEvent,J)}destroy(){for(const[p,w,P]of this._listeners)S.removeEventListener(p,w,p===document?this.handleWindowEvent:this.handleEvent,P)}_addDefaultHandlers(p){const w=this._map,P=w.getCanvasContainer();this._add("mapEvent",new eg(w,p));const z=w.boxZoom=new Dy(w,p);this._add("boxZoom",z),p.interactive&&p.boxZoom&&z.enable();const N=new bc(w),J=new mp(w);w.doubleClickZoom=new Mn(J,N),this._add("tapZoom",N),this._add("clickZoom",J),p.interactive&&p.doubleClickZoom&&w.doubleClickZoom.enable();const ee=new nd;this._add("tapDragZoom",ee);const se=w.touchPitch=new ig(w);this._add("touchPitch",se),p.interactive&&p.touchPitch&&w.touchPitch.enable(p.touchPitch);const ye=Gc(p),we=Yl(p);w.dragRotate=new $s(p,ye,we),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",we,["mouseRotate"]),p.interactive&&p.dragRotate&&w.dragRotate.enable();const Ie=(({enable:Vt,clickTolerance:ar})=>{const _t=new rg({checkCorrectEvent:Ht=>S.mouseButton(Ht)===0&&!Ht.ctrlKey});return new Hc({clickTolerance:ar,move:(Ht,ur)=>({around:ur,panDelta:ur.sub(Ht)}),activateOnStart:!0,moveStateManager:_t,enable:Vt,assignEvents:td})})(p),We=new _n(p,w);w.dragPan=new gp(P,Ie,We),this._add("mousePan",Ie),this._add("touchPan",We,["touchZoom","touchRotate"]),p.interactive&&p.dragPan&&w.dragPan.enable(p.dragPan);const at=new Qd,st=new up;w.touchZoomRotate=new Wc(P,st,at,ee),this._add("touchRotate",at,["touchPan","touchZoom"]),this._add("touchZoom",st,["touchPan","touchRotate"]),p.interactive&&p.touchZoomRotate&&w.touchZoomRotate.enable(p.touchZoomRotate);const ht=w.scrollZoom=new og(w,()=>this._triggerRenderFrame());this._add("scrollZoom",ht,["mousePan"]),p.interactive&&p.scrollZoom&&w.scrollZoom.enable(p.scrollZoom);const it=w.keyboard=new fp(w);this._add("keyboard",it),p.interactive&&p.keyboard&&w.keyboard.enable(),this._add("blockableMapEvent",new tg(w))}_add(p,w,P){this._handlers.push({handlerName:p,handler:w,allowed:P}),this._handlersById[p]=w}stop(p){if(!this._updatingCamera){for(const{handler:w}of this._handlers)w.reset();this._inertia.clear(),this._fireEvents({},{},p),this._changes=[]}}isActive(){for(const{handler:p}of this._handlers)if(p.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!wc(this._eventsInProgress)||this.isZooming()}_blockedByActive(p,w,P){for(const z in p)if(z!==P&&(!w||w.indexOf(z)<0))return!0;return!1}_getMapTouches(p){const w=[];for(const P of p)this._el.contains(P.target)&&w.push(P);return w}mergeHandlerResult(p,w,P,z,N){if(!P)return;d.e(p,P);const J={handlerName:z,originalEvent:P.originalEvent||N};P.zoomDelta!==void 0&&(w.zoom=J),P.panDelta!==void 0&&(w.drag=J),P.pitchDelta!==void 0&&(w.pitch=J),P.bearingDelta!==void 0&&(w.rotate=J)}_applyChanges(){const p={},w={},P={};for(const[z,N,J]of this._changes)z.panDelta&&(p.panDelta=(p.panDelta||new d.P(0,0))._add(z.panDelta)),z.zoomDelta&&(p.zoomDelta=(p.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(p.bearingDelta=(p.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(p.pitchDelta=(p.pitchDelta||0)+z.pitchDelta),z.around!==void 0&&(p.around=z.around),z.pinchAround!==void 0&&(p.pinchAround=z.pinchAround),z.noInertia&&(p.noInertia=z.noInertia),d.e(w,N),d.e(P,J);this._updateMapTransform(p,w,P),this._changes=[]}_updateMapTransform(p,w,P){const z=this._map,N=z._getTransformForUpdate(),J=z.terrain;if(!(tf(p)||J&&this._terrainMovement))return this._fireEvents(w,P,!0);let{panDelta:ee,zoomDelta:se,bearingDelta:ye,pitchDelta:we,around:Ie,pinchAround:We}=p;We!==void 0&&(Ie=We),z._stop(!0),Ie=Ie||z.transform.centerPoint;const at=N.pointLocation(ee?Ie.sub(ee):Ie);ye&&(N.bearing+=ye),we&&(N.pitch+=we),se&&(N.zoom+=se),J?this._terrainMovement||!w.drag&&!w.zoom?w.drag&&this._terrainMovement?N.center=N.pointLocation(N.centerPoint.sub(ee)):N.setLocationAtPoint(at,Ie):(this._terrainMovement=!0,this._map._elevationFreeze=!0,N.setLocationAtPoint(at,Ie),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,N.recalculateZoom(z.terrain)})):N.setLocationAtPoint(at,Ie),z._applyUpdatedTransform(N),this._map._update(),p.noInertia||this._inertia.record(p),this._fireEvents(w,P,!0)}_fireEvents(p,w,P){const z=wc(this._eventsInProgress),N=wc(p),J={};for(const we in p){const{originalEvent:Ie}=p[we];this._eventsInProgress[we]||(J[`${we}start`]=Ie),this._eventsInProgress[we]=p[we]}!z&&N&&this._fireEvent("movestart",N.originalEvent);for(const we in J)this._fireEvent(we,J[we]);N&&this._fireEvent("move",N.originalEvent);for(const we in p){const{originalEvent:Ie}=p[we];this._fireEvent(we,Ie)}const ee={};let se;for(const we in this._eventsInProgress){const{handlerName:Ie,originalEvent:We}=this._eventsInProgress[we];this._handlersById[Ie].isActive()||(delete this._eventsInProgress[we],se=w[Ie]||We,ee[`${we}end`]=se)}for(const we in ee)this._fireEvent(we,ee[we]);const ye=wc(this._eventsInProgress);if(P&&(z||N)&&!ye){this._updatingCamera=!0;const we=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ie=We=>We!==0&&-this._bearingSnap<We&&We<this._bearingSnap;!we||!we.essential&&d.h.prefersReducedMotion?(this._map.fire(new d.k("moveend",{originalEvent:se})),Ie(this._map.getBearing())&&this._map.resetNorth()):(Ie(we.bearing||this._map.getBearing())&&(we.bearing=0),we.freezeElevation=!0,this._map.easeTo(we,{originalEvent:se})),this._updatingCamera=!1}}_fireEvent(p,w){this._map.fire(new d.k(p,w?{originalEvent:w}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(p=>{delete this._frameId,this.handleEvent(new yp("renderFrame",{timeStamp:p})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ly extends d.E{constructor(p,w){super(),this._renderFrameCallback=()=>{const P=Math.min((d.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(P)),P<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=p,this._bearingSnap=w.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new d.L(this.transform.center.lng,this.transform.center.lat)}setCenter(p,w){return this.jumpTo({center:p},w)}panBy(p,w,P){return p=d.P.convert(p).mult(-1),this.panTo(this.transform.center,d.e({offset:p},w),P)}panTo(p,w,P){return this.easeTo(d.e({center:p},w),P)}getZoom(){return this.transform.zoom}setZoom(p,w){return this.jumpTo({zoom:p},w),this}zoomTo(p,w,P){return this.easeTo(d.e({zoom:p},w),P)}zoomIn(p,w){return this.zoomTo(this.getZoom()+1,p,w),this}zoomOut(p,w){return this.zoomTo(this.getZoom()-1,p,w),this}getBearing(){return this.transform.bearing}setBearing(p,w){return this.jumpTo({bearing:p},w),this}getPadding(){return this.transform.padding}setPadding(p,w){return this.jumpTo({padding:p},w),this}rotateTo(p,w,P){return this.easeTo(d.e({bearing:p},w),P)}resetNorth(p,w){return this.rotateTo(0,d.e({duration:1e3},p),w),this}resetNorthPitch(p,w){return this.easeTo(d.e({bearing:0,pitch:0,duration:1e3},p),w),this}snapToNorth(p,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(p,w):this}getPitch(){return this.transform.pitch}setPitch(p,w){return this.jumpTo({pitch:p},w),this}cameraForBounds(p,w){p=St.convert(p);const P=w&&w.bearing||0;return this._cameraForBoxAndBearing(p.getNorthWest(),p.getSouthEast(),P,w)}_cameraForBoxAndBearing(p,w,P,z){const N={top:0,bottom:0,right:0,left:0};if(typeof(z=d.e({padding:N,offset:[0,0],maxZoom:this.transform.maxZoom},z)).padding=="number"){const ur=z.padding;z.padding={top:ur,bottom:ur,right:ur,left:ur}}z.padding=d.e(N,z.padding);const J=this.transform,ee=J.padding,se=J.project(d.L.convert(p)),ye=J.project(d.L.convert(w)),we=se.rotate(-P*Math.PI/180),Ie=ye.rotate(-P*Math.PI/180),We=new d.P(Math.max(we.x,Ie.x),Math.max(we.y,Ie.y)),at=new d.P(Math.min(we.x,Ie.x),Math.min(we.y,Ie.y)),st=We.sub(at),ht=(J.width-(ee.left+ee.right+z.padding.left+z.padding.right))/st.x,it=(J.height-(ee.top+ee.bottom+z.padding.top+z.padding.bottom))/st.y;if(it<0||ht<0)return void d.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Vt=Math.min(J.scaleZoom(J.scale*Math.min(ht,it)),z.maxZoom),ar=d.P.convert(z.offset),_t=new d.P((z.padding.left-z.padding.right)/2,(z.padding.top-z.padding.bottom)/2).rotate(P*Math.PI/180),Ht=ar.add(_t).mult(J.scale/J.zoomScale(Vt));return{center:J.unproject(se.add(ye).div(2).sub(Ht)),zoom:Vt,bearing:P}}fitBounds(p,w,P){return this._fitInternal(this.cameraForBounds(p,w),w,P)}fitScreenCoordinates(p,w,P,z,N){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(d.P.convert(p)),this.transform.pointLocation(d.P.convert(w)),P,z),z,N)}_fitInternal(p,w,P){return p?(delete(w=d.e(p,w)).padding,w.linear?this.easeTo(w,P):this.flyTo(w,P)):this}jumpTo(p,w){this.stop();const P=this._getTransformForUpdate();let z=!1,N=!1,J=!1;return"zoom"in p&&P.zoom!==+p.zoom&&(z=!0,P.zoom=+p.zoom),p.center!==void 0&&(P.center=d.L.convert(p.center)),"bearing"in p&&P.bearing!==+p.bearing&&(N=!0,P.bearing=+p.bearing),"pitch"in p&&P.pitch!==+p.pitch&&(J=!0,P.pitch=+p.pitch),p.padding==null||P.isPaddingEqual(p.padding)||(P.padding=p.padding),this._applyUpdatedTransform(P),this.fire(new d.k("movestart",w)).fire(new d.k("move",w)),z&&this.fire(new d.k("zoomstart",w)).fire(new d.k("zoom",w)).fire(new d.k("zoomend",w)),N&&this.fire(new d.k("rotatestart",w)).fire(new d.k("rotate",w)).fire(new d.k("rotateend",w)),J&&this.fire(new d.k("pitchstart",w)).fire(new d.k("pitch",w)).fire(new d.k("pitchend",w)),this.fire(new d.k("moveend",w))}calculateCameraOptionsFromTo(p,w,P,z=0){const N=d.U.fromLngLat(p,w),J=d.U.fromLngLat(P,z),ee=J.x-N.x,se=J.y-N.y,ye=J.z-N.z,we=Math.hypot(ee,se,ye);if(we===0)throw new Error("Can't calculate camera options with same From and To");const Ie=Math.hypot(ee,se),We=this.transform.scaleZoom(this.transform.cameraToCenterDistance/we/this.transform.tileSize),at=180*Math.atan2(ee,-se)/Math.PI;let st=180*Math.acos(Ie/we)/Math.PI;return st=ye<0?90-st:90+st,{center:J.toLngLat(),zoom:We,pitch:st,bearing:at}}easeTo(p,w){this._stop(!1,p.easeId),((p=d.e({offset:[0,0],duration:500,easing:d.bb},p)).animate===!1||!p.essential&&d.h.prefersReducedMotion)&&(p.duration=0);const P=this._getTransformForUpdate(),z=this.getZoom(),N=this.getBearing(),J=this.getPitch(),ee=this.getPadding(),se="zoom"in p?+p.zoom:z,ye="bearing"in p?this._normalizeBearing(p.bearing,N):N,we="pitch"in p?+p.pitch:J,Ie="padding"in p?p.padding:P.padding,We=d.P.convert(p.offset);let at=P.centerPoint.add(We);const st=P.pointLocation(at),ht=d.L.convert(p.center||st);this._normalizeCenter(ht);const it=P.project(st),Vt=P.project(ht).sub(it),ar=P.zoomScale(se-z);let _t,Ht;p.around&&(_t=d.L.convert(p.around),Ht=P.locationPoint(_t));const ur={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||se!==z,this._rotating=this._rotating||N!==ye,this._pitching=this._pitching||we!==J,this._padding=!P.isPaddingEqual(Ie),this._easeId=p.easeId,this._prepareEase(w,p.noMoveStart,ur),this.terrain&&this._prepareElevation(ht),this._ease(hr=>{if(this._zooming&&(P.zoom=d.B.number(z,se,hr)),this._rotating&&(P.bearing=d.B.number(N,ye,hr)),this._pitching&&(P.pitch=d.B.number(J,we,hr)),this._padding&&(P.interpolatePadding(ee,Ie,hr),at=P.centerPoint.add(We)),this.terrain&&!p.freezeElevation&&this._updateElevation(hr),_t)P.setLocationAtPoint(_t,Ht);else{const _r=P.zoomScale(P.zoom-z),zr=se>z?Math.min(2,ar):Math.max(.5,ar),Ar=Math.pow(zr,1-hr),Xr=P.unproject(it.add(Vt.mult(hr*Ar)).mult(_r));P.setLocationAtPoint(P.renderWorldCopies?Xr.wrap():Xr,at)}this._applyUpdatedTransform(P),this._fireMoveEvents(w)},hr=>{this.terrain&&this._finalizeElevation(),this._afterEase(w,hr)},p),this}_prepareEase(p,w,P={}){this._moving=!0,w||P.moving||this.fire(new d.k("movestart",p)),this._zooming&&!P.zooming&&this.fire(new d.k("zoomstart",p)),this._rotating&&!P.rotating&&this.fire(new d.k("rotatestart",p)),this._pitching&&!P.pitching&&this.fire(new d.k("pitchstart",p))}_prepareElevation(p){this._elevationCenter=p,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(p){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const w=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(p<1&&w!==this._elevationTarget){const P=this._elevationTarget-this._elevationStart;this._elevationStart+=p*(P-(w-(P*p+this._elevationStart))/(1-p)),this._elevationTarget=w}this.transform.elevation=d.B.number(this._elevationStart,this._elevationTarget,p)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(p){if(!this.transformCameraUpdate)return;const w=p.clone(),{center:P,zoom:z,pitch:N,bearing:J,elevation:ee}=this.transformCameraUpdate(w);P&&(w.center=P),z!==void 0&&(w.zoom=z),N!==void 0&&(w.pitch=N),J!==void 0&&(w.bearing=J),ee!==void 0&&(w.elevation=ee),this.transform.apply(w)}_fireMoveEvents(p){this.fire(new d.k("move",p)),this._zooming&&this.fire(new d.k("zoom",p)),this._rotating&&this.fire(new d.k("rotate",p)),this._pitching&&this.fire(new d.k("pitch",p))}_afterEase(p,w){if(this._easeId&&w&&this._easeId===w)return;delete this._easeId;const P=this._zooming,z=this._rotating,N=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,P&&this.fire(new d.k("zoomend",p)),z&&this.fire(new d.k("rotateend",p)),N&&this.fire(new d.k("pitchend",p)),this.fire(new d.k("moveend",p))}flyTo(p,w){if(!p.essential&&d.h.prefersReducedMotion){const An=d.F(p,["center","zoom","bearing","pitch","around"]);return this.jumpTo(An,w)}this.stop(),p=d.e({offset:[0,0],speed:1.2,curve:1.42,easing:d.bb},p);const P=this._getTransformForUpdate(),z=this.getZoom(),N=this.getBearing(),J=this.getPitch(),ee=this.getPadding(),se="zoom"in p?d.ad(+p.zoom,P.minZoom,P.maxZoom):z,ye="bearing"in p?this._normalizeBearing(p.bearing,N):N,we="pitch"in p?+p.pitch:J,Ie="padding"in p?p.padding:P.padding,We=P.zoomScale(se-z),at=d.P.convert(p.offset);let st=P.centerPoint.add(at);const ht=P.pointLocation(st),it=d.L.convert(p.center||ht);this._normalizeCenter(it);const Vt=P.project(ht),ar=P.project(it).sub(Vt);let _t=p.curve;const Ht=Math.max(P.width,P.height),ur=Ht/We,hr=ar.mag();if("minZoom"in p){const An=d.ad(Math.min(p.minZoom,z,se),P.minZoom,P.maxZoom),lo=Ht/P.zoomScale(An-z);_t=Math.sqrt(lo/hr*2)}const _r=_t*_t;function zr(An){const lo=(ur*ur-Ht*Ht+(An?-1:1)*_r*_r*hr*hr)/(2*(An?ur:Ht)*_r*hr);return Math.log(Math.sqrt(lo*lo+1)-lo)}function Ar(An){return(Math.exp(An)-Math.exp(-An))/2}function Xr(An){return(Math.exp(An)+Math.exp(-An))/2}const wn=zr(!1);let Bi=function(An){return Xr(wn)/Xr(wn+_t*An)},pn=function(An){return Ht*((Xr(wn)*(Ar(lo=wn+_t*An)/Xr(lo))-Ar(wn))/_r)/hr;var lo},Hn=(zr(!0)-wn)/_t;if(Math.abs(hr)<1e-6||!isFinite(Hn)){if(Math.abs(Ht-ur)<1e-6)return this.easeTo(p,w);const An=ur<Ht?-1:1;Hn=Math.abs(Math.log(ur/Ht))/_t,pn=function(){return 0},Bi=function(lo){return Math.exp(An*_t*lo)}}return p.duration="duration"in p?+p.duration:1e3*Hn/("screenSpeed"in p?+p.screenSpeed/_t:+p.speed),p.maxDuration&&p.duration>p.maxDuration&&(p.duration=0),this._zooming=!0,this._rotating=N!==ye,this._pitching=we!==J,this._padding=!P.isPaddingEqual(Ie),this._prepareEase(w,!1),this.terrain&&this._prepareElevation(it),this._ease(An=>{const lo=An*Hn,Ii=1/Bi(lo);P.zoom=An===1?se:z+P.scaleZoom(Ii),this._rotating&&(P.bearing=d.B.number(N,ye,An)),this._pitching&&(P.pitch=d.B.number(J,we,An)),this._padding&&(P.interpolatePadding(ee,Ie,An),st=P.centerPoint.add(at)),this.terrain&&!p.freezeElevation&&this._updateElevation(An);const li=An===1?it:P.unproject(Vt.add(ar.mult(pn(lo))).mult(Ii));P.setLocationAtPoint(P.renderWorldCopies?li.wrap():li,st),this._applyUpdatedTransform(P),this._fireMoveEvents(w)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(w)},p),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(p,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const P=this._onEaseEnd;delete this._onEaseEnd,P.call(this,w)}if(!p){const P=this.handlers;P&&P.stop(!1)}return this}_ease(p,w,P){P.animate===!1||P.duration===0?(p(1),w()):(this._easeStart=d.h.now(),this._easeOptions=P,this._onEaseFrame=p,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(p,w){p=d.b5(p,-180,180);const P=Math.abs(p-w);return Math.abs(p-360-w)<P&&(p-=360),Math.abs(p+360-w)<P&&(p+=360),p}_normalizeCenter(p){const w=this.transform;if(!w.renderWorldCopies||w.lngRange)return;const P=p.lng-w.center.lng;p.lng+=P>180?-360:P<-180?360:0}queryTerrainElevation(p){return this.terrain?this.terrain.getElevationForLngLatZoom(d.L.convert(p),this.transform.tileZoom)-this.transform.elevation:null}}class Bs{constructor(p={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=w=>{!w||w.sourceDataType!=="metadata"&&w.sourceDataType!=="visibility"&&w.dataType!=="style"&&w.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=p}getDefaultPosition(){return"bottom-right"}onAdd(p){return this._map=p,this._compact=this.options&&this.options.compact,this._container=S.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=S.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){S.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(p,w){const P=this._map._getUIString(`AttributionControl.${w}`);p.title=P,p.setAttribute("aria-label",P)}_updateAttributions(){if(!this._map.style)return;let p=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?p=p.concat(this.options.customAttribution.map(z=>typeof z!="string"?"":z)):typeof this.options.customAttribution=="string"&&p.push(this.options.customAttribution)),this._map.style.stylesheet){const z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}const w=this._map.style.sourceCaches;for(const z in w){const N=w[z];if(N.used||N.usedForTerrain){const J=N.getSource();J.attribution&&p.indexOf(J.attribution)<0&&p.push(J.attribution)}}p=p.filter(z=>String(z).trim()),p.sort((z,N)=>z.length-N.length),p=p.filter((z,N)=>{for(let J=N+1;J<p.length;J++)if(p[J].indexOf(z)>=0)return!1;return!0});const P=p.join(" | ");P!==this._attribHTML&&(this._attribHTML=P,p.length?(this._innerContainer.innerHTML=P,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ao{constructor(p={}){this._updateCompact=()=>{const w=this._container.children;if(w.length){const P=w[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&P.classList.add("maplibregl-compact"):P.classList.remove("maplibregl-compact")}},this.options=p}getDefaultPosition(){return"bottom-left"}onAdd(p){this._map=p,this._compact=this.options&&this.options.compact,this._container=S.create("div","maplibregl-ctrl");const w=S.create("a","maplibregl-ctrl-logo");return w.target="_blank",w.rel="noopener nofollow",w.href="https://maplibre.org/",w.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),w.setAttribute("rel","noopener nofollow"),this._container.appendChild(w),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){S.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class id{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(p){const w=++this._id;return this._queue.push({callback:p,id:w,cancelled:!1}),w}remove(p){const w=this._currentlyRunning,P=w?this._queue.concat(w):this._queue;for(const z of P)if(z.id===p)return void(z.cancelled=!0)}run(p=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const w=this._currentlyRunning=this._queue;this._queue=[];for(const P of w)if(!P.cancelled&&(P.callback(p),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const rf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var sg=d.Q([{name:"a_pos3d",type:"Int16",components:3}]);class lg extends d.E{constructor(p){super(),this.sourceCache=p,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,p.usedForTerrain=!0,p.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(p,w){this.sourceCache.update(p,w),this._renderableTilesKeys=[];const P={};for(const z of p.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:w}))P[z.key]=!0,this._renderableTilesKeys.push(z.key),this._tiles[z.key]||(z.posMatrix=new Float64Array(16),d.aS(z.posMatrix,0,d.N,0,d.N,0,1),this._tiles[z.key]=new De(z,this.tileSize));for(const z in this._tiles)P[z]||delete this._tiles[z]}freeRtt(p){for(const w in this._tiles){const P=this._tiles[w];(!p||P.tileID.equals(p)||P.tileID.isChildOf(p)||p.isChildOf(P.tileID))&&(P.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(p=>this.getTileByID(p))}getTileByID(p){return this._tiles[p]}getTerrainCoords(p){const w={};for(const P of this._renderableTilesKeys){const z=this._tiles[P].tileID;if(z.canonical.equals(p.canonical)){const N=p.clone();N.posMatrix=new Float64Array(16),d.aS(N.posMatrix,0,d.N,0,d.N,0,1),w[P]=N}else if(z.canonical.isChildOf(p.canonical)){const N=p.clone();N.posMatrix=new Float64Array(16);const J=z.canonical.z-p.canonical.z,ee=z.canonical.x-(z.canonical.x>>J<<J),se=z.canonical.y-(z.canonical.y>>J<<J),ye=d.N>>J;d.aS(N.posMatrix,0,ye,0,ye,0,1),d.$(N.posMatrix,N.posMatrix,[-ee*ye,-se*ye,0]),w[P]=N}else if(p.canonical.isChildOf(z.canonical)){const N=p.clone();N.posMatrix=new Float64Array(16);const J=p.canonical.z-z.canonical.z,ee=p.canonical.x-(p.canonical.x>>J<<J),se=p.canonical.y-(p.canonical.y>>J<<J),ye=d.N>>J;d.aS(N.posMatrix,0,d.N,0,d.N,0,1),d.$(N.posMatrix,N.posMatrix,[ee*ye,se*ye,0]),d.a0(N.posMatrix,N.posMatrix,[1/2**J,1/2**J,0]),w[P]=N}}return w}getSourceTile(p,w){const P=this.sourceCache._source;let z=p.overscaledZ-this.deltaZoom;if(z>P.maxzoom&&(z=P.maxzoom),z<P.minzoom)return null;this._sourceTileCache[p.key]||(this._sourceTileCache[p.key]=p.scaledTo(z).key);let N=this.sourceCache.getTileByID(this._sourceTileCache[p.key]);if((!N||!N.dem)&&w)for(;z>=P.minzoom&&(!N||!N.dem);)N=this.sourceCache.getTileByID(p.scaledTo(z--).key);return N}tilesAfterTime(p=Date.now()){return Object.values(this._tiles).filter(w=>w.timeAdded>=p)}}class $y{constructor(p,w,P){this.painter=p,this.sourceCache=new lg(w),this.options=P,this.exaggeration=typeof P.exaggeration=="number"?P.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(p,w,P,z=d.N){var N;if(!(w>=0&&w<z&&P>=0&&P<z))return 0;const J=this.getTerrainData(p),ee=(N=J.tile)===null||N===void 0?void 0:N.dem;if(!ee)return 0;const se=function(st,ht,it){var Vt=ht[0],ar=ht[1];return st[0]=it[0]*Vt+it[4]*ar+it[12],st[1]=it[1]*Vt+it[5]*ar+it[13],st}([],[w/z*d.N,P/z*d.N],J.u_terrain_matrix),ye=[se[0]*ee.dim,se[1]*ee.dim],we=Math.floor(ye[0]),Ie=Math.floor(ye[1]),We=ye[0]-we,at=ye[1]-Ie;return ee.get(we,Ie)*(1-We)*(1-at)+ee.get(we+1,Ie)*We*(1-at)+ee.get(we,Ie+1)*(1-We)*at+ee.get(we+1,Ie+1)*We*at}getElevationForLngLatZoom(p,w){const{tileID:P,mercatorX:z,mercatorY:N}=this._getOverscaledTileIDFromLngLatZoom(p,w);return this.getElevation(P,z%d.N,N%d.N,d.N)}getElevation(p,w,P,z=d.N){return this.getDEMElevation(p,w,P,z)*this.exaggeration}getTerrainData(p){if(!this._emptyDemTexture){const z=this.painter.context,N=new d.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(z,N,z.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(z,new d.R({width:1,height:1}),z.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=d.ao([])}const w=this.sourceCache.getSourceTile(p,!0);if(w&&w.dem&&(!w.demTexture||w.needsTerrainPrepare)){const z=this.painter.context;w.demTexture=this.painter.getTileTexture(w.dem.stride),w.demTexture?w.demTexture.update(w.dem.getPixels(),{premultiply:!1}):w.demTexture=new oe(z,w.dem.getPixels(),z.gl.RGBA,{premultiply:!1}),w.demTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),w.needsTerrainPrepare=!1}const P=w&&w+w.tileID.key+p.key;if(P&&!this._demMatrixCache[P]){const z=this.sourceCache.sourceCache._source.maxzoom;let N=p.canonical.z-w.tileID.canonical.z;p.overscaledZ>p.canonical.z&&(p.canonical.z>=z?N=p.canonical.z-z:d.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const J=p.canonical.x-(p.canonical.x>>N<<N),ee=p.canonical.y-(p.canonical.y>>N<<N),se=d.bc(new Float64Array(16),[1/(d.N<<N),1/(d.N<<N),0]);d.$(se,se,[J*d.N,ee*d.N,0]),this._demMatrixCache[p.key]={matrix:se,coord:p}}return{u_depth:2,u_terrain:3,u_terrain_dim:w&&w.dem&&w.dem.dim||1,u_terrain_matrix:P?this._demMatrixCache[p.key].matrix:this._emptyDemMatrix,u_terrain_unpack:w&&w.dem&&w.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(w&&w.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:w}}getFramebuffer(p){const w=this.painter,P=w.width/devicePixelRatio,z=w.height/devicePixelRatio;return!this._fbo||this._fbo.width===P&&this._fbo.height===z||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(w.context,{width:P,height:z,data:null},w.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(w.context.gl.NEAREST,w.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(w.context,{width:P,height:z,data:null},w.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(w.context.gl.NEAREST,w.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=w.context.createFramebuffer(P,z,!0,!1),this._fbo.depthAttachment.set(w.context.createRenderbuffer(w.context.gl.DEPTH_COMPONENT16,P,z))),this._fbo.colorAttachment.set(p==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const p=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const w=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let N=0,J=0;N<this._coordsTextureSize;N++)for(let ee=0;ee<this._coordsTextureSize;ee++,J+=4)w[J+0]=255&ee,w[J+1]=255&N,w[J+2]=ee>>8<<4|N>>8,w[J+3]=0;const P=new d.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(w.buffer)),z=new oe(p,P,p.gl.RGBA,{premultiply:!1});return z.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._coordsTexture=z,z}pointCoordinate(p){const w=new Uint8Array(4),P=this.painter.context,z=P.gl;P.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),z.readPixels(p.x,this.painter.height/devicePixelRatio-p.y-1,1,1,z.RGBA,z.UNSIGNED_BYTE,w),P.bindFramebuffer.set(null);const N=w[0]+(w[2]>>4<<8),J=w[1]+((15&w[2])<<8),ee=this.coordsIndex[255-w[3]],se=ee&&this.sourceCache.getTileByID(ee);if(!se)return null;const ye=this._coordsTextureSize,we=(1<<se.tileID.canonical.z)*ye;return new d.U(this._allowMercatorOverflow(p,(se.tileID.canonical.x*ye+N)/we),(se.tileID.canonical.y*ye+J)/we,this.getElevation(se.tileID,N,J,ye))}getTerrainMesh(){if(this._mesh)return this._mesh;const p=this.painter.context,w=new d.bd,P=new d.b0,z=this.meshSize,N=d.N/z,J=z*z;for(let Ie=0;Ie<=z;Ie++)for(let We=0;We<=z;We++)w.emplaceBack(We*N,Ie*N,0);for(let Ie=0;Ie<J;Ie+=z+1)for(let We=0;We<z;We++)P.emplaceBack(We+Ie,z+We+Ie+1,z+We+Ie+2),P.emplaceBack(We+Ie,z+We+Ie+2,We+Ie+1);const ee=w.length,se=ee+2*(z+1);for(const Ie of[0,1])for(let We=0;We<=z;We++)for(const at of[0,1])w.emplaceBack(We*N,Ie*d.N,at);for(let Ie=0;Ie<2*z;Ie+=2)P.emplaceBack(se+Ie,se+Ie+1,se+Ie+3),P.emplaceBack(se+Ie,se+Ie+3,se+Ie+2),P.emplaceBack(ee+Ie,ee+Ie+3,ee+Ie+1),P.emplaceBack(ee+Ie,ee+Ie+2,ee+Ie+3);const ye=w.length,we=ye+2*(z+1);for(const Ie of[0,1])for(let We=0;We<=z;We++)for(const at of[0,1])w.emplaceBack(Ie*d.N,We*N,at);for(let Ie=0;Ie<2*z;Ie+=2)P.emplaceBack(ye+Ie,ye+Ie+1,ye+Ie+3),P.emplaceBack(ye+Ie,ye+Ie+3,ye+Ie+2),P.emplaceBack(we+Ie,we+Ie+3,we+Ie+1),P.emplaceBack(we+Ie,we+Ie+2,we+Ie+3);return this._mesh={indexBuffer:p.createIndexBuffer(P),vertexBuffer:p.createVertexBuffer(w,sg.members),segments:d.S.simpleSegment(0,0,w.length,P.length)},this._mesh}getMeshFrameDelta(p){return 2*Math.PI*d.be/Math.pow(2,p)/5}getMinTileElevationForLngLatZoom(p,w){var P;const{tileID:z}=this._getOverscaledTileIDFromLngLatZoom(p,w);return(P=this.getMinMaxElevation(z).minElevation)!==null&&P!==void 0?P:0}getMinMaxElevation(p){const w=this.getTerrainData(p).tile,P={minElevation:null,maxElevation:null};return w&&w.dem&&(P.minElevation=w.dem.min*this.exaggeration,P.maxElevation=w.dem.max*this.exaggeration),P}_getOverscaledTileIDFromLngLatZoom(p,w){const P=d.U.fromLngLat(p.wrap()),z=(1<<w)*d.N,N=P.x*z,J=P.y*z,ee=Math.floor(N/d.N),se=Math.floor(J/d.N);return{tileID:new d.O(w,0,w,ee,se),mercatorX:N,mercatorY:J}}_allowMercatorOverflow(p,w){const P=p.x<this.painter.width/2;let z=d.bf(w);const N=this.painter.transform.center.lng;return P&&Math.sign(z)>0&&Math.sign(N)<0||!P&&Math.sign(z)<0&&Math.sign(N)>0?(z=360*Math.sign(N)+z,d.G(z)):w}}class nf{constructor(p,w,P){this._context=p,this._size=w,this._tileSize=P,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const p of this._objects)p.texture.destroy(),p.fbo.destroy()}_createObject(p){const w=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),P=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return P.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),w.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),w.colorAttachment.set(P.texture),{id:p,fbo:w,texture:P,stamp:-1,inUse:!1}}getObjectForId(p){return this._objects[p]}useObject(p){p.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(w=>p.id!==w),this._recentlyUsed.push(p.id)}stampObject(p){p.stamp=++this._stamp}getOrCreateFreeObject(){for(const w of this._recentlyUsed)if(!this._objects[w].inUse)return this._objects[w];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const p=this._createObject(this._objects.length);return this._objects.push(p),p}freeObject(p){p.inUse=!1}freeAllObjects(){for(const p of this._objects)this.freeObject(p)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(p=>!p.inUse)===!1}}const Wa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class of{constructor(p,w){this.painter=p,this.terrain=w,this.pool=new nf(p.context,30,w.sourceCache.tileSize*w.qualityFactor)}destruct(){this.pool.destruct()}getTexture(p){return this.pool.getObjectForId(p.rtt[this._stacks.length-1].id).texture}prepareForRender(p,w){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=p._order.filter(P=>!p._layers[P].isHidden(w)),this._coordsDescendingInv={};for(const P in p.sourceCaches){this._coordsDescendingInv[P]={};const z=p.sourceCaches[P].getVisibleCoordinates();for(const N of z){const J=this.terrain.sourceCache.getTerrainCoords(N);for(const ee in J)this._coordsDescendingInv[P][ee]||(this._coordsDescendingInv[P][ee]=[]),this._coordsDescendingInv[P][ee].push(J[ee])}}this._coordsDescendingInvStr={};for(const P of p._order){const z=p._layers[P],N=z.source;if(Wa[z.type]&&!this._coordsDescendingInvStr[N]){this._coordsDescendingInvStr[N]={};for(const J in this._coordsDescendingInv[N])this._coordsDescendingInvStr[N][J]=this._coordsDescendingInv[N][J].map(ee=>ee.key).sort().join()}}for(const P of this._renderableTiles)for(const z in this._coordsDescendingInvStr){const N=this._coordsDescendingInvStr[z][P.tileID.key];N&&N!==P.rttCoords[z]&&(P.rtt=[])}}renderLayer(p){if(p.isHidden(this.painter.transform.zoom))return!1;const w=p.type,P=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===p.id;if(Wa[w]&&(this._prevType&&Wa[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(p.id),!z))return!0;if(Wa[this._prevType]||Wa[w]&&z){this._prevType=w;const N=this._stacks.length-1,J=this._stacks[N]||[];for(const ee of this._renderableTiles){if(this.pool.isFull()&&($o(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ee),ee.rtt[N]){const ye=this.pool.getObjectForId(ee.rtt[N].id);if(ye.stamp===ee.rtt[N].stamp){this.pool.useObject(ye);continue}}const se=this.pool.getOrCreateFreeObject();this.pool.useObject(se),this.pool.stampObject(se),ee.rtt[N]={id:se.id,stamp:se.stamp},P.context.bindFramebuffer.set(se.fbo.framebuffer),P.context.clear({color:d.aT.transparent,stencil:0}),P.currentStencilSource=void 0;for(let ye=0;ye<J.length;ye++){const we=P.style._layers[J[ye]],Ie=we.source?this._coordsDescendingInv[we.source][ee.tileID.key]:[ee.tileID];P.context.viewport.set([0,0,se.fbo.width,se.fbo.height]),P._renderTileClippingMasks(we,Ie),P.renderLayer(P,P.style.sourceCaches[we.source],we,Ie),we.source&&(ee.rttCoords[we.source]=this._coordsDescendingInvStr[we.source][ee.tileID.key])}}return $o(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Wa[w]}return!1}}const Pn=C,Vn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:d.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},el=L=>{L.touchstart=L.dragStart,L.touchmoveWindow=L.dragMove,L.touchend=L.dragEnd},af={showCompass:!0,showZoom:!0,visualizePitch:!1};class vp{constructor(p,w,P=!1){this.mousedown=J=>{this.startMouse(d.e({},J,{ctrlKey:!0,preventDefault:()=>J.preventDefault()}),S.mousePos(this.element,J)),S.addEventListener(window,"mousemove",this.mousemove),S.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=J=>{this.moveMouse(J,S.mousePos(this.element,J))},this.mouseup=J=>{this.mouseRotate.dragEnd(J),this.mousePitch&&this.mousePitch.dragEnd(J),this.offTemp()},this.touchstart=J=>{J.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=S.touchPos(this.element,J.targetTouches)[0],this.startTouch(J,this._startPos),S.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.addEventListener(window,"touchend",this.touchend))},this.touchmove=J=>{J.targetTouches.length!==1?this.reset():(this._lastPos=S.touchPos(this.element,J.targetTouches)[0],this.moveTouch(J,this._lastPos))},this.touchend=J=>{J.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const z=p.dragRotate._mouseRotate.getClickTolerance(),N=p.dragRotate._mousePitch.getClickTolerance();this.element=w,this.mouseRotate=Gc({clickTolerance:z,enable:!0}),this.touchRotate=(({enable:J,clickTolerance:ee,bearingDegreesPerPixelMoved:se=.8})=>{const ye=new ng;return new Hc({clickTolerance:ee,move:(we,Ie)=>({bearingDelta:(Ie.x-we.x)*se}),moveStateManager:ye,enable:J,assignEvents:el})})({clickTolerance:z,enable:!0}),this.map=p,P&&(this.mousePitch=Yl({clickTolerance:N,enable:!0}),this.touchPitch=(({enable:J,clickTolerance:ee,pitchDegreesPerPixelMoved:se=-.5})=>{const ye=new ng;return new Hc({clickTolerance:ee,move:(we,Ie)=>({pitchDelta:(Ie.y-we.y)*se}),moveStateManager:ye,enable:J,assignEvents:el})})({clickTolerance:N,enable:!0})),S.addEventListener(w,"mousedown",this.mousedown),S.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),S.addEventListener(w,"touchcancel",this.reset)}startMouse(p,w){this.mouseRotate.dragStart(p,w),this.mousePitch&&this.mousePitch.dragStart(p,w),S.disableDrag()}startTouch(p,w){this.touchRotate.dragStart(p,w),this.touchPitch&&this.touchPitch.dragStart(p,w),S.disableDrag()}moveMouse(p,w){const P=this.map,{bearingDelta:z}=this.mouseRotate.dragMove(p,w)||{};if(z&&P.setBearing(P.getBearing()+z),this.mousePitch){const{pitchDelta:N}=this.mousePitch.dragMove(p,w)||{};N&&P.setPitch(P.getPitch()+N)}}moveTouch(p,w){const P=this.map,{bearingDelta:z}=this.touchRotate.dragMove(p,w)||{};if(z&&P.setBearing(P.getBearing()+z),this.touchPitch){const{pitchDelta:N}=this.touchPitch.dragMove(p,w)||{};N&&P.setPitch(P.getPitch()+N)}}off(){const p=this.element;S.removeEventListener(p,"mousedown",this.mousedown),S.removeEventListener(p,"touchstart",this.touchstart,{passive:!1}),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend),S.removeEventListener(p,"touchcancel",this.reset),this.offTemp()}offTemp(){S.enableDrag(),S.removeEventListener(window,"mousemove",this.mousemove),S.removeEventListener(window,"mouseup",this.mouseup),S.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),S.removeEventListener(window,"touchend",this.touchend)}}let sa;function _p(L,p,w){if(L=new d.L(L.lng,L.lat),p){const P=new d.L(L.lng-360,L.lat),z=new d.L(L.lng+360,L.lat),N=w.locationPoint(L).distSqr(p);w.locationPoint(P).distSqr(p)<N?L=P:w.locationPoint(z).distSqr(p)<N&&(L=z)}for(;Math.abs(L.lng-w.center.lng)>180;){const P=w.locationPoint(L);if(P.x>=0&&P.y>=0&&P.x<=w.width&&P.y<=w.height)break;L.lng>w.center.lng?L.lng-=360:L.lng+=360}return L}const tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function By(L,p,w){const P=L.classList;for(const z in tl)P.remove(`maplibregl-${w}-anchor-${z}`);P.add(`maplibregl-${w}-anchor-${p}`)}class Kc extends d.E{constructor(p){if(super(),this._onKeyPress=w=>{const P=w.code,z=w.charCode||w.keyCode;P!=="Space"&&P!=="Enter"&&z!==32&&z!==13||this.togglePopup()},this._onMapClick=w=>{const P=w.originalEvent.target,z=this._element;this._popup&&(P===z||z.contains(P))&&this.togglePopup()},this._update=w=>{if(!this._map)return;const P=this._map.loaded()&&!this._map.isMoving();(w?.type==="terrain"||w?.type==="render"&&!P)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=_p(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let z="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?z=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(z=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let N="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?N="rotateX(0deg)":this._pitchAlignment==="map"&&(N=`rotateX(${this._map.getPitch()}deg)`),w&&w.type!=="moveend"||(this._pos=this._pos.round()),S.setTransform(this._element,`${tl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${N} ${z}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const J=this._map.unproject(this._pos),ee=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=J.distanceTo(this._lngLat)>20*ee?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=w=>{if(!this._isDragging){const P=this._clickTolerance||this._map._clickTolerance;this._isDragging=w.point.dist(this._pointerdownPos)>=P}this._isDragging&&(this._pos=w.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new d.k("dragstart"))),this.fire(new d.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new d.k("dragend")),this._state="inactive"},this._addDragHandler=w=>{this._element.contains(w.originalEvent.target)&&(w.preventDefault(),this._positionDelta=w.point.sub(this._pos).add(this._offset),this._pointerdownPos=w.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=p&&p.anchor||"center",this._color=p&&p.color||"#3FB1CE",this._scale=p&&p.scale||1,this._draggable=p&&p.draggable||!1,this._clickTolerance=p&&p.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=p&&p.rotation||0,this._rotationAlignment=p&&p.rotationAlignment||"auto",this._pitchAlignment=p&&p.pitchAlignment&&p.pitchAlignment!=="auto"?p.pitchAlignment:this._rotationAlignment,p&&p.element)this._element=p.element,this._offset=d.P.convert(p&&p.offset||[0,0]);else{this._defaultMarker=!0,this._element=S.create("div"),this._element.setAttribute("aria-label","Map marker");const w=S.createNS("http://www.w3.org/2000/svg","svg"),P=41,z=27;w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height",`${P}px`),w.setAttributeNS(null,"width",`${z}px`),w.setAttributeNS(null,"viewBox",`0 0 ${z} ${P}`);const N=S.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"stroke","none"),N.setAttributeNS(null,"stroke-width","1"),N.setAttributeNS(null,"fill","none"),N.setAttributeNS(null,"fill-rule","evenodd");const J=S.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill-rule","nonzero");const ee=S.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ee.setAttributeNS(null,"fill","#000000");const se=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Vt of se){const ar=S.createNS("http://www.w3.org/2000/svg","ellipse");ar.setAttributeNS(null,"opacity","0.04"),ar.setAttributeNS(null,"cx","10.5"),ar.setAttributeNS(null,"cy","5.80029008"),ar.setAttributeNS(null,"rx",Vt.rx),ar.setAttributeNS(null,"ry",Vt.ry),ee.appendChild(ar)}const ye=S.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"fill",this._color);const we=S.createNS("http://www.w3.org/2000/svg","path");we.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ye.appendChild(we);const Ie=S.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"fill","#000000");const We=S.createNS("http://www.w3.org/2000/svg","path");We.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ie.appendChild(We);const at=S.createNS("http://www.w3.org/2000/svg","g");at.setAttributeNS(null,"transform","translate(6.0, 7.0)"),at.setAttributeNS(null,"fill","#FFFFFF");const st=S.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ht=S.createNS("http://www.w3.org/2000/svg","circle");ht.setAttributeNS(null,"fill","#000000"),ht.setAttributeNS(null,"opacity","0.25"),ht.setAttributeNS(null,"cx","5.5"),ht.setAttributeNS(null,"cy","5.5"),ht.setAttributeNS(null,"r","5.4999962");const it=S.createNS("http://www.w3.org/2000/svg","circle");it.setAttributeNS(null,"fill","#FFFFFF"),it.setAttributeNS(null,"cx","5.5"),it.setAttributeNS(null,"cy","5.5"),it.setAttributeNS(null,"r","5.4999962"),st.appendChild(ht),st.appendChild(it),J.appendChild(ee),J.appendChild(ye),J.appendChild(Ie),J.appendChild(at),J.appendChild(st),w.appendChild(J),w.setAttributeNS(null,"height",P*this._scale+"px"),w.setAttributeNS(null,"width",z*this._scale+"px"),this._element.appendChild(w),this._offset=d.P.convert(p&&p.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",w=>{w.preventDefault()}),this._element.addEventListener("mousedown",w=>{w.preventDefault()}),By(this._element,this._anchor,"marker"),p&&p.className)for(const w of p.className.split(" "))this._element.classList.add(w);this._popup=null}addTo(p){return this.remove(),this._map=p,p.getCanvasContainer().appendChild(this._element),p.on("move",this._update),p.on("moveend",this._update),p.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),S.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=d.L.convert(p),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(p){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),p){if(!("offset"in p.options)){const z=Math.abs(13.5)/Math.SQRT2;p.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[z,-1*(38.1-13.5+z)],"bottom-right":[-z,-1*(38.1-13.5+z)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=p,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const p=this._popup;return p?(p.isOpen()?p.remove():p.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(p){return this._offset=d.P.convert(p),this._update(),this}addClassName(p){this._element.classList.add(p)}removeClassName(p){this._element.classList.remove(p)}toggleClassName(p){return this._element.classList.toggle(p)}setDraggable(p){return this._draggable=!!p,this._map&&(p?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(p){return this._rotation=p||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(p){return this._rotationAlignment=p||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(p){return this._pitchAlignment=p&&p!=="auto"?p:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const la={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Bo=0,od=!1;const lh={maxWidth:100,unit:"metric"};function sf(L,p,w){const P=w&&w.maxWidth||100,z=L._container.clientHeight/2,N=L.unproject([0,z]),J=L.unproject([P,z]),ee=N.distanceTo(J);if(w&&w.unit==="imperial"){const se=3.2808*ee;se>5280?Zc(p,P,se/5280,L._getUIString("ScaleControl.Miles")):Zc(p,P,se,L._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?Zc(p,P,ee/1852,L._getUIString("ScaleControl.NauticalMiles")):ee>=1e3?Zc(p,P,ee/1e3,L._getUIString("ScaleControl.Kilometers")):Zc(p,P,ee,L._getUIString("ScaleControl.Meters"))}function Zc(L,p,w,P){const z=function(N){const J=Math.pow(10,`${Math.floor(N)}`.length-1);let ee=N/J;return ee=ee>=10?10:ee>=5?5:ee>=3?3:ee>=2?2:ee>=1?1:function(se){const ye=Math.pow(10,Math.ceil(-Math.log(se)/Math.LN10));return Math.round(se*ye)/ye}(ee),J*ee}(w);L.style.width=p*(z/w)+"px",L.innerHTML=`${z}&nbsp;${P}`}const cg={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ad=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function sd(L){if(L){if(typeof L=="number"){const p=Math.round(Math.abs(L)/Math.SQRT2);return{center:new d.P(0,0),top:new d.P(0,L),"top-left":new d.P(p,p),"top-right":new d.P(-p,p),bottom:new d.P(0,-L),"bottom-left":new d.P(p,-p),"bottom-right":new d.P(-p,-p),left:new d.P(L,0),right:new d.P(-L,0)}}if(L instanceof d.P||Array.isArray(L)){const p=d.P.convert(L);return{center:p,top:p,"top-left":p,"top-right":p,bottom:p,"bottom-left":p,"bottom-right":p,left:p,right:p}}return{center:d.P.convert(L.center||[0,0]),top:d.P.convert(L.top||[0,0]),"top-left":d.P.convert(L["top-left"]||[0,0]),"top-right":d.P.convert(L["top-right"]||[0,0]),bottom:d.P.convert(L.bottom||[0,0]),"bottom-left":d.P.convert(L["bottom-left"]||[0,0]),"bottom-right":d.P.convert(L["bottom-right"]||[0,0]),left:d.P.convert(L.left||[0,0]),right:d.P.convert(L.right||[0,0])}}return sd(new d.P(0,0))}const xp={extend:(L,...p)=>d.e(L,...p),run(L){L()},logToElement(L,p=!1,w="log"){const P=window.document.getElementById(w);P&&(p&&(P.innerHTML=""),P.innerHTML+=`<br>${L}`)}},bp=C;class Vi{static get version(){return bp}static get workerCount(){return Mt.workerCount}static set workerCount(p){Mt.workerCount=p}static get maxParallelImageRequests(){return d.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(p){d.c.MAX_PARALLEL_IMAGE_REQUESTS=p}static get workerUrl(){return d.c.WORKER_URL}static set workerUrl(p){d.c.WORKER_URL=p}static addProtocol(p,w){d.c.REGISTERED_PROTOCOLS[p]=w}static removeProtocol(p){delete d.c.REGISTERED_PROTOCOLS[p]}}return Vi.Map=class extends Ly{constructor(L){if(d.bg.mark(d.bh.create),(L=d.e({},Vn,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qh(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies),{bearingSnap:L.bearingSnap}),this._cooperativeGesturesOnWheel=p=>{this._onCooperativeGesture(p,p[this._metaKey],1)},this._contextLost=p=>{p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new d.k("webglcontextlost",{originalEvent:p}))},this._contextRestored=p=>{this._setupPainter(),this.resize(),this._update(),this.fire(new d.k("webglcontextrestored",{originalEvent:p}))},this._onMapScroll=p=>{if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=L.interactive,this._cooperativeGestures=L.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=L.maxTileCacheSize,this._maxTileCacheZoomLevels=L.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new id,this._controls=[],this._mapId=d.a2(),this._locale=d.e({},rf,L.locale),this._clickTolerance=L.clickTolerance,this._overridePixelRatio=L.pixelRatio,this._maxCanvasSize=L.maxCanvasSize,this.transformCameraUpdate=L.transformCameraUpdate,this._imageQueueHandle=Q.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(L.transformRequest),typeof L.container=="string"){if(this._container=document.getElementById(L.container),!this._container)throw new Error(`Container '${L.container}' not found.`)}else{if(!(L.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let p=!1;const w=Zt(P=>{this._trackResize&&!this._removed&&this.resize(P)._update()},50);this._resizeObserver=new ResizeObserver(P=>{p?w(P):p=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ag(this,L),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=L.hash&&new ed(typeof L.hash=="string"&&L.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,d.e({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,this._validateStyle=L.validateStyle,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new Bs({customAttribution:L.customAttribution})),L.maplibreLogo&&this.addControl(new Ao,L.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new d.k(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new d.k(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new d.k("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(L,p){if(p===void 0&&(p=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new d.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const w=L.onAdd(this);this._controls.push(L);const P=this._controlPositions[p];return p.indexOf("bottom")!==-1?P.insertBefore(w,P.firstChild):P.appendChild(w),this}removeControl(L){if(!L||!L.onRemove)return this.fire(new d.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const p=this._controls.indexOf(L);return p>-1&&this._controls.splice(p,1),L.onRemove(this),this}hasControl(L){return this._controls.indexOf(L)>-1}calculateCameraOptionsFromTo(L,p,w,P){return P==null&&this.terrain&&(P=this.terrain.getElevationForLngLatZoom(w,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(L,p,w,P)}resize(L){var p;const w=this._containerDimensions(),P=w[0],z=w[1],N=this._getClampedPixelRatio(P,z);if(this._resizeCanvas(P,z,N),this.painter.resize(P,z,N),this.painter.overLimit()){const ee=this.painter.context.gl;this._maxCanvasSize=[ee.drawingBufferWidth,ee.drawingBufferHeight];const se=this._getClampedPixelRatio(P,z);this._resizeCanvas(P,z,se),this.painter.resize(P,z,se)}this.transform.resize(P,z),(p=this._requestedCameraState)===null||p===void 0||p.resize(P,z);const J=!this._moving;return J&&(this.stop(),this.fire(new d.k("movestart",L)).fire(new d.k("move",L))),this.fire(new d.k("resize",L)),J&&this.fire(new d.k("moveend",L)),this}_getClampedPixelRatio(L,p){const{0:w,1:P}=this._maxCanvasSize,z=this.getPixelRatio(),N=L*z,J=p*z;return Math.min(N>w?w/N:1,J>P?P/J:1)*z}getPixelRatio(){var L;return(L=this._overridePixelRatio)!==null&&L!==void 0?L:devicePixelRatio}setPixelRatio(L){this._overridePixelRatio=L,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(L){return this.transform.setMaxBounds(St.convert(L)),this._update()}setMinZoom(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(L){if((L=L??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(L){return this.transform.renderWorldCopies=L,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(L){return this._cooperativeGestures=L,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(L){return this.transform.locationPoint(d.L.convert(L),this.style&&this.terrain)}unproject(L){return this.transform.pointLocation(d.P.convert(L),this.terrain)}isMoving(){var L;return this._moving||((L=this.handlers)===null||L===void 0?void 0:L.isMoving())}isZooming(){var L;return this._zooming||((L=this.handlers)===null||L===void 0?void 0:L.isZooming())}isRotating(){var L;return this._rotating||((L=this.handlers)===null||L===void 0?void 0:L.isRotating())}_createDelegatedListener(L,p,w){if(L==="mouseenter"||L==="mouseover"){let P=!1;return{layer:p,listener:w,delegates:{mousemove:N=>{const J=this.getLayer(p)?this.queryRenderedFeatures(N.point,{layers:[p]}):[];J.length?P||(P=!0,w.call(this,new ls(L,this,N.originalEvent,{features:J}))):P=!1},mouseout:()=>{P=!1}}}}if(L==="mouseleave"||L==="mouseout"){let P=!1;return{layer:p,listener:w,delegates:{mousemove:J=>{(this.getLayer(p)?this.queryRenderedFeatures(J.point,{layers:[p]}):[]).length?P=!0:P&&(P=!1,w.call(this,new ls(L,this,J.originalEvent)))},mouseout:J=>{P&&(P=!1,w.call(this,new ls(L,this,J.originalEvent)))}}}}{const P=z=>{const N=this.getLayer(p)?this.queryRenderedFeatures(z.point,{layers:[p]}):[];N.length&&(z.features=N,w.call(this,z),delete z.features)};return{layer:p,listener:w,delegates:{[L]:P}}}}on(L,p,w){if(w===void 0)return super.on(L,p);const P=this._createDelegatedListener(L,p,w);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(P);for(const z in P.delegates)this.on(z,P.delegates[z]);return this}once(L,p,w){if(w===void 0)return super.once(L,p);const P=this._createDelegatedListener(L,p,w);for(const z in P.delegates)this.once(z,P.delegates[z]);return this}off(L,p,w){return w===void 0?super.off(L,p):(this._delegatedListeners&&this._delegatedListeners[L]&&(P=>{const z=this._delegatedListeners[L];for(let N=0;N<z.length;N++){const J=z[N];if(J.layer===p&&J.listener===w){for(const ee in J.delegates)this.off(ee,J.delegates[ee]);return z.splice(N,1),this}}})(),this)}queryRenderedFeatures(L,p){if(!this.style)return[];let w;const P=L instanceof d.P||Array.isArray(L),z=P?L:[[0,0],[this.transform.width,this.transform.height]];if(p=p||(P?{}:L)||{},z instanceof d.P||typeof z[0]=="number")w=[d.P.convert(z)];else{const N=d.P.convert(z[0]),J=d.P.convert(z[1]);w=[N,new d.P(J.x,N.y),J,new d.P(N.x,J.y),N]}return this.style.queryRenderedFeatures(w,p,this.transform)}querySourceFeatures(L,p){return this.style.querySourceFeatures(L,p)}setStyle(L,p){return(p=d.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},p)).diff!==!1&&p.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,p),this):(this._localIdeographFontFamily=p.localIdeographFontFamily,this._updateStyle(L,p))}setTransformRequest(L){return this._requestManager.setTransformRequest(L),this}_getUIString(L){const p=this._locale[L];if(p==null)throw new Error(`Missing UI string '${L}'`);return p}_updateStyle(L,p){if(p.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(L,p));const w=this.style&&p.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!L)),L?(this.style=new ji(this,p||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L,p,w):this.style.loadJSON(L,p,w),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ji(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(L,p){if(typeof L=="string"){const w=this._requestManager.transformRequest(L,G.Style);d.f(w,(P,z)=>{P?this.fire(new d.j(P)):z&&this._updateDiff(z,p)})}else typeof L=="object"&&this._updateDiff(L,p)}_updateDiff(L,p){try{this.style.setState(L,p)&&this._update(!0)}catch(w){d.w(`Unable to perform style diff: ${w.message||w.error||w}.  Rebuilding the style from scratch.`),this._updateStyle(L,p)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():d.w("There is no style added to the map.")}addSource(L,p){return this._lazyInitEmptyStyle(),this.style.addSource(L,p),this._update(!0)}isSourceLoaded(L){const p=this.style&&this.style.sourceCaches[L];if(p!==void 0)return p.loaded();this.fire(new d.j(new Error(`There is no source with ID '${L}'`)))}setTerrain(L){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),L){const p=this.style.sourceCaches[L.source];if(!p)throw new Error(`cannot load terrain, because there exists no source with ID: ${L.source}`);for(const w in this.style._layers){const P=this.style._layers[w];P.type==="hillshade"&&P.source===L.source&&d.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new $y(this.painter,p,L),this.painter.renderToTexture=new of(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=w=>{w.dataType==="style"?this.terrain.sourceCache.freeRtt():w.dataType==="source"&&w.tile&&(w.sourceId!==L.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(w.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new d.k("terrain",{terrain:L})),this}getTerrain(){var L,p;return(p=(L=this.terrain)===null||L===void 0?void 0:L.options)!==null&&p!==void 0?p:null}areTilesLoaded(){const L=this.style&&this.style.sourceCaches;for(const p in L){const w=L[p]._tiles;for(const P in w){const z=w[P];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0}addSourceType(L,p,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,p,w)}removeSource(L){return this.style.removeSource(L),this._update(!0)}getSource(L){return this.style.getSource(L)}addImage(L,p,w={}){const{pixelRatio:P=1,sdf:z=!1,stretchX:N,stretchY:J,content:ee}=w;if(this._lazyInitEmptyStyle(),!(p instanceof HTMLImageElement||d.a(p))){if(p.width===void 0||p.height===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:se,height:ye,data:we}=p,Ie=p;return this.style.addImage(L,{data:new d.R({width:se,height:ye},new Uint8Array(we)),pixelRatio:P,stretchX:N,stretchY:J,content:ee,sdf:z,version:0,userImage:Ie}),Ie.onAdd&&Ie.onAdd(this,L),this}}{const{width:se,height:ye,data:we}=d.h.getImageData(p);this.style.addImage(L,{data:new d.R({width:se,height:ye},we),pixelRatio:P,stretchX:N,stretchY:J,content:ee,sdf:z,version:0})}}updateImage(L,p){const w=this.style.getImage(L);if(!w)return this.fire(new d.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const P=p instanceof HTMLImageElement||d.a(p)?d.h.getImageData(p):p,{width:z,height:N,data:J}=P;if(z===void 0||N===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(z!==w.data.width||N!==w.data.height)return this.fire(new d.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ee=!(p instanceof HTMLImageElement||d.a(p));return w.data.replace(J,ee),this.style.updateImage(L,w),this}getImage(L){return this.style.getImage(L)}hasImage(L){return L?!!this.style.getImage(L):(this.fire(new d.j(new Error("Missing required image id"))),!1)}removeImage(L){this.style.removeImage(L)}loadImage(L,p){Q.getImage(this._requestManager.transformRequest(L,G.Image),p)}listImages(){return this.style.listImages()}addLayer(L,p){return this._lazyInitEmptyStyle(),this.style.addLayer(L,p),this._update(!0)}moveLayer(L,p){return this.style.moveLayer(L,p),this._update(!0)}removeLayer(L){return this.style.removeLayer(L),this._update(!0)}getLayer(L){return this.style.getLayer(L)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(L,p,w){return this.style.setLayerZoomRange(L,p,w),this._update(!0)}setFilter(L,p,w={}){return this.style.setFilter(L,p,w),this._update(!0)}getFilter(L){return this.style.getFilter(L)}setPaintProperty(L,p,w,P={}){return this.style.setPaintProperty(L,p,w,P),this._update(!0)}getPaintProperty(L,p){return this.style.getPaintProperty(L,p)}setLayoutProperty(L,p,w,P={}){return this.style.setLayoutProperty(L,p,w,P),this._update(!0)}getLayoutProperty(L,p){return this.style.getLayoutProperty(L,p)}setGlyphs(L,p={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(L,p),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(L,p,w={}){return this._lazyInitEmptyStyle(),this.style.addSprite(L,p,w,P=>{P||this._update(!0)}),this}removeSprite(L){return this._lazyInitEmptyStyle(),this.style.removeSprite(L),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(L,p={}){return this._lazyInitEmptyStyle(),this.style.setSprite(L,p,w=>{w||this._update(!0)}),this}setLight(L,p={}){return this._lazyInitEmptyStyle(),this.style.setLight(L,p),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(L,p){return this.style.setFeatureState(L,p),this._update()}removeFeatureState(L,p){return this.style.removeFeatureState(L,p),this._update()}getFeatureState(L){return this.style.getFeatureState(L)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let L=0,p=0;return this._container&&(L=this._container.clientWidth||400,p=this._container.clientHeight||300),[L,p]}_setupContainer(){const L=this._container;L.classList.add("maplibregl-map");const p=this._canvasContainer=S.create("div","maplibregl-canvas-container",L);this._interactive&&p.classList.add("maplibregl-interactive"),this._canvas=S.create("canvas","maplibregl-canvas",p),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const w=this._containerDimensions(),P=this._getClampedPixelRatio(w[0],w[1]);this._resizeCanvas(w[0],w[1],P);const z=this._controlContainer=S.create("div","maplibregl-control-container",L),N=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(J=>{N[J]=S.create("div",`maplibregl-ctrl-${J} `,z)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=S.create("div","maplibregl-cooperative-gesture-screen",this._container);let L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${L}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){S.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(L,p,w){this._canvas.width=Math.floor(w*L),this._canvas.height=Math.floor(w*p),this._canvas.style.width=`${L}px`,this._canvas.style.height=`${p}px`}_setupPainter(){const L={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let p=null;this._canvas.addEventListener("webglcontextcreationerror",P=>{p={requestedAttributes:L},P&&(p.statusMessage=P.statusMessage,p.type=P.type)},{once:!0});const w=this._canvas.getContext("webgl2",L)||this._canvas.getContext("webgl",L);if(!w){const P="Failed to initialize WebGL";throw p?(p.message=P,new Error(JSON.stringify(p))):new Error(P)}this.painter=new Vc(w,this.transform),R.testSupport(w)}_onCooperativeGesture(L,p,w){return!p&&w<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(L){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(L){return this._update(),this._renderTaskQueue.add(L)}_cancelRenderFrame(L){this._renderTaskQueue.remove(L)}_render(L){const p=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),this._removed)return;let w=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,N=d.h.now();this.style.zoomHistory.update(z,N);const J=new d.a8(z,{now:N,fadeDuration:p,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ee=J.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(w=!0,this._crossFadingFactor=ee),this.style.update(J)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,p,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:p,showPadding:this.showPadding}),this.fire(new d.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,d.bg.mark(d.bh.load),this.fire(new d.k("load"))),this.style&&(this.style.hasTransitions()||w)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const P=this._sourcesDirty||this._styleDirty||this._placementDirty;return P||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.k("idle")),!this._loaded||this._fullyLoaded||P||(this._fullyLoaded=!0,d.bg.mark(d.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var L;this._hash&&this._hash.remove();for(const w of this._controls)w.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Q.removeThrottleControl(this._imageQueueHandle),(L=this._resizeObserver)===null||L===void 0||L.disconnect();const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),S.remove(this._canvasContainer),S.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),d.bg.clearMetrics(),this._removed=!0,this.fire(new d.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=d.h.frame(L=>{d.bg.frame(L),this._frame=null,this._render(L)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())}get showPadding(){return!!this._showPadding}set showPadding(L){this._showPadding!==L&&(this._showPadding=L,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())}get repaint(){return!!this._repaint}set repaint(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(L){this._vertices=L,this._update()}get version(){return Pn}getCameraTargetElevation(){return this.transform.elevation}},Vi.NavigationControl=class{constructor(L){this._updateZoomButtons=()=>{const p=this._map.getZoom(),w=p===this._map.getMaxZoom(),P=p===this._map.getMinZoom();this._zoomInButton.disabled=w,this._zoomOutButton.disabled=P,this._zoomInButton.setAttribute("aria-disabled",w.toString()),this._zoomOutButton.setAttribute("aria-disabled",P.toString())},this._rotateCompassArrow=()=>{const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p},this._setButtonTitle=(p,w)=>{const P=this._map._getUIString(`NavigationControl.${w}`);p.title=P,p.setAttribute("aria-label",P)},this.options=d.e({},af,L),this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",p=>p.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",p=>this._map.zoomIn({},{originalEvent:p})),S.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",p=>this._map.zoomOut({},{originalEvent:p})),S.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",p=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:p}):this._map.resetNorth({},{originalEvent:p})}),this._compassIcon=S.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){S.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(L,p){const w=S.create("button",L,this._container);return w.type="button",w.addEventListener("click",p),w}},Vi.GeolocateControl=class extends d.E{constructor(L){super(),this._onSuccess=p=>{if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new d.k("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new d.k("geolocate",p)),this._finish()}},this._updateCamera=p=>{const w=new d.L(p.coords.longitude,p.coords.latitude),P=p.coords.accuracy,z=this._map.getBearing(),N=d.e({bearing:z},this.options.fitBoundsOptions),J=St.fromLngLat(w,P);this._map.fitBounds(J,N,{geolocateSource:!0})},this._updateMarker=p=>{if(p){const w=new d.L(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=p=>{if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&od)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new d.k("error",p)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=p=>{if(this._map){if(this._container.addEventListener("contextmenu",w=>w.preventDefault()),this._geolocateButton=S.create("button","maplibregl-ctrl-geolocate",this._container),S.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){d.w("Geolocation support is not available so the GeolocateControl will be disabled.");const w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}else{const w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Kc({element:this._dotElement}),this._circleElement=S.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Kc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",w=>{w.geolocateSource||this._watchState!=="ACTIVE_LOCK"||w.originalEvent&&w.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new d.k("trackuserlocationend")))})}},this.options=d.e({},la,L)}onAdd(L){return this._map=L,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(p,w=!1){sa===void 0||w?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(P=>{sa=P.state!=="denied",p(sa)}).catch(()=>{sa=!!window.navigator.geolocation,p(sa)}):(sa=!!window.navigator.geolocation,p(sa)):p(sa)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),S.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bo=0,od=!1}_isOutOfMapMaxBounds(L){const p=this._map.getMaxBounds(),w=L.coords;return p&&(w.longitude<p.getWest()||w.longitude>p.getEast()||w.latitude<p.getSouth()||w.latitude>p.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const L=this._map.getBounds(),p=L.getSouthEast(),w=L.getNorthEast(),P=p.distanceTo(w),z=Math.ceil(this._accuracy/(P/this._map._container.clientHeight)*2);this._circleElement.style.width=`${z}px`,this._circleElement.style.height=`${z}px`}trigger(){if(!this._setup)return d.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new d.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bo--,od=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new d.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let L;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Bo++,Bo>1?(L={maximumAge:6e5,timeout:0},od=!0):(L=this.options.positionOptions,od=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,L)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Vi.AttributionControl=Bs,Vi.LogoControl=Ao,Vi.ScaleControl=class{constructor(L){this._onMove=()=>{sf(this._map,this._container,this.options)},this.setUnit=p=>{this.options.unit=p,sf(this._map,this._container,this.options)},this.options=d.e({},lh,L)}getDefaultPosition(){return"bottom-left"}onAdd(L){return this._map=L,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){S.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Vi.FullscreenControl=class extends d.E{constructor(L={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,L&&L.container&&(L.container instanceof HTMLElement?this._container=L.container:d.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){S.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const L=this._fullscreenButton=S.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);S.create("span","maplibregl-ctrl-icon",L).setAttribute("aria-hidden","true"),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new d.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new d.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Vi.TerrainControl=class{constructor(L){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=L}onAdd(L){return this._map=L,this._container=S.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=S.create("button","maplibregl-ctrl-terrain",this._container),S.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){S.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Vi.Popup=class extends d.E{constructor(L){super(),this.remove=()=>(this._content&&S.remove(this._content),this._container&&(S.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new d.k("close")),this),this._onMouseUp=p=>{this._update(p.point)},this._onMouseMove=p=>{this._update(p.point)},this._onDrag=p=>{this._update(p.point)},this._update=p=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=S.create("div","maplibregl-popup",this._map.getContainer()),this._tip=S.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const J of this.options.className.split(" "))this._container.classList.add(J);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=_p(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p)return;const w=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let P=this.options.anchor;const z=sd(this.options.offset);if(!P){const J=this._container.offsetWidth,ee=this._container.offsetHeight;let se;se=w.y+z.bottom.y<ee?["top"]:w.y>this._map.transform.height-ee?["bottom"]:[],w.x<J/2?se.push("left"):w.x>this._map.transform.width-J/2&&se.push("right"),P=se.length===0?"bottom":se.join("-")}const N=w.add(z[P]).round();S.setTransform(this._container,`${tl[P]} translate(${N.x}px,${N.y}px)`),By(this._container,P,"popup")},this._onClose=()=>{this.remove()},this.options=d.e(Object.create(cg),L)}addTo(L){return this._map&&this.remove(),this._map=L,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new d.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(L){return this._lngLat=d.L.convert(L),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(L){return this.setDOMContent(document.createTextNode(L))}setHTML(L){const p=document.createDocumentFragment(),w=document.createElement("body");let P;for(w.innerHTML=L;P=w.firstChild,P;)p.appendChild(P);return this.setDOMContent(p)}getMaxWidth(){var L;return(L=this._container)===null||L===void 0?void 0:L.style.maxWidth}setMaxWidth(L){return this.options.maxWidth=L,this._update(),this}setDOMContent(L){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=S.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(L),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(L){this._container&&this._container.classList.add(L)}removeClassName(L){this._container&&this._container.classList.remove(L)}setOffset(L){return this.options.offset=L,this._update(),this}toggleClassName(L){if(this._container)return this._container.classList.toggle(L)}_createCloseButton(){this.options.closeButton&&(this._closeButton=S.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const L=this._container.querySelector(ad);L&&L.focus()}},Vi.Marker=Kc,Vi.Style=ji,Vi.LngLat=d.L,Vi.LngLatBounds=St,Vi.Point=d.P,Vi.MercatorCoordinate=d.U,Vi.Evented=d.E,Vi.AJAXError=d.bi,Vi.config=d.c,Vi.CanvasSource=Rt,Vi.GeoJSONSource=Ct,Vi.ImageSource=zt,Vi.RasterDEMTileSource=ct,Vi.RasterTileSource=Tt,Vi.VectorTileSource=Ot,Vi.VideoSource=Nt,Vi.setRTLTextPlugin=d.bj,Vi.getRTLTextPluginStatus=d.bk,Vi.prewarm=function(){br().acquire(It)},Vi.clearPrewarmedResources=function(){const L=wr;L&&(L.isPreloaded()&&L.numActive()===1?(L.release(It),wr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},xp.extend(Vi,{isSafari:d.ac,getPerformanceMetrics:d.bg.getPerformanceMetrics}),Vi});var v=c;return v})})(lZ);var wMe=lZ.exports;const Q3e=Nd(wMe),SMe=E.createContext(null);function CMe(t,n){const o=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0,c=Array.isArray(n)?n[0]:n?n.x:0,m=Array.isArray(n)?n[1]:n?n.y:0;return o===c&&s===m}function mu(t,n){if(t===n)return!0;if(!t||!n)return!1;if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(!mu(t[o],n[o]))return!1;return!0}else if(Array.isArray(n))return!1;if(typeof t=="object"&&typeof n=="object"){const o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(const c of o)if(!n.hasOwnProperty(c)||!mu(t[c],n[c]))return!1;return!0}return!1}function EMe(t){const n=t.clone();return n.pixelsToGLUnits=t.pixelsToGLUnits,n}function sj(t,n){if(!t.getProjection)return;const o=t.getProjection(),s=n.getProjection();mu(o,s)||n.setProjection(o)}function lj(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function cj(t,n){const o=n.viewState||n;let s=!1;if("longitude"in o&&"latitude"in o){const c=t.center;t.center=new c.constructor(o.longitude,o.latitude),s=s||c!==t.center}if("zoom"in o){const c=t.zoom;t.zoom=o.zoom,s=s||c!==t.zoom}if("bearing"in o){const c=t.bearing;t.bearing=o.bearing,s=s||c!==t.bearing}if("pitch"in o){const c=t.pitch;t.pitch=o.pitch,s=s||c!==t.pitch}return o.padding&&!t.isPaddingEqual(o.padding)&&(s=!0,t.padding=o.padding),s}const TMe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function uj(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const n={};for(const s of t.layers)n[s.id]=s;const o=t.layers.map(s=>{let c=null;"interactive"in s&&(c=Object.assign({},s),delete c.interactive);const m=n[s.ref];if(m){c=c||Object.assign({},s),delete c.ref;for(const v of TMe)v in m&&(c[v]=m[v])}return c||s});return{...t,layers:o}}var hj={};const dj={version:8,sources:{},layers:[]},fj={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},MA={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},pj={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},IMe=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],MMe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class h0{constructor(n,o,s){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const m=this.props[pj[c.type]];m?m(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const m=this.props[fj[c.type]];m&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),m(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const m=this.props[MA[c.type]];m&&m(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=n,this.props=o,this._initialize(s)}get map(){return this._map}get transform(){return this._renderTransform}setProps(n){const o=this.props;this.props=n;const s=this._updateSettings(n,o);s&&this._createShadowTransform(this._map);const c=this._updateSize(n),m=this._updateViewState(n,!0);this._updateStyle(n,o),this._updateStyleComponents(n,o),this._updateHandlers(n,o),(s||c||m&&!this._map.isMoving())&&this.redraw()}static reuse(n,o){const s=h0.savedMaps.pop();if(!s)return null;const c=s.map,m=c.getContainer();for(o.className=m.className;m.childNodes.length>0;)o.appendChild(m.childNodes[0]);c._container=o;const v=c._resizeObserver;v&&(v.disconnect(),v.observe(o)),s.setProps({...n,styleDiffing:!1}),c.resize();const{initialViewState:d}=n;return d&&(d.bounds?c.fitBounds(d.bounds,{...d.fitBoundsOptions,duration:0}):s._updateViewState(d,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),s}_initialize(n){const{props:o}=this,{mapStyle:s=dj}=o,c={...o,...o.initialViewState,accessToken:o.mapboxAccessToken||PMe()||null,container:n,style:uj(s)},m=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[m.longitude||0,m.latitude||0],zoom:m.zoom||0,pitch:m.pitch||0,bearing:m.bearing||0}),o.gl){const R=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=R,o.gl)}const v=new this._MapClass(c);m.padding&&v.setPadding(m.padding),o.cursor&&(v.getCanvas().style.cursor=o.cursor),this._createShadowTransform(v);const d=v._render;v._render=R=>{this._inRender=!0,d.call(v,R),this._inRender=!1};const C=v._renderTaskQueue.run;v._renderTaskQueue.run=R=>{C.call(v._renderTaskQueue,R),this._onBeforeRepaint()},v.on("render",()=>this._onAfterRepaint());const S=v.fire;v.fire=this._fireEvent.bind(this,S),v.on("resize",()=>{this._renderTransform.resize(v.transform.width,v.transform.height)}),v.on("styledata",()=>{this._updateStyleComponents(this.props,{}),sj(v.transform,this._renderTransform)}),v.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const R in fj)v.on(R,this._onPointerEvent);for(const R in MA)v.on(R,this._onCameraEvent);for(const R in pj)v.on(R,this._onEvent);this._map=v}recycle(){const o=this.map.getContainer().querySelector("[mapboxgl-children]");o?.remove(),h0.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const n=this._map;!this._inRender&&n.style&&(n._frame&&(n._frame.cancel(),n._frame=null),n._render())}_createShadowTransform(n){const o=EMe(n.transform);n.painter.transform=o,this._renderTransform=o}_updateSize(n){const{viewState:o}=n;if(o){const s=this._map;if(o.width!==s.transform.width||o.height!==s.transform.height)return s.resize(),!0}return!1}_updateViewState(n,o){if(this._internalUpdate)return!1;const s=this._map,c=this._renderTransform,{zoom:m,pitch:v,bearing:d}=c,C=s.isMoving();C&&(c.cameraElevationReference="sea");const S=cj(c,{...lj(s.transform),...n});if(C&&(c.cameraElevationReference="ground"),S&&o){const R=this._deferredEvents;R.move=!0,R.zoom||(R.zoom=m!==c.zoom),R.rotate||(R.rotate=d!==c.bearing),R.pitch||(R.pitch=v!==c.pitch)}return C||cj(s.transform,n),S}_updateSettings(n,o){const s=this._map;let c=!1;for(const m of IMe)if(m in n&&!mu(n[m],o[m])){c=!0;const v=s[`set${m[0].toUpperCase()}${m.slice(1)}`];v?.call(s,n[m])}return c}_updateStyle(n,o){if(n.cursor!==o.cursor&&(this._map.getCanvas().style.cursor=n.cursor||""),n.mapStyle!==o.mapStyle){const{mapStyle:s=dj,styleDiffing:c=!0}=n,m={diff:c};return"localIdeographFontFamily"in n&&(m.localIdeographFontFamily=n.localIdeographFontFamily),this._map.setStyle(uj(s),m),!0}return!1}_updateStyleComponents(n,o){const s=this._map;let c=!1;return s.isStyleLoaded()&&("light"in n&&s.setLight&&!mu(n.light,o.light)&&(c=!0,s.setLight(n.light)),"fog"in n&&s.setFog&&!mu(n.fog,o.fog)&&(c=!0,s.setFog(n.fog)),"terrain"in n&&s.setTerrain&&!mu(n.terrain,o.terrain)&&(!n.terrain||s.getSource(n.terrain.source))&&(c=!0,s.setTerrain(n.terrain))),c}_updateHandlers(n,o){var s,c;const m=this._map;let v=!1;for(const d of MMe){const C=(s=n[d])!==null&&s!==void 0?s:!0,S=(c=o[d])!==null&&c!==void 0?c:!0;mu(C,S)||(v=!0,C?m[d].enable(C):m[d].disable())}return v}_queryRenderedFeatures(n){const o=this._map,s=o.transform,{interactiveLayerIds:c=[]}=this.props;try{return o.transform=this._renderTransform,o.queryRenderedFeatures(n,{layers:c.filter(o.getLayer.bind(o))})}catch{return[]}finally{o.transform=s}}_updateHover(n){var o;const{props:s}=this;if(s.interactiveLayerIds&&(s.onMouseMove||s.onMouseEnter||s.onMouseLeave)){const m=n.type,v=((o=this._hoveredFeatures)===null||o===void 0?void 0:o.length)>0,d=this._queryRenderedFeatures(n.point),C=d.length>0;!C&&v&&(n.type="mouseleave",this._onPointerEvent(n)),this._hoveredFeatures=d,C&&!v&&(n.type="mouseenter",this._onPointerEvent(n)),n.type=m}else this._hoveredFeatures=null}_fireEvent(n,o,s){const c=this._map,m=c.transform,v=typeof o=="string"?o:o.type;return v==="move"&&this._updateViewState(this.props,!1),v in MA&&(typeof o=="object"&&(o.viewState=lj(m)),this._map.isMoving())?(c.transform=this._renderTransform,n.call(c,o,s),c.transform=m,c):(n.call(c,o,s),c)}_onBeforeRepaint(){const n=this._map;this._internalUpdate=!0;for(const s in this._deferredEvents)this._deferredEvents[s]&&n.fire(s);this._internalUpdate=!1;const o=this._map.transform;n.transform=this._renderTransform,this._onAfterRepaint=()=>{sj(this._renderTransform,o),n.transform=o}}}h0.savedMaps=[];function PMe(){let t=null;if(typeof location<"u"){const n=/access_token=([^&\/]*)/.exec(location.search);t=n&&n[1]}try{t=t||hj.MapboxAccessToken}catch{}try{t=t||hj.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const AMe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function RMe(t){if(!t)return null;const n=t.map,o={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:s=>{const c=n.transform;n.transform=t.transform;const m=n.project(s);return n.transform=c,m},unproject:s=>{const c=n.transform;n.transform=t.transform;const m=n.unproject(s);return n.transform=c,m},queryTerrainElevation:(s,c)=>{const m=n.transform;n.transform=t.transform;const v=n.queryTerrainElevation(s,c);return n.transform=m,v},queryRenderedFeatures:(s,c)=>{const m=n.transform;n.transform=t.transform;const v=n.queryRenderedFeatures(s,c);return n.transform=m,v}};for(const s of kMe(n))!(s in o)&&!AMe.includes(s)&&(o[s]=n[s].bind(n));return o}function kMe(t){const n=new Set;let o=t;for(;o;){for(const s of Object.getOwnPropertyNames(o))s[0]!=="_"&&typeof t[s]=="function"&&s!=="fire"&&s!=="setEventedParent"&&n.add(s);o=Object.getPrototypeOf(o)}return Array.from(n)}const OMe=typeof document<"u"?E.useLayoutEffect:E.useEffect,zMe=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function DMe(t,n){for(const s of zMe)s in n&&(t[s]=n[s]);const{RTLTextPlugin:o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=n;o&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(o,s=>{s&&console.error(s)},!0)}const P0=E.createContext(null);function LMe(t,n,o){const s=E.useContext(SMe),[c,m]=E.useState(null),v=E.useRef(),{current:d}=E.useRef({mapLib:null,map:null});E.useEffect(()=>{const R=t.mapLib;let D=!0,$;return Promise.resolve(R||o).then(H=>{if(!D)return;if(!H)throw new Error("Invalid mapLib");const Z="Map"in H?H:H.default;if(!Z.Map)throw new Error("Invalid mapLib");if(DMe(Z,t),!Z.supported||Z.supported(t))t.reuseMaps&&($=h0.reuse(t,v.current)),$||($=new h0(Z.Map,t,v.current)),d.map=RMe($),d.mapLib=Z,m($),s?.onMapMount(d.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(H=>{const{onError:Z}=t;Z?Z({type:"error",target:null,originalEvent:null,error:H}):console.error(H)}),()=>{D=!1,$&&(s?.onMapUnmount(t.id),t.reuseMaps?$.recycle():$.destroy())}},[]),OMe(()=>{c&&c.setProps(t)}),E.useImperativeHandle(n,()=>d.map,[c]);const C=E.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),S={height:"100%"};return E.createElement("div",{id:t.id,ref:v,style:C},c&&E.createElement(P0.Provider,{value:d},E.createElement("div",{"mapboxgl-children":"",style:S},t.children)))}const $Me=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ry(t,n){if(!t||!n)return;const o=t.style;for(const s in n){const c=n[s];Number.isFinite(c)&&!$Me.test(s)?o[s]=`${c}px`:o[s]=c}}function BMe(t,n){const{map:o,mapLib:s}=E.useContext(P0),c=E.useRef({props:t});c.current.props=t;const m=E.useMemo(()=>{let X=!1;E.Children.forEach(t.children,K=>{K&&(X=!0)});const Q={...t,element:X?document.createElement("div"):null},G=new s.Marker(Q);return G.setLngLat([t.longitude,t.latitude]),G.getElement().addEventListener("click",K=>{var Y,re;(re=(Y=c.current.props).onClick)===null||re===void 0||re.call(Y,{type:"click",target:G,originalEvent:K})}),G.on("dragstart",K=>{var Y,re;const fe=K;fe.lngLat=m.getLngLat(),(re=(Y=c.current.props).onDragStart)===null||re===void 0||re.call(Y,fe)}),G.on("drag",K=>{var Y,re;const fe=K;fe.lngLat=m.getLngLat(),(re=(Y=c.current.props).onDrag)===null||re===void 0||re.call(Y,fe)}),G.on("dragend",K=>{var Y,re;const fe=K;fe.lngLat=m.getLngLat(),(re=(Y=c.current.props).onDragEnd)===null||re===void 0||re.call(Y,fe)}),G},[]);E.useEffect(()=>(m.addTo(o.getMap()),()=>{m.remove()}),[]);const{longitude:v,latitude:d,offset:C,style:S,draggable:R=!1,popup:D=null,rotation:$=0,rotationAlignment:H="auto",pitchAlignment:Z="auto"}=t;return E.useEffect(()=>{Ry(m.getElement(),S)},[S]),E.useImperativeHandle(n,()=>m,[]),(m.getLngLat().lng!==v||m.getLngLat().lat!==d)&&m.setLngLat([v,d]),C&&!CMe(m.getOffset(),C)&&m.setOffset(C),m.isDraggable()!==R&&m.setDraggable(R),m.getRotation()!==$&&m.setRotation($),m.getRotationAlignment()!==H&&m.setRotationAlignment(H),m.getPitchAlignment()!==Z&&m.setPitchAlignment(Z),m.getPopup()!==D&&m.setPopup(D),Nh.createPortal(t.children,m.getElement())}const FMe=E.memo(E.forwardRef(BMe));function mj(t){return new Set(t?t.trim().split(/\s+/):[])}function NMe(t,n){const{map:o,mapLib:s}=E.useContext(P0),c=E.useMemo(()=>document.createElement("div"),[]),m=E.useRef({props:t});m.current.props=t;const v=E.useMemo(()=>{const d={...t},C=new s.Popup(d);return C.setLngLat([t.longitude,t.latitude]),C.once("open",S=>{var R,D;(D=(R=m.current.props).onOpen)===null||D===void 0||D.call(R,S)}),C},[]);if(E.useEffect(()=>{const d=C=>{var S,R;(R=(S=m.current.props).onClose)===null||R===void 0||R.call(S,C)};return v.on("close",d),v.setDOMContent(c).addTo(o.getMap()),()=>{v.off("close",d),v.isOpen()&&v.remove()}},[]),E.useEffect(()=>{Ry(v.getElement(),t.style)},[t.style]),E.useImperativeHandle(n,()=>v,[]),v.isOpen()&&((v.getLngLat().lng!==t.longitude||v.getLngLat().lat!==t.latitude)&&v.setLngLat([t.longitude,t.latitude]),t.offset&&!mu(v.options.offset,t.offset)&&v.setOffset(t.offset),(v.options.anchor!==t.anchor||v.options.maxWidth!==t.maxWidth)&&(v.options.anchor=t.anchor,v.setMaxWidth(t.maxWidth)),v.options.className!==t.className)){const d=mj(v.options.className),C=mj(t.className);for(const S of d)C.has(S)||v.removeClassName(S);for(const S of C)d.has(S)||v.addClassName(S);v.options.className=t.className}return Nh.createPortal(t.children,c)}E.memo(E.forwardRef(NMe));function Pw(t,n,o,s){const c=E.useContext(P0),m=E.useMemo(()=>t(c),[]);return E.useEffect(()=>{const v=s||o||n,d=typeof n=="function"&&typeof o=="function"?n:null,C=typeof o=="function"?o:typeof n=="function"?n:null,{map:S}=c;return S.hasControl(m)||(S.addControl(m,v?.position),d&&d(c)),()=>{C&&C(c),S.hasControl(m)&&S.removeControl(m)}},[]),m}function jMe(t){const n=Pw(({mapLib:o})=>new o.AttributionControl(t),{position:t.position});return E.useEffect(()=>{Ry(n._container,t.style)},[t.style]),null}E.memo(jMe);function VMe(t){const n=Pw(({mapLib:o})=>new o.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return E.useEffect(()=>{Ry(n._controlContainer,t.style)},[t.style]),null}E.memo(VMe);function UMe(t,n){const o=E.useRef({props:t}),s=Pw(({mapLib:c})=>{const m=new c.GeolocateControl(t),v=m._setupUI;return m._setupUI=d=>{m._container.hasChildNodes()||v(d)},m.on("geolocate",d=>{var C,S;(S=(C=o.current.props).onGeolocate)===null||S===void 0||S.call(C,d)}),m.on("error",d=>{var C,S;(S=(C=o.current.props).onError)===null||S===void 0||S.call(C,d)}),m.on("outofmaxbounds",d=>{var C,S;(S=(C=o.current.props).onOutOfMaxBounds)===null||S===void 0||S.call(C,d)}),m.on("trackuserlocationstart",d=>{var C,S;(S=(C=o.current.props).onTrackUserLocationStart)===null||S===void 0||S.call(C,d)}),m.on("trackuserlocationend",d=>{var C,S;(S=(C=o.current.props).onTrackUserLocationEnd)===null||S===void 0||S.call(C,d)}),m},{position:t.position});return o.current.props=t,E.useImperativeHandle(n,()=>s,[]),E.useEffect(()=>{Ry(s._container,t.style)},[t.style]),null}E.memo(E.forwardRef(UMe));function HMe(t){const n=Pw(({mapLib:o})=>new o.NavigationControl(t),{position:t.position});return E.useEffect(()=>{Ry(n._container,t.style)},[t.style]),null}E.memo(HMe);function GMe(t){const n=Pw(({mapLib:m})=>new m.ScaleControl(t),{position:t.position}),o=E.useRef(t),s=o.current;o.current=t;const{style:c}=t;return t.maxWidth!==void 0&&t.maxWidth!==s.maxWidth&&(n.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==s.unit&&n.setUnit(t.unit),E.useEffect(()=>{Ry(n._container,c)},[c]),null}E.memo(GMe);function aI(t,n){if(!t)throw new Error(n)}function qMe(t,n,o,s){if(aI(o.id===s.id,"layer id changed"),aI(o.type===s.type,"layer type changed"),o.type==="custom"||s.type==="custom")return;const{layout:c={},paint:m={},filter:v,minzoom:d,maxzoom:C,beforeId:S}=o;if(S!==s.beforeId&&t.moveLayer(n,S),c!==s.layout){const R=s.layout||{};for(const D in c)mu(c[D],R[D])||t.setLayoutProperty(n,D,c[D]);for(const D in R)c.hasOwnProperty(D)||t.setLayoutProperty(n,D,void 0)}if(m!==s.paint){const R=s.paint||{};for(const D in m)mu(m[D],R[D])||t.setPaintProperty(n,D,m[D]);for(const D in R)m.hasOwnProperty(D)||t.setPaintProperty(n,D,void 0)}mu(v,s.filter)||t.setFilter(n,v),(d!==s.minzoom||C!==s.maxzoom)&&t.setLayerZoomRange(n,d,C)}function WMe(t,n,o){if(t.style&&t.style._loaded&&(!("source"in o)||t.getSource(o.source))){const s={...o,id:n};delete s.beforeId,t.addLayer(s,o.beforeId)}}let KMe=0;function ZMe(t){const n=E.useContext(P0).map.getMap(),o=E.useRef(t),[,s]=E.useState(0),c=E.useMemo(()=>t.id||`jsx-layer-${KMe++}`,[]);if(E.useEffect(()=>{if(n){const v=()=>s(d=>d+1);return n.on("styledata",v),v(),()=>{n.off("styledata",v),n.style&&n.style._loaded&&n.getLayer(c)&&n.removeLayer(c)}}},[n]),n&&n.style&&n.getLayer(c))try{qMe(n,c,t,o.current)}catch(v){console.warn(v)}else WMe(n,c,t);return o.current=t,null}let XMe=0;function YMe(t,n,o){if(t.style&&t.style._loaded){const s={...o};return delete s.id,delete s.children,t.addSource(n,s),t.getSource(n)}return null}function JMe(t,n,o){aI(n.id===o.id,"source id changed"),aI(n.type===o.type,"source type changed");let s="",c=0;for(const v in n)v!=="children"&&v!=="id"&&!mu(o[v],n[v])&&(s=v,c++);if(!c)return;const m=n.type;if(m==="geojson")t.setData(n.data);else if(m==="image")t.updateImage({url:n.url,coordinates:n.coordinates});else if("setCoordinates"in t&&c===1&&s==="coordinates")t.setCoordinates(n.coordinates);else if("setUrl"in t)switch(s){case"url":t.setUrl(n.url);break;case"tiles":t.setTiles(n.tiles);break}else console.warn(`Unable to update <Source> prop: ${s}`)}function QMe(t){const n=E.useContext(P0).map.getMap(),o=E.useRef(t),[,s]=E.useState(0),c=E.useMemo(()=>t.id||`jsx-source-${XMe++}`,[]);E.useEffect(()=>{if(n){const v=()=>setTimeout(()=>s(d=>d+1),0);return n.on("styledata",v),v(),()=>{var d;if(n.off("styledata",v),n.style&&n.style._loaded&&n.getSource(c)){const C=(d=n.getStyle())===null||d===void 0?void 0:d.layers;if(C)for(const S of C)S.source===c&&n.removeLayer(S.id);n.removeSource(c)}}}},[n]);let m=n&&n.style&&n.getSource(c);return m?JMe(m,t,o.current):m=YMe(n,c,t),o.current=t,m&&E.Children.map(t.children,v=>v&&E.cloneElement(v,{source:c}))||null}const e3e=is(()=>Promise.resolve().then(()=>r3e),void 0),e4e=E.forwardRef(function(n,o){return LMe(n,o,e3e)}),t4e=FMe,r4e=ZMe,n4e=QMe;var uZ={exports:{}};(function(t,n){var o={};(function(s,c){t.exports=c()})(sI,function(){var s,c,m;function v(C,S){if(!s)s=S;else if(!c)c=S;else{var R="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+s+")(sharedChunk); ("+c+")(sharedChunk); self.onerror = null;",D={};s(D),m=S(D),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(m.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}v(["exports"],function(C){var S=typeof self<"u"?self:{},R="3.0.1";let D;const $={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(D==null){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{D=o.API_URL_REGEX!=null?new RegExp(o.API_URL_REGEX):r}catch{D=r}}return D},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!$.API_URL)return null;try{const r=new URL($.API_URL);return r.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":r.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},H={supported:!1,testSupport:function(r){!Q&&X&&(G?K(r):Z=r)}};let Z,X,Q=!1,G=!1;function K(r){const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,X),r.isContextLost())return;H.supported=!0}catch{}r.deleteTexture(e),Q=!0}S.document&&(X=S.document.createElement("img"),X.onload=function(){Z&&K(Z),Z=null,G=!0},X.onerror=function(){Q=!0,Z=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Y="01";function re(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fe=me;function me(r,e,i,a){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=e,this.p2x=i,this.p2y=a}me.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,e){if(e===void 0&&(e=1e-6),r<0)return 0;if(r>1)return 1;for(var i=r,a=0;a<8;a++){var l=this.sampleCurveX(i)-r;if(Math.abs(l)<e)return i;var u=this.sampleCurveDerivativeX(i);if(Math.abs(u)<1e-6)break;i-=l/u}var h=0,g=1;for(i=r,a=0;a<20&&(l=this.sampleCurveX(i),!(Math.abs(l-r)<e));a++)r>l?h=i:g=i,i=.5*(g-h)+h;return i},solve:function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))}};var pe=re(fe),xe=Se;function Se(r,e){this.x=r,this.y=e}Se.prototype={clone:function(){return new Se(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,i=r.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),i=Math.sin(r),a=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=a,this},_rotateAround:function(r,e){var i=Math.cos(r),a=Math.sin(r),l=e.y+a*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-a*(this.y-e.y),this.y=l,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Se.convert=function(r){return r instanceof Se?r:Array.isArray(r)?new Se(r[0],r[1]):r};var oe=re(xe);function Re(r,e){if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(let i=0;i<r.length;i++)if(!Re(r[i],e[i]))return!1;return!0}if(typeof r=="object"&&r!==null&&e!==null){if(typeof e!="object"||Object.keys(r).length!==Object.keys(e).length)return!1;for(const i in r)if(!Re(r[i],e[i]))return!1;return!0}return r===e}const Ve=Math.PI/180,Oe=180/Math.PI;function _e(r){return r*Ve}function Fe(r){return r*Oe}const Le=[[0,0],[1,0],[1,1],[0,1]];function Me(r){if(r<=0)return 0;if(r>=1)return 1;const e=r*r,i=e*r;return 4*(r<.5?i:3*(r-e)+i-.75)}function Ce(r){let e=1/0,i=1/0,a=-1/0,l=-1/0;for(const u of r)e=Math.min(e,u.x),i=Math.min(i,u.y),a=Math.max(a,u.x),l=Math.max(l,u.y);return{min:new oe(e,i),max:new oe(a,l)}}function Ye(r,e,i=0,a=!0){const l=new oe(i,i),u=r.sub(l),h=e.add(l),g=[u,new oe(h.x,u.y),h,new oe(u.x,h.y)];return a&&g.push(u.clone()),g}function qe(r,e,i,a){const l=new pe(r,e,i,a);return function(u){return l.solve(u)}}const rt=qe(.25,.1,.25,1);function Qe(r,e,i){return Math.min(i,Math.max(e,r))}function St(r,e,i){return(i=Qe((i-r)/(e-r),0,1))*i*(3-2*i)}function jt(r,e,i){const a=i-e,l=((r-e)%a+a)%a+e;return l===e?i:l}function Ot(r,e,i){if(!r.length)return i(null,[]);let a=r.length;const l=new Array(r.length);let u=null;r.forEach((h,g)=>{e(h,(x,b)=>{x&&(u=x),l[g]=b,--a==0&&i(u,l)})})}function Tt(r){const e=[];for(const i in r)e.push(r[i]);return e}function ct(r,...e){for(const i of e)for(const a in i)r[a]=i[a];return r}function Ct(r,e){const i={};for(let a=0;a<e.length;a++){const l=e[a];l in r&&(i[l]=r[l])}return i}let kt=1;function zt(){return kt++}function Nt(){return function r(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function Rt(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Pt(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Dt(r,e){r.forEach(i=>{e[i]&&(e[i]=e[i].bind(e))})}function Ut(r,e){return r.indexOf(e,r.length-e.length)!==-1}function sr(r,e,i){const a={};for(const l in r)a[l]=e.call(i||this,r[l],l,r);return a}function vt(r,e,i){const a={};for(const l in r)e.call(i||this,r[l],l,r)&&(a[l]=r[l]);return a}function De(r){return Array.isArray(r)?r.map(De):typeof r=="object"&&r?sr(r,De):r}const ze={};function ve(r){ze[r]||(typeof console<"u"&&console.warn(r),ze[r]=!0)}function pt(r,e,i){return(i.y-r.y)*(e.x-r.x)>(e.y-r.y)*(i.x-r.x)}function gt(r){let e=0;for(let i,a,l=0,u=r.length,h=u-1;l<u;h=l++)i=r[l],a=r[h],e+=(a.x-i.x)*(i.y+a.y);return e}function $t([r,e,i]){const a=_e(e+90),l=_e(i);return{x:r*Math.cos(a)*Math.sin(l),y:r*Math.sin(a)*Math.sin(l),z:r*Math.cos(l),azimuthal:e,polar:i}}function It(r,e,i){const a=Math.sqrt(r*r+e*e+i*i),l=a>0?Math.acos(i/a)*Oe:0;let u=r!==0||e!==0?Math.atan2(-e,-r)*Oe+90:0;return u<0&&(u+=360),[a,u,l]}function Mt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Qt(r){const e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(i,a,l,u)=>{const h=l||u;return e[a]=!h||h.toLowerCase(),""}),e["max-age"]){const i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}let wr=null;function br(){return!!S.document.fullscreenElement||!!S.document.webkitFullscreenElement}function tn(r){try{const e=S[r];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function yr(r,e){return[r[4*e],r[4*e+1],r[4*e+2],r[4*e+3]]}function dr(r,e,i){r[4*e+0]=i[0],r[4*e+1]=i[1],r[4*e+2]=i[2],r[4*e+3]=i[3]}function Wt(r,e){return[Math.pow(r[0],2.2)*e,Math.pow(r[1],2.2)*e,Math.pow(r[2],2.2)*e]}function Wr(r){return[Math.pow(r[0],1/2.2),Math.pow(r[1],1/2.2),Math.pow(r[2],1/2.2)]}const Fr="mapbox-tiles";let en=500,Yr=50,fr,Kr;function Br(){try{return S.caches}catch{}}function an(){Br()&&!fr&&(fr=S.caches.open(Fr))}function ni(r){const e=r.indexOf("?");if(e<0)return r;const i=function(l){const u=l.indexOf("?");return u>0?l.slice(u+1).split("&"):[]}(r),a=i.filter(l=>{const u=l.split("=");return u[0]==="language"||u[0]==="worldview"});return a.length?`${r.slice(0,e)}?${a.join("&")}`:r.slice(0,e)}let Nr=1/0;function ii(r){Nr++,Nr>Yr&&(r.getActor().send("enforceCacheSizeLimit",en),Nr=0)}const Pe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Pe);class he extends Error{constructor(e,i,a){i===401&&gr(a)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=i,this.url=a}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ge=Mt()?()=>self.worker&&self.worker.referrer:()=>(S.location.protocol==="blob:"?S.parent:S).location.href,Te=function(r,e){if(!(/^file:/.test(i=r.url)||/^file:/.test(ge())&&!/^\w+:/.test(i))){if(S.fetch&&S.Request&&S.AbortController&&S.Request.prototype.hasOwnProperty("signal"))return function(a,l){const u=new S.AbortController,h=new S.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:ge(),referrerPolicy:a.referrerPolicy,signal:u.signal});let g=!1,x=!1;const b=(T=h.url).indexOf("sku=")>0&&gr(T);var T;a.type==="json"&&h.headers.set("Accept","application/json");const M=(O,B,V)=>{if(x)return;if(O&&O.message!=="SecurityError"&&ve(O.toString()),B&&V)return A(B);const W=Date.now();S.fetch(h).then(q=>{if(q.ok){const ne=b?q.clone():null;return A(q,ne,W)}return l(new he(q.statusText,q.status,a.url))}).catch(q=>{q.name!=="AbortError"&&l(new Error(`${q.message} ${a.url}`))})},A=(O,B,V)=>{(a.type==="arrayBuffer"?O.arrayBuffer():a.type==="json"?O.json():O.text()).then(W=>{x||(B&&V&&function(q,ne,ae){if(an(),!fr)return;const le={status:ne.status,statusText:ne.statusText,headers:new S.Headers};ne.headers.forEach((Ee,Be)=>le.headers.set(Be,Ee));const ie=Qt(ne.headers.get("Cache-Control")||"");if(ie["no-store"])return;ie["max-age"]&&le.headers.set("Expires",new Date(ae+1e3*ie["max-age"]).toUTCString());const ue=le.headers.get("Expires");ue&&(new Date(ue).getTime()-ae<42e4||function(Ee,Be){if(Kr===void 0)try{new Response(new ReadableStream),Kr=!0}catch{Kr=!1}Kr?Be(Ee.body):Ee.blob().then(Be)}(ne,Ee=>{const Be=new S.Response(Ee,le);an(),fr&&fr.then(je=>je.put(ni(q.url),Be)).catch(je=>ve(je.message))}))}(h,B,V),g=!0,l(null,W,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(W=>{x||l(new Error(W.message))})};return b?function(O,B){if(an(),!fr)return B(null);const V=ni(O.url);fr.then(W=>{W.match(V).then(q=>{const ne=function(ae){if(!ae)return!1;const le=new Date(ae.headers.get("Expires")||0),ie=Qt(ae.headers.get("Cache-Control")||"");return le>Date.now()&&!ie["no-cache"]}(q);W.delete(V),ne&&W.put(V,q.clone()),B(null,q,ne)}).catch(B)}).catch(B)}(h,M):M(null,null),{cancel:()=>{x=!0,g||u.abort()}}}(r,e);if(Mt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e,void 0,!0)}var i;return function(a,l){const u=new S.XMLHttpRequest;u.open(a.method||"GET",a.url,!0),a.type==="arrayBuffer"&&(u.responseType="arraybuffer");for(const h in a.headers)u.setRequestHeader(h,a.headers[h]);return a.type==="json"&&(u.responseType="text",u.setRequestHeader("Accept","application/json")),u.withCredentials=a.credentials==="include",u.onerror=()=>{l(new Error(u.statusText))},u.onload=()=>{if((u.status>=200&&u.status<300||u.status===0)&&u.response!==null){let h=u.response;if(a.type==="json")try{h=JSON.parse(u.response)}catch(g){return l(g)}l(null,h,u.getResponseHeader("Cache-Control"),u.getResponseHeader("Expires"))}else l(new he(u.statusText,u.status,a.url))},u.send(a.body),{cancel:()=>u.abort()}}(r,e)},$e=function(r,e){return Te(ct(r,{type:"json"}),e)},ke=function(r,e){return Te(ct(r,{type:"arrayBuffer"}),e)};function Ke(r){const e=S.document.createElement("a");return e.href=r,e.protocol===S.document.location.protocol&&e.host===S.document.location.host}const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ne,et;Ne=[],et=0;const Et=function(r,e){if(H.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),et>=$.MAX_PARALLEL_IMAGE_REQUESTS){const u={requestParameters:r,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Ne.push(u),u}et++;let i=!1;const a=()=>{if(!i)for(i=!0,et--;Ne.length&&et<$.MAX_PARALLEL_IMAGE_REQUESTS;){const u=Ne.shift(),{requestParameters:h,callback:g,cancelled:x}=u;x||(u.cancel=Et(h,g).cancel)}},l=ke(r,(u,h,g,x)=>{a(),u?e(u):h&&(S.createImageBitmap?function(b,T){const M=new S.Blob([new Uint8Array(b)],{type:"image/png"});S.createImageBitmap(M).then(A=>{T(null,A)}).catch(A=>{T(new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(h,(b,T)=>e(b,T,g,x)):function(b,T){const M=new S.Image,A=S.URL;M.onload=()=>{T(null,M),A.revokeObjectURL(M.src),M.onload=null,S.requestAnimationFrame(()=>{M.src=Ue})},M.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const O=new S.Blob([new Uint8Array(b)],{type:"image/png"});M.src=b.byteLength?A.createObjectURL(O):Ue}(h,(b,T)=>e(b,T,g,x)))});return{cancel:()=>{l.cancel(),a()}}},Yt="NO_ACCESS_TOKEN";class dt{constructor(e,i,a){this._transformRequestFn=e,this._customAccessToken=i,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const e=function(){let i="";for(let a=0;a<10;a++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Y,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}}normalizeStyleURL(e,i){if(!ir(e))return e;const a=Cr(e);return a.params.push(`sdk=js-${R}`),a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||i)}normalizeGlyphsURL(e,i){if(!ir(e))return e;const a=Cr(e);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||i)}normalizeModelURL(e,i){if(!ir(e))return e;const a=Cr(e);return a.path=`/models/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||i)}normalizeSourceURL(e,i,a,l){if(!ir(e))return e;const u=Cr(e);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),a&&u.params.push(`language=${a}`),l&&u.params.push(`worldview=${l}`),this._makeAPIURL(u,this._customAccessToken||i)}normalizeSpriteURL(e,i,a,l){const u=Cr(e);return ir(e)?(u.path=`/styles/v1${u.path}/sprite${i}${a}`,this._makeAPIURL(u,this._customAccessToken||l)):(u.path+=`${i}${a}`,Lr(u))}normalizeTileURL(e,i,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ir(e))return e;const l=Cr(e);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||a&&l.authority!=="raster"&&a===512?"@2x":""}${H.supported?".webp":"$1"}`),l.authority==="raster"?l.path=`/${$.RASTER_URL_PREFIX}${l.path}`:(l.path=l.path.replace(/^.+\/v4\//,"/"),l.path=`/${$.TILE_URL_VERSION}${l.path}`);const u=this._customAccessToken||function(h){for(const g of h){const x=g.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(l.params)||$.ACCESS_TOKEN;return $.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&l.params.push(`sku=${this._skuToken}`),this._makeAPIURL(l,u)}canonicalizeTileURL(e,i){const a=Cr(e);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return e;let l="mapbox://";a.path.match(/^\/raster\/v1\//)?l+=`raster/${a.path.replace(`/${$.RASTER_URL_PREFIX}/`,"")}`:l+=`tiles/${a.path.replace(`/${$.TILE_URL_VERSION}/`,"")}`;let u=a.params;return i&&(u=u.filter(h=>!h.match(/^access_token=/))),u.length&&(l+=`?${u.join("&")}`),l}canonicalizeTileset(e,i){const a=!!i&&ir(i),l=[];for(const u of e.tiles||[])gr(u)?l.push(this.canonicalizeTileURL(u,a)):l.push(u);return l}_makeAPIURL(e,i){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",l=Cr($.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){const u=e.params.indexOf("secure");u>=0&&e.params.splice(u,1)}if(l.path!=="/"&&(e.path=`${l.path}${e.path}`),!$.REQUIRE_ACCESS_TOKEN)return Lr(e);if(i=i||$.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return e.params=e.params.filter(u=>u.indexOf("access_token")===-1),e.params.push(`access_token=${i||""}`),Lr(e)}}function ir(r){return r.indexOf("mapbox:")===0}function gr(r){return $.API_URL_REGEX.test(r)}function mr(r){return $.API_CDN_URL_REGEX.test(r)}function Sr(r){return $.API_STYLE_REGEX.test(r)&&!Gr(r)}function Gr(r){return $.API_SPRITE_REGEX.test(r)}const Rr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Cr(r){const e=r.match(Rr);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Lr(r){const e=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${e}`}const cn="mapbox.eventData";function oi(r){if(!r)return null;const e=r.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(S.atob(e[1]).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Sn{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const i=oi($.ACCESS_TOKEN);let a="";return a=i&&i.u?S.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(l,u)=>String.fromCharCode(+("0x"+u)))):$.ACCESS_TOKEN||"",e?`${cn}.${e}:${a}`:`${cn}:${a}`}fetchEventData(){const e=tn("localStorage"),i=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{const l=S.localStorage.getItem(i);l&&(this.eventData=JSON.parse(l));const u=S.localStorage.getItem(a);u&&(this.anonId=u)}catch{ve("Unable to read from LocalStorage")}}saveEventData(){const e=tn("localStorage"),i=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{S.localStorage.setItem(a,this.anonId),Object.keys(this.eventData).length>=1&&S.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{ve("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,i,a,l){if(!$.EVENTS_URL)return;const u=Cr($.EVENTS_URL);u.params.push(`access_token=${l||$.ACCESS_TOKEN||""}`);const h={event:this.type,created:new Date(e).toISOString()},g=i?ct(h,i):h,x={url:Lr(u),headers:{"Content-Type":"text/plain"},body:JSON.stringify([g])};this.pendingRequest=function(b,T){return Te(ct(b,{method:"POST"}),T)}(x,b=>{this.pendingRequest=null,a(b),this.saveEventData(),this.processRequests(l)})}queueRequest(e,i){this.queue.push(e),this.processRequests(i)}}const bi=new class extends Sn{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,e){$.EVENTS_URL&&$.ACCESS_TOKEN&&Array.isArray(r)&&r.some(i=>ir(i)||gr(i))&&this.queueRequest(Date.now(),e)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=oi($.ACCESS_TOKEN),i=e?e.u:$.ACCESS_TOKEN;let a=i!==this.eventData.tokenU;Pt(this.anonId)||(this.anonId=Nt(),a=!0);const l=this.queue.shift();if(this.eventData.lastSuccess){const u=new Date(this.eventData.lastSuccess),h=new Date(l),g=(l-this.eventData.lastSuccess)/864e5;a=a||g>=1||g<-1||u.getDate()!==h.getDate()}else a=!0;a?this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:Y,"enabled.telemetry":!1,userId:this.anonId},u=>{u||(this.eventData.lastSuccess=l,this.eventData.tokenU=i)},r):this.processRequests()}},Li=bi.postTurnstileEvent.bind(bi),no=new class extends Sn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,e,i,a){this.skuToken=e,this.errorCb=a,$.EVENTS_URL&&(i||$.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(new Error(Yt)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),Pt(this.anonId)||(this.anonId=Nt()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:Y,skuToken:this.skuToken,userId:this.anonId},a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},r))}},ba=no.postMapLoadEvent.bind(no),io=new class extends Sn{constructor(){super("gljs.performance")}postPerformanceEvent(r,e){$.EVENTS_URL&&(r||$.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},r)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:e,performanceData:i}=this.queue.shift(),a=function(l){const u=S.performance.getEntriesByType("resource"),h=S.performance.getEntriesByType("mark"),g=function(A){const O={};if(A){for(const B in A)if(B!=="other")for(const V of A[B]){const W=`${B}ResolveRangeMin`,q=`${B}ResolveRangeMax`,ne=`${B}RequestCount`,ae=`${B}RequestCachedCount`;O[W]=Math.min(O[W]||1/0,V.startTime),O[q]=Math.max(O[q]||-1/0,V.responseEnd);const le=ie=>{O[ie]===void 0&&(O[ie]=0),++O[ie]};V.transferSize!==void 0&&V.transferSize===0&&le(ae),le(ne)}}return O}(function(A,O){const B={};if(A)for(const V of A){const W=O(V);B[W]===void 0&&(B[W]=[]),B[W].push(V)}return B}(u,Xs)),x=S.devicePixelRatio,b=S.navigator.connection||S.navigator.mozConnection||S.navigator.webkitConnection,T={counters:[],metadata:[],attributes:[]},M=(A,O,B)=>{B!=null&&A.push({name:O,value:B.toString()})};for(const A in g)M(T.counters,A,g[A]);if(l.interactionRange[0]!==1/0&&l.interactionRange[1]!==-1/0&&(M(T.counters,"interactionRangeMin",l.interactionRange[0]),M(T.counters,"interactionRangeMax",l.interactionRange[1])),h)for(const A of Object.keys(Ti)){const O=Ti[A],B=h.find(V=>V.name===O);B&&M(T.counters,O,B.startTime)}return M(T.counters,"visibilityHidden",l.visibilityHidden),M(T.attributes,"style",function(A){if(A)for(const O of A){const B=O.name.split("?")[0];if(Sr(B)){const V=B.split("/").slice(-2);if(V.length===2)return`mapbox://styles/${V[0]}/${V[1]}`}}}(u)),M(T.attributes,"terrainEnabled",l.terrainEnabled?"true":"false"),M(T.attributes,"fogEnabled",l.fogEnabled?"true":"false"),M(T.attributes,"projection",l.projection),M(T.attributes,"zoom",l.zoom),M(T.metadata,"devicePixelRatio",x),M(T.metadata,"connectionEffectiveType",b?b.effectiveType:void 0),M(T.metadata,"navigatorUserAgent",S.navigator.userAgent),M(T.metadata,"screenWidth",S.screen.width),M(T.metadata,"screenHeight",S.screen.height),M(T.metadata,"windowWidth",S.innerWidth),M(T.metadata,"windowHeight",S.innerHeight),M(T.metadata,"mapWidth",l.width/x),M(T.metadata,"mapHeight",l.height/x),M(T.metadata,"webglRenderer",l.renderer),M(T.metadata,"webglVendor",l.vendor),M(T.metadata,"sdkVersion",R),M(T.metadata,"sdkIdentifier","mapbox-gl-js"),T}(i);for(const l of a.metadata);for(const l of a.counters);for(const l of a.attributes);this.postEvent(e,a,()=>{},r)}},ra=io.postPerformanceEvent.bind(io),fs=new class extends Sn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,e,i,a){if(!$.API_URL||!$.SESSION_PATH)return;const l=Cr($.API_URL+$.SESSION_PATH);l.params.push(`sku=${e||""}`),l.params.push(`access_token=${a||$.ACCESS_TOKEN||""}`);const u={url:Lr(l),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(h,g){return Te(ct(h,{method:"GET"}),g)}(u,h=>{this.pendingRequest=null,i(h),this.saveEventData(),this.processRequests(a)})}getSessionAPI(r,e,i,a){this.skuToken=e,this.errorCb=a,$.SESSION_PATH&&$.API_URL&&(i||$.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(new Error(Yt)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||this.getSession(i,this.skuToken,a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},r)}},Jr=fs.getSessionAPI.bind(fs),di=new Set;function Ai(r,e){e?di.add(r):di.delete(r)}const Ti={create:"create",load:"load",fullLoad:"fullLoad"},Ji={mark(r){S.performance.mark(r)},measure(r,e,i){S.performance.measure(r,e,i)}};function Xs(r){const e=r.name.split("?")[0];return mr(e)&&e.includes("mapbox-gl.js")?"javascript":mr(e)&&e.includes("mapbox-gl.css")?"css":function(i){return $.API_FONTS_REGEX.test(i)}(e)?"fontRange":Gr(e)?"sprite":Sr(e)?"style":function(i){return $.API_TILEJSON_REGEX.test(i)}(e)?"tilejson":"other"}const Ho=S.performance;function ji(r){const e=r?r.url.toString():void 0;return Ho.getEntriesByName(e)}var za=jn;function jn(r){return!function(e){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var a,l,u=new Blob([""],{type:"text/javascript"}),h=URL.createObjectURL(u);try{l=new Worker(h),a=!0}catch{a=!1}return l&&l.terminate(),URL.revokeObjectURL(h),a}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var a=document.createElement("canvas");a.width=a.height=1;var l=a.getContext("2d");if(!l)return!1;var u=l.getImageData(0,0,1,1);return u&&u.width===a.width}()?(jr[i=e&&e.failIfMajorPerformanceCaveat]===void 0&&(jr[i]=function(a){var l,u=function(h){var g=document.createElement("canvas"),x=Object.create(jn.webGLContextAttributes);return x.failIfMajorPerformanceCaveat=h,g.getContext("webgl",x)||g.getContext("experimental-webgl",x)}(a);if(!u)return!1;try{l=u.createShader(u.VERTEX_SHADER)}catch{return!1}return!(!l||u.isContextLost())&&(u.shaderSource(l,"void main() {}"),u.compileShader(l),u.getShaderParameter(l,u.COMPILE_STATUS)===!0)}(i)),jr[i]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}(r)}var jr={};let un,qn,In,Ci;jn.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Qr={now:()=>In!==void 0?In:S.performance.now(),setNow(r){In=r},restoreNow(){In=void 0},frame(r){const e=S.requestAnimationFrame(r);return{cancel:()=>S.cancelAnimationFrame(e)}},getImageData(r,e=0){const{width:i,height:a}=r;Ci||(Ci=S.document.createElement("canvas"));const l=Ci.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return(i>Ci.width||a>Ci.height)&&(Ci.width=i,Ci.height=a),l.clearRect(-e,-e,i+2*e,a+2*e),l.drawImage(r,0,0,i,a),l.getImageData(-e,-e,i+2*e,a+2*e)},resolveURL:r=>(un||(un=S.document.createElement("a")),un.href=r,un.href),get devicePixelRatio(){return S.devicePixelRatio},get prefersReducedMotion(){return!!S.matchMedia&&(qn==null&&(qn=S.matchMedia("(prefers-reduced-motion: reduce)")),qn.matches)}};function Jn(r,e,i){const a=S.document.createElement(r);return e!==void 0&&(a.className=e),i&&i.appendChild(a),a}function Qi(r,e,i){const a=S.document.createElementNS("http://www.w3.org/2000/svg",r);for(const l of Object.keys(e))a.setAttributeNS(null,l,e[l]);return i&&i.appendChild(a),a}const Lo=S.document&&S.document.documentElement.style,Go=Lo&&Lo.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Da;function fi(){Lo&&Go&&(Da=Lo[Go],Lo[Go]="none")}function gi(){Lo&&Go&&(Lo[Go]=Da)}function eo(r){r.preventDefault(),r.stopPropagation(),S.removeEventListener("click",eo,!0)}function xo(){S.addEventListener("click",eo,!0),S.setTimeout(()=>{S.removeEventListener("click",eo,!0)},0)}function Po(r,e){const i=r.getBoundingClientRect();return qa(r,i,e)}function Ha(r,e){const i=r.getBoundingClientRect(),a=[];for(let l=0;l<e.length;l++)a.push(qa(r,i,e[l]));return a}function Ga(r){return S.InstallTrigger!==void 0&&r.button===2&&r.ctrlKey&&S.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:r.button}function qa(r,e,i){const a=r.offsetWidth===e.width?1:r.offsetWidth/e.width;return new oe((i.clientX-e.left)*a,(i.clientY-e.top)*a)}function zs(r,e,i){i[r]&&i[r].indexOf(e)!==-1||(i[r]=i[r]||[],i[r].push(e))}function dl(r,e,i){if(i&&i[r]){const a=i[r].indexOf(e);a!==-1&&i[r].splice(a,1)}}class vr{constructor(e,i={}){ct(this,i),this.type=e}}class kn extends vr{constructor(e,i={}){super("error",ct({error:e},i))}}class mo{on(e,i){return this._listeners=this._listeners||{},zs(e,i,this._listeners),this}off(e,i){return dl(e,i,this._listeners),dl(e,i,this._oneTimeListeners),this}once(e,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},zs(e,i,this._oneTimeListeners),this):new Promise(a=>this.once(e,a))}fire(e,i){typeof e=="string"&&(e=new vr(e,i||{}));const a=e.type;if(this.listens(a)){e.target=this;const l=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];for(const g of l)g.call(this,e);const u=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(const g of u)dl(a,g,this._oneTimeListeners),g.call(this,e);const h=this._eventedParent;h&&(ct(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),h.fire(e))}else e instanceof kn&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,i){return this._eventedParent=e,this._eventedParentData=i,this}}var Lt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","default":[0,1],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');class Zr{constructor(e,i,a,l){this.message=(e?`${e}: `:"")+a,l&&(this.identifier=l),i!=null&&i.__line__&&(this.line=i.__line__)}}class Cn extends Zr{}function Wn(r,...e){for(const i of e)for(const a in i)r[a]=i[a];return r}function ai(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function so(r){if(Array.isArray(r))return r.map(so);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const i in r)e[i]=so(r[i]);return e}return ai(r)}class Xi extends Error{constructor(e,i){super(i),this.message=i,this.key=e}}var as=Xi;class pc{constructor(e,i=[]){this.parent=e,this.bindings={};for(const[a,l]of i)this.bindings[a]=l}concat(e){return new pc(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var Eu=pc;const Ys={kind:"null"},Vr={kind:"number"},si={kind:"string"},vn={kind:"boolean"},Ds={kind:"color"},ss={kind:"object"},Kn={kind:"value"},Wh={kind:"collator"},Tu={kind:"formatted"},Iu={kind:"resolvedImage"};function Ss(r,e){return{kind:"array",itemType:r,N:e}}function qo(r){if(r.kind==="array"){const e=qo(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}const Yf=[Ys,Vr,si,vn,Ds,Tu,ss,Ss(Kn),Iu];function ih(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!ih(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const i of Yf)if(!ih(i,e))return null}}return`Expected ${qo(r)} but found ${qo(e)} instead.`}function Gd(r,e){return e.some(i=>i.kind===r.kind)}function Mu(r,e){return e.some(i=>i==="null"?r===null:i==="array"?Array.isArray(r):i==="object"?r&&!Array.isArray(r)&&typeof r=="object":i===typeof r)}var Jf,Wm={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function jc(r){return(r=Math.round(r))<0?0:r>255?255:r}function Km(r){return jc(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function Qf(r){return(e=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:e>1?1:e;var e}function Zm(r,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?r+(e-r)*i*6:2*i<1?e:3*i<2?r+(e-r)*(2/3-i)*6:r}try{Jf={}.parseCSSColor=function(r){var e,i=r.replace(/ /g,"").toLowerCase();if(i in Wm)return Wm[i].slice();if(i[0]==="#")return i.length===4?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:i.length===7&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var a=i.indexOf("("),l=i.indexOf(")");if(a!==-1&&l+1===i.length){var u=i.substr(0,a),h=i.substr(a+1,l-(a+1)).split(","),g=1;switch(u){case"rgba":if(h.length!==4)return null;g=Qf(h.pop());case"rgb":return h.length!==3?null:[Km(h[0]),Km(h[1]),Km(h[2]),g];case"hsla":if(h.length!==4)return null;g=Qf(h.pop());case"hsl":if(h.length!==3)return null;var x=(parseFloat(h[0])%360+360)%360/360,b=Qf(h[1]),T=Qf(h[2]),M=T<=.5?T*(b+1):T+b-T*b,A=2*T-M;return[jc(255*Zm(A,M,x+1/3)),jc(255*Zm(A,M,x)),jc(255*Zm(A,M,x-1/3)),g];default:return null}}return null}}catch{}class Js{constructor(e,i,a,l=1){this.r=e,this.g=i,this.b=a,this.a=l}static parse(e){if(!e)return;if(e instanceof Js)return e;if(typeof e!="string")return;const i=Jf(e);return i?new Js(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[e,i,a,l]=this.toArray();return`rgba(${Math.round(e)},${Math.round(i)},${Math.round(a)},${l})`}toArray(){const{r:e,g:i,b:a,a:l}=this;return l===0?[0,0,0,0]:[255*e/l,255*i/l,255*a/l,l]}toArray01(){const{r:e,g:i,b:a,a:l}=this;return l===0?[0,0,0,0]:[e/l,i/l,a/l,l]}toArray01Scaled(e){const{r:i,g:a,b:l,a:u}=this;return u===0?[0,0,0]:[i/u*e,a/u*e,l/u*e]}toArray01PremultipliedAlpha(){const{r:e,g:i,b:a,a:l}=this;return[e,i,a,l]}toArray01Linear(){const{r:e,g:i,b:a,a:l}=this;return l===0?[0,0,0,0]:[Math.pow(e/l,2.2),Math.pow(i/l,2.2),Math.pow(a/l,2.2),l]}}Js.black=new Js(0,0,0,1),Js.white=new Js(1,1,1,1),Js.transparent=new Js(0,0,0,0),Js.red=new Js(1,0,0,1),Js.blue=new Js(0,0,1,1);var Qn=Js;class Xm{constructor(e,i,a){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class qd{constructor(e,i,a,l,u){this.text=e.normalize?e.normalize():e,this.image=i,this.scale=a,this.fontStack=l,this.textColor=u}}class ps{constructor(e){this.sections=e}static fromString(e){return new ps([new qd(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.namePrimary.length!==0)}static factory(e){return e instanceof ps?e:ps.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const i of this.sections){if(i.image){e.push(["image",i.image.namePrimary]);continue}e.push(i.text);const a={};i.fontStack&&(a["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(a["font-scale"]=i.scale),i.textColor&&(a["text-color"]=["rgba"].concat(i.textColor.toArray())),e.push(a)}return e}}class Qs{constructor(e){this.namePrimary=e.namePrimary,e.nameSecondary&&(this.nameSecondary=e.nameSecondary),this.available=e.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(e,i){return e?new Qs({namePrimary:e,nameSecondary:i,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function ep(r,e,i,a){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof i=="number"&&i>=0&&i<=255?a===void 0||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[r,e,i,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[r,e,i,a]:[r,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Wl(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Qn||r instanceof Xm||r instanceof ps||r instanceof Qs)return!0;if(Array.isArray(r)){for(const e of r)if(!Wl(e))return!1;return!0}if(typeof r=="object"){for(const e in r)if(!Wl(r[e]))return!1;return!0}return!1}function fa(r){if(r===null)return Ys;if(typeof r=="string")return si;if(typeof r=="boolean")return vn;if(typeof r=="number")return Vr;if(r instanceof Qn)return Ds;if(r instanceof Xm)return Wh;if(r instanceof ps)return Tu;if(r instanceof Qs)return Iu;if(Array.isArray(r)){const e=r.length;let i;for(const a of r){const l=fa(a);if(i){if(i===l)continue;i=Kn;break}i=l}return Ss(i||Kn,e)}return ss}function Kh(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Qn||r instanceof ps||r instanceof Qs?r.toString():JSON.stringify(r)}class Wd{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(e.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Wl(e[1]))return i.error("invalid value");const a=e[1];let l=fa(a);const u=i.expectedType;return l.kind!=="array"||l.N!==0||!u||u.kind!=="array"||typeof u.N=="number"&&u.N!==0||(l=u),new Wd(l,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Qn?["rgba"].concat(this.value.toArray()):this.value instanceof ps?this.value.serialize():this.value}}var Kl=Wd,wa=class{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}};const mc={string:si,number:Vr,boolean:vn,object:ss};class Pu{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let a,l=1;const u=e[0];if(u==="array"){let g,x;if(e.length>2){const b=e[1];if(typeof b!="string"||!(b in mc)||b==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);g=mc[b],l++}else g=Kn;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);x=e[2],l++}a=Ss(g,x)}else a=mc[u];const h=[];for(;l<e.length;l++){const g=i.parse(e[l],l,Kn);if(!g)return null;h.push(g)}return new Pu(a,h)}evaluate(e){for(let i=0;i<this.args.length;i++){const a=this.args[i].evaluate(e);if(!ih(this.type,fa(a)))return a;if(i===this.args.length-1)throw new wa(`Expected value to be of type ${qo(this.type)}, but found ${qo(fa(a))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,i=[e.kind];if(e.kind==="array"){const a=e.itemType;if(a.kind==="string"||a.kind==="number"||a.kind==="boolean"){i.push(a.kind);const l=e.N;(typeof l=="number"||this.args.length>1)&&i.push(l)}}return i.concat(this.args.map(a=>a.serialize()))}}var gc=Pu;class oh{constructor(e){this.type=Tu,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return i.error("First argument must be an image or text section.");const l=[];let u=!1;for(let h=1;h<=e.length-1;++h){const g=e[h];if(u&&typeof g=="object"&&!Array.isArray(g)){u=!1;let x=null;if(g["font-scale"]&&(x=i.parse(g["font-scale"],1,Vr),!x))return null;let b=null;if(g["text-font"]&&(b=i.parse(g["text-font"],1,Ss(si)),!b))return null;let T=null;if(g["text-color"]&&(T=i.parse(g["text-color"],1,Ds),!T))return null;const M=l[l.length-1];M.scale=x,M.font=b,M.textColor=T}else{const x=i.parse(e[h],1,Kn);if(!x)return null;const b=x.type.kind;if(b!=="string"&&b!=="value"&&b!=="null"&&b!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,l.push({content:x,scale:null,font:null,textColor:null})}}return new oh(l)}evaluate(e){return new ps(this.sections.map(i=>{const a=i.content.evaluate(e);return fa(a)===Iu?new qd("",a,null,null,null):new qd(Kh(a),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))}eachChild(e){for(const i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const i of this.sections){e.push(i.content.serialize());const a={};i.scale&&(a["font-scale"]=i.scale.serialize()),i.font&&(a["text-font"]=i.font.serialize()),i.textColor&&(a["text-color"]=i.textColor.serialize()),e.push(a)}return e}}class Ui{constructor(e,i){this.type=Iu,this.inputPrimary=e,this.inputSecondary=i}static parse(e,i){if(e.length<2)return i.error("Expected two or more arguments.");const a=i.parse(e[1],1,si);if(!a)return i.error("No image name provided.");if(e.length===2)return new Ui(a);const l=i.parse(e[2],1,si);return l?new Ui(a,l):i.error("Secondary image variant is not a string.")}evaluate(e){const i=Qs.fromString(this.inputPrimary.evaluate(e),this.inputSecondary?this.inputSecondary.evaluate(e):void 0);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(i.namePrimary)>-1,i.nameSecondary&&i.available&&e.availableImages&&(i.available=e.availableImages.indexOf(i.nameSecondary)>-1)),i}eachChild(e){e(this.inputPrimary),this.inputSecondary&&e(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Ln(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}const A0={"to-boolean":vn,"to-color":Ds,"to-number":Vr,"to-string":si};class $i{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");const a=e[0],l=[];let u=Ys;if(a==="to-array"){if(!Array.isArray(e[1]))return null;const h=e[1].length;if(i.expectedType){if(i.expectedType.kind!=="array")return i.error(`Expected ${i.expectedType.kind} but found array.`);u=Ss(i.expectedType.itemType,h)}else{if(!(h>0&&Wl(e[1][0])))return null;u=Ss(fa(e[1][0]),h)}for(let g=0;g<h;g++){const x=e[1][g];let b;if(Ln(x)==="array")b=i.parse(x,void 0,u.itemType);else{const T=Ln(x);if(T!==u.itemType.kind)return i.error(`Expected ${u.itemType.kind} but found ${T}.`);b=i.registry.literal.parse(["literal",x===void 0?null:x],i)}if(!b)return null;l.push(b)}}else{if((a==="to-boolean"||a==="to-string")&&e.length!==2)return i.error("Expected one argument.");u=A0[a];for(let h=1;h<e.length;h++){const g=i.parse(e[h],h,Kn);if(!g)return null;l.push(g)}}return new $i(u,l)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let i,a;for(const l of this.args){if(i=l.evaluate(e),a=null,i instanceof Qn)return i;if(typeof i=="string"){const u=e.parseColor(i);if(u)return u}else if(Array.isArray(i)&&(a=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:ep(i[0],i[1],i[2],i[3]),!a))return new Qn(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new wa(a||`Could not parse color from value '${typeof i=="string"?i:String(JSON.stringify(i))}'`)}if(this.type.kind==="number"){let i=null;for(const a of this.args){if(i=a.evaluate(e),i===null)return 0;const l=Number(i);if(!isNaN(l))return l}throw new wa(`Could not convert ${JSON.stringify(i)} to number.`)}return this.type.kind==="formatted"?ps.fromString(Kh(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Qs.fromString(Kh(this.args[0].evaluate(e))):this.type.kind==="array"?this.args.map(i=>i.evaluate(e)):Kh(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new oh([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ui(this.args[0]).serialize();const e=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(i=>{e.push(i.serialize())}),e}}var fl=$i;const na=["Unknown","Point","LineString","Polygon"];var Wo=class{constructor(r){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.options=r}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?na[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(r){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:a}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*e-r[0])+this.featureDistanceData.bearing[1]*(a*e-r[1])}return 0}parseColor(r){let e=this._parseColorCache[r];return e||(e=this._parseColorCache[r]=Qn.parse(r)),e}getConfig(r){return this.options?this.options.get(r):null}};class yc{constructor(e,i,a,l){this.name=e,this.type=i,this._evaluate=a,this.args=l}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,i){const a=e[0],l=yc.definitions[a];if(!l)return i.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(l)?l[0]:l.type,h=Array.isArray(l)?[[l[1],l[2]]]:l.overloads,g=h.filter(([b])=>!Array.isArray(b)||b.length===e.length-1);let x=null;for(const[b,T]of g){x=new dp(i.registry,i.path,null,i.scope,void 0,i.options);const M=[];let A=!1;for(let O=1;O<e.length;O++){const B=e[O],V=Array.isArray(b)?b[O-1]:b.type,W=x.parse(B,1+M.length,V);if(!W){A=!0;break}M.push(W)}if(!A)if(Array.isArray(b)&&b.length!==M.length)x.error(`Expected ${b.length} arguments, but found ${M.length} instead.`);else{for(let O=0;O<M.length;O++){const B=Array.isArray(b)?b[O]:b.type,V=M[O];x.concat(O+1).checkSubtype(B,V.type)}if(x.errors.length===0)return new yc(a,u,T,M)}}if(g.length===1)i.errors.push(...x.errors);else{const b=(g.length?g:h).map(([M])=>{return A=M,Array.isArray(A)?`(${A.map(qo).join(", ")})`:`(${qo(A.type)}...)`;var A}).join(" | "),T=[];for(let M=1;M<e.length;M++){const A=i.parse(e[M],1+T.length);if(!A)return null;T.push(qo(A.type))}i.error(`Expected arguments of type ${b}, but found (${T.join(", ")}) instead.`)}return null}static register(e,i){yc.definitions=i;for(const a in i)e[a]=yc}}var Zl=yc;class Zh{constructor(e,i,a){this.type=Wh,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(e.length!==2)return i.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return i.error("Collator options argument must be an object.");const l=i.parse(a["case-sensitive"]!==void 0&&a["case-sensitive"],1,vn);if(!l)return null;const u=i.parse(a["diacritic-sensitive"]!==void 0&&a["diacritic-sensitive"],1,vn);if(!u)return null;let h=null;return a.locale&&(h=i.parse(a.locale,1,si),!h)?null:new Zh(l,u,h)}evaluate(e){return new Xm(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}var Kd={exports:{}};Kd.exports=function(){function r(a,l,u,h,g){for(;h>u;){if(h-u>600){var x=h-u+1,b=l-u+1,T=Math.log(x),M=.5*Math.exp(2*T/3),A=.5*Math.sqrt(T*M*(x-M)/x)*(b-x/2<0?-1:1);r(a,l,Math.max(u,Math.floor(l-b*M/x+A)),Math.min(h,Math.floor(l+(x-b)*M/x+A)),g)}var O=a[l],B=u,V=h;for(e(a,u,l),g(a[h],O)>0&&e(a,u,h);B<V;){for(e(a,B,V),B++,V--;g(a[B],O)<0;)B++;for(;g(a[V],O)>0;)V--}g(a[u],O)===0?e(a,u,V):e(a,++V,h),V<=l&&(u=V+1),l<=V&&(h=V-1)}}function e(a,l,u){var h=a[l];a[l]=a[u],a[u]=h}function i(a,l){return a<l?-1:a>l?1:0}return function(a,l,u,h,g){r(a,l,u||0,h||a.length-1,g||i)}}();var tp=re(Kd.exports);function Ym(r){let e=0;for(let i,a,l=0,u=r.length,h=u-1;l<u;h=l++)i=r[l],a=r[h],e+=(a.x-i.x)*(i.y+a.y);return e}function Au(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function ah(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Zd(r,e,i){const a=r[0]-e[0],l=r[1]-e[1],u=r[0]-i[0],h=r[1]-i[1];return a*h-u*l==0&&a*u<=0&&l*h<=0}function vc(r,e,i=!1){let a=!1;for(let g=0,x=e.length;g<x;g++){const b=e[g];for(let T=0,M=b.length,A=M-1;T<M;A=T++){const O=b[A],B=b[T];if(Zd(r,O,B))return i;(u=O)[1]>(l=r)[1]!=(h=B)[1]>l[1]&&l[0]<(h[0]-u[0])*(l[1]-u[1])/(h[1]-u[1])+u[0]&&(a=!a)}}var l,u,h;return a}function Xh(r,e,i,a){const l=a[0]-i[0],u=a[1]-i[1],h=(r[0]-i[0])*u-l*(r[1]-i[1]),g=(e[0]-i[0])*u-l*(e[1]-i[1]);return h>0&&g<0||h<0&&g>0}function rp(r,e,i,a){return(l=[a[0]-i[0],a[1]-i[1]])[0]*(u=[e[0]-r[0],e[1]-r[1]])[1]-l[1]*u[0]!=0&&!(!Xh(r,e,i,a)||!Xh(i,a,r,e));var l,u}const _c=8192;function R0(r,e){const i=(180+r[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,l=Math.pow(2,e.z);return[Math.round(i*l*_c),Math.round(a*l*_c)]}function ky(r,e){for(let i=0;i<e.length;i++)if(vc(r,e[i]))return!0;return!1}function np(r,e,i){for(const a of i)for(let l=0,u=a.length,h=u-1;l<u;h=l++)if(rp(r,e,a[h],a[l]))return!0;return!1}function ip(r,e){for(let i=0;i<r.length;++i)if(!vc(r[i],e))return!1;for(let i=0;i<r.length-1;++i)if(np(r[i],r[i+1],e))return!1;return!0}function Oy(r,e){for(let i=0;i<e.length;i++)if(ip(r,e[i]))return!0;return!1}function op(r,e,i){const a=[];for(let l=0;l<r.length;l++){const u=[];for(let h=0;h<r[l].length;h++){const g=R0(r[l][h],i);Au(e,g),u.push(g)}a.push(u)}return a}function Yh(r,e,i){const a=[];for(let l=0;l<r.length;l++){const u=op(r[l],e,i);a.push(u)}return a}function Xd(r,e,i,a){if(r[0]<i[0]||r[0]>i[2]){const l=.5*a;let u=r[0]-i[0]>l?-a:i[0]-r[0]>l?a:0;u===0&&(u=r[0]-i[2]>l?-a:i[2]-r[0]>l?a:0),r[0]+=u}Au(e,r)}function Yd(r,e,i,a){const l=Math.pow(2,a.z)*_c,u=[a.x*_c,a.y*_c],h=[];if(!r)return h;for(const g of r)for(const x of g){const b=[x.x+u[0],x.y+u[1]];Xd(b,e,i,l),h.push(b)}return h}function Jm(r,e,i,a){const l=Math.pow(2,a.z)*_c,u=[a.x*_c,a.y*_c],h=[];if(!r)return h;for(const x of r){const b=[];for(const T of x){const M=[T.x+u[0],T.y+u[1]];Au(e,M),b.push(M)}h.push(b)}if(e[2]-e[0]<=l/2){(g=e)[0]=g[1]=1/0,g[2]=g[3]=-1/0;for(const x of h)for(const b of x)Xd(b,e,i,l)}var g;return h}class $o{constructor(e,i){this.type=vn,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Wl(e[1])){const a=e[1];if(a.type==="FeatureCollection")for(let l=0;l<a.features.length;++l){const u=a.features[l].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new $o(a,a.features[l].geometry)}else if(a.type==="Feature"){const l=a.geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new $o(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new $o(a,a)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(i,a){const l=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],h=i.canonicalID();if(!h)return!1;if(a.type==="Polygon"){const g=op(a.coordinates,u,h),x=Yd(i.geometry(),l,u,h);if(!ah(l,u))return!1;for(const b of x)if(!vc(b,g))return!1}if(a.type==="MultiPolygon"){const g=Yh(a.coordinates,u,h),x=Yd(i.geometry(),l,u,h);if(!ah(l,u))return!1;for(const b of x)if(!ky(b,g))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(i,a){const l=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],h=i.canonicalID();if(!h)return!1;if(a.type==="Polygon"){const g=op(a.coordinates,u,h),x=Jm(i.geometry(),l,u,h);if(!ah(l,u))return!1;for(const b of x)if(!ip(b,g))return!1}if(a.type==="MultiPolygon"){const g=Yh(a.coordinates,u,h),x=Jm(i.geometry(),l,u,h);if(!ah(l,u))return!1;for(const b of x)if(!Oy(b,g))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Vc=$o,Ls={exports:{}};Ls.exports=function(){var r={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},e=1/298.257223563,i=e*(2-e),a=Math.PI/180,l=function(b,T){if(b===void 0)throw new Error("No latitude given.");if(T&&!r[T])throw new Error("Unknown unit "+T+". Use one of: "+Object.keys(r).join(", "));var M=6378.137*a*(T?r[T]:1),A=Math.cos(b*a),O=1/(1-i*(1-A*A)),B=Math.sqrt(O);this.kx=M*B*A,this.ky=M*B*O*(1-i)},u={units:{configurable:!0}};function h(b,T){return b[0]===T[0]&&b[1]===T[1]}function g(b,T,M){var A=x(T[0]-b[0]);return[b[0]+A*M,b[1]+(T[1]-b[1])*M]}function x(b){for(;b<-180;)b+=360;for(;b>180;)b-=360;return b}return l.fromTile=function(b,T,M){var A=Math.PI*(1-2*(b+.5)/Math.pow(2,T)),O=Math.atan(.5*(Math.exp(A)-Math.exp(-A)))/a;return new l(O,M)},u.units.get=function(){return r},l.prototype.distance=function(b,T){var M=x(b[0]-T[0])*this.kx,A=(b[1]-T[1])*this.ky;return Math.sqrt(M*M+A*A)},l.prototype.bearing=function(b,T){var M=x(T[0]-b[0])*this.kx;return Math.atan2(M,(T[1]-b[1])*this.ky)/a},l.prototype.destination=function(b,T,M){var A=M*a;return this.offset(b,Math.sin(A)*T,Math.cos(A)*T)},l.prototype.offset=function(b,T,M){return[b[0]+T/this.kx,b[1]+M/this.ky]},l.prototype.lineDistance=function(b){for(var T=0,M=0;M<b.length-1;M++)T+=this.distance(b[M],b[M+1]);return T},l.prototype.area=function(b){for(var T=0,M=0;M<b.length;M++)for(var A=b[M],O=0,B=A.length,V=B-1;O<B;V=O++)T+=x(A[O][0]-A[V][0])*(A[O][1]+A[V][1])*(M?-1:1);return Math.abs(T)/2*this.kx*this.ky},l.prototype.along=function(b,T){var M=0;if(T<=0)return b[0];for(var A=0;A<b.length-1;A++){var O=b[A],B=b[A+1],V=this.distance(O,B);if((M+=V)>T)return g(O,B,(T-(M-V))/V)}return b[b.length-1]},l.prototype.pointToSegmentDistance=function(b,T,M){var A=T[0],O=T[1],B=x(M[0]-A)*this.kx,V=(M[1]-O)*this.ky,W=0;return B===0&&V===0||((W=(x(b[0]-A)*this.kx*B+(b[1]-O)*this.ky*V)/(B*B+V*V))>1?(A=M[0],O=M[1]):W>0&&(A+=B/this.kx*W,O+=V/this.ky*W)),B=x(b[0]-A)*this.kx,V=(b[1]-O)*this.ky,Math.sqrt(B*B+V*V)},l.prototype.pointOnLine=function(b,T){for(var M,A,O,B,V=1/0,W=0;W<b.length-1;W++){var q=b[W][0],ne=b[W][1],ae=x(b[W+1][0]-q)*this.kx,le=(b[W+1][1]-ne)*this.ky,ie=0;ae===0&&le===0||((ie=(x(T[0]-q)*this.kx*ae+(T[1]-ne)*this.ky*le)/(ae*ae+le*le))>1?(q=b[W+1][0],ne=b[W+1][1]):ie>0&&(q+=ae/this.kx*ie,ne+=le/this.ky*ie));var ue=(ae=x(T[0]-q)*this.kx)*ae+(le=(T[1]-ne)*this.ky)*le;ue<V&&(V=ue,M=q,A=ne,O=W,B=ie)}return{point:[M,A],index:O,t:Math.max(0,Math.min(1,B))}},l.prototype.lineSlice=function(b,T,M){var A=this.pointOnLine(M,b),O=this.pointOnLine(M,T);if(A.index>O.index||A.index===O.index&&A.t>O.t){var B=A;A=O,O=B}var V=[A.point],W=A.index+1,q=O.index;!h(M[W],V[0])&&W<=q&&V.push(M[W]);for(var ne=W+1;ne<=q;ne++)V.push(M[ne]);return h(M[q],O.point)||V.push(O.point),V},l.prototype.lineSliceAlong=function(b,T,M){for(var A=0,O=[],B=0;B<M.length-1;B++){var V=M[B],W=M[B+1],q=this.distance(V,W);if((A+=q)>b&&O.length===0&&O.push(g(V,W,(b-(A-q))/q)),A>=T)return O.push(g(V,W,(T-(A-q))/q)),O;A>b&&O.push(W)}return O},l.prototype.bufferPoint=function(b,T){var M=T/this.ky,A=T/this.kx;return[b[0]-A,b[1]-M,b[0]+A,b[1]+M]},l.prototype.bufferBBox=function(b,T){var M=T/this.ky,A=T/this.kx;return[b[0]-A,b[1]-M,b[2]+A,b[3]+M]},l.prototype.insideBBox=function(b,T){return x(b[0]-T[0])>=0&&x(b[0]-T[2])<=0&&b[1]>=T[1]&&b[1]<=T[3]},Object.defineProperties(l,u),l}();var Ru=re(Ls.exports),Jh={exports:{}};Jh.exports=function(){var r=function(i,a){if(i===void 0&&(i=[]),a===void 0&&(a=e),this.data=i,this.length=this.data.length,this.compare=a,this.length>0)for(var l=(this.length>>1)-1;l>=0;l--)this._down(l)};function e(i,a){return i<a?-1:i>a?1:0}return r.prototype.push=function(i){this.data.push(i),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var i=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),i}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(i){for(var a=this.data,l=this.compare,u=a[i];i>0;){var h=i-1>>1,g=a[h];if(l(u,g)>=0)break;a[i]=g,i=h}a[i]=u},r.prototype._down=function(i){for(var a=this.data,l=this.compare,u=this.length>>1,h=a[i];i<u;){var g=1+(i<<1),x=a[g],b=g+1;if(b<this.length&&l(a[b],x)<0&&(g=b,x=a[b]),l(x,h)>=0)break;a[i]=x,i=g}a[i]=h},r}();var Qh=re(Jh.exports),Zt=8192;function ed(r,e){return e.dist-r.dist}const ku=100,ap=50;function Qm(r){const e=[1/0,1/0,-1/0,-1/0];if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}function Jd(r){return r[1]-r[0]+1}function xc(r,e){const i=r[1]>=r[0]&&r[1]<e;return i||console.warn("Distance Expression: Index is out of range"),i}function sp(r,e){if(r[0]>r[1])return[null,null];const i=Jd(r);if(e){if(i===2)return[r,null];const a=Math.floor(i/2);return[[r[0],r[0]+a],[r[0]+a,r[1]]]}{if(i===1)return[r,null];const a=Math.floor(i/2)-1;return[[r[0],r[0]+a],[r[0]+a+1,r[1]]]}}function Cs(r,e){const i=[1/0,1/0,-1/0,-1/0];if(!xc(e,r.length))return i;for(let a=e[0];a<=e[1];++a)Au(i,r[a]);return i}function Ou(r){const e=[1/0,1/0,-1/0,-1/0];for(let i=0;i<r.length;++i)for(let a=0;a<r[i].length;++a)Au(e,r[i][a]);return e}function ls(r,e,i){if(Qm(r)||Qm(e))return NaN;let a=0,l=0;return r[2]<e[0]&&(a=e[0]-r[2]),r[0]>e[2]&&(a=r[0]-e[2]),r[1]>e[3]&&(l=r[1]-e[3]),r[3]<e[1]&&(l=e[1]-r[3]),i.distance([0,0],[a,l])}function sh(r,e){const i=Math.pow(2,e.z);return[(l=(r.x/Zt+e.x)/i,360*l-180),(a=(r.y/Zt+e.y)/i,360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90)];var a,l}function zy(r,e){const i=[];for(let a=0;a<r.length;++a)i.push(sh(r[a],e));return i}function eg(r,e,i){const a=i.pointOnLine(e,r).point;return i.distance(r,a)}function tg(r,e,i,a,l){const u=i.slice(a[0],a[1]+1);let h=1/0;for(let g=e[0];g<=e[1];++g)if((h=Math.min(h,eg(r[g],u,l)))===0)return 0;return h}function Xl(r,e,i,a,l){const u=Math.min(l.pointToSegmentDistance(r,i,a),l.pointToSegmentDistance(e,i,a)),h=Math.min(l.pointToSegmentDistance(i,r,e),l.pointToSegmentDistance(a,r,e));return Math.min(u,h)}function Dy(r,e,i,a,l){if(!xc(e,r.length)||!xc(a,i.length))return NaN;let u=1/0;for(let h=e[0];h<e[1];++h)for(let g=a[0];g<a[1];++g){if(rp(r[h],r[h+1],i[g],i[g+1]))return 0;u=Math.min(u,Xl(r[h],r[h+1],i[g],i[g+1],l))}return u}function Al(r,e,i,a,l){if(!xc(e,r.length)||!xc(a,i.length))return NaN;let u=1/0;for(let h=e[0];h<=e[1];++h)for(let g=a[0];g<=a[1];++g)if((u=Math.min(u,l.distance(r[h],i[g])))===0)return u;return u}function Uc(r,e,i){if(vc(r,e,!0))return 0;let a=1/0;for(const l of e){const u=l.length;if(u<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(l[0]!==l[u-1]&&(a=Math.min(a,i.pointToSegmentDistance(r,l[u-1],l[0])))===0||(a=Math.min(a,eg(r,l,i)))===0)return a}return a}function lp(r,e,i,a){if(!xc(e,r.length))return NaN;for(let u=e[0];u<=e[1];++u)if(vc(r[u],i,!0))return 0;let l=1/0;for(let u=e[0];u<e[1];++u)for(const h of i)for(let g=0,x=h.length,b=x-1;g<x;b=g++){if(rp(r[u],r[u+1],h[b],h[g]))return 0;l=Math.min(l,Xl(r[u],r[u+1],h[b],h[g],a))}return l}function bc(r,e){for(const i of r)for(let a=0;a<=i.length-1;++a)if(vc(i[a],e,!0))return!0;return!1}function Hc(r,e,i,a=1/0){const l=Ou(r),u=Ou(e);if(a!==1/0&&ls(l,u,i)>=a)return a;if(ah(l,u)){if(bc(r,e))return 0}else if(bc(e,r))return 0;let h=a;for(const g of r)for(let x=0,b=g.length,T=b-1;x<b;T=x++)for(const M of e)for(let A=0,O=M.length,B=O-1;A<O;B=A++){if(rp(g[T],g[x],M[B],M[A]))return 0;h=Math.min(h,Xl(g[T],g[x],M[B],M[A],i))}return h}function cp(r,e,i,a,l,u,h){if(u===null||h===null)return;const g=ls(Cs(a,u),Cs(l,h),i);g<e&&r.push({dist:g,range1:u,range2:h})}function rg(r,e,i,a,l=1/0){let u=Math.min(a.distance(r[0],i[0][0]),l);if(u===0)return u;const h=new Qh([{dist:0,range1:[0,r.length-1],range2:[0,0]}],ed),g=e?ap:ku,x=Ou(i);for(;h.length;){const b=h.pop();if(b.dist>=u)continue;const T=b.range1;if(Jd(T)<=g){if(!xc(T,r.length))return NaN;if(e){const M=lp(r,T,i,a);if((u=Math.min(u,M))===0)return u}else for(let M=T[0];M<=T[1];++M){const A=Uc(r[M],i,a);if((u=Math.min(u,A))===0)return u}}else{const M=sp(T,e);if(M[0]!==null){const A=ls(Cs(r,M[0]),x,a);A<u&&h.push({dist:A,range1:M[0],range2:[0,0]})}if(M[1]!==null){const A=ls(Cs(r,M[1]),x,a);A<u&&h.push({dist:A,range1:M[1],range2:[0,0]})}}}return u}function ng(r,e,i,a,l,u=1/0){let h=Math.min(u,l.distance(r[0],i[0]));if(h===0)return h;const g=new Qh([{dist:0,range1:[0,r.length-1],range2:[0,i.length-1]}],ed),x=e?ap:ku,b=a?ap:ku;for(;g.length;){const T=g.pop();if(T.dist>=h)continue;const M=T.range1,A=T.range2;if(Jd(M)<=x&&Jd(A)<=b){if(!xc(M,r.length)||!xc(A,i.length))return NaN;if(e&&a?h=Math.min(h,Dy(r,M,i,A,l)):e||a?e&&!a?h=Math.min(h,tg(i,A,r,M,l)):!e&&a&&(h=Math.min(h,tg(r,M,i,A,l))):h=Math.min(h,Al(r,M,i,A,l)),h===0)return h}else{const O=sp(M,e),B=sp(A,a);cp(g,h,l,r,i,O[0],B[0]),cp(g,h,l,r,i,O[0],B[1]),cp(g,h,l,r,i,O[1],B[0]),cp(g,h,l,r,i,O[1],B[1])}}return h}function td(r,e,i,a,l=1/0){let u=l;const h=Cs(r,[0,r.length-1]);for(const g of i)if(!(u!==1/0&&ls(h,Cs(g,[0,g.length-1]),a)>=u)&&(u=Math.min(u,ng(r,e,g,!0,a,u)),u===0))return u;return u}function Gc(r,e,i,a,l=1/0){let u=l;const h=Cs(r,[0,r.length-1]);for(const g of i){if(u!==1/0&&ls(h,Ou(g),a)>=u)continue;const x=rg(r,e,g,a,u);if(isNaN(x))return x;if((u=Math.min(u,x))===0)return u}return u}function Yl(r){return r==="Point"||r==="MultiPoint"||r==="LineString"||r==="MultiLineString"||r==="Polygon"||r==="MultiPolygon"}class _n{constructor(e,i){this.type=Vr,this.geojson=e,this.geometries=i}static parse(e,i){if(e.length!==2)return i.error(`'distance' expression requires either one argument, but found ' ${e.length-1} instead.`);if(Wl(e[1])){const a=e[1];if(a.type==="FeatureCollection"){for(let l=0;l<a.features.length;++l)if(Yl(a.features[l].geometry.type))return new _n(a,a.features[l].geometry)}else if(a.type==="Feature"){if(Yl(a.geometry.type))return new _n(a,a.geometry)}else if(Yl(a.type))return new _n(a,a)}return i.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){const i=e.geometry(),a=e.canonicalID();if(i!=null&&a!=null){if(e.geometryType()==="Point")return function(l,u,h){const g=[];for(const b of l)for(const T of b)g.push(sh(T,u));const x=new Ru(g[0][1],"meters");return h.type==="Point"||h.type==="MultiPoint"||h.type==="LineString"?ng(g,!1,h.type==="Point"?[h.coordinates]:h.coordinates,h.type==="LineString",x):h.type==="MultiLineString"?td(g,!1,h.coordinates,x):h.type==="Polygon"||h.type==="MultiPolygon"?Gc(g,!1,h.type==="Polygon"?[h.coordinates]:h.coordinates,x):null}(i,a,this.geometries);if(e.geometryType()==="LineString")return function(l,u,h){const g=[];for(const b of l){const T=[];for(const M of b)T.push(sh(M,u));g.push(T)}const x=new Ru(g[0][0][1],"meters");if(h.type==="Point"||h.type==="MultiPoint"||h.type==="LineString")return td(h.type==="Point"?[h.coordinates]:h.coordinates,h.type==="LineString",g,x);if(h.type==="MultiLineString"){let b=1/0;for(let T=0;T<h.coordinates.length;T++){const M=td(h.coordinates[T],!0,g,x,b);if(isNaN(M))return M;if((b=Math.min(b,M))===0)return b}return b}if(h.type==="Polygon"||h.type==="MultiPolygon"){let b=1/0;for(let T=0;T<g.length;T++){const M=Gc(g[T],!0,h.type==="Polygon"?[h.coordinates]:h.coordinates,x,b);if(isNaN(M))return M;if((b=Math.min(b,M))===0)return b}return b}return null}(i,a,this.geometries);if(e.geometryType()==="Polygon")return function(l,u,h){const g=[];for(const b of function(T,M){const A=T.length;if(A<=1)return[T];const O=[];let B,V;for(let W=0;W<A;W++){const q=Ym(T[W]);q!==0&&(T[W].area=Math.abs(q),V===void 0&&(V=q<0),V===q<0?(B&&O.push(B),B=[T[W]]):B.push(T[W]))}return B&&O.push(B),O}(l)){const T=[];for(let M=0;M<b.length;++M)T.push(zy(b[M],u));g.push(T)}const x=new Ru(g[0][0][0][1],"meters");if(h.type==="Point"||h.type==="MultiPoint"||h.type==="LineString")return Gc(h.type==="Point"?[h.coordinates]:h.coordinates,h.type==="LineString",g,x);if(h.type==="MultiLineString"){let b=1/0;for(let T=0;T<h.coordinates.length;T++){const M=Gc(h.coordinates[T],!0,g,x,b);if(isNaN(M))return M;if((b=Math.min(b,M))===0)return b}return b}return h.type==="Polygon"||h.type==="MultiPolygon"?function(b,T,M){let A=1/0;for(const O of b)for(const B of T){const V=Hc(O,B,M,A);if(isNaN(V))return V;if((A=Math.min(A,V))===0)return A}return A}(h.type==="Polygon"?[h.coordinates]:h.coordinates,g,x):null}(i,a,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var rd=_n;function Rl(r){if(r instanceof Zl&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Vc||r instanceof rd)return!1;let e=!0;return r.eachChild(i=>{e&&!Rl(i)&&(e=!1)}),e}function qc(r){if(r instanceof Zl&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(i=>{e&&!qc(i)&&(e=!1)}),e}function up(r){if(r instanceof Zl&&r.name==="config")return!1;let e=!0;return r.eachChild(i=>{e&&!up(i)&&(e=!1)}),e}function fn(r,e){if(r instanceof Zl&&e.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild(a=>{i&&!fn(a,e)&&(i=!1)}),i}class Qd{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(e.length!==2||typeof e[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const a=e[1];return i.scope.has(a)?new Qd(a,i.scope.get(a)):i.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var hp=Qd;class ig{constructor(e,i=[],a,l=new Eu,u=[],h){this.registry=e,this.path=i,this.key=i.map(g=>`[${g}]`).join(""),this.scope=l,this.errors=u,this.expectedType=a,this.options=h}parse(e,i,a,l,u={}){return i||a?this.concat(i,a,l)._parse(e,u):this._parse(e,u)}_parse(e,i){function a(l,u,h){return h==="assert"?new gc(u,[l]):h==="coerce"?new fl(u,[l]):l}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const l=typeof e[0]=="string"?this.registry[e[0]]:void 0;if(l){let u=l.parse(e,this);if(!u)return null;if(this.expectedType){const h=this.expectedType,g=u.type;if(h.kind!=="string"&&h.kind!=="number"&&h.kind!=="boolean"&&h.kind!=="object"&&h.kind!=="array"||g.kind!=="value")if(h.kind!=="color"&&h.kind!=="formatted"&&h.kind!=="resolvedImage"||g.kind!=="value"&&g.kind!=="string"){if(this.checkSubtype(h,g))return null}else u=a(u,h,i.typeAnnotation||"coerce");else u=a(u,h,i.typeAnnotation||"assert")}if(!(u instanceof Kl)&&u.type.kind!=="resolvedImage"&&fp(u)){const h=new Wo(this.options);try{u=new Kl(u.type,u.evaluate(h))}catch(g){return this.error(g.message),null}}return u}return fl.parse(["to-array",e],this)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,i,a){const l=typeof e=="number"?this.path.concat(e):this.path,u=a?this.scope.concat(a):this.scope;return new ig(this.registry,l,i||null,u,this.errors,this.options)}error(e,...i){const a=`${this.key}${i.map(l=>`[${l}]`).join("")}`;this.errors.push(new as(a,e))}checkSubtype(e,i){const a=ih(e,i);return a&&this.error(a),a}}var dp=ig;function fp(r){if(r instanceof hp)return fp(r.boundExpression);if(r instanceof Zl&&r.name==="error"||r instanceof Zl&&r.name==="config"||r instanceof Zh||r instanceof Vc||r instanceof rd)return!1;const e=r instanceof fl||r instanceof gc;let i=!0;return r.eachChild(a=>{i=e?i&&fp(a):i&&a instanceof Kl}),!!i&&Rl(r)&&fn(r,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light"])}function ef(r,e){const i=r.length-1;let a,l,u=0,h=i,g=0;for(;u<=h;)if(g=Math.floor((u+h)/2),a=r[g],l=r[g+1],a<=e){if(g===i||e<l)return g;u=g+1}else{if(!(a>e))throw new wa("Input is not a number.");h=g-1}return 0}class pp{constructor(e,i,a){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(const[l,u]of a)this.labels.push(l),this.outputs.push(u)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");const a=i.parse(e[1],1,Vr);if(!a)return null;const l=[];let u=null;i.expectedType&&i.expectedType.kind!=="value"&&(u=i.expectedType);for(let h=1;h<e.length;h+=2){const g=h===1?-1/0:e[h],x=e[h+1],b=h,T=h+1;if(typeof g!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',b);if(l.length&&l[l.length-1][0]>=g)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',b);const M=i.parse(x,T,u);if(!M)return null;u=u||M.type,l.push([g,M])}return new pp(u,a,l)}evaluate(e){const i=this.labels,a=this.outputs;if(i.length===1)return a[0].evaluate(e);const l=this.input.evaluate(e);if(l<=i[0])return a[0].evaluate(e);const u=i.length;return l>=i[u-1]?a[u-1].evaluate(e):a[ef(i,l)].evaluate(e)}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e}}var og=pp;function Mn(r,e,i){return r*(1-i)+e*i}function mp(r,e,i){return r.map((a,l)=>Mn(a,e[l],i))}var nd=Object.freeze({__proto__:null,array:mp,color:function(r,e,i){return new Qn(Mn(r.r,e.r,i),Mn(r.g,e.g,i),Mn(r.b,e.b,i),Mn(r.a,e.a,i))},number:Mn});const gp=.95047,$s=1.08883,Wc=4/29,wc=6/29,yp=3*wc*wc,tf=wc*wc*wc,ag=Math.PI/180,Ly=180/Math.PI;function Bs(r){return r>tf?Math.pow(r,1/3):r/yp+Wc}function Ao(r){return r>wc?r*r*r:yp*(r-Wc)}function id(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function rf(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function sg(r){const e=rf(r.r),i=rf(r.g),a=rf(r.b),l=Bs((.4124564*e+.3575761*i+.1804375*a)/gp),u=Bs((.2126729*e+.7151522*i+.072175*a)/1);return{l:116*u-16,a:500*(l-u),b:200*(u-Bs((.0193339*e+.119192*i+.9503041*a)/$s)),alpha:r.a}}function lg(r){let e=(r.l+16)/116,i=isNaN(r.a)?e:e+r.a/500,a=isNaN(r.b)?e:e-r.b/200;return e=1*Ao(e),i=gp*Ao(i),a=$s*Ao(a),new Qn(id(3.2404542*i-1.5371385*e-.4985314*a),id(-.969266*i+1.8760108*e+.041556*a),id(.0556434*i-.2040259*e+1.0572252*a),r.alpha)}function $y(r,e,i){const a=e-r;return r+i*(a>180||a<-180?a-360*Math.round(a/360):a)}const nf={forward:sg,reverse:lg,interpolate:function(r,e,i){return{l:Mn(r.l,e.l,i),a:Mn(r.a,e.a,i),b:Mn(r.b,e.b,i),alpha:Mn(r.alpha,e.alpha,i)}}},Wa={forward:function(r){const{l:e,a:i,b:a}=sg(r),l=Math.atan2(a,i)*Ly;return{h:l<0?l+360:l,c:Math.sqrt(i*i+a*a),l:e,alpha:r.a}},reverse:function(r){const e=r.h*ag,i=r.c;return lg({l:r.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:r.alpha})},interpolate:function(r,e,i){return{h:$y(r.h,e.h,i),c:Mn(r.c,e.c,i),l:Mn(r.l,e.l,i),alpha:Mn(r.alpha,e.alpha,i)}}};var of=Object.freeze({__proto__:null,hcl:Wa,lab:nf});class Pn{constructor(e,i,a,l,u){this.type=e,this.operator=i,this.interpolation=a,this.input=l,this.labels=[],this.outputs=[];for(const[h,g]of u)this.labels.push(h),this.outputs.push(g)}static interpolationFactor(e,i,a,l){let u=0;if(e.name==="exponential")u=Vn(i,e.base,a,l);else if(e.name==="linear")u=Vn(i,1,a,l);else if(e.name==="cubic-bezier"){const h=e.controlPoints;u=new pe(h[0],h[1],h[2],h[3]).solve(Vn(i,1,a,l))}return u}static parse(e,i){let[a,l,u,...h]=e;if(!Array.isArray(l)||l.length===0)return i.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){const b=l[1];if(typeof b!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:b}}else{if(l[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(l[0])}`,1,0);{const b=l.slice(1);if(b.length!==4||b.some(T=>typeof T!="number"||T<0||T>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:b}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(u=i.parse(u,2,Vr),!u)return null;const g=[];let x=null;a==="interpolate-hcl"||a==="interpolate-lab"?x=Ds:i.expectedType&&i.expectedType.kind!=="value"&&(x=i.expectedType);for(let b=0;b<h.length;b+=2){const T=h[b],M=h[b+1],A=b+3,O=b+4;if(typeof T!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=T)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',A);const B=i.parse(M,O,x);if(!B)return null;x=x||B.type,g.push([T,B])}return x.kind==="number"||x.kind==="color"||x.kind==="array"&&x.itemType.kind==="number"&&typeof x.N=="number"?new Pn(x,a,l,u,g):i.error(`Type ${qo(x)} is not interpolatable.`)}evaluate(e){const i=this.labels,a=this.outputs;if(i.length===1)return a[0].evaluate(e);const l=this.input.evaluate(e);if(l<=i[0])return a[0].evaluate(e);const u=i.length;if(l>=i[u-1])return a[u-1].evaluate(e);const h=ef(i,l),g=Pn.interpolationFactor(this.interpolation,l,i[h],i[h+1]),x=a[h].evaluate(e),b=a[h+1].evaluate(e);return this.operator==="interpolate"?nd[this.type.kind.toLowerCase()](x,b,g):this.operator==="interpolate-hcl"?Wa.reverse(Wa.interpolate(Wa.forward(x),Wa.forward(b),g)):nf.reverse(nf.interpolate(nf.forward(x),nf.forward(b),g))}eachChild(e){e(this.input);for(const i of this.outputs)e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)i.push(this.labels[a],this.outputs[a].serialize());return i}}function Vn(r,e,i,a){const l=a-i,u=r-i;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}var el=Pn;class af{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expectected at least one argument.");let a=null;const l=i.expectedType;l&&l.kind!=="value"&&(a=l);const u=[];for(const g of e.slice(1)){const x=i.parse(g,1+u.length,a,void 0,{typeAnnotation:"omit"});if(!x)return null;a=a||x.type,u.push(x)}const h=l&&u.some(g=>ih(l,g.type));return new af(h?Kn:a,u)}evaluate(e){let i,a=null,l=0;for(const u of this.args){if(l++,a=u.evaluate(e),a&&a instanceof Qs&&!a.available&&(i||(i=a),a=null,l===this.args.length))return i;if(a!==null)break}return a}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var vp=af;class sa{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let u=1;u<e.length-1;u+=2){const h=e[u];if(typeof h!="string")return i.error(`Expected string, but found ${typeof h} instead.`,u);if(/[^a-zA-Z0-9_]/.test(h))return i.error("Variable names must contain only alphanumeric characters or '_'.",u);const g=i.parse(e[u+1],u+1);if(!g)return null;a.push([h,g])}const l=i.parse(e[e.length-1],e.length-1,i.expectedType,a);return l?new sa(a,l):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[i,a]of this.bindings)e.push(i,a.serialize());return e.push(this.result.serialize()),e}}var _p=sa;class tl{constructor(e,i,a){this.type=e,this.index=i,this.input=a}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,Vr),l=i.parse(e[2],2,Ss(i.expectedType||Kn));return a&&l?new tl(l.type.itemType,a,l):null}evaluate(e){const i=this.index.evaluate(e),a=this.input.evaluate(e);if(i<0)throw new wa(`Array index out of bounds: ${i} < 0.`);if(i>=a.length)throw new wa(`Array index out of bounds: ${i} > ${a.length-1}.`);if(i!==Math.floor(i))throw new wa(`Array index must be an integer, but found ${i} instead.`);return a[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var By=tl;class Kc{constructor(e,i){this.type=vn,this.needle=e,this.haystack=i}static parse(e,i){if(e.length!==3)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,Kn),l=i.parse(e[2],2,Kn);return a&&l?Gd(a.type,[vn,si,Vr,Ys,Kn])?new Kc(a,l):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${qo(a.type)} instead`):null}evaluate(e){const i=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(a==null)return!1;if(!Mu(i,["boolean","string","number","null"]))throw new wa(`Expected first argument to be of type boolean, string, number or null, but found ${qo(fa(i))} instead.`);if(!Mu(a,["string","array"]))throw new wa(`Expected second argument to be of type array or string, but found ${qo(fa(a))} instead.`);return a.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var la=Kc;class Bo{constructor(e,i,a){this.type=Vr,this.needle=e,this.haystack=i,this.fromIndex=a}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,Kn),l=i.parse(e[2],2,Kn);if(!a||!l)return null;if(!Gd(a.type,[vn,si,Vr,Ys,Kn]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${qo(a.type)} instead`);if(e.length===4){const u=i.parse(e[3],3,Vr);return u?new Bo(a,l,u):null}return new Bo(a,l)}evaluate(e){const i=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!Mu(i,["boolean","string","number","null"]))throw new wa(`Expected first argument to be of type boolean, string, number or null, but found ${qo(fa(i))} instead.`);if(!Mu(a,["string","array"]))throw new wa(`Expected second argument to be of type array or string, but found ${qo(fa(a))} instead.`);if(this.fromIndex){const l=this.fromIndex.evaluate(e);return a.indexOf(i,l)}return a.indexOf(i)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var od=Bo;class lh{constructor(e,i,a,l,u,h){this.inputType=e,this.type=i,this.input=a,this.cases=l,this.outputs=u,this.otherwise=h}static parse(e,i){if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");let a,l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);const u={},h=[];for(let b=2;b<e.length-1;b+=2){let T=e[b];const M=e[b+1];Array.isArray(T)||(T=[T]);const A=i.concat(b);if(T.length===0)return A.error("Expected at least one branch label.");for(const B of T){if(typeof B!="number"&&typeof B!="string")return A.error("Branch labels must be numbers or strings.");if(typeof B=="number"&&Math.abs(B)>Number.MAX_SAFE_INTEGER)return A.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof B=="number"&&Math.floor(B)!==B)return A.error("Numeric branch labels must be integer values.");if(a){if(A.checkSubtype(a,fa(B)))return null}else a=fa(B);if(u[String(B)]!==void 0)return A.error("Branch labels must be unique.");u[String(B)]=h.length}const O=i.parse(M,b,l);if(!O)return null;l=l||O.type,h.push(O)}const g=i.parse(e[1],1,Kn);if(!g)return null;const x=i.parse(e[e.length-1],e.length-1,l);return x?g.type.kind!=="value"&&i.concat(1).checkSubtype(a,g.type)?null:new lh(a,l,g,u,h,x):null}evaluate(e){const i=this.input.evaluate(e);return(fa(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),a=[],l={};for(const h of i){const g=l[this.cases[h]];g===void 0?(l[this.cases[h]]=a.length,a.push([this.cases[h],[h]])):a[g][1].push(h)}const u=h=>this.inputType.kind==="number"?Number(h):h;for(const[h,g]of a)e.push(g.length===1?u(g[0]):g.map(u)),e.push(this.outputs[h].serialize());return e.push(this.otherwise.serialize()),e}}var sf=lh;class Zc{constructor(e,i,a){this.type=e,this.branches=i,this.otherwise=a}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");let a;i.expectedType&&i.expectedType.kind!=="value"&&(a=i.expectedType);const l=[];for(let h=1;h<e.length-1;h+=2){const g=i.parse(e[h],h,vn);if(!g)return null;const x=i.parse(e[h+1],h+1,a);if(!x)return null;l.push([g,x]),a=a||x.type}const u=i.parse(e[e.length-1],e.length-1,a);return u?new Zc(a,l,u):null}evaluate(e){for(const[i,a]of this.branches)if(i.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[i,a]of this.branches)e(i),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(i=>{e.push(i.serialize())}),e}}var cg=Zc;class ad{constructor(e,i,a,l){this.type=e,this.input=i,this.beginIndex=a,this.endIndex=l}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=i.parse(e[1],1,Kn),l=i.parse(e[2],2,Vr);if(!a||!l)return null;if(!Gd(a.type,[Ss(Kn),si,Kn]))return i.error(`Expected first argument to be of type array or string, but found ${qo(a.type)} instead`);if(e.length===4){const u=i.parse(e[3],3,Vr);return u?new ad(a.type,a,l,u):null}return new ad(a.type,a,l)}evaluate(e){const i=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!Mu(i,["string","array"]))throw new wa(`Expected first argument to be of type array or string, but found ${qo(fa(i))} instead.`);if(this.endIndex){const l=this.endIndex.evaluate(e);return i.slice(a,l)}return i.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var sd=ad;function xp(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function bp(r,e,i,a){return a.compare(e,i)===0}function Vi(r,e,i){const a=r!=="=="&&r!=="!=";return class hZ{constructor(u,h,g){this.type=vn,this.lhs=u,this.rhs=h,this.collator=g,this.hasUntypedArgument=u.type.kind==="value"||h.type.kind==="value"}static parse(u,h){if(u.length!==3&&u.length!==4)return h.error("Expected two or three arguments.");const g=u[0];let x=h.parse(u[1],1,Kn);if(!x)return null;if(!xp(g,x.type))return h.concat(1).error(`"${g}" comparisons are not supported for type '${qo(x.type)}'.`);let b=h.parse(u[2],2,Kn);if(!b)return null;if(!xp(g,b.type))return h.concat(2).error(`"${g}" comparisons are not supported for type '${qo(b.type)}'.`);if(x.type.kind!==b.type.kind&&x.type.kind!=="value"&&b.type.kind!=="value")return h.error(`Cannot compare types '${qo(x.type)}' and '${qo(b.type)}'.`);a&&(x.type.kind==="value"&&b.type.kind!=="value"?x=new gc(b.type,[x]):x.type.kind!=="value"&&b.type.kind==="value"&&(b=new gc(x.type,[b])));let T=null;if(u.length===4){if(x.type.kind!=="string"&&b.type.kind!=="string"&&x.type.kind!=="value"&&b.type.kind!=="value")return h.error("Cannot use collator to compare non-string types.");if(T=h.parse(u[3],3,Wh),!T)return null}return new hZ(x,b,T)}evaluate(u){const h=this.lhs.evaluate(u),g=this.rhs.evaluate(u);if(a&&this.hasUntypedArgument){const x=fa(h),b=fa(g);if(x.kind!==b.kind||x.kind!=="string"&&x.kind!=="number")throw new wa(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${x.kind}, ${b.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const x=fa(h),b=fa(g);if(x.kind!=="string"||b.kind!=="string")return e(u,h,g)}return this.collator?i(u,h,g,this.collator.evaluate(u)):e(u,h,g)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[r];return this.eachChild(h=>{u.push(h.serialize())}),u}}}const L=Vi("==",function(r,e,i){return e===i},bp),p=Vi("!=",function(r,e,i){return e!==i},function(r,e,i,a){return!bp(0,e,i,a)}),w=Vi("<",function(r,e,i){return e<i},function(r,e,i,a){return a.compare(e,i)<0}),P=Vi(">",function(r,e,i){return e>i},function(r,e,i,a){return a.compare(e,i)>0}),z=Vi("<=",function(r,e,i){return e<=i},function(r,e,i,a){return a.compare(e,i)<=0}),N=Vi(">=",function(r,e,i){return e>=i},function(r,e,i,a){return a.compare(e,i)>=0});class J{constructor(e,i,a,l,u,h){this.type=si,this.number=e,this.locale=i,this.currency=a,this.unit=l,this.minFractionDigits=u,this.maxFractionDigits=h}static parse(e,i){if(e.length!==3)return i.error("Expected two arguments.");const a=i.parse(e[1],1,Vr);if(!a)return null;const l=e[2];if(typeof l!="object"||Array.isArray(l))return i.error("NumberFormat options argument must be an object.");let u=null;if(l.locale&&(u=i.parse(l.locale,1,si),!u))return null;let h=null;if(l.currency&&(h=i.parse(l.currency,1,si),!h))return null;let g=null;if(l.unit&&(g=i.parse(l.unit,1,si),!g))return null;let x=null;if(l["min-fraction-digits"]&&(x=i.parse(l["min-fraction-digits"],1,Vr),!x))return null;let b=null;return l["max-fraction-digits"]&&(b=i.parse(l["max-fraction-digits"],1,Vr),!b)?null:new J(a,u,h,g,x,b)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class ee{constructor(e){this.type=Vr,this.input=e}static parse(e,i){if(e.length!==2)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=i.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${qo(a.type)} instead.`):new ee(a):null}evaluate(e){const i=this.input.evaluate(e);if(typeof i=="string"||Array.isArray(i))return i.length;throw new wa(`Expected value to be of type string or array, but found ${qo(fa(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(i=>{e.push(i.serialize())}),e}}function se(r){return function(){r=1831565813+(r|=0)|0;let e=Math.imul(r^r>>>15,1|r);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}const ye={"==":L,"!=":p,">":P,"<":w,">=":N,"<=":z,array:gc,at:By,boolean:gc,case:cg,coalesce:vp,collator:Zh,format:oh,image:Ui,in:la,"index-of":od,interpolate:el,"interpolate-hcl":el,"interpolate-lab":el,length:ee,let:_p,literal:Kl,match:sf,number:gc,"number-format":J,object:gc,slice:sd,step:og,string:gc,"to-boolean":fl,"to-color":fl,"to-number":fl,"to-string":fl,var:hp,within:Vc,distance:rd};function we(r,[e,i,a,l]){e=e.evaluate(r),i=i.evaluate(r),a=a.evaluate(r);const u=l?l.evaluate(r):1,h=ep(e,i,a,u);if(h)throw new wa(h);return new Qn(e/255*u,i/255*u,a/255*u,u)}function Ie(r,[e,i,a,l]){e=e.evaluate(r),i=i.evaluate(r),a=a.evaluate(r);const u=l?l.evaluate(r):1,h=function(b,T,M,A){return typeof b=="number"&&b>=0&&b<=360?typeof T=="number"&&T>=0&&T<=100&&typeof M=="number"&&M>=0&&M<=100?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:`Invalid hsla value [${[b,T,M,A].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof A=="number"?[b,T,M,A]:[b,T,M]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof A=="number"?[b,T,M,A]:[b,T,M]).join(", ")}]: 'h' must be between 0 and 360.`}(e,i,a,u);if(h)throw new wa(h);const g=`hsla(${e}, ${i}%, ${a}%, ${u})`,x=Qn.parse(g);if(!x)throw new wa(`Failed to parse HSLA color: ${g}`);return x}function We(r,e){return r in e}function at(r,e){const i=e[r];return i===void 0?null:i}function st(r,e,i){i.length&&(e+=`${i}`);const a=r.getConfig(e);return a?a.evaluate(r):null}function ht(r){return{type:r}}Zl.register(ye,{error:[{kind:"error"},[si],(r,[e])=>{throw new wa(e.evaluate(r))}],typeof:[si,[Kn],(r,[e])=>qo(fa(e.evaluate(r)))],"to-rgba":[Ss(Vr,4),[Ds],(r,[e])=>e.evaluate(r).toArray()],rgb:[Ds,[Vr,Vr,Vr],we],rgba:[Ds,[Vr,Vr,Vr,Vr],we],hsl:[Ds,[Vr,Vr,Vr],Ie],hsla:[Ds,[Vr,Vr,Vr,Vr],Ie],has:{type:vn,overloads:[[[si],(r,[e])=>We(e.evaluate(r),r.properties())],[[si,ss],(r,[e,i])=>We(e.evaluate(r),i.evaluate(r))]]},get:{type:Kn,overloads:[[[si],(r,[e])=>at(e.evaluate(r),r.properties())],[[si,ss],(r,[e,i])=>at(e.evaluate(r),i.evaluate(r))]]},config:{type:Kn,overloads:[[[si],(r,[e])=>st(r,e.evaluate(r),"")],[[si,si],(r,[e,i])=>st(r,e.evaluate(r),i.evaluate(r))]]},"feature-state":[Kn,[si],(r,[e])=>at(e.evaluate(r),r.featureState||{})],properties:[ss,[],r=>r.properties()],"geometry-type":[si,[],r=>r.geometryType()],id:[Kn,[],r=>r.id()],zoom:[Vr,[],r=>r.globals.zoom],pitch:[Vr,[],r=>r.globals.pitch||0],"distance-from-center":[Vr,[],r=>r.distanceFromCenter()],"measure-light":[Vr,[si],(r,[e])=>r.measureLight(e.evaluate(r))],"heatmap-density":[Vr,[],r=>r.globals.heatmapDensity||0],"line-progress":[Vr,[],r=>r.globals.lineProgress||0],"raster-value":[Vr,[],r=>r.globals.rasterValue||0],"sky-radial-progress":[Vr,[],r=>r.globals.skyRadialProgress||0],accumulated:[Kn,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Vr,ht(Vr),(r,e)=>{let i=0;for(const a of e)i+=a.evaluate(r);return i}],"*":[Vr,ht(Vr),(r,e)=>{let i=1;for(const a of e)i*=a.evaluate(r);return i}],"-":{type:Vr,overloads:[[[Vr,Vr],(r,[e,i])=>e.evaluate(r)-i.evaluate(r)],[[Vr],(r,[e])=>-e.evaluate(r)]]},"/":[Vr,[Vr,Vr],(r,[e,i])=>e.evaluate(r)/i.evaluate(r)],"%":[Vr,[Vr,Vr],(r,[e,i])=>e.evaluate(r)%i.evaluate(r)],ln2:[Vr,[],()=>Math.LN2],pi:[Vr,[],()=>Math.PI],e:[Vr,[],()=>Math.E],"^":[Vr,[Vr,Vr],(r,[e,i])=>Math.pow(e.evaluate(r),i.evaluate(r))],sqrt:[Vr,[Vr],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[Vr,[Vr],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[Vr,[Vr],(r,[e])=>Math.log(e.evaluate(r))],log2:[Vr,[Vr],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[Vr,[Vr],(r,[e])=>Math.sin(e.evaluate(r))],cos:[Vr,[Vr],(r,[e])=>Math.cos(e.evaluate(r))],tan:[Vr,[Vr],(r,[e])=>Math.tan(e.evaluate(r))],asin:[Vr,[Vr],(r,[e])=>Math.asin(e.evaluate(r))],acos:[Vr,[Vr],(r,[e])=>Math.acos(e.evaluate(r))],atan:[Vr,[Vr],(r,[e])=>Math.atan(e.evaluate(r))],min:[Vr,ht(Vr),(r,e)=>Math.min(...e.map(i=>i.evaluate(r)))],max:[Vr,ht(Vr),(r,e)=>Math.max(...e.map(i=>i.evaluate(r)))],abs:[Vr,[Vr],(r,[e])=>Math.abs(e.evaluate(r))],round:[Vr,[Vr],(r,[e])=>{const i=e.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[Vr,[Vr],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[Vr,[Vr],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[vn,[si,Kn],(r,[e,i])=>r.properties()[e.value]===i.value],"filter-id-==":[vn,[Kn],(r,[e])=>r.id()===e.value],"filter-type-==":[vn,[si],(r,[e])=>r.geometryType()===e.value],"filter-<":[vn,[si,Kn],(r,[e,i])=>{const a=r.properties()[e.value],l=i.value;return typeof a==typeof l&&a<l}],"filter-id-<":[vn,[Kn],(r,[e])=>{const i=r.id(),a=e.value;return typeof i==typeof a&&i<a}],"filter->":[vn,[si,Kn],(r,[e,i])=>{const a=r.properties()[e.value],l=i.value;return typeof a==typeof l&&a>l}],"filter-id->":[vn,[Kn],(r,[e])=>{const i=r.id(),a=e.value;return typeof i==typeof a&&i>a}],"filter-<=":[vn,[si,Kn],(r,[e,i])=>{const a=r.properties()[e.value],l=i.value;return typeof a==typeof l&&a<=l}],"filter-id-<=":[vn,[Kn],(r,[e])=>{const i=r.id(),a=e.value;return typeof i==typeof a&&i<=a}],"filter->=":[vn,[si,Kn],(r,[e,i])=>{const a=r.properties()[e.value],l=i.value;return typeof a==typeof l&&a>=l}],"filter-id->=":[vn,[Kn],(r,[e])=>{const i=r.id(),a=e.value;return typeof i==typeof a&&i>=a}],"filter-has":[vn,[Kn],(r,[e])=>e.value in r.properties()],"filter-has-id":[vn,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[vn,[Ss(si)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[vn,[Ss(Kn)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[vn,[si,Ss(Kn)],(r,[e,i])=>i.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[vn,[si,Ss(Kn)],(r,[e,i])=>function(a,l,u,h){for(;u<=h;){const g=u+h>>1;if(l[g]===a)return!0;l[g]>a?h=g-1:u=g+1}return!1}(r.properties()[e.value],i.value,0,i.value.length-1)],all:{type:vn,overloads:[[[vn,vn],(r,[e,i])=>e.evaluate(r)&&i.evaluate(r)],[ht(vn),(r,e)=>{for(const i of e)if(!i.evaluate(r))return!1;return!0}]]},any:{type:vn,overloads:[[[vn,vn],(r,[e,i])=>e.evaluate(r)||i.evaluate(r)],[ht(vn),(r,e)=>{for(const i of e)if(i.evaluate(r))return!0;return!1}]]},"!":[vn,[vn],(r,[e])=>!e.evaluate(r)],"is-supported-script":[vn,[si],(r,[e])=>{const i=r.globals&&r.globals.isSupportedScript;return!i||i(e.evaluate(r))}],upcase:[si,[si],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[si,[si],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[si,ht(Kn),(r,e)=>e.map(i=>Kh(i.evaluate(r))).join("")],"resolved-locale":[si,[Wh],(r,[e])=>e.evaluate(r).resolvedLocale()],random:[Vr,[Vr,Vr,Kn],(r,e)=>{const[i,a,l]=e.map(h=>h.evaluate(r));if(i>a||i===a)return i;let u;if(typeof l=="string")u=function(h){let g=0;if(h.length===0)return g;for(let x=0;x<h.length;x++)g=(g<<5)-g+h.charCodeAt(x),g&=g;return g}(l);else{if(typeof l!="number")throw new wa(`Invalid seed input: ${l}`);u=l}return i+se(u)()*(a-i)}]});var it=ye;function Vt(r){return{result:"success",value:r}}function ar(r){return{result:"error",value:r}}function _t(r,e){return!!r&&!!r.parameters&&r.parameters.indexOf(e)>-1}function Ht(r){return r["property-type"]==="data-driven"}function ur(r){return _t(r.expression,"measure-light")}function hr(r){return _t(r.expression,"zoom")}function _r(r){return!!r.expression&&r.expression.interpolated}function zr(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Ar(r){return r}function Xr(r,e){const i=e.type==="color",a=r.stops&&typeof r.stops[0][0]=="object",l=a||!(a||r.property!==void 0),u=r.type||(_r(e)?"exponential":"interval");if(i&&((r=Wn({},r)).stops&&(r.stops=r.stops.map(b=>[b[0],Qn.parse(b[1])])),r.default=Qn.parse(r.default?r.default:e.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!of[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let h,g,x;if(u==="exponential")h=Hn;else if(u==="interval")h=pn;else if(u==="categorical"){h=Bi,g=Object.create(null);for(const b of r.stops)g[b[0]]=b[1];x=typeof r.stops[0][0]}else{if(u!=="identity")throw new Error(`Unknown function type "${u}"`);h=An}if(a){const b={},T=[];for(let O=0;O<r.stops.length;O++){const B=r.stops[O],V=B[0].zoom;b[V]===void 0&&(b[V]={zoom:V,type:r.type,property:r.property,default:r.default,stops:[]},T.push(V)),b[V].stops.push([B[0].value,B[1]])}const M=[];for(const O of T)M.push([b[O].zoom,Xr(b[O],e)]);const A={name:"linear"};return{kind:"composite",interpolationType:A,interpolationFactor:el.interpolationFactor.bind(void 0,A),zoomStops:M.map(O=>O[0]),evaluate:({zoom:O},B)=>Hn({stops:M,base:r.base},e,O).evaluate(O,B)}}if(l){const b=u==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:el.interpolationFactor.bind(void 0,b),zoomStops:r.stops.map(T=>T[0]),evaluate:({zoom:T})=>h(r,e,T,g,x)}}return{kind:"source",evaluate(b,T){const M=T&&T.properties?T.properties[r.property]:void 0;return M===void 0?wn(r.default,e.default):h(r,e,M,g,x)}}}function wn(r,e,i){return r!==void 0?r:e!==void 0?e:i!==void 0?i:void 0}function Bi(r,e,i,a,l){return wn(typeof i===l?a[i]:void 0,r.default,e.default)}function pn(r,e,i){if(Ln(i)!=="number")return wn(r.default,e.default);const a=r.stops.length;if(a===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[a-1][0])return r.stops[a-1][1];const l=ef(r.stops.map(u=>u[0]),i);return r.stops[l][1]}function Hn(r,e,i){const a=r.base!==void 0?r.base:1;if(Ln(i)!=="number")return wn(r.default,e.default);const l=r.stops.length;if(l===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[l-1][0])return r.stops[l-1][1];const u=ef(r.stops.map(T=>T[0]),i),h=function(T,M,A,O){const B=O-A,V=T-A;return B===0?0:M===1?V/B:(Math.pow(M,V)-1)/(Math.pow(M,B)-1)}(i,a,r.stops[u][0],r.stops[u+1][0]),g=r.stops[u][1],x=r.stops[u+1][1];let b=nd[e.type]||Ar;if(r.colorSpace&&r.colorSpace!=="rgb"){const T=of[r.colorSpace];b=(M,A)=>T.reverse(T.interpolate(T.forward(M),T.forward(A),h))}return typeof g.evaluate=="function"?{evaluate(...T){const M=g.evaluate.apply(void 0,T),A=x.evaluate.apply(void 0,T);if(M!==void 0&&A!==void 0)return b(M,A,h)}}:b(g,x,h)}function An(r,e,i){return e.type==="color"?i=Qn.parse(i):e.type==="formatted"?i=ps.fromString(i.toString()):e.type==="resolvedImage"?i=Qs.fromString(i.toString()):Ln(i)===e.type||e.type==="enum"&&e.values[i]||(i=void 0),wn(i,r.default,e.default)}class lo{constructor(e,i,a){this.expression=e,this._warningHistory={},this._evaluator=new Wo(a),this._defaultValue=i?function(l){return l.type==="color"&&(zr(l.default)||Array.isArray(l.default))?new Qn(0,0,0,0):l.type==="color"?Qn.parse(l.default)||null:l.default===void 0?null:l.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(e,i,a,l,u,h,g,x){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=a,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=h,this._evaluator.featureTileCoord=g||null,this._evaluator.featureDistanceData=x||null,this.expression.evaluate(this._evaluator)}evaluate(e,i,a,l,u,h,g,x){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=a||null,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=h||null,this._evaluator.featureTileCoord=g||null,this._evaluator.featureDistanceData=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new wa(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function Ii(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in it}function li(r,e,i){const a=new dp(it,[],e?function(u){const h={color:Ds,string:si,number:Vr,enum:si,boolean:vn,formatted:Tu,resolvedImage:Iu};return u.type==="array"?Ss(h[u.value]||Kn,u.length):h[u.type]}(e):void 0,void 0,void 0,i),l=a.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Vt(new lo(l,e,i)):ar(a.errors)}class Ri{constructor(e,i,a){this.kind=e,this._styleExpression=i,this.isLightConstant=a,this.isStateDependent=e!=="constant"&&!qc(i.expression),this.isConfigDependent=!up(i.expression)}evaluateWithoutErrorHandling(e,i,a,l,u,h){return this._styleExpression.evaluateWithoutErrorHandling(e,i,a,l,u,h)}evaluate(e,i,a,l,u,h){return this._styleExpression.evaluate(e,i,a,l,u,h)}}class bo{constructor(e,i,a,l,u){this.kind=e,this.zoomStops=a,this._styleExpression=i,this.isStateDependent=e!=="camera"&&!qc(i.expression),this.isLightConstant=u,this.isConfigDependent=!up(i.expression),this.interpolationType=l}evaluateWithoutErrorHandling(e,i,a,l,u,h){return this._styleExpression.evaluateWithoutErrorHandling(e,i,a,l,u,h)}evaluate(e,i,a,l,u,h){return this._styleExpression.evaluate(e,i,a,l,u,h)}interpolationFactor(e,i,a){return this.interpolationType?el.interpolationFactor(this.interpolationType,e,i,a):0}}function wo(r,e,i){if((r=li(r,e,i)).result==="error")return r;const a=r.value.expression,l=Rl(a);if(!l&&!Ht(e))return ar([new as("","data expressions not supported")]);const u=fn(a,["zoom","pitch","distance-from-center"]);if(!u&&!hr(e))return ar([new as("","zoom expressions not supported")]);const h=fn(a,["measure-light"]);if(!h&&!ur(e))return ar([new as("","measure-light expression not supported")]);const g=e.expression&&e.expression.relaxZoomRestriction,x=pa(a);return x||u||g?x instanceof as?ar([x]):x instanceof el&&!_r(e)?ar([new as("",'"interpolate" expressions cannot be used with this property')]):Vt(x?new bo(l?"camera":"composite",r.value,x.labels,x instanceof el?x.interpolation:void 0,h):new Ri(l?"constant":"source",r.value,h)):ar([new as("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class La{constructor(e,i){this._parameters=e,this._specification=i,Wn(this,Xr(this._parameters,this._specification))}static deserialize(e){return new La(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function pa(r){let e=null;if(r instanceof _p)e=pa(r.result);else if(r instanceof vp){for(const i of r.args)if(e=pa(i),e)break}else(r instanceof og||r instanceof el)&&r.input instanceof Zl&&r.input.name==="zoom"&&(e=r);return e instanceof as||r.eachChild(i=>{const a=pa(i);a instanceof as?e=a:e&&a&&e!==a&&(e=new as("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function co(r){const e=r.key,i=r.value,a=r.valueSpec||{},l=r.objectElementValidators||{},u=r.style,h=r.styleSpec;let g=[];const x=Ln(i);if(x!=="object")return[new Zr(e,i,`object expected, ${x} found`)];for(const b in i){const T=b.split(".")[0];let M;l[T]?M=l[T]:a[T]?M=$a:l["*"]?M=l["*"]:a["*"]&&(M=$a),M?g=g.concat(M({key:(e&&`${e}.`)+b,value:i[b],valueSpec:a[T]||a["*"],style:u,styleSpec:h,object:i,objectKey:b},i)):g.push(new Cn(e,i[b],`unknown property "${b}"`))}for(const b in a)l[b]||a[b].required&&a[b].default===void 0&&i[b]===void 0&&g.push(new Zr(e,i,`missing required property "${b}"`));return g}function rl(r){const e=r.value,i=r.valueSpec,a=r.style,l=r.styleSpec,u=r.key,h=r.arrayElementValidator||$a;if(Ln(e)!=="array")return[new Zr(u,e,`array expected, ${Ln(e)} found`)];if(i.length&&e.length!==i.length)return[new Zr(u,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new Zr(u,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let g={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum,function:void 0};l.$version<7&&(g.function=i.function),Ln(i.value)==="object"&&(g=i.value);let x=[];for(let b=0;b<e.length;b++)x=x.concat(h({array:e,arrayIndex:b,value:e[b],valueSpec:g,style:a,styleSpec:l,key:`${u}[${b}]`},!0));return x}function Fo(r){const e=r.key,i=r.value,a=r.valueSpec;let l=Ln(i);if(l==="number"&&i!=i&&(l="NaN"),l!=="number")return[new Zr(e,i,`number expected, ${l} found`)];if("minimum"in a){let u=a.minimum;if(Ln(a.minimum)==="array"&&(u=a.minimum[r.arrayIndex]),i<u)return[new Zr(e,i,`${i} is less than the minimum value ${u}`)]}if("maximum"in a){let u=a.maximum;if(Ln(a.maximum)==="array"&&(u=a.maximum[r.arrayIndex]),i>u)return[new Zr(e,i,`${i} is greater than the maximum value ${u}`)]}return[]}function Jl(r){const e=r.valueSpec,i=ai(r.value.type);let a,l,u,h={};const g=i!=="categorical"&&r.value.property===void 0,x=!g,b=Ln(r.value.stops)==="array"&&Ln(r.value.stops[0])==="array"&&Ln(r.value.stops[0][0])==="object",T=co({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(O){if(i==="identity")return[new Zr(O.key,O.value,'identity function may not have a "stops" property')];let B=[];const V=O.value;return B=B.concat(rl({key:O.key,value:V,valueSpec:O.valueSpec,style:O.style,styleSpec:O.styleSpec,arrayElementValidator:M})),Ln(V)==="array"&&V.length===0&&B.push(new Zr(O.key,V,"array must have at least one stop")),B},default:function(O){return $a({key:O.key,value:O.value,valueSpec:e,style:O.style,styleSpec:O.styleSpec})}}});return i==="identity"&&g&&T.push(new Zr(r.key,r.value,'missing required property "property"')),i==="identity"||r.value.stops||T.push(new Zr(r.key,r.value,'missing required property "stops"')),i==="exponential"&&r.valueSpec.expression&&!_r(r.valueSpec)&&T.push(new Zr(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(x&&!Ht(r.valueSpec)?T.push(new Zr(r.key,r.value,"property functions not supported")):g&&!hr(r.valueSpec)&&T.push(new Zr(r.key,r.value,"zoom functions not supported"))),i!=="categorical"&&!b||r.value.property!==void 0||T.push(new Zr(r.key,r.value,'"property" property is required')),T;function M(O){let B=[];const V=O.value,W=O.key;if(Ln(V)!=="array")return[new Zr(W,V,`array expected, ${Ln(V)} found`)];if(V.length!==2)return[new Zr(W,V,`array length 2 expected, length ${V.length} found`)];if(b){if(Ln(V[0])!=="object")return[new Zr(W,V,`object expected, ${Ln(V[0])} found`)];if(V[0].zoom===void 0)return[new Zr(W,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new Zr(W,V,"object stop key must have value")];const q=ai(V[0].zoom);if(typeof q!="number")return[new Zr(W,V[0].zoom,"stop zoom values must be numbers")];if(u&&u>q)return[new Zr(W,V[0].zoom,"stop zoom values must appear in ascending order")];q!==u&&(u=q,l=void 0,h={}),B=B.concat(co({key:`${W}[0]`,value:V[0],valueSpec:{zoom:{}},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{zoom:Fo,value:A}}))}else B=B.concat(A({key:`${W}[0]`,value:V[0],valueSpec:{},style:O.style,styleSpec:O.styleSpec},V));return Ii(so(V[1]))?B.concat([new Zr(`${W}[1]`,V[1],"expressions are not allowed in function stops.")]):B.concat($a({key:`${W}[1]`,value:V[1],valueSpec:e,style:O.style,styleSpec:O.styleSpec}))}function A(O,B){const V=Ln(O.value),W=ai(O.value),q=O.value!==null?O.value:B;if(a){if(V!==a)return[new Zr(O.key,q,`${V} stop domain type must match previous stop domain type ${a}`)]}else a=V;if(V!=="number"&&V!=="string"&&V!=="boolean"&&typeof W!="number"&&typeof W!="string"&&typeof W!="boolean")return[new Zr(O.key,q,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&i!=="categorical"){let ne=`number expected, ${V} found`;return Ht(e)&&i===void 0&&(ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Zr(O.key,q,ne)]}return i!=="categorical"||V!=="number"||typeof W=="number"&&isFinite(W)&&Math.floor(W)===W?i!=="categorical"&&V==="number"&&typeof W=="number"&&typeof l=="number"&&l!==void 0&&W<l?[new Zr(O.key,q,"stop domain values must appear in ascending order")]:(l=W,i==="categorical"&&W in h?[new Zr(O.key,q,"stop domain values must be unique")]:(h[W]=!0,[])):[new Zr(O.key,q,`integer expected, found ${String(W)}`)]}}function Es(r){const e=(r.expressionContext==="property"?wo:li)(so(r.value),r.valueSpec);if(e.result==="error")return e.value.map(a=>new Zr(`${r.key}${a.key}`,r.value,a.message));const i=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!i.outputDefined())return[new Zr(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!qc(i))return[new Zr(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter")return Xc(i,r);if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!fn(i,["zoom","feature-state"]))return[new Zr(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Rl(i))return[new Zr(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xc(r,e){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const l of e.valueSpec.expression.parameters)i.delete(l);if(i.size===0)return[];const a=[];return r instanceof Zl&&i.has(r.name)?[new Zr(e.key,e.value,`["${r.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(r.eachChild(l=>{a.push(...Xc(l,e))}),a)}function Sc(r){const e=r.key,i=r.value,a=r.valueSpec,l=[];return Array.isArray(a.values)?a.values.indexOf(ai(i))===-1&&l.push(new Zr(e,i,`expected one of [${a.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(a.values).indexOf(ai(i))===-1&&l.push(new Zr(e,i,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(i)} found`)),l}function zu(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!zu(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Ka(r,e="fill"){if(r==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};zu(r)||(r=Xo(r));const i=r;let a=!0;try{a=function(b){if(!kl(b))return b;let T=so(b);return Ts(T),T=cs(T),T}(i)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(i,null,2)}
        `)}const l=Lt[`filter_${e}`],u=li(a,l);let h=null;if(u.result==="error")throw new Error(u.value.map(b=>`${b.key}: ${b.message}`).join(", "));h=(b,T,M)=>u.value.evaluate(b,T,{},M);let g=null,x=null;if(a!==i){const b=li(i,l);if(b.result==="error")throw new Error(b.value.map(T=>`${T.key}: ${T.message}`).join(", "));g=(T,M,A,O,B)=>b.value.evaluate(T,M,{},A,void 0,void 0,O,B),x=!Rl(b.value.expression)}return{filter:h,dynamicFilter:g||void 0,needGeometry:Fs(a),needFeature:!!x}}function cs(r){if(!Array.isArray(r))return r;const e=function(i){if(ma.has(i[0])){for(let a=1;a<i.length;a++)if(kl(i[a]))return!0}return i}(r);return e===!0?e:e.map(i=>cs(i))}function Ts(r){let e=!1;const i=[];if(r[0]==="case"){for(let a=1;a<r.length-1;a+=2)e=e||kl(r[a]),i.push(r[a+1]);i.push(r[r.length-1])}else if(r[0]==="match"){e=e||kl(r[1]);for(let a=2;a<r.length-1;a+=2)i.push(r[a+1]);i.push(r[r.length-1])}else if(r[0]==="step"){e=e||kl(r[1]);for(let a=1;a<r.length-1;a+=2)i.push(r[a+1])}e&&(r.length=0,r.push("any",...i));for(let a=1;a<r.length;a++)Ts(r[a])}function kl(r){if(!Array.isArray(r))return!1;if((e=r[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let i=1;i<r.length;i++)if(kl(r[i]))return!0;return!1}const ma=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Za(r,e){return r<e?-1:r>e?1:0}function Fs(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let e=1;e<r.length;e++)if(Fs(r[e]))return!0;return!1}function Xo(r){if(!r)return!0;const e=r[0];return r.length<=1?e!=="any":e==="=="?Yc(r[1],r[2],"=="):e==="!="?cf(Yc(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Yc(r[1],r[2],e):e==="any"?(i=r.slice(1),["any"].concat(i.map(Xo))):e==="all"?["all"].concat(r.slice(1).map(Xo)):e==="none"?["all"].concat(r.slice(1).map(Xo).map(cf)):e==="in"?lf(r[1],r.slice(2)):e==="!in"?cf(lf(r[1],r.slice(2))):e==="has"?ug(r[1]):e!=="!has"||cf(ug(r[1]));var i}function Yc(r,e,i){switch(r){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,r,e]}}function lf(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(i=>typeof i!=typeof e[0])?["filter-in-large",r,["literal",e.sort(Za)]]:["filter-in-small",r,["literal",e]]}}function ug(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function cf(r){return["!",r]}function hg(r){return zu(so(r.value))?Es(Wn({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):wp(r)}function wp(r){const e=r.value,i=r.key;if(Ln(e)!=="array")return[new Zr(i,e,`array expected, ${Ln(e)} found`)];const a=r.styleSpec;let l,u=[];if(e.length<1)return[new Zr(i,e,"filter array must have at least 1 element")];switch(u=u.concat(Sc({key:`${i}[0]`,value:e[0],valueSpec:a.filter_operator,style:r.style,styleSpec:r.styleSpec})),ai(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ai(e[1])==="$type"&&u.push(new Zr(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&u.push(new Zr(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(l=Ln(e[1]),l!=="string"&&u.push(new Zr(`${i}[1]`,e[1],`string expected, ${l} found`)));for(let h=2;h<e.length;h++)l=Ln(e[h]),ai(e[1])==="$type"?u=u.concat(Sc({key:`${i}[${h}]`,value:e[h],valueSpec:a.geometry_type,style:r.style,styleSpec:r.styleSpec})):l!=="string"&&l!=="number"&&l!=="boolean"&&u.push(new Zr(`${i}[${h}]`,e[h],`string, number, or boolean expected, ${l} found`));break;case"any":case"all":case"none":for(let h=1;h<e.length;h++)u=u.concat(wp({key:`${i}[${h}]`,value:e[h],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":l=Ln(e[1]),e.length!==2?u.push(new Zr(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):l!=="string"&&u.push(new Zr(`${i}[1]`,e[1],`string expected, ${l} found`))}return u}function Ql(r,e){const i=r.key,a=r.style,l=r.layer,u=r.styleSpec,h=r.value,g=r.objectKey,x=u[`${e}_${r.layerType}`];if(!x)return[];const b=g.match(/^(.*)-transition$/);if(e==="paint"&&b&&x[b[1]]&&x[b[1]].transition)return $a({key:i,value:h,valueSpec:u.transition,style:a,styleSpec:u});const T=r.valueSpec||x[g];if(!T)return[new Cn(i,h,`unknown property "${g}"`)];let M;if(Ln(h)==="string"&&Ht(T)&&!T.tokens&&(M=/^{([^}]+)}$/.exec(h))){const O=`\`{ "type": "identity", "property": ${M?JSON.stringify(M[1]):'"_"'} }\``;return[new Zr(i,h,`"${g}" does not support interpolation syntax
Use an identity property function instead: ${O}.`)]}const A=[];if(r.layerType==="symbol")g!=="text-field"||!a||a.glyphs||a.imports||A.push(new Zr(i,h,'use of "text-field" requires a style "glyphs" property')),g==="text-font"&&zr(so(h))&&ai(h.type)==="identity"&&A.push(new Zr(i,h,'"text-font" does not support identity functions'));else if(r.layerType==="model"&&e==="paint"&&l&&l.layout&&l.layout.hasOwnProperty("model-id")&&Ht(T)&&(ur(T)||hr(T))){const O=wo(so(h),T),B=O.value.expression||O.value._styleExpression.expression;B&&!fn(B,["measure-light"])&&A.push(new Zr(i,h,`${g} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`))}return A.concat($a({key:r.key,value:h,valueSpec:T,style:a,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:g}))}function Du(r){return Ql(r,"paint")}function ec(r){return Ql(r,"layout")}function pl(r){let e=[];const i=r.value,a=r.key,l=r.style,u=r.styleSpec;i.type||i.ref||e.push(new Zr(a,i,'either "type" or "ref" is required'));let h=ai(i.type);const g=ai(i.ref);if(i.id){const x=ai(i.id);for(let b=0;b<r.arrayIndex;b++){const T=l.layers[b];ai(T.id)===x&&e.push(new Zr(a,i.id,`duplicate layer id "${i.id}", previously used at line ${T.id.__line__}`))}}if("ref"in i){let x;["type","source","source-layer","filter","layout"].forEach(b=>{b in i&&e.push(new Zr(a,i[b],`"${b}" is prohibited for ref layers`))}),l.layers.forEach(b=>{ai(b.id)===g&&(x=b)}),x?x.ref?e.push(new Zr(a,i.ref,"ref cannot reference another ref layer")):h=ai(x.type):typeof g=="string"&&e.push(new Zr(a,i.ref,`ref layer "${g}" not found`))}else if(h!=="background"&&h!=="sky"&&h!=="slot")if(i.source){const x=l.sources&&l.sources[i.source],b=x&&ai(x.type);x?b==="vector"&&h==="raster"?e.push(new Zr(a,i.source,`layer "${i.id}" requires a raster source`)):b==="raster"&&h!=="raster"?e.push(new Zr(a,i.source,`layer "${i.id}" requires a vector source`)):b!=="vector"||i["source-layer"]?b==="raster-dem"&&h!=="hillshade"?e.push(new Zr(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):h!=="line"||!i.paint||!i.paint["line-gradient"]&&!i.paint["line-trim-offset"]||b==="geojson"&&x.lineMetrics||e.push(new Zr(a,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Zr(a,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new Zr(a,i.source,`source "${i.source}" not found`))}else e.push(new Zr(a,i,'missing required property "source"'));return e=e.concat(co({key:a,value:i,valueSpec:u.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>$a({key:`${a}.type`,value:i.type,valueSpec:u.layer.type,style:r.style,styleSpec:r.styleSpec,object:i,objectKey:"type"}),filter:x=>hg(Wn({layerType:h},x)),layout:x=>co({layer:i,key:x.key,value:x.value,valueSpec:{},style:x.style,styleSpec:x.styleSpec,objectElementValidators:{"*":b=>ec(Wn({layerType:h},b))}}),paint:x=>co({layer:i,key:x.key,value:x.value,valueSpec:{},style:x.style,styleSpec:x.styleSpec,objectElementValidators:{"*":b=>Du(Wn({layerType:h,layer:i},b))}})}})),e}function Ns(r){const e=r.value,i=r.key,a=Ln(e);return a!=="string"?[new Zr(i,e,`string expected, ${a} found`)]:[]}const Sp={promoteId:function({key:r,value:e}){if(Ln(e)==="string")return Ns({key:r,value:e});{const i=[];for(const a in e)i.push(...Ns({key:`${r}.${a}`,value:e[a]}));return i}}};function Cc(r){const e=r.value,i=r.key,a=r.styleSpec,l=r.style;if(!e.type)return[new Zr(i,e,'"type" is required')];const u=ai(e.type);let h;switch(u){case"vector":case"raster":case"raster-dem":return h=co({key:i,value:e,valueSpec:a[`source_${u.replace("-","_")}`],style:r.style,styleSpec:a,objectElementValidators:Sp}),h;case"geojson":if(h=co({key:i,value:e,valueSpec:a.source_geojson,style:l,styleSpec:a,objectElementValidators:Sp}),e.cluster)for(const g in e.clusterProperties){const[x,b]=e.clusterProperties[g],T=typeof x=="string"?[x,["accumulated"],["get",g]]:x;h.push(...Es({key:`${i}.${g}.map`,value:b,expressionContext:"cluster-map"})),h.push(...Es({key:`${i}.${g}.reduce`,value:T,expressionContext:"cluster-reduce"}))}return h;case"video":return co({key:i,value:e,valueSpec:a.source_video,style:l,styleSpec:a});case"image":return co({key:i,value:e,valueSpec:a.source_image,style:l,styleSpec:a});case"canvas":return[new Zr(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Sc({key:`${i}.type`,value:e.type,valueSpec:{values:MM(a)},style:l,styleSpec:a})}}function MM(r){return r.source.reduce((e,i)=>{const a=r[i];return a.type.type==="enum"&&(e=e.concat(Object.keys(a.type.values))),e},[])}function k0(r){const e=r.value;let i=[];if(!e)return i;const a=Ln(e);return a!=="string"?(i=i.concat([new Zr(r.key,e,`string expected, "${a}" found`)]),i):(function(l){const u=l.indexOf("://")===-1;try{return new URL(l,u?"http://example.com":void 0),!0}catch{return!1}}(e)||(i=i.concat([new Zr(r.key,e,`invalid url "${e}"`)])),i)}function Sa(r){const e=r.value,i=r.styleSpec,a=i.light,l=r.style;let u=[];const h=Ln(e);if(e===void 0)return u;if(h!=="object")return u=u.concat([new Zr("light",e,`object expected, ${h} found`)]),u;for(const g in e){const x=g.match(/^(.*)-transition$/);u=u.concat(x&&a[x[1]]&&a[x[1]].transition?$a({key:g,value:e[g],valueSpec:i.transition,style:l,styleSpec:i}):a[g]?$a({key:g,value:e[g],valueSpec:a[g],style:l,styleSpec:i}):[new Zr(g,e[g],`unknown property "${g}"`)])}return u}function Fy(r){const e=r.value;let i=[];if(!e)return i;const a=Ln(e);if(a!=="object")return i=i.concat([new Zr("light-3d",e,`object expected, ${a} found`)]),i;const l=r.styleSpec,u=l["light-3d"],h=r.key,g=r.style,x=r.style.lights;for(const M of["type","id"])if(!(M in e))return i=i.concat([new Zr("light-3d",e,`missing property ${M} on light`)]),i;if(e.type&&x)for(let M=0;M<r.arrayIndex;M++){const A=ai(e.type),O=x[M];ai(O.type)===A&&i.push(new Zr(h,e.id,`duplicate light type "${e.type}", previously defined at line ${O.id.__line__}`))}const b=`properties_light_${e.type}`;if(!(b in l))return i=i.concat([new Zr("light-3d",e,`Invalid light type ${e.type}`)]),i;const T=l[b];for(const M in e)if(M==="properties"){const A=e[M],O=Ln(A);if(O!=="object")return i=i.concat([new Zr("properties",A,`object expected, ${O} found`)]),i;for(const B in A)i=i.concat(T[B]?$a({key:B,value:A[B],valueSpec:T[B],style:g,styleSpec:l}):[new Cn(r.key,A[B],`unknown property "${B}"`)])}else{const A=M.match(/^(.*)-transition$/);i=i.concat(A&&u[A[1]]&&u[A[1]].transition?$a({key:M,value:e[M],valueSpec:l.transition,style:g,styleSpec:l}):u[M]?$a({key:M,value:e[M],valueSpec:u[M],style:g,styleSpec:l}):[new Cn(M,e[M],`unknown property "${M}"`)])}return i}function O0(r){const e=r.value,i=r.key,a=r.style,l=r.styleSpec,u=l.terrain;let h=[];const g=Ln(e);if(e===void 0)return h;if(g!=="object")return h=h.concat([new Zr("terrain",e,`object expected, ${g} found`)]),h;for(const x in e){const b=x.match(/^(.*)-transition$/);h=h.concat(b&&u[b[1]]&&u[b[1]].transition?$a({key:x,value:e[x],valueSpec:l.transition,style:a,styleSpec:l}):u[x]?$a({key:x,value:e[x],valueSpec:u[x],style:a,styleSpec:l}):[new Cn(x,e[x],`unknown property "${x}"`)])}if(e.source){const x=a.sources&&a.sources[e.source],b=x&&ai(x.type);x?b!=="raster-dem"&&h.push(new Zr(i,e.source,`terrain cannot be used with a source of type ${String(b)}, it only be used with a "raster-dem" source type`)):h.push(new Zr(i,e.source,`source "${e.source}" not found`))}else h.push(new Zr(i,e,'terrain is missing required property "source"'));return h}function ld(r){const e=r.value,i=r.style,a=r.styleSpec,l=a.fog;let u=[];const h=Ln(e);if(e===void 0)return u;if(h!=="object")return u=u.concat([new Zr("fog",e,`object expected, ${h} found`)]),u;for(const g in e){const x=g.match(/^(.*)-transition$/);u=u.concat(x&&l[x[1]]&&l[x[1]].transition?$a({key:g,value:e[g],valueSpec:a.transition,style:i,styleSpec:a}):l[g]?$a({key:g,value:e[g],valueSpec:l[g],style:i,styleSpec:a}):[new Cn(g,e[g],`unknown property "${g}"`)])}return u}const cd={"*":()=>[],array:rl,boolean:function(r){const e=r.value,i=r.key,a=Ln(e);return a!=="boolean"?[new Zr(i,e,`boolean expected, ${a} found`)]:[]},number:Fo,color:function(r){const e=r.key,i=r.value,a=Ln(i);return a!=="string"?[new Zr(e,i,`color expected, ${a} found`)]:Jf(i)===null?[new Zr(e,i,`color expected, "${i}" found`)]:[]},enum:Sc,filter:hg,function:Jl,layer:pl,object:co,source:Cc,model:k0,light:Sa,"light-3d":Fy,terrain:O0,fog:ld,string:Ns,formatted:function(r){return Ns(r).length===0?[]:Es(r)},resolvedImage:function(r){return Ns(r).length===0?[]:Es(r)},projection:function(r){const e=r.value,i=r.styleSpec,a=i.projection,l=r.style;let u=[];const h=Ln(e);if(h==="object")for(const g in e)u=u.concat($a({key:g,value:e[g],valueSpec:a[g],style:l,styleSpec:i}));else h!=="string"&&(u=u.concat([new Zr("projection",e,`object or string expected, ${h} found`)]));return u},import:function(r){const{value:e,styleSpec:i}=r,{data:a,...l}=e;Object.defineProperty(l,"__line__",{value:e.__line__,enumerable:!1});let u=co(Wn({},r,{value:l,valueSpec:i.import}));return ai(l.id)===""&&u.push(new Zr(`${r.key}.id`,l,"import id can't be an empty string")),a&&(u=u.concat(D0(a,i,{key:`${r.key}.data`}))),u}};function $a(r,e=!1){const i=r.value,a=r.valueSpec,l=r.styleSpec;if(a.expression&&zr(ai(i)))return Jl(r);if(a.expression&&Ii(so(i)))return Es(r);if(a.type&&cd[a.type]){const u=cd[a.type](r);return e===!0&&u.length>0&&Ln(r.value)==="array"?Es(r):u}return co(Wn({},r,{valueSpec:a.type?l[a.type]:a}))}function z0(r){const e=r.value,i=r.key,a=Ns(r);return a.length||(e.indexOf("{fontstack}")===-1&&a.push(new Zr(i,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&a.push(new Zr(i,e,'"glyphs" url must include a "{range}" token'))),a}function D0(r,e=Lt,i={}){return $a({key:i.key||"",value:r,valueSpec:e.$root,styleSpec:e,style:r,objectElementValidators:{glyphs:z0,"*":()=>[]}})}function Cp(r,e=Lt){return Ol(D0(r,e))}const Aw=r=>Ol(Cc(r)),PM=r=>Ol(Sa(r)),L0=r=>Ol(Fy(r)),AM=r=>Ol(O0(r)),$0=r=>Ol(ld(r)),Rw=r=>Ol(pl(r)),Ny=r=>Ol(hg(r)),Ep=r=>Ol(Du(r)),RM=r=>Ol(ec(r)),dg=r=>Ol(k0(r));function Ol(r){return r.slice().sort((e,i)=>e.line&&i.line?e.line-i.line:0)}function uf(r,e){let i=!1;if(e&&e.length)for(const a of e)a instanceof Cn?ve(a.message):(r.fire(new kn(new Error(a.message))),i=!0);return i}var kw=Lu,ch=3;function Lu(r,e,i){var a=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var l=new Int32Array(this.arrayBuffer);r=l[0],this.d=(e=l[1])+2*(i=l[2]);for(var u=0;u<this.d*this.d;u++){var h=l[ch+u],g=l[ch+u+1];a.push(h===g?null:l.subarray(h,g))}var x=l[ch+a.length+1];this.keys=l.subarray(l[ch+a.length],x),this.bboxes=l.subarray(x),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var b=0;b<this.d*this.d;b++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=r,this.padding=i,this.scale=e/r,this.uid=0;var T=i/e*r;this.min=-T,this.max=r+T}Lu.prototype.insert=function(r,e,i,a,l){this._forEachCell(e,i,a,l,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(l)},Lu.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Lu.prototype._insertCell=function(r,e,i,a,l,u){this.cells[l].push(u)},Lu.prototype.query=function(r,e,i,a,l){var u=this.min,h=this.max;if(r<=u&&e<=u&&h<=i&&h<=a&&!l)return Array.prototype.slice.call(this.keys);var g=[];return this._forEachCell(r,e,i,a,this._queryCell,g,{},l),g},Lu.prototype._queryCell=function(r,e,i,a,l,u,h,g){var x=this.cells[l];if(x!==null)for(var b=this.keys,T=this.bboxes,M=0;M<x.length;M++){var A=x[M];if(h[A]===void 0){var O=4*A;(g?g(T[O+0],T[O+1],T[O+2],T[O+3]):r<=T[O+2]&&e<=T[O+3]&&i>=T[O+0]&&a>=T[O+1])?(h[A]=!0,u.push(b[A])):h[A]=!1}}},Lu.prototype._forEachCell=function(r,e,i,a,l,u,h,g){for(var x=this._convertToCellCoord(r),b=this._convertToCellCoord(e),T=this._convertToCellCoord(i),M=this._convertToCellCoord(a),A=x;A<=T;A++)for(var O=b;O<=M;O++){var B=this.d*O+A;if((!g||g(this._convertFromCellCoord(A),this._convertFromCellCoord(O),this._convertFromCellCoord(A+1),this._convertFromCellCoord(O+1)))&&l.call(this,r,e,i,a,B,u,h,g))return}},Lu.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Lu.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Lu.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,e=ch+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var l=new Int32Array(e+i+this.keys.length+this.bboxes.length);l[0]=this.extent,l[1]=this.n,l[2]=this.padding;for(var u=e,h=0;h<r.length;h++){var g=r[h];l[ch+h]=u,l.set(g,u),u+=g.length}return l[ch+r.length]=u,l.set(this.keys,u),l[ch+r.length+1]=u+=this.keys.length,l.set(this.bboxes,u),u+=this.bboxes.length,l.buffer};var Xa=re(kw);const uh={};function rn(r,e,i={}){Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),uh[e]={klass:r,omit:i.omit||[]}}rn(Object,"Object"),Xa.serialize=function(r,e){const i=r.toArrayBuffer();return e&&e.add(i),{buffer:i}},Xa.deserialize=function(r){return new Xa(r.buffer)},Object.defineProperty(Xa,"name",{value:"Grid"}),rn(Xa,"Grid"),rn(Qn,"Color"),rn(Error,"Error"),rn(he,"AJAXError"),rn(Qs,"ResolvedImage"),rn(La,"StylePropertyFunction"),rn(lo,"StyleExpression",{omit:["_evaluator"]}),rn(bo,"ZoomDependentExpression"),rn(Ri,"ZoomConstantExpression"),rn(Zl,"CompoundExpression",{omit:["_evaluate"]});for(const r in it)uh[it[r]._classRegistryKey]||rn(it[r],`Expression${r}`);function B0(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Tp(r){return S.ImageBitmap&&r instanceof S.ImageBitmap}function Ip(r,e){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(B0(r)||Tp(r))return e&&e.add(r),r;if(ArrayBuffer.isView(r)){const i=r;return e&&e.add(i.buffer),i}if(r instanceof S.ImageData)return e&&e.add(r.data.buffer),r;if(Array.isArray(r)){const i=[];for(const a of r)i.push(Ip(a,e));return i}if(r instanceof Map){const i={$name:"Map"};for(const[a,l]of r.entries())i[a]=Ip(l);return i}if(typeof r=="object"){const i=r.constructor,a=i._classRegistryKey;if(!a)throw new Error(`can't serialize object of unregistered class ${a}`);const l=i.serialize?i.serialize(r,e):{};if(!i.serialize){for(const u in r)r.hasOwnProperty(u)&&(uh[a].omit.indexOf(u)>=0||(l[u]=Ip(r[u],e)));r instanceof Error&&(l.message=r.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(l.$name=a),l}throw new Error("can't serialize object of type "+typeof r)}function hh(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||B0(r)||Tp(r)||ArrayBuffer.isView(r)||r instanceof S.ImageData)return r;if(Array.isArray(r))return r.map(hh);if(typeof r=="object"){const e=r.$name||"Object";if(e==="Map"){const l=new Map;for(const u of Object.keys(r))u!=="$name"&&l.set(u,hh(r[u]));return l}const{klass:i}=uh[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(r);const a=Object.create(i.prototype);for(const l of Object.keys(r))l!=="$name"&&(a[l]=hh(r[l]));return a}throw new Error("can't deserialize object of type "+typeof r)}const mn={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519,"CJK Unified Ideographs Extension B":r=>r>=131072&&r<=173791};function jy(r){for(const e of r)if(F0(e.charCodeAt(0)))return!0;return!1}function Ow(r){for(const e of r)if(!zw(e.charCodeAt(0)))return!1;return!0}function zw(r){return!(mn.Arabic(r)||mn["Arabic Supplement"](r)||mn["Arabic Extended-A"](r)||mn["Arabic Presentation Forms-A"](r)||mn["Arabic Presentation Forms-B"](r))}function F0(r){return!(r!==746&&r!==747&&(r<4352||!(mn["Bopomofo Extended"](r)||mn.Bopomofo(r)||mn["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||mn["CJK Compatibility Ideographs"](r)||mn["CJK Compatibility"](r)||mn["CJK Radicals Supplement"](r)||mn["CJK Strokes"](r)||!(!mn["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||mn["CJK Unified Ideographs Extension A"](r)||mn["CJK Unified Ideographs"](r)||mn["Enclosed CJK Letters and Months"](r)||mn["Hangul Compatibility Jamo"](r)||mn["Hangul Jamo Extended-A"](r)||mn["Hangul Jamo Extended-B"](r)||mn["Hangul Jamo"](r)||mn["Hangul Syllables"](r)||mn.Hiragana(r)||mn["Ideographic Description Characters"](r)||mn.Kanbun(r)||mn["Kangxi Radicals"](r)||mn["Katakana Phonetic Extensions"](r)||mn.Katakana(r)&&r!==12540||!(!mn["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!mn["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||mn["Unified Canadian Aboriginal Syllabics"](r)||mn["Unified Canadian Aboriginal Syllabics Extended"](r)||mn["Vertical Forms"](r)||mn["Yijing Hexagram Symbols"](r)||mn["Yi Syllables"](r)||mn["Yi Radicals"](r))))}function Vy(r){return!(F0(r)||function(e){return!!(mn["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||mn["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||mn["Letterlike Symbols"](e)||mn["Number Forms"](e)||mn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||mn["Control Pictures"](e)&&e!==9251||mn["Optical Character Recognition"](e)||mn["Enclosed Alphanumerics"](e)||mn["Geometric Shapes"](e)||mn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||mn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||mn["CJK Symbols and Punctuation"](e)||mn.Katakana(e)||mn["Private Use Area"](e)||mn["CJK Compatibility Forms"](e)||mn["Small Form Variants"](e)||mn["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(r))}function N0(r){return r>=1424&&r<=2303||mn["Arabic Presentation Forms-A"](r)||mn["Arabic Presentation Forms-B"](r)}function j0(r,e){return!(!e&&N0(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||mn.Khmer(r))}function fg(r){for(const e of r)if(N0(e.charCodeAt(0)))return!0;return!1}const ml="deferred",Uy="loading",V0="loaded";let Hy=null,zl="unavailable",ud=null;const Dw=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(zl="error"),Hy&&Hy(r)};function U0(){pg.fire(new vr("pluginStateChange",{pluginStatus:zl,pluginURL:ud}))}const pg=new mo,Mp=function(){return zl},H0=function(){if(zl!==ml||!ud)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zl=Uy,U0(),ud&&ke({url:ud},r=>{r?Dw(r):(zl=V0,U0())})},Is={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zl===V0||Is.applyArabicShaping!=null,isLoading:()=>zl===Uy,setState(r){zl=r.pluginStatus,ud=r.pluginURL},isParsed:()=>Is.applyArabicShaping!=null&&Is.processBidirectionalText!=null&&Is.processStyledBidirectionalText!=null,getPluginURL:()=>ud};class uo{constructor(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.transition=i.transition,this.pitch=i.pitch,this.brightness=i.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(i,a){for(const l of i)if(!j0(l.charCodeAt(0),a))return!1;return!0}(e,Is.isLoaded())}}class Gy{constructor(e,i,a){this.property=e,this.value=i,this.expression=function(l,u,h){if(zr(l))return new La(l,u);if(Ii(l)||Array.isArray(l)&&l.length>0){const g=wo(l,u,h);if(g.result==="error")throw new Error(g.value.map(x=>`${x.key}: ${x.message}`).join(", "));return g.value}{let g=l;return typeof l=="string"&&u.type==="color"&&(g=Qn.parse(l)),{kind:"constant",isConfigDependent:!1,evaluate:()=>g}}}(i===void 0?e.specification.default:i,e.specification,a)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,i,a){return this.property.possiblyEvaluate(this,e,i,a)}}class G0{constructor(e,i){this.property=e,this.value=new Gy(e,void 0,i)}transitioned(e,i){return new Lw(this.property,this.value,i,ct({},e.transition,this.transition),e.now)}untransitioned(){return new Lw(this.property,this.value,null,{},0)}}class mg{constructor(e,i){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._options=i,this.isConfigDependent=!1}getValue(e){return De(this._values[e].value.value)}setValue(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new G0(this._values[e].property,this._options)),this._values[e].value=new Gy(this._values[e].property,i===null?void 0:De(i),this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].value.expression.isConfigDependent}setTransitionOrValue(e,i){i&&(this._options=i);const a=this._properties.properties;if(e)for(const l in e){const u=e[l];if(Ut(l,"-transition")){const h=l.slice(0,-11);a[h]&&this.setTransition(h,u)}else a[l]&&this.setValue(l,u)}}getTransition(e){return De(this._values[e].transition)}setTransition(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new G0(this._values[e].property)),this._values[e].transition=De(i)||void 0}serialize(){const e={};for(const i of Object.keys(this._values)){const a=this.getValue(i);a!==void 0&&(e[i]=a);const l=this.getTransition(i);l!==void 0&&(e[`${i}-transition`]=l)}return e}transitioned(e,i){const a=new $w(this._properties);for(const l of Object.keys(this._values))a._values[l]=this._values[l].transitioned(e,i._values[l]);return a}untransitioned(){const e=new $w(this._properties);for(const i of Object.keys(this._values))e._values[i]=this._values[i].untransitioned();return e}}class Lw{constructor(e,i,a,l,u){const h=l.delay||0,g=l.duration||0;u=u||0,this.property=e,this.value=i,this.begin=u+h,this.end=this.begin+g,e.specification.transition&&(l.delay||l.duration)&&(this.prior=a)}possiblyEvaluate(e,i,a){const l=e.now||0,u=this.value.possiblyEvaluate(e,i,a),h=this.prior;if(h){if(l>this.end)return this.prior=null,u;if(this.value.isDataDriven())return this.prior=null,u;if(l<this.begin)return h.possiblyEvaluate(e,i,a);{const g=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(h.possiblyEvaluate(e,i,a),u,Me(g))}}return u}}class $w{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,i,a){const l=new hf(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].possiblyEvaluate(e,i,a);return l}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class kM{constructor(e,i){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._options=i,this.isConfigDependent=!1}getValue(e){return De(this._values[e].value)}setValue(e,i){this._values[e]=new Gy(this._values[e].property,i===null?void 0:De(i),this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].expression.isConfigDependent}serialize(){const e={};for(const i of Object.keys(this._values)){const a=this.getValue(i);a!==void 0&&(e[i]=a)}return e}possiblyEvaluate(e,i,a){const l=new hf(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].possiblyEvaluate(e,i,a);return l}}class Pp{constructor(e,i,a){this.property=e,this.value=i,this.parameters=a}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,i,a,l){return this.property.evaluate(this.value,this.parameters,e,i,a,l)}}class hf{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ir{constructor(e){this.specification=e}possiblyEvaluate(e,i){return e.expression.evaluate(i)}interpolate(e,i,a){const l=nd[this.specification.type];return l?l(e,i,a):e}}class gn{constructor(e,i){this.specification=e,this.overrides=i}possiblyEvaluate(e,i,a,l){return new Pp(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(i,null,{},a,l)}:e.expression,i)}interpolate(e,i,a){if(e.value.kind!=="constant"||i.value.kind!=="constant")return e;if(e.value.value===void 0||i.value.value===void 0)return new Pp(this,{kind:"constant",value:void 0},e.parameters);const l=nd[this.specification.type];return l?new Pp(this,{kind:"constant",value:l(e.value.value,i.value.value,a)},e.parameters):e}evaluate(e,i,a,l,u,h){return e.kind==="constant"?e.value:e.evaluate(i,a,l,u,h)}}class gg{constructor(e){this.specification=e}possiblyEvaluate(e,i,a,l){return!!e.expression.evaluate(i,null,{},a,l)}interpolate(){return!1}}class vi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const i=new uo(0,{});for(const a in e){const l=e[a];l.specification.overridable&&this.overridableProperties.push(a);const u=this.defaultPropertyValues[a]=new Gy(l,void 0),h=this.defaultTransitionablePropertyValues[a]=new G0(l);this.defaultTransitioningPropertyValues[a]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=u.possiblyEvaluate(i)}}}function us(r,e){return e?`${r}${e}`:r}function qy(r){const e=r.indexOf("");return e>=0?r.slice(0,e):r}rn(gn,"DataDrivenProperty"),rn(Ir,"DataConstantProperty"),rn(gg,"ColorRampProperty");const yg="-transition";class nl extends mo{constructor(e,i,a){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&e.type!=="slot"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this.options=a,e.slot&&(this.slot=e.slot),i.layout&&(this._unevaluatedLayout=new kM(i.layout,a),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),i.paint)){this._transitionablePaint=new mg(i.paint,a);for(const l in e.paint)this.setPaintProperty(l,e.paint[l],{validate:!1});for(const l in e.layout)this.setLayoutProperty(l,e.layout[l],{validate:!1});this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hf(i.paint)}}setScope(e){this.scope=e,this.fqid=us(this.id,e)}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,i,a={}){if(i!=null&&this._validate(RM,`layers.${this.id}.layout.${e}`,e,i,a))return;if(this.type==="custom"&&e==="visibility")return void(this.visibility=i);const l=this._unevaluatedLayout;l._properties.properties[e]&&(l.setValue(e,i),this.isConfigDependent=this.isConfigDependent||l.isConfigDependent,e==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(e){return Ut(e,yg)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,i,a={}){if(i!=null&&this._validate(Ep,`layers.${this.id}.paint.${e}`,e,i,a))return!1;const l=this._transitionablePaint,u=l._properties.properties;if(Ut(e,yg)){const A=e.slice(0,-11);return u[A]&&l.setTransition(A,i||void 0),!1}if(!u[e])return!1;const h=l._values[e],g=h.value.isDataDriven(),x=h.value;l.setValue(e,i),this.isConfigDependent=this.isConfigDependent||l.isConfigDependent,this._handleSpecialPaintPropertyUpdate(e);const b=l._values[e].value,T=b.isDataDriven(),M=Ut(e,"pattern")||e==="line-dasharray";return T||g||M||this._handleOverridablePaintPropertyUpdate(e,x,b)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,i){return null}_handleOverridablePaintPropertyUpdate(e,i,a){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,i){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,i)}serialize(){return vt({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,i)=>!(e===void 0||i==="layout"&&!Object.keys(e).length||i==="paint"&&!Object.keys(e).length))}_validate(e,i,a,l,u={}){return(!u||u.validate!==!1)&&uf(this,e.call(Cp,{key:i,layerType:this.type,objectKey:a,value:l,styleSpec:Lt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}resize(){}isStateDependent(){for(const e in this.paint._values){const i=this.paint.get(e);if(i instanceof Pp&&Ht(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ka(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}class vg{constructor(){this.changed=!1,this._updatedLayers={},this._removedLayers={},this.updatedSourceCaches={},this.updatedPaintProps=new Set,this.changedImages=new Set}updateLayer(e){const i=e.scope;this._updatedLayers[i]=this._updatedLayers[i]||new Set,this._updatedLayers[i].add(e.id)}removeLayer(e){const i=e.scope;this._removedLayers[i]=this._removedLayers[i]||{},this._updatedLayers[i]=this._updatedLayers[i]||new Set,this._removedLayers[i][e.id]=e,this._updatedLayers[i].delete(e.id),this.updatedPaintProps.delete(e.fqid)}getRemovedLayer(e){return this._removedLayers[e.scope]?this._removedLayers[e.scope][e.id]:null}discardLayerRemoval(e){this._removedLayers[e.scope]&&delete this._removedLayers[e.scope][e.id]}getLayerUpdatesByScope(){const e={};for(const i in this._updatedLayers)e[i]=e[i]||{},e[i].updatedIds=Array.from(this._updatedLayers[i].values());for(const i in this._removedLayers)e[i]=e[i]||{},e[i].removedIds=Object.keys(this._removedLayers[i]);return e}reset(){this.changed=!1,this._updatedLayers={},this._removedLayers={},this.updatedSourceCaches={},this.updatedPaintProps.clear(),this.changedImages.clear()}}const Bw={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _g{constructor(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ho{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,i){return e._trim(),i&&(e.isTransferred=!0,i.add(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ki(r,e=1){let i=0,a=0;return{members:r.map(l=>{const u=Bw[l.type].BYTES_PER_ELEMENT,h=i=Wy(i,Math.max(e,u)),g=l.components||1;return a=Math.max(a,u),i+=u*g,{name:l.name,type:l.type,components:g,offset:h}}),size:Wy(i,Math.max(a,e)),alignment:e}}function Wy(r,e){return Math.ceil(r/e)*e}class gl extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,i)}emplace(e,i,a){const l=2*e;return this.int16[l+0]=i,this.int16[l+1]=a,e}}gl.prototype.bytesPerElement=4,rn(gl,"StructArrayLayout2i4");class Ky extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a){const l=this.length;return this.resize(l+1),this.emplace(l,e,i,a)}emplace(e,i,a,l){const u=3*e;return this.int16[u+0]=i,this.int16[u+1]=a,this.int16[u+2]=l,e}}Ky.prototype.bytesPerElement=6,rn(Ky,"StructArrayLayout3i6");class hd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,i,a,l)}emplace(e,i,a,l,u){const h=4*e;return this.int16[h+0]=i,this.int16[h+1]=a,this.int16[h+2]=l,this.int16[h+3]=u,e}}hd.prototype.bytesPerElement=8,rn(hd,"StructArrayLayout4i8");class df extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u){const h=this.length;return this.resize(h+1),this.emplace(h,e,i,a,l,u)}emplace(e,i,a,l,u,h){const g=5*e;return this.int16[g+0]=i,this.int16[g+1]=a,this.int16[g+2]=l,this.int16[g+3]=u,this.int16[g+4]=h,e}}df.prototype.bytesPerElement=10,rn(df,"StructArrayLayout5i10");class q0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,e,i,a,l,u,h,g)}emplace(e,i,a,l,u,h,g,x){const b=6*e,T=12*e,M=3*e;return this.int16[b+0]=i,this.int16[b+1]=a,this.uint8[T+4]=l,this.uint8[T+5]=u,this.uint8[T+6]=h,this.uint8[T+7]=g,this.float32[M+2]=x,e}}q0.prototype.bytesPerElement=12,rn(q0,"StructArrayLayout2i4ub1f12");class $u extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,i,a,l)}emplace(e,i,a,l,u){const h=4*e;return this.float32[h+0]=i,this.float32[h+1]=a,this.float32[h+2]=l,this.float32[h+3]=u,e}}$u.prototype.bytesPerElement=16,rn($u,"StructArrayLayout4f16");class dd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u){const h=this.length;return this.resize(h+1),this.emplace(h,e,i,a,l,u)}emplace(e,i,a,l,u,h){const g=6*e,x=3*e;return this.uint16[g+0]=i,this.uint16[g+1]=a,this.uint16[g+2]=l,this.uint16[g+3]=u,this.float32[x+2]=h,e}}dd.prototype.bytesPerElement=12,rn(dd,"StructArrayLayout4ui1f12");class Ap extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,i,a,l)}emplace(e,i,a,l,u){const h=4*e;return this.uint16[h+0]=i,this.uint16[h+1]=a,this.uint16[h+2]=l,this.uint16[h+3]=u,e}}Ap.prototype.bytesPerElement=8,rn(Ap,"StructArrayLayout4ui8");class Rp extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,i,a,l,u,h)}emplace(e,i,a,l,u,h,g){const x=6*e;return this.int16[x+0]=i,this.int16[x+1]=a,this.int16[x+2]=l,this.int16[x+3]=u,this.int16[x+4]=h,this.int16[x+5]=g,e}}Rp.prototype.bytesPerElement=12,rn(Rp,"StructArrayLayout6i12");class xg extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g,x,b,T,M,A){const O=this.length;return this.resize(O+1),this.emplace(O,e,i,a,l,u,h,g,x,b,T,M,A)}emplace(e,i,a,l,u,h,g,x,b,T,M,A,O){const B=12*e;return this.int16[B+0]=i,this.int16[B+1]=a,this.int16[B+2]=l,this.int16[B+3]=u,this.uint16[B+4]=h,this.uint16[B+5]=g,this.uint16[B+6]=x,this.uint16[B+7]=b,this.int16[B+8]=T,this.int16[B+9]=M,this.int16[B+10]=A,this.int16[B+11]=O,e}}xg.prototype.bytesPerElement=24,rn(xg,"StructArrayLayout4i4ui4i24");class Zy extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,i,a,l,u,h)}emplace(e,i,a,l,u,h,g){const x=10*e,b=5*e;return this.int16[x+0]=i,this.int16[x+1]=a,this.int16[x+2]=l,this.float32[b+2]=u,this.float32[b+3]=h,this.float32[b+4]=g,e}}Zy.prototype.bytesPerElement=20,rn(Zy,"StructArrayLayout3i3f20");class Xy extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint32[1*e+0]=i,e}}Xy.prototype.bytesPerElement=4,rn(Xy,"StructArrayLayout1ul4");class fd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,i)}emplace(e,i,a){const l=2*e;return this.uint16[l+0]=i,this.uint16[l+1]=a,e}}fd.prototype.bytesPerElement=4,rn(fd,"StructArrayLayout2ui4");class W0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g,x,b,T,M,A,O){const B=this.length;return this.resize(B+1),this.emplace(B,e,i,a,l,u,h,g,x,b,T,M,A,O)}emplace(e,i,a,l,u,h,g,x,b,T,M,A,O,B){const V=20*e,W=10*e;return this.int16[V+0]=i,this.int16[V+1]=a,this.int16[V+2]=l,this.int16[V+3]=u,this.int16[V+4]=h,this.float32[W+3]=g,this.float32[W+4]=x,this.float32[W+5]=b,this.float32[W+6]=T,this.int16[V+14]=M,this.uint32[W+8]=A,this.uint16[V+18]=O,this.uint16[V+19]=B,e}}W0.prototype.bytesPerElement=40,rn(W0,"StructArrayLayout5i4f1i1ul2ui40");class Yy extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,e,i,a,l,u,h,g)}emplace(e,i,a,l,u,h,g,x){const b=8*e;return this.int16[b+0]=i,this.int16[b+1]=a,this.int16[b+2]=l,this.int16[b+4]=u,this.int16[b+5]=h,this.int16[b+6]=g,this.int16[b+7]=x,e}}Yy.prototype.bytesPerElement=16,rn(Yy,"StructArrayLayout3i2i2i16");class K0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u){const h=this.length;return this.resize(h+1),this.emplace(h,e,i,a,l,u)}emplace(e,i,a,l,u,h){const g=4*e,x=8*e;return this.float32[g+0]=i,this.float32[g+1]=a,this.float32[g+2]=l,this.int16[x+6]=u,this.int16[x+7]=h,e}}K0.prototype.bytesPerElement=16,rn(K0,"StructArrayLayout2f1f2i16");class Z0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,i,a,l)}emplace(e,i,a,l,u){const h=12*e,g=3*e;return this.uint8[h+0]=i,this.uint8[h+1]=a,this.float32[g+1]=l,this.float32[g+2]=u,e}}Z0.prototype.bytesPerElement=12,rn(Z0,"StructArrayLayout2ub2f12");class yl extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a){const l=this.length;return this.resize(l+1),this.emplace(l,e,i,a)}emplace(e,i,a,l){const u=3*e;return this.float32[u+0]=i,this.float32[u+1]=a,this.float32[u+2]=l,e}}yl.prototype.bytesPerElement=12,rn(yl,"StructArrayLayout3f12");class Ca extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a){const l=this.length;return this.resize(l+1),this.emplace(l,e,i,a)}emplace(e,i,a,l){const u=3*e;return this.uint16[u+0]=i,this.uint16[u+1]=a,this.uint16[u+2]=l,e}}Ca.prototype.bytesPerElement=6,rn(Ca,"StructArrayLayout3ui6");class Jy extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne,ae,le,ie){const ue=this.length;return this.resize(ue+1),this.emplace(ue,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne,ae,le,ie)}emplace(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne,ae,le,ie,ue){const Ee=30*e,Be=15*e,je=60*e;return this.int16[Ee+0]=i,this.int16[Ee+1]=a,this.int16[Ee+2]=l,this.float32[Be+2]=u,this.float32[Be+3]=h,this.uint16[Ee+8]=g,this.uint16[Ee+9]=x,this.uint32[Be+5]=b,this.uint32[Be+6]=T,this.uint32[Be+7]=M,this.uint16[Ee+16]=A,this.uint16[Ee+17]=O,this.uint16[Ee+18]=B,this.float32[Be+10]=V,this.float32[Be+11]=W,this.uint8[je+48]=q,this.uint8[je+49]=ne,this.uint8[je+50]=ae,this.uint32[Be+13]=le,this.int16[Ee+28]=ie,this.uint8[je+58]=ue,e}}Jy.prototype.bytesPerElement=60,rn(Jy,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class pd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne,ae,le,ie,ue,Ee,Be,je,Ge,tt,Ze,nt,Xe,ut,bt){const At=this.length;return this.resize(At+1),this.emplace(At,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne,ae,le,ie,ue,Ee,Be,je,Ge,tt,Ze,nt,Xe,ut,bt)}emplace(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne,ae,le,ie,ue,Ee,Be,je,Ge,tt,Ze,nt,Xe,ut,bt,At){const lt=20*e,ft=40*e,Ft=80*e;return this.float32[lt+0]=i,this.float32[lt+1]=a,this.int16[ft+4]=l,this.int16[ft+5]=u,this.int16[ft+6]=h,this.int16[ft+7]=g,this.int16[ft+8]=x,this.int16[ft+9]=b,this.int16[ft+10]=T,this.int16[ft+11]=M,this.int16[ft+12]=A,this.uint16[ft+13]=O,this.uint16[ft+14]=B,this.uint16[ft+15]=V,this.uint16[ft+16]=W,this.uint16[ft+17]=q,this.uint16[ft+18]=ne,this.uint16[ft+19]=ae,this.uint16[ft+20]=le,this.uint16[ft+21]=ie,this.uint16[ft+22]=ue,this.uint16[ft+23]=Ee,this.uint16[ft+24]=Be,this.uint16[ft+25]=je,this.uint16[ft+26]=Ge,this.uint16[ft+27]=tt,this.uint32[lt+14]=Ze,this.float32[lt+15]=nt,this.float32[lt+16]=Xe,this.float32[lt+17]=ut,this.float32[lt+18]=bt,this.uint8[Ft+76]=At,e}}pd.prototype.bytesPerElement=80,rn(pd,"StructArrayLayout2f9i15ui1ul4f1ub80");class bg extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.float32[1*e+0]=i,e}}bg.prototype.bytesPerElement=4,rn(bg,"StructArrayLayout1f4");class ff extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u){const h=this.length;return this.resize(h+1),this.emplace(h,e,i,a,l,u)}emplace(e,i,a,l,u,h){const g=5*e;return this.float32[g+0]=i,this.float32[g+1]=a,this.float32[g+2]=l,this.float32[g+3]=u,this.float32[g+4]=h,e}}ff.prototype.bytesPerElement=20,rn(ff,"StructArrayLayout5f20");class X0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,e,i,a,l,u,h,g)}emplace(e,i,a,l,u,h,g,x){const b=7*e;return this.float32[b+0]=i,this.float32[b+1]=a,this.float32[b+2]=l,this.float32[b+3]=u,this.float32[b+4]=h,this.float32[b+5]=g,this.float32[b+6]=x,e}}X0.prototype.bytesPerElement=28,rn(X0,"StructArrayLayout7f28");class Qy extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,a,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,i,a,l)}emplace(e,i,a,l,u){const h=6*e;return this.uint32[3*e+0]=i,this.uint16[h+2]=a,this.uint16[h+3]=l,this.uint16[h+4]=u,e}}Qy.prototype.bytesPerElement=12,rn(Qy,"StructArrayLayout1ul3ui12");class kp extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint16[1*e+0]=i,e}}kp.prototype.bytesPerElement=2,rn(kp,"StructArrayLayout1ui2");class wg extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,i)}emplace(e,i,a){const l=2*e;return this.float32[l+0]=i,this.float32[l+1]=a,e}}wg.prototype.bytesPerElement=8,rn(wg,"StructArrayLayout2f8");class Y0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W){const q=this.length;return this.resize(q+1),this.emplace(q,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W)}emplace(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q){const ne=16*e;return this.float32[ne+0]=i,this.float32[ne+1]=a,this.float32[ne+2]=l,this.float32[ne+3]=u,this.float32[ne+4]=h,this.float32[ne+5]=g,this.float32[ne+6]=x,this.float32[ne+7]=b,this.float32[ne+8]=T,this.float32[ne+9]=M,this.float32[ne+10]=A,this.float32[ne+11]=O,this.float32[ne+12]=B,this.float32[ne+13]=V,this.float32[ne+14]=W,this.float32[ne+15]=q,e}}Y0.prototype.bytesPerElement=64,rn(Y0,"StructArrayLayout16f64");class ev extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,a,l,u,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,e,i,a,l,u,h,g)}emplace(e,i,a,l,u,h,g,x){const b=10*e,T=5*e;return this.uint16[b+0]=i,this.uint16[b+1]=a,this.uint16[b+2]=l,this.uint16[b+3]=u,this.float32[T+2]=h,this.float32[T+3]=g,this.float32[T+4]=x,e}}ev.prototype.bytesPerElement=20,rn(ev,"StructArrayLayout4ui3f20");class J0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){const i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint8[1*e+0]=i,e}}J0.prototype.bytesPerElement=1,rn(J0,"StructArrayLayout1ub1");class tv extends _g{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}tv.prototype.size=40;class pf extends W0{get(e){return new tv(this,e)}}rn(pf,"CollisionBoxArray");class rv extends _g{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}rv.prototype.size=60;class Fw extends Jy{get(e){return new rv(this,e)}}rn(Fw,"PlacedSymbolArray");class Nw extends _g{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}Nw.prototype.size=80;class Q0 extends pd{get(e){return new Nw(this,e)}}rn(Q0,"SymbolInstanceArray");class jw extends bg{getoffsetX(e){return this.float32[1*e+0]}}rn(jw,"GlyphOffsetArray");class Vw extends gl{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}rn(Vw,"SymbolLineVertexArray");class Op extends _g{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Op.prototype.size=12;class e1 extends Qy{get(e){return new Op(this,e)}}rn(e1,"FeatureIndexArray");class Uw extends fd{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}rn(Uw,"FillExtrusionCentroidArray");const OM=ki([{name:"a_pos",components:2,type:"Int16"}],4),zM=ki([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class qi{constructor(e=[]){this.segments=e}_prepareSegment(e,i,a,l){let u=this.segments[this.segments.length-1];return e>qi.MAX_VERTEX_ARRAY_LENGTH&&ve(`Max vertices per segment is ${qi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!u||u.vertexLength+e>qi.MAX_VERTEX_ARRAY_LENGTH||u.sortKey!==l)&&(u={vertexOffset:i,primitiveOffset:a,vertexLength:0,primitiveLength:0},l!==void 0&&(u.sortKey=l),this.segments.push(u)),u}prepareSegment(e,i,a,l){return this._prepareSegment(e,i.length,a.length,l)}get(){return this.segments}destroy(){for(const e of this.segments)for(const i in e.vaos)e.vaos[i].destroy()}static simpleSegment(e,i,a,l){return new qi([{vertexOffset:e,primitiveOffset:i,vertexLength:a,primitiveLength:l,vaos:{},sortKey:0}])}}function Hw(r,e){return 256*(r=Qe(Math.floor(r),0,255))+Qe(Math.floor(e),0,255)}qi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rn(qi,"SegmentVector");const DM=ki([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Gw=ki([{name:"a_dash",components:4,type:"Uint16"}]);var zp={exports:{}},t1={exports:{}};(function(r){r.exports=function(e,i){var a,l,u,h,g,x,b,T;for(l=e.length-(a=3&e.length),u=i,g=3432918353,x=461845907,T=0;T<l;)b=255&e.charCodeAt(T)|(255&e.charCodeAt(++T))<<8|(255&e.charCodeAt(++T))<<16|(255&e.charCodeAt(++T))<<24,++T,u=27492+(65535&(h=5*(65535&(u=(u^=b=(65535&(b=(b=(65535&b)*g+(((b>>>16)*g&65535)<<16)&4294967295)<<15|b>>>17))*x+(((b>>>16)*x&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(h>>>16)&65535)<<16);switch(b=0,a){case 3:b^=(255&e.charCodeAt(T+2))<<16;case 2:b^=(255&e.charCodeAt(T+1))<<8;case 1:u^=b=(65535&(b=(b=(65535&(b^=255&e.charCodeAt(T)))*g+(((b>>>16)*g&65535)<<16)&4294967295)<<15|b>>>17))*x+(((b>>>16)*x&65535)<<16)&4294967295}return u^=e.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0}})(t1);var qw=t1.exports,r1={exports:{}};(function(r){r.exports=function(e,i){for(var a,l=e.length,u=i^l,h=0;l>=4;)a=1540483477*(65535&(a=255&e.charCodeAt(h)|(255&e.charCodeAt(++h))<<8|(255&e.charCodeAt(++h))<<16|(255&e.charCodeAt(++h))<<24))+((1540483477*(a>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),l-=4,++h;switch(l){case 3:u^=(255&e.charCodeAt(h+2))<<16;case 2:u^=(255&e.charCodeAt(h+1))<<8;case 1:u=1540483477*(65535&(u^=255&e.charCodeAt(h)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0}})(r1);var Ww=qw,nv=r1.exports;zp.exports=Ww,zp.exports.murmur3=Ww,zp.exports.murmur2=nv;var n1=re(zp.exports);class Dp{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,i,a,l){this.ids.push(Kw(e)),this.positions.push(i,a,l)}eachPosition(e,i){const a=Kw(e);let l=0,u=this.ids.length-1;for(;l<u;){const h=l+u>>1;this.ids[h]>=a?u=h:l=h+1}for(;this.ids[l]===a;)i(this.positions[3*l],this.positions[3*l+1],this.positions[3*l+2]),l++}static serialize(e,i){const a=new Float64Array(e.ids),l=new Uint32Array(e.positions);return i1(a,l,0,a.length-1),i&&(i.add(a.buffer),i.add(l.buffer)),{ids:a,positions:l}}static deserialize(e){const i=new Dp;let a;i.ids=e.ids,i.positions=e.positions;for(const l of i.ids)l!==a&&i.uniqueIds.push(l),a=l;return i.indexed=!0,i}}function Kw(r){const e=+r;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:n1(String(r))}function i1(r,e,i,a){for(;i<a;){const l=r[i+a>>1];let u=i-1,h=a+1;for(;;){do u++;while(r[u]<l);do h--;while(r[h]>l);if(u>=h)break;iv(r,u,h),iv(e,3*u,3*h),iv(e,3*u+1,3*h+1),iv(e,3*u+2,3*h+2)}h-i<a-h?(i1(r,e,i,h),i=h+1):(i1(r,e,h+1,a),a=h)}}function iv(r,e,i){const a=r[e];r[e]=r[i],r[i]=a}rn(Dp,"FeaturePositionMap");class Bu{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,i){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,i),this.initialized=!0),!!this.location}}class ci extends Bu{constructor(e){super(e),this.current=0}set(e,i,a){this.fetchUniformLocation(e,i)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}}class Er extends Bu{constructor(e){super(e),this.current=0}set(e,i,a){this.fetchUniformLocation(e,i)&&this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class ei extends Bu{constructor(e){super(e),this.current=[0,0]}set(e,i,a){this.fetchUniformLocation(e,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}}class xn extends Bu{constructor(e){super(e),this.current=[0,0,0]}set(e,i,a){this.fetchUniformLocation(e,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}}class vl extends Bu{constructor(e){super(e),this.current=[0,0,0,0]}set(e,i,a){this.fetchUniformLocation(e,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3])))}}class mf extends Bu{constructor(e){super(e),this.current=Qn.transparent}set(e,i,a){this.fetchUniformLocation(e,i)&&(a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a)))}}const Zw=new Float32Array(16);class dn extends Bu{constructor(e){super(e),this.current=Zw}set(e,i,a){if(this.fetchUniformLocation(e,i)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let l=1;l<16;l++)if(a[l]!==this.current[l]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}}const o1=new Float32Array(9);class a1 extends Bu{constructor(e){super(e),this.current=o1}set(e,i,a){if(this.fetchUniformLocation(e,i)){for(let l=0;l<9;l++)if(a[l]!==this.current[l]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}}const Xw=new Float32Array(4);class Jc extends Bu{constructor(e){super(e),this.current=Xw}set(e,i,a){if(this.fetchUniformLocation(e,i)){for(let l=0;l<4;l++)if(a[l]!==this.current[l]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}}function md(r){return[Hw(255*r.r,255*r.g),Hw(255*r.b,255*r.a)]}class Lp{constructor(e,i,a){this.value=e,this.uniformNames=i.map(l=>`u_${l}`),this.type=a}setUniform(e,i,a,l,u){i.set(e,u,l.constantOr(this.value))}getBinding(e,i){return this.type==="color"?new mf(e):new Er(e)}}class $p{constructor(e,i){this.uniformNames=i.map(a=>`u_${a}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,i,a,l,u){const h=u==="u_pattern"||u==="u_dash"?this.pattern:u==="u_pixel_ratio"?this.pixelRatio:null;h&&i.set(e,u,h)}getBinding(e,i){return i==="u_pattern"||i==="u_dash"?new vl(e):new Er(e)}}class dh{constructor(e,i,a,l){this.expression=e,this.type=a,this.maxValue=0,this.paintVertexAttributes=i.map(u=>({name:`a_${u}`,type:"Float32",components:a==="color"?2:1,offset:0})),this.paintVertexArray=new l}populatePaintArray(e,i,a,l,u,h,g){const x=this.paintVertexArray.length,b=this.expression.evaluate(new uo(0,{brightness:h}),i,{},u,l,g);this.paintVertexArray.resize(e),this._setPaintValue(x,e,b)}updatePaintArray(e,i,a,l,u,h,g){const x=this.expression.evaluate({zoom:0,brightness:g},a,l,void 0,u);this._setPaintValue(e,i,x)}_setPaintValue(e,i,a){if(this.type==="color"){const l=md(a);for(let u=e;u<i;u++)this.paintVertexArray.emplace(u,l[0],l[1])}else{for(let l=e;l<i;l++)this.paintVertexArray.emplace(l,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qc{constructor(e,i,a,l,u,h){this.expression=e,this.uniformNames=i.map(g=>`u_${g}_t`),this.type=a,this.useIntegerZoom=l,this.zoom=u,this.maxValue=0,this.paintVertexAttributes=i.map(g=>({name:`a_${g}`,type:"Float32",components:a==="color"?4:2,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,i,a,l,u,h,g){const x=this.expression.evaluate(new uo(this.zoom,{brightness:h}),i,{},u,l,g),b=this.expression.evaluate(new uo(this.zoom+1,{brightness:h}),i,{},u,l,g),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,x,b)}updatePaintArray(e,i,a,l,u,h,g){const x=this.expression.evaluate({zoom:this.zoom,brightness:g},a,l,void 0,u),b=this.expression.evaluate({zoom:this.zoom+1,brightness:g},a,l,void 0,u);this._setPaintValue(e,i,x,b)}_setPaintValue(e,i,a,l){if(this.type==="color"){const u=md(a),h=md(l);for(let g=e;g<i;g++)this.paintVertexArray.emplace(g,u[0],u[1],h[0],h[1])}else{for(let u=e;u<i;u++)this.paintVertexArray.emplace(u,a,l);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,i,a,l,u){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,g=Qe(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(e,u,g)}getBinding(e,i){return new Er(e)}}class gd{constructor(e,i,a,l,u){this.expression=e,this.layerId=u,this.paintVertexAttributes=(a==="array"?Gw:DM).members;for(let h=0;h<i.length;++h);this.paintVertexArray=new l}populatePaintArray(e,i,a){const l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(l,e,i.patterns&&i.patterns[this.layerId],a)}updatePaintArray(e,i,a,l,u,h,g){this._setPaintValues(e,i,a.patterns&&a.patterns[this.layerId],h)}_setPaintValues(e,i,a,l){if(!l||!a)return;const u=l[a];if(!u)return;const{tl:h,br:g,pixelRatio:x}=u;for(let b=e;b<i;b++)this.paintVertexArray.emplace(b,h[0],h[1],g[0],g[1],x)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gf{constructor(e,i,a=()=>!0){this.binders={},this._buffers=[];const l=[];for(const u in e.paint._values){const h=e.paint.get(u);if(!a(u)||!(h instanceof Pp&&Ht(h.property.specification)))continue;const g=$M(u,e.type),x=h.value,b=h.property.specification.type,T=!!h.property.useIntegerZoom,M=u==="line-dasharray"||u.endsWith("pattern"),A=u==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(x.kind!=="constant"||A)if(x.kind==="source"||A||M){const O=yf(u,b,"source");this.binders[u]=M?new gd(x,g,b,O,e.id):new dh(x,g,b,O),l.push(`/a_${u}`)}else{const O=yf(u,b,"composite");this.binders[u]=new Qc(x,g,b,T,i,O),l.push(`/z_${u}`)}else this.binders[u]=M?new $p(x.value,g):new Lp(x.value,g,b),l.push(`/u_${u}`)}this.cacheKey=l.sort().join("")}getMaxValue(e){const i=this.binders[e];return i instanceof dh||i instanceof Qc?i.maxValue:0}populatePaintArrays(e,i,a,l,u,h,g){for(const x in this.binders){const b=this.binders[x];(b instanceof dh||b instanceof Qc||b instanceof gd)&&b.populatePaintArray(e,i,a,l,u,h,g)}}setConstantPatternPositions(e){for(const i in this.binders){const a=this.binders[i];a instanceof $p&&a.setConstantPatternPositions(e)}}updatePaintArrays(e,i,a,l,u,h,g,x){let b=!1;const T=Object.keys(e),M=T.length!==0,A=M?T:i.uniqueIds;for(const O in this.binders){const B=this.binders[O];if((B instanceof dh||B instanceof Qc||B instanceof gd)&&(B.expression.isStateDependent===!0||B.expression.isLightConstant===!1)){const V=u.paint.get(O);B.expression=V.value;for(const W of A){const q=e[W.toString()];i.eachPosition(W,(ne,ae,le)=>{const ie=l.feature(ne);B.updatePaintArray(ae,le,ie,q,h,g,x)})}if(!M)for(const W of a.uniqueIds){const q=e[W.toString()];a.eachPosition(W,(ne,ae,le)=>{const ie=l.feature(ne);B.updatePaintArray(ae,le,ie,q,h,g,x)})}b=!0}}return b}defines(){const e=[];for(const i in this.binders){const a=this.binders[i];(a instanceof Lp||a instanceof $p)&&e.push(...a.uniformNames.map(l=>`#define HAS_UNIFORM_${l}`))}return e}getBinderAttributes(){const e=[];for(const i in this.binders){const a=this.binders[i];if(a instanceof dh||a instanceof Qc||a instanceof gd)for(let l=0;l<a.paintVertexAttributes.length;l++)e.push(a.paintVertexAttributes[l].name)}return e}getBinderUniforms(){const e=[];for(const i in this.binders){const a=this.binders[i];if(a instanceof Lp||a instanceof $p||a instanceof Qc)for(const l of a.uniformNames)e.push(l)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const i=[];for(const a in this.binders){const l=this.binders[a];if(l instanceof Lp||l instanceof $p||l instanceof Qc)for(const u of l.uniformNames)i.push({name:u,property:a,binding:l.getBinding(e,u)})}return i}setUniforms(e,i,a,l,u){for(const{name:h,property:g,binding:x}of a)this.binders[g].setUniform(e,x,u,l.get(g),h)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const i=this.binders[e];(i instanceof dh||i instanceof Qc||i instanceof gd)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(e){for(const i in this.binders){const a=this.binders[i];(a instanceof dh||a instanceof Qc||a instanceof gd)&&a.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const i=this.binders[e];(i instanceof dh||i instanceof Qc||i instanceof gd)&&i.destroy()}}}class yd{constructor(e,i,a=()=>!0){this.programConfigurations={};for(const l of e)this.programConfigurations[l.id]=new gf(l,i,a);this.needsUpload=!1,this._featureMap=new Dp,this._featureMapWithoutIds=new Dp,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,i,a,l,u,h,g,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(e,i,l,u,h,g,x);i.id!==void 0?this._featureMap.add(i.id,a,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,a,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,i,a,l,u,h){for(const g of a)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,i,g,l,u,h||0)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const LM={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function $M(r,e){return LM[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}const BM={"line-pattern":{source:dd,composite:dd},"fill-pattern":{source:dd,composite:dd},"fill-extrusion-pattern":{source:dd,composite:dd},"line-dasharray":{source:Ap,composite:Ap}},ov={color:{source:wg,composite:$u},number:{source:bg,composite:wg}};function yf(r,e,i){const a=BM[r];return a&&a[i]||ov[e][i]}rn(Lp,"ConstantBinder"),rn($p,"PatternConstantBinder"),rn(dh,"SourceExpressionBinder"),rn(gd,"PatternCompositeBinder"),rn(Qc,"CompositeExpressionBinder"),rn(gf,"ProgramConfiguration",{omit:["_buffers"]}),rn(yd,"ProgramConfigurationSet");class Dl{constructor(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof zn?new zn(e.lng,e.lat):zn.convert(e),this}setSouthWest(e){return this._sw=e instanceof zn?new zn(e.lng,e.lat):zn.convert(e),this}extend(e){const i=this._sw,a=this._ne;let l,u;if(e instanceof zn)l=e,u=e;else{if(!(e instanceof Dl))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Dl.convert(e)):this.extend(zn.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(zn.convert(e)):this;if(l=e._sw,u=e._ne,!l||!u)return this}return i||a?(i.lng=Math.min(l.lng,i.lng),i.lat=Math.min(l.lat,i.lat),a.lng=Math.max(u.lng,a.lng),a.lat=Math.max(u.lat,a.lat)):(this._sw=new zn(l.lng,l.lat),this._ne=new zn(u.lng,u.lat)),this}getCenter(){return new zn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new zn(this.getWest(),this.getNorth())}getSouthEast(){return new zn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:i,lat:a}=zn.convert(e);let l=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(l=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&l}static convert(e){return!e||e instanceof Dl?e:new Dl(e)}}var Ea={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.setMatrixArrayType=function(r){Ta.ARRAY_TYPE=Jw=r},Ta.toRadian=function(r){return r*Qw},Ta.equals=function(r,e){return Math.abs(r-e)<=Yw*Math.max(1,Math.abs(r),Math.abs(e))},Ta.RANDOM=Ta.ARRAY_TYPE=Ta.EPSILON=void 0;var Yw=1e-6;Ta.EPSILON=Yw;var Jw=typeof Float32Array<"u"?Float32Array:Array;Ta.ARRAY_TYPE=Jw;var FM=Math.random;Ta.RANDOM=FM;var Qw=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var So={};function js(r){return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},js(r)}Object.defineProperty(So,"__esModule",{value:!0}),So.create=function(){var r=new Fu.ARRAY_TYPE(4);return Fu.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},So.clone=function(r){var e=new Fu.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e},So.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r},So.identity=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r},So.fromValues=function(r,e,i,a){var l=new Fu.ARRAY_TYPE(4);return l[0]=r,l[1]=e,l[2]=i,l[3]=a,l},So.set=function(r,e,i,a,l){return r[0]=e,r[1]=i,r[2]=a,r[3]=l,r},So.transpose=function(r,e){if(r===e){var i=e[1];r[1]=e[2],r[2]=i}else r[0]=e[0],r[1]=e[2],r[2]=e[1],r[3]=e[3];return r},So.invert=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=i*u-l*a;return h?(r[0]=u*(h=1/h),r[1]=-a*h,r[2]=-l*h,r[3]=i*h,r):null},So.adjoint=function(r,e){var i=e[0];return r[0]=e[3],r[1]=-e[1],r[2]=-e[2],r[3]=i,r},So.determinant=function(r){return r[0]*r[3]-r[2]*r[1]},So.multiply=fh,So.rotate=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=Math.sin(i),x=Math.cos(i);return r[0]=a*x+u*g,r[1]=l*x+h*g,r[2]=a*-g+u*x,r[3]=l*-g+h*x,r},So.scale=function(r,e,i){var a=e[1],l=e[2],u=e[3],h=i[0],g=i[1];return r[0]=e[0]*h,r[1]=a*h,r[2]=l*g,r[3]=u*g,r},So.fromRotation=function(r,e){var i=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=i,r[2]=-i,r[3]=a,r},So.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r},So.str=function(r){return"mat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"},So.frob=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},So.LDU=function(r,e,i,a){return r[2]=a[2]/a[0],i[0]=a[0],i[1]=a[1],i[3]=a[3]-r[2]*i[1],[r,e,i]},So.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r[3]=e[3]+i[3],r},So.subtract=Bp,So.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]},So.equals=function(r,e){var i=r[0],a=r[1],l=r[2],u=r[3],h=e[0],g=e[1],x=e[2],b=e[3];return Math.abs(i-h)<=Fu.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-g)<=Fu.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-x)<=Fu.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-b)<=Fu.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))},So.multiplyScalar=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r},So.multiplyScalarAndAdd=function(r,e,i,a){return r[0]=e[0]+i[0]*a,r[1]=e[1]+i[1]*a,r[2]=e[2]+i[2]*a,r[3]=e[3]+i[3]*a,r},So.sub=So.mul=void 0;var Fu=function(r,e){if(r&&r.__esModule)return r;if(r===null||js(r)!=="object"&&typeof r!="function")return{default:r};var i=s1(void 0);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}(Ta);function s1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(s1=function(a){return a?i:e})(r)}function fh(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=i[0],x=i[1],b=i[2],T=i[3];return r[0]=a*g+u*x,r[1]=l*g+h*x,r[2]=a*b+u*T,r[3]=l*b+h*T,r}function Bp(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r[3]=e[3]-i[3],r}So.mul=fh,So.sub=Bp;var go={};function vd(r){return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(r)}Object.defineProperty(go,"__esModule",{value:!0}),go.create=function(){var r=new tc.ARRAY_TYPE(6);return tc.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r},go.clone=function(r){var e=new tc.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e},go.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r},go.identity=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r},go.fromValues=function(r,e,i,a,l,u){var h=new tc.ARRAY_TYPE(6);return h[0]=r,h[1]=e,h[2]=i,h[3]=a,h[4]=l,h[5]=u,h},go.set=function(r,e,i,a,l,u,h){return r[0]=e,r[1]=i,r[2]=a,r[3]=l,r[4]=u,r[5]=h,r},go.invert=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],g=e[5],x=i*u-a*l;return x?(r[0]=u*(x=1/x),r[1]=-a*x,r[2]=-l*x,r[3]=i*x,r[4]=(l*g-u*h)*x,r[5]=(a*h-i*g)*x,r):null},go.determinant=function(r){return r[0]*r[3]-r[1]*r[2]},go.multiply=eS,go.rotate=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=Math.sin(i),T=Math.cos(i);return r[0]=a*T+u*b,r[1]=l*T+h*b,r[2]=a*-b+u*T,r[3]=l*-b+h*T,r[4]=g,r[5]=x,r},go.scale=function(r,e,i){var a=e[1],l=e[2],u=e[3],h=e[4],g=e[5],x=i[0],b=i[1];return r[0]=e[0]*x,r[1]=a*x,r[2]=l*b,r[3]=u*b,r[4]=h,r[5]=g,r},go.translate=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=i[0],T=i[1];return r[0]=a,r[1]=l,r[2]=u,r[3]=h,r[4]=a*b+u*T+g,r[5]=l*b+h*T+x,r},go.fromRotation=function(r,e){var i=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=i,r[2]=-i,r[3]=a,r[4]=0,r[5]=0,r},go.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r[4]=0,r[5]=0,r},go.fromTranslation=function(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0],r[5]=e[1],r},go.str=function(r){return"mat2d("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")"},go.frob=function(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],1)},go.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r[3]=e[3]+i[3],r[4]=e[4]+i[4],r[5]=e[5]+i[5],r},go.subtract=l1,go.multiplyScalar=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r[4]=e[4]*i,r[5]=e[5]*i,r},go.multiplyScalarAndAdd=function(r,e,i,a){return r[0]=e[0]+i[0]*a,r[1]=e[1]+i[1]*a,r[2]=e[2]+i[2]*a,r[3]=e[3]+i[3]*a,r[4]=e[4]+i[4]*a,r[5]=e[5]+i[5]*a,r},go.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]},go.equals=function(r,e){var i=r[0],a=r[1],l=r[2],u=r[3],h=r[4],g=r[5],x=e[0],b=e[1],T=e[2],M=e[3],A=e[4],O=e[5];return Math.abs(i-x)<=tc.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-b)<=tc.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-T)<=tc.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-M)<=tc.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-A)<=tc.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(g-O)<=tc.EPSILON*Math.max(1,Math.abs(g),Math.abs(O))},go.sub=go.mul=void 0;var tc=function(r,e){if(r&&r.__esModule)return r;if(r===null||vd(r)!=="object"&&typeof r!="function")return{default:r};var i=Sg(void 0);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}(Ta);function Sg(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(Sg=function(a){return a?i:e})(r)}function eS(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=i[0],T=i[1],M=i[2],A=i[3],O=i[4],B=i[5];return r[0]=a*b+u*T,r[1]=l*b+h*T,r[2]=a*M+u*A,r[3]=l*M+h*A,r[4]=a*O+u*B+g,r[5]=l*O+h*B+x,r}function l1(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r[3]=e[3]-i[3],r[4]=e[4]-i[4],r[5]=e[5]-i[5],r}go.mul=eS,go.sub=l1;var Wi={};function c1(r){return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c1(r)}Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.create=function(){var r=new Ll.ARRAY_TYPE(9);return Ll.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},Wi.fromMat4=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r},Wi.clone=function(r){var e=new Ll.ARRAY_TYPE(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e},Wi.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r},Wi.fromValues=function(r,e,i,a,l,u,h,g,x){var b=new Ll.ARRAY_TYPE(9);return b[0]=r,b[1]=e,b[2]=i,b[3]=a,b[4]=l,b[5]=u,b[6]=h,b[7]=g,b[8]=x,b},Wi.set=function(r,e,i,a,l,u,h,g,x,b){return r[0]=e,r[1]=i,r[2]=a,r[3]=l,r[4]=u,r[5]=h,r[6]=g,r[7]=x,r[8]=b,r},Wi.identity=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},Wi.transpose=function(r,e){if(r===e){var i=e[1],a=e[2],l=e[5];r[1]=e[3],r[2]=e[6],r[3]=i,r[5]=e[7],r[6]=a,r[7]=l}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r},Wi.invert=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],g=e[5],x=e[6],b=e[7],T=e[8],M=T*h-g*b,A=-T*u+g*x,O=b*u-h*x,B=i*M+a*A+l*O;return B?(r[0]=M*(B=1/B),r[1]=(-T*a+l*b)*B,r[2]=(g*a-l*h)*B,r[3]=A*B,r[4]=(T*i-l*x)*B,r[5]=(-g*i+l*u)*B,r[6]=O*B,r[7]=(-b*i+a*x)*B,r[8]=(h*i-a*u)*B,r):null},Wi.adjoint=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],g=e[5],x=e[6],b=e[7],T=e[8];return r[0]=h*T-g*b,r[1]=l*b-a*T,r[2]=a*g-l*h,r[3]=g*x-u*T,r[4]=i*T-l*x,r[5]=l*u-i*g,r[6]=u*b-h*x,r[7]=a*x-i*b,r[8]=i*h-a*u,r},Wi.determinant=function(r){var e=r[3],i=r[4],a=r[5],l=r[6],u=r[7],h=r[8];return r[0]*(h*i-a*u)+r[1]*(-h*e+a*l)+r[2]*(u*e-i*l)},Wi.multiply=av,Wi.translate=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=e[8],A=i[0],O=i[1];return r[0]=a,r[1]=l,r[2]=u,r[3]=h,r[4]=g,r[5]=x,r[6]=A*a+O*h+b,r[7]=A*l+O*g+T,r[8]=A*u+O*x+M,r},Wi.rotate=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=e[8],A=Math.sin(i),O=Math.cos(i);return r[0]=O*a+A*h,r[1]=O*l+A*g,r[2]=O*u+A*x,r[3]=O*h-A*a,r[4]=O*g-A*l,r[5]=O*x-A*u,r[6]=b,r[7]=T,r[8]=M,r},Wi.scale=function(r,e,i){var a=i[0],l=i[1];return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=l*e[3],r[4]=l*e[4],r[5]=l*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r},Wi.fromTranslation=function(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r},Wi.fromRotation=function(r,e){var i=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=i,r[2]=0,r[3]=-i,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},Wi.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},Wi.fromMat2d=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r},Wi.fromQuat=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=i+i,g=a+a,x=l+l,b=i*h,T=a*h,M=a*g,A=l*h,O=l*g,B=l*x,V=u*h,W=u*g,q=u*x;return r[0]=1-M-B,r[3]=T-q,r[6]=A+W,r[1]=T+q,r[4]=1-b-B,r[7]=O-V,r[2]=A-W,r[5]=O+V,r[8]=1-b-M,r},Wi.normalFromMat4=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],g=e[5],x=e[6],b=e[7],T=e[8],M=e[9],A=e[10],O=e[11],B=e[12],V=e[13],W=e[14],q=e[15],ne=i*g-a*h,ae=i*x-l*h,le=i*b-u*h,ie=a*x-l*g,ue=a*b-u*g,Ee=l*b-u*x,Be=T*V-M*B,je=T*W-A*B,Ge=T*q-O*B,tt=M*W-A*V,Ze=M*q-O*V,nt=A*q-O*W,Xe=ne*nt-ae*Ze+le*tt+ie*Ge-ue*je+Ee*Be;return Xe?(r[0]=(g*nt-x*Ze+b*tt)*(Xe=1/Xe),r[1]=(x*Ge-h*nt-b*je)*Xe,r[2]=(h*Ze-g*Ge+b*Be)*Xe,r[3]=(l*Ze-a*nt-u*tt)*Xe,r[4]=(i*nt-l*Ge+u*je)*Xe,r[5]=(a*Ge-i*Ze-u*Be)*Xe,r[6]=(V*Ee-W*ue+q*ie)*Xe,r[7]=(W*le-B*Ee-q*ae)*Xe,r[8]=(B*ue-V*le+q*ne)*Xe,r):null},Wi.projection=function(r,e,i){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/i,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r},Wi.str=function(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"},Wi.frob=function(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},Wi.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r[3]=e[3]+i[3],r[4]=e[4]+i[4],r[5]=e[5]+i[5],r[6]=e[6]+i[6],r[7]=e[7]+i[7],r[8]=e[8]+i[8],r},Wi.subtract=sv,Wi.multiplyScalar=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*i,r},Wi.multiplyScalarAndAdd=function(r,e,i,a){return r[0]=e[0]+i[0]*a,r[1]=e[1]+i[1]*a,r[2]=e[2]+i[2]*a,r[3]=e[3]+i[3]*a,r[4]=e[4]+i[4]*a,r[5]=e[5]+i[5]*a,r[6]=e[6]+i[6]*a,r[7]=e[7]+i[7]*a,r[8]=e[8]+i[8]*a,r},Wi.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]},Wi.equals=function(r,e){var i=r[0],a=r[1],l=r[2],u=r[3],h=r[4],g=r[5],x=r[6],b=r[7],T=r[8],M=e[0],A=e[1],O=e[2],B=e[3],V=e[4],W=e[5],q=e[6],ne=e[7],ae=e[8];return Math.abs(i-M)<=Ll.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-A)<=Ll.EPSILON*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-O)<=Ll.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(u-B)<=Ll.EPSILON*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(h-V)<=Ll.EPSILON*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(g-W)<=Ll.EPSILON*Math.max(1,Math.abs(g),Math.abs(W))&&Math.abs(x-q)<=Ll.EPSILON*Math.max(1,Math.abs(x),Math.abs(q))&&Math.abs(b-ne)<=Ll.EPSILON*Math.max(1,Math.abs(b),Math.abs(ne))&&Math.abs(T-ae)<=Ll.EPSILON*Math.max(1,Math.abs(T),Math.abs(ae))},Wi.sub=Wi.mul=void 0;var Ll=function(r,e){if(r&&r.__esModule)return r;if(r===null||c1(r)!=="object"&&typeof r!="function")return{default:r};var i=u1(void 0);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}(Ta);function u1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(u1=function(a){return a?i:e})(r)}function av(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=e[8],A=i[0],O=i[1],B=i[2],V=i[3],W=i[4],q=i[5],ne=i[6],ae=i[7],le=i[8];return r[0]=A*a+O*h+B*b,r[1]=A*l+O*g+B*T,r[2]=A*u+O*x+B*M,r[3]=V*a+W*h+q*b,r[4]=V*l+W*g+q*T,r[5]=V*u+W*x+q*M,r[6]=ne*a+ae*h+le*b,r[7]=ne*l+ae*g+le*T,r[8]=ne*u+ae*x+le*M,r}function sv(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r[3]=e[3]-i[3],r[4]=e[4]-i[4],r[5]=e[5]-i[5],r[6]=e[6]-i[6],r[7]=e[7]-i[7],r[8]=e[8]-i[8],r}Wi.mul=av,Wi.sub=sv;var Zn={};function h1(r){return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h1(r)}Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.create=function(){var r=new Ko.ARRAY_TYPE(16);return Ko.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},Zn.clone=function(r){var e=new Ko.ARRAY_TYPE(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},Zn.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},Zn.fromValues=function(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V){var W=new Ko.ARRAY_TYPE(16);return W[0]=r,W[1]=e,W[2]=i,W[3]=a,W[4]=l,W[5]=u,W[6]=h,W[7]=g,W[8]=x,W[9]=b,W[10]=T,W[11]=M,W[12]=A,W[13]=O,W[14]=B,W[15]=V,W},Zn.set=function(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W){return r[0]=e,r[1]=i,r[2]=a,r[3]=l,r[4]=u,r[5]=h,r[6]=g,r[7]=x,r[8]=b,r[9]=T,r[10]=M,r[11]=A,r[12]=O,r[13]=B,r[14]=V,r[15]=W,r},Zn.identity=eu,Zn.transpose=function(r,e){if(r===e){var i=e[1],a=e[2],l=e[3],u=e[6],h=e[7],g=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=i,r[6]=e[9],r[7]=e[13],r[8]=a,r[9]=u,r[11]=e[14],r[12]=l,r[13]=h,r[14]=g}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r},Zn.invert=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],g=e[5],x=e[6],b=e[7],T=e[8],M=e[9],A=e[10],O=e[11],B=e[12],V=e[13],W=e[14],q=e[15],ne=i*g-a*h,ae=i*x-l*h,le=i*b-u*h,ie=a*x-l*g,ue=a*b-u*g,Ee=l*b-u*x,Be=T*V-M*B,je=T*W-A*B,Ge=T*q-O*B,tt=M*W-A*V,Ze=M*q-O*V,nt=A*q-O*W,Xe=ne*nt-ae*Ze+le*tt+ie*Ge-ue*je+Ee*Be;return Xe?(r[0]=(g*nt-x*Ze+b*tt)*(Xe=1/Xe),r[1]=(l*Ze-a*nt-u*tt)*Xe,r[2]=(V*Ee-W*ue+q*ie)*Xe,r[3]=(A*ue-M*Ee-O*ie)*Xe,r[4]=(x*Ge-h*nt-b*je)*Xe,r[5]=(i*nt-l*Ge+u*je)*Xe,r[6]=(W*le-B*Ee-q*ae)*Xe,r[7]=(T*Ee-A*le+O*ae)*Xe,r[8]=(h*Ze-g*Ge+b*Be)*Xe,r[9]=(a*Ge-i*Ze-u*Be)*Xe,r[10]=(B*ue-V*le+q*ne)*Xe,r[11]=(M*le-T*ue-O*ne)*Xe,r[12]=(g*je-h*tt-x*Be)*Xe,r[13]=(i*tt-a*je+l*Be)*Xe,r[14]=(V*ae-B*ie-W*ne)*Xe,r[15]=(T*ie-M*ae+A*ne)*Xe,r):null},Zn.adjoint=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=e[4],g=e[5],x=e[6],b=e[7],T=e[8],M=e[9],A=e[10],O=e[11],B=e[12],V=e[13],W=e[14],q=e[15];return r[0]=g*(A*q-O*W)-M*(x*q-b*W)+V*(x*O-b*A),r[1]=-(a*(A*q-O*W)-M*(l*q-u*W)+V*(l*O-u*A)),r[2]=a*(x*q-b*W)-g*(l*q-u*W)+V*(l*b-u*x),r[3]=-(a*(x*O-b*A)-g*(l*O-u*A)+M*(l*b-u*x)),r[4]=-(h*(A*q-O*W)-T*(x*q-b*W)+B*(x*O-b*A)),r[5]=i*(A*q-O*W)-T*(l*q-u*W)+B*(l*O-u*A),r[6]=-(i*(x*q-b*W)-h*(l*q-u*W)+B*(l*b-u*x)),r[7]=i*(x*O-b*A)-h*(l*O-u*A)+T*(l*b-u*x),r[8]=h*(M*q-O*V)-T*(g*q-b*V)+B*(g*O-b*M),r[9]=-(i*(M*q-O*V)-T*(a*q-u*V)+B*(a*O-u*M)),r[10]=i*(g*q-b*V)-h*(a*q-u*V)+B*(a*b-u*g),r[11]=-(i*(g*O-b*M)-h*(a*O-u*M)+T*(a*b-u*g)),r[12]=-(h*(M*W-A*V)-T*(g*W-x*V)+B*(g*A-x*M)),r[13]=i*(M*W-A*V)-T*(a*W-l*V)+B*(a*A-l*M),r[14]=-(i*(g*W-x*V)-h*(a*W-l*V)+B*(a*x-l*g)),r[15]=i*(g*A-x*M)-h*(a*A-l*M)+T*(a*x-l*g),r},Zn.determinant=function(r){var e=r[0],i=r[1],a=r[2],l=r[3],u=r[4],h=r[5],g=r[6],x=r[7],b=r[8],T=r[9],M=r[10],A=r[11],O=r[12],B=r[13],V=r[14],W=r[15];return(e*h-i*u)*(M*W-A*V)-(e*g-a*u)*(T*W-A*B)+(e*x-l*u)*(T*V-M*B)+(i*g-a*h)*(b*W-A*O)-(i*x-l*h)*(b*V-M*O)+(a*x-l*g)*(b*B-T*O)},Zn.multiply=ph,Zn.translate=function(r,e,i){var a,l,u,h,g,x,b,T,M,A,O,B,V=i[0],W=i[1],q=i[2];return e===r?(r[12]=e[0]*V+e[4]*W+e[8]*q+e[12],r[13]=e[1]*V+e[5]*W+e[9]*q+e[13],r[14]=e[2]*V+e[6]*W+e[10]*q+e[14],r[15]=e[3]*V+e[7]*W+e[11]*q+e[15]):(l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=e[8],A=e[9],O=e[10],B=e[11],r[0]=a=e[0],r[1]=l,r[2]=u,r[3]=h,r[4]=g,r[5]=x,r[6]=b,r[7]=T,r[8]=M,r[9]=A,r[10]=O,r[11]=B,r[12]=a*V+g*W+M*q+e[12],r[13]=l*V+x*W+A*q+e[13],r[14]=u*V+b*W+O*q+e[14],r[15]=h*V+T*W+B*q+e[15]),r},Zn.scale=function(r,e,i){var a=i[0],l=i[1],u=i[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*l,r[5]=e[5]*l,r[6]=e[6]*l,r[7]=e[7]*l,r[8]=e[8]*u,r[9]=e[9]*u,r[10]=e[10]*u,r[11]=e[11]*u,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},Zn.rotate=function(r,e,i,a){var l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne,ae,le,ie,ue,Ee,Be,je,Ge,tt,Ze=a[0],nt=a[1],Xe=a[2],ut=Math.hypot(Ze,nt,Xe);return ut<Ko.EPSILON?null:(Ze*=ut=1/ut,nt*=ut,Xe*=ut,l=Math.sin(i),u=Math.cos(i),x=e[1],b=e[2],T=e[3],A=e[5],O=e[6],B=e[7],W=e[9],q=e[10],ne=e[11],ue=Ze*nt*(h=1-u)-Xe*l,Ee=nt*nt*h+u,Be=Xe*nt*h+Ze*l,je=Ze*Xe*h+nt*l,Ge=nt*Xe*h-Ze*l,tt=Xe*Xe*h+u,r[0]=(g=e[0])*(ae=Ze*Ze*h+u)+(M=e[4])*(le=nt*Ze*h+Xe*l)+(V=e[8])*(ie=Xe*Ze*h-nt*l),r[1]=x*ae+A*le+W*ie,r[2]=b*ae+O*le+q*ie,r[3]=T*ae+B*le+ne*ie,r[4]=g*ue+M*Ee+V*Be,r[5]=x*ue+A*Ee+W*Be,r[6]=b*ue+O*Ee+q*Be,r[7]=T*ue+B*Ee+ne*Be,r[8]=g*je+M*Ge+V*tt,r[9]=x*je+A*Ge+W*tt,r[10]=b*je+O*Ge+q*tt,r[11]=T*je+B*Ge+ne*tt,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)},Zn.rotateX=function(r,e,i){var a=Math.sin(i),l=Math.cos(i),u=e[4],h=e[5],g=e[6],x=e[7],b=e[8],T=e[9],M=e[10],A=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=u*l+b*a,r[5]=h*l+T*a,r[6]=g*l+M*a,r[7]=x*l+A*a,r[8]=b*l-u*a,r[9]=T*l-h*a,r[10]=M*l-g*a,r[11]=A*l-x*a,r},Zn.rotateY=function(r,e,i){var a=Math.sin(i),l=Math.cos(i),u=e[0],h=e[1],g=e[2],x=e[3],b=e[8],T=e[9],M=e[10],A=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=u*l-b*a,r[1]=h*l-T*a,r[2]=g*l-M*a,r[3]=x*l-A*a,r[8]=u*a+b*l,r[9]=h*a+T*l,r[10]=g*a+M*l,r[11]=x*a+A*l,r},Zn.rotateZ=function(r,e,i){var a=Math.sin(i),l=Math.cos(i),u=e[0],h=e[1],g=e[2],x=e[3],b=e[4],T=e[5],M=e[6],A=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=u*l+b*a,r[1]=h*l+T*a,r[2]=g*l+M*a,r[3]=x*l+A*a,r[4]=b*l-u*a,r[5]=T*l-h*a,r[6]=M*l-g*a,r[7]=A*l-x*a,r},Zn.fromTranslation=function(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},Zn.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},Zn.fromRotation=function(r,e,i){var a,l,u,h=i[0],g=i[1],x=i[2],b=Math.hypot(h,g,x);return b<Ko.EPSILON?null:(h*=b=1/b,g*=b,x*=b,a=Math.sin(e),l=Math.cos(e),r[0]=h*h*(u=1-l)+l,r[1]=g*h*u+x*a,r[2]=x*h*u-g*a,r[3]=0,r[4]=h*g*u-x*a,r[5]=g*g*u+l,r[6]=x*g*u+h*a,r[7]=0,r[8]=h*x*u+g*a,r[9]=g*x*u-h*a,r[10]=x*x*u+l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)},Zn.fromXRotation=function(r,e){var i=Math.sin(e),a=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=i,r[7]=0,r[8]=0,r[9]=-i,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},Zn.fromYRotation=function(r,e){var i=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=0,r[2]=-i,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=i,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},Zn.fromZRotation=function(r,e){var i=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=i,r[2]=0,r[3]=0,r[4]=-i,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},Zn.fromRotationTranslation=d1,Zn.fromQuat2=function(r,e){var i=new Ko.ARRAY_TYPE(3),a=-e[0],l=-e[1],u=-e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=a*a+l*l+u*u+h*h;return M>0?(i[0]=2*(g*h+T*a+x*u-b*l)/M,i[1]=2*(x*h+T*l+b*a-g*u)/M,i[2]=2*(b*h+T*u+g*l-x*a)/M):(i[0]=2*(g*h+T*a+x*u-b*l),i[1]=2*(x*h+T*l+b*a-g*u),i[2]=2*(b*h+T*u+g*l-x*a)),d1(r,e,i),r},Zn.getTranslation=function(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r},Zn.getScaling=lv,Zn.getRotation=function(r,e){var i=new Ko.ARRAY_TYPE(3);lv(i,e);var a=1/i[0],l=1/i[1],u=1/i[2],h=e[0]*a,g=e[1]*l,x=e[2]*u,b=e[4]*a,T=e[5]*l,M=e[6]*u,A=e[8]*a,O=e[9]*l,B=e[10]*u,V=h+T+B,W=0;return V>0?(W=2*Math.sqrt(V+1),r[3]=.25*W,r[0]=(M-O)/W,r[1]=(A-x)/W,r[2]=(g-b)/W):h>T&&h>B?(W=2*Math.sqrt(1+h-T-B),r[3]=(M-O)/W,r[0]=.25*W,r[1]=(g+b)/W,r[2]=(A+x)/W):T>B?(W=2*Math.sqrt(1+T-h-B),r[3]=(A-x)/W,r[0]=(g+b)/W,r[1]=.25*W,r[2]=(M+O)/W):(W=2*Math.sqrt(1+B-h-T),r[3]=(g-b)/W,r[0]=(A+x)/W,r[1]=(M+O)/W,r[2]=.25*W),r},Zn.fromRotationTranslationScale=function(r,e,i,a){var l=e[0],u=e[1],h=e[2],g=e[3],x=l+l,b=u+u,T=h+h,M=l*x,A=l*b,O=l*T,B=u*b,V=u*T,W=h*T,q=g*x,ne=g*b,ae=g*T,le=a[0],ie=a[1],ue=a[2];return r[0]=(1-(B+W))*le,r[1]=(A+ae)*le,r[2]=(O-ne)*le,r[3]=0,r[4]=(A-ae)*ie,r[5]=(1-(M+W))*ie,r[6]=(V+q)*ie,r[7]=0,r[8]=(O+ne)*ue,r[9]=(V-q)*ue,r[10]=(1-(M+B))*ue,r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r},Zn.fromRotationTranslationScaleOrigin=function(r,e,i,a,l){var u=e[0],h=e[1],g=e[2],x=e[3],b=u+u,T=h+h,M=g+g,A=u*b,O=u*T,B=u*M,V=h*T,W=h*M,q=g*M,ne=x*b,ae=x*T,le=x*M,ie=a[0],ue=a[1],Ee=a[2],Be=l[0],je=l[1],Ge=l[2],tt=(1-(V+q))*ie,Ze=(O+le)*ie,nt=(B-ae)*ie,Xe=(O-le)*ue,ut=(1-(A+q))*ue,bt=(W+ne)*ue,At=(B+ae)*Ee,lt=(W-ne)*Ee,ft=(1-(A+V))*Ee;return r[0]=tt,r[1]=Ze,r[2]=nt,r[3]=0,r[4]=Xe,r[5]=ut,r[6]=bt,r[7]=0,r[8]=At,r[9]=lt,r[10]=ft,r[11]=0,r[12]=i[0]+Be-(tt*Be+Xe*je+At*Ge),r[13]=i[1]+je-(Ze*Be+ut*je+lt*Ge),r[14]=i[2]+Ge-(nt*Be+bt*je+ft*Ge),r[15]=1,r},Zn.fromQuat=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=i+i,g=a+a,x=l+l,b=i*h,T=a*h,M=a*g,A=l*h,O=l*g,B=l*x,V=u*h,W=u*g,q=u*x;return r[0]=1-M-B,r[1]=T+q,r[2]=A-W,r[3]=0,r[4]=T-q,r[5]=1-b-B,r[6]=O+V,r[7]=0,r[8]=A+W,r[9]=O-V,r[10]=1-b-M,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},Zn.frustum=function(r,e,i,a,l,u,h){var g=1/(i-e),x=1/(l-a),b=1/(u-h);return r[0]=2*u*g,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*u*x,r[6]=0,r[7]=0,r[8]=(i+e)*g,r[9]=(l+a)*x,r[10]=(h+u)*b,r[11]=-1,r[12]=0,r[13]=0,r[14]=h*u*2*b,r[15]=0,r},Zn.perspectiveNO=tS,Zn.perspectiveZO=function(r,e,i,a,l){var u,h=1/Math.tan(e/2);return r[0]=h/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,l!=null&&l!==1/0?(r[10]=l*(u=1/(a-l)),r[14]=l*a*u):(r[10]=-1,r[14]=-a),r},Zn.perspectiveFromFieldOfView=function(r,e,i,a){var l=Math.tan(e.upDegrees*Math.PI/180),u=Math.tan(e.downDegrees*Math.PI/180),h=Math.tan(e.leftDegrees*Math.PI/180),g=Math.tan(e.rightDegrees*Math.PI/180),x=2/(h+g),b=2/(l+u);return r[0]=x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=b,r[6]=0,r[7]=0,r[8]=-(h-g)*x*.5,r[9]=(l-u)*b*.5,r[10]=a/(i-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*i/(i-a),r[15]=0,r},Zn.orthoNO=rS,Zn.orthoZO=function(r,e,i,a,l,u,h){var g=1/(e-i),x=1/(a-l),b=1/(u-h);return r[0]=-2*g,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=b,r[11]=0,r[12]=(e+i)*g,r[13]=(l+a)*x,r[14]=u*b,r[15]=1,r},Zn.lookAt=function(r,e,i,a){var l,u,h,g,x,b,T,M,A,O,B=e[0],V=e[1],W=e[2],q=a[0],ne=a[1],ae=a[2],le=i[0],ie=i[1],ue=i[2];return Math.abs(B-le)<Ko.EPSILON&&Math.abs(V-ie)<Ko.EPSILON&&Math.abs(W-ue)<Ko.EPSILON?eu(r):(T=B-le,M=V-ie,A=W-ue,l=ne*(A*=O=1/Math.hypot(T,M,A))-ae*(M*=O),u=ae*(T*=O)-q*A,h=q*M-ne*T,(O=Math.hypot(l,u,h))?(l*=O=1/O,u*=O,h*=O):(l=0,u=0,h=0),g=M*h-A*u,x=A*l-T*h,b=T*u-M*l,(O=Math.hypot(g,x,b))?(g*=O=1/O,x*=O,b*=O):(g=0,x=0,b=0),r[0]=l,r[1]=g,r[2]=T,r[3]=0,r[4]=u,r[5]=x,r[6]=M,r[7]=0,r[8]=h,r[9]=b,r[10]=A,r[11]=0,r[12]=-(l*B+u*V+h*W),r[13]=-(g*B+x*V+b*W),r[14]=-(T*B+M*V+A*W),r[15]=1,r)},Zn.targetTo=function(r,e,i,a){var l=e[0],u=e[1],h=e[2],g=a[0],x=a[1],b=a[2],T=l-i[0],M=u-i[1],A=h-i[2],O=T*T+M*M+A*A;O>0&&(T*=O=1/Math.sqrt(O),M*=O,A*=O);var B=x*A-b*M,V=b*T-g*A,W=g*M-x*T;return(O=B*B+V*V+W*W)>0&&(B*=O=1/Math.sqrt(O),V*=O,W*=O),r[0]=B,r[1]=V,r[2]=W,r[3]=0,r[4]=M*W-A*V,r[5]=A*B-T*W,r[6]=T*V-M*B,r[7]=0,r[8]=T,r[9]=M,r[10]=A,r[11]=0,r[12]=l,r[13]=u,r[14]=h,r[15]=1,r},Zn.str=function(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"},Zn.frob=function(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])},Zn.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r[3]=e[3]+i[3],r[4]=e[4]+i[4],r[5]=e[5]+i[5],r[6]=e[6]+i[6],r[7]=e[7]+i[7],r[8]=e[8]+i[8],r[9]=e[9]+i[9],r[10]=e[10]+i[10],r[11]=e[11]+i[11],r[12]=e[12]+i[12],r[13]=e[13]+i[13],r[14]=e[14]+i[14],r[15]=e[15]+i[15],r},Zn.subtract=Cg,Zn.multiplyScalar=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*i,r[9]=e[9]*i,r[10]=e[10]*i,r[11]=e[11]*i,r[12]=e[12]*i,r[13]=e[13]*i,r[14]=e[14]*i,r[15]=e[15]*i,r},Zn.multiplyScalarAndAdd=function(r,e,i,a){return r[0]=e[0]+i[0]*a,r[1]=e[1]+i[1]*a,r[2]=e[2]+i[2]*a,r[3]=e[3]+i[3]*a,r[4]=e[4]+i[4]*a,r[5]=e[5]+i[5]*a,r[6]=e[6]+i[6]*a,r[7]=e[7]+i[7]*a,r[8]=e[8]+i[8]*a,r[9]=e[9]+i[9]*a,r[10]=e[10]+i[10]*a,r[11]=e[11]+i[11]*a,r[12]=e[12]+i[12]*a,r[13]=e[13]+i[13]*a,r[14]=e[14]+i[14]*a,r[15]=e[15]+i[15]*a,r},Zn.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]},Zn.equals=function(r,e){var i=r[0],a=r[1],l=r[2],u=r[3],h=r[4],g=r[5],x=r[6],b=r[7],T=r[8],M=r[9],A=r[10],O=r[11],B=r[12],V=r[13],W=r[14],q=r[15],ne=e[0],ae=e[1],le=e[2],ie=e[3],ue=e[4],Ee=e[5],Be=e[6],je=e[7],Ge=e[8],tt=e[9],Ze=e[10],nt=e[11],Xe=e[12],ut=e[13],bt=e[14],At=e[15];return Math.abs(i-ne)<=Ko.EPSILON*Math.max(1,Math.abs(i),Math.abs(ne))&&Math.abs(a-ae)<=Ko.EPSILON*Math.max(1,Math.abs(a),Math.abs(ae))&&Math.abs(l-le)<=Ko.EPSILON*Math.max(1,Math.abs(l),Math.abs(le))&&Math.abs(u-ie)<=Ko.EPSILON*Math.max(1,Math.abs(u),Math.abs(ie))&&Math.abs(h-ue)<=Ko.EPSILON*Math.max(1,Math.abs(h),Math.abs(ue))&&Math.abs(g-Ee)<=Ko.EPSILON*Math.max(1,Math.abs(g),Math.abs(Ee))&&Math.abs(x-Be)<=Ko.EPSILON*Math.max(1,Math.abs(x),Math.abs(Be))&&Math.abs(b-je)<=Ko.EPSILON*Math.max(1,Math.abs(b),Math.abs(je))&&Math.abs(T-Ge)<=Ko.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ge))&&Math.abs(M-tt)<=Ko.EPSILON*Math.max(1,Math.abs(M),Math.abs(tt))&&Math.abs(A-Ze)<=Ko.EPSILON*Math.max(1,Math.abs(A),Math.abs(Ze))&&Math.abs(O-nt)<=Ko.EPSILON*Math.max(1,Math.abs(O),Math.abs(nt))&&Math.abs(B-Xe)<=Ko.EPSILON*Math.max(1,Math.abs(B),Math.abs(Xe))&&Math.abs(V-ut)<=Ko.EPSILON*Math.max(1,Math.abs(V),Math.abs(ut))&&Math.abs(W-bt)<=Ko.EPSILON*Math.max(1,Math.abs(W),Math.abs(bt))&&Math.abs(q-At)<=Ko.EPSILON*Math.max(1,Math.abs(q),Math.abs(At))},Zn.sub=Zn.mul=Zn.ortho=Zn.perspective=void 0;var Ko=function(r,e){if(r&&r.__esModule)return r;if(r===null||h1(r)!=="object"&&typeof r!="function")return{default:r};var i=Fp(void 0);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}(Ta);function Fp(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(Fp=function(a){return a?i:e})(r)}function eu(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ph(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=e[8],A=e[9],O=e[10],B=e[11],V=e[12],W=e[13],q=e[14],ne=e[15],ae=i[0],le=i[1],ie=i[2],ue=i[3];return r[0]=ae*a+le*g+ie*M+ue*V,r[1]=ae*l+le*x+ie*A+ue*W,r[2]=ae*u+le*b+ie*O+ue*q,r[3]=ae*h+le*T+ie*B+ue*ne,r[4]=(ae=i[4])*a+(le=i[5])*g+(ie=i[6])*M+(ue=i[7])*V,r[5]=ae*l+le*x+ie*A+ue*W,r[6]=ae*u+le*b+ie*O+ue*q,r[7]=ae*h+le*T+ie*B+ue*ne,r[8]=(ae=i[8])*a+(le=i[9])*g+(ie=i[10])*M+(ue=i[11])*V,r[9]=ae*l+le*x+ie*A+ue*W,r[10]=ae*u+le*b+ie*O+ue*q,r[11]=ae*h+le*T+ie*B+ue*ne,r[12]=(ae=i[12])*a+(le=i[13])*g+(ie=i[14])*M+(ue=i[15])*V,r[13]=ae*l+le*x+ie*A+ue*W,r[14]=ae*u+le*b+ie*O+ue*q,r[15]=ae*h+le*T+ie*B+ue*ne,r}function d1(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=a+a,x=l+l,b=u+u,T=a*g,M=a*x,A=a*b,O=l*x,B=l*b,V=u*b,W=h*g,q=h*x,ne=h*b;return r[0]=1-(O+V),r[1]=M+ne,r[2]=A-q,r[3]=0,r[4]=M-ne,r[5]=1-(T+V),r[6]=B+W,r[7]=0,r[8]=A+q,r[9]=B-W,r[10]=1-(T+O),r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r}function lv(r,e){var i=e[4],a=e[5],l=e[6],u=e[8],h=e[9],g=e[10];return r[0]=Math.hypot(e[0],e[1],e[2]),r[1]=Math.hypot(i,a,l),r[2]=Math.hypot(u,h,g),r}function tS(r,e,i,a,l){var u,h=1/Math.tan(e/2);return r[0]=h/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,l!=null&&l!==1/0?(r[10]=(l+a)*(u=1/(a-l)),r[14]=2*l*a*u):(r[10]=-1,r[14]=-2*a),r}function rS(r,e,i,a,l,u,h){var g=1/(e-i),x=1/(a-l),b=1/(u-h);return r[0]=-2*g,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*b,r[11]=0,r[12]=(e+i)*g,r[13]=(l+a)*x,r[14]=(h+u)*b,r[15]=1,r}function Cg(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r[3]=e[3]-i[3],r[4]=e[4]-i[4],r[5]=e[5]-i[5],r[6]=e[6]-i[6],r[7]=e[7]-i[7],r[8]=e[8]-i[8],r[9]=e[9]-i[9],r[10]=e[10]-i[10],r[11]=e[11]-i[11],r[12]=e[12]-i[12],r[13]=e[13]-i[13],r[14]=e[14]-i[14],r[15]=e[15]-i[15],r}Zn.perspective=tS,Zn.ortho=rS,Zn.mul=ph,Zn.sub=Cg;var Nn={},Gn={};function Eg(r){return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(r)}Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.create=f1,Gn.clone=function(r){var e=new tu.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e},Gn.length=p1,Gn.fromValues=function(r,e,i){var a=new tu.ARRAY_TYPE(3);return a[0]=r,a[1]=e,a[2]=i,a},Gn.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r},Gn.set=function(r,e,i,a){return r[0]=e,r[1]=i,r[2]=a,r},Gn.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r},Gn.subtract=cv,Gn.multiply=m1,Gn.divide=Tg,Gn.ceil=function(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r},Gn.floor=function(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r},Gn.min=function(r,e,i){return r[0]=Math.min(e[0],i[0]),r[1]=Math.min(e[1],i[1]),r[2]=Math.min(e[2],i[2]),r},Gn.max=function(r,e,i){return r[0]=Math.max(e[0],i[0]),r[1]=Math.max(e[1],i[1]),r[2]=Math.max(e[2],i[2]),r},Gn.round=function(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r},Gn.scale=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r},Gn.scaleAndAdd=function(r,e,i,a){return r[0]=e[0]+i[0]*a,r[1]=e[1]+i[1]*a,r[2]=e[2]+i[2]*a,r},Gn.distance=g1,Gn.squaredDistance=nS,Gn.squaredLength=iS,Gn.negate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r},Gn.inverse=function(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r},Gn.normalize=function(r,e){var i=e[0],a=e[1],l=e[2],u=i*i+a*a+l*l;return u>0&&(u=1/Math.sqrt(u)),r[0]=e[0]*u,r[1]=e[1]*u,r[2]=e[2]*u,r},Gn.dot=y1,Gn.cross=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=i[0],g=i[1],x=i[2];return r[0]=l*x-u*g,r[1]=u*h-a*x,r[2]=a*g-l*h,r},Gn.lerp=function(r,e,i,a){var l=e[0],u=e[1],h=e[2];return r[0]=l+a*(i[0]-l),r[1]=u+a*(i[1]-u),r[2]=h+a*(i[2]-h),r},Gn.hermite=function(r,e,i,a,l,u){var h=u*u,g=h*(2*u-3)+1,x=h*(u-2)+u,b=h*(u-1),T=h*(3-2*u);return r[0]=e[0]*g+i[0]*x+a[0]*b+l[0]*T,r[1]=e[1]*g+i[1]*x+a[1]*b+l[1]*T,r[2]=e[2]*g+i[2]*x+a[2]*b+l[2]*T,r},Gn.bezier=function(r,e,i,a,l,u){var h=1-u,g=h*h,x=u*u,b=g*h,T=3*u*g,M=3*x*h,A=x*u;return r[0]=e[0]*b+i[0]*T+a[0]*M+l[0]*A,r[1]=e[1]*b+i[1]*T+a[1]*M+l[1]*A,r[2]=e[2]*b+i[2]*T+a[2]*M+l[2]*A,r},Gn.random=function(r,e){e=e||1;var i=2*tu.RANDOM()*Math.PI,a=2*tu.RANDOM()-1,l=Math.sqrt(1-a*a)*e;return r[0]=Math.cos(i)*l,r[1]=Math.sin(i)*l,r[2]=a*e,r},Gn.transformMat4=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=i[3]*a+i[7]*l+i[11]*u+i[15];return r[0]=(i[0]*a+i[4]*l+i[8]*u+i[12])/(h=h||1),r[1]=(i[1]*a+i[5]*l+i[9]*u+i[13])/h,r[2]=(i[2]*a+i[6]*l+i[10]*u+i[14])/h,r},Gn.transformMat3=function(r,e,i){var a=e[0],l=e[1],u=e[2];return r[0]=a*i[0]+l*i[3]+u*i[6],r[1]=a*i[1]+l*i[4]+u*i[7],r[2]=a*i[2]+l*i[5]+u*i[8],r},Gn.transformQuat=function(r,e,i){var a=i[0],l=i[1],u=i[2],h=e[0],g=e[1],x=e[2],b=l*x-u*g,T=u*h-a*x,M=a*g-l*h,A=l*M-u*T,O=u*b-a*M,B=a*T-l*b,V=2*i[3];return T*=V,M*=V,O*=2,B*=2,r[0]=h+(b*=V)+(A*=2),r[1]=g+T+O,r[2]=x+M+B,r},Gn.rotateX=function(r,e,i,a){var l=[],u=[];return l[0]=e[0]-i[0],l[1]=e[1]-i[1],l[2]=e[2]-i[2],u[0]=l[0],u[1]=l[1]*Math.cos(a)-l[2]*Math.sin(a),u[2]=l[1]*Math.sin(a)+l[2]*Math.cos(a),r[0]=u[0]+i[0],r[1]=u[1]+i[1],r[2]=u[2]+i[2],r},Gn.rotateY=function(r,e,i,a){var l=[],u=[];return l[0]=e[0]-i[0],l[1]=e[1]-i[1],l[2]=e[2]-i[2],u[0]=l[2]*Math.sin(a)+l[0]*Math.cos(a),u[1]=l[1],u[2]=l[2]*Math.cos(a)-l[0]*Math.sin(a),r[0]=u[0]+i[0],r[1]=u[1]+i[1],r[2]=u[2]+i[2],r},Gn.rotateZ=function(r,e,i,a){var l=[],u=[];return l[0]=e[0]-i[0],l[1]=e[1]-i[1],l[2]=e[2]-i[2],u[0]=l[0]*Math.cos(a)-l[1]*Math.sin(a),u[1]=l[0]*Math.sin(a)+l[1]*Math.cos(a),u[2]=l[2],r[0]=u[0]+i[0],r[1]=u[1]+i[1],r[2]=u[2]+i[2],r},Gn.angle=function(r,e){var i=r[0],a=r[1],l=r[2],u=e[0],h=e[1],g=e[2],x=Math.sqrt(i*i+a*a+l*l)*Math.sqrt(u*u+h*h+g*g),b=x&&y1(r,e)/x;return Math.acos(Math.min(Math.max(b,-1),1))},Gn.zero=function(r){return r[0]=0,r[1]=0,r[2]=0,r},Gn.str=function(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"},Gn.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]},Gn.equals=function(r,e){var i=r[0],a=r[1],l=r[2],u=e[0],h=e[1],g=e[2];return Math.abs(i-u)<=tu.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-h)<=tu.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(l-g)<=tu.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))},Gn.forEach=Gn.sqrLen=Gn.len=Gn.sqrDist=Gn.dist=Gn.div=Gn.mul=Gn.sub=void 0;var tu=function(r,e){if(r&&r.__esModule)return r;if(r===null||Eg(r)!=="object"&&typeof r!="function")return{default:r};var i=vf(void 0);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}(Ta);function vf(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(vf=function(a){return a?i:e})(r)}function f1(){var r=new tu.ARRAY_TYPE(3);return tu.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function p1(r){return Math.hypot(r[0],r[1],r[2])}function cv(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r}function m1(r,e,i){return r[0]=e[0]*i[0],r[1]=e[1]*i[1],r[2]=e[2]*i[2],r}function Tg(r,e,i){return r[0]=e[0]/i[0],r[1]=e[1]/i[1],r[2]=e[2]/i[2],r}function g1(r,e){return Math.hypot(e[0]-r[0],e[1]-r[1],e[2]-r[2])}function nS(r,e){var i=e[0]-r[0],a=e[1]-r[1],l=e[2]-r[2];return i*i+a*a+l*l}function iS(r){var e=r[0],i=r[1],a=r[2];return e*e+i*i+a*a}function y1(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}Gn.sub=cv,Gn.mul=m1,Gn.div=Tg,Gn.dist=g1,Gn.sqrDist=nS,Gn.len=p1,Gn.sqrLen=iS;var mh,NM=(mh=f1(),function(r,e,i,a,l,u){var h,g;for(e||(e=3),i||(i=0),g=a?Math.min(a*e+i,r.length):r.length,h=i;h<g;h+=e)mh[0]=r[h],mh[1]=r[h+1],mh[2]=r[h+2],l(mh,mh,u),r[h]=mh[0],r[h+1]=mh[1],r[h+2]=mh[2];return r});Gn.forEach=NM;var pi={};function v1(r){return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v1(r)}Object.defineProperty(pi,"__esModule",{value:!0}),pi.create=_1,pi.clone=function(r){var e=new $l.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e},pi.fromValues=function(r,e,i,a){var l=new $l.ARRAY_TYPE(4);return l[0]=r,l[1]=e,l[2]=i,l[3]=a,l},pi.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r},pi.set=function(r,e,i,a,l){return r[0]=e,r[1]=i,r[2]=a,r[3]=l,r},pi.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r[3]=e[3]+i[3],r},pi.subtract=x1,pi.multiply=b1,pi.divide=w1,pi.ceil=function(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r[3]=Math.ceil(e[3]),r},pi.floor=function(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r[3]=Math.floor(e[3]),r},pi.min=function(r,e,i){return r[0]=Math.min(e[0],i[0]),r[1]=Math.min(e[1],i[1]),r[2]=Math.min(e[2],i[2]),r[3]=Math.min(e[3],i[3]),r},pi.max=function(r,e,i){return r[0]=Math.max(e[0],i[0]),r[1]=Math.max(e[1],i[1]),r[2]=Math.max(e[2],i[2]),r[3]=Math.max(e[3],i[3]),r},pi.round=function(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r[3]=Math.round(e[3]),r},pi.scale=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r},pi.scaleAndAdd=function(r,e,i,a){return r[0]=e[0]+i[0]*a,r[1]=e[1]+i[1]*a,r[2]=e[2]+i[2]*a,r[3]=e[3]+i[3]*a,r},pi.distance=S1,pi.squaredDistance=C1,pi.length=uv,pi.squaredLength=Ig,pi.negate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r},pi.inverse=function(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r},pi.normalize=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=i*i+a*a+l*l+u*u;return h>0&&(h=1/Math.sqrt(h)),r[0]=i*h,r[1]=a*h,r[2]=l*h,r[3]=u*h,r},pi.dot=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]},pi.cross=function(r,e,i,a){var l=i[0]*a[1]-i[1]*a[0],u=i[0]*a[2]-i[2]*a[0],h=i[0]*a[3]-i[3]*a[0],g=i[1]*a[2]-i[2]*a[1],x=i[1]*a[3]-i[3]*a[1],b=i[2]*a[3]-i[3]*a[2],T=e[0],M=e[1],A=e[2],O=e[3];return r[0]=M*b-A*x+O*g,r[1]=-T*b+A*h-O*u,r[2]=T*x-M*h+O*l,r[3]=-T*g+M*u-A*l,r},pi.lerp=function(r,e,i,a){var l=e[0],u=e[1],h=e[2],g=e[3];return r[0]=l+a*(i[0]-l),r[1]=u+a*(i[1]-u),r[2]=h+a*(i[2]-h),r[3]=g+a*(i[3]-g),r},pi.random=function(r,e){var i,a,l,u,h,g;e=e||1;do h=(i=2*$l.RANDOM()-1)*i+(a=2*$l.RANDOM()-1)*a;while(h>=1);do g=(l=2*$l.RANDOM()-1)*l+(u=2*$l.RANDOM()-1)*u;while(g>=1);var x=Math.sqrt((1-h)/g);return r[0]=e*i,r[1]=e*a,r[2]=e*l*x,r[3]=e*u*x,r},pi.transformMat4=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3];return r[0]=i[0]*a+i[4]*l+i[8]*u+i[12]*h,r[1]=i[1]*a+i[5]*l+i[9]*u+i[13]*h,r[2]=i[2]*a+i[6]*l+i[10]*u+i[14]*h,r[3]=i[3]*a+i[7]*l+i[11]*u+i[15]*h,r},pi.transformQuat=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=i[0],g=i[1],x=i[2],b=i[3],T=b*a+g*u-x*l,M=b*l+x*a-h*u,A=b*u+h*l-g*a,O=-h*a-g*l-x*u;return r[0]=T*b+O*-h+M*-x-A*-g,r[1]=M*b+O*-g+A*-h-T*-x,r[2]=A*b+O*-x+T*-g-M*-h,r[3]=e[3],r},pi.zero=function(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r},pi.str=function(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"},pi.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]},pi.equals=function(r,e){var i=r[0],a=r[1],l=r[2],u=r[3],h=e[0],g=e[1],x=e[2],b=e[3];return Math.abs(i-h)<=$l.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-g)<=$l.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-x)<=$l.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-b)<=$l.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))},pi.forEach=pi.sqrLen=pi.len=pi.sqrDist=pi.dist=pi.div=pi.mul=pi.sub=void 0;var $l=function(r,e){if(r&&r.__esModule)return r;if(r===null||v1(r)!=="object"&&typeof r!="function")return{default:r};var i=gh(void 0);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}(Ta);function gh(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(gh=function(a){return a?i:e})(r)}function _1(){var r=new $l.ARRAY_TYPE(4);return $l.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function x1(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],r[3]=e[3]-i[3],r}function b1(r,e,i){return r[0]=e[0]*i[0],r[1]=e[1]*i[1],r[2]=e[2]*i[2],r[3]=e[3]*i[3],r}function w1(r,e,i){return r[0]=e[0]/i[0],r[1]=e[1]/i[1],r[2]=e[2]/i[2],r[3]=e[3]/i[3],r}function S1(r,e){return Math.hypot(e[0]-r[0],e[1]-r[1],e[2]-r[2],e[3]-r[3])}function C1(r,e){var i=e[0]-r[0],a=e[1]-r[1],l=e[2]-r[2],u=e[3]-r[3];return i*i+a*a+l*l+u*u}function uv(r){return Math.hypot(r[0],r[1],r[2],r[3])}function Ig(r){var e=r[0],i=r[1],a=r[2],l=r[3];return e*e+i*i+a*a+l*l}pi.sub=x1,pi.mul=b1,pi.div=w1,pi.dist=S1,pi.sqrDist=C1,pi.len=uv,pi.sqrLen=Ig;var oS=function(){var r=_1();return function(e,i,a,l,u,h){var g,x;for(i||(i=4),a||(a=0),x=l?Math.min(l*i+a,e.length):e.length,g=a;g<x;g+=i)r[0]=e[g],r[1]=e[g+1],r[2]=e[g+2],r[3]=e[g+3],u(r,r,h),e[g]=r[0],e[g+1]=r[1],e[g+2]=r[2],e[g+3]=r[3];return e}}();function Mg(r){return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(r)}pi.forEach=oS,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.create=hv,Nn.identity=function(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r},Nn.setAxisAngle=T1,Nn.getAxisAngle=function(r,e){var i=2*Math.acos(e[3]),a=Math.sin(i/2);return a>_d.EPSILON?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),i},Nn.getAngle=function(r,e){var i=R1(r,e);return Math.acos(2*i*i-1)},Nn.multiply=I1,Nn.rotateX=function(r,e,i){i*=.5;var a=e[0],l=e[1],u=e[2],h=e[3],g=Math.sin(i),x=Math.cos(i);return r[0]=a*x+h*g,r[1]=l*x+u*g,r[2]=u*x-l*g,r[3]=h*x-a*g,r},Nn.rotateY=function(r,e,i){i*=.5;var a=e[0],l=e[1],u=e[2],h=e[3],g=Math.sin(i),x=Math.cos(i);return r[0]=a*x-u*g,r[1]=l*x+h*g,r[2]=u*x+a*g,r[3]=h*x-l*g,r},Nn.rotateZ=function(r,e,i){i*=.5;var a=e[0],l=e[1],u=e[2],h=e[3],g=Math.sin(i),x=Math.cos(i);return r[0]=a*x+l*g,r[1]=l*x-a*g,r[2]=u*x+h*g,r[3]=h*x-u*g,r},Nn.calculateW=function(r,e){var i=e[0],a=e[1],l=e[2];return r[0]=i,r[1]=a,r[2]=l,r[3]=Math.sqrt(Math.abs(1-i*i-a*a-l*l)),r},Nn.exp=aS,Nn.ln=M1,Nn.pow=function(r,e,i){return M1(r,e),A1(r,r,i),aS(r,r),r},Nn.slerp=ru,Nn.random=function(r){var e=_d.RANDOM(),i=_d.RANDOM(),a=_d.RANDOM(),l=Math.sqrt(1-e),u=Math.sqrt(e);return r[0]=l*Math.sin(2*Math.PI*i),r[1]=l*Math.cos(2*Math.PI*i),r[2]=u*Math.sin(2*Math.PI*a),r[3]=u*Math.cos(2*Math.PI*a),r},Nn.invert=function(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=i*i+a*a+l*l+u*u,g=h?1/h:0;return r[0]=-i*g,r[1]=-a*g,r[2]=-l*g,r[3]=u*g,r},Nn.conjugate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r},Nn.fromMat3=P1,Nn.fromEuler=function(r,e,i,a){var l=.5*Math.PI/180;e*=l,i*=l,a*=l;var u=Math.sin(e),h=Math.cos(e),g=Math.sin(i),x=Math.cos(i),b=Math.sin(a),T=Math.cos(a);return r[0]=u*x*T-h*g*b,r[1]=h*g*T+u*x*b,r[2]=h*x*b-u*g*T,r[3]=h*x*T+u*g*b,r},Nn.str=function(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"},Nn.setAxes=Nn.sqlerp=Nn.rotationTo=Nn.equals=Nn.exactEquals=Nn.normalize=Nn.sqrLen=Nn.squaredLength=Nn.len=Nn.length=Nn.lerp=Nn.dot=Nn.scale=Nn.mul=Nn.add=Nn.set=Nn.copy=Nn.fromValues=Nn.clone=void 0;var _d=Pg(Ta),rc=Pg(Wi),nc=Pg(Gn),Bl=Pg(pi);function E1(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(E1=function(a){return a?i:e})(r)}function Pg(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||Mg(r)!=="object"&&typeof r!="function")return{default:r};var i=E1(e);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}function hv(){var r=new _d.ARRAY_TYPE(4);return _d.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function T1(r,e,i){i*=.5;var a=Math.sin(i);return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=Math.cos(i),r}function I1(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=i[0],x=i[1],b=i[2],T=i[3];return r[0]=a*T+h*g+l*b-u*x,r[1]=l*T+h*x+u*g-a*b,r[2]=u*T+h*b+a*x-l*g,r[3]=h*T-a*g-l*x-u*b,r}function aS(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=Math.sqrt(i*i+a*a+l*l),g=Math.exp(u),x=h>0?g*Math.sin(h)/h:0;return r[0]=i*x,r[1]=a*x,r[2]=l*x,r[3]=g*Math.cos(h),r}function M1(r,e){var i=e[0],a=e[1],l=e[2],u=e[3],h=Math.sqrt(i*i+a*a+l*l),g=h>0?Math.atan2(h,u)/h:0;return r[0]=i*g,r[1]=a*g,r[2]=l*g,r[3]=.5*Math.log(i*i+a*a+l*l+u*u),r}function ru(r,e,i,a){var l,u,h,g,x,b=e[0],T=e[1],M=e[2],A=e[3],O=i[0],B=i[1],V=i[2],W=i[3];return(u=b*O+T*B+M*V+A*W)<0&&(u=-u,O=-O,B=-B,V=-V,W=-W),1-u>_d.EPSILON?(l=Math.acos(u),h=Math.sin(l),g=Math.sin((1-a)*l)/h,x=Math.sin(a*l)/h):(g=1-a,x=a),r[0]=g*b+x*O,r[1]=g*T+x*B,r[2]=g*M+x*V,r[3]=g*A+x*W,r}function P1(r,e){var i,a=e[0]+e[4]+e[8];if(a>0)i=Math.sqrt(a+1),r[3]=.5*i,r[0]=(e[5]-e[7])*(i=.5/i),r[1]=(e[6]-e[2])*i,r[2]=(e[1]-e[3])*i;else{var l=0;e[4]>e[0]&&(l=1),e[8]>e[3*l+l]&&(l=2);var u=(l+1)%3,h=(l+2)%3;i=Math.sqrt(e[3*l+l]-e[3*u+u]-e[3*h+h]+1),r[l]=.5*i,r[3]=(e[3*u+h]-e[3*h+u])*(i=.5/i),r[u]=(e[3*u+l]+e[3*l+u])*i,r[h]=(e[3*h+l]+e[3*l+h])*i}return r}Nn.clone=Bl.clone,Nn.fromValues=Bl.fromValues,Nn.copy=Bl.copy,Nn.set=Bl.set,Nn.add=Bl.add,Nn.mul=I1;var A1=Bl.scale;Nn.scale=A1;var R1=Bl.dot;Nn.dot=R1,Nn.lerp=Bl.lerp;var k1=Bl.length;Nn.length=k1,Nn.len=k1;var sS=Bl.squaredLength;Nn.squaredLength=sS,Nn.sqrLen=sS;var O1=Bl.normalize;Nn.normalize=O1,Nn.exactEquals=Bl.exactEquals,Nn.equals=Bl.equals;var Ec,_f,z1,dv=(Ec=nc.create(),_f=nc.fromValues(1,0,0),z1=nc.fromValues(0,1,0),function(r,e,i){var a=nc.dot(e,i);return a<-.999999?(nc.cross(Ec,_f,e),nc.len(Ec)<1e-6&&nc.cross(Ec,z1,e),nc.normalize(Ec,Ec),T1(r,Ec,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(nc.cross(Ec,e,i),r[0]=Ec[0],r[1]=Ec[1],r[2]=Ec[2],r[3]=1+a,O1(r,r))});Nn.rotationTo=dv;var fv,Np,pv=(fv=hv(),Np=hv(),function(r,e,i,a,l,u){return ru(fv,e,l,u),ru(Np,i,a,u),ru(r,fv,Np,2*u*(1-u)),r});Nn.sqlerp=pv;var Fl,jM=(Fl=rc.create(),function(r,e,i,a){return Fl[0]=i[0],Fl[3]=i[1],Fl[6]=i[2],Fl[1]=a[0],Fl[4]=a[1],Fl[7]=a[2],Fl[2]=-e[0],Fl[5]=-e[1],Fl[8]=-e[2],O1(r,P1(r,Fl))});Nn.setAxes=jM;var wi={};function D1(r){return D1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D1(r)}Object.defineProperty(wi,"__esModule",{value:!0}),wi.create=function(){var r=new _l.ARRAY_TYPE(8);return _l.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r},wi.clone=function(r){var e=new _l.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e},wi.fromValues=function(r,e,i,a,l,u,h,g){var x=new _l.ARRAY_TYPE(8);return x[0]=r,x[1]=e,x[2]=i,x[3]=a,x[4]=l,x[5]=u,x[6]=h,x[7]=g,x},wi.fromRotationTranslationValues=function(r,e,i,a,l,u,h){var g=new _l.ARRAY_TYPE(8);g[0]=r,g[1]=e,g[2]=i,g[3]=a;var x=.5*l,b=.5*u,T=.5*h;return g[4]=x*a+b*i-T*e,g[5]=b*a+T*r-x*i,g[6]=T*a+x*e-b*r,g[7]=-x*r-b*e-T*i,g},wi.fromRotationTranslation=L1,wi.fromTranslation=function(r,e){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=.5*e[0],r[5]=.5*e[1],r[6]=.5*e[2],r[7]=0,r},wi.fromRotation=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=0,r[5]=0,r[6]=0,r[7]=0,r},wi.fromMat4=function(r,e){var i=Nl.create();ms.getRotation(i,e);var a=new _l.ARRAY_TYPE(3);return ms.getTranslation(a,e),L1(r,i,a),r},wi.copy=$1,wi.identity=function(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r},wi.set=function(r,e,i,a,l,u,h,g,x){return r[0]=e,r[1]=i,r[2]=a,r[3]=l,r[4]=u,r[5]=h,r[6]=g,r[7]=x,r},wi.getDual=function(r,e){return r[0]=e[4],r[1]=e[5],r[2]=e[6],r[3]=e[7],r},wi.setDual=function(r,e){return r[4]=e[0],r[5]=e[1],r[6]=e[2],r[7]=e[3],r},wi.getTranslation=function(r,e){var i=e[4],a=e[5],l=e[6],u=e[7],h=-e[0],g=-e[1],x=-e[2],b=e[3];return r[0]=2*(i*b+u*h+a*x-l*g),r[1]=2*(a*b+u*g+l*h-i*x),r[2]=2*(l*b+u*x+i*g-a*h),r},wi.translate=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=.5*i[0],x=.5*i[1],b=.5*i[2],T=e[4],M=e[5],A=e[6],O=e[7];return r[0]=a,r[1]=l,r[2]=u,r[3]=h,r[4]=h*g+l*b-u*x+T,r[5]=h*x+u*g-a*b+M,r[6]=h*b+a*x-l*g+A,r[7]=-a*g-l*x-u*b+O,r},wi.rotateX=function(r,e,i){var a=-e[0],l=-e[1],u=-e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=g*h+T*a+x*u-b*l,A=x*h+T*l+b*a-g*u,O=b*h+T*u+g*l-x*a,B=T*h-g*a-x*l-b*u;return Nl.rotateX(r,e,i),r[4]=M*(h=r[3])+B*(a=r[0])+A*(u=r[2])-O*(l=r[1]),r[5]=A*h+B*l+O*a-M*u,r[6]=O*h+B*u+M*l-A*a,r[7]=B*h-M*a-A*l-O*u,r},wi.rotateY=function(r,e,i){var a=-e[0],l=-e[1],u=-e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=g*h+T*a+x*u-b*l,A=x*h+T*l+b*a-g*u,O=b*h+T*u+g*l-x*a,B=T*h-g*a-x*l-b*u;return Nl.rotateY(r,e,i),r[4]=M*(h=r[3])+B*(a=r[0])+A*(u=r[2])-O*(l=r[1]),r[5]=A*h+B*l+O*a-M*u,r[6]=O*h+B*u+M*l-A*a,r[7]=B*h-M*a-A*l-O*u,r},wi.rotateZ=function(r,e,i){var a=-e[0],l=-e[1],u=-e[2],h=e[3],g=e[4],x=e[5],b=e[6],T=e[7],M=g*h+T*a+x*u-b*l,A=x*h+T*l+b*a-g*u,O=b*h+T*u+g*l-x*a,B=T*h-g*a-x*l-b*u;return Nl.rotateZ(r,e,i),r[4]=M*(h=r[3])+B*(a=r[0])+A*(u=r[2])-O*(l=r[1]),r[5]=A*h+B*l+O*a-M*u,r[6]=O*h+B*u+M*l-A*a,r[7]=B*h-M*a-A*l-O*u,r},wi.rotateByQuatAppend=function(r,e,i){var a=i[0],l=i[1],u=i[2],h=i[3],g=e[0],x=e[1],b=e[2],T=e[3];return r[0]=g*h+T*a+x*u-b*l,r[1]=x*h+T*l+b*a-g*u,r[2]=b*h+T*u+g*l-x*a,r[3]=T*h-g*a-x*l-b*u,r[4]=(g=e[4])*h+(T=e[7])*a+(x=e[5])*u-(b=e[6])*l,r[5]=x*h+T*l+b*a-g*u,r[6]=b*h+T*u+g*l-x*a,r[7]=T*h-g*a-x*l-b*u,r},wi.rotateByQuatPrepend=function(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=i[0],x=i[1],b=i[2],T=i[3];return r[0]=a*T+h*g+l*b-u*x,r[1]=l*T+h*x+u*g-a*b,r[2]=u*T+h*b+a*x-l*g,r[3]=h*T-a*g-l*x-u*b,r[4]=a*(T=i[7])+h*(g=i[4])+l*(b=i[6])-u*(x=i[5]),r[5]=l*T+h*x+u*g-a*b,r[6]=u*T+h*b+a*x-l*g,r[7]=h*T-a*g-l*x-u*b,r},wi.rotateAroundAxis=function(r,e,i,a){if(Math.abs(a)<_l.EPSILON)return $1(r,e);var l=Math.hypot(i[0],i[1],i[2]);a*=.5;var u=Math.sin(a),h=u*i[0]/l,g=u*i[1]/l,x=u*i[2]/l,b=Math.cos(a),T=e[0],M=e[1],A=e[2],O=e[3];r[0]=T*b+O*h+M*x-A*g,r[1]=M*b+O*g+A*h-T*x,r[2]=A*b+O*x+T*g-M*h,r[3]=O*b-T*h-M*g-A*x;var B=e[4],V=e[5],W=e[6],q=e[7];return r[4]=B*b+q*h+V*x-W*g,r[5]=V*b+q*g+W*h-B*x,r[6]=W*b+q*x+B*g-V*h,r[7]=q*b-B*h-V*g-W*x,r},wi.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r[2]=e[2]+i[2],r[3]=e[3]+i[3],r[4]=e[4]+i[4],r[5]=e[5]+i[5],r[6]=e[6]+i[6],r[7]=e[7]+i[7],r},wi.multiply=mv,wi.scale=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r},wi.lerp=function(r,e,i,a){var l=1-a;return lS(e,i)<0&&(a=-a),r[0]=e[0]*l+i[0]*a,r[1]=e[1]*l+i[1]*a,r[2]=e[2]*l+i[2]*a,r[3]=e[3]*l+i[3]*a,r[4]=e[4]*l+i[4]*a,r[5]=e[5]*l+i[5]*a,r[6]=e[6]*l+i[6]*a,r[7]=e[7]*l+i[7]*a,r},wi.invert=function(r,e){var i=Rg(e);return r[0]=-e[0]/i,r[1]=-e[1]/i,r[2]=-e[2]/i,r[3]=e[3]/i,r[4]=-e[4]/i,r[5]=-e[5]/i,r[6]=-e[6]/i,r[7]=e[7]/i,r},wi.conjugate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=e[7],r},wi.normalize=function(r,e){var i=Rg(e);if(i>0){i=Math.sqrt(i);var a=e[0]/i,l=e[1]/i,u=e[2]/i,h=e[3]/i,g=e[4],x=e[5],b=e[6],T=e[7],M=a*g+l*x+u*b+h*T;r[0]=a,r[1]=l,r[2]=u,r[3]=h,r[4]=(g-a*M)/i,r[5]=(x-l*M)/i,r[6]=(b-u*M)/i,r[7]=(T-h*M)/i}return r},wi.str=function(r){return"quat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+")"},wi.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]},wi.equals=function(r,e){var i=r[0],a=r[1],l=r[2],u=r[3],h=r[4],g=r[5],x=r[6],b=r[7],T=e[0],M=e[1],A=e[2],O=e[3],B=e[4],V=e[5],W=e[6],q=e[7];return Math.abs(i-T)<=_l.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(a-M)<=_l.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(l-A)<=_l.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(u-O)<=_l.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(h-B)<=_l.EPSILON*Math.max(1,Math.abs(h),Math.abs(B))&&Math.abs(g-V)<=_l.EPSILON*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(x-W)<=_l.EPSILON*Math.max(1,Math.abs(x),Math.abs(W))&&Math.abs(b-q)<=_l.EPSILON*Math.max(1,Math.abs(b),Math.abs(q))},wi.sqrLen=wi.squaredLength=wi.len=wi.length=wi.dot=wi.mul=wi.setReal=wi.getReal=void 0;var _l=Ag(Ta),Nl=Ag(Nn),ms=Ag(Zn);function yh(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(yh=function(a){return a?i:e})(r)}function Ag(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||D1(r)!=="object"&&typeof r!="function")return{default:r};var i=yh(e);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}function L1(r,e,i){var a=.5*i[0],l=.5*i[1],u=.5*i[2],h=e[0],g=e[1],x=e[2],b=e[3];return r[0]=h,r[1]=g,r[2]=x,r[3]=b,r[4]=a*b+l*x-u*g,r[5]=l*b+u*h-a*x,r[6]=u*b+a*g-l*h,r[7]=-a*h-l*g-u*x,r}function $1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r}function mv(r,e,i){var a=e[0],l=e[1],u=e[2],h=e[3],g=i[4],x=i[5],b=i[6],T=i[7],M=e[4],A=e[5],O=e[6],B=e[7],V=i[0],W=i[1],q=i[2],ne=i[3];return r[0]=a*ne+h*V+l*q-u*W,r[1]=l*ne+h*W+u*V-a*q,r[2]=u*ne+h*q+a*W-l*V,r[3]=h*ne-a*V-l*W-u*q,r[4]=a*T+h*g+l*b-u*x+M*ne+B*V+A*q-O*W,r[5]=l*T+h*x+u*g-a*b+A*ne+B*W+O*V-M*q,r[6]=u*T+h*b+a*x-l*g+O*ne+B*q+M*W-A*V,r[7]=h*T-a*g-l*x-u*b+B*ne-M*V-A*W-O*q,r}wi.getReal=Nl.copy,wi.setReal=Nl.copy,wi.mul=mv;var lS=Nl.dot;wi.dot=lS;var B1=Nl.length;wi.length=B1,wi.len=B1;var Rg=Nl.squaredLength;wi.squaredLength=Rg,wi.sqrLen=Rg;var ti={};function gv(r){return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(r)}Object.defineProperty(ti,"__esModule",{value:!0}),ti.create=F1,ti.clone=function(r){var e=new vh.ARRAY_TYPE(2);return e[0]=r[0],e[1]=r[1],e},ti.fromValues=function(r,e){var i=new vh.ARRAY_TYPE(2);return i[0]=r,i[1]=e,i},ti.copy=function(r,e){return r[0]=e[0],r[1]=e[1],r},ti.set=function(r,e,i){return r[0]=e,r[1]=i,r},ti.add=function(r,e,i){return r[0]=e[0]+i[0],r[1]=e[1]+i[1],r},ti.subtract=jp,ti.multiply=vv,ti.divide=N1,ti.ceil=function(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r},ti.floor=function(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r},ti.min=function(r,e,i){return r[0]=Math.min(e[0],i[0]),r[1]=Math.min(e[1],i[1]),r},ti.max=function(r,e,i){return r[0]=Math.max(e[0],i[0]),r[1]=Math.max(e[1],i[1]),r},ti.round=function(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r},ti.scale=function(r,e,i){return r[0]=e[0]*i,r[1]=e[1]*i,r},ti.scaleAndAdd=function(r,e,i,a){return r[0]=e[0]+i[0]*a,r[1]=e[1]+i[1]*a,r},ti.distance=_v,ti.squaredDistance=kg,ti.length=Vp,ti.squaredLength=xv,ti.negate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r},ti.inverse=function(r,e){return r[0]=1/e[0],r[1]=1/e[1],r},ti.normalize=function(r,e){var i=e[0],a=e[1],l=i*i+a*a;return l>0&&(l=1/Math.sqrt(l)),r[0]=e[0]*l,r[1]=e[1]*l,r},ti.dot=function(r,e){return r[0]*e[0]+r[1]*e[1]},ti.cross=function(r,e,i){var a=e[0]*i[1]-e[1]*i[0];return r[0]=r[1]=0,r[2]=a,r},ti.lerp=function(r,e,i,a){var l=e[0],u=e[1];return r[0]=l+a*(i[0]-l),r[1]=u+a*(i[1]-u),r},ti.random=function(r,e){e=e||1;var i=2*vh.RANDOM()*Math.PI;return r[0]=Math.cos(i)*e,r[1]=Math.sin(i)*e,r},ti.transformMat2=function(r,e,i){var a=e[0],l=e[1];return r[0]=i[0]*a+i[2]*l,r[1]=i[1]*a+i[3]*l,r},ti.transformMat2d=function(r,e,i){var a=e[0],l=e[1];return r[0]=i[0]*a+i[2]*l+i[4],r[1]=i[1]*a+i[3]*l+i[5],r},ti.transformMat3=function(r,e,i){var a=e[0],l=e[1];return r[0]=i[0]*a+i[3]*l+i[6],r[1]=i[1]*a+i[4]*l+i[7],r},ti.transformMat4=function(r,e,i){var a=e[0],l=e[1];return r[0]=i[0]*a+i[4]*l+i[12],r[1]=i[1]*a+i[5]*l+i[13],r},ti.rotate=function(r,e,i,a){var l=e[0]-i[0],u=e[1]-i[1],h=Math.sin(a),g=Math.cos(a);return r[0]=l*g-u*h+i[0],r[1]=l*h+u*g+i[1],r},ti.angle=function(r,e){var i=r[0],a=r[1],l=e[0],u=e[1],h=Math.sqrt(i*i+a*a)*Math.sqrt(l*l+u*u);return Math.acos(Math.min(Math.max(h&&(i*l+a*u)/h,-1),1))},ti.zero=function(r){return r[0]=0,r[1]=0,r},ti.str=function(r){return"vec2("+r[0]+", "+r[1]+")"},ti.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]},ti.equals=function(r,e){var i=r[0],a=r[1],l=e[0],u=e[1];return Math.abs(i-l)<=vh.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=vh.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))},ti.forEach=ti.sqrLen=ti.sqrDist=ti.dist=ti.div=ti.mul=ti.sub=ti.len=void 0;var vh=function(r,e){if(r&&r.__esModule)return r;if(r===null||gv(r)!=="object"&&typeof r!="function")return{default:r};var i=yv(void 0);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}(Ta);function yv(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(yv=function(a){return a?i:e})(r)}function F1(){var r=new vh.ARRAY_TYPE(2);return vh.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function jp(r,e,i){return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r}function vv(r,e,i){return r[0]=e[0]*i[0],r[1]=e[1]*i[1],r}function N1(r,e,i){return r[0]=e[0]/i[0],r[1]=e[1]/i[1],r}function _v(r,e){return Math.hypot(e[0]-r[0],e[1]-r[1])}function kg(r,e){var i=e[0]-r[0],a=e[1]-r[1];return i*i+a*a}function Vp(r){return Math.hypot(r[0],r[1])}function xv(r){var e=r[0],i=r[1];return e*e+i*i}ti.len=Vp,ti.sub=jp,ti.mul=vv,ti.div=N1,ti.dist=_v,ti.sqrDist=kg,ti.sqrLen=xv;var j1=function(){var r=F1();return function(e,i,a,l,u,h){var g,x;for(i||(i=2),a||(a=0),x=l?Math.min(l*i+a,e.length):e.length,g=a;g<x;g+=i)r[0]=e[g],r[1]=e[g+1],u(r,r,h),e[g]=r[0],e[g+1]=r[1];return e}}();function Og(r){return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(r)}ti.forEach=j1,Object.defineProperty(Ea,"__esModule",{value:!0});var Hi=Ea.vec4=ce=Ea.vec3=Ea.vec2=Ea.quat2=de=Ea.quat=U=Ea.mat4=F=Ea.mat3=Ea.mat2d=_=Ea.mat2=Ea.glMatrix=void 0,y=mt(Ta);Ea.glMatrix=y;var f=mt(So),_=Ea.mat2=f,I=mt(go);Ea.mat2d=I;var k=mt(Wi),F=Ea.mat3=k,j=mt(Zn),U=Ea.mat4=j,te=mt(Nn),de=Ea.quat=te,be=mt(wi);Ea.quat2=be;var Ae=mt(ti);Ea.vec2=Ae;var He=mt(Gn),ce=Ea.vec3=He,Je=mt(pi);function ot(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(ot=function(a){return a?i:e})(r)}function mt(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||Og(r)!=="object"&&typeof r!="function")return{default:r};var i=ot(e);if(i&&i.has(r))return i.get(r);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var h=l?Object.getOwnPropertyDescriptor(r,u):null;h&&(h.get||h.set)?Object.defineProperty(a,u,h):a[u]=r[u]}return a.default=r,i&&i.set(r,a),a}Hi=Ea.vec4=Je;const wt=ki([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:qt}=wt,Bt=ki([{name:"a_pos_3",components:3,type:"Int16"}]);var Kt=ki([{name:"a_pos",type:"Int16",components:2}]),cr={};(function(r,e){(function(i){function a(u,h,g){var x=l(256*u,256*(h=Math.pow(2,g)-h-1),g),b=l(256*(u+1),256*(h+1),g);return x[0]+","+x[1]+","+b[0]+","+b[1]}function l(u,h,g){var x=2*Math.PI*6378137/256/Math.pow(2,g);return[u*x-2*Math.PI*6378137/2,h*x-2*Math.PI*6378137/2]}i.getURL=function(u,h,g,x,b,T){return T=T||{},u+"?"+["bbox="+a(g,x,b),"format="+(T.format||"image/png"),"service="+(T.service||"WMS"),"version="+(T.version||"1.1.1"),"request="+(T.request||"GetMap"),"srs="+(T.srs||"EPSG:3857"),"width="+(T.width||256),"height="+(T.height||256),"layers="+h].join("&")},i.getTileBBox=a,i.getMercCoords=l,Object.defineProperty(i,"__esModule",{value:!0})})(e)})(0,cr);var Tr=cr;class sn{constructor(e,i,a){this.z=e,this.x=i,this.y=a,this.key=ln(0,e,e,i,a)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,i){const a=Tr.getTileBBox(this.x,this.y,this.z),l=function(u,h,g){let x,b="";for(let T=u;T>0;T--)x=1<<T-1,b+=(h&x?1:0)+(g&x?2:0);return b}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",a)}toString(){return`${this.z}/${this.x}/${this.y}`}}class En{constructor(e,i){this.wrap=e,this.canonical=i,this.key=ln(e,i.z,i.z,i.x,i.y)}}class xr{constructor(e,i,a,l,u){this.overscaledZ=e,this.wrap=i,this.canonical=new sn(a,+l,+u),this.key=i===0&&e===a?this.canonical.key:ln(i,e,a,l,u)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const i=this.canonical.z-e;return e>this.canonical.z?new xr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xr(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)}calculateScaledKey(e,i=!0){if(this.overscaledZ===e&&i)return this.key;if(e>this.canonical.z)return ln(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y);{const a=this.canonical.z-e;return ln(this.wrap*+i,e,e,this.canonical.x>>a,this.canonical.y>>a)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const i=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i}children(e){if(this.overscaledZ>=e)return[new xr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const i=this.canonical.z+1,a=2*this.canonical.x,l=2*this.canonical.y;return[new xr(i,this.wrap,i,a,l),new xr(i,this.wrap,i,a+1,l),new xr(i,this.wrap,i,a,l+1),new xr(i,this.wrap,i,a+1,l+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new xr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new xr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new En(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ln(r,e,i,a,l){const u=1<<Math.min(i,22);let h=u*(l%u)+a%u;return r&&i<22&&(h+=u*u*((r<0?-2*r-1:2*r)%(1<<2*(22-i)))),16*(32*h+i)+(e-i)}const nn=[r=>{let e=r.canonical.x-1,i=r.wrap;return e<0&&(e=(1<<r.canonical.z)-1,i--),new xr(r.overscaledZ,i,r.canonical.z,e,r.canonical.y)},r=>{let e=r.canonical.x+1,i=r.wrap;return e===1<<r.canonical.z&&(e=0,i++),new xr(r.overscaledZ,i,r.canonical.z,e,r.canonical.y)},r=>new xr(r.overscaledZ,r.wrap,r.canonical.z,r.canonical.x,(r.canonical.y===0?1<<r.canonical.z:r.canonical.y)-1),r=>new xr(r.overscaledZ,r.wrap,r.canonical.z,r.canonical.x,r.canonical.y===(1<<r.canonical.z)-1?0:r.canonical.y+1)];rn(sn,"CanonicalTileID"),rn(xr,"OverscaledTileID",{omit:["projMatrix"]});class bn{constructor(e,i){this.pos=e,this.dir=i}intersectsPlane(e,i,a){const l=ce.dot(i,this.dir);if(Math.abs(l)<1e-6)return!1;const u=((e[0]-this.pos[0])*i[0]+(e[1]-this.pos[1])*i[1]+(e[2]-this.pos[2])*i[2])/l;return a[0]=this.pos[0]+this.dir[0]*u,a[1]=this.pos[1]+this.dir[1]*u,a[2]=this.pos[2]+this.dir[2]*u,!0}closestPointOnSphere(e,i,a){if(ce.equals(this.pos,e)||i===0)return a[0]=a[1]=a[2]=0,!1;const[l,u,h]=this.dir,g=this.pos[0]-e[0],x=this.pos[1]-e[1],b=this.pos[2]-e[2],T=l*l+u*u+h*h,M=2*(g*l+x*u+b*h),A=M*M-4*T*(g*g+x*x+b*b-i*i);if(A<0){const O=Math.max(-M/2,0),B=g+l*O,V=x+u*O,W=b+h*O,q=Math.hypot(B,V,W);return a[0]=B*i/q,a[1]=V*i/q,a[2]=W*i/q,!1}{const O=(-M-Math.sqrt(A))/(2*T);if(O<0){const B=Math.hypot(g,x,b);return a[0]=g*i/B,a[1]=x*i/B,a[2]=b*i/B,!1}return a[0]=g+l*O,a[1]=x+u*O,a[2]=b+h*O,!0}}}class on{constructor(e,i,a,l,u){this.TL=e,this.TR=i,this.BR=a,this.BL=l,this.horizon=u}static fromInvProjectionMatrix(e,i,a){const l=[-1,1,1],u=[1,1,1],h=[1,-1,1],g=[-1,-1,1],x=ce.transformMat4(l,l,e),b=ce.transformMat4(u,u,e),T=ce.transformMat4(h,h,e),M=ce.transformMat4(g,g,e);return new on(x,b,T,M,i/a)}}function Dr(r,e,i){let a=1/0,l=-1/0;const u=[];for(const h of r){ce.sub(u,h,e);const g=ce.dot(u,i);a=Math.min(a,g),l=Math.max(l,g)}return[a,l]}function $n(r,e){let i=!0;for(let a=0;a<r.planes.length;a++){const l=r.planes[a];let u=0;for(let h=0;h<e.length;h++)u+=ce.dot(l,e[h])+l[3]>=0;if(u===0)return 0;u!==e.length&&(i=!1)}return i?2:1}function Rn(r,e){for(const i of r.projections){const a=Dr(e,r.points[0],i.axis);if(i.projection[1]<a[0]||i.projection[0]>a[1])return 0}return 1}function Pi(r,e){let i=0;const a=[0,0,0,0];for(let l=0;l<r.length;l++)a[0]=r[l][0],a[1]=r[l][1],a[2]=r[l][2],a[3]=1,Hi.dot(a,e)>=0&&i++;return i}class to{constructor(e,i){this.points=e||new Array(8).fill([0,0,0]),this.planes=i||new Array(6).fill([0,0,0,0]),this.bounds=Xn.fromPoints(this.points),this.projections=[],this.frustumEdges=[ce.sub([],this.points[2],this.points[3]),ce.sub([],this.points[0],this.points[3]),ce.sub([],this.points[4],this.points[0]),ce.sub([],this.points[5],this.points[1]),ce.sub([],this.points[6],this.points[2]),ce.sub([],this.points[7],this.points[3])];for(const a of this.frustumEdges){const l=[0,-a[2],a[1]],u=[a[2],0,-a[0]];this.projections.push({axis:l,projection:Dr(this.points,this.points[0],l)}),this.projections.push({axis:u,projection:Dr(this.points,this.points[0],u)})}}static fromInvProjectionMatrix(e,i,a,l){const u=Math.pow(2,a),h=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(b=>{const T=Hi.transformMat4([],b,e),M=1/T[3]/i*u;return Hi.mul(T,T,[M,M,l?1/T[3]:M,M])}),g=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(b=>{const T=ce.sub([],h[b[0]],h[b[1]]),M=ce.sub([],h[b[2]],h[b[1]]),A=ce.normalize([],ce.cross([],T,M)),O=-ce.dot(A,h[b[1]]);return A.concat(O)}),x=[];for(let b=0;b<h.length;b++)x.push([h[b][0],h[b][1],h[b][2]]);return new to(x,g)}intersectsPrecise(e,i,a){for(let l=0;l<i.length;l++)if(!Pi(e,i[l]))return 0;for(let l=0;l<this.planes.length;l++)if(!Pi(e,this.planes[l]))return 0;for(const l of a)for(const u of this.frustumEdges){const h=ce.cross([],l,u),g=ce.length(h);if(g===0)continue;ce.scale(h,h,1/g);const x=Dr(this.points,this.points[0],h),b=Dr(e,this.points[0],h);if(x[0]>b[1]||b[0]>x[1])return 0}return 1}}class Xn{static fromPoints(e){const i=[1/0,1/0,1/0],a=[-1/0,-1/0,-1/0];for(const l of e)ce.min(i,i,l),ce.max(a,a,l);return new Xn(i,a)}static fromTileIdAndHeight(e,i,a){const l=1<<e.canonical.z,u=e.canonical.x,h=e.canonical.y;return new Xn([u/l,h/l,i],[(u+1)/l,(h+1)/l,a])}static applyTransform(e,i){const a=e.getCorners();for(let l=0;l<a.length;++l)ce.transformMat4(a[l],a[l],i);return Xn.fromPoints(a)}static projectAabbCorners(e,i){const a=e.getCorners();for(let l=0;l<a.length;++l)ce.transformMat4(a[l],a[l],i);return a}constructor(e,i){this.min=e,this.max=i,this.center=ce.scale([],ce.add([],this.min,this.max),.5)}quadrant(e){const i=[e%2==0,e<2],a=ce.clone(this.min),l=ce.clone(this.max);for(let u=0;u<i.length;u++)a[u]=i[u]?this.min[u]:this.center[u],l[u]=i[u]?this.center[u]:this.max[u];return l[2]=this.max[2],new Xn(a,l)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,i=this.max;return[[e[0],e[1],e[2]],[i[0],e[1],e[2]],[i[0],i[1],e[2]],[e[0],i[1],e[2]],[e[0],e[1],i[2]],[i[0],e[1],i[2]],[i[0],i[1],i[2]],[e[0],i[1],i[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?$n(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?$n(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,i){return i||this.intersects(e)?Rn(e,this.getCorners()):0}intersectsPreciseFlat(e,i){return i||this.intersectsFlat(e)?Rn(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let i=0;i<3;++i)if(this.min[i]>e.max[i]||e.min[i]>this.max[i])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let i=0;i<3;i++)this.min[i]=Math.min(this.min[i],e.min[i]),this.max[i]=Math.max(this.max[i],e.max[i])}encapsulatePoint(e){for(let i=0;i<3;i++)this.min[i]=Math.min(this.min[i],e[i]),this.max[i]=Math.max(this.max[i],e[i])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}rn(Xn,"Aabb");const ca=5,Ya=6,Co=Zt/Math.PI/2,Ba=16383,ga=64,hs=[ga,32,16],Yo=-Co,Jo=Co,Ja=[new Xn([Yo,Yo,Yo],[Jo,Jo,Jo]),new Xn([Yo,Yo,Yo],[0,0,Jo]),new Xn([0,Yo,Yo],[Jo,0,Jo]),new Xn([Yo,0,Yo],[0,Jo,Jo]),new Xn([0,0,Yo],[Jo,Jo,Jo])];function ya(r){return r*Co/Hp}function Ms(r,e,i,a=!0){const l=ce.scale([],r._camera.position,r.worldSize),u=[e,i,1,1];Hi.transformMat4(u,u,r.pixelMatrixInverse),Hi.scale(u,u,1/u[3]);const h=ce.sub([],u,l),g=ce.normalize([],h),x=r.globeMatrix,b=[x[12],x[13],x[14]],T=ce.sub([],b,l),M=ce.length(T),A=ce.normalize([],T),O=r.worldSize/(2*Math.PI),B=ce.dot(A,g),V=Math.asin(O/M);if(V<Math.acos(B)){if(!a)return null;const tt=[],Ze=[];ce.scale(tt,g,M/B),ce.normalize(Ze,ce.sub(Ze,tt,T)),ce.normalize(g,ce.add(g,T,ce.scale(g,Ze,Math.tan(V)*M)))}const W=[];new bn(l,g).closestPointOnSphere(b,O,W);const q=ce.normalize([],yr(x,0)),ne=ce.normalize([],yr(x,1)),ae=ce.normalize([],yr(x,2)),le=ce.dot(q,W),ie=ce.dot(ne,W),ue=ce.dot(ae,W),Ee=Fe(Math.asin(-ie/O));let Be=Fe(Math.atan2(le,ue));Be=r.center.lng+function(tt,Ze){const nt=(Ze-tt+180)%360-180;return nt<-180?nt+360:nt}(r.center.lng,Be);const je=ro(Be),Ge=Qe(Eo(Ee),0,1);return new Si(je,Ge)}class il{constructor(e,i,a){this.a=ce.sub([],e,a),this.b=ce.sub([],i,a),this.center=a;const l=ce.normalize([],this.a),u=ce.normalize([],this.b);this.angle=Math.acos(ce.dot(l,u))}}function gs(r,e){if(r.angle===0)return null;let i;return i=r.a[e]===0?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[e]/r.a[e]/Math.sin(r.angle)-1/Math.tan(r.angle)),i<0||i>1?null:function(a,l,u,h){const g=Math.sin(u);return a*(Math.sin((1-h)*u)/g)+l*(Math.sin(h*u)/g)}(r.a[e],r.b[e],r.angle,Qe(i,0,1))+r.center[e]}function ia(r){if(r.z<=1)return Ja[r.z+2*r.y+r.x];const e=Ma(Qa(r));return Xn.fromPoints(e)}function Ia(r,e,i){return ce.scale(r,r,1-i),ce.scaleAndAdd(r,r,e,i)}function Fa(r,e){const i=Na(e.zoom);if(i===0)return ia(r);const a=Qa(r),l=Ma(a),u=ro(a.getWest())*e.worldSize,h=ro(a.getEast())*e.worldSize,g=Eo(a.getNorth())*e.worldSize,x=Eo(a.getSouth())*e.worldSize,b=[u,g,0],T=[h,g,0],M=[u,x,0],A=[h,x,0],O=U.invert([],e.globeMatrix);return ce.transformMat4(b,b,O),ce.transformMat4(T,T,O),ce.transformMat4(M,M,O),ce.transformMat4(A,A,O),l[0]=Ia(l[0],M,i),l[1]=Ia(l[1],A,i),l[2]=Ia(l[2],T,i),l[3]=Ia(l[3],b,i),Xn.fromPoints(l)}function Fi(r,e,i){for(const a of r)ce.transformMat4(a,a,e),ce.scale(a,a,i)}function ys(r,e,i,a){const l=e/r.worldSize,u=r.globeMatrix;if(i.z<=1){const je=ia(i).getCorners();return Fi(je,u,l),Xn.fromPoints(je)}const h=Qa(i,a),g=Ma(h);Fi(g,u,l);const x=Number.MAX_VALUE,b=[-x,-x,-x],T=[x,x,x];if(h.contains(r.center)){for(const tt of g)ce.min(T,T,tt),ce.max(b,b,tt);b[2]=0;const je=r.point,Ge=[je.x*l,je.y*l,0];return ce.min(T,T,Ge),ce.max(b,b,Ge),new Xn(T,b)}const M=[u[12]*l,u[13]*l,u[14]*l],A=h.getCenter(),O=Qe(r.center.lat,-ha,ha),B=Qe(A.lat,-ha,ha),V=ro(r.center.lng),W=Eo(O);let q=V-ro(A.lng);const ne=W-Eo(B);q>.5?q-=1:q<-.5&&(q+=1);let ae=0;if(Math.abs(q)>Math.abs(ne))ae=q>=0?1:3;else{ae=ne>=0?0:2;const je=[u[4]*l,u[5]*l,u[6]*l],Ge=-Math.sin(_e(ne>=0?h.getSouth():h.getNorth()))*Co;ce.scaleAndAdd(M,M,je,Ge)}const le=g[ae],ie=g[(ae+1)%4],ue=new il(le,ie,M),Ee=[gs(ue,0)||le[0],gs(ue,1)||le[1],gs(ue,2)||le[2]],Be=Na(r.zoom);if(Be>0){const je=function({x:tt,y:Ze,z:nt},Xe,ut,bt,At){const lt=1/(1<<nt);let ft=tt*lt,Ft=ft+lt,Jt=Ze*lt,tr=Jt+lt,lr=0;const pr=(ft+Ft)/2-bt;return pr>.5?lr=-1:pr<-.5&&(lr=1),ft=((ft+lr)*Xe-(bt*=Xe))*ut+bt,Ft=((Ft+lr)*Xe-bt)*ut+bt,Jt=(Jt*Xe-(At*=Xe))*ut+At,tr=(tr*Xe-At)*ut+At,[[ft,tr,0],[Ft,tr,0],[Ft,Jt,0],[ft,Jt,0]]}(i,e,r._pixelsPerMercatorPixel,V,W);for(let tt=0;tt<g.length;tt++)Ia(g[tt],je[tt],Be);const Ge=ce.add([],je[ae],je[(ae+1)%4]);ce.scale(Ge,Ge,.5),Ia(Ee,Ge,Be)}for(const je of g)ce.min(T,T,je),ce.max(b,b,je);return T[2]=Math.min(le[2],ie[2]),ce.min(T,T,Ee),ce.max(b,b,Ee),new Xn(T,b)}function Qa({x:r,y:e,z:i},a=!1){const l=1/(1<<i),u=new zn(va(r*l),e===(1<<i)-1&&a?-90:Ro((e+1)*l)),h=new zn(va((r+1)*l),e===0&&a?90:Ro(e*l));return new Dl(u,h)}function Ma(r){const e=_e(r.getNorth()),i=_e(r.getSouth()),a=Math.cos(e),l=Math.cos(i),u=Math.sin(e),h=Math.sin(i),g=r.getWest(),x=r.getEast();return[Vs(l,h,g),Vs(l,h,x),Vs(a,u,x),Vs(a,u,g)]}function Vs(r,e,i,a=Co){return i=_e(i),[r*Math.sin(i)*a,-e*a,r*Math.cos(i)*a]}function ua(r,e,i){return Vs(Math.cos(_e(r)),Math.sin(_e(r)),e,i)}function xl(r,e,i,a){const l=1<<i.z,u=(r/Zt+i.x)/l;return ua(Ro((e/Zt+i.y)/l),va(u),a)}function Tc({min:r,max:e}){return Ba/Math.max(e[0]-r[0],e[1]-r[1],e[2]-r[2])}const ic=new Float64Array(16);function vs(r){const e=Tc(r),i=U.fromScaling(ic,[e,e,e]);return U.translate(i,i,ce.negate([],r.min))}function Us(r){const e=U.fromTranslation(ic,r.min),i=1/Tc(r);return U.scale(e,e,[i,i,i])}function nu(r){const e=Zt/(2*Math.PI);return r/(2*Math.PI)/e}function Up(r,e){return Zt/(512*Math.pow(2,r))*Tc(ia(e))}function V1(r,e,i,a,l){const u=nu(i),h=[r,e,-i/(2*Math.PI)],g=U.identity(new Float64Array(16));return U.translate(g,g,h),U.scale(g,g,[u,u,u]),U.rotateX(g,g,_e(-l)),U.rotateY(g,g,_e(-a)),g}function Na(r){return St(ca,Ya,r)}function bv(r,e,i){const a=U.identity(new Float64Array(16)),l=(e/(1<<r)-.5)*Math.PI*2;return U.rotateY(a,i.globeMatrix,l),Float32Array.from(a)}function Nu(r,e,i){const a=Na(i.zoom),l=r.style.map._antialias,u=e.extStandardDerivativesForceOff||r.terrain&&r.terrain.exaggeration()>0;return a===0&&!l&&!u}function cS(r,e,i,a){const l=e.getNorth(),u=e.getSouth(),h=e.getWest(),g=e.getEast(),x=1<<r.z,b=g-h,T=l-u,M=b/ga,A=-T/hs[i],O=[0,M,0,A,0,0,l,h,0];if(r.z>0){const B=180/a;F.multiply(O,O,[B/b+1,0,0,0,B/T+1,0,-.5*B/M,.5*B/A,1])}return O[2]=x,O[5]=r.x,O[8]=r.y,O}function uS(r){const e=ha-5;r=Qe(r,-e,e)/e*90;const i=Math.pow(Math.abs(Math.sin(_e(r))),3);return Math.round(i*(hs.length-1))}function hS(r){const e=[0,0,0],i=U.identity(new Float64Array(16));return U.multiply(i,r.pixelMatrix,r.globeMatrix),ce.transformMat4(e,e,i),new oe(e[0],e[1])}function dS(r,e){const i=ua(e.lat,e.lng),a=function(u){const h=ua(u._center.lat,u._center.lng),g=ce.fromValues(0,1,0);let x=ce.cross([],g,h);const b=U.fromRotation([],-u.angle,h);x=ce.transformMat4(x,x,b),U.fromRotation(b,-u._pitch,x);const T=ce.normalize([],h);return ce.scale(T,T,ya(u.cameraToCenterDistance/u.pixelsPerMeter)),ce.transformMat4(T,T,b),ce.add([],h,T)}(r),l=ce.subtract([],a,i);return ce.angle(l,i)}function wv(r,e){return dS(r,e)>Math.PI/2*1.01}const fS=_e(85),VM=Math.cos(fS),UM=Math.sin(fS);class HM{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy()}_fillGridMeshWithLods(e,i){const a=new gl,l=new Ca,u=[],h=e+1+2,g=i[0]+1,x=i[0]+1+(1+i.length),b=(T,M,A)=>{let O=T===h-1?T-2:T===0?T:T-1;return O+=A?24575:0,[O,M]};for(let T=0;T<h;++T)a.emplaceBack(...b(T,0,!0));for(let T=0;T<g;++T)for(let M=0;M<h;++M)a.emplaceBack(...b(M,T,(M===0||M===h-1)&&!0));for(let T=0;T<i.length;++T){const M=i[T];for(let A=0;A<h;++A)a.emplaceBack(...b(A,M,!0))}for(let T=0;T<i.length;++T){const M=l.length,A=i[T]+1+2,O=new Ca;for(let W=0;W<A-1;W++){const q=W===A-2,ne=q?h*(x-i.length+T-W):h;for(let ae=0;ae<h-1;ae++){const le=W*h+ae;W===0||q||ae===0||ae===h-2?(O.emplaceBack(le+1,le,le+ne),O.emplaceBack(le+ne,le+ne+1,le+1)):(l.emplaceBack(le+1,le,le+ne),l.emplaceBack(le+ne,le+ne+1,le+1))}}const B=qi.simpleSegment(0,M,a.length,l.length-M);for(let W=0;W<O.uint16.length;W+=3)l.emplaceBack(O.uint16[W],O.uint16[W+1],O.uint16[W+2]);const V=qi.simpleSegment(0,M,a.length,l.length-M);u.push({withoutSkirts:B,withSkirts:V})}return{vertices:a,indices:l,segments:u}}_createGrid(e){const i=this._fillGridMeshWithLods(ga,hs);this._gridSegments=i.segments,this._gridBuffer=e.createVertexBuffer(i.vertices,Kt.members),this._gridIndexBuffer=e.createIndexBuffer(i.indices,!0)}_createPoles(e){const i=new Ca;for(let g=0;g<=ga;g++)i.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=e.createIndexBuffer(i,!0);const a=new ff,l=new ff,u=new ff,h=new ff;this._poleSegments=[];for(let g=0,x=0;g<ca;g++){const b=360/(1<<g);a.emplaceBack(0,-Co,0,.5,0),l.emplaceBack(0,-Co,0,.5,1),u.emplaceBack(0,-Co,0,.5,.5),h.emplaceBack(0,-Co,0,.5,.5);for(let T=0;T<=ga;T++){let M=T/ga,A=0;const O=Mn(0,b,M),[B,V,W]=Vs(VM,UM,O,Co);a.emplaceBack(B,V,W,M,A),l.emplaceBack(B,V,W,M,1-A);const q=_e(O);M=.5+.5*Math.sin(q),A=.5+.5*Math.cos(q),u.emplaceBack(B,V,W,M,A),h.emplaceBack(B,V,W,M,1-A)}this._poleSegments.push(qi.simpleSegment(x,0,66,64)),x+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(a,qt,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(l,qt,!1),this._texturedPoleNorthVertexBuffer=e.createVertexBuffer(u,qt,!1),this._texturedPoleSouthVertexBuffer=e.createVertexBuffer(h,qt,!1)}getGridBuffers(e,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e,i){return[i?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,i?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}}const Hp=63710088e-1,oc=2*Math.PI*Hp;class iu{constructor(e,i){if(isNaN(e)||isNaN(i))throw new Error(`Invalid LngLat object: (${e}, ${i})`);if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new iu(jt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const i=Math.PI/180,a=this.lat*i,l=e.lat*i,u=Math.sin(a)*Math.sin(l)+Math.cos(a)*Math.cos(l)*Math.cos((e.lng-this.lng)*i);return Hp*Math.acos(Math.min(u,1))}toBounds(e=0){const i=360*e/40075017,a=i/Math.cos(Math.PI/180*this.lat);return new Dl(new iu(this.lng-a,this.lat-i),new iu(this.lng+a,this.lat+i))}toEcef(e){const i=ya(e);return ua(this.lat,this.lng,Co+i)}static convert(e){if(e instanceof iu)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new iu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new iu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var zn=iu;const GM=0,qM=25.5;function Sv(r){return oc*Math.cos(r*Math.PI/180)}function ro(r){return(180+r)/360}function Eo(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Oi(r,e){return r/Sv(e)}function va(r){return 360*r-180}function Ro(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function ou(r,e){return r*Sv(Ro(e))}const ha=85.051129;function iD(r){return Math.cos(_e(Qe(r,-ha,ha)))}function Gp(r,e){const i=Qe(e,GM,qM),a=Math.pow(2,i);return iD(r)*oc/(512*a)}function WM(r){return 1/Math.cos(r*Math.PI/180)}function U1(r,e=0){const i=Math.exp(Math.PI*(1-(r.y+e/Zt)/(1<<r.z)*2));return 80150034*i/(i*i+1)/Zt/(1<<r.z)}class Si{constructor(e,i,a=0){this.x=+e,this.y=+i,this.z=+a}static fromLngLat(e,i=0){const a=zn.convert(e);return new Si(ro(a.lng),Eo(a.lat),Oi(i,a.lat))}toLngLat(){return new zn(va(this.x),Ro(this.y))}toAltitude(){return ou(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/oc*WM(Ro(this.y))}}function KM(r,e,i,a,l,u,h,g,x){const b=(e+a)/2,T=(i+l)/2,M=new oe(b,T);g(M),function(A,O,B,V,W,q){const ne=B-W,ae=V-q;return Math.abs((V-O)*ne-(B-A)*ae)/Math.hypot(ne,ae)}(M.x,M.y,u.x,u.y,h.x,h.y)>=x?(KM(r,e,i,b,T,u,M,g,x),KM(r,b,T,a,l,M,h,g,x)):r.push(h)}function oD(r,e,i){let a=r[0],l=a.x,u=a.y;e(a);const h=[a];for(let g=1;g<r.length;g++){const x=r[g],{x:b,y:T}=x;e(x),KM(h,l,u,b,T,a,x,e,i),l=b,u=T,a=x}return h}function ZM(r,e,i,a){if(a(e,i)){const l=e.add(i)._mult(.5);ZM(r,e,l,a),ZM(r,l,i,a)}else r.push(i)}function fZ(r,e){let i=r[0];const a=[i];for(let l=1;l<r.length;l++){const u=r[l];ZM(a,i,u,e),i=u}return a}const XM=Math.pow(2,14)-1,aD=-XM-1;function pZ(r,e){const i=Math.round(r.x*e),a=Math.round(r.y*e);return r.x=Qe(i,aD,XM),r.y=Qe(a,aD,XM),(i<r.x||i>r.x+1||a<r.y||a>r.y+1)&&ve("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function xd(r,e,i){const a=r.loadGeometry(),l=r.extent,u=Zt/l;if(e&&i&&i.projection.isReprojectedInTileSpace){const h=1<<e.z,{scale:g,x,y:b,projection:T}=i,M=A=>{const O=va((e.x+A.x/l)/h),B=Ro((e.y+A.y/l)/h),V=T.project(O,B);A.x=(V.x*g-x)*l,A.y=(V.y*g-b)*l};for(let A=0;A<a.length;A++)if(r.type!==1)a[A]=oD(a[A],M,1);else{const O=[];for(const B of a[A])B.x<0||B.x>=l||B.y<0||B.y>=l||(M(B),O.push(B));a[A]=O}}for(const h of a)for(const g of h)pZ(g,u);return a}function qp(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?xd(r):[]}}function pS(r,e,i,a,l){r.emplaceBack(2*e+(a+1)/2,2*i+(l+1)/2)}function mS(r,e,i){r.emplaceBack(e.x,e.y,e.z,i[0]*16384,i[1]*16384,i[2]*16384)}class YM{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new gl,this.indexArray=new Ca,this.segments=new qi,this.programConfigurations=new yd(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(e,i,a,l){const u=this.layers[0],h=[];let g=null;u.type==="circle"&&(g=u.layout.get("circle-sort-key"));for(const{feature:b,id:T,index:M,sourceLayerIndex:A}of e){const O=this.layers[0]._featureFilter.needGeometry,B=qp(b,O);if(!this.layers[0]._featureFilter.filter(new uo(this.zoom),B,a))continue;const V=g?g.evaluate(B,{},a):void 0,W={id:T,properties:b.properties,type:b.type,sourceLayerIndex:A,index:M,geometry:O?B.geometry:xd(b,a,l),patterns:{},sortKey:V};h.push(W)}g&&h.sort((b,T)=>b.sortKey-T.sortKey);let x=null;l.projection.name==="globe"&&(this.globeExtVertexArray=new Rp,x=l.projection);for(const b of h){const{geometry:T,index:M,sourceLayerIndex:A}=b,O=e[M].feature;this.addFeature(b,T,M,i.availableImages,a,x,i.brightness),i.featureIndex.insert(O,T,M,A,this.index)}}update(e,i,a,l,u){const h=Object.keys(e).length!==0;h&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,i,h?this.stateDependentLayers:this.layers,a,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,OM.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,zM.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,i,a,l,u,h,g){for(const x of i)for(const b of x){const T=b.x,M=b.y;if(T<0||T>=Zt||M<0||M>=Zt)continue;if(h){const B=h.projectTilePoint(T,M,u),V=h.upVector(u,T,M),W=this.globeExtVertexArray;mS(W,B,V),mS(W,B,V),mS(W,B,V),mS(W,B,V)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),O=A.vertexLength;pS(this.layoutVertexArray,T,M,-1,-1),pS(this.layoutVertexArray,T,M,1,-1),pS(this.layoutVertexArray,T,M,1,1),pS(this.layoutVertexArray,T,M,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,{},l,u,g)}}function sD(r,e){for(let i=0;i<r.length;i++)if(Wp(e,r[i]))return!0;for(let i=0;i<e.length;i++)if(Wp(r,e[i]))return!0;return!!JM(r,e)}function mZ(r,e,i){return!!Wp(r,e)||!!QM(e,r,i)}function lD(r,e){if(r.length===1)return uD(e,r[0]);for(let i=0;i<e.length;i++){const a=e[i];for(let l=0;l<a.length;l++)if(Wp(r,a[l]))return!0}for(let i=0;i<r.length;i++)if(uD(e,r[i]))return!0;for(let i=0;i<e.length;i++)if(JM(r,e[i]))return!0;return!1}function gZ(r,e,i){if(r.length>1){if(JM(r,e))return!0;for(let a=0;a<e.length;a++)if(QM(e[a],r,i))return!0}for(let a=0;a<r.length;a++)if(QM(r[a],e,i))return!0;return!1}function JM(r,e){if(r.length===0||e.length===0)return!1;for(let i=0;i<r.length-1;i++){const a=r[i],l=r[i+1];for(let u=0;u<e.length-1;u++)if(yZ(a,l,e[u],e[u+1]))return!0}return!1}function yZ(r,e,i,a){return pt(r,i,a)!==pt(e,i,a)&&pt(r,e,i)!==pt(r,e,a)}function QM(r,e,i){const a=i*i;if(e.length===1)return r.distSqr(e[0])<a;for(let l=1;l<e.length;l++)if(cD(r,e[l-1],e[l])<a)return!0;return!1}function cD(r,e,i){const a=e.distSqr(i);if(a===0)return r.distSqr(e);const l=((r.x-e.x)*(i.x-e.x)+(r.y-e.y)*(i.y-e.y))/a;return r.distSqr(l<0?e:l>1?i:i.sub(e)._mult(l)._add(e))}function uD(r,e){let i,a,l,u=!1;for(let h=0;h<r.length;h++){i=r[h];for(let g=0,x=i.length-1;g<i.length;x=g++)a=i[g],l=i[x],a.y>e.y!=l.y>e.y&&e.x<(l.x-a.x)*(e.y-a.y)/(l.y-a.y)+a.x&&(u=!u)}return u}function Wp(r,e){let i=!1;for(let a=0,l=r.length-1;a<r.length;l=a++){const u=r[a],h=r[l];u.y>e.y!=h.y>e.y&&e.x<(h.x-u.x)*(e.y-u.y)/(h.y-u.y)+u.x&&(i=!i)}return i}function hD(r,e,i,a,l){for(const h of r)if(e<=h.x&&i<=h.y&&a>=h.x&&l>=h.y)return!0;const u=[new oe(e,i),new oe(e,l),new oe(a,l),new oe(a,i)];if(r.length>2){for(const h of u)if(Wp(r,h))return!0}for(let h=0;h<r.length-1;h++)if(vZ(r[h],r[h+1],u))return!0;return!1}function vZ(r,e,i){const a=i[0],l=i[2];if(r.x<a.x&&e.x<a.x||r.x>l.x&&e.x>l.x||r.y<a.y&&e.y<a.y||r.y>l.y&&e.y>l.y)return!1;const u=pt(r,e,i[0]);return u!==pt(r,e,i[1])||u!==pt(r,e,i[2])||u!==pt(r,e,i[3])}function Cv(r,e,i,a,l,u){let h=e.y-r.y,g=r.x-e.x;if(u=u||0){const x=h*h+g*g;if(x===0)return!0;const b=Math.sqrt(x);h/=b,g/=b}return!((i.x-r.x)*h+(i.y-r.y)*g-u<0||(a.x-r.x)*h+(a.y-r.y)*g-u<0||(l.x-r.x)*h+(l.y-r.y)*g-u<0)}function e3(r,e,i,a,l,u,h){return!(Cv(r,e,a,l,u,h)||Cv(e,i,a,l,u,h)||Cv(i,r,a,l,u,h)||Cv(a,l,r,e,i,h)||Cv(l,u,r,e,i,h)||Cv(u,a,r,e,i,h))}function Ev(r,e,i){const a=e.paint.get(r).value;return a.kind==="constant"?a.value:i.programConfigurations.get(e.id).getMaxValue(r)}function gS(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function dD(r,e,i,a,l){if(!e[0]&&!e[1])return r;const u=oe.convert(e)._mult(l);i==="viewport"&&u._rotate(-a);const h=[];for(let g=0;g<r.length;g++)h.push(r[g].sub(u));return h}function fD(r,e,i,a){const l=oe.convert(r)._mult(a);return e==="viewport"&&l._rotate(-i),l}rn(YM,"CircleBucket",{omit:["layers"]});const _Z=new vi({"circle-sort-key":new gn(Lt.layout_circle["circle-sort-key"]),visibility:new Ir(Lt.layout_circle.visibility)});var xZ={paint:new vi({"circle-radius":new gn(Lt.paint_circle["circle-radius"]),"circle-color":new gn(Lt.paint_circle["circle-color"]),"circle-blur":new gn(Lt.paint_circle["circle-blur"]),"circle-opacity":new gn(Lt.paint_circle["circle-opacity"]),"circle-translate":new Ir(Lt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ir(Lt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ir(Lt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ir(Lt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gn(Lt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gn(Lt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gn(Lt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ir(Lt.paint_circle["circle-emissive-strength"])}),layout:_Z};const bZ=U.create(),wZ=(r,e,i,a,l,u)=>{const h=r.transform,g=h.projection.name==="globe";let x;if(u.paint.get("circle-pitch-alignment")==="map")if(g){const T=Up(h.zoom,e.canonical)*h._pixelsPerMercatorPixel;x=Float32Array.from([T,0,0,T])}else x=h.calculatePixelsToTileUnitsMatrix(i);else x=new Float32Array([h.pixelsToGLUnits[0],0,0,h.pixelsToGLUnits[1]]);const b={u_camera_to_center_distance:r.transform.getCameraToCenterDistance(h.projection),u_matrix:r.translatePosMatrix(e.projMatrix,i,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Qr.devicePixelRatio,u_extrude_scale:x,u_inv_rot_matrix:bZ,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:u.paint.get("circle-emissive-strength")};if(g){b.u_inv_rot_matrix=a,b.u_merc_center=l,b.u_tile_id=[e.canonical.x,e.canonical.y,1<<e.canonical.z],b.u_zoom_transition=Na(h.zoom);const T=l[0]*Zt,M=l[1]*Zt;b.u_up_dir=h.projection.upVector(new sn(0,0,0),T,M)}return b},pD=r=>{const e=[];return r.paint.get("circle-pitch-alignment")==="map"&&e.push("PITCH_WITH_MAP"),r.paint.get("circle-pitch-scale")==="map"&&e.push("SCALE_WITH_MAP"),e};function mD(r,e,i,a,l,u,h,g,x){if(u&&r.queryGeometry.isAboveHorizon)return!1;u&&(x*=r.pixelToTileUnitsFactor);const b=r.tileID.canonical,T=i.projection.upVectorScale(b,i.center.lat,i.worldSize).metersToTile;for(const M of e)for(const A of M){const O=A.add(g),B=l&&i.elevation?i.elevation.exaggeration()*l.getElevationAt(O.x,O.y,!0):0,V=i.projection.projectTilePoint(O.x,O.y,b);if(B>0){const ae=i.projection.upVector(b,O.x,O.y);V.x+=ae[0]*T*B,V.y+=ae[1]*T*B,V.z+=ae[2]*T*B}const W=u?O:SZ(V.x,V.y,V.z,a),q=u?r.tilespaceRays.map(ae=>EZ(ae,B)):r.queryGeometry.screenGeometry,ne=Hi.transformMat4([],[V.x,V.y,V.z,1],a);if(!h&&u?x*=ne[3]/i.cameraToCenterDistance:h&&!u&&(x*=i.cameraToCenterDistance/ne[3]),u){const ae=Ro((A.y/Zt+b.y)/(1<<b.z));x/=i.projection.pixelsPerMeter(ae,1)/Oi(1,ae)}if(mZ(q,W,x))return!0}return!1}function SZ(r,e,i,a){const l=Hi.transformMat4([],[r,e,i,1],a);return new oe(l[0]/l[3],l[1]/l[3])}const gD=ce.fromValues(0,0,0),CZ=ce.fromValues(0,0,1);function EZ(r,e){const i=ce.create();return gD[2]=e,r.intersectsPlane(gD,CZ,i),new oe(i[0],i[1])}class yD extends YM{}function vD(r,{width:e,height:i},a,l){if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==e*i*a)throw new RangeError("mismatched image size")}else l=new Uint8Array(e*i*a);return r.width=e,r.height=i,r.data=l,r}function _D(r,e,i){const{width:a,height:l}=e;a===r.width&&l===r.height||(t3(r,e,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,a),height:Math.min(r.height,l)},i),r.width=a,r.height=l,r.data=e.data)}function t3(r,e,i,a,l,u){if(l.width===0||l.height===0)return e;if(l.width>r.width||l.height>r.height||i.x>r.width-l.width||i.y>r.height-l.height)throw new RangeError("out of range source coordinates for image copy");if(l.width>e.width||l.height>e.height||a.x>e.width-l.width||a.y>e.height-l.height)throw new RangeError("out of range destination coordinates for image copy");const h=r.data,g=e.data;for(let x=0;x<l.height;x++){const b=((i.y+x)*r.width+i.x)*u,T=((a.y+x)*e.width+a.x)*u;for(let M=0;M<l.width*u;M++)g[T+M]=h[b+M]}return e}rn(yD,"HeatmapBucket",{omit:["layers"]});class xf{constructor(e,i){vD(this,e,1,i)}resize(e){_D(this,new xf(e),1)}clone(){return new xf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,a,l,u){t3(e,i,a,l,u,1)}}class da{constructor(e,i){vD(this,e,4,i)}resize(e){_D(this,new da(e),4)}replace(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new da({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,a,l,u){t3(e,i,a,l,u,4)}}class xD{constructor(e,i){this.width=e.width,this.height=e.height,this.data=i instanceof Uint8Array?new Float32Array(i.buffer):i}}rn(xf,"AlphaImage"),rn(da,"RGBAImage");const TZ=new vi({visibility:new Ir(Lt.layout_heatmap.visibility)});var IZ={paint:new vi({"heatmap-radius":new gn(Lt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gn(Lt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ir(Lt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gg(Lt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ir(Lt.paint_heatmap["heatmap-opacity"])}),layout:TZ};function yS(r){const e={},i=r.resolution||256,a=r.clips?r.clips.length:1,l=r.image||new da({width:i,height:a}),u=(h,g,x)=>{e[r.evaluationKey]=x;const b=r.expression.evaluate(e);b&&(l.data[h+g+0]=Math.floor(255*b.r/b.a),l.data[h+g+1]=Math.floor(255*b.g/b.a),l.data[h+g+2]=Math.floor(255*b.b/b.a),l.data[h+g+3]=Math.floor(255*b.a))};if(r.clips)for(let h=0,g=0;h<a;++h,g+=4*i)for(let x=0,b=0;x<i;x++,b+=4){const T=x/(i-1),{start:M,end:A}=r.clips[h];u(g,b,M*(1-T)+A*T)}else for(let h=0,g=0;h<i;h++,g+=4)u(0,g,h/(i-1));return l}const MZ=new vi({visibility:new Ir(Lt.layout_hillshade.visibility)});var PZ={paint:new vi({"hillshade-illumination-direction":new Ir(Lt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ir(Lt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ir(Lt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ir(Lt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ir(Lt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ir(Lt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ir(Lt.paint_hillshade["hillshade-emissive-strength"])}),layout:MZ};const AZ=ki([{name:"a_pos",components:2,type:"Int16"}],4),{members:RZ}=AZ;var r3={exports:{}};function vS(r,e,i){i=i||2;var a,l,u,h,g,x,b,T=e&&e.length,M=T?e[0]*i:r.length,A=bD(r,0,M,i,!0),O=[];if(!A||A.next===A.prev)return O;if(T&&(A=function(V,W,q,ne){var ae,le,ie,ue=[];for(ae=0,le=W.length;ae<le;ae++)(ie=bD(V,W[ae]*ne,ae<le-1?W[ae+1]*ne:V.length,ne,!1))===ie.next&&(ie.steiner=!0),ue.push(FZ(ie));for(ue.sort(LZ),ae=0;ae<ue.length;ae++)q=$Z(ue[ae],q);return q}(r,e,A,i)),r.length>80*i){a=u=r[0],l=h=r[1];for(var B=i;B<M;B+=i)(g=r[B])<a&&(a=g),(x=r[B+1])<l&&(l=x),g>u&&(u=g),x>h&&(h=x);b=(b=Math.max(u-a,h-l))!==0?32767/b:0}return H1(A,O,i,a,l,b,0),O}function bD(r,e,i,a,l){var u,h;if(l===o3(r,e,i,a)>0)for(u=e;u<i;u+=a)h=CD(u,r[u],r[u+1],h);else for(u=i-a;u>=e;u-=a)h=CD(u,r[u],r[u+1],h);return h&&_S(h,h.next)&&(q1(h),h=h.next),h}function zg(r,e){if(!r)return r;e||(e=r);var i,a=r;do if(i=!1,a.steiner||!_S(a,a.next)&&es(a.prev,a,a.next)!==0)a=a.next;else{if(q1(a),(a=e=a.prev)===a.next)break;i=!0}while(i||a!==e);return e}function H1(r,e,i,a,l,u,h){if(r){!h&&u&&function(T,M,A,O){var B=T;do B.z===0&&(B.z=n3(B.x,B.y,M,A,O)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==T);B.prevZ.nextZ=null,B.prevZ=null,function(V){var W,q,ne,ae,le,ie,ue,Ee,Be=1;do{for(q=V,V=null,le=null,ie=0;q;){for(ie++,ne=q,ue=0,W=0;W<Be&&(ue++,ne=ne.nextZ);W++);for(Ee=Be;ue>0||Ee>0&&ne;)ue!==0&&(Ee===0||!ne||q.z<=ne.z)?(ae=q,q=q.nextZ,ue--):(ae=ne,ne=ne.nextZ,Ee--),le?le.nextZ=ae:V=ae,ae.prevZ=le,le=ae;q=ne}le.nextZ=null,Be*=2}while(ie>1)}(B)}(r,a,l,u);for(var g,x,b=r;r.prev!==r.next;)if(g=r.prev,x=r.next,u?OZ(r,a,l,u):kZ(r))e.push(g.i/i|0),e.push(r.i/i|0),e.push(x.i/i|0),q1(r),r=x.next,b=x.next;else if((r=x)===b){h?h===1?H1(r=zZ(zg(r),e,i),e,i,a,l,u,2):h===2&&DZ(r,e,i,a,l,u):H1(zg(r),e,i,a,l,u,1);break}}}function kZ(r){var e=r.prev,i=r,a=r.next;if(es(e,i,a)>=0)return!1;for(var l=e.x,u=i.x,h=a.x,g=e.y,x=i.y,b=a.y,T=l<u?l<h?l:h:u<h?u:h,M=g<x?g<b?g:b:x<b?x:b,A=l>u?l>h?l:h:u>h?u:h,O=g>x?g>b?g:b:x>b?x:b,B=a.next;B!==e;){if(B.x>=T&&B.x<=A&&B.y>=M&&B.y<=O&&Tv(l,g,u,x,h,b,B.x,B.y)&&es(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function OZ(r,e,i,a){var l=r.prev,u=r,h=r.next;if(es(l,u,h)>=0)return!1;for(var g=l.x,x=u.x,b=h.x,T=l.y,M=u.y,A=h.y,O=g<x?g<b?g:b:x<b?x:b,B=T<M?T<A?T:A:M<A?M:A,V=g>x?g>b?g:b:x>b?x:b,W=T>M?T>A?T:A:M>A?M:A,q=n3(O,B,e,i,a),ne=n3(V,W,e,i,a),ae=r.prevZ,le=r.nextZ;ae&&ae.z>=q&&le&&le.z<=ne;){if(ae.x>=O&&ae.x<=V&&ae.y>=B&&ae.y<=W&&ae!==l&&ae!==h&&Tv(g,T,x,M,b,A,ae.x,ae.y)&&es(ae.prev,ae,ae.next)>=0||(ae=ae.prevZ,le.x>=O&&le.x<=V&&le.y>=B&&le.y<=W&&le!==l&&le!==h&&Tv(g,T,x,M,b,A,le.x,le.y)&&es(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;ae&&ae.z>=q;){if(ae.x>=O&&ae.x<=V&&ae.y>=B&&ae.y<=W&&ae!==l&&ae!==h&&Tv(g,T,x,M,b,A,ae.x,ae.y)&&es(ae.prev,ae,ae.next)>=0)return!1;ae=ae.prevZ}for(;le&&le.z<=ne;){if(le.x>=O&&le.x<=V&&le.y>=B&&le.y<=W&&le!==l&&le!==h&&Tv(g,T,x,M,b,A,le.x,le.y)&&es(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function zZ(r,e,i){var a=r;do{var l=a.prev,u=a.next.next;!_S(l,u)&&wD(l,a,a.next,u)&&G1(l,u)&&G1(u,l)&&(e.push(l.i/i|0),e.push(a.i/i|0),e.push(u.i/i|0),q1(a),q1(a.next),a=r=u),a=a.next}while(a!==r);return zg(a)}function DZ(r,e,i,a,l,u){var h=r;do{for(var g=h.next.next;g!==h.prev;){if(h.i!==g.i&&NZ(h,g)){var x=SD(h,g);return h=zg(h,h.next),x=zg(x,x.next),H1(h,e,i,a,l,u,0),void H1(x,e,i,a,l,u,0)}g=g.next}h=h.next}while(h!==r)}function LZ(r,e){return r.x-e.x}function $Z(r,e){var i=function(l,u){var h,g=u,x=l.x,b=l.y,T=-1/0;do{if(b<=g.y&&b>=g.next.y&&g.next.y!==g.y){var M=g.x+(b-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(M<=x&&M>T&&(T=M,h=g.x<g.next.x?g:g.next,M===x))return h}g=g.next}while(g!==u);if(!h)return null;var A,O=h,B=h.x,V=h.y,W=1/0;g=h;do x>=g.x&&g.x>=B&&x!==g.x&&Tv(b<V?x:T,b,B,V,b<V?T:x,b,g.x,g.y)&&(A=Math.abs(b-g.y)/(x-g.x),G1(g,l)&&(A<W||A===W&&(g.x>h.x||g.x===h.x&&BZ(h,g)))&&(h=g,W=A)),g=g.next;while(g!==O);return h}(r,e);if(!i)return e;var a=SD(i,r);return zg(a,a.next),zg(i,i.next)}function BZ(r,e){return es(r.prev,r,e.prev)<0&&es(e.next,r,r.next)<0}function n3(r,e,i,a,l){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*l|0)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-a)*l|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function FZ(r){var e=r,i=r;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==r);return i}function Tv(r,e,i,a,l,u,h,g){return(l-h)*(e-g)>=(r-h)*(u-g)&&(r-h)*(a-g)>=(i-h)*(e-g)&&(i-h)*(u-g)>=(l-h)*(a-g)}function NZ(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(i,a){var l=i;do{if(l.i!==i.i&&l.next.i!==i.i&&l.i!==a.i&&l.next.i!==a.i&&wD(l,l.next,i,a))return!0;l=l.next}while(l!==i);return!1}(r,e)&&(G1(r,e)&&G1(e,r)&&function(i,a){var l=i,u=!1,h=(i.x+a.x)/2,g=(i.y+a.y)/2;do l.y>g!=l.next.y>g&&l.next.y!==l.y&&h<(l.next.x-l.x)*(g-l.y)/(l.next.y-l.y)+l.x&&(u=!u),l=l.next;while(l!==i);return u}(r,e)&&(es(r.prev,r,e.prev)||es(r,e.prev,e))||_S(r,e)&&es(r.prev,r,r.next)>0&&es(e.prev,e,e.next)>0)}function es(r,e,i){return(e.y-r.y)*(i.x-e.x)-(e.x-r.x)*(i.y-e.y)}function _S(r,e){return r.x===e.x&&r.y===e.y}function wD(r,e,i,a){var l=bS(es(r,e,i)),u=bS(es(r,e,a)),h=bS(es(i,a,r)),g=bS(es(i,a,e));return l!==u&&h!==g||!(l!==0||!xS(r,i,e))||!(u!==0||!xS(r,a,e))||!(h!==0||!xS(i,r,a))||!(g!==0||!xS(i,e,a))}function xS(r,e,i){return e.x<=Math.max(r.x,i.x)&&e.x>=Math.min(r.x,i.x)&&e.y<=Math.max(r.y,i.y)&&e.y>=Math.min(r.y,i.y)}function bS(r){return r>0?1:r<0?-1:0}function G1(r,e){return es(r.prev,r,r.next)<0?es(r,e,r.next)>=0&&es(r,r.prev,e)>=0:es(r,e,r.prev)<0||es(r,r.next,e)<0}function SD(r,e){var i=new i3(r.i,r.x,r.y),a=new i3(e.i,e.x,e.y),l=r.next,u=e.prev;return r.next=e,e.prev=r,i.next=l,l.prev=i,a.next=i,i.prev=a,u.next=a,a.prev=u,a}function CD(r,e,i,a){var l=new i3(r,e,i);return a?(l.next=a.next,l.prev=a,a.next.prev=l,a.next=l):(l.prev=l,l.next=l),l}function q1(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function i3(r,e,i){this.i=r,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function o3(r,e,i,a){for(var l=0,u=e,h=i-a;u<i;u+=a)l+=(r[h]-r[u])*(r[u+1]+r[h+1]),h=u;return l}r3.exports=vS,r3.exports.default=vS,vS.deviation=function(r,e,i,a){var l=e&&e.length,u=Math.abs(o3(r,0,l?e[0]*i:r.length,i));if(l)for(var h=0,g=e.length;h<g;h++)u-=Math.abs(o3(r,e[h]*i,h<g-1?e[h+1]*i:r.length,i));var x=0;for(h=0;h<a.length;h+=3){var b=a[h]*i,T=a[h+1]*i,M=a[h+2]*i;x+=Math.abs((r[b]-r[M])*(r[T+1]-r[b+1])-(r[b]-r[T])*(r[M+1]-r[b+1]))}return u===0&&x===0?0:Math.abs((x-u)/u)},vS.flatten=function(r){for(var e=r[0][0].length,i={vertices:[],holes:[],dimensions:e},a=0,l=0;l<r.length;l++){for(var u=0;u<r[l].length;u++)for(var h=0;h<e;h++)i.vertices.push(r[l][u][h]);l>0&&i.holes.push(a+=r[l-1].length)}return i};var wS=re(r3.exports);function a3(r,e){const i=r.length;if(i<=1)return[r];const a=[];let l,u;for(let h=0;h<i;h++){const g=gt(r[h]);g!==0&&(r[h].area=Math.abs(g),u===void 0&&(u=g<0),u===g<0?(l&&a.push(l),l=[r[h]]):l.push(r[h]))}if(l&&a.push(l),e>1)for(let h=0;h<a.length;h++)a[h].length<=e||(tp(a[h],e,1,a[h].length-1,jZ),a[h]=a[h].slice(0,e));return a}function jZ(r,e){return e.area-r.area}function s3(r,e,i){const a=i.patternDependencies;let l=!1;for(const u of e){const h=u.paint.get(`${r}-pattern`);h.isConstant()||(l=!0);const g=h.constantOr(null);g&&(l=!0,a[g]=!0)}return l}function l3(r,e,i,a,l){const u=l.patternDependencies;for(const h of e){const g=h.paint.get(`${r}-pattern`).value;if(g.kind!=="constant"){let x=g.evaluate({zoom:a},i,{},l.availableImages);x=x&&x.name?x.name:x,u[x]=!0,i.patterns[h.id]=x}}return i}class SS{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gl,this.indexArray=new Ca,this.indexArray2=new fd,this.programConfigurations=new yd(e.layers,e.zoom),this.segments=new qi,this.segments2=new qi,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.projection=e.projection}populate(e,i,a,l){this.hasPattern=s3("fill",this.layers,i);const u=this.layers[0].layout.get("fill-sort-key"),h=[];for(const{feature:g,id:x,index:b,sourceLayerIndex:T}of e){const M=this.layers[0]._featureFilter.needGeometry,A=qp(g,M);if(!this.layers[0]._featureFilter.filter(new uo(this.zoom),A,a))continue;const O=u?u.evaluate(A,{},a,i.availableImages):void 0,B={id:x,properties:g.properties,type:g.type,sourceLayerIndex:T,index:b,geometry:M?A.geometry:xd(g,a,l),patterns:{},sortKey:O};h.push(B)}u&&h.sort((g,x)=>g.sortKey-x.sortKey);for(const g of h){const{geometry:x,index:b,sourceLayerIndex:T}=g;if(this.hasPattern){const M=l3("fill",this.layers,g,this.zoom,i);this.patternFeatures.push(M)}else this.addFeature(g,x,b,a,{},i.availableImages,i.brightness);i.featureIndex.insert(e[b].feature,x,b,T,this.index)}}update(e,i,a,l,u){const h=Object.keys(e).length!==0;h&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,i,h?this.stateDependentLayers:this.layers,a,l,u)}addFeatures(e,i,a,l,u,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,a,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,RZ),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,i,a,l,u,h=[],g){for(const x of a3(i,500)){let b=0;for(const V of x)b+=V.length;const T=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),M=T.vertexLength,A=[],O=[];for(const V of x){if(V.length===0)continue;V!==x[0]&&O.push(A.length/2);const W=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),q=W.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(q+V.length-1,q),A.push(V[0].x),A.push(V[0].y);for(let ne=1;ne<V.length;ne++)this.layoutVertexArray.emplaceBack(V[ne].x,V[ne].y),this.indexArray2.emplaceBack(q+ne-1,q+ne),A.push(V[ne].x),A.push(V[ne].y);W.vertexLength+=V.length,W.primitiveLength+=V.length}const B=wS(A,O);for(let V=0;V<B.length;V+=3)this.indexArray.emplaceBack(M+B[V],M+B[V+1],M+B[V+2]);T.vertexLength+=b,T.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,u,h,l,g)}}rn(SS,"FillBucket",{omit:["layers","patternFeatures"]});const VZ=new vi({"fill-sort-key":new gn(Lt.layout_fill["fill-sort-key"]),visibility:new Ir(Lt.layout_fill.visibility)});var UZ={paint:new vi({"fill-antialias":new Ir(Lt.paint_fill["fill-antialias"]),"fill-opacity":new gn(Lt.paint_fill["fill-opacity"]),"fill-color":new gn(Lt.paint_fill["fill-color"]),"fill-outline-color":new gn(Lt.paint_fill["fill-outline-color"]),"fill-translate":new Ir(Lt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ir(Lt.paint_fill["fill-translate-anchor"]),"fill-pattern":new gn(Lt.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ir(Lt.paint_fill["fill-emissive-strength"])}),layout:VZ};const HZ=ki([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),GZ=ki([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),qZ=ki([{name:"a_centroid_pos",components:2,type:"Uint16"}]),WZ=ki([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),KZ=ki([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:ZZ}=HZ;var CS={},XZ=xe,ED=Iv;function Iv(r,e,i,a,l){this.properties={},this.extent=i,this.type=0,this._pbf=r,this._geometry=-1,this._keys=a,this._values=l,r.readFields(YZ,this,e)}function YZ(r,e,i){r==1?e.id=i.readVarint():r==2?function(a,l){for(var u=a.readVarint()+a.pos;a.pos<u;){var h=l._keys[a.readVarint()],g=l._values[a.readVarint()];l.properties[h]=g}}(i,e):r==3?e.type=i.readVarint():r==4&&(e._geometry=i.pos)}function JZ(r){for(var e,i,a=0,l=0,u=r.length,h=u-1;l<u;h=l++)a+=((i=r[h]).x-(e=r[l]).x)*(e.y+i.y);return a}Iv.types=["Unknown","Point","LineString","Polygon"],Iv.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,i=r.readVarint()+r.pos,a=1,l=0,u=0,h=0,g=[];r.pos<i;){if(l<=0){var x=r.readVarint();a=7&x,l=x>>3}if(l--,a===1||a===2)u+=r.readSVarint(),h+=r.readSVarint(),a===1&&(e&&g.push(e),e=[]),e.push(new XZ(u,h));else{if(a!==7)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&g.push(e),g},Iv.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,i=1,a=0,l=0,u=0,h=1/0,g=-1/0,x=1/0,b=-1/0;r.pos<e;){if(a<=0){var T=r.readVarint();i=7&T,a=T>>3}if(a--,i===1||i===2)(l+=r.readSVarint())<h&&(h=l),l>g&&(g=l),(u+=r.readSVarint())<x&&(x=u),u>b&&(b=u);else if(i!==7)throw new Error("unknown command "+i)}return[h,x,g,b]},Iv.prototype.toGeoJSON=function(r,e,i){var a,l,u=this.extent*Math.pow(2,i),h=this.extent*r,g=this.extent*e,x=this.loadGeometry(),b=Iv.types[this.type];function T(O){for(var B=0;B<O.length;B++){var V=O[B];O[B]=[360*(V.x+h)/u-180,360/Math.PI*Math.atan(Math.exp((180-360*(V.y+g)/u)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(a=0;a<x.length;a++)M[a]=x[a][0];T(x=M);break;case 2:for(a=0;a<x.length;a++)T(x[a]);break;case 3:for(x=function(O){var B=O.length;if(B<=1)return[O];for(var V,W,q=[],ne=0;ne<B;ne++){var ae=JZ(O[ne]);ae!==0&&(W===void 0&&(W=ae<0),W===ae<0?(V&&q.push(V),V=[O[ne]]):V.push(O[ne]))}return V&&q.push(V),q}(x),a=0;a<x.length;a++)for(l=0;l<x[a].length;l++)T(x[a][l])}x.length===1?x=x[0]:b="Multi"+b;var A={type:"Feature",geometry:{type:b,coordinates:x},properties:this.properties};return"id"in this&&(A.id=this.id),A};var QZ=ED,TD=ID;function ID(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(eX,this,e),this.length=this._features.length}function eX(r,e,i){r===15?e.version=i.readVarint():r===1?e.name=i.readString():r===5?e.extent=i.readVarint():r===2?e._features.push(i.pos):r===3?e._keys.push(i.readString()):r===4&&e._values.push(function(a){for(var l=null,u=a.readVarint()+a.pos;a.pos<u;){var h=a.readVarint()>>3;l=h===1?a.readString():h===2?a.readFloat():h===3?a.readDouble():h===4?a.readVarint64():h===5?a.readVarint():h===6?a.readSVarint():h===7?a.readBoolean():null}return l}(i))}ID.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new QZ(this._pbf,e,this.extent,this._keys,this._values)};var tX=TD;function rX(r,e,i){if(r===3){var a=new tX(i,i.readVarint()+i.pos);a.length&&(e[a.name]=a)}}var c3=CS.VectorTile=function(r,e){this.layers=r.readFields(rX,{},e)},ES=CS.VectorTileFeature=ED;function TS(r,e,i,a){const l=[],u=a===0?(h,g,x,b,T,M)=>{h.push(new oe(M,x+(M-g)/(b-g)*(T-x)))}:(h,g,x,b,T,M)=>{h.push(new oe(g+(M-x)/(T-x)*(b-g),M))};for(const h of r){const g=[];for(const x of h){if(x.length<=2)continue;const b=[];for(let A=0;A<x.length-1;A++){const O=x[A].x,B=x[A].y,V=x[A+1].x,W=x[A+1].y,q=a===0?O:B,ne=a===0?V:W;q<e?ne>e&&u(b,O,B,V,W,e):q>i?ne<i&&u(b,O,B,V,W,i):b.push(x[A]),ne<e&&q>=e&&u(b,O,B,V,W,e),ne>i&&q<=i&&u(b,O,B,V,W,i)}let T=x[x.length-1];const M=a===0?T.x:T.y;M>=e&&M<=i&&b.push(T),b.length&&(T=b[b.length-1],b[0].x===T.x&&b[0].y===T.y||b.push(b[0]),g.push(b))}g.length&&l.push(g)}return l}CS.VectorTileLayer=TD;class MD{constructor(e){this._stringToNumber={},this._numberToString=[];for(let i=0;i<e.length;i++){const a=e[i];this._stringToNumber[a]=i,this._numberToString[i]=a}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}var nX={read:function(r,e,i,a,l){var u,h,g=8*l-a-1,x=(1<<g)-1,b=x>>1,T=-7,M=i?l-1:0,A=i?-1:1,O=r[e+M];for(M+=A,u=O&(1<<-T)-1,O>>=-T,T+=g;T>0;u=256*u+r[e+M],M+=A,T-=8);for(h=u&(1<<-T)-1,u>>=-T,T+=a;T>0;h=256*h+r[e+M],M+=A,T-=8);if(u===0)u=1-b;else{if(u===x)return h?NaN:1/0*(O?-1:1);h+=Math.pow(2,a),u-=b}return(O?-1:1)*h*Math.pow(2,u-a)},write:function(r,e,i,a,l,u){var h,g,x,b=8*u-l-1,T=(1<<b)-1,M=T>>1,A=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:u-1,B=a?1:-1,V=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(g=isNaN(e)?1:0,h=T):(h=Math.floor(Math.log(e)/Math.LN2),e*(x=Math.pow(2,-h))<1&&(h--,x*=2),(e+=h+M>=1?A/x:A*Math.pow(2,1-M))*x>=2&&(h++,x/=2),h+M>=T?(g=0,h=T):h+M>=1?(g=(e*x-1)*Math.pow(2,l),h+=M):(g=e*Math.pow(2,M-1)*Math.pow(2,l),h=0));l>=8;r[i+O]=255&g,O+=B,g/=256,l-=8);for(h=h<<l|g,b+=l;b>0;r[i+O]=255&h,O+=B,h/=256,b-=8);r[i+O-B]|=128*V}},PD=No,IS=nX;function No(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}No.Varint=0,No.Fixed64=1,No.Bytes=2,No.Fixed32=5;var u3=4294967296,AD=1/u3,RD=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function bf(r){return r.type===No.Bytes?r.readVarint()+r.pos:r.pos+1}function Mv(r,e,i){return i?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function kD(r,e,i){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(a);for(var l=i.pos-1;l>=r;l--)i.buf[l+a]=i.buf[l]}function iX(r,e){for(var i=0;i<r.length;i++)e.writeVarint(r[i])}function oX(r,e){for(var i=0;i<r.length;i++)e.writeSVarint(r[i])}function aX(r,e){for(var i=0;i<r.length;i++)e.writeFloat(r[i])}function sX(r,e){for(var i=0;i<r.length;i++)e.writeDouble(r[i])}function lX(r,e){for(var i=0;i<r.length;i++)e.writeBoolean(r[i])}function cX(r,e){for(var i=0;i<r.length;i++)e.writeFixed32(r[i])}function uX(r,e){for(var i=0;i<r.length;i++)e.writeSFixed32(r[i])}function hX(r,e){for(var i=0;i<r.length;i++)e.writeFixed64(r[i])}function dX(r,e){for(var i=0;i<r.length;i++)e.writeSFixed64(r[i])}function MS(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function Pv(r,e,i){r[i]=e,r[i+1]=e>>>8,r[i+2]=e>>>16,r[i+3]=e>>>24}function OD(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}No.prototype={destroy:function(){this.buf=null},readFields:function(r,e,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),l=a>>3,u=this.pos;this.type=7&a,r(l,e,this),this.pos===u&&this.skip(a)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=MS(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=OD(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=MS(this.buf,this.pos)+MS(this.buf,this.pos+4)*u3;return this.pos+=8,r},readSFixed64:function(){var r=MS(this.buf,this.pos)+OD(this.buf,this.pos+4)*u3;return this.pos+=8,r},readFloat:function(){var r=IS.read(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=IS.read(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,i,a=this.buf;return e=127&(i=a[this.pos++]),i<128?e:(e|=(127&(i=a[this.pos++]))<<7,i<128?e:(e|=(127&(i=a[this.pos++]))<<14,i<128?e:(e|=(127&(i=a[this.pos++]))<<21,i<128?e:function(l,u,h){var g,x,b=h.buf;if(g=(112&(x=b[h.pos++]))>>4,x<128||(g|=(127&(x=b[h.pos++]))<<3,x<128)||(g|=(127&(x=b[h.pos++]))<<10,x<128)||(g|=(127&(x=b[h.pos++]))<<17,x<128)||(g|=(127&(x=b[h.pos++]))<<24,x<128)||(g|=(1&(x=b[h.pos++]))<<31,x<128))return Mv(l,g,u);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=a[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&RD?function(i,a,l){return RD.decode(i.subarray(a,l))}(this.buf,e,r):function(i,a,l){for(var u="",h=a;h<l;){var g,x,b,T=i[h],M=null,A=T>239?4:T>223?3:T>191?2:1;if(h+A>l)break;A===1?T<128&&(M=T):A===2?(192&(g=i[h+1]))==128&&(M=(31&T)<<6|63&g)<=127&&(M=null):A===3?(x=i[h+2],(192&(g=i[h+1]))==128&&(192&x)==128&&((M=(15&T)<<12|(63&g)<<6|63&x)<=2047||M>=55296&&M<=57343)&&(M=null)):A===4&&(x=i[h+2],b=i[h+3],(192&(g=i[h+1]))==128&&(192&x)==128&&(192&b)==128&&((M=(15&T)<<18|(63&g)<<12|(63&x)<<6|63&b)<=65535||M>=1114112)&&(M=null)),M===null?(M=65533,A=1):M>65535&&(M-=65536,u+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),u+=String.fromCharCode(M),h+=A}return u}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==No.Bytes)return r.push(this.readVarint(e));var i=bf(this);for(r=r||[];this.pos<i;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==No.Bytes)return r.push(this.readSVarint());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==No.Bytes)return r.push(this.readBoolean());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==No.Bytes)return r.push(this.readFloat());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==No.Bytes)return r.push(this.readDouble());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==No.Bytes)return r.push(this.readFixed32());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==No.Bytes)return r.push(this.readSFixed32());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==No.Bytes)return r.push(this.readFixed64());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==No.Bytes)return r.push(this.readSFixed64());var e=bf(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===No.Varint)for(;this.buf[this.pos++]>127;);else if(e===No.Bytes)this.pos=this.readVarint()+this.pos;else if(e===No.Fixed32)this.pos+=4;else{if(e!==No.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Pv(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Pv(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Pv(this.buf,-1&r,this.pos),Pv(this.buf,Math.floor(r*AD),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Pv(this.buf,-1&r,this.pos),Pv(this.buf,Math.floor(r*AD),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,i){var a,l;if(e>=0?(a=e%4294967296|0,l=e/4294967296|0):(l=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,l=l+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(u,h,g){g.buf[g.pos++]=127&u|128,u>>>=7,g.buf[g.pos++]=127&u|128,u>>>=7,g.buf[g.pos++]=127&u|128,u>>>=7,g.buf[g.pos++]=127&u|128,g.buf[g.pos]=127&(u>>>=7)}(a,0,i),function(u,h){var g=(7&u)<<4;h.buf[h.pos++]|=g|((u>>>=3)?128:0),u&&(h.buf[h.pos++]=127&u|((u>>>=7)?128:0),u&&(h.buf[h.pos++]=127&u|((u>>>=7)?128:0),u&&(h.buf[h.pos++]=127&u|((u>>>=7)?128:0),u&&(h.buf[h.pos++]=127&u|((u>>>=7)?128:0),u&&(h.buf[h.pos++]=127&u)))))}(l,i)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(a,l,u){for(var h,g,x=0;x<l.length;x++){if((h=l.charCodeAt(x))>55295&&h<57344){if(!g){h>56319||x+1===l.length?(a[u++]=239,a[u++]=191,a[u++]=189):g=h;continue}if(h<56320){a[u++]=239,a[u++]=191,a[u++]=189,g=h;continue}h=g-55296<<10|h-56320|65536,g=null}else g&&(a[u++]=239,a[u++]=191,a[u++]=189,g=null);h<128?a[u++]=h:(h<2048?a[u++]=h>>6|192:(h<65536?a[u++]=h>>12|224:(a[u++]=h>>18|240,a[u++]=h>>12&63|128),a[u++]=h>>6&63|128),a[u++]=63&h|128)}return u}(this.buf,r,this.pos);var i=this.pos-e;i>=128&&kD(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(r){this.realloc(4),IS.write(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),IS.write(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=r[i]},writeRawMessage:function(r,e){this.pos++;var i=this.pos;r(e,this);var a=this.pos-i;a>=128&&kD(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(r,e,i){this.writeTag(r,No.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,iX,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,oX,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,lX,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,aX,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,sX,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,cX,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,uX,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,hX,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,dX,e)},writeBytesField:function(r,e){this.writeTag(r,No.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,No.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,No.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,No.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,No.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,No.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,No.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,No.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,No.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,No.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,!!e)}};var PS=re(PD);const fX=["tile","layer","source","sourceLayer","state"];class zD{constructor(e,i,a,l,u){this.type="Feature",this._vectorTileFeature=e,this._z=i,this._x=a,this._y=l,this.properties=e.properties,this.id=u}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const i of fX)this[i]!==void 0&&(e[i]=this[i]);return e}}class pX{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,i,a){const l=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},ct(this.stateChanges[e][l],a),this.deletedStates[e]===null){this.deletedStates[e]={};for(const u in this.state[e])u!==l&&(this.deletedStates[e][u]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][l]===null){this.deletedStates[e][l]={};for(const u in this.state[e][l])a[u]||(this.deletedStates[e][l][u]=null)}else for(const u in a)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][u]===null&&delete this.deletedStates[e][l][u]}removeFeatureState(e,i,a){if(this.deletedStates[e]===null)return;const l=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&i!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][a]=null);else if(i!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(a in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][a]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}getState(e,i){const a=String(i),l=ct({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const u=this.deletedStates[e][i];if(u===null)return{};for(const h in u)delete l[h]}return l}initializeTileState(e,i){e.setFeatureState(this.state,i)}coalesceChanges(e,i){const a={};for(const l in this.stateChanges){this.state[l]=this.state[l]||{};const u={};for(const h in this.stateChanges[l])this.state[l][h]||(this.state[l][h]={}),ct(this.state[l][h],this.stateChanges[l][h]),u[h]=this.state[l][h];a[l]=u}for(const l in this.deletedStates){this.state[l]=this.state[l]||{};const u={};if(this.deletedStates[l]===null)for(const h in this.state[l])u[h]={},this.state[l][h]={};else for(const h in this.deletedStates[l]){if(this.deletedStates[l][h]===null)this.state[l][h]={};else if(this.state[l][h])for(const g of Object.keys(this.deletedStates[l][h]))delete this.state[l][h][g];u[h]=this.state[l][h]}a[l]=a[l]||{},ct(a[l],u)}if(this.stateChanges={},this.deletedStates={},Object.keys(a).length!==0)for(const l in e)e[l].setFeatureState(a,i)}}class DD{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,i){const a=this.toIdx(e,i);return{min:this.minimums[a],max:this.maximums[a]}}isLeaf(e,i){return this.leaves[this.toIdx(e,i)]}toIdx(e,i){return i*this.size+e}}function LD(r,e,i,a){let l=0,u=Number.MAX_VALUE;for(let h=0;h<3;h++)if(Math.abs(a[h])<1e-15){if(i[h]<r[h]||i[h]>e[h])return null}else{const g=1/a[h];let x=(r[h]-i[h])*g,b=(e[h]-i[h])*g;if(x>b){const T=x;x=b,b=T}if(x>l&&(l=x),b<u&&(u=b),l>u)return null}return l}function $D(r,e,i,a,l,u,h,g,x,b,T){const M=a-r,A=l-e,O=u-i,B=h-r,V=g-e,W=x-i,q=T[1]*W-T[2]*V,ne=T[2]*B-T[0]*W,ae=T[0]*V-T[1]*B,le=M*q+A*ne+O*ae;if(Math.abs(le)<1e-15)return null;const ie=1/le,ue=b[0]-r,Ee=b[1]-e,Be=b[2]-i,je=(ue*q+Ee*ne+Be*ae)*ie;if(je<0||je>1)return null;const Ge=Ee*O-Be*A,tt=Be*M-ue*O,Ze=ue*A-Ee*M,nt=(T[0]*Ge+T[1]*tt+T[2]*Ze)*ie;return nt<0||je+nt>1?null:(B*Ge+V*tt+W*Ze)*ie}function BD(r,e,i){return(r-e)/(i-e)}function FD(r,e,i,a,l,u,h,g,x){const b=1<<i,T=u-a,M=h-l,A=(r+1)/b*T+a,O=(e+0)/b*M+l,B=(e+1)/b*M+l;g[0]=(r+0)/b*T+a,g[1]=O,x[0]=A,x[1]=B}class ND{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const i=function(u){const h=Math.ceil(Math.log2(u.dim/8)),g=[];let x=Math.ceil(Math.pow(2,h));const b=1/x,T=(O,B,V,W,q)=>{const ne=W?1:0,ae=(O+1)*V-ne,le=B*V,ie=(B+1)*V-ne;q[0]=O*V,q[1]=le,q[2]=ae,q[3]=ie};let M=new DD(x);const A=[];for(let O=0;O<x*x;O++){T(O%x,Math.floor(O/x),b,!1,A);const B=Kp(A[0],A[1],u),V=Kp(A[2],A[1],u),W=Kp(A[2],A[3],u),q=Kp(A[0],A[3],u);M.minimums.push(Math.min(B,V,W,q)),M.maximums.push(Math.max(B,V,W,q)),M.leaves.push(1)}for(g.push(M),x/=2;x>=1;x/=2){const O=g[g.length-1];M=new DD(x);for(let B=0;B<x*x;B++){T(B%x,Math.floor(B/x),2,!0,A);const V=O.getElevation(A[0],A[1]),W=O.getElevation(A[2],A[1]),q=O.getElevation(A[2],A[3]),ne=O.getElevation(A[0],A[3]),ae=O.isLeaf(A[0],A[1]),le=O.isLeaf(A[2],A[1]),ie=O.isLeaf(A[2],A[3]),ue=O.isLeaf(A[0],A[3]),Ee=Math.min(V.min,W.min,q.min,ne.min),Be=Math.max(V.max,W.max,q.max,ne.max),je=ae&&le&&ie&&ue;M.maximums.push(Be),M.minimums.push(Ee),M.leaves.push(Be-Ee<=5&&je?1:0)}g.push(M)}return g}(this.dem),a=i.length-1,l=i[a];this._addNode(l.minimums[0],l.maximums[0],l.leaves[0]),this._construct(i,0,0,a,0)}raycastRoot(e,i,a,l,u,h,g=1){return LD([e,i,-100],[a,l,this.maximums[0]*g],u,h)}raycast(e,i,a,l,u,h,g=1){if(!this.nodeCount)return null;const x=this.raycastRoot(e,i,a,l,u,h,g);if(x==null)return null;const b=[],T=[],M=[],A=[],O=[{idx:0,t:x,nodex:0,nodey:0,depth:0}];for(;O.length>0;){const{idx:B,t:V,nodex:W,nodey:q,depth:ne}=O.pop();if(this.leaves[B]){FD(W,q,ne,e,i,a,l,M,A);const le=1<<ne,ie=(W+0)/le,ue=(W+1)/le,Ee=(q+0)/le,Be=(q+1)/le,je=Kp(ie,Ee,this.dem)*g,Ge=Kp(ue,Ee,this.dem)*g,tt=Kp(ue,Be,this.dem)*g,Ze=Kp(ie,Be,this.dem)*g,nt=$D(M[0],M[1],je,A[0],M[1],Ge,A[0],A[1],tt,u,h),Xe=$D(A[0],A[1],tt,M[0],A[1],Ze,M[0],M[1],je,u,h),ut=Math.min(nt!==null?nt:Number.MAX_VALUE,Xe!==null?Xe:Number.MAX_VALUE);if(ut!==Number.MAX_VALUE)return ut;{const bt=ce.scaleAndAdd([],u,h,V);if(jD(je,Ge,Ze,tt,BD(bt[0],M[0],A[0]),BD(bt[1],M[1],A[1]))>=bt[2])return V}continue}let ae=0;for(let le=0;le<this._siblingOffset.length;le++){FD((W<<1)+this._siblingOffset[le][0],(q<<1)+this._siblingOffset[le][1],ne+1,e,i,a,l,M,A),M[2]=-100,A[2]=this.maximums[this.childOffsets[B]+le]*g;const ie=LD(M,A,u,h);if(ie!=null){const ue=ie;b[le]=ue;let Ee=!1;for(let Be=0;Be<ae&&!Ee;Be++)ue>=b[T[Be]]&&(T.splice(Be,0,le),Ee=!0);Ee||(T[ae]=le),ae++}}for(let le=0;le<ae;le++){const ie=T[le];O.push({idx:this.childOffsets[B]+ie,t:b[ie],nodex:(W<<1)+this._siblingOffset[ie][0],nodey:(q<<1)+this._siblingOffset[ie][1],depth:ne+1})}}return null}_addNode(e,i,a){return this.minimums.push(e),this.maximums.push(i),this.leaves.push(a),this.childOffsets.push(0),this.nodeCount++}_construct(e,i,a,l,u){if(e[l].isLeaf(i,a)===1)return;this.childOffsets[u]||(this.childOffsets[u]=this.nodeCount);const h=l-1,g=e[h];let x=0,b=0;for(let T=0;T<this._siblingOffset.length;T++){const M=2*i+this._siblingOffset[T][0],A=2*a+this._siblingOffset[T][1],O=g.getElevation(M,A),B=g.isLeaf(M,A),V=this._addNode(O.min,O.max,B);B&&(x|=1<<T),b||(b=V)}for(let T=0;T<this._siblingOffset.length;T++)x&1<<T||this._construct(e,2*i+this._siblingOffset[T][0],2*a+this._siblingOffset[T][1],h,b+T)}}function jD(r,e,i,a,l,u){return Mn(Mn(r,i,u),Mn(e,a,u),l)}function Kp(r,e,i){const a=i.dim,l=Qe(r*a-.5,0,a-1),u=Qe(e*a-.5,0,a-1),h=Math.floor(l),g=Math.floor(u),x=Math.min(h+1,a-1),b=Math.min(g+1,a-1);return jD(i.get(h,g),i.get(x,g),i.get(h,b),i.get(x,b),l-h,u-g)}const VD={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768],float:[1,1,1,1]};function h3(r,e,i){return(256*r*256+256*e+i)/10-1e4}function d3(r,e,i){return 256*r+e+i/256-32768}class Dg{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,i,a,l,u=!1){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(a&&a!=="mapbox"&&a!=="terrarium")return ve(`"${a}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=i.height;const h=this.dim=i.height-2,g=new Uint32Array(i.data.buffer);if(this.pixels=new Uint8Array(i.data.buffer),this.encoding=a||"mapbox",this.borderReady=u,this._modifiedForSources={},!u){for(let x=0;x<h;x++)g[this._idx(-1,x)]=g[this._idx(0,x)],g[this._idx(h,x)]=g[this._idx(h-1,x)],g[this._idx(x,-1)]=g[this._idx(x,0)],g[this._idx(x,h)]=g[this._idx(x,h-1)];g[this._idx(-1,-1)]=g[this._idx(0,0)],g[this._idx(h,-1)]=g[this._idx(h-1,0)],g[this._idx(-1,h)]=g[this._idx(0,h-1)],g[this._idx(h,h)]=g[this._idx(h-1,h-1)]}if(l){const x=new Float32Array(i.data.buffer),b=this.encoding==="terrarium"?d3:h3;for(let T=0;T<g.length;++T){const M=4*T;x[T]=b(this.pixels[M],this.pixels[M+1],this.pixels[M+2])}this.encoding="float"}this._timestamp=Qr.now()}_buildQuadTree(){this._tree=new ND(this)}get(e,i,a=!1){a&&(e=Qe(e,-1,this.dim),i=Qe(i,-1,this.dim));const l=this._idx(e,i);if(this.encoding==="float")return this.floatView||(this.floatView=new Float32Array(this.pixels.buffer)),this.floatView[l];const u=4*l;return(this.encoding==="terrarium"?d3:h3)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}set(e,i,a){const l=this._idx(e,i);if(this.encoding==="float"){this.floatView||(this.floatView=new Float32Array(this.pixels.buffer));const x=this.floatView[l];return this.floatView[l]=a,a-x}const u=4*l,h=(this.encoding==="terrarium"?d3:h3)(this.pixels[u],this.pixels[u+1],this.pixels[u+2]),g=Dg.pack(a,this.encoding==="terrarium"?"terrarium":"mapbox");return this.pixels[u]=g[0],this.pixels[u+1]=g[1],this.pixels[u+2]=g[2],a-h}static getUnpackVector(e){return VD[e]}get unpackVector(){return VD[this.encoding]}_idx(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)}static pack(e,i){const a=[0,0,0,0],l=Dg.getUnpackVector(i);let u=Math.floor((e+l[3])/l[2]);return a[2]=u%256,u=Math.floor(u/256),a[1]=u%256,u=Math.floor(u/256),a[0]=u,a}getPixels(){return this.encoding==="float"?new xD({width:this.stride,height:this.stride},this.pixels):new da({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,i,a){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let l=i*this.dim,u=i*this.dim+this.dim,h=a*this.dim,g=a*this.dim+this.dim;switch(i){case-1:l=u-1;break;case 1:u=l+1}switch(a){case-1:h=g-1;break;case 1:g=h+1}const x=-i*this.dim,b=-a*this.dim;for(let T=h;T<g;T++)for(let M=l;M<u;M++){const A=4*this._idx(M,T),O=4*this._idx(M+x,T+b);this.pixels[A+0]=e.pixels[O+0],this.pixels[A+1]=e.pixels[O+1],this.pixels[A+2]=e.pixels[O+2],this.pixels[A+3]=e.pixels[O+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}rn(Dg,"DEMData"),rn(ND,"DemMinMaxQuadTree",{omit:["dem"]});class mX{isDataAvailableAtPoint(e){const i=this._source();if(this.isUsingMockSource()||!i||e.y<0||e.y>1)return!1;const a=i.getSource().maxzoom,l=1<<a,u=Math.floor(e.x),h=Math.floor((e.x-u)*l),g=Math.floor(e.y*l),x=this.findDEMTileFor(new xr(a,u,a,h,g));return!(!x||!x.dem)}getAtPointOrZero(e,i=0){return this.getAtPoint(e,i)||0}getAtPoint(e,i,a=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const l=this._source();if(!l||e.y<0||e.y>1)return i;const u=l.getSource().maxzoom,h=1<<u,g=Math.floor(e.x),x=e.x-g,b=new xr(u,g,u,Math.floor(x*h),Math.floor(e.y*h)),T=this.findDEMTileFor(b);if(!T||!T.dem)return i;const M=T.dem,A=1<<T.tileID.canonical.z,O=(x*A-T.tileID.canonical.x)*M.dim,B=(e.y*A-T.tileID.canonical.y)*M.dim,V=Math.floor(O),W=Math.floor(B);return(a?this.exaggeration():1)*Mn(Mn(M.get(V,W),M.get(V,W+1),B-W),Mn(M.get(V+1,W),M.get(V+1,W+1),B-W),O-V)}getAtTileOffset(e,i,a){const l=1<<e.canonical.z;return this.getAtPointOrZero(new Si(e.wrap+(e.canonical.x+i/Zt)/l,(e.canonical.y+a/Zt)/l))}getAtTileOffsetFunc(e,i,a,l){return u=>{const h=this.getAtTileOffset(e,u.x,u.y),g=l.upVector(e.canonical,u.x,u.y),x=l.upVectorScale(e.canonical,i,a).metersToTile;return ce.scale(g,g,h*x),g}}getForTilePoints(e,i,a,l){if(this.isUsingMockSource())return!1;const u=Av.create(this,e,l);return!!u&&(i.forEach(h=>{h[2]=this.exaggeration()*u.getElevationAt(h[0],h[1],a)}),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(e);if(!i||!i.dem)return null;const a=i.dem.tree,l=i.tileID,u=1<<e.canonical.z-l.canonical.z;let h=e.canonical.x/u-l.canonical.x,g=e.canonical.y/u-l.canonical.y,x=0;for(let b=0;b<e.canonical.z-l.canonical.z&&!a.leaves[x];b++){h*=2,g*=2;const T=2*Math.floor(g)+Math.floor(h);x=a.childOffsets[x]+T,h%=1,g%=1}return{min:this.exaggeration()*a.minimums[x],max:this.exaggeration()*a.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,i,a){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}}class Av{constructor(e,i,a){this._demTile=e,this._dem=this._demTile.dem,this._scale=i,this._offset=a}static create(e,i,a){const l=a||e.findDEMTileFor(i);if(!l||!l.dem)return;const u=l.dem,h=l.tileID,g=1<<i.canonical.z-h.canonical.z;return new Av(l,u.dim/Zt/g,[(i.canonical.x/g-h.canonical.x)*u.dim,(i.canonical.y/g-h.canonical.y)*u.dim])}tileCoordToPixel(e,i){const a=i*this._scale+this._offset[1],l=Math.floor(e*this._scale+this._offset[0]),u=Math.floor(a);return new oe(l,u)}getElevationAt(e,i,a,l){const u=e*this._scale+this._offset[0],h=i*this._scale+this._offset[1],g=Math.floor(u),x=Math.floor(h),b=this._dem;return l=!!l,a?Mn(Mn(b.get(g,x,l),b.get(g,x+1,l),h-x),Mn(b.get(g+1,x,l),b.get(g+1,x+1,l),h-x),u-g):b.get(g,x,l)}getElevationAtPixel(e,i,a){return this._dem.get(e,i,!!a)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Oi(1,e)*this._dem.stride}}class f3{constructor(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Xa(Zt,16,0),this.featureIndexArray=new e1,this.promoteId=i}insert(e,i,a,l,u,h=0){const g=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,l,u,h);const x=this.grid;for(let b=0;b<i.length;b++){const T=i[b],M=[1/0,1/0,-1/0,-1/0];for(let A=0;A<T.length;A++){const O=T[A];M[0]=Math.min(M[0],O.x),M[1]=Math.min(M[1],O.y),M[2]=Math.max(M[2],O.x),M[3]=Math.max(M[3],O.y)}M[0]<Zt&&M[1]<Zt&&M[2]>=0&&M[3]>=0&&x.insert(g,M[0],M[1],M[2],M[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new c3(new PS(this.rawTileData)).layers,this.sourceLayerCoder=new MD(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,i,a,l){this.loadVTLayers();const u=e.params||{},h=Ka(u.filter),g=e.tileResult,x=e.transform,b=g.bufferedTilespaceBounds,T=this.grid.query(b.min.x,b.min.y,b.max.x,b.max.y,(B,V,W,q)=>hD(g.bufferedTilespaceGeometry,B,V,W,q));T.sort(gX);let M=null;x.elevation&&T.length>0&&(M=Av.create(x.elevation,this.tileID));const A={};let O;for(let B=0;B<T.length;B++){const V=T[B];if(V===O)continue;O=V;const W=this.featureIndexArray.get(V);let q=null;this.loadMatchingFeature(A,W,h,u.layers,u.availableImages,i,a,l,(ne,ae,le,ie=0)=>(q||(q=xd(ne,this.tileID.canonical,e.tileTransform)),ae.queryIntersectsFeature(g,ne,le,q,this.z,e.transform,e.pixelPosMatrix,M,ie)))}return A}loadMatchingFeature(e,i,a,l,u,h,g,x,b){const{featureIndex:T,bucketIndex:M,sourceLayerIndex:A,layoutVertexArrayOffset:O}=i,B=this.bucketLayerIDs[M];if(l&&!function(ne,ae){for(let le=0;le<ne.length;le++)if(ae.indexOf(ne[le])>=0)return!0;return!1}(l,B))return;const V=this.sourceLayerCoder.decode(A),W=this.vtLayers[V].feature(T);if(a.needGeometry){const ne=qp(W,!0);if(!a.filter(new uo(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!a.filter(new uo(this.tileID.overscaledZ),W))return;const q=this.getId(W,V);for(let ne=0;ne<B.length;ne++){const ae=B[ne];if(l&&l.indexOf(ae)<0)continue;const le=h[ae];if(!le)continue;let ie={};q!==void 0&&x&&(ie=x.getState(le.sourceLayer||"_geojsonTileLayer",q));const ue=ct({},g[ae]);ue.paint=UD(ue.paint,le.paint,W,ie,u),ue.layout=UD(ue.layout,le.layout,W,ie,u);const Ee=!b||b(W,le,ie,O);if(!Ee)continue;const Be=new zD(W,this.z,this.x,this.y,q);Be.layer=ue;let je=e[ae];je===void 0&&(je=e[ae]=[]),je.push({featureIndex:T,feature:Be,intersectionZ:Ee})}}lookupSymbolFeatures(e,i,a,l,u,h,g,x){const b={};this.loadVTLayers();const T=Ka(u);for(const M of e)this.loadMatchingFeature(b,{bucketIndex:a,sourceLayerIndex:l,featureIndex:M,layoutVertexArrayOffset:0},T,h,g,x,i);return b}loadFeature(e){const{featureIndex:i,sourceLayerIndex:a}=e;this.loadVTLayers();const l=this.sourceLayerCoder.decode(a),u=this.vtFeatures[l];if(u[i])return u[i];const h=this.vtLayers[l].feature(i);return u[i]=h,h}hasLayer(e){for(const i of this.bucketLayerIDs)for(const a of i)if(e===a)return!0;return!1}getId(e,i){let a=e.id;if(this.promoteId){const l=typeof this.promoteId=="string"?this.promoteId:this.promoteId[i];l!=null&&(a=e.properties[l]),typeof a=="boolean"&&(a=Number(a))}return a}}function UD(r,e,i,a,l){return sr(r,(u,h)=>{const g=e instanceof hf?e.get(h):null;return g&&g.evaluate?g.evaluate(i,a,l):g})}function gX(r,e){return e-r}rn(f3,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const yX=ki([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vX=ki([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),_X=ki([{name:"a_projected_pos",components:4,type:"Float32"}],4);ki([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const xX=ki([{name:"a_z_offset",components:1,type:"Float32"}],4),bX=ki([{name:"a_texb",components:2,type:"Uint16"}]),wX=ki([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),SX=ki([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ki([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const HD=ki([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),CX=ki([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ki([{name:"triangle",components:3,type:"Uint16"}]),ki([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ki([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),ki([{type:"Float32",name:"offsetX"}]),ki([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var _s=24;const _h=128;function p3(r,e){const{expression:i}=e;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new uo(r+1))};if(i.kind==="source")return{kind:"source"};{const{zoomStops:a,interpolationType:l}=i;let u=0;for(;u<a.length&&a[u]<=r;)u++;u=Math.max(0,u-1);let h=u;for(;h<a.length&&a[h]<r+1;)h++;h=Math.min(a.length-1,h);const g=a[u],x=a[h];return i.kind==="composite"?{kind:"composite",minZoom:g,maxZoom:x,interpolationType:l}:{kind:"camera",minZoom:g,maxZoom:x,minSize:i.evaluate(new uo(g)),maxSize:i.evaluate(new uo(x)),interpolationType:l}}}function W1(r,{uSize:e,uSizeT:i},{lowerSize:a,upperSize:l}){return r.kind==="source"?a/_h:r.kind==="composite"?Mn(a/_h,l/_h,i):e}function bd(r,e){let i=0,a=0;if(r.kind==="constant")a=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:l,minZoom:u,maxZoom:h}=r,g=l?Qe(el.interpolationFactor(l,e,u,h),0,1):0;r.kind==="camera"?a=Mn(r.minSize,r.maxSize,g):i=g}return{uSizeT:i,uSize:a}}var EX=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:_h,evaluateSizeForFeature:W1,evaluateSizeForZoom:bd,getSizeData:p3});function TX(r,e,i){return r.sections.forEach(a=>{a.text=function(l,u,h){const g=u.layout.get("text-transform").evaluate(h,{});return g==="uppercase"?l=l.toLocaleUpperCase():g==="lowercase"&&(l=l.toLocaleLowerCase()),Is.applyArabicShaping&&(l=Is.applyArabicShaping(l)),l}(a.text,e,i)}),r}const K1={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function IX(r){return r==="︶"||r==="﹈"||r==="︸"||r==="﹄"||r==="﹂"||r==="︾"||r==="︼"||r==="︺"||r==="︘"||r==="﹀"||r==="︐"||r==="︓"||r==="︔"||r==="｀"||r==="￣"||r==="︑"||r==="︒"}function MX(r){return r==="︵"||r==="﹇"||r==="︷"||r==="﹃"||r==="﹁"||r==="︽"||r==="︻"||r==="︹"||r==="︗"||r==="︿"}const m3=3;function PX(r,e,i){e.glyphs=[],r===1&&i.readMessage(AX,e)}function AX(r,e,i){if(r===3){const{id:a,bitmap:l,width:u,height:h,left:g,top:x,advance:b}=i.readMessage(RX,{});e.glyphs.push({id:a,bitmap:new xf({width:u+2*m3,height:h+2*m3},l),metrics:{width:u,height:h,left:g,top:x,advance:b}})}else r===4?e.ascender=i.readSVarint():r===5&&(e.descender=i.readSVarint())}function RX(r,e,i){r===1?e.id=i.readVarint():r===2?e.bitmap=i.readBytes():r===3?e.width=i.readVarint():r===4?e.height=i.readVarint():r===5?e.left=i.readSVarint():r===6?e.top=i.readSVarint():r===7&&(e.advance=i.readVarint())}const GD=m3;function g3(r){let e=0,i=0;for(const h of r)e+=h.w*h.h,i=Math.max(i,h.w);r.sort((h,g)=>g.h-h.h);const a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let l=0,u=0;for(const h of r)for(let g=a.length-1;g>=0;g--){const x=a[g];if(!(h.w>x.w||h.h>x.h)){if(h.x=x.x,h.y=x.y,u=Math.max(u,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===x.w&&h.h===x.h){const b=a.pop();g<a.length&&(a[g]=b)}else h.h===x.h?(x.x+=h.w,x.w-=h.w):h.w===x.w?(x.y+=h.h,x.h-=h.h):(a.push({x:x.x+h.w,y:x.y,w:x.w-h.w,h:h.h}),x.y+=h.h,x.h-=h.h);break}}return{w:l,h:u,fill:e/(l*u)||0}}const ac=1;class y3{constructor(e,{pixelRatio:i,version:a,stretchX:l,stretchY:u,content:h}){this.paddedRect=e,this.pixelRatio=i,this.stretchX=l,this.stretchY=u,this.content=h,this.version=a}get tl(){return[this.paddedRect.x+ac,this.paddedRect.y+ac]}get br(){return[this.paddedRect.x+this.paddedRect.w-ac,this.paddedRect.y+this.paddedRect.h-ac]}get displaySize(){return[(this.paddedRect.w-2*ac)/this.pixelRatio,(this.paddedRect.h-2*ac)/this.pixelRatio]}}class qD{constructor(e,i){const a={},l={};this.haveRenderCallbacks=[];const u=[];this.addImages(e,a,u),this.addImages(i,l,u);const{w:h,h:g}=g3(u),x=new da({width:h||1,height:g||1});for(const b in e){const T=e[b],M=a[b].paddedRect;da.copy(T.data,x,{x:0,y:0},{x:M.x+ac,y:M.y+ac},T.data)}for(const b in i){const T=i[b],M=l[b].paddedRect,A=M.x+ac,O=M.y+ac,B=T.data.width,V=T.data.height;da.copy(T.data,x,{x:0,y:0},{x:A,y:O},T.data),da.copy(T.data,x,{x:0,y:V-1},{x:A,y:O-1},{width:B,height:1}),da.copy(T.data,x,{x:0,y:0},{x:A,y:O+V},{width:B,height:1}),da.copy(T.data,x,{x:B-1,y:0},{x:A-1,y:O},{width:1,height:V}),da.copy(T.data,x,{x:0,y:0},{x:A+B,y:O},{width:1,height:V})}this.image=x,this.iconPositions=a,this.patternPositions=l}addImages(e,i,a){for(const l in e){const u=e[l],h={x:0,y:0,w:u.data.width+2*ac,h:u.data.height+2*ac};a.push(h),i[l]=new y3(h,u),u.hasRenderCallback&&this.haveRenderCallbacks.push(l)}}patchUpdatedImages(e,i,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(l=>e.hasImage(l,a)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,a);for(const l in e.getUpdatedImages(a))this.patchUpdatedImage(this.iconPositions[l],e.getImage(l,a),i),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l,a),i)}patchUpdatedImage(e,i,a){if(!e||!i||e.version===i.version)return;e.version=i.version;const[l,u]=e.tl;a.update(i.data,void 0,{x:l,y:u})}}rn(y3,"ImagePosition"),rn(qD,"ImageAtlas");const jo={horizontal:1,vertical:2,horizontalOnly:3},WD=-17;class Z1{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,i){const a=new Z1;return a.scale=e||1,a.fontStack=i,a}static forImage(e){const i=new Z1;return i.imageName=e,i}}class Rv{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,i){const a=new Rv;for(let l=0;l<e.sections.length;l++){const u=e.sections[l];u.image?a.addImageSection(u):a.addTextSection(u,i)}return a}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(i,a){let l="";for(let u=0;u<i.length;u++){const h=i.charCodeAt(u+1)||null,g=i.charCodeAt(u-1)||null;l+=!a&&(h&&Vy(h)&&!K1[i[u+1]]||g&&Vy(g)&&!K1[i[u-1]])||!K1[i[u]]?i[u]:K1[i[u]]}return l}(this.text,e)}trim(){let e=0;for(let a=0;a<this.text.length&&AS[this.text.charCodeAt(a)];a++)e++;let i=this.text.length;for(let a=this.text.length-1;a>=0&&a>=e&&AS[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)}substring(e,i){const a=new Rv;return a.text=this.text.substring(e,i),a.sectionIndex=this.sectionIndex.slice(e,i),a.sections=this.sections,a}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,i)=>Math.max(e,this.sections[i].scale),0)}addTextSection(e,i){this.text+=e.text,this.sections.push(Z1.forText(e.scale,e.fontStack||i));const a=this.sections.length-1;for(let l=0;l<e.text.length;++l)this.sectionIndex.push(a)}addImageSection(e){const i=e.image?e.image.namePrimary:"";if(i.length===0)return void ve("Can't add FormattedSection with an empty image.");const a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCodePoint(a),this.sections.push(Z1.forImage(i)),this.sectionIndex.push(this.sections.length-1)):ve("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function v3(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B){const V=Rv.fromFeature(r,l);M===jo.vertical&&V.verticalizePunctuation(A);let W=[];const q=function(ue,Ee,Be,je,Ge,tt){if(!ue)return[];const Ze=[],nt=function(At,lt,ft,Ft,Jt,tr){let lr=0;for(let pr=0;pr<At.length();pr++){const er=At.getSection(pr);lr+=KD(At.getCodePoint(pr),er,Ft,Jt,lt,tr)}return lr/Math.max(1,Math.ceil(lr/ft))}(ue,Ee,Be,je,Ge,tt),Xe=ue.text.indexOf("​")>=0;let ut=0;for(let At=0;At<ue.length();At++){const lt=ue.getSection(At),ft=ue.getCodePoint(At);if(AS[ft]||(ut+=KD(ft,lt,je,Ge,Ee,tt)),At<ue.length()-1){const Ft=!((bt=ft)<11904||!(mn["Bopomofo Extended"](bt)||mn.Bopomofo(bt)||mn["CJK Compatibility Forms"](bt)||mn["CJK Compatibility Ideographs"](bt)||mn["CJK Compatibility"](bt)||mn["CJK Radicals Supplement"](bt)||mn["CJK Strokes"](bt)||mn["CJK Symbols and Punctuation"](bt)||mn["CJK Unified Ideographs Extension A"](bt)||mn["CJK Unified Ideographs"](bt)||mn["Enclosed CJK Letters and Months"](bt)||mn["Halfwidth and Fullwidth Forms"](bt)||mn.Hiragana(bt)||mn["Ideographic Description Characters"](bt)||mn["Kangxi Radicals"](bt)||mn["Katakana Phonetic Extensions"](bt)||mn.Katakana(bt)||mn["Vertical Forms"](bt)||mn["Yi Radicals"](bt)||mn["Yi Syllables"](bt)));(kX[ft]||Ft||lt.imageName)&&Ze.push(XD(At+1,ut,nt,Ze,OX(ft,ue.getCodePoint(At+1),Ft&&Xe),!1))}}var bt;return YD(XD(ue.length(),ut,nt,Ze,0,!0))}(V,b,u,e,a,O),{processBidirectionalText:ne,processStyledBidirectionalText:ae}=Is;if(ne&&V.sections.length===1){const ue=ne(V.toString(),q);for(const Ee of ue){const Be=new Rv;Be.text=Ee,Be.sections=V.sections;for(let je=0;je<Ee.length;je++)Be.sectionIndex.push(0);W.push(Be)}}else if(ae){const ue=ae(V.text,V.sectionIndex,q);for(const Ee of ue){const Be=new Rv;Be.text=Ee[0],Be.sectionIndex=Ee[1],Be.sections=V.sections,W.push(Be)}}else W=function(ue,Ee){const Be=[],je=ue.text;let Ge=0;for(const tt of Ee)Be.push(ue.substring(Ge,tt)),Ge=tt;return Ge<je.length&&Be.push(ue.substring(Ge,je.length)),Be}(V,q);const le=[],ie={positionedLines:le,text:V.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:M,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ue,Ee,Be,je,Ge,tt,Ze,nt,Xe,ut,bt,At){let lt=0,ft=0,Ft=0;const Jt=nt==="right"?1:nt==="left"?0:.5;let tr=!1;for(const Hr of Ge){const Ur=Hr.getSections();for(const qr of Ur){if(qr.imageName)continue;const yn=Ee[qr.fontStack];if(yn&&(tr=yn.ascender!==void 0&&yn.descender!==void 0,!tr))break}if(!tr)break}let lr=0;for(const Hr of Ge){Hr.trim();const Ur=Hr.getMaxScale(),qr=(Ur-1)*_s,yn={positionedGlyphs:[],lineOffset:0};ue.positionedLines[lr]=yn;const Dn=yn.positionedGlyphs;let ui=0;if(!Hr.length()){ft+=tt,++lr;continue}let Mi=0,Yn=0;for(let On=0;On<Hr.length();On++){const Tn=Hr.getSection(On),_i=Hr.getSectionIndex(On),Di=Hr.getCodePoint(On);let ri=Tn.scale,oo=null,Vo=null,To=null,yo=_s,Pa=0;const Uo=!(Xe===jo.horizontal||!bt&&!F0(Di)||bt&&(AS[Di]||(pr=Di,mn.Arabic(pr)||mn["Arabic Supplement"](pr)||mn["Arabic Extended-A"](pr)||mn["Arabic Presentation Forms-A"](pr)||mn["Arabic Presentation Forms-B"](pr))));if(Tn.imageName){const Qo=je[Tn.imageName];if(!Qo)continue;To=Tn.imageName,ue.iconsInText=ue.iconsInText||!0,Vo=Qo.paddedRect;const ao=Qo.displaySize;ri=ri*_s/At,oo={width:ao[0],height:ao[1],left:ac,top:-GD,advance:Uo?ao[1]:ao[0],localGlyph:!1},Pa=tr?-oo.height*ri:WD+Ur*_s-ao[1]*ri,yo=oo.advance;const jl=(Uo?ao[0]:ao[1])*ri-_s*Ur;jl>0&&jl>ui&&(ui=jl)}else{const Qo=Be[Tn.fontStack];if(!Qo)continue;Qo[Di]&&(Vo=Qo[Di]);const ao=Ee[Tn.fontStack];if(!ao)continue;const jl=ao.glyphs[Di];if(!jl)continue;if(oo=jl.metrics,yo=Di!==8203?_s:0,tr){const Md=ao.ascender!==void 0?Math.abs(ao.ascender):0,Sf=ao.descender!==void 0?Math.abs(ao.descender):0,Cf=(Md+Sf)*ri;Mi<Cf&&(Mi=Cf,Yn=(Md-Sf)/2*ri),Pa=-Md*ri}else Pa=WD+(Ur-ri)*_s}Uo?(ue.verticalizable=!0,Dn.push({glyph:Di,imageName:To,x:lt,y:ft+Pa,vertical:Uo,scale:ri,localGlyph:oo.localGlyph,fontStack:Tn.fontStack,sectionIndex:_i,metrics:oo,rect:Vo}),lt+=yo*ri+ut):(Dn.push({glyph:Di,imageName:To,x:lt,y:ft+Pa,vertical:Uo,scale:ri,localGlyph:oo.localGlyph,fontStack:Tn.fontStack,sectionIndex:_i,metrics:oo,rect:Vo}),lt+=oo.advance*ri+ut)}Dn.length!==0&&(Ft=Math.max(lt-ut,Ft),tr?JD(Dn,Jt,ui,Yn,tt*Ur/2):JD(Dn,Jt,ui,0,tt/2)),lt=0;const Un=tt*Ur+ui;yn.lineOffset=Math.max(ui,qr),ft+=Un,++lr}var pr;const er=ft,{horizontalAlign:or,verticalAlign:kr}=RS(Ze);(function(Hr,Ur,qr,yn,Dn,ui){const Mi=(Ur-qr)*Dn,Yn=-ui*yn;for(const Un of Hr)for(const On of Un.positionedGlyphs)On.x+=Mi,On.y+=Yn})(ue.positionedLines,Jt,or,kr,Ft,er),ue.top+=-kr*er,ue.bottom=ue.top+er,ue.left+=-or*Ft,ue.right=ue.left+Ft,ue.hasBaseline=tr}(ie,e,i,a,W,h,g,x,M,b,A,B),!function(ue){for(const Ee of ue)if(Ee.positionedGlyphs.length!==0)return!1;return!0}(le)&&ie}const AS={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},kX={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function KD(r,e,i,a,l,u){if(e.imageName){const h=a[e.imageName];return h?h.displaySize[0]*e.scale*_s/u+l:0}{const h=i[e.fontStack],g=h&&h.glyphs[r];return g?g.metrics.advance*e.scale+l:0}}function ZD(r,e,i,a){const l=Math.pow(r-e,2);return a?r<e?l/2:2*l:l+Math.abs(i)*i}function OX(r,e,i){let a=0;return r===10&&(a-=1e4),i&&(a+=150),r!==40&&r!==65288||(a+=50),e!==41&&e!==65289||(a+=50),a}function XD(r,e,i,a,l,u){let h=null,g=ZD(e,i,l,u);for(const x of a){const b=ZD(e-x.x,i,l,u)+x.badness;b<=g&&(h=x,g=b)}return{index:r,x:e,priorBreak:h,badness:g}}function YD(r){return r?YD(r.priorBreak).concat(r.index):[]}function RS(r){let e=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function JD(r,e,i,a,l){if(!(e||i||a||l))return;const u=r.length-1,h=r[u],g=(h.x+h.metrics.advance*h.scale)*e;for(let x=0;x<=u;x++)r[x].x-=g,r[x].y+=i+a+l}function zX(r,e,i,a){const{horizontalAlign:l,verticalAlign:u}=RS(a),h=i[0]-r.displaySize[0]*l,g=i[1]-r.displaySize[1]*u;return{imagePrimary:r,imageSecondary:e,top:g,bottom:g+r.displaySize[1],left:h,right:h+r.displaySize[0]}}function QD(r,e,i,a,l,u){const h=r.imagePrimary;let g;if(h.content){const W=h.content,q=h.pixelRatio||1;g=[W[0]/q,W[1]/q,h.displaySize[0]-W[2]/q,h.displaySize[1]-W[3]/q]}const x=e.left*u,b=e.right*u;let T,M,A,O;i==="width"||i==="both"?(O=l[0]+x-a[3],M=l[0]+b+a[1]):(O=l[0]+(x+b-h.displaySize[0])/2,M=O+h.displaySize[0]);const B=e.top*u,V=e.bottom*u;return i==="height"||i==="both"?(T=l[1]+B-a[0],A=l[1]+V+a[2]):(T=l[1]+(B+V-h.displaySize[1])/2,A=T+h.displaySize[1]),{imagePrimary:h,imageSecondary:void 0,top:T,right:M,bottom:A,left:O,collisionPadding:g}}class wf extends oe{constructor(e,i,a,l,u){super(e,i),this.angle=l,this.z=a,u!==void 0&&(this.segment=u)}clone(){return new wf(this.x,this.y,this.z,this.angle,this.segment)}}function e6(r,e,i,a,l){if(e.segment===void 0)return!0;let u=e,h=e.segment+1,g=0;for(;g>-i/2;){if(h--,h<0)return!1;g-=r[h].dist(u),u=r[h]}g+=r[h].dist(r[h+1]),h++;const x=[];let b=0;for(;g<i/2;){const T=r[h],M=r[h+1];if(!M)return!1;let A=r[h-1].angleTo(T)-T.angleTo(M);for(A=Math.abs((A+3*Math.PI)%(2*Math.PI)-Math.PI),x.push({distance:g,angleDelta:A}),b+=A;g-x[0].distance>a;)b-=x.shift().angleDelta;if(b>l)return!1;h++,g+=T.dist(M)}return!0}function t6(r){let e=0;for(let i=0;i<r.length-1;i++)e+=r[i].dist(r[i+1]);return e}function r6(r,e,i){return r?.6*e*i:0}function n6(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function DX(r,e,i,a,l,u){const h=r6(i,l,u),g=n6(i,a)*u;let x=0;const b=t6(r)/2;for(let T=0;T<r.length-1;T++){const M=r[T],A=r[T+1],O=M.dist(A);if(x+O>b){const B=(b-x)/O,V=Mn(M.x,A.x,B),W=Mn(M.y,A.y,B),q=new wf(V,W,0,A.angleTo(M),T);return!h||e6(r,q,g,h,e)?q:void 0}x+=O}}function LX(r,e,i,a,l,u,h,g,x){const b=r6(a,u,h),T=n6(a,l),M=T*h,A=r[0].x===0||r[0].x===x||r[0].y===0||r[0].y===x;return e-M<e/4&&(e=M+e/4),i6(r,A?e/2*g%e:(T/2+2*u)*h*g%e,e,b,i,M,A,!1,x)}function i6(r,e,i,a,l,u,h,g,x){const b=u/2,T=t6(r);let M=0,A=e-i,O=[];for(let B=0;B<r.length-1;B++){const V=r[B],W=r[B+1],q=V.dist(W),ne=W.angleTo(V);for(;A+i<M+q;){A+=i;const ae=(A-M)/q,le=Mn(V.x,W.x,ae),ie=Mn(V.y,W.y,ae);if(le>=0&&le<x&&ie>=0&&ie<x&&A-b>=0&&A+b<=T){const ue=new wf(le,ie,0,ne,B);a&&!e6(r,ue,u,a,l)||O.push(ue)}}M+=q}return g||O.length||h||(O=i6(r,M/2,i,a,l,u,h,!0,x)),O}function o6(r,e,i,a,l){const u=[];for(let h=0;h<r.length;h++){const g=r[h];let x;for(let b=0;b<g.length-1;b++){let T=g[b],M=g[b+1];T.x<e&&M.x<e||(T.x<e?T=new oe(e,T.y+(e-T.x)/(M.x-T.x)*(M.y-T.y))._round():M.x<e&&(M=new oe(e,T.y+(e-T.x)/(M.x-T.x)*(M.y-T.y))._round()),T.y<i&&M.y<i||(T.y<i?T=new oe(T.x+(i-T.y)/(M.y-T.y)*(M.x-T.x),i)._round():M.y<i&&(M=new oe(T.x+(i-T.y)/(M.y-T.y)*(M.x-T.x),i)._round()),T.x>=a&&M.x>=a||(T.x>=a?T=new oe(a,T.y+(a-T.x)/(M.x-T.x)*(M.y-T.y))._round():M.x>=a&&(M=new oe(a,T.y+(a-T.x)/(M.x-T.x)*(M.y-T.y))._round()),T.y>=l&&M.y>=l||(T.y>=l?T=new oe(T.x+(l-T.y)/(M.y-T.y)*(M.x-T.x),l)._round():M.y>=l&&(M=new oe(T.x+(l-T.y)/(M.y-T.y)*(M.x-T.x),l)._round()),x&&T.equals(x[x.length-1])||(x=[T],u.push(x)),x.push(M)))))}}return u}rn(wf,"Anchor");const X1=1e20;function a6(r,e,i,a,l,u,h,g,x){for(let b=e;b<e+a;b++)s6(r,i*u+b,u,l,h,g,x);for(let b=i;b<i+l;b++)s6(r,b*u+e,1,a,h,g,x)}function s6(r,e,i,a,l,u,h){u[0]=0,h[0]=-X1,h[1]=X1,l[0]=r[e];for(let g=1,x=0,b=0;g<a;g++){l[g]=r[e+g*i];const T=g*g;do{const M=u[x];b=(l[g]-l[M]+T-M*M)/(g-M)/2}while(b<=h[x]&&--x>-1);x++,u[x]=g,h[x]=b,h[x+1]=X1}for(let g=0,x=0;g<a;g++){for(;h[x+1]<g;)x++;const b=u[x],T=g-b;r[e+g*i]=l[b]+T*T}}const xh=2;class kv{constructor(e,i,a){this.requestManager=e,this.localGlyphMode=i,this.localFontFamily=a,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,i){this.urls[i]=e}getGlyphs(e,i,a){const l=[],u=this.urls[i]||$.GLYPHS_URL;for(const h in e)for(const g of e[h])l.push({stack:h,id:g});Ot(l,({stack:h,id:g},x)=>{let b=this.entries[h];b||(b=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=b.glyphs[g];if(T!==void 0)return void x(null,{stack:h,id:g,glyph:T});if(T=this._tinySDF(b,h,g),T)return b.glyphs[g]=T,void x(null,{stack:h,id:g,glyph:T});const M=Math.floor(g/256);if(256*M>65535)return void x(new Error("glyphs > 65535 not supported"));if(b.ranges[M])return void x(null,{stack:h,id:g,glyph:T});let A=b.requests[M];A||(A=b.requests[M]=[],kv.loadGlyphRange(h,M,u,this.requestManager,(O,B)=>{if(B){b.ascender=B.ascender,b.descender=B.descender;for(const V in B.glyphs)this._doesCharSupportLocalGlyph(+V)||(b.glyphs[+V]=B.glyphs[+V]);b.ranges[M]=!0}for(const V of A)V(O,B);delete b.requests[M]})),A.push((O,B)=>{O?x(O):B&&x(null,{stack:h,id:g,glyph:B.glyphs[g]||null})})},(h,g)=>{if(h)a(h);else if(g){const x={};for(const{stack:b,id:T,glyph:M}of g)x[b]===void 0&&(x[b]={}),x[b].glyphs===void 0&&(x[b].glyphs={}),x[b].glyphs[T]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics},x[b].ascender=this.entries[b].ascender,x[b].descender=this.entries[b].descender;a(null,x)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==0&&(this.localGlyphMode===2?!!this.localFontFamily:!!this.localFontFamily&&(mn["CJK Unified Ideographs"](e)||mn["Hangul Syllables"](e)||mn.Hiragana(e)||mn.Katakana(e)||mn["CJK Symbols and Punctuation"](e)||mn["CJK Unified Ideographs Extension A"](e)||mn["CJK Unified Ideographs Extension B"](e)))}_tinySDF(e,i,a){const l=this.localFontFamily;if(!l||!this._doesCharSupportLocalGlyph(a))return;let u=e.tinySDF;if(!u){let V="400";/bold/i.test(i)?V="900":/medium/i.test(i)?V="500":/light/i.test(i)&&(V="200"),u=e.tinySDF=new kv.TinySDF({fontFamily:l,fontWeight:V,fontSize:24*xh,buffer:3*xh,radius:8*xh}),u.fontWeight=V}if(this.localGlyphs[u.fontWeight][a])return this.localGlyphs[u.fontWeight][a];const h=String.fromCodePoint(a),{data:g,width:x,height:b,glyphWidth:T,glyphHeight:M,glyphLeft:A,glyphTop:O,glyphAdvance:B}=u.draw(h);return this.localGlyphs[u.fontWeight][a]={id:a,bitmap:new xf({width:x,height:b},g),metrics:{width:T/xh,height:M/xh,left:A/xh,top:O/xh-27,advance:B/xh,localGlyph:!0}}}}kv.loadGlyphRange=function(r,e,i,a,l){const u=256*e,h=u+255,g=a.transformRequest(a.normalizeGlyphsURL(i).replace("{fontstack}",r).replace("{range}",`${u}-${h}`),Pe.Glyphs);ke(g,(x,b)=>{if(x)l(x);else if(b){const T={},M=function(A){return new PS(A).readFields(PX,{})}(b);for(const A of M.glyphs)T[A.id]=A;l(null,{glyphs:T,ascender:M.ascender,descender:M.descender})}})},kv.TinySDF=class{constructor({fontSize:r=24,buffer:e=3,radius:i=8,cutoff:a=.25,fontFamily:l="sans-serif",fontWeight:u="normal",fontStyle:h="normal"}={}){this.buffer=e,this.cutoff=a,this.radius=i;const g=this.size=r+4*e,x=this._createCanvas(g),b=this.ctx=x.getContext("2d",{willReadFrequently:!0});b.font=`${h} ${u} ${r}px ${l}`,b.textBaseline="alphabetic",b.textAlign="left",b.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g)}_createCanvas(r){const e=document.createElement("canvas");return e.width=e.height=r,e}draw(r){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:a,actualBoundingBoxLeft:l,actualBoundingBoxRight:u}=this.ctx.measureText(r),h=Math.ceil(i),g=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(u-l))),x=Math.min(this.size-this.buffer,h+Math.ceil(a)),b=g+2*this.buffer,T=x+2*this.buffer,M=Math.max(b*T,0),A=new Uint8ClampedArray(M),O={data:A,width:b,height:T,glyphWidth:g,glyphHeight:x,glyphTop:h,glyphLeft:0,glyphAdvance:e};if(g===0||x===0)return O;const{ctx:B,buffer:V,gridInner:W,gridOuter:q}=this;B.clearRect(V,V,g,x),B.fillText(r,V,V+h);const ne=B.getImageData(V,V,g,x);q.fill(X1,0,M),W.fill(0,0,M);for(let ae=0;ae<x;ae++)for(let le=0;le<g;le++){const ie=ne.data[4*(ae*g+le)+3]/255;if(ie===0)continue;const ue=(ae+V)*b+le+V;if(ie===1)q[ue]=0,W[ue]=X1;else{const Ee=.5-ie;q[ue]=Ee>0?Ee*Ee:0,W[ue]=Ee<0?Ee*Ee:0}}a6(q,0,0,b,T,b,this.f,this.v,this.z),a6(W,V,V,g,x,b,this.f,this.v,this.z);for(let ae=0;ae<M;ae++){const le=Math.sqrt(q[ae])-Math.sqrt(W[ae]);A[ae]=Math.round(255-255*(le/this.radius+this.cutoff))}return O}};const Zp=ac;function l6(r,e,i,a){const l=[],u=r.imagePrimary,h=u.pixelRatio,g=u.paddedRect.w-2*Zp,x=u.paddedRect.h-2*Zp,b=r.right-r.left,T=r.bottom-r.top,M=u.stretchX||[[0,g]],A=u.stretchY||[[0,x]],O=(tt,Ze)=>tt+Ze[1]-Ze[0],B=M.reduce(O,0),V=A.reduce(O,0),W=g-B,q=x-V;let ne=0,ae=B,le=0,ie=V,ue=0,Ee=W,Be=0,je=q;if(u.content&&a){const tt=u.content;ne=kS(M,0,tt[0]),le=kS(A,0,tt[1]),ae=kS(M,tt[0],tt[2]),ie=kS(A,tt[1],tt[3]),ue=tt[0]-ne,Be=tt[1]-le,Ee=tt[2]-tt[0]-ae,je=tt[3]-tt[1]-ie}const Ge=(tt,Ze,nt,Xe)=>{const ut=OS(tt.stretch-ne,ae,b,r.left),bt=zS(tt.fixed-ue,Ee,tt.stretch,B),At=OS(Ze.stretch-le,ie,T,r.top),lt=zS(Ze.fixed-Be,je,Ze.stretch,V),ft=OS(nt.stretch-ne,ae,b,r.left),Ft=zS(nt.fixed-ue,Ee,nt.stretch,B),Jt=OS(Xe.stretch-le,ie,T,r.top),tr=zS(Xe.fixed-Be,je,Xe.stretch,V),lr=new oe(ut,At),pr=new oe(ft,At),er=new oe(ft,Jt),or=new oe(ut,Jt),kr=new oe(bt/h,lt/h),Hr=new oe(Ft/h,tr/h),Ur=e*Math.PI/180;if(Ur){const Yn=Math.sin(Ur),Un=Math.cos(Ur),On=[Un,-Yn,Yn,Un];lr._matMult(On),pr._matMult(On),or._matMult(On),er._matMult(On)}const qr=tt.stretch+tt.fixed,yn=nt.stretch+nt.fixed,Dn=Ze.stretch+Ze.fixed,ui=Xe.stretch+Xe.fixed,Mi=r.imageSecondary;return{tl:lr,tr:pr,bl:or,br:er,texPrimary:{x:u.paddedRect.x+Zp+qr,y:u.paddedRect.y+Zp+Dn,w:yn-qr,h:ui-Dn},texSecondary:Mi?{x:Mi.paddedRect.x+Zp+qr,y:Mi.paddedRect.y+Zp+Dn,w:yn-qr,h:ui-Dn}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:kr,pixelOffsetBR:Hr,minFontScaleX:Ee/h/b,minFontScaleY:je/h/T,isSDF:i}};if(a&&(u.stretchX||u.stretchY)){const tt=c6(M,W,B),Ze=c6(A,q,V);for(let nt=0;nt<tt.length-1;nt++){const Xe=tt[nt],ut=tt[nt+1];for(let bt=0;bt<Ze.length-1;bt++)l.push(Ge(Xe,Ze[bt],ut,Ze[bt+1]))}}else l.push(Ge({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:g+1},{fixed:0,stretch:x+1}));return l}function kS(r,e,i){let a=0;for(const l of r)a+=Math.max(e,Math.min(i,l[1]))-Math.max(e,Math.min(i,l[0]));return a}function c6(r,e,i){const a=[{fixed:-Zp,stretch:0}];for(const[l,u]of r){const h=a[a.length-1];a.push({fixed:l-h.stretch,stretch:h.stretch}),a.push({fixed:l-h.stretch,stretch:h.stretch+(u-l)})}return a.push({fixed:e+Zp,stretch:i}),a}function OS(r,e,i,a){return r/e*i+a}function zS(r,e,i,a){return r-e*i/a}function $X(r,e,i,a){const l=e+r.positionedLines[a].lineOffset;return a===0?i+l/2:i+(l+(e+r.positionedLines[a-1].lineOffset))/2}function BX(r,e=1,i=!1){let a=1/0,l=1/0,u=-1/0,h=-1/0;const g=r[0];for(let O=0;O<g.length;O++){const B=g[O];(!O||B.x<a)&&(a=B.x),(!O||B.y<l)&&(l=B.y),(!O||B.x>u)&&(u=B.x),(!O||B.y>h)&&(h=B.y)}const x=Math.min(u-a,h-l);let b=x/2;const T=new Qh([],FX);if(x===0)return new oe(a,l);for(let O=a;O<u;O+=x)for(let B=l;B<h;B+=x)T.push(new Ov(O+b,B+b,b,r));let M=function(O){let B=0,V=0,W=0;const q=O[0];for(let ne=0,ae=q.length,le=ae-1;ne<ae;le=ne++){const ie=q[ne],ue=q[le],Ee=ie.x*ue.y-ue.x*ie.y;V+=(ie.x+ue.x)*Ee,W+=(ie.y+ue.y)*Ee,B+=3*Ee}return new Ov(V/B,W/B,0,O)}(r),A=T.length;for(;T.length;){const O=T.pop();(O.d>M.d||!M.d)&&(M=O,i&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,A)),O.max-M.d<=e||(b=O.h/2,T.push(new Ov(O.p.x-b,O.p.y-b,b,r)),T.push(new Ov(O.p.x+b,O.p.y-b,b,r)),T.push(new Ov(O.p.x-b,O.p.y+b,b,r)),T.push(new Ov(O.p.x+b,O.p.y+b,b,r)),A+=4)}return i&&(console.log(`num probes: ${A}`),console.log(`best distance: ${M.d}`)),M.p}function FX(r,e){return e.max-r.max}class Ov{constructor(e,i,a,l){this.p=new oe(e,i),this.h=a,this.d=function(u,h){let g=!1,x=1/0;for(let b=0;b<h.length;b++){const T=h[b];for(let M=0,A=T.length,O=A-1;M<A;O=M++){const B=T[M],V=T[O];B.y>u.y!=V.y>u.y&&u.x<(V.x-B.x)*(u.y-B.y)/(V.y-B.y)+B.x&&(g=!g),x=Math.min(x,cD(u,B,V))}}return(g?1:-1)*Math.sqrt(x)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}}const zv=7,_3=Number.POSITIVE_INFINITY,NX=Math.sqrt(2);function x3(r,[e,i]){let a=0,l=0;if(i===_3){e<0&&(e=0);const u=e/NX;switch(r){case"top-right":case"top-left":l=u-zv;break;case"bottom-right":case"bottom-left":l=-u+zv;break;case"bottom":l=-e+zv;break;case"top":l=e-zv}switch(r){case"top-right":case"bottom-right":a=-u;break;case"top-left":case"bottom-left":a=u;break;case"left":a=e;break;case"right":a=-e}}else{switch(e=Math.abs(e),i=Math.abs(i),r){case"top-right":case"top-left":case"top":l=i-zv;break;case"bottom-right":case"bottom-left":case"bottom":l=-i+zv}switch(r){case"top-right":case"bottom-right":case"right":a=-e;break;case"top-left":case"bottom-left":case"left":a=e}}return[a,l]}function jX(r,e,i,a,l,u,h,g,x,b,T){r.createArrays(),r.tilePixelRatio=Zt/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const M=r.layers[0].layout,A=r.layers[0]._unevaluatedLayout._values,O={};if(r.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:ne}=r.textSizeData;O.compositeTextSizes=[A["text-size"].possiblyEvaluate(new uo(q),g),A["text-size"].possiblyEvaluate(new uo(ne),g)]}if(r.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:ne}=r.iconSizeData;O.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new uo(q),g),A["icon-size"].possiblyEvaluate(new uo(ne),g)]}O.layoutTextSize=A["text-size"].possiblyEvaluate(new uo(x+1),g),O.layoutIconSize=A["icon-size"].possiblyEvaluate(new uo(x+1),g),O.textMaxSize=A["text-size"].possiblyEvaluate(new uo(18),g);const B=M.get("text-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point",V=M.get("text-size");let W=!1;for(const q of r.features)if(q.icon&&q.icon.nameSecondary){W=!0;break}for(const q of r.features){const ne=M.get("text-font").evaluate(q,{},g).join(","),ae=V.evaluate(q,{},g),le=O.layoutTextSize.evaluate(q,{},g),ie=(O.layoutIconSize.evaluate(q,{},g),{horizontal:{},vertical:void 0}),ue=q.text;let Ee,Be=[0,0];if(ue){const tt=ue.toString(),Ze=M.get("text-letter-spacing").evaluate(q,{},g)*_s,nt=M.get("text-line-height").evaluate(q,{},g)*_s,Xe=Ow(tt)?Ze:0,ut=M.get("text-anchor").evaluate(q,{},g),bt=M.get("text-variable-anchor");if(!bt){const Jt=M.get("text-radial-offset").evaluate(q,{},g);Be=Jt?x3(ut,[Jt*_s,_3]):M.get("text-offset").evaluate(q,{},g).map(tr=>tr*_s)}let At=B?"center":M.get("text-justify").evaluate(q,{},g);const lt=M.get("symbol-placement")==="point",ft=lt?M.get("text-max-width").evaluate(q,{},g)*_s:1/0,Ft=Jt=>{r.allowVerticalPlacement&&jy(tt)&&(ie.vertical=v3(ue,e,i,l,ne,ft,nt,ut,Jt,Xe,Be,jo.vertical,!0,le,ae))};if(!B&&bt){const Jt=At==="auto"?bt.map(lr=>b3(lr)):[At];let tr=!1;for(let lr=0;lr<Jt.length;lr++){const pr=Jt[lr];if(!ie.horizontal[pr])if(tr)ie.horizontal[pr]=ie.horizontal[0];else{const er=v3(ue,e,i,l,ne,ft,nt,"center",pr,Xe,Be,jo.horizontal,!1,le,ae);er&&(ie.horizontal[pr]=er,tr=er.positionedLines.length===1)}}Ft("left")}else{if(At==="auto"&&(At=b3(ut)),lt||M.get("text-writing-mode").indexOf("horizontal")>=0||!jy(tt)){const Jt=v3(ue,e,i,l,ne,ft,nt,ut,At,Xe,Be,jo.horizontal,!1,le,ae);Jt&&(ie.horizontal[At]=Jt)}Ft(lt?"left":At)}}let je=!1;if(q.icon&&q.icon.namePrimary){const tt=a[q.icon.namePrimary];tt&&(Ee=zX(l[q.icon.namePrimary],q.icon.nameSecondary?l[q.icon.nameSecondary]:void 0,M.get("icon-offset").evaluate(q,{},g),M.get("icon-anchor").evaluate(q,{},g)),je=tt.sdf,r.sdfIcons===void 0?r.sdfIcons=tt.sdf:r.sdfIcons!==tt.sdf&&ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tt.pixelRatio!==r.pixelRatio||M.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const Ge=h6(ie.horizontal)||ie.vertical;r.iconsInText||(r.iconsInText=!!Ge&&Ge.iconsInText),(Ge||Ee)&&VX(r,q,ie,Ee,a,O,le,0,Be,je,h,g,b,T,W)}u&&r.generateCollisionDebugBuffers(x,r.collisionBoxArray)}function b3(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function VX(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B){let V=u.textMaxSize.evaluate(e,{},M);V===void 0&&(V=h);const W=r.layers[0].layout,q=W.get("icon-offset").evaluate(e,{},M),ne=h6(i.horizontal)||i.vertical,ae=A.name==="globe",le=_s,ie=h/le,ue=r.tilePixelRatio*V/le,Ee=(ut=r.overscaling,r.zoom>18&&ut>2&&(ut>>=1),Math.max(Zt/(512*ut),1)*W.get("symbol-spacing")),Be=W.get("text-padding")*r.tilePixelRatio,je=W.get("icon-padding")*r.tilePixelRatio,Ge=_e(W.get("text-max-angle")),tt=W.get("text-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",Ze=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",nt=W.get("symbol-placement"),Xe=Ee/2;var ut;const bt=W.get("icon-text-fit").evaluate(e,{},M),At=W.get("icon-text-fit-padding").evaluate(e,{},M),lt=bt!=="none";let ft;r.hasAnyIconTextFit===!1&&lt&&(r.hasAnyIconTextFit=!0),a&&lt&&(r.allowVerticalPlacement&&i.vertical&&(ft=QD(a,i.vertical,bt,At,q,ie)),ne&&(a=QD(a,ne,bt,At,q,ie)));const Ft=(Jt,tr,lr)=>{if(tr.x<0||tr.x>=Zt||tr.y<0||tr.y>=Zt)return;let pr=null;if(ae){const{x:er,y:or,z:kr}=A.projectTilePoint(tr.x,tr.y,lr);pr={anchor:new wf(er,or,kr,0,void 0),up:A.upVector(lr,tr.x,tr.y)}}(function(er,or,kr,Hr,Ur,qr,yn,Dn,ui,Mi,Yn,Un,On,Tn,_i,Di,ri,oo,Vo,To,yo,Pa,Uo,Qo,ao,jl,Md){const Sf=er.addToLineVertexArray(or,Hr);let Cf,_x,xx,PC,g$,y$,v$,_$=0,x$=0,b$=0,w$=0,b4=-1,w4=-1;const Pd={};let S$=n1("");const Hg=kr?kr.anchor:or,S4=ui.layout.get("icon-text-fit").evaluate(yo,{},ao)!=="none";let C4=0,E4=0;if(ui._unevaluatedLayout.getValue("text-radial-offset")===void 0?[C4,E4]=ui.layout.get("text-offset").evaluate(yo,{},ao).map(Mc=>Mc*_s):(C4=ui.layout.get("text-radial-offset").evaluate(yo,{},ao)*_s,E4=_3),er.allowVerticalPlacement&&Ur.vertical){const Mc=Ur.vertical;if(_i)y$=w3(Mc),Dn&&(v$=w3(Dn));else{const Pc=ui.layout.get("text-rotate").evaluate(yo,{},ao)+90;xx=DS(Mi,Hg,or,Yn,Un,On,Mc,Tn,Pc,Di),Dn&&(PC=DS(Mi,Hg,or,Yn,Un,On,Dn,oo,Pc))}}if(qr){const Mc=ui.layout.get("icon-rotate").evaluate(yo,{},ao),Pc=l6(qr,Mc,Uo,S4),Gv=Dn?l6(Dn,Mc,Uo,S4):void 0;_x=DS(Mi,Hg,or,Yn,Un,On,qr,oo,Mc),_$=4*Pc.length;const C$=er.iconSizeData;let Gg=null;C$.kind==="source"?(Gg=[_h*ui.layout.get("icon-size").evaluate(yo,{},ao)],Gg[0]>Xp&&ve(`${er.layerIds[0]}: Value for "icon-size" is >= ${Y1}. Reduce your "icon-size".`)):C$.kind==="composite"&&(Gg=[_h*Pa.compositeIconSizes[0].evaluate(yo,{},ao),_h*Pa.compositeIconSizes[1].evaluate(yo,{},ao)],(Gg[0]>Xp||Gg[1]>Xp)&&ve(`${er.layerIds[0]}: Value for "icon-size" is >= ${Y1}. Reduce your "icon-size".`)),er.addSymbols(er.icon,Pc,Gg,To,Vo,yo,!1,kr,or,Sf.lineStartIndex,Sf.lineLength,-1,Qo,ao,jl,Md),b4=er.icon.placedSymbolArray.length-1,Gv&&(x$=4*Gv.length,er.addSymbols(er.icon,Gv,Gg,To,Vo,yo,jo.vertical,kr,or,Sf.lineStartIndex,Sf.lineLength,-1,Qo,ao,jl,Md),w4=er.icon.placedSymbolArray.length-1)}for(const Mc in Ur.horizontal){const Pc=Ur.horizontal[Mc];Cf||(S$=n1(Pc.text),_i?g$=w3(Pc):Cf=DS(Mi,Hg,or,Yn,Un,On,Pc,Tn,ui.layout.get("text-rotate").evaluate(yo,{},ao),Di));const Gv=Pc.positionedLines.length===1;if(b$+=u6(er,kr,or,Pc,yn,ui,_i,yo,Di,Sf,Ur.vertical?jo.horizontal:jo.horizontalOnly,Gv?Object.keys(Ur.horizontal):[Mc],Pd,b4,Pa,Qo,ao,jl),Gv)break}Ur.vertical&&(w$+=u6(er,kr,or,Ur.vertical,yn,ui,_i,yo,Di,Sf,jo.vertical,["vertical"],Pd,w4,Pa,Qo,ao,jl));let im=-1;const T4=(Mc,Pc)=>Mc?Math.max(Mc,Pc):Pc;im=T4(g$,im),im=T4(y$,im),im=T4(v$,im);const Cte=im>-1?1:0;er.glyphOffsetArray.length>=rx.MAX_GLYPHS&&ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yo.sortKey!==void 0&&er.addToSortKeyRanges(er.symbolInstances.length,yo.sortKey),er.symbolInstances.emplaceBack(or.x,or.y,Hg.x,Hg.y,Hg.z,Pd.right>=0?Pd.right:-1,Pd.center>=0?Pd.center:-1,Pd.left>=0?Pd.left:-1,Pd.vertical>=0?Pd.vertical:-1,b4,w4,S$,Cf!==void 0?Cf:er.collisionBoxArray.length,Cf!==void 0?Cf+1:er.collisionBoxArray.length,xx!==void 0?xx:er.collisionBoxArray.length,xx!==void 0?xx+1:er.collisionBoxArray.length,_x!==void 0?_x:er.collisionBoxArray.length,_x!==void 0?_x+1:er.collisionBoxArray.length,PC||er.collisionBoxArray.length,PC?PC+1:er.collisionBoxArray.length,Yn,b$,w$,_$,x$,Cte,0,C4,E4,im,0,S4?1:0)})(r,tr,pr,Jt,i,a,l,ft,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,Be,tt,x,0,je,Ze,q,e,u,b,T,M,O,B)};if(nt==="line")for(const Jt of o6(e.geometry,0,0,Zt,Zt)){const tr=LX(Jt,Ee,Ge,i.vertical||ne,a,le,ue,r.overscaling,Zt);for(const lr of tr)ne&&UX(r,ne.text,Xe,lr)||Ft(Jt,lr,M)}else if(nt==="line-center"){for(const Jt of e.geometry)if(Jt.length>1){const tr=DX(Jt,Ge,i.vertical||ne,a,le,ue);tr&&Ft(Jt,tr,M)}}else if(e.type==="Polygon")for(const Jt of a3(e.geometry,0)){const tr=BX(Jt,16);Ft(Jt[0],new wf(tr.x,tr.y,0,0,void 0),M)}else if(e.type==="LineString")for(const Jt of e.geometry)Ft(Jt,new wf(Jt[0].x,Jt[0].y,0,0,void 0),M);else if(e.type==="Point")for(const Jt of e.geometry)for(const tr of Jt)Ft([tr],new wf(tr.x,tr.y,0,0,void 0),M)}const Y1=255,Xp=Y1*_h;function u6(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q){const ne=function(ie,ue,Ee,Be,je,Ge,tt,Ze){const nt=[];if(ue.positionedLines.length===0)return nt;const Xe=Be.layout.get("text-rotate").evaluate(Ge,{})*Math.PI/180,ut=function(Ft){const Jt=Ft[0],tr=Ft[1],lr=Jt*tr;return lr>0?[Jt,-tr]:lr<0?[-Jt,tr]:Jt===0?[tr,Jt]:[tr,-Jt]}(Ee);let bt=Math.abs(ue.top-ue.bottom);for(const Ft of ue.positionedLines)bt-=Ft.lineOffset;const At=ue.positionedLines.length,lt=bt/At;let ft=ue.top-Ee[1];for(let Ft=0;Ft<At;++Ft){const Jt=ue.positionedLines[Ft];ft=$X(ue,lt,ft,Ft);for(const tr of Jt.positionedGlyphs){if(!tr.rect)continue;const lr=tr.rect||{};let pr=GD+1,er=!0,or=1,kr=0;if(tr.imageName){const To=tt[tr.imageName];if(!To)continue;if(To.sdf){ve("SDF images are not supported in formatted text and will be ignored.");continue}er=!1,or=To.pixelRatio,pr=ac/or}const Hr=(je||Ze)&&tr.vertical,Ur=tr.metrics.advance*tr.scale/2,qr=tr.metrics,yn=tr.rect;if(yn===null)continue;Ze&&ue.verticalizable&&(kr=tr.imageName?Ur-tr.metrics.width*tr.scale/2:0);const Dn=je?[tr.x+Ur,tr.y]:[0,0];let ui=[0,0],Mi=[0,0],Yn=!1;je||(Hr?(Mi=[tr.x+Ur+ut[0],tr.y+ut[1]-kr],Yn=!0):ui=[tr.x+Ur+Ee[0],tr.y+Ee[1]-kr]);const Un=yn.w*tr.scale/(or*(tr.localGlyph?xh:1)),On=yn.h*tr.scale/(or*(tr.localGlyph?xh:1));let Tn,_i,Di,ri;if(Hr){const To=tr.y-ft,yo=new oe(-Ur,Ur-To),Pa=-Math.PI/2,Uo=new oe(...Mi);Tn=new oe(-Ur+ui[0],ui[1]),Tn._rotateAround(Pa,yo)._add(Uo),Tn.x+=-To+Ur,Tn.y-=(qr.left-pr)*tr.scale;const Qo=tr.imageName?qr.advance*tr.scale:_s*tr.scale,ao=String.fromCodePoint(tr.glyph);IX(ao)?Tn.x+=(1-pr)*tr.scale:MX(ao)?Tn.x+=Qo-qr.height*tr.scale+(-pr-1)*tr.scale:Tn.x+=tr.imageName||qr.width+2*pr===yn.w&&qr.height+2*pr===yn.h?(Qo-On)/2:(Qo-(qr.height+2*pr)*tr.scale)/2,_i=new oe(Tn.x,Tn.y-Un),Di=new oe(Tn.x+On,Tn.y),ri=new oe(Tn.x+On,Tn.y-Un)}else{const To=(qr.left-pr)*tr.scale-Ur+ui[0],yo=(-qr.top-pr)*tr.scale+ui[1],Pa=To+Un,Uo=yo+On;Tn=new oe(To,yo),_i=new oe(Pa,yo),Di=new oe(To,Uo),ri=new oe(Pa,Uo)}if(Xe){let To;To=je?new oe(0,0):Yn?new oe(ut[0],ut[1]):new oe(Ee[0],Ee[1]),Tn._rotateAround(Xe,To),_i._rotateAround(Xe,To),Di._rotateAround(Xe,To),ri._rotateAround(Xe,To)}const oo=new oe(0,0),Vo=new oe(0,0);nt.push({tl:Tn,tr:_i,bl:Di,br:ri,texPrimary:lr,texSecondary:void 0,writingMode:ue.writingMode,glyphOffset:Dn,sectionIndex:tr.sectionIndex,isSDF:er,pixelOffsetTL:oo,pixelOffsetBR:Vo,minFontScaleX:0,minFontScaleY:0})}}return nt}(0,a,x,u,h,g,l,r.allowVerticalPlacement),ae=r.textSizeData;let le=null;ae.kind==="source"?(le=[_h*u.layout.get("text-size").evaluate(g,{},W)],le[0]>Xp&&ve(`${r.layerIds[0]}: Value for "text-size" is >= ${Y1}. Reduce your "text-size".`)):ae.kind==="composite"&&(le=[_h*B.compositeTextSizes[0].evaluate(g,{},W),_h*B.compositeTextSizes[1].evaluate(g,{},W)],(le[0]>Xp||le[1]>Xp)&&ve(`${r.layerIds[0]}: Value for "text-size" is >= ${Y1}. Reduce your "text-size".`)),r.addSymbols(r.text,ne,le,x,h,g,T,e,i,b.lineStartIndex,b.lineLength,O,V,W,q,!1);for(const ie of M)A[ie]=r.text.placedSymbolArray.length-1;return 4*ne.length}function h6(r){for(const e in r)return r[e];return null}function DS(r,e,i,a,l,u,h,g,x,b){let T=h.top,M=h.bottom,A=h.left,O=h.right;const B=h.collisionPadding;if(B&&(A-=B[0],T-=B[1],O+=B[2],M+=B[3]),x){const V=new oe(A,T),W=new oe(O,T),q=new oe(A,M),ne=new oe(O,M),ae=_e(x);let le=new oe(0,0);b&&(le=new oe(b[0],b[1])),V._rotateAround(ae,le),W._rotateAround(ae,le),q._rotateAround(ae,le),ne._rotateAround(ae,le),A=Math.min(V.x,W.x,q.x,ne.x),O=Math.max(V.x,W.x,q.x,ne.x),T=Math.min(V.y,W.y,q.y,ne.y),M=Math.max(V.y,W.y,q.y,ne.y)}return r.emplaceBack(e.x,e.y,e.z,i.x,i.y,A,T,O,M,g,a,l,u),r.length-1}function w3(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const e=r.bottom-r.top;return e>0?Math.max(10,e):null}function UX(r,e,i,a){const l=r.compareText;if(e in l){const u=l[e];for(let h=u.length-1;h>=0;h--)if(a.dist(u[h])<i)return!0}else l[e]=[];return l[e].push(a),!1}function d6(r,e){const i=r.fovAboveCenter,a=r.elevation?r.elevation.getMinElevationBelowMSL()*e:0,l=(r._camera.position[2]*r.worldSize-a)/Math.cos(r._pitch),u=Math.sin(i)*l/Math.sin(Math.max(Math.PI/2-r._pitch-i,.01)),h=Math.sin(r._pitch)*u+l;return Math.min(1.01*h,l*(1/r._horizonShift))}function Lg(r,e){if(!e.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:e};const i=Math.pow(2,-r.z),a=r.x*i,l=(r.x+1)*i,u=r.y*i,h=(r.y+1)*i,g=va(a),x=va(l),b=Ro(u),T=Ro(h),M=e.project(g,b),A=e.project(x,b),O=e.project(x,T),B=e.project(g,T);let V=Math.min(M.x,A.x,O.x,B.x),W=Math.min(M.y,A.y,O.y,B.y),q=Math.max(M.x,A.x,O.x,B.x),ne=Math.max(M.y,A.y,O.y,B.y);const ae=i/16;function le(ue,Ee,Be,je,Ge,tt){const Ze=(Be+Ge)/2,nt=(je+tt)/2,Xe=e.project(va(Ze),Ro(nt)),ut=Math.max(0,V-Xe.x,W-Xe.y,Xe.x-q,Xe.y-ne);V=Math.min(V,Xe.x),q=Math.max(q,Xe.x),W=Math.min(W,Xe.y),ne=Math.max(ne,Xe.y),ut>ae&&(le(ue,Xe,Be,je,Ze,nt),le(Xe,Ee,Ze,nt,Ge,tt))}le(M,A,a,u,l,u),le(A,O,l,u,l,h),le(O,B,l,h,a,h),le(B,M,a,h,a,u),V-=ae,W-=ae,q+=ae,ne+=ae;const ie=1/Math.max(q-V,ne-W);return{scale:ie,x:V*ie,y:W*ie,x2:q*ie,y2:ne*ie,projection:e}}function f6(r,e,i,a,l,u,h,g,x){if(x.name==="globe")return ys(r,e,new sn(i,a,l),!1);const b=Lg({z:i,x:a,y:l},x);return new Xn([(u+b.x/b.scale)*e,e*(b.y/b.scale),h],[(u+b.x2/b.scale)*e,e*(b.y2/b.scale),g])}function p6(r,{x:e,y:i},a=0){return new oe(((e-a)*r.scale-r.x)*Zt,(i*r.scale-r.y)*Zt)}function m6(r,e,i=0){return ce.fromValues(((e.x-i)*r.scale-r.x)*Zt,(e.y*r.scale-r.y)*Zt,ou(e.z,e.y))}const HX=U.identity(new Float32Array(16));class Yp{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,i){return{x:0,y:0,z:0}}unproject(e,i){return new zn(0,0)}projectTilePoint(e,i,a){return{x:e,y:i,z:0}}locationPoint(e,i,a=!0){return e._coordinatePoint(e.locationCoordinate(i),a)}pixelsPerMeter(e,i){return Oi(1,e)*i}pixelSpaceConversion(e,i,a){return 1}farthestPixelDistance(e){return d6(e,e.pixelsPerMeter)}pointCoordinate(e,i,a,l){const u=e.horizonLineFromTop(!1),h=new oe(i,Math.max(u,a));return e.rayIntersectionCoordinate(e.pointRayIntersection(h,l))}pointCoordinate3D(e,i,a){const l=new oe(i,a);if(e.elevation)return e.elevation.pointCoordinate(l);{const u=this.pointCoordinate(e,l.x,l.y,0);return[u.x,u.y,u.z]}}isPointAboveHorizon(e,i){if(e.elevation)return!this.pointCoordinate3D(e,i.x,i.y);const a=e.horizonLineFromTop();return i.y<a}createInversionMatrix(e,i){return HX}createTileMatrix(e,i,a){let l,u,h;const g=a.canonical,x=U.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const b=Lg(g,this);l=1,u=b.x+a.wrap*b.scale,h=b.y,U.scale(x,x,[l/b.scale,l/b.scale,e.pixelsPerMeter/i])}else l=i/e.zoomScale(g.z),u=(g.x+Math.pow(2,g.z)*a.wrap)*l,h=g.y*l;return U.translate(x,x,[u,h,0]),U.scale(x,x,[l/Zt,l/Zt,1]),x}upVector(e,i,a){return[0,0,1]}upVectorScale(e,i,a){return{metersToTile:1}}}class GX extends Yp{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[i,a]=this.parallels=e.parallels||[29.5,45.5],l=Math.sin(_e(i));this.n=(l+Math.sin(_e(a)))/2,this.c=1+l*(2*this.n-l),this.r0=Math.sqrt(this.c)/this.n}project(e,i){const{n:a,c:l,r0:u}=this,h=_e(e-this.center[0]),g=_e(i),x=Math.sqrt(l-2*a*Math.sin(g))/a;return{x:x*Math.sin(h*a),y:x*Math.cos(h*a)-u,z:0}}unproject(e,i){const{n:a,c:l,r0:u}=this,h=u+i;let g=Math.atan2(e,Math.abs(h))*Math.sign(h);h*a<0&&(g-=Math.PI*Math.sign(e)*Math.sign(h));const x=_e(this.center[0])*a;g=jt(g,-Math.PI-x,Math.PI-x);const b=Qe(Fe(g/a)+this.center[0],-180,180),T=Math.asin(Qe((l-(e*e+h*h)*a*a)/(2*a),-1,1)),M=Qe(Fe(T),-ha,ha);return new zn(b,M)}}const J1=1.340264,Q1=-.081106,ex=893e-6,tx=.003796,LS=Math.sqrt(3)/2;class qX extends Yp{project(e,i){i=i/180*Math.PI,e=e/180*Math.PI;const a=Math.asin(LS*Math.sin(i)),l=a*a,u=l*l*l;return{x:.5*(e*Math.cos(a)/(LS*(J1+3*Q1*l+u*(7*ex+9*tx*l)))/Math.PI+.5),y:1-.5*(a*(J1+Q1*l+u*(ex+tx*l))/Math.PI+1),z:0}}unproject(e,i){e=(2*e-.5)*Math.PI;let a=i=(2*(1-i)-1)*Math.PI,l=a*a,u=l*l*l;for(let T,M,A,O=0;O<12&&(M=a*(J1+Q1*l+u*(ex+tx*l))-i,A=J1+3*Q1*l+u*(7*ex+9*tx*l),T=M/A,a=Qe(a-T,-Math.PI/3,Math.PI/3),l=a*a,u=l*l*l,!(Math.abs(T)<1e-12));++O);const h=LS*e*(J1+3*Q1*l+u*(7*ex+9*tx*l))/Math.cos(a),g=Math.asin(Math.sin(a)/LS),x=Qe(180*h/Math.PI,-180,180),b=Qe(180*g/Math.PI,-ha,ha);return new zn(x,b)}}class WX extends Yp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,i){return{x:.5+e/360,y:.5-i/360,z:0}}unproject(e,i){const a=360*(e-.5),l=Qe(360*(.5-i),-ha,ha);return new zn(a,l)}}const Dv=Math.PI/2;function $S(r){return Math.tan((Dv+r)/2)}class KX extends Yp{constructor(e){super(e),this.center=e.center||[0,30];const[i,a]=this.parallels=e.parallels||[30,30];let l=_e(i),u=_e(a);this.southernCenter=l+u<0,this.southernCenter&&(l=-l,u=-u);const h=Math.cos(l),g=$S(l);this.n=l===u?Math.sin(l):Math.log(h/Math.cos(u))/Math.log($S(u)/g),this.f=h*Math.pow($S(l),this.n)/this.n}project(e,i){i=_e(i),this.southernCenter&&(i=-i),e=_e(e-this.center[0]);const a=1e-6,{n:l,f:u}=this;u>0?i<-Dv+a&&(i=-Dv+a):i>Dv-a&&(i=Dv-a);const h=u/Math.pow($S(i),l);let g=h*Math.sin(l*e),x=u-h*Math.cos(l*e);return g=.5*(g/Math.PI+.5),x=.5*(x/Math.PI+.5),{x:g,y:this.southernCenter?x:1-x,z:0}}unproject(e,i){e=(2*e-.5)*Math.PI,this.southernCenter&&(i=1-i),i=(2*(1-i)-.5)*Math.PI;const{n:a,f:l}=this,u=l-i,h=Math.sign(u),g=Math.sign(a)*Math.sqrt(e*e+u*u);let x=Math.atan2(e,Math.abs(u))*h;u*a<0&&(x-=Math.PI*Math.sign(e)*h);const b=Qe(Fe(x/a)+this.center[0],-180,180),T=Qe(Fe(2*Math.atan(Math.pow(l/g,1/a))-Dv),-ha,ha);return new zn(b,this.southernCenter?-T:T)}}class g6 extends Yp{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,i){return{x:ro(e),y:Eo(i),z:0}}unproject(e,i){const a=va(e),l=Ro(i);return new zn(a,l)}}const y6=_e(ha);class ZX extends Yp{project(e,i){const a=(i=_e(i))*i,l=a*a;return{x:.5*((e=_e(e))*(.8707-.131979*a+l*(l*(.003971*a-.001529*l)-.013791))/Math.PI+.5),y:1-.5*(i*(1.007226+a*(.015085+l*(.028874*a-.044475-.005916*l)))/Math.PI+1),z:0}}unproject(e,i){e=(2*e-.5)*Math.PI;let a=i=(2*(1-i)-1)*Math.PI,l=25,u=0,h=a*a;do{h=a*a;const b=h*h;u=(a*(1.007226+h*(.015085+b*(.028874*h-.044475-.005916*b)))-i)/(1.007226+h*(.045255+b*(.259866*h-.311325-.005916*11*b))),a=Qe(a-u,-y6,y6)}while(Math.abs(u)>1e-6&&--l>0);h=a*a;const g=Qe(Fe(e/(.8707+h*(h*(h*h*h*(.003971-.001529*h)-.013791)-.131979))),-180,180),x=Fe(a);return new zn(g,x)}}const v6=_e(ha);class XX extends Yp{project(e,i){i=_e(i),e=_e(e);const a=Math.cos(i),l=2/Math.PI,u=Math.acos(a*Math.cos(e/2)),h=Math.sin(u)/u,g=.5*(e*l+2*a*Math.sin(e/2)/h)||0,x=.5*(i+Math.sin(i)/h)||0;return{x:.5*(g/Math.PI+.5),y:1-.5*(x/Math.PI+1),z:0}}unproject(e,i){let a=e=(2*e-.5)*Math.PI,l=i=(2*(1-i)-1)*Math.PI,u=25;const h=1e-6;let g=0,x=0;do{const b=Math.cos(l),T=Math.sin(l),M=2*T*b,A=T*T,O=b*b,B=Math.cos(a/2),V=Math.sin(a/2),W=2*B*V,q=V*V,ne=1-O*B*B,ae=ne?1/ne:0,le=ne?Math.acos(b*B)*Math.sqrt(1/ne):0,ie=.5*(2*le*b*V+2*a/Math.PI)-e,ue=.5*(le*T+l)-i,Ee=.5*ae*(O*q+le*b*B*A)+1/Math.PI,Be=ae*(W*M/4-le*T*V),je=.125*ae*(M*V-le*T*O*W),Ge=.5*ae*(A*B+le*q*b)+.5,tt=Be*je-Ge*Ee;g=(ue*Be-ie*Ge)/tt,x=(ie*je-ue*Ee)/tt,a=Qe(a-g,-Math.PI,Math.PI),l=Qe(l-x,-v6,v6)}while((Math.abs(g)>h||Math.abs(x)>h)&&--u>0);return new zn(Fe(a),Fe(l))}}class _6 extends Yp{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(_e(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,i){const{scale:a,cosPhi:l}=this;return{x:_e(e)*l*a+.5,y:-Math.sin(_e(i))/l*a+.5,z:0}}unproject(e,i){const{scale:a,cosPhi:l}=this,u=-(i-.5)/a,h=Qe(Fe((e-.5)/a)/l,-180,180),g=Math.asin(Qe(u*l,-1,1)),x=Qe(Fe(g),-ha,ha);return new zn(h,x)}}class YX extends g6{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,i,a){const l=xl(e,i,a),u=vs(ia(a));return ce.transformMat4(l,l,u),{x:l[0],y:l[1],z:l[2]}}locationPoint(e,i){const a=ua(i.lat,i.lng),l=ce.normalize([],a),u=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(i),e._centerAltitude):e._centerAltitude,h=Oi(1,0)*Zt*u;ce.scaleAndAdd(a,a,l,h);const g=U.identity(new Float64Array(16));return U.multiply(g,e.pixelMatrix,e.globeMatrix),ce.transformMat4(a,a,g),new oe(a[0],a[1])}pixelsPerMeter(e,i){return Oi(1,0)*i}pixelSpaceConversion(e,i,a){const l=Oi(1,e)*i,u=Mn(Oi(1,45)*i,l,a);return this.pixelsPerMeter(e,i)/u}createTileMatrix(e,i,a){const l=Us(ia(a.canonical));return U.multiply(new Float64Array(16),e.globeMatrix,l)}createInversionMatrix(e,i){const{center:a}=e,l=vs(ia(i));return U.rotateY(l,l,_e(a.lng)),U.rotateX(l,l,_e(a.lat)),U.scale(l,l,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(l)}pointCoordinate(e,i,a,l){return Ms(e,i,a,!0)||new Si(0,0)}pointCoordinate3D(e,i,a){const l=this.pointCoordinate(e,i,a,0);return[l.x,l.y,l.z]}isPointAboveHorizon(e,i){return!Ms(e,i.x,i.y,!1)}farthestPixelDistance(e){const i=function(l,u){const h=l.cameraToCenterDistance,g=l._centerAltitude*u,x=l._camera,b=l._camera.forward(),T=ce.add([],ce.scale([],b,-h),[0,0,g]),M=l.worldSize/(2*Math.PI),A=[0,0,-M],O=l.width/l.height,B=Math.tan(l.fovAboveCenter),V=ce.scale([],x.up(),B),W=ce.scale([],x.right(),B*O),q=ce.normalize([],ce.add([],ce.add([],b,V),W)),ne=[];let ae;if(new bn(T,q).closestPointOnSphere(A,M,ne)){const le=ce.add([],ne,A),ie=ce.sub([],le,T);ae=Math.cos(l.fovAboveCenter)*ce.length(ie)}else{const le=ce.sub([],T,A),ie=ce.sub([],A,T);ce.normalize(ie,ie);const ue=ce.length(le)-M;ae=Math.sqrt(ue*(ue+2*M));const Ee=Math.acos(ae/(M+ue))-Math.acos(ce.dot(b,ie));ae*=Math.cos(Ee)}return 1.01*ae}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),a=Na(e.zoom);if(a>0){const l=d6(e,Oi(1,e.center.lat)*e.worldSize),u=e.worldSize/(2*Math.PI),h=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Mn(i,l+u*(1-Math.cos(h)),Math.pow(a,10))}return i}upVector(e,i,a){return xl(i,a,e,1)}upVectorScale(e){return{metersToTile:ya(Tc(ia(e)))}}}function BS(r){const e=r.parallels,i=!!e&&Math.abs(e[0]+e[1])<.01;switch(r.name){case"mercator":return new g6(r);case"equirectangular":return new WX(r);case"naturalEarth":return new ZX(r);case"equalEarth":return new qX(r);case"winkelTripel":return new XX(r);case"albers":return i?new _6(r):new GX(r);case"lambertConformalConic":return i?new _6(r):new KX(r);case"globe":return new YX(r)}throw new Error(`Invalid projection name: ${r.name}`)}const JX=new vi({"symbol-placement":new Ir(Lt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ir(Lt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ir(Lt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gn(Lt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ir(Lt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ir(Lt.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Ir(Lt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ir(Lt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ir(Lt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ir(Lt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gn(Lt.layout_symbol["icon-size"]),"icon-text-fit":new gn(Lt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gn(Lt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gn(Lt.layout_symbol["icon-image"]),"icon-rotate":new gn(Lt.layout_symbol["icon-rotate"]),"icon-padding":new Ir(Lt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ir(Lt.layout_symbol["icon-keep-upright"]),"icon-offset":new gn(Lt.layout_symbol["icon-offset"]),"icon-anchor":new gn(Lt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ir(Lt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ir(Lt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ir(Lt.layout_symbol["text-rotation-alignment"]),"text-field":new gn(Lt.layout_symbol["text-field"]),"text-font":new gn(Lt.layout_symbol["text-font"]),"text-size":new gn(Lt.layout_symbol["text-size"]),"text-max-width":new gn(Lt.layout_symbol["text-max-width"]),"text-line-height":new gn(Lt.layout_symbol["text-line-height"]),"text-letter-spacing":new gn(Lt.layout_symbol["text-letter-spacing"]),"text-justify":new gn(Lt.layout_symbol["text-justify"]),"text-radial-offset":new gn(Lt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ir(Lt.layout_symbol["text-variable-anchor"]),"text-anchor":new gn(Lt.layout_symbol["text-anchor"]),"text-max-angle":new Ir(Lt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ir(Lt.layout_symbol["text-writing-mode"]),"text-rotate":new gn(Lt.layout_symbol["text-rotate"]),"text-padding":new Ir(Lt.layout_symbol["text-padding"]),"text-keep-upright":new Ir(Lt.layout_symbol["text-keep-upright"]),"text-transform":new gn(Lt.layout_symbol["text-transform"]),"text-offset":new gn(Lt.layout_symbol["text-offset"]),"text-allow-overlap":new Ir(Lt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ir(Lt.layout_symbol["text-ignore-placement"]),"text-optional":new Ir(Lt.layout_symbol["text-optional"]),visibility:new Ir(Lt.layout_symbol.visibility)});var S3={paint:new vi({"icon-opacity":new gn(Lt.paint_symbol["icon-opacity"]),"icon-emissive-strength":new gn(Lt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new gn(Lt.paint_symbol["text-emissive-strength"]),"icon-color":new gn(Lt.paint_symbol["icon-color"]),"icon-halo-color":new gn(Lt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gn(Lt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gn(Lt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ir(Lt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ir(Lt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new gn(Lt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new gn(Lt.paint_symbol["text-opacity"]),"text-color":new gn(Lt.paint_symbol["text-color"],{runtimeType:Ds,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new gn(Lt.paint_symbol["text-halo-color"]),"text-halo-width":new gn(Lt.paint_symbol["text-halo-width"]),"text-halo-blur":new gn(Lt.paint_symbol["text-halo-blur"]),"text-translate":new Ir(Lt.paint_symbol["text-translate"]),"text-translate-anchor":new Ir(Lt.paint_symbol["text-translate-anchor"])}),layout:JX};class x6{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ys,this.defaultValue=e}evaluate(e){if(e.formattedSection){const i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rn(x6,"FormatSectionOverride",{omit:["defaultValue"]});class FS extends nl{constructor(e,i){super(e,S3,i)}recalculate(e,i){super.recalculate(e,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const a=this.layout.get("text-writing-mode");if(a){const l=[];for(const u of a)l.indexOf(u)<0&&l.push(u);this.layout._values["text-writing-mode"]=l}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,i,a,l){const u=this.layout.get(e).evaluate(i,{},a,l),h=this._unevaluatedLayout._values[e];return h.isDataDriven()||Ii(h.value)||!u?u:function(g,x){return x.replace(/{([^{}]+)}/g,(b,T)=>T in g?String(g[T]):"")}(i.properties,u)}createBucket(e){return new rx(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of S3.paint.overridableProperties){if(!FS.hasPaintOverride(this.layout,e))continue;const i=this.paint.get(e),a=new x6(i),l=new lo(a,i.property.specification);let u=null;u=i.value.kind==="constant"||i.value.kind==="source"?new Ri("source",l):new bo("composite",l,i.value.zoomStops,i.value._interpolationType),this.paint._values[e]=new Pp(i.property,u,i.parameters)}}_handleOverridablePaintPropertyUpdate(e,i,a){return!(!this.layout||i.isDataDriven()||a.isDataDriven())&&FS.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,i){const a=e.get("text-field"),l=S3.paint.properties[i];let u=!1;const h=g=>{for(const x of g)if(l.overrides&&l.overrides.hasOverride(x))return void(u=!0)};if(a.value.kind==="constant"&&a.value.value instanceof ps)h(a.value.value.sections);else if(a.value.kind==="source"){const g=b=>{u||(b instanceof Kl&&fa(b.value)===Tu?h(b.value.sections):b instanceof oh?h(b.sections):b.eachChild(g))},x=a.value;x._styleExpression&&g(x._styleExpression.expression)}return u}getProgramIds(){const e=this.paint.get("icon-opacity").constantOr(1)!==0,i=this.paint.get("text-opacity").constantOr(1)!==0,a=[];return e&&a.push("symbolIcon"),i&&a.push("symbolSDF"),a}getDefaultProgramParams(e,i){return{config:new gf(this,i),overrideFog:!1}}}const QX=ES.types,eY=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function NS(r,e,i,a,l,u,h,g,x,b,T,M,A){const O=g?Math.min(Xp,Math.round(g[0])):0,B=g?Math.min(Xp,Math.round(g[1])):0;r.emplaceBack(e,i,Math.round(32*a),Math.round(32*l),u,h,(O<<1)+(x?1:0),B,16*b,16*T,256*M,256*A)}function jS(r,e,i){r.emplaceBack(e,i)}function VS(r,e,i,a,l,u,h){r.emplaceBack(e,i,a,l,u,h)}function US(r,e,i,a,l){const u=5*e+2;r.float32[u+0]=i,r.float32[u+1]=a,r.float32[u+2]=l}function Lv(r,e,i,a,l){r.emplaceBack(e,i,a,l),r.emplaceBack(e,i,a,l),r.emplaceBack(e,i,a,l),r.emplaceBack(e,i,a,l)}function tY(r){for(const e of r.sections)if(fg(e.text))return!0;return!1}class C3{constructor(e){this.layoutVertexArray=new xg,this.indexArray=new Ca,this.programConfigurations=e,this.segments=new qi,this.dynamicLayoutVertexArray=new $u,this.opacityVertexArray=new Xy,this.placedSymbolArray=new Fw,this.iconTransitioningVertexArray=new fd,this.globeExtVertexArray=new Zy,this.zOffsetVertexArray=new bg}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(e,i,a,l,u){this.isEmpty()||(a&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yX.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_X.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,eY,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,bX.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,vX.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||u)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,xX.members,!0)),this.opacityVertexBuffer.itemSize=1),(a||l)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}rn(C3,"SymbolBuffers");class E3{constructor(e,i,a){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new a,this.segments=new qi,this.collisionVertexArray=new Z0,this.collisionVertexArrayExt=new yl}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,wX.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,SX.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}rn(E3,"CollisionBuffers");class HS{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=U.identity([]),this.placementViewportMatrix=U.identity([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=p3(this.zoom,i["text-size"]),this.iconSizeData=p3(this.zoom,i["icon-size"]);const a=this.layers[0].layout,l=a.get("symbol-sort-key"),u=a.get("symbol-z-order");this.canOverlap=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey=u!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(u==="viewport-y"||u==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=a.get("text-writing-mode").map(h=>jo[h]),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.sourceID=e.sourceID,this.projection=e.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=a.get("symbol-z-elevate")}createArrays(){this.text=new C3(new yd(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new C3(new yd(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new jw,this.lineVertexArray=new Vw,this.symbolInstances=new Q0}calculateGlyphDependencies(e,i,a,l,u){for(let h=0;h<e.length;h++){const g=e.codePointAt(h);if(g===void 0)break;if(i[g]=!0,l&&u&&g<=65535){const x=K1[e.charAt(h)];x&&(i[x.charCodeAt(0)]=!0)}}}populate(e,i,a,l){const u=this.layers[0],h=u.layout,g=this.projection.name==="globe",x=h.get("text-font"),b=h.get("text-field"),T=h.get("icon-image"),M=(b.value.kind!=="constant"||b.value.value instanceof ps&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),A=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,O=h.get("symbol-sort-key");if(this.features=[],!M&&!A)return;const B=i.iconDependencies,V=i.glyphDependencies,W=i.availableImages,q=new uo(this.zoom);for(const{feature:ne,id:ae,index:le,sourceLayerIndex:ie}of e){const ue=u._featureFilter.needGeometry,Ee=qp(ne,ue);if(!u._featureFilter.filter(q,Ee,a))continue;if(ue||(Ee.geometry=xd(ne,a,l)),g&&ne.type!==1&&a.z<=5){const tt=Ee.geometry,Ze=.98078528056,nt=(Xe,ut)=>{const bt=xl(Xe.x,Xe.y,a,1),At=xl(ut.x,ut.y,a,1);return ce.dot(bt,At)<Ze};for(let Xe=0;Xe<tt.length;Xe++)tt[Xe]=fZ(tt[Xe],nt)}let Be,je;if(M){const tt=u.getValueAndResolveTokens("text-field",Ee,a,W),Ze=ps.factory(tt);tY(Ze)&&(this.hasRTLText=!0),(!this.hasRTLText||Mp()==="unavailable"||this.hasRTLText&&Is.isParsed())&&(Be=TX(Ze,u,Ee))}if(A){const tt=u.getValueAndResolveTokens("icon-image",Ee,a,W);je=tt instanceof Qs?tt:Qs.fromString(tt)}if(!Be&&!je)continue;const Ge=this.sortFeaturesByKey?O.evaluate(Ee,{},a):void 0;if(this.features.push({id:ae,text:Be,icon:je,index:le,sourceLayerIndex:ie,geometry:Ee.geometry,properties:ne.properties,type:QX[ne.type],sortKey:Ge}),je&&(B[je.namePrimary]=!0,je.nameSecondary&&(B[je.nameSecondary]=!0)),Be){const tt=x.evaluate(Ee,{},a).join(","),Ze=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(jo.vertical)>=0;for(const nt of Be.sections)if(nt.image)B[nt.image.namePrimary]=!0;else{const Xe=jy(Be.toString()),ut=nt.fontStack||tt,bt=V[ut]=V[ut]||{};this.calculateGlyphDependencies(nt.text,bt,Ze,this.allowVerticalPlacement,Xe)}}}h.get("symbol-placement")==="line"&&(this.features=function(ne){const ae={},le={},ie=[];let ue=0;function Ee(tt){ie.push(ne[tt]),ue++}function Be(tt,Ze,nt){const Xe=le[tt];return delete le[tt],le[Ze]=Xe,ie[Xe].geometry[0].pop(),ie[Xe].geometry[0]=ie[Xe].geometry[0].concat(nt[0]),Xe}function je(tt,Ze,nt){const Xe=ae[Ze];return delete ae[Ze],ae[tt]=Xe,ie[Xe].geometry[0].shift(),ie[Xe].geometry[0]=nt[0].concat(ie[Xe].geometry[0]),Xe}function Ge(tt,Ze,nt){const Xe=nt?Ze[0][Ze[0].length-1]:Ze[0][0];return`${tt}:${Xe.x}:${Xe.y}`}for(let tt=0;tt<ne.length;tt++){const Ze=ne[tt],nt=Ze.geometry,Xe=Ze.text?Ze.text.toString():null;if(!Xe){Ee(tt);continue}const ut=Ge(Xe,nt),bt=Ge(Xe,nt,!0);if(ut in le&&bt in ae&&le[ut]!==ae[bt]){const At=je(ut,bt,nt),lt=Be(ut,bt,ie[At].geometry);delete ae[ut],delete le[bt],le[Ge(Xe,ie[lt].geometry,!0)]=lt,ie[At].geometry=null}else ut in le?Be(ut,bt,nt):bt in ae?je(ut,bt,nt):(Ee(tt),ae[ut]=ue-1,le[bt]=ue-1)}return ie.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ne,ae)=>ne.sortKey-ae.sortKey)}update(e,i,a,l,u){const h=Object.keys(e).length!==0;if(h&&!this.stateDependentLayers.length)return;const g=h?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(e,i,g,a,l,u),this.icon.programConfigurations.updatePaintArrays(e,i,g,a,l,u)}updateZOffset(){const e=(u,h,g)=>{a+=h,a>u.length&&u.resize(a);for(let x=-h;x<0;x++)u.emplace(x+a,g)},i=(u,h,g)=>{l+=h,l>u.length&&u.resize(l);for(let x=-h;x<0;x++)u.emplace(x+l,g)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let a=0,l=0;for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u),{numHorizontalGlyphVertices:g,numVerticalGlyphVertices:x,numIconVertices:b}=h,T=h.zOffset,M=b>0;if((g>0||x>0)&&(e(this.text.zOffsetVertexArray,g,T),e(this.text.zOffsetVertexArray,x,T)),M){const{placedIconSymbolIndex:A,verticalPlacedIconSymbolIndex:O}=h;A>=0&&i(this.icon.zOffsetVertexArray,b,T),O>=0&&i(this.icon.zOffsetVertexArray,h.numVerticalIconVertices,T)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=BS(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,i){const a=this.lineVertexArray.length;if(e.segment!==void 0)for(const{x:l,y:u}of i)this.lineVertexArray.emplaceBack(l,u);return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}}addSymbols(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W){const q=e.indexArray,ne=e.layoutVertexArray,ae=e.globeExtVertexArray,le=e.segments.prepareSegment(4*i.length,ne,q,this.canOverlap?h.sortKey:void 0),ie=this.glyphOffsetArray.length,ue=le.vertexLength,Ee=this.allowVerticalPlacement&&g===jo.vertical?Math.PI/2:0,Be=h.text&&h.text.sections;for(let Ge=0;Ge<i.length;Ge++){const{tl:tt,tr:Ze,bl:nt,br:Xe,texPrimary:ut,texSecondary:bt,pixelOffsetTL:At,pixelOffsetBR:lt,minFontScaleX:ft,minFontScaleY:Ft,glyphOffset:Jt,isSDF:tr,sectionIndex:lr}=i[Ge],pr=le.vertexLength,er=Jt[1];if(NS(ne,b.x,b.y,tt.x,er+tt.y,ut.x,ut.y,a,tr,At.x,At.y,ft,Ft),NS(ne,b.x,b.y,Ze.x,er+Ze.y,ut.x+ut.w,ut.y,a,tr,lt.x,At.y,ft,Ft),NS(ne,b.x,b.y,nt.x,er+nt.y,ut.x,ut.y+ut.h,a,tr,At.x,lt.y,ft,Ft),NS(ne,b.x,b.y,Xe.x,er+Xe.y,ut.x+ut.w,ut.y+ut.h,a,tr,lt.x,lt.y,ft,Ft),x){const{x:or,y:kr,z:Hr}=x.anchor,[Ur,qr,yn]=x.up;VS(ae,or,kr,Hr,Ur,qr,yn),VS(ae,or,kr,Hr,Ur,qr,yn),VS(ae,or,kr,Hr,Ur,qr,yn),VS(ae,or,kr,Hr,Ur,qr,yn),Lv(e.dynamicLayoutVertexArray,or,kr,Hr,Ee)}else Lv(e.dynamicLayoutVertexArray,b.x,b.y,b.z,Ee);if(W){const or=bt||ut;jS(e.iconTransitioningVertexArray,or.x,or.y),jS(e.iconTransitioningVertexArray,or.x+or.w,or.y),jS(e.iconTransitioningVertexArray,or.x,or.y+or.h),jS(e.iconTransitioningVertexArray,or.x+or.w,or.y+or.h)}q.emplaceBack(pr,pr+1,pr+2),q.emplaceBack(pr+1,pr+2,pr+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Jt[0]),Ge!==i.length-1&&lr===i[Ge+1].sectionIndex||e.programConfigurations.populatePaintArrays(ne.length,h,h.index,{},O,B,V,Be&&Be[lr])}const je=x?x.anchor:b;e.placedSymbolArray.emplaceBack(je.x,je.y,je.z,b.x,b.y,ie,this.glyphOffsetArray.length-ie,ue,T,M,b.segment,a?a[0]:0,a?a[1]:0,l[0],l[1],g,0,!1,0,A,0)}_commitLayoutVertex(e,i,a,l,u,h,g){e.emplaceBack(i,a,l,u,h,Math.round(g.x),Math.round(g.y))}_addCollisionDebugVertices(e,i,a,l,u,h,g){const x=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),b=x.vertexLength,T=g.tileAnchorX,M=g.tileAnchorY;for(let O=0;O<4;O++)a.collisionVertexArray.emplaceBack(0,0,0,0);a.collisionVertexArrayExt.emplaceBack(i,-e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(i,e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(i,e.padding,e.padding),a.collisionVertexArrayExt.emplaceBack(i,-e.padding,e.padding),this._commitLayoutVertex(a.layoutVertexArray,l,u,h,T,M,new oe(e.x1,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,l,u,h,T,M,new oe(e.x2,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,l,u,h,T,M,new oe(e.x2,e.y2)),this._commitLayoutVertex(a.layoutVertexArray,l,u,h,T,M,new oe(e.x1,e.y2)),x.vertexLength+=4;const A=a.indexArray;A.emplaceBack(b,b+1),A.emplaceBack(b+1,b+2),A.emplaceBack(b+2,b+3),A.emplaceBack(b+3,b),x.primitiveLength+=4}_addTextDebugCollisionBoxes(e,i,a,l,u,h){for(let g=l;g<u;g++){const x=a.get(g),b=this.getSymbolInstanceTextSize(e,h,i,g);this._addCollisionDebugVertices(x,b,this.textCollisionBox,x.projectedAnchorX,x.projectedAnchorY,x.projectedAnchorZ,h)}}_addIconDebugCollisionBoxes(e,i,a,l,u,h){for(let g=l;g<u;g++){const x=a.get(g),b=this.getSymbolInstanceIconSize(e,i,h.placedIconSymbolIndex);this._addCollisionDebugVertices(x,b,this.iconCollisionBox,x.projectedAnchorX,x.projectedAnchorY,x.projectedAnchorZ,h)}}generateCollisionDebugBuffers(e,i){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new E3(Yy,HD.members,fd),this.iconCollisionBox=new E3(Yy,HD.members,fd);const a=bd(this.iconSizeData,e),l=bd(this.textSizeData,e);for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this._addTextDebugCollisionBoxes(l,e,i,h.textBoxStartIndex,h.textBoxEndIndex,h),this._addTextDebugCollisionBoxes(l,e,i,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h),this._addIconDebugCollisionBoxes(a,e,i,h.iconBoxStartIndex,h.iconBoxEndIndex,h),this._addIconDebugCollisionBoxes(a,e,i,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h)}}getSymbolInstanceTextSize(e,i,a,l){const u=this.text.placedSymbolArray.get(i.rightJustifiedTextSymbolIndex>=0?i.rightJustifiedTextSymbolIndex:i.centerJustifiedTextSymbolIndex>=0?i.centerJustifiedTextSymbolIndex:i.leftJustifiedTextSymbolIndex>=0?i.leftJustifiedTextSymbolIndex:i.verticalPlacedTextSymbolIndex>=0?i.verticalPlacedTextSymbolIndex:l),h=W1(this.textSizeData,e,u)/_s;return this.tilePixelRatio*h}getSymbolInstanceIconSize(e,i,a){const l=this.icon.placedSymbolArray.get(a),u=W1(this.iconSizeData,e,l);return this.tilePixelRatio*u}_commitDebugCollisionVertexUpdate(e,i,a){e.emplaceBack(i,-a,-a),e.emplaceBack(i,a,-a),e.emplaceBack(i,a,a),e.emplaceBack(i,-a,a)}_updateTextDebugCollisionBoxes(e,i,a,l,u,h){for(let g=l;g<u;g++){const x=a.get(g),b=this.getSymbolInstanceTextSize(e,h,i,g);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,b,x.padding)}}_updateIconDebugCollisionBoxes(e,i,a,l,u,h){for(let g=l;g<u;g++){const x=a.get(g),b=this.getSymbolInstanceIconSize(e,i,h);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,b,x.padding)}}updateCollisionDebugBuffers(e,i){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const a=bd(this.iconSizeData,e),l=bd(this.textSizeData,e);for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this._updateTextDebugCollisionBoxes(l,e,i,h.textBoxStartIndex,h.textBoxEndIndex,h),this._updateTextDebugCollisionBoxes(l,e,i,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h),this._updateIconDebugCollisionBoxes(a,e,i,h.iconBoxStartIndex,h.iconBoxEndIndex,h.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(a,e,i,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,i,a,l,u,h,g,x,b){const T={};if(i<a){const{x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le,featureIndex:ie}=e.get(i);T.textBox={x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le},T.textFeatureIndex=ie}if(l<u){const{x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le,featureIndex:ie}=e.get(l);T.verticalTextBox={x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le},T.verticalTextFeatureIndex=ie}if(h<g){const{x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le,featureIndex:ie}=e.get(h);T.iconBox={x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le},T.iconFeatureIndex=ie}if(x<b){const{x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le,featureIndex:ie}=e.get(x);T.verticalIconBox={x1:M,y1:A,x2:O,y2:B,padding:V,projectedAnchorX:W,projectedAnchorY:q,projectedAnchorZ:ne,tileAnchorX:ae,tileAnchorY:le},T.verticalIconFeatureIndex=ie}return T}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){const a=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,i){const a=e.placedSymbolArray.get(i),l=a.vertexStartIndex+4*a.numGlyphs;for(let u=a.vertexStartIndex;u<l;u+=4)e.indexArray.emplaceBack(u,u+1,u+2),e.indexArray.emplaceBack(u+1,u+2,u+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const i=Math.sin(e),a=Math.cos(e),l=[],u=[],h=[];for(let g=0;g<this.symbolInstances.length;++g){h.push(g);const x=this.symbolInstances.get(g);l.push(0|Math.round(i*x.tileAnchorX+a*x.tileAnchorY)),u.push(x.featureIndex)}return h.sort((g,x)=>l[g]-l[x]||u[x]-u[g]),h}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,i)=>this.symbolInstances.get(i).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,i){const a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===i?a.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const i of this.symbolInstanceIndexes){const a=this.symbolInstances.get(i);this.featureSortOrder.push(a.featureIndex);const{rightJustifiedTextSymbolIndex:l,centerJustifiedTextSymbolIndex:u,leftJustifiedTextSymbolIndex:h,verticalPlacedTextSymbolIndex:g,placedIconSymbolIndex:x,verticalPlacedIconSymbolIndex:b}=a;l>=0&&this.addIndicesForPlacedSymbol(this.text,l),u>=0&&u!==l&&this.addIndicesForPlacedSymbol(this.text,u),h>=0&&h!==u&&h!==l&&this.addIndicesForPlacedSymbol(this.text,h),g>=0&&this.addIndicesForPlacedSymbol(this.text,g),x>=0&&this.addIndicesForPlacedSymbol(this.icon,x),b>=0&&this.addIndicesForPlacedSymbol(this.icon,b)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}rn(HS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),HS.MAX_GLYPHS=65535,HS.addDynamicAttributes=Lv;var rx=HS;const rY=ki([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:nY}=rY,iY=ki([{name:"a_packed",components:4,type:"Float32"}]),{members:oY}=iY,aY=ES.types,sY=Math.cos(Math.PI/180*37.5);class GS{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(i=>{this.gradients[i.id]={}}),this.layoutVertexArray=new q0,this.layoutVertexArray2=new $u,this.indexArray=new Ca,this.programConfigurations=new yd(e.layers,e.zoom),this.segments=new qi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(e,i,a,l){this.hasPattern=s3("line",this.layers,i);const u=this.layers[0].layout.get("line-sort-key"),h=[];for(const{feature:T,id:M,index:A,sourceLayerIndex:O}of e){const B=this.layers[0]._featureFilter.needGeometry,V=qp(T,B);if(!this.layers[0]._featureFilter.filter(new uo(this.zoom),V,a))continue;const W=u?u.evaluate(V,{},a):void 0,q={id:M,properties:T.properties,type:T.type,sourceLayerIndex:O,index:A,geometry:B?V.geometry:xd(T,a,l),patterns:{},sortKey:W};h.push(q)}u&&h.sort((T,M)=>T.sortKey-M.sortKey);const{lineAtlas:g,featureIndex:x}=i,b=this.addConstantDashes(g);for(const T of h){const{geometry:M,index:A,sourceLayerIndex:O}=T;if(b&&this.addFeatureDashes(T,g),this.hasPattern){const B=l3("line",this.layers,T,this.zoom,i);this.patternFeatures.push(B)}else this.addFeature(T,M,A,a,g.positions,i.availableImages,i.brightness);x.insert(e[A].feature,M,A,O,this.index)}}addConstantDashes(e){let i=!1;for(const a of this.layers){const l=a.paint.get("line-dasharray").value,u=a.layout.get("line-cap").value;if(l.kind!=="constant"||u.kind!=="constant")i=!0;else{const h=u.value,g=l.value;if(!g)continue;e.addDash(g,h)}}return i}addFeatureDashes(e,i){const a=this.zoom;for(const l of this.layers){const u=l.paint.get("line-dasharray").value,h=l.layout.get("line-cap").value;if(u.kind==="constant"&&h.kind==="constant")continue;let g,x;if(u.kind==="constant"){if(g=u.value,!g)continue}else g=u.evaluate({zoom:a},e);x=h.kind==="constant"?h.value:h.evaluate({zoom:a},e),i.addDash(g,x),e.patterns[l.id]=i.getKey(g,x)}}update(e,i,a,l,u){const h=Object.keys(e).length!==0;h&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,i,h?this.stateDependentLayers:this.layers,a,l,u)}addFeatures(e,i,a,l,u,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,a,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,oY)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nY),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,i,a,l,u,h,g){const x=this.layers[0].layout,b=x.get("line-join").evaluate(e,{}),T=x.get("line-cap").evaluate(e,{}),M=x.get("line-miter-limit"),A=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const O of i)this.addLine(O,e,b,T,M,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,u,h,l,g)}addLine(e,i,a,l,u,h){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let q=0;q<e.length-1;q++)this.totalDistance+=e[q].dist(e[q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const g=aY[i.type]==="Polygon";let x=e.length;for(;x>=2&&e[x-1].equals(e[x-2]);)x--;let b=0;for(;b<x-1&&e[b].equals(e[b+1]);)b++;if(x<(g?3:2))return;a==="bevel"&&(u=1.05);const T=this.overscaling<=16?15*Zt/(512*this.overscaling):0,M=this.segments.prepareSegment(10*x,this.layoutVertexArray,this.indexArray);let A,O,B,V,W;this.e1=this.e2=-1,g&&(A=e[x-2],W=e[b].sub(A)._unit()._perp());for(let q=b;q<x;q++){if(B=q===x-1?g?e[b+1]:void 0:e[q+1],B&&e[q].equals(B))continue;W&&(V=W),A&&(O=A),A=e[q],W=B?B.sub(A)._unit()._perp():V,V=V||W;let ne=V.add(W);ne.x===0&&ne.y===0||ne._unit();const ae=V.x*W.x+V.y*W.y,le=ne.x*W.x+ne.y*W.y,ie=le!==0?1/le:1/0,ue=2*Math.sqrt(2-2*le),Ee=le<sY&&O&&B,Be=V.x*W.y-V.y*W.x>0;if(Ee&&q>b){const tt=A.dist(O);if(tt>2*T){const Ze=A.sub(A.sub(O)._mult(T/tt)._round());this.updateDistance(O,Ze),this.addCurrentVertex(Ze,V,0,0,M),O=Ze}}const je=O&&B;let Ge=je?a:g?"butt":l;if(je&&Ge==="round"&&(ie<h?Ge="miter":ie<=2&&(Ge="fakeround")),Ge==="miter"&&ie>u&&(Ge="bevel"),Ge==="bevel"&&(ie>2&&(Ge="flipbevel"),ie<u&&(Ge="miter")),O&&this.updateDistance(O,A),Ge==="miter")ne._mult(ie),this.addCurrentVertex(A,ne,0,0,M);else if(Ge==="flipbevel"){if(ie>100)ne=W.mult(-1);else{const tt=ie*V.add(W).mag()/V.sub(W).mag();ne._perp()._mult(tt*(Be?-1:1))}this.addCurrentVertex(A,ne,0,0,M),this.addCurrentVertex(A,ne.mult(-1),0,0,M)}else if(Ge==="bevel"||Ge==="fakeround"){const tt=-Math.sqrt(ie*ie-1),Ze=Be?tt:0,nt=Be?0:tt;if(O&&this.addCurrentVertex(A,V,Ze,nt,M),Ge==="fakeround"){const Xe=Math.round(180*ue/Math.PI/20);for(let ut=1;ut<Xe;ut++){let bt=ut/Xe;if(bt!==.5){const lt=bt-.5;bt+=bt*lt*(bt-1)*((1.0904+ae*(ae*(3.55645-1.43519*ae)-3.2452))*lt*lt+(.848013+ae*(.215638*ae-1.06021)))}const At=W.sub(V)._mult(bt)._add(V)._unit()._mult(Be?-1:1);this.addHalfVertex(A,At.x,At.y,!1,Be,0,M)}}B&&this.addCurrentVertex(A,W,-Ze,-nt,M)}else if(Ge==="butt")this.addCurrentVertex(A,ne,0,0,M);else if(Ge==="square"){const tt=O?1:-1;O||this.addCurrentVertex(A,ne,tt,tt,M),this.addCurrentVertex(A,ne,0,0,M),O&&this.addCurrentVertex(A,ne,tt,tt,M)}else Ge==="round"&&(O&&(this.addCurrentVertex(A,V,0,0,M),this.addCurrentVertex(A,V,1,1,M,!0)),B&&(this.addCurrentVertex(A,W,-1,-1,M,!0),this.addCurrentVertex(A,W,0,0,M)));if(Ee&&q<x-1){const tt=A.dist(B);if(tt>2*T){const Ze=A.add(B.sub(A)._mult(T/tt)._round());this.updateDistance(A,Ze),this.addCurrentVertex(Ze,W,0,0,M),A=Ze}}}}addCurrentVertex(e,i,a,l,u,h=!1){const g=i.y*l-i.x,x=-i.y-i.x*l;this.addHalfVertex(e,i.x+i.y*a,i.y-i.x*a,h,!1,a,u),this.addHalfVertex(e,g,x,h,!0,-l,u)}addHalfVertex({x:e,y:i},a,l,u,h,g,x){this.layoutVertexArray.emplaceBack((e<<1)+(u?1:0),(i<<1)+(h?1:0),Math.round(63*a)+128,Math.round(63*l)+128,1+(g===0?0:g<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const b=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,b),x.primitiveLength++),h?this.e2=b:this.e1=b}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,i){this.distance+=e.dist(i),this.updateScaledDistance()}}rn(GS,"LineBucket",{omit:["layers","patternFeatures"]});class ja{constructor(e,i,a,l){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(i,l)}update(e,i,a){const{width:l,height:u}=e,{context:h}=this,{gl:g}=h,{HTMLImageElement:x,HTMLCanvasElement:b,HTMLVideoElement:T,ImageData:M,ImageBitmap:A}=S;if(g.bindTexture(g.TEXTURE_2D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(this.format===g.RGBA&&(!i||i.premultiply!==!1)),a||this.size&&this.size[0]===l&&this.size[1]===u){const{x:O,y:B}=a||{x:0,y:0};if(e instanceof x||e instanceof b||e instanceof T||e instanceof M||A&&e instanceof A)g.texSubImage2D(g.TEXTURE_2D,0,O,B,g.RGBA,g.UNSIGNED_BYTE,e);else{let V=this.format,W=g.UNSIGNED_BYTE;this.format===g.R32F&&(V=g.RED,W=g.FLOAT),g.texSubImage2D(g.TEXTURE_2D,0,O,B,l,u,V,W,e.data)}}else if(this.size=[l,u],e instanceof x||e instanceof b||e instanceof T||e instanceof M||A&&e instanceof A){let O=this.format;this.format===g.R8&&(O=g.RED),g.texImage2D(g.TEXTURE_2D,0,this.format,O,g.UNSIGNED_BYTE,e)}else{let O=this.format,B=this.format,V=g.UNSIGNED_BYTE;this.format===g.DEPTH_COMPONENT&&(O=g.DEPTH_COMPONENT16,V=g.UNSIGNED_SHORT),this.format===g.R32F&&(V=g.FLOAT,B=g.RED),g.texImage2D(g.TEXTURE_2D,0,O,l,u,0,B,V,e.data)}this.useMipmap=!!(i&&i.useMipmap),this.useMipmap&&g.generateMipmap(g.TEXTURE_2D)}bind(e,i){const{context:a}=this,{gl:l}=a;l.bindTexture(l.TEXTURE_2D,this.texture),e!==this.minFilter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.useMipmap?e===l.NEAREST?l.NEAREST_MIPMAP_NEAREST:l.LINEAR_MIPMAP_NEAREST:e),this.minFilter=e),i!==this.wrapS&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,i),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,i),this.wrapS=i)}bindExtraParam(e,i,a,l){const{context:u}=this,{gl:h}=u;h.bindTexture(h.TEXTURE_2D,this.texture),i!==this.magFilter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,i),this.magFilter=i),e!==this.minFilter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?e===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:e),this.minFilter=e),a!==this.wrapS&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,a),this.wrapS=a),l!==this.wrapT&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,l),this.wrapT=l)}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class qS{constructor(e,i){this.context=e,this.texture=i}bind(e,i){const{context:a}=this,{gl:l}=a;l.bindTexture(l.TEXTURE_2D,this.texture),e!==this.minFilter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,e),this.minFilter=e),i!==this.wrapS&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,i),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,i),this.wrapS=i)}}const ju=32,wd=33,Jp=new Uint16Array(8184);for(let r=0;r<2046;r++){let e=r+2,i=0,a=0,l=0,u=0,h=0,g=0;for(1&e?l=u=h=ju:i=a=g=ju;(e>>=1)>1;){const b=i+l>>1,T=a+u>>1;1&e?(l=i,u=a,i=h,a=g):(i=l,a=u,l=h,u=g),h=b,g=T}const x=4*r;Jp[x+0]=i,Jp[x+1]=a,Jp[x+2]=l,Jp[x+3]=u}const Sd=new Uint16Array(2178),Qp=new Uint8Array(1089),WS=new Uint16Array(1089);function b6(r){return r===0?-.03125:r===32?.03125:0}var T3=ki([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const w6={type:2,extent:Zt,loadGeometry:()=>[[new oe(0,0),new oe(Zt+1,0),new oe(Zt+1,Zt+1),new oe(0,Zt+1),new oe(0,0)]]};class nx{constructor(e,i,a,l,u){this.tileID=e,this.uid=zt(),this.uses=0,this.tileSize=i,this.tileZoom=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=u,l&&l.style&&(this._lastUpdatedBrightness=l.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",l&&l.transform&&(this.projection=l.transform.projection)}registerFadeDuration(e){const i=e+this.timeAdded;i<Qr.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Lg(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,i,a){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(l,u){const h={};if(!u)return h;for(const g of l){const x=g.layerIds.map(b=>u.getLayer(b)).filter(Boolean);if(x.length!==0){g.layers=x,g.stateDependentLayerIds&&(g.stateDependentLayers=g.stateDependentLayerIds.map(b=>x.filter(T=>T.id===b)[0]));for(const b of x)h[b.fqid]=g}}return h}(e.buckets,i.style),this.hasSymbolBuckets=!1;for(const l in this.buckets){const u=this.buckets[l];if(u instanceof rx){if(this.hasSymbolBuckets=!0,!a)break;u.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const l in this.buckets){const u=this.buckets[l];if(u instanceof rx&&u.hasRTLText){this.hasRTLText=!0,Is.isLoading()||Is.isLoaded()||Mp()!=="deferred"||H0();break}}this.queryPadding=0;for(const l in this.buckets){const u=this.buckets[l],h=i.style.getOwnLayer(l);if(!h)continue;const g=h.queryRadius(u);this.queryPadding=Math.max(this.queryPadding,g)}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas),this._lastUpdatedBrightness=e.brightness}else this.collisionBoxArray=new pf}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.fqid]}upload(e){for(const a in this.buckets){const l=this.buckets[a];l.uploadPending()&&l.upload(e)}const i=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ja(e,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ja(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ja(e,this.lineAtlas.image,i.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e,i,a){if(this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture,a),!i||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const l=i.style.getBrightness();(this._lastUpdatedBrightness||l)&&(this._lastUpdatedBrightness&&l&&Math.abs(this._lastUpdatedBrightness-l)<.001||(this._lastUpdatedBrightness=l,this.updateBuckets(void 0,i)))}queryRenderedFeatures(e,i,a,l,u,h,g,x){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:l,pixelPosMatrix:g,transform:h,params:u,tileTransform:this.tileTransform},e,i,a):{}}querySourceFeatures(e,i){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const l=a.loadVTLayers(),u=i?i.sourceLayer:"",h=l._geojsonTileLayer||l[u];if(!h)return;const g=Ka(i&&i.filter),{z:x,x:b,y:T}=this.tileID.canonical,M={z:x,x:b,y:T};for(let A=0;A<h.length;A++){const O=h.feature(A);if(g.needGeometry){const W=qp(O,!0);if(!g.filter(new uo(this.tileID.overscaledZ),W,this.tileID.canonical))continue}else if(!g.filter(new uo(this.tileID.overscaledZ),O))continue;const B=a.getId(O,u),V=new zD(O,x,b,T,B);V.tile=M,e.push(V)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(const e in this.buckets)if(this.buckets[e].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const i=this.expirationTime;if(e.cacheControl){const a=Qt(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let l=!1;if(this.expirationTime>a)l=!1;else if(i)if(this.expirationTime<i)l=!0;else{const u=this.expirationTime-i;u?this.expirationTime=a+Math.max(u,3e4):l=!0}else l=!0;l?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,i){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0&&i&&this.updateBuckets(e,i)}updateBuckets(e,i){if(!this.latestFeatureIndex)return;const a=this.latestFeatureIndex.loadVTLayers(),l=i.style.listImages(),u=i.style.getBrightness();for(const h in this.buckets){if(!i.style.hasLayer(h))continue;const g=this.buckets[h],x=g.layers[0].sourceLayer||"_geojsonTileLayer",b=a[x];let T={};if(e&&(T=e[x],!b||!T||Object.keys(T).length===0))continue;if(g.update(T,b,l,this.imageAtlas&&this.imageAtlas.patternPositions||{},u),g instanceof GS||g instanceof SS){const A=i.style.getOwnSourceCache(g.layers[0].source);i._terrain&&i._terrain.enabled&&A&&g.programConfigurations.needsUpload&&i._terrain._clearRenderCacheForTile(A.id,this.tileID)}const M=i&&i.style&&i.style.getOwnLayer(h);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Qr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Qr.now()+e}setTexture(e,i){const a=i.context,l=a.gl;this.texture=this.texture||i.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new ja(a,e,l.RGBA,{useMipmap:!0}),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE))}setDependencies(e,i){const a={};for(const l of i)a[l]=!0;this.dependencies[e]=a}hasDependency(e,i){for(const a of e){const l=this.dependencies[a];if(l){for(const u of i)if(l[u])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,i){if(!i||i.name==="mercator"||this._tileDebugBuffer)return;const a=xd(w6,this.tileID.canonical,this.tileTransform)[0],l=new gl,u=new kp;for(let h=0;h<a.length;h++){const{x:g,y:x}=a[h];l.emplaceBack(g,x),u.emplaceBack(h)}u.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(u),this._tileDebugBuffer=e.createVertexBuffer(l,Kt.members),this._tileDebugSegments=qi.simpleSegment(0,0,l.length,u.length)}_makeTileBoundsBuffers(e,i){if(this._tileBoundsBuffer||!i||i.name==="mercator")return;const a=xd(w6,this.tileID.canonical,this.tileTransform)[0];let l,u;if(this.isRaster){const h=function(g,x){const b=Lg(g,x),T=Math.pow(2,g.z);for(let W=0;W<wd;W++)for(let q=0;q<wd;q++){const ne=va((g.x+(q+b6(q))/ju)/T),ae=Ro((g.y+(W+b6(W))/ju)/T),le=x.project(ne,ae),ie=W*wd+q;Sd[2*ie+0]=Math.round((le.x*b.scale-b.x)*Zt),Sd[2*ie+1]=Math.round((le.y*b.scale-b.y)*Zt)}Qp.fill(0),WS.fill(0);for(let W=2045;W>=0;W--){const q=4*W,ne=Jp[q+0],ae=Jp[q+1],le=Jp[q+2],ie=Jp[q+3],ue=ne+le>>1,Ee=ae+ie>>1,Be=ue+Ee-ae,je=Ee+ne-ue,Ge=ae*wd+ne,tt=ie*wd+le,Ze=Ee*wd+ue,nt=Math.hypot((Sd[2*Ge+0]+Sd[2*tt+0])/2-Sd[2*Ze+0],(Sd[2*Ge+1]+Sd[2*tt+1])/2-Sd[2*Ze+1])>=16;Qp[Ze]=Qp[Ze]||(nt?1:0),W<1022&&(Qp[Ze]=Qp[Ze]||Qp[(ae+je>>1)*wd+(ne+Be>>1)]||Qp[(ie+je>>1)*wd+(le+Be>>1)])}const M=new hd,A=new Ca;let O=0;function B(W,q){const ne=q*wd+W;return WS[ne]===0&&(M.emplaceBack(Sd[2*ne+0],Sd[2*ne+1],W*Zt/ju,q*Zt/ju),WS[ne]=++O),WS[ne]-1}function V(W,q,ne,ae,le,ie){const ue=W+ne>>1,Ee=q+ae>>1;if(Math.abs(W-le)+Math.abs(q-ie)>1&&Qp[Ee*wd+ue])V(le,ie,W,q,ue,Ee),V(ne,ae,le,ie,ue,Ee);else{const Be=B(W,q),je=B(ne,ae),Ge=B(le,ie);A.emplaceBack(Be,je,Ge)}}return V(0,0,ju,ju,ju,0),V(ju,ju,0,0,0,ju),{vertices:M,indices:A}}(this.tileID.canonical,i);l=h.vertices,u=h.indices}else{l=new hd,u=new Ca;for(const{x:g,y:x}of a)l.emplaceBack(g,x,0,0);const h=wS(l.int16,void 0,4);for(let g=0;g<h.length;g+=3)u.emplaceBack(h[g],h[g+1],h[g+2])}this._tileBoundsBuffer=e.createVertexBuffer(l,T3.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(u),this._tileBoundsSegments=qi.simpleSegment(0,0,l.length,u.length)}_makeGlobeTileDebugBuffers(e,i){const a=i.projection;if(!a||a.name!=="globe"||i.freezeTileCoverage)return;const l=this.tileID.canonical,u=vs(Fa(l,i)),h=Na(i.zoom);let g;h>0&&(g=U.invert(new Float64Array(16),i.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,l,i,u,g,h),this._makeGlobeTileDebugTextBuffer(e,l,i,u,g,h)}_globePoint(e,i,a,l,u,h,g){let x=xl(e,i,a);if(h){const b=1<<a.z,T=ro(l.center.lng),M=Eo(l.center.lat),A=(a.x+.5)/b-T;let O=0;A>.5?O=-1:A<-.5&&(O=1);let B=(e/Zt+a.x)/b+O,V=(i/Zt+a.y)/b;B=(B-T)*l._pixelsPerMercatorPixel+T,V=(V-M)*l._pixelsPerMercatorPixel+M;const W=[B*l.worldSize,V*l.worldSize,0];ce.transformMat4(W,W,h),x=Ia(x,W,g)}return ce.transformMat4(x,x,u)}_makeGlobeTileDebugBorderBuffer(e,i,a,l,u,h){const g=new gl,x=new kp,b=new Ky,T=(A,O,B,V,W)=>{const q=(B-A)/(W-1),ne=(V-O)/(W-1),ae=g.length;for(let le=0;le<W;le++){const ie=A+le*q,ue=O+le*ne;g.emplaceBack(ie,ue);const Ee=this._globePoint(ie,ue,i,a,l,u,h);b.emplaceBack(Ee[0],Ee[1],Ee[2]),x.emplaceBack(ae+le)}},M=Zt;T(0,0,M,0,16),T(M,0,M,M,16),T(M,M,0,M,16),T(0,M,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(x),this._tileDebugBuffer=e.createVertexBuffer(g,Kt.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(b,Bt.members),this._tileDebugSegments=qi.simpleSegment(0,0,g.length,x.length)}_makeGlobeTileDebugTextBuffer(e,i,a,l,u,h){const g=Zt/4,x=new gl,b=new Ca,T=new Ky,M=25;b.reserve(32),x.reserve(M),T.reserve(M);const A=(O,B)=>M*O+B;for(let O=0;O<M;O++){const B=O*g;for(let V=0;V<M;V++){const W=V*g;x.emplaceBack(W,B);const q=this._globePoint(W,B,i,a,l,u,h);T.emplaceBack(q[0],q[1],q[2])}}for(let O=0;O<4;O++)for(let B=0;B<4;B++){const V=A(O,B),W=A(O,B+1),q=A(O+1,B),ne=A(O+1,B+1);b.emplaceBack(V,W,q),b.emplaceBack(q,W,ne)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(b),this._tileDebugTextBuffer=e.createVertexBuffer(x,Kt.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(T,Bt.members),this._tileDebugTextSegments=qi.simpleSegment(0,0,M,32)}}class lY{constructor(e,i){this.max=e,this.onRemove=i,this.reset()}reset(){for(const e in this.data)for(const i of this.data[e])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(e,i,a){const l=e.wrapped().key;this.data[l]===void 0&&(this.data[l]=[]);const u={value:i,timeout:void 0};if(a!==void 0&&(u.timeout=setTimeout(()=>{this.remove(e,u)},a)),this.data[l].push(u),this.order.push(l),this.order.length>this.max){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const i=this.data[e].shift();return i.timeout&&clearTimeout(i.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),i.value}getByKey(e){const i=this.data[e];return i?i[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,i){if(!this.has(e))return this;const a=e.wrapped().key,l=i===void 0?0:this.data[a].indexOf(i),u=this.data[a][l];return this.data[a].splice(l,1),u.timeout&&clearTimeout(u.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(u.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(e){const i=[];for(const a in this.data)for(const l of this.data[a])e(l.value)||i.push(l);for(const a of i)this.remove(a.value.tileID,a)}}class em{constructor(e,i,a,l){this.id=em.uniqueIdxCounter,em.uniqueIdxCounter++,this.context=e;const u=e.gl;this.buffer=u.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||l||i.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){this.id=em.uniqueIdxCounter,em.uniqueIdxCounter++;const i=this.context.gl;this.context.unbindVAO(),this.bind(),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}em.uniqueIdxCounter=0;const cY={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class uY{constructor(e,i,a,l,u,h){this.length=i.length,this.attributes=a,this.itemSize=i.bytesPerElement,this.dynamicDraw=l,this.instanceCount=h,this.context=e;const g=e.gl;this.buffer=g.createBuffer(),e.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||u||i.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const i=this.context.gl;this.bind(),i.bufferSubData(i.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,i){for(let a=0;a<this.attributes.length;a++){const l=i.attributes[this.attributes[a].name];l!==void 0&&e.enableVertexAttribArray(l)}}setVertexAttribPointers(e,i,a){for(let l=0;l<this.attributes.length;l++){const u=this.attributes[l],h=i.attributes[u.name];h!==void 0&&e.vertexAttribPointer(h,u.components,e[cY[u.type]],!1,this.itemSize,u.offset+this.itemSize*(a||0))}}setVertexAttribDivisor(e,i,a){for(let l=0;l<this.attributes.length;l++){const u=i.attributes[this.attributes[l].name];u!==void 0&&this.instanceCount&&this.instanceCount>0&&e.vertexAttribDivisor(u,a)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ko{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class hY extends ko{getDefault(){return Qn.transparent}set(e){const i=this.current;(e.r!==i.r||e.g!==i.g||e.b!==i.b||e.a!==i.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class dY extends ko{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class fY extends ko{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class pY extends ko{getDefault(){return[!0,!0,!0,!0]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class mY extends ko{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class gY extends ko{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class yY extends ko{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const i=this.current;(e.func!==i.func||e.ref!==i.ref||e.mask!==i.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class vY extends ko{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class _Y extends ko{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),this.current=e,this.dirty=!1}}class xY extends ko{getDefault(){return[0,1]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class bY extends ko{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),this.current=e,this.dirty=!1}}class wY extends ko{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class SY extends ko{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.BLEND):i.disable(i.BLEND),this.current=e,this.dirty=!1}}class CY extends ko{getDefault(){const e=this.gl;return[e.ONE,e.ZERO,e.ONE,e.ZERO]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class EY extends ko{getDefault(){return Qn.transparent}set(e){const i=this.current;(e.r!==i.r||e.g!==i.g||e.b!==i.b||e.a!==i.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class TY extends ko{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(e,e),this.current=e,this.dirty=!1)}}class IY extends ko{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;e?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),this.current=e,this.dirty=!1}}class MY extends ko{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class PY extends ko{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let AY=class extends ko{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}};class RY extends ko{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class kY extends ko{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class OY extends ko{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class zY extends ko{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindRenderbuffer(i.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class DY extends ko{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindTexture(i.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class LY extends ko{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class $Y extends ko{getDefault(){return null}set(e){const i=this.gl;i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class BY extends ko{getDefault(){return null}set(e){this.gl&&(e!==this.current||this.dirty)&&(this.gl.bindVertexArray(e),this.current=e,this.dirty=!1)}}class FY extends ko{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class NY extends ko{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class jY extends ko{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const i=this.gl;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class I3 extends ko{constructor(e,i){super(e),this.context=e,this.parent=i}getDefault(){return null}}class VY extends I3{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const i=this.gl;i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class S6 extends I3{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const i=this.gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,this.attachment(),i.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class UY extends I3{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const i=this.gl;i.framebufferTexture2D(i.FRAMEBUFFER,this.attachment(),i.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class HY extends S6{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class GY{constructor(e,i,a,l,u){this.context=e,this.width=i,this.height=a;const h=this.framebuffer=e.gl.createFramebuffer();l&&(this.colorAttachment=new VY(e,h)),u&&(this.depthAttachmentType=u,this.depthAttachment=u==="renderbuffer"?new S6(e,h):new UY(e,h))}destroy(){const e=this.context.gl;if(this.colorAttachment){const i=this.colorAttachment.get();i&&e.deleteTexture(i)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const i=this.depthAttachment.get();i&&e.deleteRenderbuffer(i)}else{const i=this.depthAttachment.get();i&&e.deleteTexture(i)}e.deleteFramebuffer(this.framebuffer)}}class Bn{constructor(e,i,a){this.func=e,this.mask=i,this.range=a}}Bn.ReadOnly=!1,Bn.ReadWrite=!0,Bn.disabled=new Bn(519,Bn.ReadOnly,[0,1]);const M3=7680;class mi{constructor(e,i,a,l,u,h){this.test=e,this.ref=i,this.mask=a,this.fail=l,this.depthFail=u,this.pass=h}}mi.disabled=new mi({func:519,mask:0},0,0,M3,M3,M3);const KS=771;class zi{constructor(e,i,a,l){this.blendFunction=e,this.blendColor=i,this.mask=a,this.blendEquation=l}}zi.Replace=[1,0,1,0],zi.disabled=new zi(zi.Replace,Qn.transparent,[!1,!1,!1,!1]),zi.unblended=new zi(zi.Replace,Qn.transparent,[!0,!0,!0,!0]),zi.alphaBlended=new zi([1,KS,1,KS],Qn.transparent,[!0,!0,!0,!0]),zi.multiply=new zi([774,0,774,0],Qn.transparent,[!0,!0,!0,!0]);const P3=1029,A3=2305;class yi{constructor(e,i,a){this.enable=e,this.mode=i,this.frontFace=a}}yi.disabled=new yi(!1,P3,A3),yi.backCCW=new yi(!0,P3,A3),yi.backCW=new yi(!0,P3,2304),yi.frontCW=new yi(!0,1028,2304),yi.frontCCW=new yi(!0,1028,A3);class qY{constructor(e){this.gl=e,this.clearColor=new hY(this),this.clearDepth=new dY(this),this.clearStencil=new fY(this),this.colorMask=new pY(this),this.depthMask=new mY(this),this.stencilMask=new gY(this),this.stencilFunc=new yY(this),this.stencilOp=new vY(this),this.stencilTest=new _Y(this),this.depthRange=new xY(this),this.depthTest=new bY(this),this.depthFunc=new wY(this),this.blend=new SY(this),this.blendFunc=new CY(this),this.blendColor=new EY(this),this.blendEquation=new TY(this),this.cullFace=new IY(this),this.cullFaceSide=new MY(this),this.frontFace=new PY(this),this.program=new AY(this),this.activeTexture=new RY(this),this.viewport=new kY(this),this.bindFramebuffer=new OY(this),this.bindRenderbuffer=new zY(this),this.bindTexture=new DY(this),this.bindVertexBuffer=new LY(this),this.bindElementBuffer=new $Y(this),this.bindVertexArrayOES=new BY(this),this.pixelStoreUnpack=new FY(this),this.pixelStoreUnpackPremultiplyAlpha=new NY(this),this.pixelStoreUnpackFlipY=new jY(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureFloatLinear=e.getExtension("OES_texture_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,i,a){return new em(this,e,i,a)}createVertexBuffer(e,i,a,l,u){return new uY(this,e,i,a,l,u)}createRenderbuffer(e,i,a){const l=this.gl,u=l.createRenderbuffer();return this.bindRenderbuffer.set(u),l.renderbufferStorage(l.RENDERBUFFER,e,i,a),this.bindRenderbuffer.set(null),u}createFramebuffer(e,i,a,l){return new GY(this,e,i,a,l)}clear({color:e,depth:i,stencil:a,colorMask:l}){const u=this.gl;let h=0;e&&(h|=u.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set(l||[!0,!0,!0,!0])),i!==void 0&&(h|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),a!==void 0&&(h|=u.STENCIL_BUFFER_BIT,this.clearStencil.set(a),this.stencilMask.set(255)),u.clear(h)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){Re(e.blendFunction,zi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor),e.blendEquation?this.blendEquation.set(e.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(e.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}class bh extends mo{constructor(e,i,a){super(),this.id=e,this._onlySymbols=a,i.on("data",l=>{l.dataType==="source"&&l.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&l.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),i.on("error",()=>{this._sourceErrored=!0}),this._source=i,this._tiles={},this._cache=new lY(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=i.minTileCacheSize,this._maxTileCacheSize=i.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this._coveredTiles={},this._shadowCasterTiles={},this._state=new pX,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const i=this._tiles[e];if(i.state!=="errored"&&(i.state!=="loaded"||!i.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,i){return e.isSymbolTile=this._onlySymbols,e.isExtraShadowCaster=this._shadowCasterTiles[e.tileID.key],this._source.loadTile(e,i)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const i in this._tiles){const a=this._tiles[i];a.upload(e),a.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Tt(this._tiles).map(e=>e.tileID).sort(C6).map(e=>e.key)}getRenderableIds(e,i){const a=[];for(const l in this._tiles)this._isIdRenderable(+l,e,i)&&a.push(this._tiles[l]);return e?a.sort((l,u)=>{const h=l.tileID,g=u.tileID,x=new oe(h.canonical.x,h.canonical.y)._rotate(this.transform.angle),b=new oe(g.canonical.x,g.canonical.y)._rotate(this.transform.angle);return h.overscaledZ-g.overscaledZ||b.y-x.y||b.x-x.x}).map(l=>l.tileID.key):a.map(l=>l.tileID).sort(C6).map(l=>l.key)}hasRenderableParent(e){const i=this.findLoadedParent(e,0);return!!i&&this._isIdRenderable(i.tileID.key)}_isIdRenderable(e,i,a){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(i||!this._tiles[e].holdingForFade())&&(a||!this._shadowCasterTiles[e])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,i){const a=this._tiles[e];a&&(a.state!=="loading"&&(a.state=i),this._loadTile(a,this._tileLoaded.bind(this,a,e,i)))}_tileLoaded(e,i,a,l){if(l)if(e.state="errored",l.status!==404)this._source.fire(new kn(l,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const u=this.map.painter.terrain;this.update(this.transform,u.getScaledDemTileSize(),!0),u.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Qr.now(),a==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new vr("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const i=this.getRenderableIds();for(let l=0;l<i.length;l++){const u=i[l];if(e.neighboringTiles&&e.neighboringTiles[u]){const h=this.getTileByID(u);a(e,h),a(h,e)}}function a(l,u){if(!l.dem||l.dem.borderReady)return;l.needsHillshadePrepare=!0,l.needsDEMTextureUpload=!0;let h=u.tileID.canonical.x-l.tileID.canonical.x;const g=u.tileID.canonical.y-l.tileID.canonical.y,x=Math.pow(2,l.tileID.canonical.z),b=u.tileID.key;h===0&&g===0||Math.abs(g)>1||(Math.abs(h)>1&&(Math.abs(h+x)===1?h+=x:Math.abs(h-x)===1&&(h-=x)),u.dem&&l.dem&&(l.dem.backfillBorder(u.dem,h,g),l.neighboringTiles&&l.neighboringTiles[b]&&(l.neighboringTiles[b].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,i,a,l){for(const u in this._tiles){let h=this._tiles[u];if(l[u]||!h.hasData()||h.tileID.overscaledZ<=i||h.tileID.overscaledZ>a)continue;let g=h.tileID;for(;h&&h.tileID.overscaledZ>i+1;){const b=h.tileID.scaledTo(h.tileID.overscaledZ-1);h=this._tiles[b.key],h&&h.hasData()&&(g=b)}let x=g;for(;x.overscaledZ>i;)if(x=x.scaledTo(x.overscaledZ-1),e[x.key]){l[g.key]=g;break}}}findLoadedParent(e,i){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=i?a:null}for(let a=e.overscaledZ-1;a>=i;a--){const l=e.scaledTo(a),u=this._getLoadedTile(l);if(u)return u}}_getLoadedTile(e){const i=this._tiles[e.key];return i&&i.hasData()?i:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,i){i=i||this._source.tileSize;const a=Math.ceil(e.width/i)+1,l=Math.ceil(e.height/i)+1,u=Math.floor(a*l*5),h=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,u):u,g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(g)}handleWrapJump(e){const i=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,i){const a={};for(const l in this._tiles){const u=this._tiles[l];u.tileID=u.tileID.unwrapTo(u.tileID.wrap+i),a[u.tileID.key]=u}this._tiles=a;for(const l in this._timers)clearTimeout(this._timers[l]),delete this._timers[l];for(const l in this._tiles)this._setTileReloadTimer(+l,this._tiles[l])}}update(e,i,a,l){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!a)return;let u;if(this.updateCacheSize(e,i),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new xr(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(u=e.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!a,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(x=>this._source.hasTile(x)))):u=[],u.length>0&&this.castsShadows&&l&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!R3(this._source.type)){const x=e.coveringZoomLevel({tileSize:i||this._source.tileSize,roundZoom:this._source.roundZoom&&!a}),b=Math.min(x,this._source.maxzoom),T=e.extendTileCoverForShadows(u,l,b);for(const M of T)this._shadowCasterTiles[M.key]=!0,u.push(M)}const h=this._updateRetainedTiles(u);if(R3(this._source.type)&&u.length!==0){const x={},b={},T=Object.keys(h);for(const A of T){const O=h[A],B=this._tiles[A];if(!B||B.fadeEndTime&&B.fadeEndTime<=Qr.now())continue;const V=this.findLoadedParent(O,Math.max(O.overscaledZ-bh.maxOverzooming,this._source.minzoom));V&&(this._addTile(V.tileID),x[V.tileID.key]=V.tileID),b[A]=O}const M=u[u.length-1].overscaledZ;for(const A in this._tiles){const O=this._tiles[A];if(h[A]||!O.hasData())continue;let B=O.tileID;for(;B.overscaledZ>M;){B=B.scaledTo(B.overscaledZ-1);const V=this._tiles[B.key];if(V&&V.hasData()&&b[B.key]){h[A]=O.tileID;break}}}for(const A in x)h[A]||(this._coveredTiles[A]=!0,h[A]=x[A])}for(const x in h)this._tiles[x].clearFadeHold();const g=function(x,b){const T=[];for(const M in x)M in b||T.push(M);return T}(this._tiles,h);for(const x of g){const b=this._tiles[x];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const i={};if(e.length===0)return i;const a={},l=e.reduce((b,T)=>Math.min(b,T.overscaledZ),1/0),u=e[0].overscaledZ,h=Math.max(u-bh.maxOverzooming,this._source.minzoom),g=Math.max(u+bh.maxUnderzooming,this._source.minzoom),x={};for(const b of e){const T=this._addTile(b);i[b.key]=b,T.hasData()||l<this._source.maxzoom&&(x[b.key]=b)}this._retainLoadedChildren(x,l,g,i);for(const b of e){let T=this._tiles[b.key];if(T.hasData())continue;if(b.canonical.z>=this._source.maxzoom){const A=b.children(this._source.maxzoom)[0],O=this.getTile(A);if(O&&O.hasData()){i[A.key]=A;continue}}else{const A=b.children(this._source.maxzoom);if(i[A[0].key]&&i[A[1].key]&&i[A[2].key]&&i[A[3].key])continue}let M=T.wasRequested();for(let A=b.overscaledZ-1;A>=h;--A){const O=b.scaledTo(A);if(a[O.key]||(a[O.key]=!0,T=this.getTile(O),!T&&M&&(T=this._addTile(O)),T&&(i[O.key]=O,M=T.wasRequested(),T.hasData())))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const i=[];let a,l=this._tiles[e].tileID;for(;l.overscaledZ>0;){if(l.key in this._loadedParentTiles){a=this._loadedParentTiles[l.key];break}i.push(l.key);const u=l.scaledTo(l.overscaledZ-1);if(a=this._getLoadedTile(u),a)break;l=u}for(const u of i)this._loadedParentTiles[u]=a}}_addTile(e){let i=this._tiles[e.key];if(i)return i.isExtraShadowCaster!==!0||this._shadowCasterTiles[e.key]||this._reloadTile(e.key,"reloading"),i;i=this._cache.getAndRemove(e),i&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));const a=!!i;if(!a){const l=this.map?this.map.painter:null;i=new nx(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,l,this._isRaster),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))}return i?(i.uses++,this._tiles[e.key]=i,a||this._source.fire(new vr("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null}_setTileReloadTimer(e,i){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=i.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}_removeTile(e){const i=this._tiles[e];i&&(i.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),i.uses>0||(i.hasData()&&i.state!=="reloading"?this._cache.add(i.tileID,i,i.getExpiryTimeout()):(i.aborted=!0,this._abortTile(i),this._unloadTile(i))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,i,a){const l=[],u=this.transform;if(!u)return l;const h=u.projection.name==="globe",g=ro(u.center.lng);for(const x in this._tiles){const b=this._tiles[x];if(a&&b.clearQueryDebugViz(),b.holdingForFade())continue;let T;if(h){const M=b.tileID.canonical;if(M.z===0){const A=[Math.abs(Qe(g,...ix(M,-1))-g),Math.abs(Qe(g,...ix(M,1))-g)];T=[0,2*A.indexOf(Math.min(...A))-1]}else{const A=[Math.abs(Qe(g,...ix(M,-1))-g),Math.abs(Qe(g,...ix(M,0))-g),Math.abs(Qe(g,...ix(M,1))-g)];T=[A.indexOf(Math.min(...A))-1]}}else T=[0];for(const M of T){const A=e.containsTile(b,u,i,M);A&&l.push(A)}}return l}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(e){return this._getRenderableCoordinates(e)}_getRenderableCoordinates(e,i){const a=this.getRenderableIds(e,i).map(l=>this._tiles[l].tileID);for(const l of a)l.projMatrix=this.transform.calculateProjMatrix(l.toUnwrapped());return a}sortCoordinatesByDistance(e){const i=e.slice(),a=this.transform._camera.position,l=this.transform._camera.forward(),u={};for(const h of i){const g=1/(1<<h.canonical.z);u[h.key]=((h.canonical.x+.5)*g+h.wrap-a[0])*l[0]+((h.canonical.y+.5)*g-a[1])*l[1]-a[2]*l[2]}return i.sort((h,g)=>u[h.key]-u[g.key]),i}hasTransition(){if(this._source.hasTransition())return!0;if(R3(this._source.type))for(const e in this._tiles){const i=this._tiles[e];if(i.fadeEndTime!==void 0&&i.fadeEndTime>=Qr.now())return!0}return!1}setFeatureState(e,i,a){this._state.updateState(e=e||"_geojsonTileLayer",i,a)}removeFeatureState(e,i,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",i,a)}getFeatureState(e,i){return this._state.getState(e=e||"_geojsonTileLayer",i)}setDependencies(e,i,a){const l=this._tiles[e];l&&l.setDependencies(i,a)}reloadTilesForDependencies(e,i){for(const a in this._tiles)this._tiles[a].hasDependency(e,i)&&this._reloadTile(+a,"reloading");this._cache.filter(a=>!a.hasDependency(e,i))}_preloadTiles(e,i){if(!this._sourceLoaded){const g=()=>{this._sourceLoaded&&(this._source.off("data",g),this._preloadTiles(e,i))};return void this._source.on("data",g)}const a=new Map,l=Array.isArray(e)?e:[e],u=this.map.painter.terrain,h=this.usedForTerrain&&u?u.getScaledDemTileSize():this._source.tileSize;for(const g of l){const x=g.coveringTiles({tileSize:h,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const b of x)a.set(b.key,b);this.usedForTerrain&&g.updateElevation(!1)}Ot(Array.from(a.values()),(g,x)=>{const b=new nx(g,this._source.tileSize*g.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(b,T=>{this._source.type==="raster-dem"&&b.dem&&this._backfillDEM(b),x(T,b)})},i)}}function C6(r,e){const i=Math.abs(2*r.wrap)-+(r.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return r.overscaledZ-e.overscaledZ||a-i||e.canonical.y-r.canonical.y||e.canonical.x-r.canonical.x}function R3(r){return r==="raster"||r==="image"||r==="video"||r==="custom"}function ix(r,e){const i=1<<r.z;return[r.x/i+e,(r.x+1)/i+e]}bh.maxOverzooming=10,bh.maxUnderzooming=3;const WY=ki([{name:"a_pos_3f",components:3,type:"Float32"}]),KY=ki([{name:"a_color_3f",components:3,type:"Float32"}]),ZY=ki([{name:"a_color_4f",components:4,type:"Float32"}]),XY=ki([{name:"a_uv_2f",components:2,type:"Float32"}]),YY=ki([{name:"a_normal_3f",components:3,type:"Float32"}]),JY=ki([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),QY=ki([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class k3{constructor(e=0,i=0,a=0,l=0){if(isNaN(e)||e<0||isNaN(i)||i<0||isNaN(a)||a<0||isNaN(l)||l<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=i,this.left=a,this.right=l}interpolate(e,i,a){return i.top!=null&&e.top!=null&&(this.top=Mn(e.top,i.top,a)),i.bottom!=null&&e.bottom!=null&&(this.bottom=Mn(e.bottom,i.bottom,a)),i.left!=null&&e.left!=null&&(this.left=Mn(e.left,i.left,a)),i.right!=null&&e.right!=null&&(this.right=Mn(e.right,i.right,a)),this}getCenter(e,i){const a=Qe((this.left+e-this.right)/2,0,e),l=Qe((this.top+i-this.bottom)/2,0,i);return new oe(a,l)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new k3(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function E6(r,e){const i=yr(r,3);U.fromQuat(r,e),dr(r,3,i)}function O3(r,e){const i=de.identity([]);return de.rotateZ(i,i,-e),de.rotateX(i,i,-r),i}function T6(r,e){const i=[r[0],r[1],0],a=[e[0],e[1],0];if(ce.length(i)>=1e-15){const h=ce.normalize([],i);ce.scale(a,h,ce.dot(a,h)),e[0]=a[0],e[1]=a[1]}const l=ce.cross([],e,r);if(ce.len(l)<1e-15)return null;const u=Math.atan2(-l[1],l[0]);return O3(Math.atan2(Math.sqrt(r[0]*r[0]+r[1]*r[1]),-r[2]),u)}class I6{constructor(e,i){this.position=e,this.orientation=i}get position(){return this._position}set position(e){if(e){const i=e instanceof Si?e:new Si(e[0],e[1],e[2]);this._renderWorldCopies&&(i.x=jt(i.x,0,1)),this._position=i}else this._position=null}lookAtPoint(e,i){if(this.orientation=null,!this.position)return;const a=this.position,l=this._elevation?this._elevation.getAtPointOrZero(Si.fromLngLat(e)):0,u=Si.fromLngLat(e,l),h=[u.x-a.x,u.y-a.y,u.z-a.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=T6(h,i)}setPitchBearing(e,i){this.orientation=O3(_e(e),_e(-i))}}class ZS{constructor(e,i){this._transform=U.identity([]),this.orientation=i,this.position=e}get mercatorPosition(){const e=this.position;return new Si(e[0],e[1],e[2])}get position(){const e=yr(this._transform,3);return[e[0],e[1],e[2]]}set position(e){var i;e&&dr(this._transform,3,[(i=e)[0],i[1],i[2],1])}get orientation(){return this._orientation}set orientation(e){this._orientation=e||de.identity([]),e&&E6(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),i=this.right();return{bearing:Math.atan2(-i[1],i[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,i){this._orientation=O3(e,i),E6(this._transform,this._orientation)}forward(){const e=yr(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=yr(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=yr(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(e,i){const a=new Float64Array(16);return U.invert(a,this.getWorldToCamera(e,i)),a}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(e,i,a){const l=this.position;ce.scale(l,l,-e);const u=new Float64Array(16);return U.fromScaling(u,[a,a,a]),U.translate(u,u,l),u[10]*=i,u}getWorldToCamera(e,i){const a=new Float64Array(16),l=new Float64Array(4),u=this.position;return de.conjugate(l,this._orientation),ce.scale(u,u,-e),U.fromQuat(a,l),U.translate(a,a,u),a[1]*=-1,a[5]*=-1,a[9]*=-1,a[13]*=-1,a[8]*=i,a[9]*=i,a[10]*=i,a[11]*=i,a}getCameraToClipPerspective(e,i,a,l){const u=new Float64Array(16);return U.perspective(u,e,i,a,l),u}getCameraToClipOrthographic(e,i,a,l,u,h){const g=new Float64Array(16);return U.ortho(g,e,i,a,l,u,h),g}getDistanceToElevation(e,i=!1){const a=e===0?0:Oi(e,i?Ro(this.position[1]):this.position[1]),l=this.forward();return(a-this.position[2])/l[2]}clone(){return new ZS([...this.position],[...this.orientation])}}function M6(r,e){const i=ox(r.projection,r.zoom,r.width,r.height),a=function(u,h,g,x,b){const T=new zn(g.lng-180*tm,g.lat),M=new zn(g.lng+180*tm,g.lat),A=u.project(T.lng,T.lat),O=u.project(M.lng,M.lat),B=-Math.atan2(O.y-A.y,O.x-A.x),V=Si.fromLngLat(g);V.y=Qe(V.y,-1+tm,1-tm);const W=V.toLngLat(),q=u.project(W.lng,W.lat),ne=Si.fromLngLat(W);ne.x+=tm;const ae=ne.toLngLat(),le=u.project(ae.lng,ae.lat),ie=R6(le.x-q.x,le.y-q.y,B),ue=Si.fromLngLat(W);ue.y+=tm;const Ee=ue.toLngLat(),Be=u.project(Ee.lng,Ee.lat),je=R6(Be.x-q.x,Be.y-q.y,B),Ge=Math.abs(ie.x)/Math.abs(je.y),tt=U.identity([]);U.rotateZ(tt,tt,-B*(1-(b?0:x)));const Ze=U.identity([]);return U.scale(Ze,Ze,[1,1-(1-Ge)*x,1]),Ze[4]=-je.x/je.y*x,U.rotateZ(Ze,Ze,B),U.multiply(Ze,tt,Ze),Ze}(r.projection,0,r.center,i,e),l=P6(r);return U.scale(a,a,[l,l,1]),a}function P6(r){const e=r.projection,i=ox(r.projection,r.zoom,r.width,r.height),a=A6(e,r.center),l=A6(e,zn.convert(e.center));return Math.pow(2,a*i+(1-i)*l)}function ox(r,e,i,a,l=1/0){const u=r.range;if(!u)return 0;const h=Math.min(l,Math.max(i,a)),g=Math.log(h/1024)/Math.LN2;return St(u[0]+g,u[1]+g,e)}const tm=1/4e4;function A6(r,e){const i=Qe(e.lat,-ha,ha),a=new zn(e.lng-180*tm,i),l=new zn(e.lng+180*tm,i),u=r.project(a.lng,i),h=r.project(l.lng,i),g=Si.fromLngLat(a),x=Si.fromLngLat(l),b=h.x-u.x,T=h.y-u.y,M=x.x-g.x,A=x.y-g.y,O=Math.sqrt((M*M+A*A)/(b*b+T*T));return Math.log(O)/Math.LN2}function R6(r,e,i){const a=Math.cos(i),l=Math.sin(i);return{x:r*a-e*l,y:r*l+e*a}}function $g(r,e,i){return e*(Zt/(r.tileSize*Math.pow(2,i-r.tileID.overscaledZ)))}const $v={unknown:0,flipRequired:1,flipNotRequired:2},eJ=Math.tan(85*Math.PI/180);function XS(r,e,i,a,l,u,h){const g=U.create();if(i)if(u.name==="globe"){const x=function(b,T){const{x:M,y:A}=b.point,O=V1(M,A,b.worldSize/b._pixelsPerMercatorPixel,0,0);return U.multiply(O,O,Us(ia(T)))}(l,e);U.multiply(g,g,x)}else{const x=_.invert([],h);g[0]=x[0],g[1]=x[1],g[4]=x[2],g[5]=x[3],a||U.rotateZ(g,g,l.angle)}else U.multiply(g,l.labelPlaneMatrix,r);return g}function k6(r,e,i,a,l,u,h){const g=XS(r,e,i,a,l,u,h);return u.name==="globe"&&i||(g[2]=g[6]=g[10]=g[14]=0),g}function O6(r,e,i,a,l,u,h){if(i){if(u.name==="globe"){const g=XS(r,e,i,a,l,u,h);return U.invert(g,g),U.multiply(g,r,g),g}{const g=U.clone(r),x=U.identity([]);return x[0]=h[0],x[1]=h[1],x[4]=h[2],x[5]=h[3],U.multiply(g,g,x),a||U.rotateZ(g,g,-l.angle),g}}return l.glCoordMatrix}function wh(r,e,i,a){const l=[r,e,i,1];i?Hi.transformMat4(l,l,a):N6(l,l,a);const u=l[3];return l[0]/=u,l[1]/=u,l[2]/=u,l}function z6(r,e){return Math.min(.5+r/e*.5,1.5)}function tJ(r,e){const i=r[0]/r[3],a=r[1]/r[3];return i>=-e[0]&&i<=e[0]&&a>=-e[1]&&a<=e[1]}function rJ(r,e,i,a,l,u,h,g,x,b){const T=i.transform,M=a?r.textSizeData:r.iconSizeData,A=bd(M,i.transform.zoom),O=T.projection.name==="globe",B=[256/i.width*2+1,256/i.height*2+1],V=a?r.text.dynamicLayoutVertexArray:r.icon.dynamicLayoutVertexArray;V.clear();let W=null;O&&(W=a?r.text.globeExtVertexArray:r.icon.globeExtVertexArray);const q=r.lineVertexArray,ne=a?r.text.placedSymbolArray:r.icon.placedSymbolArray,ae=i.transform.width/i.transform.height;let le,ie=!1;for(let ue=0;ue<ne.length;ue++){const Ee=ne.get(ue),{numGlyphs:Be,writingMode:je}=Ee;if(je!==jo.vertical||ie||le===jo.horizontal||(ie=!0),le=je,(Ee.hidden||je===jo.vertical)&&!ie){Bv(Be,V);continue}ie=!1;const Ge=new oe(Ee.tileAnchorX,Ee.tileAnchorY);let{x:tt,y:Ze,z:nt}=T.projection.projectTilePoint(Ge.x,Ge.y,b.canonical);if(x){const[lr,pr,er]=x(Ge);tt+=lr,Ze+=pr,nt+=er}const Xe=[tt,Ze,nt,1];if(Hi.transformMat4(Xe,Xe,e),!tJ(Xe,B)){Bv(Be,V);continue}const ut=Xe[3],bt=z6(i.transform.getCameraToCenterDistance(T.projection),ut),At=W1(M,A,Ee),lt=h?At/bt:At*bt,ft=wh(tt,Ze,nt,l);if(ft[3]<=0){Bv(Be,V);continue}let Ft={};const Jt=h?null:x,tr=$6(Ee,lt,!1,g,e,l,u,r.glyphOffsetArray,q,V,W,ft,Ge,Ft,ae,Jt,T.projection,b,h);ie=tr.useVertical,Jt&&tr.needsFlipping&&(Ft={}),(tr.notEnoughRoom||ie||tr.needsFlipping&&$6(Ee,lt,!0,g,e,l,u,r.glyphOffsetArray,q,V,W,ft,Ge,Ft,ae,Jt,T.projection,b,h).notEnoughRoom)&&Bv(Be,V)}a?(r.text.dynamicLayoutVertexBuffer.updateData(V),W&&r.text.globeExtVertexBuffer&&r.text.globeExtVertexBuffer.updateData(W)):(r.icon.dynamicLayoutVertexBuffer.updateData(V),W&&r.icon.globeExtVertexBuffer&&r.icon.globeExtVertexBuffer.updateData(W))}function D6(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V){const{lineStartIndex:W,glyphStartIndex:q,segment:ne}=g,ae=q+g.numGlyphs,le=W+g.lineLength,ie=e.getoffsetX(q),ue=e.getoffsetX(ae-1),Ee=YS(r*ie,i,a,l,u,h,ne,W,le,x,b,T,M,A,!0,O,B,V);if(!Ee)return null;const Be=YS(r*ue,i,a,l,u,h,ne,W,le,x,b,T,M,A,!0,O,B,V);return Be?{first:Ee,last:Be}:null}function L6(r,e,i,a){return r===jo.horizontal&&Math.abs(a)>Math.abs(i)?{useVertical:!0}:r===jo.vertical?a>0?{needsFlipping:!0}:null:e!==$v.unknown&&function(l,u){return l===0||Math.abs(u/l)>eJ}(i,a)?e===$v.flipRequired?{needsFlipping:!0}:null:i<0?{needsFlipping:!0}:null}function $6(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne){const ae=e/24,le=r.lineOffsetX*ae,ie=r.lineOffsetY*ae,{lineStartIndex:ue,glyphStartIndex:Ee,numGlyphs:Be,segment:je,writingMode:Ge,flipState:tt}=r,Ze=ue+r.lineLength,nt=Xe=>{if(T){const[lt,ft,Ft]=Xe.up,Jt=b.length;US(T,Jt+0,lt,ft,Ft),US(T,Jt+1,lt,ft,Ft),US(T,Jt+2,lt,ft,Ft),US(T,Jt+3,lt,ft,Ft)}const[ut,bt,At]=Xe.point;Lv(b,ut,bt,At,Xe.angle)};if(Be>1){const Xe=D6(ae,g,le,ie,i,M,A,r,x,u,O,V,!1,W,q,ne);if(!Xe)return{notEnoughRoom:!0};if(a&&!i){let[ut,bt,At]=Xe.first.point,[lt,ft,Ft]=Xe.last.point;[ut,bt]=wh(ut,bt,At,h),[lt,ft]=wh(lt,ft,Ft,h);const Jt=L6(Ge,tt,(lt-ut)*B,ft-bt);if(r.flipState=Jt&&Jt.needsFlipping?$v.flipRequired:$v.flipNotRequired,Jt)return Jt}nt(Xe.first);for(let ut=Ee+1;ut<Ee+Be-1;ut++){const bt=YS(ae*g.getoffsetX(ut),le,ie,i,M,A,je,ue,Ze,x,u,O,V,!1,!1,W,q,ne);if(!bt)return b.length-=4*(ut-Ee),{notEnoughRoom:!0};nt(bt)}nt(Xe.last)}else{if(a&&!i){const ut=wh(A.x,A.y,0,l),bt=ue+je+1,At=new oe(x.getx(bt),x.gety(bt)),lt=wh(At.x,At.y,0,l),ft=lt[3]>0?lt:F6(A,At,ut,1,l,void 0,W,q.canonical),Ft=L6(Ge,tt,(ft[0]-ut[0])*B,ft[1]-ut[1]);if(r.flipState=Ft&&Ft.needsFlipping?$v.flipRequired:$v.flipNotRequired,Ft)return Ft}const Xe=YS(ae*g.getoffsetX(Ee),le,ie,i,M,A,je,ue,Ze,x,u,O,V,!1,!1,W,q,ne);if(!Xe)return{notEnoughRoom:!0};nt(Xe)}return{}}function B6(r,e,i,a,l){const{x:u,y:h,z:g}=a.projectTilePoint(r.x,r.y,e);if(!l)return wh(u,h,g,i);const[x,b,T]=l(r);return wh(u+x,h+b,g+T,i)}function F6(r,e,i,a,l,u,h,g){const x=B6(r.sub(e)._unit()._add(r),g,l,h,u);return ce.sub(x,i,x),ce.normalize(x,x),ce.scaleAndAdd(x,i,x,a)}function YS(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q){const ne=a?r-e:r+e;let ae=ne>0?1:-1,le=0;a&&(ae*=-1,le=Math.PI),ae<0&&(le+=Math.PI);let ie=g+h+(ae>0?0:1)|0,ue=l,Ee=l,Be=0,je=0;const Ge=Math.abs(ne),tt=[],Ze=[];let nt=u,Xe=nt;const ut=()=>F6(Xe,nt,Ee,Ge-Be+1,T,A,V,W.canonical);for(;Be+je<=Ge;){if(ie+=ae,ie<g||ie>=x)return null;if(Ee=ue,Xe=nt,tt.push(Ee),O&&Ze.push(Xe),nt=new oe(b.getx(ie),b.gety(ie)),ue=M[ie],!ue){const pr=B6(nt,W.canonical,T,V,A);ue=pr[3]>0?M[ie]=pr:ut()}Be+=je,je=ce.distance(Ee,ue)}B&&A&&(M[ie]&&(ue=ut(),je=ce.distance(Ee,ue)),M[ie]=ue);const bt=(Ge-Be)/je,At=nt.sub(Xe)._mult(bt)._add(Xe),lt=ce.sub([],ue,Ee),ft=ce.scaleAndAdd([],Ee,lt,bt);let Ft=[0,0,1],Jt=lt[0],tr=lt[1];if(q&&(Ft=V.upVector(W.canonical,At.x,At.y),Ft[0]!==0||Ft[1]!==0||Ft[2]!==1)){const pr=[Ft[2],0,-Ft[0]],er=ce.cross([],Ft,pr);ce.normalize(pr,pr),ce.normalize(er,er),Jt=ce.dot(lt,pr),tr=ce.dot(lt,er)}if(i){const pr=ce.cross([],Ft,lt);ce.normalize(pr,pr),ce.scaleAndAdd(ft,ft,pr,i*ae)}const lr=le+Math.atan2(tr,Jt);return tt.push(ft),O&&Ze.push(At),{point:ft,angle:lr,path:tt,tilePath:Ze,up:Ft}}function Bv(r,e){const i=e.length,a=i+4*r;e.resize(a),e.float32.fill(-1/0,4*i,4*a)}function N6(r,e,i){const a=e[0],l=e[1];return r[0]=i[0]*a+i[4]*l+i[12],r[1]=i[1]*a+i[5]*l+i[13],r[3]=i[3]*a+i[7]*l+i[15],r}const j6=(r,e,i)=>(1-i)*r+i*e,V6=r=>r*r*r*r*r;class z3{constructor(e,i,a,l,u,h,g){this.tileSize=512,this._renderWorldCopies=u===void 0||u,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=a??0,this._maxPitch=l??60,this.setProjection(h),this.setMaxBounds(g),this.width=0,this.height=0,this._center=new zn(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new k3,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ZS,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const e=new z3(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(e,i=!1){const a=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||a)&&this._updateCameraOnTerrain(),(e||a)&&this._constrainCamera(i),this._calcMatrices()}getProjection(){return Ct(this.projection,["name","center","parallels"])}setProjection(e){this.projectionOptions=e||{name:"mercator"};const i=this.projection?this.getProjection():void 0;this.projection=BS(this.projectionOptions);const a=!Re(i,this.getProjection());return a&&this._calcMatrices(),this.mercatorFromTransition=!1,a}setOrthographicProjectionAtLowPitch(e){return this._orthographicProjectionAtLowPitch!==e&&(this._orthographicProjectionAtLowPitch=e,this._calcMatrices(),!0)}setMercatorFromTransition(){const e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=BS({name:"mercator"});const i=e!==this.projection.name;return i&&this._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return Oi(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new oe(this.width,this.height)}get bearing(){return jt(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const i=-e*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=_.create(),_.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const i=Qe(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=_e(e),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const i=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==i&&(this._unmodified=!1,this._setZoom(i),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){const e=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,i=this.elevation&&e===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||e===Number.NEGATIVE_INFINITY&&(!i||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const a=this._elevation;i||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&a.exaggeration()&&this._centerAltitudeValidForExaggeration!==a.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*a.exaggeration(),this._centerAltitudeValidForExaggeration=a.exaggeration()):(this._centerAltitude=e||0,this._centerAltitudeValidForExaggeration=a.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,i=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],a=this.horizonLineFromTop();let l=0,u=0;for(let h=0;h<i.length;h++){const g=new oe(i[h][0]*this.width,a+i[h][1]*(this.height-a)),x=e.pointCoordinate(g);if(!x)continue;const b=1/Math.hypot(x[0]-this._camera.position[0],x[1]-this._camera.position[1]);l+=x[3]*b,u+=b}return u===0?NaN:l/u}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const e=this._seaLevelZoom,i=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),a=this.pixelsPerMeter/this.worldSize*i,l=this._mercatorZfromZoom(e),u=this._mercatorZfromZoom(this._maxZoom),h=Math.max(l-a,u);this._setZoom(this._zoomFromMercatorZ(h))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(e){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let a;a=e.z<this._camera.position[2]?[i.x,i.y,i.z]:[e.x,e.y,e.z];const l=ce.length(ce.sub([],this._camera.position,a));return Qe(this._zoomFromMercatorZ(l),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height||!e.position&&!e.orientation)return;this._updateCameraState();let i=!1;if(e.orientation&&!de.exactEquals(e.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(e.orientation)),e.position){const a=[e.position.x,e.position.y,e.position.z];ce.exactEquals(a,this._camera.position)||(this._setCameraPosition(a),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,i=new I6;return i.position=new Si(e[0],e[1],e[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this.renderWorldCopies,i}_setCameraOrientation(e){if(!de.length(e))return!1;de.normalize(e,e);const i=ce.transformQuat([],[0,0,-1],e),a=ce.transformQuat([],[0,-1,0],e);if(a[2]<0)return!1;const l=T6(i,a);return!!l&&(this._camera.orientation=l,!0)}_setCameraPosition(e){const i=this.zoomScale(this.minZoom)*this.tileSize,a=this.zoomScale(this.maxZoom)*this.tileSize,l=this.cameraToCenterDistance;e[2]=Qe(e[2],l/a,l/i),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,i,a){this._unmodified=!1,this._edgeInsets.interpolate(e,i,a),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const i=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,i)}getVisibleUnwrappedCoordinates(e){const i=[new En(0,e)];if(this.renderWorldCopies){const a=this.pointCoordinate(new oe(0,0)),l=this.pointCoordinate(new oe(this.width,0)),u=this.pointCoordinate(new oe(this.width,this.height)),h=this.pointCoordinate(new oe(0,this.height)),g=Math.floor(Math.min(a.x,l.x,u.x,h.x)),x=Math.floor(Math.max(a.x,l.x,u.x,h.x)),b=1;for(let T=g-b;T<=x+b;T++)T!==0&&i.push(new En(T,e))}return i}isLODDisabled(e){return(!e||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(e,i,a){let l=[];if(i[0]===0&&i[1]===0)return l;for(const h of e){const g=h.canonical,x=h.overscaledZ,b=h.wrap,T=1<<g.z,M=g.x+1<T,A=g.x>0,O=g.y+1<T,B=g.y>0,V=h.wrap-(A?0:1),W=h.wrap+(M?0:1),q=A?g.x-1:T-1,ne=M?g.x+1:0;i[0]<0?(l.push(new xr(x,W,g.z,ne,g.y)),i[1]<0&&O&&(l.push(new xr(x,b,g.z,g.x,g.y+1)),l.push(new xr(x,W,g.z,ne,g.y+1))),i[1]>0&&B&&(l.push(new xr(x,b,g.z,g.x,g.y-1)),l.push(new xr(x,W,g.z,ne,g.y-1)))):i[0]>0?(l.push(new xr(x,V,g.z,q,g.y)),i[1]<0&&O&&(l.push(new xr(x,b,g.z,g.x,g.y+1)),l.push(new xr(x,V,g.z,q,g.y+1))),i[1]>0&&B&&(l.push(new xr(x,b,g.z,g.x,g.y-1)),l.push(new xr(x,V,g.z,q,g.y-1)))):i[1]<0&&O?l.push(new xr(x,b,g.z,g.x,g.y+1)):B&&l.push(new xr(x,b,g.z,g.x,g.y-1))}if(l.length>1){l.sort((x,b)=>x.overscaledZ-b.overscaledZ||x.wrap-b.wrap||x.canonical.z-b.canonical.z||x.canonical.x-b.canonical.x||x.canonical.y-b.canonical.y);let h=0,g=0;for(;g<l.length;)l[g].equals(l[h])?++g:l[++h]=l[g++];l.length=h+1}const u=[];for(const h of l)l.some(g=>h.isChildOf(g))||u.push(h);return l=u.filter(h=>!e.some(g=>!!(h.overscaledZ<a&&g.isChildOf(h))||h.equals(g)||h.isChildOf(g))),l}coveringTiles(e){let i=this.coveringZoomLevel(e);const a=i,l=this.elevation&&this.elevation.exaggeration(),u=l&&!e.isTerrainDEM,h=this.projection.name==="mercator";if(e.minzoom!==void 0&&i<e.minzoom)return[];e.maxzoom!==void 0&&i>e.maxzoom&&(i=e.maxzoom);const g=this.locationCoordinate(this.center),x=this.center.lat,b=1<<i,T=[b*g.x,b*g.y,0],M=this.projection.name==="globe",A=!M,O=to.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,A),B=M?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),V=b*Oi(1,this.center.lat),W=this._camera.position[2]/Oi(1,this.center.lat),q=[b*B.x,b*B.y,W*(A?1:V)],ne=M||l,ae=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),le=this.isLODDisabled(!0)?i:0,ie=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ue=e.isTerrainDEM?-ie:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ee=this.projection.isReprojectedInTileSpace?P6(this):1,Be=lt=>{const Ft=new Si(lt.x+25e-6,lt.y,lt.z),Jt=new Si(lt.x,lt.y+25e-6,lt.z),tr=lt.toLngLat(),lr=Ft.toLngLat(),pr=Jt.toLngLat(),er=this.locationCoordinate(tr),or=this.locationCoordinate(lr),kr=this.locationCoordinate(pr),Hr=Math.hypot(or.x-er.x,or.y-er.y),Ur=Math.hypot(kr.x-er.x,kr.y-er.y);return Math.sqrt(Hr*Ur)*Ee/25e-6},je=lt=>{const ft=ie,Ft=ue;return{aabb:f6(this,b,0,0,0,lt,Ft,ft,this.projection),zoom:0,x:0,y:0,minZ:Ft,maxZ:ft,wrap:lt,fullyVisible:!1}},Ge=[];let tt=[];const Ze=i,nt=e.reparseOverscaled?a:i,Xe=lt=>lt*lt,ut=Xe((W-this._centerAltitude)*V),bt=lt=>{if(!this._elevation||!lt.tileID||!h)return;const ft=this._elevation.getMinMaxForTile(lt.tileID),Ft=lt.aabb;ft?(Ft.min[2]=ft.min,Ft.max[2]=ft.max,Ft.center[2]=(Ft.min[2]+Ft.max[2])/2):(lt.shouldSplit=At(lt),lt.shouldSplit||(Ft.min[2]=Ft.max[2]=Ft.center[2]=this._centerAltitude))},At=lt=>{if(lt.zoom<le)return!0;if(lt.zoom===Ze)return!1;if(lt.shouldSplit!=null)return lt.shouldSplit;const ft=lt.aabb.distanceX(q),Ft=lt.aabb.distanceY(q);let Jt=ut,tr=1;if(M){Jt=Xe(lt.aabb.distanceZ(q));const er=Math.pow(2,lt.zoom),or=Ro((lt.y+1)/er),kr=Ro(lt.y/er),Hr=Math.min(Math.max(x,or),kr),Ur=Sv(Hr)/Sv(x);if(tr=Hr===x?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ur/this._mercatorScaleRatio),this.zoom<=ca&&lt.zoom===Ze-1&&Ur>=.9)return!0}else if(u&&(Jt=Xe(lt.aabb.distanceZ(q)*V)),this.projection.isReprojectedInTileSpace&&a<=5){const er=Math.pow(2,lt.zoom),or=Be(new Si((lt.x+.5)/er,(lt.y+.5)/er));tr=or>.85?1:or}const lr=ft*ft+Ft*Ft+Jt,pr=Xe((1<<Ze-lt.zoom)*ae*tr*((er,or)=>{if(or*Xe(.707)<er)return 1;const kr=Math.sqrt(or/er);return kr/(1.4144271570014144+(Math.pow(1.1,kr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Jt,ut),lr));return lr<pr};if(this.renderWorldCopies)for(let lt=1;lt<=3;lt++)Ge.push(je(-lt)),Ge.push(je(lt));for(Ge.push(je(0));Ge.length>0;){const lt=Ge.pop(),ft=lt.x,Ft=lt.y;let Jt=lt.fullyVisible;const tr=()=>this.projection.name==="globe"&&(lt.y===0||lt.y===(1<<lt.zoom)-1);if(!Jt){let lr=ne?lt.aabb.intersects(O):lt.aabb.intersectsFlat(O);if(lr===0&&tr()){const pr=new sn(lt.zoom,ft,Ft);lr=ys(this,b,pr,!0).intersects(O)}if(lr===0)continue;Jt=lr===2}if(lt.zoom!==Ze&&At(lt))for(let lr=0;lr<4;lr++){const pr=(ft<<1)+lr%2,er=(Ft<<1)+(lr>>1),or={aabb:h?lt.aabb.quadrant(lr):f6(this,b,lt.zoom+1,pr,er,lt.wrap,lt.minZ,lt.maxZ,this.projection),zoom:lt.zoom+1,x:pr,y:er,wrap:lt.wrap,fullyVisible:Jt,tileID:void 0,shouldSplit:void 0,minZ:lt.minZ,maxZ:lt.maxZ};u&&!M&&(or.tileID=new xr(lt.zoom+1===Ze?nt:lt.zoom+1,lt.wrap,lt.zoom+1,pr,er),bt(or)),Ge.push(or)}else{const lr=lt.zoom===Ze?nt:lt.zoom;if(e.minzoom&&e.minzoom>lr)continue;if(!Jt){let kr=ne?lt.aabb.intersectsPrecise(O):lt.aabb.intersectsPreciseFlat(O);if(kr===0&&tr()){const Hr=new sn(lt.zoom,ft,Ft);kr=ys(this,b,Hr,!0).intersectsPrecise(O)}if(kr===0)continue}const pr=T[0]-(.5+ft+(lt.wrap<<lt.zoom))*(1<<i-lt.zoom),er=T[1]-.5-Ft,or=lt.tileID?lt.tileID:new xr(lr,lt.wrap,lt.zoom,ft,Ft);tt.push({tileID:or,distanceSq:pr*pr+er*er})}}if(this.fogCullDistSq){const lt=this.fogCullDistSq,ft=this.horizonLineFromTop();tt=tt.filter(Ft=>{const Jt=[0,0,0,1],tr=[Zt,Zt,0,1],lr=this.calculateFogTileMatrix(Ft.tileID.toUnwrapped());Hi.transformMat4(Jt,Jt,lr),Hi.transformMat4(tr,tr,lr);const pr=function(kr,Hr,Ur){let qr=0;for(let yn=0;yn<2;++yn)kr[yn]>0&&(qr+=(kr[yn]-0)*(kr[yn]-0)),Hr[yn]<0&&(qr+=(0-Hr[yn])*(0-Hr[yn]));return qr}(Hi.min([],Jt,tr),Hi.max([],Jt,tr));if(pr===0)return!0;let er=!1;const or=this._elevation;if(or&&pr>lt&&ft!==0){const kr=this.calculateProjMatrix(Ft.tileID.toUnwrapped());let Hr;e.isTerrainDEM||(Hr=or.getMinMaxForTile(Ft.tileID)),Hr||(Hr={min:ue,max:ie});const Ur=function(yn){const Dn=Math.round((yn+45+360)%360/90)%4;return Le[Dn]}(this.rotation),qr=[Ur[0]*Zt,Ur[1]*Zt,Hr.max];ce.transformMat4(qr,qr,kr),er=(1-qr[1])*this.height*.5<ft}return pr<lt||er})}return tt.sort((lt,ft)=>lt.distanceSq-ft.distanceSq).map(lt=>lt.tileID)}resize(e,i){this.width=e,this.height=i,this.pixelsToGLUnits=[2/e,-2/i],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const i=Qe(e.lat,-ha,ha),a=this.projection.project(e.lng,i);return new oe(a.x*this.worldSize,a.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/Oi(1,this.center.lat)/this.worldSize}setLocationAtPoint(e,i){let a,l;const u=this.centerPoint;if(this.projection.name==="globe"){const g=this.worldSize;a=(i.x-u.x)/g,l=(i.y-u.y)/g}else{const g=this.pointCoordinate(i),x=this.pointCoordinate(u);a=g.x-x.x,l=g.y-x.y}const h=this.locationCoordinate(e);this.setLocation(new Si(h.x-a,h.y-l))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(e,i){const a=i?Oi(i,e.lat):void 0,l=this.projection.project(e.lng,e.lat);return new Si(l.x,l.y,a)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(e,i){const a=i??this._centerAltitude,l=[e.x,e.y,0,1],u=[e.x,e.y,1,1];Hi.transformMat4(l,l,this.pixelMatrixInverse),Hi.transformMat4(u,u,this.pixelMatrixInverse);const h=u[3];Hi.scale(l,l,1/l[3]),Hi.scale(u,u,1/h);const g=l[2],x=u[2];return{p0:l,p1:u,t:g===x?0:(a-g)/(x-g)}}screenPointToMercatorRay(e){const i=[e.x,e.y,0,1],a=[e.x,e.y,1,1];return Hi.transformMat4(i,i,this.pixelMatrixInverse),Hi.transformMat4(a,a,this.pixelMatrixInverse),Hi.scale(i,i,1/i[3]),Hi.scale(a,a,1/a[3]),i[2]=Oi(i[2],this._center.lat)*this.worldSize,a[2]=Oi(a[2],this._center.lat)*this.worldSize,Hi.scale(i,i,1/this.worldSize),Hi.scale(a,a,1/this.worldSize),new bn([i[0],i[1],i[2]],ce.normalize([],ce.sub([],a,i)))}rayIntersectionCoordinate(e){const{p0:i,p1:a,t:l}=e,u=Oi(i[2],this._center.lat),h=Oi(a[2],this._center.lat);return new Si(Mn(i[0],a[0],l)/this.worldSize,Mn(i[1],a[1],l)/this.worldSize,Mn(u,h,l))}pointCoordinate(e,i=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,i)}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);let i=this.projection.pointCoordinate3D(this,e.x,e.y);if(i)return new Si(i[0],i[1],i[2]);let a=0,l=this.horizonLineFromTop();if(e.y>l)return this.pointCoordinate(e);const u=.02*l,h=e.clone();for(let g=0;g<10&&l-a>u;g++){h.y=Mn(a,l,.66);const x=this.projection.pointCoordinate3D(this,h.x,h.y);x?(l=h.y,i=x):a=h.y}return i?new Si(i[0],i[1],i[2]):this.pointCoordinate(e)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(e){if(e.y<0||e.y>this.height||e.x<0||e.x>this.width)return!1;if(this.elevation||this.zoom>=Ya)return!this.isPointAboveHorizon(e);const i=this.pointCoordinate(e);return i.y>=0&&i.y<=1}_coordinatePoint(e,i){const a=i&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,l=[e.x*this.worldSize,e.y*this.worldSize,a+e.toAltitude(),1];return Hi.transformMat4(l,l,this.pixelMatrix),l[3]>0?new oe(l[0]/l[3],l[1]/l[3]):new oe(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:e,left:i}=this._edgeInsets,a=this.height-this._edgeInsets.bottom,l=this.width-this._edgeInsets.right,u=this.pointLocation3D(new oe(i,e)),h=this.pointLocation3D(new oe(l,e)),g=this.pointLocation3D(new oe(l,a)),x=this.pointLocation3D(new oe(i,a));let b=Math.min(u.lng,h.lng,g.lng,x.lng),T=Math.max(u.lng,h.lng,g.lng,x.lng),M=Math.min(u.lat,h.lat,g.lat,x.lat),A=Math.max(u.lat,h.lat,g.lat,x.lat);const O=Math.pow(2,-this.zoom)/16*270,B=this.projection.name==="globe"?1:4,V=(W,q,ne,ae,le)=>{const ie=(W+ne)/2,ue=(q+ae)/2,Ee=new oe(ie,ue),{lng:Be,lat:je}=this.pointLocation3D(Ee),Ge=Math.max(0,b-Be,M-je,Be-T,je-A);b=Math.min(b,Be),T=Math.max(T,Be),M=Math.min(M,je),A=Math.max(A,je),(le<B||Ge>O)&&(V(W,q,ie,ue,le+1),V(ie,ue,ne,ae,le+1))};if(V(i,e,l,e,1),V(l,e,l,a,1),V(l,a,i,a,1),V(i,a,i,e,1),this.projection.name==="globe"){const[W,q]=function(ne){const ae=U.identity(new Float64Array(16));U.multiply(ae,ne.pixelMatrix,ne.globeMatrix);const le=[0,Yo,0],ie=[0,Jo,0];return ce.transformMat4(le,le,ae),ce.transformMat4(ie,ie,ae),[le[0]>0&&le[0]<=ne.width&&le[1]>0&&le[1]<=ne.height&&!wv(ne,new zn(ne.center.lat,90)),ie[0]>0&&ie[0]<=ne.width&&ie[1]>0&&ie[1]<=ne.height&&!wv(ne,new zn(ne.center.lat,-90))]}(this);W?(A=90,T=180,b=-180):q&&(M=-90,T=180,b=-180)}return new Dl(new zn(b,M),new zn(T,A))}_getBoundsRectangular(e,i){const{top:a,left:l}=this._edgeInsets,u=this.height-this._edgeInsets.bottom,h=this.width-this._edgeInsets.right,g=new oe(l,a),x=new oe(h,a),b=new oe(h,u),T=new oe(l,u);let M=this.pointCoordinate(g,e),A=this.pointCoordinate(x,e);const O=this.pointCoordinate(b,i),B=this.pointCoordinate(T,i),V=(W,q)=>(q.y-W.y)/(q.x-W.x);return M.y>1&&A.y>=0?M=new Si((1-B.y)/V(B,M)+B.x,1):M.y<0&&A.y<=1&&(M=new Si(-B.y/V(B,M)+B.x,0)),A.y>1&&M.y>=0?A=new Si((1-O.y)/V(O,A)+O.x,1):A.y<0&&M.y<=1&&(A=new Si(-O.y/V(O,A)+O.x,0)),new Dl().extend(this.coordinateLocation(M)).extend(this.coordinateLocation(A)).extend(this.coordinateLocation(B)).extend(this.coordinateLocation(O))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const i=e.visibleDemTiles.reduce((a,l)=>{if(l.dem){const u=l.dem.tree;a.min=Math.min(a.min,u.minimums[0]),a.max=Math.max(a.max,u.maximums[0])}return a},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(i.min*e.exaggeration(),i.max*e.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const i=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,a=this.height/2-i*(1-this._horizonShift);return e?Math.max(0,a):a}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-ha,this.maxLat=ha,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=ro(this.minLng)*this.tileSize,this.worldMaxX=ro(this.maxLng)*this.tileSize,this.worldMinY=Eo(this.maxLat)*this.tileSize,this.worldMaxY=Eo(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,i){return this.projection.createTileMatrix(this,i,e)}calculateDistanceTileData(e){const i=e.key,a=this._distanceTileDataCache;if(a[i])return a[i];const l=e.canonical,u=1/this.height,h=this.cameraWorldSize,g=h/this.zoomScale(l.z),x=(l.x+Math.pow(2,l.z)*e.wrap)*g,b=l.y*g,T=this.point;T.x*=h/this.worldSize,T.y*=h/this.worldSize;const M=this.angle,A=Math.sin(-M),O=-Math.cos(-M);return a[i]={bearing:[A,O],center:[(T.x-x)*u,(T.y-b)*u],scale:g/Zt*u},a[i]}calculateFogTileMatrix(e){const i=e.key,a=this._fogTileMatrixCache;if(a[i])return a[i];const l=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,e);return U.multiply(l,this.worldToFogMatrix,l),a[i]=new Float32Array(l),a[i]}calculateProjMatrix(e,i=!1){const a=e.key,l=i?this._alignedProjMatrixCache:this._projMatrixCache;if(l[a])return l[a];const u=this.calculatePosMatrix(e,this.worldSize);return U.multiply(u,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:i?this.alignedProjMatrix:this.projMatrix,u),l[a]=new Float32Array(u),l[a]}calculatePixelsToTileUnitsMatrix(e){const i=e.tileID.key,a=this._pixelsToTileUnitsCache;if(a[i])return a[i];const l=function(u,h){const{scale:g}=u.tileTransform,x=g*Zt/(u.tileSize*Math.pow(2,h.zoom-u.tileID.overscaledZ+u.tileID.canonical.z));return _.scale(new Float32Array(4),h.inverseAdjustmentMatrix,[x,x])}(e,this);return a[i]=l,a[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const e=1/this.worldSize,i=U.fromScaling([],[e,e,e]);return U.multiply(i,i,this.globeMatrix),i}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const e=this._elevation;this._updateCameraState();const i=Oi(1,this._center.lat)*this.worldSize,a=this._computeCameraPosition(i),l=this._camera.forward(),u=Oi(1,this._center.lat);a[2]/=u,l[2]/=u,ce.normalize(l,l);const h=e.raycast(a,l,e.exaggeration());if(h){const g=ce.scaleAndAdd([],a,l,h),x=new Si(g[0],g[1],Oi(g[2],Ro(g[1]))),b=(x.z+ce.length([x.x-a[0],x.y-a[1],x.z-a[2]*u]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(b),this._centerAltitude=x.toAltitude(),this._center=this.coordinateLocation(x),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(e=!1){if(!this._elevation)return;const i=this._elevation,a=Oi(1,this._center.lat)*this.worldSize,l=this._computeCameraPosition(a),u=i.getAtPointOrZero(new Si(...l)),h=this.pixelsPerMeter/this.worldSize*u,g=this._minimumHeightOverTerrain(),x=l[2]-h;if(x<=g)if(x<0||e){const b=this.locationCoordinate(this._center,this._centerAltitude),T=[l[0],l[1],b.z-l[2]],M=ce.length(T);T[2]-=(g-x)/this._pixelsPerMercatorPixel;const A=ce.length(T);if(A===0)return;ce.scale(T,T,M/A*this._pixelsPerMercatorPixel),this._camera.position=[l[0],l[1],b.z*this._pixelsPerMercatorPixel-T[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){const A=this.center;return A.lat=Qe(A.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(A.lng=Qe(A.lng,this.minLng,this.maxLng)),this.center=A,void(this._constraining=!1)}const i=this._unmodified,{x:a,y:l}=this.point;let u=0,h=a,g=l;const x=this.width/2,b=this.height/2,T=this.worldMinY*this.scale,M=this.worldMaxY*this.scale;if(l-b<T&&(g=T+b),l+b>M&&(g=M-b),M-T<this.height&&(u=Math.max(u,this.height/(M-T)),g=(M+T)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const A=this.worldMinX*this.scale,O=this.worldMaxX*this.scale,B=this.worldSize/2-(A+O)/2;h=(a+B+this.worldSize)%this.worldSize-B,h-x<A&&(h=A+x),h+x>O&&(h=O-x),O-A<this.width&&(u=Math.max(u,this.width/(O-A)),h=(O+A)/2)}h===a&&g===l||(this.center=this.unproject(new oe(h,g))),u&&(this.zoom+=this.scaleZoom(u)),this._constrainCamera(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,i=this.projection.name==="globe",a=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=Oi(1,this.center.lat)/Oi(1,45));const l=ox(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,l),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const u=this.projection.zAxisUnit==="meters"?a:1,h=this._camera.getWorldToCamera(this.worldSize,u);let g;const x=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(x[8]=2*-e.x/this.width,x[9]=2*e.y/this.height,this.isOrthographic){let je=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Ge=je*this.aspect,tt=-Ge,Ze=-je;Ge-=e.x,tt-=e.x,je+=e.y,Ze+=e.y,g=this._camera.getCameraToClipOrthographic(tt,Ge,Ze,je,this._nearZ,this._farZ),((nt,Xe,ut,bt)=>{for(let At=0;At<16;At++)nt[At]=j6(Xe[At],ut[At],bt)})(g,g,x,V6(this.pitch>=15?1:this.pitch/15))}else g=x;const b=U.mul([],x,h);let T=U.mul([],g,h);if(this.projection.isReprojectedInTileSpace){const je=this.locationCoordinate(this.center),Ge=U.identity([]);U.translate(Ge,Ge,[je.x*this.worldSize,je.y*this.worldSize,0]),U.multiply(Ge,Ge,M6(this)),U.translate(Ge,Ge,[-je.x*this.worldSize,-je.y*this.worldSize,0]),U.multiply(T,T,Ge),U.multiply(b,b,Ge),this.inverseAdjustmentMatrix=function(tt){const Ze=M6(tt,!0);return _.invert([],[Ze[0],Ze[1],Ze[4],Ze[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=U.scale([],T,[this.worldSize,this.worldSize,this.worldSize/u,1]),this.projMatrix=T,this.invProjMatrix=U.invert(new Float64Array(16),this.projMatrix);const M=U.invert([],g);this.frustumCorners=on.fromInvProjectionMatrix(M,this.horizonLineFromTop(),this.height),this.cameraFrustum=to.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!i);const A=new Float32Array(16);U.identity(A),U.scale(A,A,[1,-1,1]),U.rotateX(A,A,this._pitch),U.rotateZ(A,A,this.angle);const O=U.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=U.clone(O);const B=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;O[8]=2*-e.x/this.width,O[9]=2*(e.y+B)/this.height,this.skyboxMatrix=U.multiply(A,O,A);const V=this.point,W=V.x,q=V.y,ne=this.width%2/2,ae=this.height%2/2,le=Math.cos(this.angle),ie=Math.sin(this.angle),ue=W-Math.round(W)+le*ne+ie*ae,Ee=q-Math.round(q)+le*ae+ie*ne,Be=new Float64Array(T);if(U.translate(Be,Be,[ue>.5?ue-1:ue,Ee>.5?Ee-1:Ee,0]),this.alignedProjMatrix=Be,T=U.create(),U.scale(T,T,[this.width/2,-this.height/2,1]),U.translate(T,T,[1,-1,0]),this.labelPlaneMatrix=T,T=U.create(),U.scale(T,T,[1,-1,1]),U.translate(T,T,[-1,-1,0]),U.scale(T,T,[2/this.width,2/this.height,1]),this.glCoordMatrix=T,this.pixelMatrix=U.multiply(new Float64Array(16),this.labelPlaneMatrix,b),this._calcFogMatrices(),this._distanceTileDataCache={},T=U.invert(new Float64Array(16),this.pixelMatrix),!T)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=T,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=function(Ge){const{x:tt,y:Ze}=Ge.point,{lng:nt,lat:Xe}=Ge._center;return V1(tt,Ze,Ge.worldSize,nt,Xe)}(this);const je=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=ce.transformMat4(je,je,h),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=T;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSizeForFog,i=this.cameraPixelsPerMeter,a=this._camera.position,l=1/this.height/this._pixelsPerMercatorPixel,u=[e,e,i];ce.scale(u,u,l),ce.scale(a,a,-1),ce.multiply(a,a,u);const h=U.create();U.translate(h,h,a),U.scale(h,h,u),this.mercatorFogMatrix=h,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,i,l)}_computeCameraPosition(e){const i=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,a=this._camera.forward(),l=this.point,u=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*i-e/this.worldSize*this._centerAltitude;return[l.x/this.worldSize-a[0]*u,l.y/this.worldSize-a[1]*u,e/this.worldSize*this._centerAltitude-a[2]*u]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(e){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),a=this._camera.position[2],l=e[2];let u=1;this.projection.wrap&&(this.center=this.center.wrap()),l>0&&(u=Math.min((i-a)/l,1)),this._camera.position=ce.scaleAndAdd([],this._camera.position,e,u),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,i=this._camera.forward(),{pitch:a,bearing:l}=this._camera.getPitchBearing(),u=Oi(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,h=this._mercatorZfromZoom(this._maxZoom)*Math.cos(_e(this._maxPitch)),g=Math.max((e[2]-u)/Math.cos(a),h),x=this._zoomFromMercatorZ(g);ce.scaleAndAdd(e,e,i,g),this._pitch=Qe(a,_e(this.minPitch),_e(this.maxPitch)),this.angle=jt(l,-Math.PI,Math.PI),this._setZoom(Qe(x,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new Si(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(e){let i=0,a=Ya,l=0,u=1/0;for(;a-i>1e-6&&a>i;){const h=i+.5*(a-i),g=this.tileSize*Math.pow(2,h),x=this.getCameraToCenterDistance(this.projection,h,g),b=this.scaleZoom(x/(e*this.tileSize)),T=Math.abs(h-b);T<u&&(u=T,l=h),h<b?i=h:a=h}return l}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(ve("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(e,i){const a=Math.min(e.x,i.x),l=Math.max(e.x,i.x),u=Math.min(e.y,i.y),h=Math.max(e.y,i.y);if(u<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const g=[new oe(a,u),new oe(l,h),new oe(a,h),new oe(l,u)],x=this.renderWorldCopies?-3:0,b=this.renderWorldCopies?4:1;for(const T of g){const M=this.pointRayIntersection(T);if(M.t<0)return!0;const A=this.rayIntersectionCoordinate(M);if(A.x<x||A.y<0||A.x>b||A.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+Fe(this.fovAboveCenter)>88||this.anyCornerOffEdge(new oe(0,0),new oe(this.width,this.height))}zoomDeltaToMovement(e,i){const a=ce.length(ce.sub([],this._camera.position,e)),l=this._zoomFromMercatorZ(a)+i;return a-this._mercatorZfromZoom(l)}getCameraPoint(){if(this.projection.name==="globe"){const e=function([i,a,l],u){const h=[i,a,l,1];Hi.transformMat4(h,h,u);const g=h[3]=Math.max(h[3],1e-6);return h[0]/=g,h[1]/=g,h[2]/=g,h}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new oe(e[0],e[1])}{const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new oe(0,e))}}getCameraToCenterDistance(e,i=this.zoom,a=this.worldSize){const l=ox(e,i,this.width,this.height,1024),u=e.pixelSpaceConversion(this.center.lat,a,l);let h=.5/Math.tan(.5*this._fov)*this.height*u;return this.isOrthographic&&(h=j6(1,h,V6(this.pitch>=15?1:this.pitch/15))),h}getWorldToCameraMatrix(){const e=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&U.multiply(e,e,this.globeMatrix),e}getFrustum(e){return to.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e,this.projection.zAxisUnit==="meters")}}function U6(r,e,i){U.identity(r),U.rotateZ(r,r,_e(e[2])),U.rotateX(r,r,_e(e[0])),U.rotateY(r,r,_e(e[1])),U.scale(r,r,i),U.multiply(r,r,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function JS(r,e,i,a,l,u,h,g){const x=[i[0]-e[0],i[1]-e[1],0],b=[a[0]-e[0],a[1]-e[1],0];if(ce.length(x)<1e-12||ce.length(b)<1e-12)return de.identity(r);const T=ce.cross([],x,b);ce.normalize(T,T),ce.subtract(b,a,e),x[2]=(u-l)*g,b[2]=(h-l)*g;const M=x;return ce.cross(M,x,b),ce.normalize(M,M),de.rotationTo(r,T,M)}function H6(r,e,i=!1){const a=Na(e.zoom),l=function(u,h,g){const x=h.worldSize,b=[u[12],u[13],u[14]],T=Ro(b[1]/x),M=va(b[0]/x),A=U.identity([]),O=Oi(1,T)*x,B=Oi(1,0)*x*Gp(T,h.zoom),V=1/nu(x);let W=B*V;if(g){const le=ox(h.projection,h.zoom,h.width,h.height,1024);W=V*h.projection.pixelSpaceConversion(h.center.lat,x,le)}const q=ua(T,M);ce.add(q,q,ce.scale([],ce.normalize([],q),O*W*b[2]));const ne=function(le){const ie=[le[0],le[1],le[2]];let ue=[0,1,0];const Ee=ce.cross([],ue,ie);return ce.cross(ue,ie,Ee),ce.squaredLength(ue)===0&&(ue=[0,1,0],ce.cross(Ee,ie,ue)),ce.normalize(Ee,Ee),ce.normalize(ue,ue),ce.normalize(ie,ie),[Ee[0],Ee[1],Ee[2],0,ue[0],ue[1],ue[2],0,ie[0],ie[1],ie[2],0,le[0],le[1],le[2],1]}(q);U.scale(A,A,[W,W,W*O]),U.translate(A,A,[-b[0],-b[1],-b[2]]);const ae=U.multiply([],h.globeMatrix,ne);return U.multiply(ae,ae,A),U.multiply(ae,ae,u),ae}(r,e,i);if(a>0){const u=function(h,g){const x=g.worldSize,b=Oi(1,0)*x*Gp(g.center.lat,g.zoom)/nu(x),T=Oi(1,g.center.lat)*x,M=U.identity([]);return U.rotateY(M,M,_e(g.center.lng)),U.rotateX(M,M,_e(g.center.lat)),U.translate(M,M,[0,0,Co]),U.scale(M,M,[b,b,b*T]),U.translate(M,M,[g.point.x-.5*x,g.point.y-.5*x,0]),U.multiply(M,M,h),U.multiply(M,g.globeMatrix,M)}(r,e);return function(h,g,x){const b=(B,V,W)=>{const q=ce.length(B),ne=ce.length(V),ae=Ia(B,V,W);return ce.scale(ae,ae,1/ce.length(ae)*Mn(q,ne,W))},T=b([h[0],h[1],h[2]],[g[0],g[1],g[2]],x),M=b([h[4],h[5],h[6]],[g[4],g[5],g[6]],x),A=b([h[8],h[9],h[10]],[g[8],g[9],g[10]],x),O=Ia([h[12],h[13],h[14]],[g[12],g[13],g[14]],x);return[T[0],T[1],T[2],0,M[0],M[1],M[2],0,A[0],A[1],A[2],0,O[0],O[1],O[2],1]}(l,u,a)}return l}const Bg=64,nJ=[1,1,1];class G6{constructor(e,i,a,l){this.id=e,this.position=i!=null?new zn(i[0],i[1]):new zn(0,0),this.orientation=a??[0,0,0],this.nodes=l,this.uploaded=!1,this.aabb=new Xn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(e,i){if(U.multiply(e.matrix,i,e.matrix),e.meshes)for(const a of e.meshes){const l=Xn.applyTransform(a.aabb,e.matrix);this.aabb.encapsulate(l)}if(e.children)for(const a of e.children)this._applyTransformations(a,e.matrix)}computeBoundsAndApplyParent(){const e=U.identity([]);for(const i of this.nodes)this._applyTransformations(i,e)}_positionModelOnTerrain(e,i){const a=e.elevation;if(!a)return 0;const l=Xn.projectAabbCorners(this.aabb,this.matrix),u=Oi(1,this.position.lat)*e.worldSize,h=function(q,ne){const ae=[0,0,1],le=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const ie of le){const ue=q[ie.corners[0]],Ee=q[ie.corners[1]],Be=q[ie.corners[2]],je=[Ee[0]-ue[0],Ee[1]-ue[1],ne*(Ee[2]-ue[2])],Ge=ce.cross(je,je,[Be[0]-ue[0],Be[1]-ue[1],ne*(Be[2]-ue[2])]);ce.normalize(Ge,Ge),ie.dotProductWithUp=ce.dot(Ge,ae)}return le.sort((ie,ue)=>ie.dotProductWithUp-ue.dotProductWithUp),le[0].corners}(l,u),g=l[h[0]],x=l[h[1]],b=l[h[2]],T=l[h[3]],M=a.getAtPointOrZero(new Si(g[0]/e.worldSize,g[1]/e.worldSize),0),A=a.getAtPointOrZero(new Si(x[0]/e.worldSize,x[1]/e.worldSize),0),O=a.getAtPointOrZero(new Si(b[0]/e.worldSize,b[1]/e.worldSize),0),B=a.getAtPointOrZero(new Si(T[0]/e.worldSize,T[1]/e.worldSize),0),V=(M+B)/2,W=(A+O)/2;return V>W?A<O?JS(i,x,T,g,A,B,M,u):JS(i,b,g,T,O,M,B,u):M<B?JS(i,g,x,b,M,A,O,u):JS(i,T,b,x,B,O,A,u),Math.max(V,W)}computeModelMatrix(e,i,a,l,u,h,g=!1){const x=e.transform,b=x.zoom,T=x.project(this.position),M=Gp(this.position.lat,b),A=1/M;U.identity(this.matrix),U.translate(this.matrix,this.matrix,[T.x+l[0]*A,T.y+l[1]*A,l[2]]);let O=1,B=1;const V=x.worldSize;if(g){if(x.projection.name==="mercator"){let ae=0;x.elevation&&(ae=x.elevation.getAtPointOrZero(new Si(T.x/V,T.y/V),0));const le=Hi.transformMat4([],[T.x,T.y,ae,1],x.projMatrix)[3]/x.cameraToCenterDistance;O=le,B=le*Gp(x.center.lat,b)}else if(x.projection.name==="globe"){const ae=H6(this.matrix,x),le=U.multiply([],x.projMatrix,ae),ie=[0,0,0,1];Hi.transformMat4(ie,ie,le);const ue=ie[3]/x.cameraToCenterDistance,Ee=Na(b),Be=x.projection.pixelsPerMeter(this.position.lat,V)*Gp(this.position.lat,b),je=x.projection.pixelsPerMeter(x.center.lat,V)*Gp(x.center.lat,b);O=ue/Mn(Be,iD(x.center.lat),Ee),B=ue*M/Be,O*=je,B*=je}}else O=A;U.scale(this.matrix,this.matrix,[O,O,B]);const W=[...this.matrix],q=this.orientation,ne=[];if(U6(ne,[q[0]+i[0],q[1]+i[1],q[2]+i[2]],a),U.multiply(this.matrix,W,ne),u&&x.elevation){let ae=0;const le=[];if(h&&x.elevation){ae=this._positionModelOnTerrain(x,le);const ie=U.fromQuat([],le),ue=U.multiply([],ie,ne);U.multiply(this.matrix,W,ue)}else ae=x.elevation.getAtPointOrZero(new Si(T.x/V,T.y/V),0);ae!==0&&(this.matrix[14]+=ae)}}upload(e){if(!this.uploaded){for(const i of this.nodes)D3(i,e);for(const i of this.nodes)QS(i);this.uploaded=!0}}destroy(){for(const e of this.nodes)eC(e)}}function ax(r,e,i=!1){r.uploaded||(r.gfxTexture=new ja(e,r.image,i?e.gl.R8:e.gl.RGBA,{useMipmap:r.sampler.minFilter>=e.gl.NEAREST_MIPMAP_NEAREST}),r.uploaded=!0,r.image=null)}function iJ(r,e,i){r.indexBuffer=e.createIndexBuffer(r.indexArray,!1,!0),r.vertexBuffer=e.createVertexBuffer(r.vertexArray,WY.members,!1,!0),r.normalArray&&(r.normalBuffer=e.createVertexBuffer(r.normalArray,YY.members,!1,!0)),r.texcoordArray&&(r.texcoordBuffer=e.createVertexBuffer(r.texcoordArray,XY.members,!1,!0)),r.colorArray&&(r.colorBuffer=e.createVertexBuffer(r.colorArray,(r.colorArray.bytesPerElement===12?KY:ZY).members,!1,!0)),r.featureArray&&(r.pbrBuffer=e.createVertexBuffer(r.featureArray,QY.members,!0)),r.segments=qi.simpleSegment(0,0,r.vertexArray.length,r.indexArray.length);const a=r.material;a.pbrMetallicRoughness.baseColorTexture&&ax(a.pbrMetallicRoughness.baseColorTexture,e),a.pbrMetallicRoughness.metallicRoughnessTexture&&ax(a.pbrMetallicRoughness.metallicRoughnessTexture,e),a.normalTexture&&ax(a.normalTexture,e),a.occlusionTexture&&ax(a.occlusionTexture,e,i),a.emissionTexture&&ax(a.emissionTexture,e)}function D3(r,e,i){if(r.meshes)for(const a of r.meshes)iJ(a,e,i);if(r.children)for(const a of r.children)D3(a,e,i)}function QS(r){if(r.meshes)for(const e of r.meshes)e.indexArray.destroy(),e.vertexArray.destroy(),e.colorArray&&e.colorArray.destroy(),e.normalArray&&e.normalArray.destroy(),e.texcoordArray&&e.texcoordArray.destroy(),e.featureArray&&e.featureArray.destroy();if(r.children)for(const e of r.children)QS(e)}function eC(r){if(r.meshes)for(const i of r.meshes)i.vertexBuffer&&(i.vertexBuffer.destroy(),i.indexBuffer.destroy(),i.normalBuffer&&i.normalBuffer.destroy(),i.texcoordBuffer&&i.texcoordBuffer.destroy(),i.colorBuffer&&i.colorBuffer.destroy(),i.pbrBuffer&&i.pbrBuffer.destroy(),i.segments.destroy(),i.material&&((e=i.material).pbrMetallicRoughness.baseColorTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),e.pbrMetallicRoughness.metallicRoughnessTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),e.normalTexture&&e.normalTexture.gfxTexture&&e.normalTexture.gfxTexture.destroy(),e.emissionTexture&&e.emissionTexture.gfxTexture&&e.emissionTexture.gfxTexture.destroy(),e.occlusionTexture&&e.occlusionTexture.gfxTexture&&e.occlusionTexture.gfxTexture.destroy()));var e;if(r.children)for(const i of r.children)eC(i)}class q6{constructor(e,i){this.feature=e,this.instancedDataOffset=i,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class W6{constructor(){this.instancedDataArray=new Y0,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class K6{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.fqid),this.projection=e.projection,this.index=e.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(e,i,a,l){this.tileToMeter=U1(a);const u=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:h,id:g,index:x,sourceLayerIndex:b}of e){const T=qp(h,u);if(!this.layers[0]._featureFilter.filter(new uo(this.zoom),T,a))continue;const M={id:g,sourceLayerIndex:b,index:x,geometry:u?T.geometry:xd(h,a,l),properties:h.properties,type:h.type,patterns:{}},A=this.addFeature(M,M.geometry,T);A&&i.featureIndex.insert(h,M.geometry,x,b,this.index,this.instancesPerModel[A].instancedDataArray.length)}this.lookup=null}update(e,i,a,l){for(const u in this.instancesPerModel){const h=this.instancesPerModel[u];for(const g in e)h.idToFeaturesIndex.hasOwnProperty(g)&&this.evaluate(h.features[h.idToFeaturesIndex[g]],e[g],h,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let e=!1;for(const i in this.instancesPerModel){const a=this.instancesPerModel[i];for(const l of a.features){const u=this.layers[0],h=l.feature,g=this.canonical,x=u.paint.get("model-rotation").evaluate(h,{},g),b=u.paint.get("model-scale").evaluate(h,{},g),T=u.paint.get("model-translation").evaluate(h,{},g);ce.exactEquals(l.rotation,x)&&ce.exactEquals(l.scale,b)&&ce.exactEquals(l.translation,T)||(this.evaluate(l,l.featureStates,a,!0),e=!0)}}return e}isEmpty(){for(const e in this.instancesPerModel)if(this.instancesPerModel[e].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(const i in this.instancesPerModel){const a=this.instancesPerModel[i];a.instancedDataArray.length<0||a.instancedDataArray.length===0||(a.instancedDataBuffer?a.instancedDataBuffer.updateData(a.instancedDataArray):a.instancedDataBuffer=e.createVertexBuffer(a.instancedDataArray,JY.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const e in this.instancesPerModel){const i=this.instancesPerModel[e];i.instancedDataArray.length!==0&&i.instancedDataBuffer&&i.instancedDataBuffer.destroy()}}addFeature(e,i,a){const l=this.layers[0],u=l.layout.get("model-id").evaluate(a,{},this.canonical);if(!u)return ve(`modelId is not evaluated for layer ${l.id} and it is not going to get rendered.`),u;this.instancesPerModel[u]||(this.instancesPerModel[u]=new W6);const h=this.instancesPerModel[u],g=h.instancedDataArray,x=new q6(a,g.length);for(const b of i)for(const T of b){if(T.x<0||T.x>=Zt||T.y<0||T.y>=Zt)continue;const M=(this.lookupDim-1)/Zt,A=this.lookupDim*(T.y*M|0)+T.x*M|0;if(this.lookup){if(this.lookup[A]!==0)continue;this.lookup[A]=1}this.instanceCount++;const O=g.length;g.resize(O+1),h.instancesEvaluatedElevation.push(0),g.float32[16*O]=T.x,g.float32[16*O+1]=T.y}return x.instancedDataCount=h.instancedDataArray.length-x.instancedDataOffset,x.instancedDataCount>0&&(e.id&&(h.idToFeaturesIndex[e.id]=h.features.length),h.features.push(x),this.evaluate(x,{},h,!1)),u}evaluate(e,i,a,l){const u=this.layers[0],h=e.feature,g=this.canonical,x=e.rotation=u.paint.get("model-rotation").evaluate(h,i,g),b=e.scale=u.paint.get("model-scale").evaluate(h,i,g),T=e.translation=u.paint.get("model-translation").evaluate(h,i,g),M=u.paint.get("model-color").evaluate(h,i,g);M.a=u.paint.get("model-color-mix-intensity").evaluate(h,i,g);const A=[];this.maxVerticalOffset<T[2]&&(this.maxVerticalOffset=T[2]),this.maxScale=Math.max(Math.max(this.maxScale,b[0]),Math.max(b[1],b[2])),U6(A,x,b);const O=Math.round(100*M.a)+M.b/1.05;for(let B=0;B<e.instancedDataCount;++B){const V=e.instancedDataOffset+B,W=16*V,q=a.instancedDataArray.float32;let ne=0;l&&(ne=q[W+6]-a.instancesEvaluatedElevation[V]);const ae=0|q[W+1];q[W]=(0|q[W])+M.r/1.05,q[W+1]=ae+M.g/1.05,q[W+2]=O,q[W+3]=1/(g.z>10?this.tileToMeter:U1(g,ae)),q[W+4]=T[0],q[W+5]=T[1],q[W+6]=T[2]+ne,q[W+7]=A[0],q[W+8]=A[1],q[W+9]=A[2],q[W+10]=A[4],q[W+11]=A[5],q[W+12]=A[6],q[W+13]=A[8],q[W+14]=A[9],q[W+15]=A[10],a.instancesEvaluatedElevation[V]=T[2]}}}rn(K6,"ModelBucket",{omit:["layers"]}),rn(W6,"PerModelAttributes"),rn(q6,"ModelFeature");const oJ=new vi({visibility:new Ir(Lt.layout_model.visibility),"model-id":new gn(Lt.layout_model["model-id"])});var aJ={paint:new vi({"model-opacity":new Ir(Lt.paint_model["model-opacity"]),"model-rotation":new gn(Lt.paint_model["model-rotation"]),"model-scale":new gn(Lt.paint_model["model-scale"]),"model-translation":new gn(Lt.paint_model["model-translation"]),"model-color":new gn(Lt.paint_model["model-color"]),"model-color-mix-intensity":new gn(Lt.paint_model["model-color-mix-intensity"]),"model-type":new Ir(Lt.paint_model["model-type"]),"model-cast-shadows":new Ir(Lt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ir(Lt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ir(Lt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new gn(Lt.paint_model["model-emissive-strength"]),"model-roughness":new gn(Lt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new gn(Lt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ir(Lt.paint_model["model-cutoff-fade-range"])}),layout:oJ};const L3=new Float32Array(262144),Fg=new Uint8Array(262144);function Z6(r){let e=0;if(r.meshes)for(const i of r.meshes)e=Math.max(e,i.aabb.max[2]);if(r.children)for(const i of r.children)e=Math.max(e,Z6(i));return e}const X6=["","wall","door","roof","window","lamp","logo"];class Y6{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:e.id,geometry:[],properties:{height:Z6(e)}}}}class J6{constructor(e,i,a,l){this.nodes=e,this.id=i,this.modelTraits|=1,this.uploaded=!1,this.hasPattern=!1,a&&(this.modelTraits|=4),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=l,this.dirty=!0,this.needsUpload=!1}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;const i=this.getNodesInfo();for(const a of i){const l=a.node;this.uploaded?this.updatePbrBuffer(l):D3(l,e,!0)}for(const a of i)QS(a.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let i=!1;if(!e.meshes)return i;for(const a of e.meshes)a.pbrBuffer&&(a.pbrBuffer.updateData(a.featureArray),i=!0);return i}needsReEvaluation(e,i,a){const l=e.transform.projectionOptions,u=e.style.getBrightness(),h=this.brightness!==u;return!!(!this.uploaded||this.dirty||l.name!==this.projection.name||sx(a.paint.get("model-color").value,h)||sx(a.paint.get("model-color-mix-intensity").value,h)||sx(a.paint.get("model-roughness").value,h)||sx(a.paint.get("model-emissive-strength").value,h)||sx(a.paint.get("model-height-based-emissive-strength-multiplier").value,h))&&(this.projection=l,this.brightness=u,!0)}evaluateScale(e,i){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;const a=this.getNodesInfo(),l=this.id.canonical;for(const u of a){const h=u.feature;u.evaluatedScale=i.paint.get("model-scale").evaluate(h,{},l)}}evaluate(e){const i=this.getNodesInfo();for(const a of i){if(!a.node.meshes)continue;const l=a.feature,u=a.node.meshes&&a.node.meshes[0].featureData,h=a.evaluatedColor[2],g=a.evaluatedRMEA[2],x=this.id.canonical;if(a.hasTranslucentParts=!1,u){for(let b=0;b<X6.length;b++){const T=X6[b];T.length&&(l.properties.part=T);const M=e.paint.get("model-color").evaluate(l,{},x),A=e.paint.get("model-color-mix-intensity").evaluate(l,{},x);a.evaluatedColor[b]=[M.r,M.g,M.b,A],a.evaluatedRMEA[b][0]=e.paint.get("model-roughness").evaluate(l,{},x),a.evaluatedRMEA[b][2]=e.paint.get("model-emissive-strength").evaluate(l,{},x),a.evaluatedRMEA[b][3]=M.a,a.emissionHeightBasedParams[b]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(l,{},x),!a.hasTranslucentParts&&M.a<1&&(a.hasTranslucentParts=!0)}delete l.properties.part,lJ(a,h!==a.evaluatedColor[2]||g!==a.evaluatedRMEA[2])}a.evaluatedScale=e.paint.get("model-scale").evaluate(l,{},x),this.updatePbrBuffer(a.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,i,a,l){const u=e.findDEMTileFor(a);if(u&&(u.tileID.canonical!==this.terrainTile||i!==this.terrainExaggeration)){if(u.dem&&u.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=u.tileID.overscaledZ;const h=Av.create(e,a,u);if(!h)return;4&this.modelTraits&&this.updateDEM(e,h,a,l);for(const g of this.getNodesInfo()){const x=g.node;if(!x.footprint||!x.footprint.vertices||!x.footprint.vertices.length)continue;const b=x.footprint.vertices;let T=h.getElevationAt(b[0].x,b[0].y,!0,!0);for(let M=1;M<b.length;M++)T=Math.min(T,h.getElevationAt(b[M].x,b[M].y,!0,!0));x.elevation=T}}this.terrainTile=u.tileID.canonical,this.terrainExaggeration=i}}updateDEM(e,i,a,l){let u=i._dem._modifiedForSources[l];if(u===void 0&&(i._dem._modifiedForSources[l]=[],u=i._dem._modifiedForSources[l]),u.includes(a.canonical))return;const h=i._dem.dim;u.push(a.canonical);let g=!1;for(const x of this.getNodesInfo()){const b=x.node;if(!b.footprint||!b.footprint.grid)continue;const T=b.footprint.grid,M=i.tileCoordToPixel(T.min.x,T.min.y),A=i.tileCoordToPixel(T.max.x,T.max.y),O=Math.min(Math.min(h-A.y,M.x),Math.min(M.y,h-A.x));if(O<0)continue;const B=Qe(O,2,5);let V=Math.max(0,M.x-B),W=Math.max(0,M.y-B),q=Math.min(A.x+B,h-1),ne=Math.min(A.y+B,h-1);for(let ue=W;ue<=ne;++ue)for(let Ee=V;Ee<=q;++Ee)Fg[ue*h+Ee]=255;let ae=0,le=0;for(let ue=0;ue<T.cellsY;++ue)for(let Ee=0;Ee<T.cellsX;++Ee){if(!T.cells[ue*T.cellsX+Ee])continue;const Be=i.tileCoordToPixel(T.min.x+Ee/T.xScale,T.min.y+ue/T.yScale),je=i.tileCoordToPixel(T.min.x+(Ee+1)/T.xScale,T.min.y+(ue+1)/T.yScale);for(let Ge=Be.y;Ge<=Math.min(je.y+1,h-1);++Ge)for(let tt=Be.x;tt<=Math.min(je.x+1,h-1);++tt)Fg[Ge*h+tt]===255&&(Fg[Ge*h+tt]=0,ae+=i.getElevationAtPixel(tt,Ge),le++)}const ie=ae/le;V=Math.max(1,M.x-B),W=Math.max(1,M.y-B),q=Math.min(A.x+B,h-2),ne=Math.min(A.y+B,h-2),g=!0;for(let ue=W;ue<=ne;++ue)for(let Ee=V;Ee<=q;++Ee)Fg[ue*h+Ee]===0&&(L3[ue*h+Ee]=i._dem.set(Ee,ue,ie));for(let ue=1;ue<B;++ue){V=Math.max(1,M.x-ue),W=Math.max(1,M.y-ue),q=Math.min(A.x+ue,h-2),ne=Math.min(A.y+ue,h-2);for(let Ee=W;Ee<=ne;++Ee)for(let Be=V;Be<=q;++Be){const je=Ee*h+Be;if(Fg[je]===255){let Ge=0,tt=0,Ze=-1,nt=-1;for(let Xe=-1;Xe<=1;++Xe)for(let ut=-1;ut<=1;++ut){const bt=(Ee+Xe)*h+Be+ut;if(Fg[bt]>=ue)continue;const At=L3[bt],lt=Math.abs(At);lt>tt&&(Ge=At,tt=lt,Ze=ut,nt=Xe)}if(tt>.1){const Xe=1-(ue+.5*Math.abs(Ze*nt))/B;let ut=i._dem.get(Be,Ee)+Ge*Xe;const bt=i._dem.get(Be+Ze,Ee+nt),At=i._dem.get(Be-Ze,Ee-nt,!0);(ut-bt)*(ut-At)>0&&(ut=(bt+At)/2),L3[je]=i._dem.set(Be,Ee,ut),Fg[je]=ue}}}}}g&&(i._demTile.needsDEMTextureUpload=!0,i._dem._timestamp=Qr.now())}getNodesInfo(){if(!this.nodesInfo){this.nodesInfo=[];for(const e of this.nodes)this.nodesInfo.push(new Y6(e));this.freeNodes()}return this.nodesInfo}freeNodes(){if(this.nodes){for(const e of this.nodes)eC(e);this.nodes.splice(0,this.nodes.length)}}destroy(){this.freeNodes();const e=this.getNodesInfo();for(const i of e)QS(i.node),eC(i.node)}isEmpty(){return!this.nodes.length}updateReplacement(e,i){if(i.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=i.updateTime;const a=i.getReplacementRegionsForTile(e.toUnwrapped()),l=this.getNodesInfo();for(let u=0;u<this.nodesInfo.length;u++){const h=l[u].node;l[u].hiddenByReplacement=!!h.footprint&&!a.find(g=>g.footprint===h.footprint)}}getHeightAtTileCoord(e,i){const a=this.getNodesInfo(),l=[];for(let u=0;u<this.nodesInfo.length;u++){const h=a[u],g=h.node.meshes[0];if(e<g.aabb.min[0]||i<g.aabb.min[1]||e>g.aabb.max[0]||i>g.aabb.max[1])continue;const x=(e-g.aabb.min[0])/(g.aabb.max[0]-g.aabb.min[0])*Bg|0,b=Math.min(63,(i-g.aabb.min[1])/(g.aabb.max[1]-g.aabb.min[1])*Bg|0)*Bg+Math.min(63,x);if(!(g.heightmap[b]<0&&h.node.footprint))return h.hiddenByReplacement?void 0:{height:g.heightmap[b],maxHeight:h.feature.properties.height,hidden:!1,verticalScale:h.evaluatedScale[2]};if(h.node.footprint.grid.query(new oe(e,i),new oe(e,i),l),l.length>0)return{height:void 0,maxHeight:h.feature.properties.height,hidden:h.hiddenByReplacement,verticalScale:h.evaluatedScale[2]}}}}function sx(r,e){return!r.isLightConstant&&e}function sJ(r,e,i,a,l,u,h,g){let x=(61440&e|(61440&e)>>4)>>8,b=(3840&e|(3840&e)>>4)>>4,T=240&e|(240&e)>>4;i[3]>0&&(x=Mn(x,255*i[0],i[3]),b=Mn(b,255*i[1],i[3]),T=Mn(T,255*i[2],i[3]));const M=x<<8|b,A=T<<8|Math.floor(255*a[3]),O=function(ue){const Ee=Qe(ue,0,2);return Math.min(Math.round(.5*Ee*255),255)}(a[2])<<8|15*a[0]<<4|15*a[1],B=Qe(l[0],0,1),V=Qe(l[1],0,1),W=Qe(l[2],0,1),q=Qe(l[3],0,1);let ne,ae,le,ie;if(B!==V&&h!==u&&V!==B){const ue=h-u;ae=1/(ue*(V-B)),le=-(u+ue*B)/(ue*(V-B));const Ee=Qe(l[4],-1,1);ie=Math.pow(10,Ee),ne=255*W<<8|255*q}else ne=65535,ae=0,le=1,ie=1;if(r.emplaceBack(M,A,O,ne,ae,le,ie),g){const ue=g.length;g.clear();for(let Ee=0;Ee<ue;Ee++)g.emplaceBack(M,A,O,ne,ae,le,ie)}}function lJ(r,e){const i=r.node;let a=0;for(const l of i.meshes){if(i.lights&&i.lightMeshIndex===a||!l.featureData)continue;l.featureArray=new ev,l.featureArray.reserve(l.featureData.length);let u=e;for(const h of l.featureData){let g;const x=65535&h,b=(15&x)<8?15&x:0,T=h>>16&65535,M=r.evaluatedRMEA[b],A=r.evaluatedColor[b],O=r.emissionHeightBasedParams[b];if(u&&b===2&&i.lights&&(g=new ev,g.resize(10*i.lights.length)),sJ(l.featureArray,T,A,M,O,l.aabb.min[2],l.aabb.max[2],g),g&&u){u=!1;const B=i.meshes[i.lightMeshIndex];B.featureArray=g,B.featureArray._trim()}}l.featureArray._trim(),a++}}rn(J6,"Tiled3dModelBucket",{omit:["layers"]}),rn(Y6,"Tiled3dModelFeature");class cJ{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(e){const i=t2(new oe(0,0),new oe(Zt,Zt),e),a=[];for(const l of this._activeRegions){if(l.hiddenByOverlap||!e2(i,l))continue;const u=uJ(l.min,l.max,e);a.push({min:u.min,max:u.max,sourceId:this._sourceIds[l.priority],footprint:l.footprint,footprintTileId:l.tileId})}return a}setSources(e){this._setSources(e.map(i=>({getSourceId:()=>i.cache.id,getFootprints:()=>{const a=[];for(const l of i.cache.getVisibleCoordinates()){const u=i.cache.getTile(l).buckets[i.layer];if(u)for(const h of u.getNodesInfo()){const g=h.node;g.footprint&&a.push({footprint:g.footprint,id:l.toUnwrapped()})}}return a}})))}_addSource(e){const i=e.getFootprints();if(i.length!==0){for(const a of i){if(!a.footprint)continue;const l=t2(a.footprint.min,a.footprint.max,a.id);this._activeRegions.push({min:l.min,max:l.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:a.id,footprint:a.footprint})}this._sourceIds.push(e.getSourceId())}}_computeReplacement(){this._activeRegions.sort((i,a)=>i.priority-a.priority||tC(i.min,a.min)||tC(i.max,a.max));let e=this._activeRegions.length!==this._prevRegions.length;if(!e){let i=0,a=0;for(;!e&&i!==this._activeRegions.length;){const l=this._activeRegions[i],u=this._prevRegions[a];e=l.priority!==u.priority||!Q6(l,u),++i,++a}}if(e){++this._updateTime;const i=a=>{const l=this._activeRegions;if(a>=l.length)return a;const u=l[a].priority;for(;a<l.length&&l[a].priority===u;)++a;return a};if(this._sourceIds.length>1){let a=0,l=i(a);for(;a!==l;){let u=a;const h=a;for(;u!==l;){const g=this._activeRegions[u];g.hiddenByOverlap=!1;for(let x=0;x<h;x++){const b=this._activeRegions[x];if(!b.hiddenByOverlap&&e2(g,b)&&(g.hiddenByOverlap=n2(g.footprint,g.tileId,b.footprint,b.tileId),g.hiddenByOverlap))break}++u}a=l,l=i(a)}}}}_setSources(e){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let i=e.length-1;i>=0;i--)this._addSource(e[i]);this._computeReplacement()}}function tC(r,e){return r.x-e.x||r.y-e.y}function Q6(r,e){return tC(r.min,e.min)===0&&tC(r.max,e.max)===0}function e2(r,e){return!(r.min.x>e.max.x||r.max.x<e.min.x||r.min.y>e.max.y||r.max.y<e.min.y)}function t2(r,e,i){const a=1/Zt,l=1/(1<<i.canonical.z),u=(e.x*a+i.canonical.x)*l+i.wrap,h=(e.y*a+i.canonical.y)*l;return{min:new oe((r.x*a+i.canonical.x)*l+i.wrap,(r.y*a+i.canonical.y)*l),max:new oe(u,h)}}function uJ(r,e,i){const a=1<<i.canonical.z,l=((e.x-i.wrap)*a-i.canonical.x)*Zt,u=(e.y*a-i.canonical.y)*Zt;return{min:new oe(((r.x-i.wrap)*a-i.canonical.x)*Zt,(r.y*a-i.canonical.y)*Zt),max:new oe(l,u)}}function r2(r,e,i,a,l,u,h){const g=r.indices,x=r.vertices,b=[];for(let T=a;T<a+l;T+=3){const M=e[i[T+0]+u],A=e[i[T+1]+u],O=e[i[T+2]+u],B=Math.min(M.x,A.x,O.x),V=Math.max(M.x,A.x,O.x),W=Math.min(M.y,A.y,O.y),q=Math.max(M.y,A.y,O.y);b.length=0,r.grid.query(new oe(B,W),new oe(V,q),b);for(let ne=0;ne<b.length;ne++){const ae=b[ne];if(e3(x[g[3*ae+0]],x[g[3*ae+1]],x[g[3*ae+2]],M,A,O,h))return!0}}return!1}function n2(r,e,i,a){if(!r||!i)return!1;let l=r.vertices;if(!e.canonical.equals(a.canonical)||e.wrap!==a.wrap){if(i.vertices.length<r.vertices.length)return n2(i,a,r,e);const u=e.canonical,h=a.canonical,g=Math.pow(2,h.z-u.z);l=r.vertices.map(x=>new oe(x.x*u.x*Zt*g-h.x*Zt,x.y*u.y*Zt*g-h.y*Zt))}return r2(i,l,r.indices,0,r.indices.length,0,0)}const hJ=ES.types,dJ=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],fJ=["fill-extrusion-flood-light-ground-radius"],pJ=Math.pow(2,13),mJ=Math.pow(2,15)-1,i2=new oe(0,1),Cd=2147483648;function lx(r,e,i,a,l,u,h,g){r.emplaceBack((e<<1)+h,(i<<1)+u,(Math.floor(a*pJ)<<1)+l,Math.round(g))}function rC(r,e,i,a,l,u){r.emplaceBack(e.x,e.y,(i.x<<1)+a,(i.y<<1)+l,u)}function cx(r,e,i){r.emplaceBack(e.x,e.y,e.z,i[0]*16384,i[1]*16384,i[2]*16384)}class o2{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class a2{constructor(){this.centroidXY=new oe(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.min=new oe(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new oe(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new oe(this.max.x-this.min.x,this.max.y-this.min.y)}}class s2{constructor(){this.acc=new oe(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,i){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=i.x,e.min.y=e.max.y=i.y)}appendEdge(e,i,a){this.accCount++,this.acc._add(i);let l=!!this.borders;i.x<e.min.x?(e.min.x=i.x,l=!0):i.x>e.max.x&&(e.max.x=i.x,l=!0),i.y<e.min.y?(e.min.y=i.y,l=!0):i.y>e.max.y&&(e.max.y=i.y,l=!0),((i.x===0||i.x===Zt)&&i.x===a.x)!=((i.y===0||i.y===Zt)&&i.y===a.y)&&this.processBorderOverlap(i,a),l&&this.checkBorderIntersection(i,a)}checkBorderIntersection(e,i){i.x<0!=e.x<0&&this.addBorderIntersection(0,Mn(i.y,e.y,(0-i.x)/(e.x-i.x))),i.x>Zt!=e.x>Zt&&this.addBorderIntersection(1,Mn(i.y,e.y,(Zt-i.x)/(e.x-i.x))),i.y<0!=e.y<0&&this.addBorderIntersection(2,Mn(i.x,e.x,(0-i.y)/(e.y-i.y))),i.y>Zt!=e.y>Zt&&this.addBorderIntersection(3,Mn(i.x,e.x,(Zt-i.y)/(e.y-i.y)))}addBorderIntersection(e,i){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const a=this.borders[e];i<a[0]&&(a[0]=i),i>a[1]&&(a[1]=i)}processBorderOverlap(e,i){if(e.x===i.x){if(e.y===i.y)return;const a=e.x===0?0:1;this.addBorderIntersection(a,i.y),this.addBorderIntersection(a,e.y)}else{const a=e.y===0?2:3;this.addBorderIntersection(a,i.x),this.addBorderIntersection(a,e.x)}}centroid(){return this.accCount===0?new oe(0,0):new oe(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,i)=>e+ +(i[0]!==Number.MAX_VALUE),0):0}}function l2(r,e){const i=r.add(e)._unit(),a=Qe(r.x*i.x+r.y*i.y,-1,1);var l,u,h;return l=Math.acos(a),Math.min(4,Math.max(-4,Math.tan(l)))/4*mJ*((u=r).x*(h=e).y-u.y*h.x<0?-1:1)}const gJ=[r=>r.x<0,r=>r.x>Zt,r=>r.y<0,r=>r.y>Zt];function yJ(r,e,i,a){const l=[4];if(a===0)return l;i._mult(a);const u=r.sub(i),h=e.sub(i),g=[r,e,u,h];for(let x=0;x<4;x++)for(const b of g)if(gJ[x](b)){l.push(x);break}return l}class c2{constructor(e){this.vertexArray=new df,this.indexArray=new Ca,this.programConfigurations=new yd(e.layers,e.zoom,i=>fJ.includes(i)),this._segments=new qi,this.hiddenByLandmarkVertexArray=new J0,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new qi}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(e,i,a,l=!1){const u=e.length;if(u>2){let h=Math.max(0,this._segments.get().length-1);const g=this._segments._prepareSegment(4*u,this.vertexArray.length,2*this._segmentToGroundQuads[h].length);let x;h!==this._segments.get().length-1&&(h++,this._segmentToGroundQuads[h]=[],this._segmentToRegionTriCounts[h]=[0,0,0,0,0]);{const b=e[0],T=e[1];x=l2(b.sub(e[u-1])._perp()._unit(),T.sub(b)._perp()._unit())}for(let b=0;b<u;b++){const T=b===u-1?0:b+1,M=e[b],A=e[T],O=e[T===u-1?0:T+1],B=A.sub(M)._perp()._unit(),V=l2(B,O.sub(A)._perp()._unit()),W=x,q=V;if($3(M,A,i)||l&&d2(M,i)&&d2(A,i)){x=V;continue}const ne=g.vertexLength;rC(this.vertexArray,M,A,1,1,W),rC(this.vertexArray,M,A,1,0,W),rC(this.vertexArray,M,A,0,1,q),rC(this.vertexArray,M,A,0,0,q),g.vertexLength+=4;const ae=yJ(M,A,B,a);for(const le of ae)this._segmentToGroundQuads[h].push({id:ne,region:le}),this._segmentToRegionTriCounts[h][le]+=2,g.primitiveLength+=2;x=V}}}prepareBorderSegments(){if(!this.hasData())return;const e=this._segments.get(),i=e.length;for(let a=0;a<i;a++)this._segmentToGroundQuads[a].sort((l,u)=>l.region-u.region);for(let a=0;a<i;a++){const l=this._segmentToGroundQuads[a],u=e[a],h=this._segmentToRegionTriCounts[a];h.reduce((x,b)=>x+b,0);let g=0;for(let x=0;x<=4;x++){const b=h[x];if(b!==0){let T=this.regionSegments[x];T||(T=this.regionSegments[x]=new qi);const M={vertexOffset:u.vertexOffset,primitiveOffset:u.primitiveOffset+g,vertexLength:u.vertexLength,primitiveLength:b};T.get().push(M)}g+=b}for(let x=0;x<l.length;x++){const b=l[x].id;this.indexArray.emplaceBack(b,b+1,b+3),this.indexArray.emplaceBack(b,b+3,b+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,i,a,l,u,h){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,i,a,l,u,h)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,GZ.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,i,a,l,u,h){this.hasData()&&this.programConfigurations.updatePaintArrays(e,i,a,l,u,h)}updateHiddenByLandmark(e){if(!this.hasData())return;const i=e.groundVertexCount+e.groundVertexArrayOffset;if(e.groundVertexCount===0)return;const a=e.flags&Cd?1:0;for(let l=e.groundVertexArrayOffset;l<i;++l)this.hiddenByLandmarkVertexArray.emplace(l,a);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,WZ.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){const i=this.regionSegments[e];i&&i.destroy()}}}}class ux{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(i=>i.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ca,this.footprintVertices=new gl,this.footprintSegments=[],this.layoutVertexArray=new hd,this.centroidVertexArray=new Uw,this.indexArray=new Ca,this.programConfigurations=new yd(e.layers,e.zoom,i=>dJ.includes(i)),this.segments=new qi,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.groundEffect=new c2(e),this.maxHeight=0,this.partLookup={}}populate(e,i,a,l){this.features=[],this.hasPattern=s3("fill-extrusion",this.layers,i),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=U1(a),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:u,id:h,index:g,sourceLayerIndex:x}of e){const b=this.layers[0]._featureFilter.needGeometry,T=qp(u,b);if(!this.layers[0]._featureFilter.filter(new uo(this.zoom),T,a))continue;const M={id:h,sourceLayerIndex:x,index:g,geometry:b?T.geometry:xd(u,a,l),properties:u.properties,type:u.type,patterns:{}},A=this.layoutVertexArray.length;this.hasPattern?this.features.push(l3("fill-extrusion",this.layers,M,this.zoom,i)):this.addFeature(M,M.geometry,g,a,{},i.availableImages,l,i.brightness),i.featureIndex.insert(u,M.geometry,g,x,this.index,A)}this.sortBorders(),this.groundEffect.prepareBorderSegments()}addFeatures(e,i,a,l,u,h){for(const g of this.features){const{geometry:x}=g;this.addFeature(g,x,g.index,i,a,l,u,h)}this.sortBorders()}update(e,i,a,l,u){const h=Object.keys(e).length!==0;if(h&&!this.stateDependentLayers.length)return;const g=h?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(e,i,g,a,l,u),this.groundEffect.update(e,i,g,a,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ZZ),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,KZ.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,qZ.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,i,a,l,u,h,g,x){const b=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,T=[new oe(0,0),new oe(Zt,Zt)],M=g.projection,A=M.name==="globe",O=hJ[e.type]==="Polygon",B=new s2;B.centroidDataIndex=this.centroidData.length;const V=new a2,W=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},l)<=0,q=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},l);V.height=q,V.vertexArrayOffset=this.layoutVertexArray.length,V.groundVertexArrayOffset=this.groundEffect.vertexArray.length,A&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Rp);const ne=a3(i,500);for(let Be=ne.length-1;Be>=0;Be--){const je=ne[Be];(je.length===0||(ae=je[0]).every(Ge=>Ge.x<=0)||ae.every(Ge=>Ge.x>=Zt)||ae.every(Ge=>Ge.y<=0)||ae.every(Ge=>Ge.y>=Zt))&&ne.splice(Be,1)}var ae;let le;if(A)le=g2(ne,T,l);else{le=[];for(const Be of ne)le.push({polygon:Be,bounds:T})}const ie=O?this.edgeRadius:0,ue=ie>0&&this.zoom<17,Ee=(Be,je)=>{if(Be.length===0)return!1;const Ge=Be[Be.length-1];return je.x===Ge.x&&je.y===Ge.y};for(const{polygon:Be,bounds:je}of le){let Ge=0,tt=0;for(const Xe of Be)O&&!Xe[0].equals(Xe[Xe.length-1])&&Xe.push(Xe[0]),tt+=O?Xe.length-1:Xe.length;const Ze=this.segments.prepareSegment((O?5:4)*tt,this.layoutVertexArray,this.indexArray);V.footprintSegIdx<0&&(V.footprintSegIdx=this.footprintSegments.length);const nt=new o2;if(nt.vertexOffset=this.footprintVertices.length,nt.indexOffset=3*this.footprintIndices.length,nt.ringIndices=[],O){const Xe=[],ut=[];Ge=Ze.vertexLength;for(let At=0;At<Be.length;At++){const lt=Be[At];lt.length&&At!==0&&ut.push(Xe.length/2);const ft=[];let Ft,Jt;Ft=lt[1].sub(lt[0])._perp()._unit(),nt.ringIndices.push(lt.length-1);for(let tr=1;tr<lt.length;tr++){const lr=lt[tr],pr=lt[tr===lt.length-1?1:tr+1],er=lr.clone();if(ie){Jt=pr.sub(lr)._perp()._unit();const or=Ft.add(Jt)._unit(),kr=ie*Math.min(4,1/(Ft.x*or.x+Ft.y*or.y));er.x+=kr*or.x,er.y+=kr*or.y,er.x=Math.round(er.x),er.y=Math.round(er.y),Ft=Jt}!W||ie!==0&&!ue||Ee(ft,er)||ft.push(er),lx(this.layoutVertexArray,er.x,er.y,0,0,1,1,0),Ze.vertexLength++,this.footprintVertices.emplaceBack(lr.x,lr.y),Xe.push(lr.x,lr.y),A&&cx(this.layoutVertexExtArray,M.projectTilePoint(er.x,er.y,l),M.upVector(l,er.x,er.y))}W&&(ie===0||ue)&&(ft.length!==0&&Ee(ft,ft[0])&&ft.pop(),this.groundEffect.addData(ft,je,b))}const bt=wS(Xe,ut);for(let At=0;At<bt.length;At+=3)this.footprintIndices.emplaceBack(nt.vertexOffset+bt[At+0],nt.vertexOffset+bt[At+1],nt.vertexOffset+bt[At+2]),this.indexArray.emplaceBack(Ge+bt[At],Ge+bt[At+2],Ge+bt[At+1]),Ze.primitiveLength++;nt.indexCount+=bt.length,nt.vertexCount+=this.footprintVertices.length-nt.vertexOffset}for(let Xe=0;Xe<Be.length;Xe++){const ut=Be[Xe];B.startRing(V,ut[0]);let bt=ut.length>4&&f2(ut[ut.length-2],ut[0],ut[1]),At=ie?vJ(ut[ut.length-2],ut[0],ut[1],ie):0;const lt=[];let ft,Ft,Jt;Ft=ut[1].sub(ut[0])._perp()._unit();let tr=!0;for(let lr=1,pr=0;lr<ut.length;lr++){let er=ut[lr-1],or=ut[lr];const kr=ut[lr===ut.length-1?1:lr+1];if(B.appendEdge(V,or,er),$3(or,er,je)){ie&&(Ft=kr.sub(or)._perp()._unit(),tr=!tr);continue}const Hr=or.sub(er)._perp(),Ur=Hr.x/(Math.abs(Hr.x)+Math.abs(Hr.y)),qr=Hr.y>0?1:0,yn=er.dist(or);if(pr+yn>32768&&(pr=0),ie){Jt=kr.sub(or)._perp()._unit();let Yn=h2(er,or,kr,u2(Ft,Jt),ie);isNaN(Yn)&&(Yn=0);const Un=or.sub(er)._unit();er=er.add(Un.mult(At))._round(),or=or.add(Un.mult(-Yn))._round(),At=Yn,Ft=Jt,W&&this.zoom>=17&&(Ee(lt,er)||lt.push(er),Ee(lt,or)||lt.push(or))}const Dn=Ze.vertexLength,ui=ut.length>4&&f2(er,or,kr);let Mi=p2(pr,bt,tr);if(lx(this.layoutVertexArray,er.x,er.y,Ur,qr,0,0,Mi),lx(this.layoutVertexArray,er.x,er.y,Ur,qr,0,1,Mi),pr+=yn,Mi=p2(pr,ui,!tr),bt=ui,lx(this.layoutVertexArray,or.x,or.y,Ur,qr,0,0,Mi),lx(this.layoutVertexArray,or.x,or.y,Ur,qr,0,1,Mi),Ze.vertexLength+=4,this.indexArray.emplaceBack(Dn+0,Dn+1,Dn+2),this.indexArray.emplaceBack(Dn+1,Dn+3,Dn+2),Ze.primitiveLength+=2,ie){const Yn=Ge+(lr===1?ut.length-2:lr-2),Un=lr===1?Ge:Yn+1;if(this.indexArray.emplaceBack(Dn+1,Yn,Dn+3),this.indexArray.emplaceBack(Yn,Un,Dn+3),Ze.primitiveLength+=2,ft===void 0&&(ft=Dn),!$3(kr,ut[lr],je)){const On=lr===ut.length-1?ft:Ze.vertexLength;this.indexArray.emplaceBack(Dn+2,Dn+3,On),this.indexArray.emplaceBack(Dn+3,On+1,On),this.indexArray.emplaceBack(Dn+3,Un,On+1),Ze.primitiveLength+=3}tr=!tr}if(A){const Yn=this.layoutVertexExtArray,Un=M.projectTilePoint(er.x,er.y,l),On=M.projectTilePoint(or.x,or.y,l),Tn=M.upVector(l,er.x,er.y),_i=M.upVector(l,or.x,or.y);cx(Yn,Un,Tn),cx(Yn,Un,Tn),cx(Yn,On,_i),cx(Yn,On,_i)}}O&&(Ge+=ut.length-1),W&&ie&&this.zoom>=17&&(lt.length!==0&&Ee(lt,lt[0])&&lt.pop(),this.groundEffect.addData(lt,je,b,ie>0))}this.footprintSegments.push(nt),++V.footprintSegLen}if(V.vertexCount=this.layoutVertexArray.length-V.vertexArrayOffset,V.groundVertexCount=this.groundEffect.vertexArray.length-V.groundVertexArrayOffset,V.vertexCount!==0){if(V.centroidXY=B.borders?i2:this.encodeCentroid(B,V),this.centroidData.push(V),B.borders){this.featuresOnBorder.push(B);const Be=this.featuresOnBorder.length-1;for(let je=0;je<B.borders.length;je++)B.borders[je][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[je].push(Be)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,u,h,l,x),this.groundEffect.addPaintPropertiesData(e,a,u,h,l,x),this.maxHeight=Math.max(this.maxHeight,q)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((i,a)=>this.featuresOnBorder[i].borders[e][0]-this.featuresOnBorder[a].borders[e][0])}encodeCentroid(e,i){const a=e.centroid(),l=i.span(),u=Math.min(7,Math.round(l.x*this.tileToMeter/10)),h=Math.min(7,Math.round(l.y*this.tileToMeter/10));return new oe(Qe(a.x,1,Zt-1)<<3|u,Qe(a.y,1,Zt-1)<<3|h)}showCentroid(e){const i=this.centroidData[e.centroidDataIndex];i.flags&=Cd,i.centroidXY.x=0,i.centroidXY.y=0,this.writeCentroidToBuffer(i)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);const i=e.vertexArrayOffset,a=e.vertexCount+e.vertexArrayOffset,l=e.flags&Cd?i2:e.centroidXY,u=this.centroidVertexArray.geta_centroid_pos0(i);if(this.centroidVertexArray.geta_centroid_pos1(i)!==l.y||u!==l.x){for(let h=i;h<a;++h)this.centroidVertexArray.emplace(h,l.x,l.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const e of this.centroidData)this.writeCentroidToBuffer(e)}updateReplacement(e,i){if(i.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=i.updateTime;const a=i.getReplacementRegionsForTile(e.toUnwrapped());if(function(u,h){if(u.length!==h.length)return!1;for(let g=0;g<u.length;g++)if(u[g].sourceId!==h[g].sourceId||!Q6(u[g],h[g]))return!1;return!0}(this.activeReplacements,a))return;if(this.activeReplacements=a,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const u of this.centroidData)u.flags&=2147483647;const l=[];for(const u of this.activeReplacements){const h=Math.pow(2,u.footprintTileId.canonical.z-e.canonical.z);for(const g of this.centroidData)if(!(g.flags&Cd||u.min.x>g.max.x||g.min.x>u.max.x||u.min.y>g.max.y||g.min.y>u.max.y))for(let x=0;x<g.footprintSegLen;x++){const b=this.footprintSegments[g.footprintSegIdx+x];if(l.length=0,_J(this.footprintVertices,b.vertexOffset,b.vertexCount,u.footprintTileId.canonical,e.canonical,l),r2(u.footprint,l,this.footprintIndices.uint16,b.indexOffset,b.indexCount,-b.vertexOffset,-h)){g.flags|=Cd;break}}}for(const u of this.centroidData)this.writeCentroidToBuffer(u);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,i,a){let l=!1;for(let u=0;u<a.footprintSegLen;u++){const h=this.footprintSegments[a.footprintSegIdx+u];let g=0;for(const x of h.ringIndices){for(let b=g,T=x+g-1;b<x+g;T=b++){const M=this.footprintVertices.int16[2*(b+h.vertexOffset)+0],A=this.footprintVertices.int16[2*(b+h.vertexOffset)+1],O=this.footprintVertices.int16[2*(T+h.vertexOffset)+1];A>i!=O>i&&e<(this.footprintVertices.int16[2*(T+h.vertexOffset)+0]-M)*(i-A)/(O-A)+M&&(l=!l)}g=x}}return l}getHeightAtTileCoord(e,i){let a=Number.NEGATIVE_INFINITY,l=!0;const u=4*(e+Zt)*Zt+(i+Zt);if(this.partLookup.hasOwnProperty(u)){const h=this.partLookup[u];return h?{height:h.height,hidden:!!(h.flags&Cd)}:void 0}for(const h of this.centroidData)e>h.max.x||h.min.x>e||i>h.max.y||h.min.y>i||this.footprintContainsPoint(e,i,h)&&h&&h.height>a&&(a=h.height,this.partLookup[u]=h,l=!!(h.flags&Cd));if(a!==Number.NEGATIVE_INFINITY)return{height:a,hidden:l};this.partLookup[u]=void 0}}function u2(r,e){const i=r.add(e)._unit();return r.x*i.x+r.y*i.y}function vJ(r,e,i,a){const l=e.sub(r)._perp()._unit(),u=i.sub(e)._perp()._unit();return h2(r,e,i,u2(l,u),a)}function h2(r,e,i,a,l){const u=Math.sqrt(1-a*a);return Math.min(r.dist(e)/3,e.dist(i)/3,l*u/a)}function $3(r,e,i){return r.x<i[0].x&&e.x<i[0].x||r.x>i[1].x&&e.x>i[1].x||r.y<i[0].y&&e.y<i[0].y||r.y>i[1].y&&e.y>i[1].y}function d2(r,e){return r.x<e[0].x||r.x>e[1].x||r.y<e[0].y||r.y>e[1].y}function f2(r,e,i){if(r.x<0||r.x>=Zt||e.x<0||e.x>=Zt||i.x<0||i.x>=Zt)return!1;const a=i.sub(e),l=a.perp(),u=r.sub(e);return(a.x*u.x+a.y*u.y)/Math.sqrt((a.x*a.x+a.y*a.y)*(u.x*u.x+u.y*u.y))>-.866&&l.x*u.x+l.y*u.y<0}function p2(r,e,i){const a=e?2|r:-3&r;return i?1|a:-2&a}function m2(){const r=Math.PI/32,e=Math.tan(r),i=Hp;return i*Math.sqrt(1+2*e*e)-i}function g2(r,e,i){const a=1<<i.z,l=va(i.x/a),u=va((i.x+1)/a),h=Ro(i.y/a),g=Ro((i.y+1)/a);return function(x,b,T,M,A=0,O){const B=[];if(!x.length||!T||!M)return B;const V=(ue,Ee)=>{for(const Be of ue)B.push({polygon:Be,bounds:Ee})},W=Math.ceil(Math.log2(T)),q=Math.ceil(Math.log2(M)),ne=W-q,ae=[];for(let ue=0;ue<Math.abs(ne);ue++)ae.push(ne>0?0:1);for(let ue=0;ue<Math.min(W,q);ue++)ae.push(0),ae.push(1);let le=x;if(le=TS(le,b[0].y-A,b[1].y+A,1),le=TS(le,b[0].x-A,b[1].x+A,0),!le.length)return B;const ie=[];for(ae.length?ie.push({polygons:le,bounds:b,depth:0}):V(le,b);ie.length;){const ue=ie.pop(),Ee=ue.depth,Be=ae[Ee],je=ue.bounds[0],Ge=ue.bounds[1],tt=Be===0?je.x:je.y,Ze=Be===0?Ge.x:Ge.y,nt=O?O(Be,tt,Ze):.5*(tt+Ze),Xe=TS(ue.polygons,tt-A,nt+A,Be),ut=TS(ue.polygons,nt-A,Ze+A,Be);if(Xe.length){const bt=[je,new oe(Be===0?nt:Ge.x,Be===1?nt:Ge.y)];ae.length>Ee+1?ie.push({polygons:Xe,bounds:bt,depth:Ee+1}):V(Xe,bt)}if(ut.length){const bt=[new oe(Be===0?nt:je.x,Be===1?nt:je.y),Ge];ae.length>Ee+1?ie.push({polygons:ut,bounds:bt,depth:Ee+1}):V(ut,bt)}}return B}(r,e,Math.ceil((u-l)/11.25),Math.ceil((h-g)/11.25),1,(x,b,T)=>{if(x===0)return .5*(b+T);{const M=Ro((i.y+b/Zt)/a);return(Eo(.5*(Ro((i.y+T/Zt)/a)+M))*a-i.y)*Zt}})}function _J(r,e,i,a,l,u){const h=Math.pow(2,a.z-l.z);for(let g=0;g<i;g++){let x=r.int16[2*(g+e)+0],b=r.int16[2*(g+e)+1];x=(x+l.x*Zt)*h-a.x*Zt,b=(b+l.y*Zt)*h-a.y*Zt,u.push(new oe(x,b))}}rn(ux,"FillExtrusionBucket",{omit:["layers","features"]}),rn(a2,"PartData"),rn(o2,"FootprintSegment"),rn(s2,"BorderCentroidData"),rn(c2,"GroundEffect");const xJ=new vi({visibility:new Ir(Lt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ir(Lt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var bJ={paint:new vi({"fill-extrusion-opacity":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gn(Lt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new gn(Lt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gn(Lt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gn(Lt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new gn(Lt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new gn(Lt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ir(Lt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"])}),layout:xJ};class Fv extends oe{constructor(e,i,a){super(e,i),this.z=a}}function hx(r,e){return r.x*e.x+r.y*e.y}function y2(r,e){if(r.length===1){let i=0;const a=e[i++];let l;for(;!l||a.equals(l);)if(l=e[i++],!l)return 1/0;for(;i<e.length;i++){const u=e[i],h=r[0],g=l.sub(a),x=u.sub(a),b=h.sub(a),T=hx(g,g),M=hx(g,x),A=hx(x,x),O=hx(b,g),B=hx(b,x),V=T*A-M*M,W=(A*O-M*B)/V,q=(T*B-M*O)/V,ne=a.z*(1-W-q)+l.z*W+u.z*q;if(isFinite(ne))return ne}return 1/0}{let i=1/0;for(const a of e)i=Math.min(i,a.z);return i}}function v2(r,e,i,a,l,u,h,g){const x=h*l.getElevationAt(r,e,!0,!0),b=u[0]!==0,T=b?u[1]===0?h*(u[0]/7-450):h*function(M,A,O){const B=Math.floor(A[0]/8),V=Math.floor(A[1]/8),W=10*(A[0]-8*B),q=10*(A[1]-8*V),ne=M.getElevationAt(B,V,!0,!0),ae=M.getMeterToDEM(O),le=Math.floor(.5*(W*ae-1)),ie=Math.floor(.5*(q*ae-1)),ue=M.tileCoordToPixel(B,V),Ee=2*le+1,Be=2*ie+1,je=function(ut,bt,At,lt,ft){return[ut.getElevationAtPixel(bt,At,!0),ut.getElevationAtPixel(bt+ft,At,!0),ut.getElevationAtPixel(bt,At+ft,!0),ut.getElevationAtPixel(bt+lt,At+ft,!0)]}(M,ue.x-le,ue.y-ie,Ee,Be),Ge=Math.abs(je[0]-je[1]),tt=Math.abs(je[2]-je[3]),Ze=Math.abs(je[0]-je[2])+Math.abs(je[1]-je[3]),nt=Math.min(.25,.5*ae*(Ge+tt)/Ee),Xe=Math.min(.25,.5*ae*Ze/Be);return ne+Math.max(nt*W,Xe*q)}(l,u,g):x;return{base:x+(i===0)?-1:i,top:b?Math.max(T+a,x+i+2):x+a}}const wJ=new vi({"line-cap":new gn(Lt.layout_line["line-cap"]),"line-join":new gn(Lt.layout_line["line-join"]),"line-miter-limit":new Ir(Lt.layout_line["line-miter-limit"]),"line-round-limit":new Ir(Lt.layout_line["line-round-limit"]),"line-sort-key":new gn(Lt.layout_line["line-sort-key"]),visibility:new Ir(Lt.layout_line.visibility)});var _2={paint:new vi({"line-opacity":new gn(Lt.paint_line["line-opacity"]),"line-color":new gn(Lt.paint_line["line-color"]),"line-translate":new Ir(Lt.paint_line["line-translate"]),"line-translate-anchor":new Ir(Lt.paint_line["line-translate-anchor"]),"line-width":new gn(Lt.paint_line["line-width"]),"line-gap-width":new gn(Lt.paint_line["line-gap-width"]),"line-offset":new gn(Lt.paint_line["line-offset"]),"line-blur":new gn(Lt.paint_line["line-blur"]),"line-dasharray":new gn(Lt.paint_line["line-dasharray"]),"line-pattern":new gn(Lt.paint_line["line-pattern"]),"line-gradient":new gg(Lt.paint_line["line-gradient"]),"line-trim-offset":new Ir(Lt.paint_line["line-trim-offset"]),"line-emissive-strength":new Ir(Lt.paint_line["line-emissive-strength"]),"line-border-width":new gn(Lt.paint_line["line-border-width"]),"line-border-color":new gn(Lt.paint_line["line-border-color"])}),layout:wJ};const SJ=(r,e,i,a,l,u,h)=>{const g=r.transform,x=g.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:b2(r,e,i,a),u_pixels_to_tile_units:x,u_device_pixel_ratio:u,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:l,u_texsize:S2(i)?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:x2(e,r.transform),u_alpha_discard_threshold:0,u_trim_offset:h,u_emissive_strength:i.paint.get("line-emissive-strength")}},CJ=(r,e,i,a,l)=>{const u=r.transform;return{u_matrix:b2(r,e,i,a),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:u.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:l,u_image:0,u_tile_units_to_pixels:x2(e,u),u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function x2(r,e){return 1/$g(r,1,e.tileZoom)}function b2(r,e,i,a){return r.translatePosMatrix(a||e.tileID.projMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const w2=r=>{const e=[];S2(r)&&e.push("RENDER_LINE_DASH"),r.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const i=r.paint.get("line-trim-offset");return i[0]===0&&i[1]===0||e.push("RENDER_LINE_TRIM_OFFSET"),r.paint.get("line-border-width").constantOr(1)!==0&&e.push("RENDER_LINE_BORDER"),e};function S2(r){const e=r.paint.get("line-dasharray").value;return e.value||e.kind!=="constant"}const C2=new class extends gn{possiblyEvaluate(r,e){return e=new uo(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(r,e)}evaluate(r,e,i,a){return e=ct({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(r,e,i,a)}}(_2.paint.properties["line-width"].specification);function E2(r,e){return e>0?e+2*r:r}C2.useIntegerZoom=!0;const EJ=new vi({visibility:new Ir(Lt.layout_background.visibility)});var TJ={paint:new vi({"background-color":new Ir(Lt.paint_background["background-color"]),"background-pattern":new Ir(Lt.paint_background["background-pattern"]),"background-opacity":new Ir(Lt.paint_background["background-opacity"]),"background-emissive-strength":new Ir(Lt.paint_background["background-emissive-strength"])}),layout:EJ};const IJ=new vi({visibility:new Ir(Lt.layout_raster.visibility)});var MJ={paint:new vi({"raster-opacity":new Ir(Lt.paint_raster["raster-opacity"]),"raster-color":new gg(Lt.paint_raster["raster-color"]),"raster-color-mix":new Ir(Lt.paint_raster["raster-color-mix"]),"raster-color-range":new Ir(Lt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ir(Lt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ir(Lt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ir(Lt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ir(Lt.paint_raster["raster-saturation"]),"raster-contrast":new Ir(Lt.paint_raster["raster-contrast"]),"raster-resampling":new Ir(Lt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ir(Lt.paint_raster["raster-fade-duration"])}),layout:IJ};function T2(r,e,i,a,l,u,h,g){const x=[r,i,l,e,a,u,1,1,1],b=[h,g,1],T=F.adjoint([],x),[M,A,O]=ce.transformMat3(b,b,F.transpose(T,T));return F.multiply(x,[M,0,0,0,A,0,0,0,O],x)}class Ed extends mo{constructor(e,i,a,l){super(),this.id=e,this.dispatcher=a,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(l),this.options=i,this._dirty=!1}load(e,i){if(this._loaded=i||!1,this.fire(new vr("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=Et(this.map._requestManager.transformRequest(this.url,Pe.Image),(a,l)=>{if(this._imageRequest=null,this._loaded=!0,a)this.fire(new kn(a));else if(l){const{HTMLImageElement:u}=S;this.image=l instanceof u?Qr.getImageData(l):l,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading()}})}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new qS(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new vr("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof qS||this.texture.destroy()}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let i=e[0][1],a=e[0][1];for(const u of e)u[1]>a&&(a=u[1]),u[1]<i&&(i=u[1]);const l=(a+i)/2;if(l>ha?this.onNorthPole=!0:l<-ha&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const u=e.map(Si.fromLngLat);this.tileID=function(h){let g=1/0,x=1/0,b=-1/0,T=-1/0;for(const B of h)g=Math.min(g,B.x),x=Math.min(x,B.y),b=Math.max(b,B.x),T=Math.max(T,B.y);const M=Math.max(b-g,T-x),A=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),O=Math.pow(2,A);return new sn(A,Math.floor((g+b)/2*O),Math.floor((x+T)/2*O))}(u),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new vr("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(e){for(const x in this.tiles){const b=this.tiles[x];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}if(this._boundsArray)return;const i=Lg(this.tileID,this.map.transform.projection),[a,l,u,h]=this.coordinates.map(x=>{const b=i.projection.project(x[0],x[1]);return p6(i,b)._round()});this.perspectiveTransform=function(x,b,T,M,A,O,B,V,W,q){const ne=T2(0,0,x,0,0,b,x,b),ae=T2(T,M,A,O,B,V,W,q);return F.multiply(ae,F.adjoint(ne,ne),ae),[ae[6]/ae[8]*x/Zt,ae[7]/ae[8]*b/Zt]}(this.width,this.height,a.x,a.y,l.x,l.y,h.x,h.y,u.x,u.y);const g=this._boundsArray=new hd;g.emplaceBack(a.x,a.y,0,0),g.emplaceBack(l.x,l.y,Zt,0),g.emplaceBack(h.x,h.y,0,Zt),g.emplaceBack(u.x,u.y,Zt,Zt),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(g,T3.members),this.boundsSegments=qi.simpleSegment(0,0,4,2)}prepare(){const e=Object.keys(this.tiles).length!==0;if(this.tileID&&!e)return;const i=this.map.painter.context,a=i.gl;!this._dirty||this.texture instanceof qS||(this.texture?this.texture.update(this.image):(this.texture=new ja(i,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(i)}loadTile(e,i){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},i(null)):(e.state="errored",i(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class PJ extends nl{constructor(e){super(e,{}),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(e){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}const AJ=new vi({visibility:new Ir(Lt.layout_sky.visibility)});var RJ={paint:new vi({"sky-type":new Ir(Lt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ir(Lt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ir(Lt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ir(Lt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ir(Lt.paint_sky["sky-gradient-radius"]),"sky-gradient":new gg(Lt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ir(Lt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ir(Lt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ir(Lt.paint_sky["sky-opacity"])}),layout:AJ};function B3(r,e,i){const a=[0,0,1],l=de.identity([]);return de.rotateY(l,l,i?-_e(r)+Math.PI:_e(r)),de.rotateX(l,l,-_e(e)),ce.transformQuat(a,a,l),ce.normalize(a,a)}var kJ={paint:new vi({})};const OJ={circle:class extends nl{constructor(r,e){super(r,xZ,e)}createBucket(r){return new YM(r)}queryRadius(r){const e=r;return Ev("circle-radius",this,e)+Ev("circle-stroke-width",this,e)+gS(this.paint.get("circle-translate"))}queryIntersectsFeature(r,e,i,a,l,u,h,g){const x=fD(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),u.angle,r.pixelToTileUnitsFactor),b=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i);return mD(r,a,u,h,g,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",x,b)}getProgramIds(){return["circle"]}getDefaultProgramParams(r,e){const i=pD(this);return{config:new gf(this,e),defines:i,overrideFog:!1}}},heatmap:class extends nl{createBucket(r){return new yD(r)}constructor(r,e){super(r,IZ,e),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return Ev("heatmap-radius",this,r)}queryIntersectsFeature(r,e,i,a,l,u,h,g){const x=this.paint.get("heatmap-radius").evaluate(e,i);return mD(r,a,u,h,g,!0,!0,new oe(0,0),x)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(r,e){return r==="heatmap"?{config:new gf(this,e),overrideFog:!1}:{}}},hillshade:class extends nl{constructor(r,e){super(r,PZ,e)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(r,e){return{overrideFog:!1}}},fill:class extends nl{constructor(r,e){super(r,UZ,e)}getProgramIds(){const r=this.paint.get("fill-pattern"),e=r&&r.constantOr(1),i=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getDefaultProgramParams(r,e){return{config:new gf(this,e),overrideFog:!1}}recalculate(r,e){super.recalculate(r,e);const i=this.paint._values["fill-outline-color"];i.value.kind==="constant"&&i.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new SS(r)}queryRadius(){return gS(this.paint.get("fill-translate"))}queryIntersectsFeature(r,e,i,a,l,u){return!r.queryGeometry.isAboveHorizon&&lD(dD(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),u.angle,r.pixelToTileUnitsFactor),a)}isTileClipped(){return!0}},"fill-extrusion":class extends nl{constructor(r,e){super(r,bJ,e)}createBucket(r){return new ux(r)}queryRadius(){return gS(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(r,e,i,a,l,u,h,g,x){const b=fD(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),u.angle,r.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(e,i),M=this.paint.get("fill-extrusion-base").evaluate(e,i),A=[0,0],O=g&&u.elevation,B=u.elevation?u.elevation.exaggeration():1,V=r.tile.getBucket(this);if(O&&V instanceof ux){const le=V.centroidVertexArray,ie=x+1;ie<le.length&&(A[0]=le.geta_centroid_pos0(ie),A[1]=le.geta_centroid_pos1(ie))}if(A[0]===0&&A[1]===1)return!1;u.projection.name==="globe"&&(a=g2([a],[new oe(0,0),new oe(Zt,Zt)],r.tileID.canonical).map(le=>le.polygon).flat());const W=O?g:null,[q,ne]=function(le,ie,ue,Ee,Be,je,Ge,tt,Ze,nt,Xe){return le.projection.name==="globe"?function(ut,bt,At,lt,ft,Ft,Jt,tr,lr,pr,er){const or=[],kr=[],Hr=ut.projection.upVectorScale(er,ut.center.lat,ut.worldSize).metersToTile,Ur=[0,0,0,1],qr=[0,0,0,1],yn=(ui,Mi,Yn,Un)=>{ui[0]=Mi,ui[1]=Yn,ui[2]=Un,ui[3]=1},Dn=m2();At>0&&(At+=Dn),lt+=Dn;for(const ui of bt){const Mi=[],Yn=[];for(const Un of ui){const On=Un.x+ft.x,Tn=Un.y+ft.y,_i=ut.projection.projectTilePoint(On,Tn,er),Di=ut.projection.upVector(er,Un.x,Un.y);let ri=At,oo=lt;if(Jt){const Vo=v2(On,Tn,At,lt,Jt,tr,lr,pr);ri+=Vo.base,oo+=Vo.top}At!==0?yn(Ur,_i.x+Di[0]*Hr*ri,_i.y+Di[1]*Hr*ri,_i.z+Di[2]*Hr*ri):yn(Ur,_i.x,_i.y,_i.z),yn(qr,_i.x+Di[0]*Hr*oo,_i.y+Di[1]*Hr*oo,_i.z+Di[2]*Hr*oo),ce.transformMat4(Ur,Ur,Ft),ce.transformMat4(qr,qr,Ft),Mi.push(new Fv(Ur[0],Ur[1],Ur[2])),Yn.push(new Fv(qr[0],qr[1],qr[2]))}or.push(Mi),kr.push(Yn)}return[or,kr]}(le,ie,ue,Ee,Be,je,Ge,tt,Ze,nt,Xe):Ge?function(ut,bt,At,lt,ft,Ft,Jt,tr,lr){const pr=[],er=[],or=[0,0,0,1];for(const kr of ut){const Hr=[],Ur=[];for(const qr of kr){const yn=qr.x+lt.x,Dn=qr.y+lt.y,ui=v2(yn,Dn,bt,At,Ft,Jt,tr,lr);or[0]=yn,or[1]=Dn,or[2]=ui.base,or[3]=1,Hi.transformMat4(or,or,ft),or[3]=Math.max(or[3],1e-5);const Mi=new Fv(or[0]/or[3],or[1]/or[3],or[2]/or[3]);or[0]=yn,or[1]=Dn,or[2]=ui.top,or[3]=1,Hi.transformMat4(or,or,ft),or[3]=Math.max(or[3],1e-5);const Yn=new Fv(or[0]/or[3],or[1]/or[3],or[2]/or[3]);Hr.push(Mi),Ur.push(Yn)}pr.push(Hr),er.push(Ur)}return[pr,er]}(ie,ue,Ee,Be,je,Ge,tt,Ze,nt):function(ut,bt,At,lt,ft){const Ft=[],Jt=[],tr=ft[8]*bt,lr=ft[9]*bt,pr=ft[10]*bt,er=ft[11]*bt,or=ft[8]*At,kr=ft[9]*At,Hr=ft[10]*At,Ur=ft[11]*At;for(const qr of ut){const yn=[],Dn=[];for(const ui of qr){const Mi=ui.x+lt.x,Yn=ui.y+lt.y,Un=ft[0]*Mi+ft[4]*Yn+ft[12],On=ft[1]*Mi+ft[5]*Yn+ft[13],Tn=ft[2]*Mi+ft[6]*Yn+ft[14],_i=ft[3]*Mi+ft[7]*Yn+ft[15],Di=Un+tr,ri=On+lr,oo=Tn+pr,Vo=Math.max(_i+er,1e-5),To=Un+or,yo=On+kr,Pa=Tn+Hr,Uo=Math.max(_i+Ur,1e-5);yn.push(new Fv(Di/Vo,ri/Vo,oo/Vo)),Dn.push(new Fv(To/Uo,yo/Uo,Pa/Uo))}Ft.push(yn),Jt.push(Dn)}return[Ft,Jt]}(ie,ue,Ee,Be,je)}(u,a,M,T,b,h,W,A,B,u.center.lat,r.tileID.canonical),ae=r.queryGeometry;return function(le,ie,ue){let Ee=1/0;lD(ue,ie)&&(Ee=y2(ue,ie[0]));for(let Be=0;Be<ie.length;Be++){const je=ie[Be],Ge=le[Be];for(let tt=0;tt<je.length-1;tt++){const Ze=je[tt],nt=[Ze,je[tt+1],Ge[tt+1],Ge[tt],Ze];sD(ue,nt)&&(Ee=Math.min(Ee,y2(ue,nt)))}}return Ee!==1/0&&Ee}(q,ne,ae.isPointQuery()?ae.screenBounds:ae.screenGeometry)}},line:class extends nl{constructor(r,e){super(r,_2,e),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof og,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(r,e){super.recalculate(r,e),this.paint._values["line-floorwidth"]=C2.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new GS(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(r,e){const i=w2(this);return{config:new gf(this,e),defines:i,overrideFog:!1}}queryRadius(r){const e=r,i=E2(Ev("line-width",this,e),Ev("line-gap-width",this,e)),a=Ev("line-offset",this,e);return i/2+Math.abs(a)+gS(this.paint.get("line-translate"))}queryIntersectsFeature(r,e,i,a,l,u){if(r.queryGeometry.isAboveHorizon)return!1;const h=dD(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),u.angle,r.pixelToTileUnitsFactor),g=r.pixelToTileUnitsFactor/2*E2(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),x=this.paint.get("line-offset").evaluate(e,i);return x&&(a=function(b,T){const M=[],A=new oe(0,0);for(let O=0;O<b.length;O++){const B=b[O],V=[];for(let W=0;W<B.length;W++){const q=B[W],ne=B[W+1],ae=W===0?A:q.sub(B[W-1])._unit()._perp(),le=W===B.length-1?A:ne.sub(q)._unit()._perp(),ie=ae._add(le)._unit();ie._mult(1/(ie.x*le.x+ie.y*le.y)),V.push(ie._mult(T)._add(q))}M.push(V)}return M}(a,x*r.pixelToTileUnitsFactor)),function(b,T,M){for(let A=0;A<T.length;A++){const O=T[A];if(b.length>=3){for(let B=0;B<O.length;B++)if(Wp(b,O[B]))return!0}if(gZ(b,O,M))return!0}return!1}(h,a,g)}isTileClipped(){return!0}},symbol:FS,background:class extends nl{constructor(r,e){super(r,TJ,e)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(r,e){return{overrideFog:!1}}},raster:class extends nl{constructor(r,e){super(r,MJ,e),this._updateColorRamp()}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}isLayerDraped(r){return!(r&&r._source instanceof Ed&&(r._source.onNorthPole||r._source.onSouthPole))}_handleSpecialPaintPropertyUpdate(r){r!=="raster-color"&&r!=="raster-color-range"||this._updateColorRamp()}_updateColorRamp(){if(!this.hasColorMap())return;const r=this._transitionablePaint._values["raster-color"].value.expression,[e,i]=this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0});this.colorRamp=yS({expression:r,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:e,end:i}],resolution:256}),this.colorRampTexture=null}},sky:class extends nl{constructor(r,e){super(r,RJ,e),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="sky-gradient"?this._updateColorRamp():r!=="sky-atmosphere-sun"&&r!=="sky-atmosphere-halo-color"&&r!=="sky-atmosphere-color"&&r!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=yS({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(r,e){if(this.paint.get("sky-type")==="atmosphere"){const a=this.paint.get("sky-atmosphere-sun"),l=!a,u=r.style.light,h=u.properties.get("position");return l&&u.properties.get("anchor")==="viewport"&&ve("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),l?B3(h.azimuthal,90-h.polar,e):B3(a[0],90-a[1],e)}const i=this.paint.get("sky-gradient-center");return B3(i[0],90-i[1],e)}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return r==="atmosphere"?["skyboxCapture","skybox"]:r==="gradient"?["skyboxGradient"]:null}},slot:class extends nl{constructor(r,e){super(r,kJ)}},model:class extends nl{constructor(r,e){super(r,aJ,e)}createBucket(r){return new K6(r)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(){return 0}queryIntersectsFeature(){return!1}_handleOverridablePaintPropertyUpdate(r,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven()||r!=="model-color"&&r!=="model-color-mix-intensity"&&r!=="model-rotation"&&r!=="model-scale"&&r!=="model-translation"&&r!=="model-emissive-strength")}_isPropertyZoomDependent(r){const e=this._transitionablePaint._values[r];return e!=null&&e.value!=null&&e.value.expression!=null&&e.value.expression instanceof bo}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}}};function nC(r,e){return r.type==="custom"?new PJ(r):new OJ[r.type](r,e)}function zJ(r){const{userImage:e}=r;return!!(e&&e.render&&e.render())&&(r.data.replace(new Uint8Array(e.data.buffer)),!0)}class DJ extends mo{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(e){this.images[e]={},this.loaded[e]=!1,this.updatedImages[e]={},this.patterns[e]={},this.callbackDispatchedThisFrame[e]={},this.atlasImage[e]=new da({width:1,height:1})}isLoaded(){for(const e in this.loaded)if(!this.loaded[e])return!1;return!0}setLoaded(e,i){if(this.loaded[i]!==e&&(this.loaded[i]=e,e)){for(const{ids:a,callback:l}of this.requestors)this._notify(a,i,l);this.requestors=[]}}hasImage(e,i){return!!this.getImage(e,i)}getImage(e,i){return this.images[i][e]}addImage(e,i,a){this._validate(e,a)&&(this.images[i][e]=a)}_validate(e,i){let a=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new kn(new Error(`Image "${e}" has invalid "stretchX" value`))),a=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new kn(new Error(`Image "${e}" has invalid "stretchY" value`))),a=!1),this._validateContent(i.content,i)||(this.fire(new kn(new Error(`Image "${e}" has invalid "content" value`))),a=!1),a}_validateStretch(e,i){if(!e)return!0;let a=0;for(const l of e){if(l[0]<a||l[1]<l[0]||i<l[1])return!1;a=l[1]}return!0}_validateContent(e,i){return!(e&&(e.length!==4||e[0]<0||i.data.width<e[0]||e[1]<0||i.data.height<e[1]||e[2]<0||i.data.width<e[2]||e[3]<0||i.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,i,a){a.version=this.images[i][e].version+1,this.images[i][e]=a,this.updatedImages[i][e]=!0}removeImage(e,i){const a=this.images[i][e];delete this.images[i][e],delete this.patterns[i][e],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(e){return Object.keys(this.images[e])}getImages(e,i,a){let l=!0;const u=!!this.loaded[i];if(!u)for(const h of e)this.images[i][h]||(l=!1);u||l?this._notify(e,i,a):this.requestors.push({ids:e,scope:i,callback:a})}getUpdatedImages(e){return this.updatedImages[e]}_notify(e,i,a){const l={};for(const u of e){this.images[i][u]||this.fire(new vr("styleimagemissing",{id:u}));const h=this.images[i][u];h?l[u]={data:h.data.clone(),pixelRatio:h.pixelRatio,sdf:h.sdf,version:h.version,stretchX:h.stretchX,stretchY:h.stretchY,content:h.content,hasRenderCallback:!!(h.userImage&&h.userImage.render)}:ve(`Image "${u}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}a(null,l)}getPixelSize(e){const{width:i,height:a}=this.atlasImage[e];return{width:i,height:a}}getPattern(e,i){const a=this.patterns[i][e],l=this.getImage(e,i);if(!l)return null;if(a&&a.position.version===l.version)return a.position;if(a)a.position.version=l.version;else{const u={w:l.data.width+2,h:l.data.height+2,x:0,y:0},h=new y3(u,l);this.patterns[i][e]={bin:u,position:h}}return this._updatePatternAtlas(i),this.patterns[i][e].position}bind(e,i){const a=e.gl;let l=this.atlasTexture[i];l?this.dirty&&(l.update(this.atlasImage[i]),this.dirty=!1):(l=new ja(e,this.atlasImage[i],a.RGBA),this.atlasTexture[i]=l),l.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(e){const i=[];for(const h in this.patterns[e])i.push(this.patterns[e][h].bin);const{w:a,h:l}=g3(i),u=this.atlasImage[e];u.resize({width:a||1,height:l||1});for(const h in this.patterns[e]){const{bin:g}=this.patterns[e][h],x=g.x+1,b=g.y+1,T=this.images[e][h].data,M=T.width,A=T.height;da.copy(T,u,{x:0,y:0},{x,y:b},{width:M,height:A}),da.copy(T,u,{x:0,y:A-1},{x,y:b-1},{width:M,height:1}),da.copy(T,u,{x:0,y:0},{x,y:b+A},{width:M,height:1}),da.copy(T,u,{x:M-1,y:0},{x:x-1,y:b},{width:1,height:A}),da.copy(T,u,{x:0,y:0},{x:x+M,y:b},{width:1,height:A})}this.dirty=!0}beginFrame(){for(const e in this.images)this.callbackDispatchedThisFrame[e]={}}dispatchRenderCallbacks(e,i){for(const a of e){if(this.callbackDispatchedThisFrame[i][a])continue;this.callbackDispatchedThisFrame[i][a]=!0;const l=this.images[i][a];zJ(l)&&this.updateImage(a,i,l)}}}const LJ=new vi({anchor:new Ir(Lt.light.anchor),position:new class{constructor(r){this.specification=r}possiblyEvaluate(r,e){return $t(r.expression.evaluate(e))}interpolate(r,e,i){return{x:Mn(r.x,e.x,i),y:Mn(r.y,e.y,i),z:Mn(r.z,e.z,i),azimuthal:Mn(r.azimuthal,e.azimuthal,i),polar:Mn(r.polar,e.polar,i)}}}(Lt.light.position),color:new Ir(Lt.light.color),intensity:new Ir(Lt.light.intensity)});class I2 extends mo{constructor(e,i="flat"){super(),this._transitionable=new mg(LJ),this.setLight(e,i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i,a={}){this._validate(PM,e,a)||(this._transitionable.setTransitionOrValue(e),this.id=i)}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,i,a){return(!a||a.validate!==!1)&&uf(this,e.call(Cp,ct({value:i,style:{glyphs:!0,sprite:!0},styleSpec:Lt})))}}const $J=new vi({source:new Ir(Lt.terrain.source),exaggeration:new Ir(Lt.terrain.exaggeration)});let BJ=class extends mo{constructor(r,e){super(),this._transitionable=new mg($J),this.set(r),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=e}setScope(r){this.scope=r}get(){return this._transitionable.serialize()}set(r){this._transitionable.setTransitionOrValue(r)}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}getExaggeration(r){return this._transitioning.possiblyEvaluate(new uo(r)).get("exaggeration")}isZoomDependent(){const r=this._transitionable._values.exaggeration;return r!=null&&r.value!=null&&r.value.expression!=null&&r.value.expression instanceof bo}};const M2=45,P2=65,Ng=.05;function iC(r,e,i,a){const l=St(M2,P2,i),[u,h]=A2(r,a);let g=1-Math.min(1,Math.exp((e-u)/(h-u)*-6));return g*=g*g,g=Math.min(1,1.00747*g),g*l*r.alpha}function A2(r,e){const i=.5/Math.tan(.5*e);return[r.range[0]+i,r.range[1]+i]}function R2(r,e,i,a,l){const u=ce.transformMat4([],[e,i,a],l.mercatorFogMatrix);return iC(r,ce.length(u),l.pitch,l._fov)}function k2(r,e,i,a,l,u,h){const g=[[i,a,0],[l,a,0],[l,u,0],[i,u,0]];let x=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(const T of g){const M=ce.transformMat4([],T,e),A=ce.length(M);x=Math.min(x,A),b=Math.max(b,A)}return[iC(r,x,h.pitch,h._fov),iC(r,b,h.pitch,h._fov)]}const FJ=new vi({range:new Ir(Lt.fog.range),color:new Ir(Lt.fog.color),"high-color":new Ir(Lt.fog["high-color"]),"space-color":new Ir(Lt.fog["space-color"]),"horizon-blend":new Ir(Lt.fog["horizon-blend"]),"star-intensity":new Ir(Lt.fog["star-intensity"]),"vertical-range":new Ir(Lt.fog["vertical-range"])});class NJ extends mo{constructor(e,i){super(),this._transitionable=new mg(FJ),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=i}get state(){const e=this._transform,i=e.projection.name==="globe",a=Na(e.zoom),l=this.properties.get("range"),u=[.5,3];return{range:i?[Mn(u[0],l[0],a),Mn(u[1],l[1],a)]:l,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e,i={}){if(this._validate($0,e,i))return;const a=ct({},e);for(const l of Object.keys(Lt.fog))a[l]===void 0&&(a[l]=Lt.fog[l].default);this._transitionable.setTransitionOrValue(a)}getOpacity(e){if(!this._transform.projection.supportsFog)return 0;const i=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:St(M2,P2,e))*i.a}getOpacityAtLatLng(e,i){return this._transform.projection.supportsFog?function(a,l,u){const h=Si.fromLngLat(l),g=u.elevation?u.elevation.getAtPointOrZero(h):0;return R2(a,h.x,h.y,g,u)}(this.state,e,i):0}getOpacityForTile(e){if(!this._transform.projection.supportsFog)return[1,1];const i=this._transform.calculateFogTileMatrix(e.toUnwrapped());return k2(this.state,i,0,0,Zt,Zt,this._transform)}getOpacityForBounds(e,i,a,l,u){return this._transform.projection.supportsFog?k2(this.state,e,i,a,l,u,this._transform):[1,1]}getFovAdjustedRange(e){return this._transform.projection.supportsFog?A2(this.state,e):[0,1]}isVisibleOnFrustum(e){if(!this._transform.projection.supportsFog)return!1;const i=[4,5,6,7];for(const a of i){const l=e.points[a];let u;if(l[2]>=0)u=l;else{const h=e.points[a-4];u=mp(h,l,h[2]/(h[2]-l[2]))}if(R2(this.state,u[0],u[1],0,this._transform)>=Ng)return!0}return!1}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,i,a){return(!a||a.validate!==!1)&&uf(this,e.call(Cp,ct({value:i,style:{glyphs:!0,sprite:!0},styleSpec:Lt})))}}class jJ{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class VJ{constructor(){this.tasks={},this.taskQueue=[],Dt(["process"],this),this.invoker=new jJ(this.process),this.nextId=0}add(e,i){const a=this.nextId++,l=function({type:u,isSymbolTile:h,zoom:g}){return g=g||0,u==="message"?0:u!=="maybePrepare"||h?u!=="parseTile"||h?u==="parseTile"&&h?300-g:u==="maybePrepare"&&h?400-g:500:200-g:100-g}(i);if(l===0){Mt();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[a]={fn:e,metadata:i,priority:l,id:a},this.taskQueue.push(a),this.invoker.trigger(),{cancel:()=>{delete this.tasks[a]}}}process(){Mt();try{if(this.taskQueue=this.taskQueue.filter(a=>!!this.tasks[a]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const i=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!i)return;i.fn()}finally{}}pick(){let e=null,i=1/0;for(let l=0;l<this.taskQueue.length;l++){const u=this.tasks[this.taskQueue[l]];u.priority<i&&(i=u.priority,e=l)}if(e===null)return null;const a=this.taskQueue[e];return this.taskQueue.splice(e,1),a}remove(){this.invoker.remove()}}class O2{constructor(e,i,a){this.target=e,this.parent=i,this.mapId=a,this.callbacks={},this.cancelCallbacks={},Dt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new VJ}send(e,i,a,l,u=!1,h){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=h,this.callbacks[g]=a);const x=new Set;return this.target.postMessage({id:g,type:e,hasCallback:!!a,targetMapId:l,mustQueue:u,sourceMapId:this.mapId,data:Ip(i,x)},x),{cancel:()=>{a&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(e){const i=e.data,a=i.id;if(a&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const l=this.cancelCallbacks[a];delete this.cancelCallbacks[a],l&&l.cancel()}else if(i.mustQueue||Mt()){const l=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,i),l&&l.metadata||{type:"message"})}else this.processTask(a,i)}processTask(e,i){if(i.type==="<response>"){const a=this.callbacks[e];delete this.callbacks[e],a&&(i.error?a(hh(i.error)):a(null,hh(i.data)))}else{const a=new Set,l=i.hasCallback?(h,g)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:h?Ip(h):null,data:Ip(g,a)},a)}:h=>{},u=hh(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,u,l);else if(this.parent.getWorkerSource){const h=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,h[0],u.source,u.scope)[h[1]](u,l)}else l(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class jg{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=zt();const a=this.workerPool.acquire(this.id);for(let l=0;l<a.length;l++){const u=new jg.Actor(a[l],i,this.id);u.name=`Worker ${l}`,this.actors.push(u)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(e,i,a){Ot(this.actors,(l,u)=>{l.send(e,i,u)},a=a||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}jg.Actor=O2;class z2 extends mo{constructor(e,i,a,l){super(),this.scope=a,this._options=e,this.properties=new hf(i),this._transitionable=new mg(i,new Map(l)),this._transitionable.setTransitionOrValue(e.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(e){this._transitionable.setTransitionOrValue(this._options.properties,new Map(e))}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(e,i){this._options=e,this._transitionable.setTransitionOrValue(e.properties,i)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const UJ=new vi({color:new Ir(Lt.properties_light_ambient.color),intensity:new Ir(Lt.properties_light_ambient.intensity)}),HJ=new vi({direction:new class{constructor(r){this.specification=r}possiblyEvaluate(r,e){return function([i,a]){const l=$t([1,i,a]);return{x:l.x,y:l.y,z:l.z}}(r.expression.evaluate(e))}interpolate(r,e,i){return{x:Mn(r.x,e.x,i),y:Mn(r.y,e.y,i),z:Mn(r.z,e.z,i)}}}(Lt.properties_light_directional.direction),color:new Ir(Lt.properties_light_directional.color),intensity:new Ir(Lt.properties_light_directional.intensity),"cast-shadows":new Ir(Lt.properties_light_directional["cast-shadows"]),"shadow-intensity":new Ir(Lt.properties_light_directional["shadow-intensity"])});class F3{constructor(e,i,a,l){this.screenBounds=e,this.cameraPoint=i,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=a,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,l)}static createFromScreenPoints(e,i){let a,l;if(e instanceof oe||typeof e[0]=="number"){const u=oe.convert(e);a=[u],l=i.isPointAboveHorizon(u)}else{const u=oe.convert(e[0]),h=oe.convert(e[1]);a=[u,h],l=Ye(u,h).every(g=>i.isPointAboveHorizon(g))}return new F3(a,i.getCameraPoint(),l,i)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(e){return Ye(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const i=this.screenBounds[0],a=this.screenBounds.length===1?this.screenBounds[0].add(new oe(1,1)):this.screenBounds[1],l=Ye(i,a,0,!1);return this.cameraPoint.y>a.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<a.x?l.splice(3,0,this.cameraPoint):this.cameraPoint.x>=a.x?l[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(l[3]=this.cameraPoint)),function(u,h){const g=[];for(let x=0;x<u.length;x++){const b=jt(x-1,-1,u.length-1),T=jt(x+1,-1,u.length-1),M=u[x],A=u[T],O=u[b].sub(M).unit(),B=A.sub(M).unit(),V=B.angleWithSep(O.x,O.y),W=O.add(B).unit().mult(-1*h/Math.sin(V/2));g.push(M.add(W))}return g}(l,e)}bufferedCameraGeometryGlobe(e){const i=this.screenBounds[0],a=this.screenBounds.length===1?this.screenBounds[0].add(new oe(1,1)):this.screenBounds[1],l=Ye(i,a,e),u=this.cameraPoint.clone();switch(3*((u.y>i.y)+(u.y>a.y))+((u.x>i.x)+(u.x>a.x))){case 0:l[0]=u,l[4]=u.clone();break;case 1:l.splice(1,0,u);break;case 2:l[1]=u;break;case 3:l.splice(4,0,u);break;case 5:l.splice(2,0,u);break;case 6:l[3]=u;break;case 7:l.splice(3,0,u);break;case 8:l[2]=u}return l}containsTile(e,i,a,l=0){const u=e.queryPadding/i._pixelsPerMercatorPixel+1,h=a?this._bufferedCameraMercator(u,i):this._bufferedScreenMercator(u,i);let g=e.tileID.wrap+(h.unwrapped?l:0);const x=h.polygon.map(W=>p6(e.tileTransform,W,g));if(!hD(x,0,0,Zt,Zt))return;g=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?l:0);const b=this.screenGeometryMercator.polygon.map(W=>m6(e.tileTransform,W,g)),T=b.map(W=>new oe(W[0],W[1])),M=i.getFreeCameraOptions().position||new Si(0,0,0),A=m6(e.tileTransform,M,g),O=b.map(W=>{const q=ce.sub(W,W,A);return ce.normalize(q,q),new bn(A,q)}),B=$g(e,1,i.zoom)*i._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:T,tilespaceRays:O,bufferedTilespaceGeometry:x,bufferedTilespaceBounds:(V=Ce(x),V.min.x=Qe(V.min.x,0,Zt),V.min.y=Qe(V.min.y,0,Zt),V.max.x=Qe(V.max.x,0,Zt),V.max.y=Qe(V.max.y,0,Zt),V),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:B};var V}_bufferedScreenMercator(e,i){const a=D2(e);if(this._screenRaycastCache[a])return this._screenRaycastCache[a];{let l;return l=i.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(e),i):{polygon:this.bufferedScreenGeometry(e).map(u=>i.pointCoordinate3D(u)),unwrapped:!0},this._screenRaycastCache[a]=l,l}}_bufferedCameraMercator(e,i){const a=D2(e);if(this._cameraRaycastCache[a])return this._cameraRaycastCache[a];{let l;return l=i.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),i):{polygon:this.bufferedCameraGeometry(e).map(u=>i.pointCoordinate3D(u)),unwrapped:!0},this._cameraRaycastCache[a]=l,l}}_projectAndResample(e,i){const a=function(u,h){const g=U.multiply([],h.pixelMatrix,h.globeMatrix),x=[0,-Co,0,1],b=[0,Co,0,1],T=[0,0,0,1];Hi.transformMat4(x,x,g),Hi.transformMat4(b,b,g),Hi.transformMat4(T,T,g);const M=new oe(x[0]/x[3],x[1]/x[3]),A=new oe(b[0]/b[3],b[1]/b[3]),O=Wp(u,M)&&x[3]<T[3],B=Wp(u,A)&&b[3]<T[3];if(!O&&!B)return null;const V=function(Ee,Be,je){for(let Ge=1;Ge<Ee.length;Ge++){const tt=dx(Be.pointCoordinate3D(Ee[Ge-1]).x),Ze=dx(Be.pointCoordinate3D(Ee[Ge]).x);if(je<0){if(tt<Ze)return{idx:Ge,t:-tt/(Ze-1-tt)}}else if(Ze<tt)return{idx:Ge,t:(1-tt)/(Ze+1-tt)}}return null}(u,h,O?-1:1);if(!V)return null;const{idx:W,t:q}=V;let ne=W>1?N3(u.slice(0,W),h):[],ae=W<u.length?N3(u.slice(W),h):[];ne=ne.map(Ee=>new oe(dx(Ee.x),Ee.y)),ae=ae.map(Ee=>new oe(dx(Ee.x),Ee.y));const le=[...ne];le.length===0&&le.push(ae[ae.length-1]);const ie=Mn(le[le.length-1].y,(ae.length===0?ne[0]:ae[0]).y,q);let ue;return ue=O?[new oe(0,ie),new oe(0,0),new oe(1,0),new oe(1,ie)]:[new oe(1,ie),new oe(1,1),new oe(0,1),new oe(0,ie)],le.push(...ue),ae.length===0?le.push(ne[0]):le.push(...ae),{polygon:le.map(Ee=>new Si(Ee.x,Ee.y)),unwrapped:!1}}(e,i);if(a)return a;const l=function(u,h){let g=!1,x=-1/0,b=0;for(let M=0;M<u.length-1;M++)u[M].x>x&&(x=u[M].x,b=M);for(let M=0;M<u.length-1;M++){const A=(b+M)%(u.length-1),O=u[A],B=u[A+1];Math.abs(O.x-B.x)>.5&&(O.x<B.x?(O.x+=1,A===0&&(u[u.length-1].x+=1)):(B.x+=1,A+1===u.length-1&&(u[0].x+=1)),g=!0)}const T=ro(h.center.lng);return g&&T<Math.abs(T-1)&&u.forEach(M=>{M.x-=1}),{polygon:u,unwrapped:g}}(N3(e,i).map(u=>new oe(dx(u.x),u.y)),i);return{polygon:l.polygon.map(u=>new Si(u.x,u.y)),unwrapped:l.unwrapped}}}function N3(r,e){return oD(r,i=>{const a=e.pointCoordinate3D(i);i.x=a.x,i.y=a.y},1/256)}function dx(r){return r<0?1+r%1:r%1}function D2(r){return 100*r|0}function j3(r,e,i,a,l){const u=function(h,g){if(h)return l(h);if(g){r.url&&g.tiles&&r.tiles&&delete r.tiles;const x=Ct(ct(g,r),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);g.vector_layers&&(x.vectorLayers=g.vector_layers,x.vectorLayerIds=x.vectorLayers.map(b=>b.id)),x.tiles=e.canonicalizeTileset(x,r.url),l(null,x)}};return r.url?$e(e.transformRequest(e.normalizeSourceURL(r.url,null,i,a),Pe.Source),u):Qr.frame(()=>u(null,r))}class oC{constructor(e,i,a){this.bounds=Dl.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=a||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),a=Math.floor(ro(this.bounds.getWest())*i),l=Math.floor(Eo(this.bounds.getNorth())*i),u=Math.ceil(ro(this.bounds.getEast())*i),h=Math.ceil(Eo(this.bounds.getSouth())*i);return e.x>=a&&e.x<u&&e.y>=l&&e.y<h}}class L2{constructor(e,i){this.width=e,this.height=i,this.nextRow=0,this.image=new xf({width:e,height:i}),this.positions={},this.uploaded=!1}getDash(e,i){const a=this.getKey(e,i);return this.positions[a]}trim(){const e=this.width,i=this.height=Rt(this.nextRow);this.image.resize({width:e,height:i})}getKey(e,i){return e.join(",")+i}getDashRanges(e,i,a){const l=[];let u=e.length%2==1?-e[e.length-1]*a:0,h=e[0]*a,g=!0;l.push({left:u,right:h,isDash:g,zeroLength:e[0]===0});let x=e[0];for(let b=1;b<e.length;b++){g=!g;const T=e[b];u=x*a,x+=T,h=x*a,l.push({left:u,right:h,isDash:g,zeroLength:T===0})}return l}addRoundDash(e,i,a){const l=i/2;for(let u=-a;u<=a;u++){const h=this.width*(this.nextRow+a+u);let g=0,x=e[g];for(let b=0;b<this.width;b++){b/x.right>1&&(x=e[++g]);const T=Math.abs(b-x.left),M=Math.abs(b-x.right),A=Math.min(T,M);let O;const B=u/a*(l+1);if(x.isDash){const V=l-Math.abs(B);O=Math.sqrt(A*A+V*V)}else O=l-Math.sqrt(A*A+B*B);this.image.data[h+b]=Math.max(0,Math.min(255,O+128))}}}addRegularDash(e,i){for(let x=e.length-1;x>=0;--x){const b=e[x],T=e[x+1];b.zeroLength?e.splice(x,1):T&&T.isDash===b.isDash&&(T.left=b.left,e.splice(x,1))}const a=e[0],l=e[e.length-1];a.isDash===l.isDash&&(a.left=l.left-this.width,l.right=a.right+this.width);const u=this.width*this.nextRow;let h=0,g=e[h];for(let x=0;x<this.width;x++){x/g.right>1&&(g=e[++h]);const b=Math.abs(x-g.left),T=Math.abs(x-g.right),M=Math.min(b,T);this.image.data[u+x]=Math.max(0,Math.min(255,(g.isDash?M:-M)+i+128))}}addDash(e,i){const a=this.getKey(e,i);if(this.positions[a])return this.positions[a];const l=i==="round",u=l?7:0,h=2*u+1;if(this.nextRow+h>this.height)return ve("LineAtlas out of space"),null;e.length===0&&e.push(1);let g=0;for(let T=0;T<e.length;T++)e[T]<0&&(ve("Negative value is found in line dasharray, replacing values with 0"),e[T]=0),g+=e[T];if(g!==0){const T=this.width/g,M=this.getDashRanges(e,this.width,T);l?this.addRoundDash(M,T,u):this.addRegularDash(M,i==="square"?.5*T:0)}const x=this.nextRow+u;this.nextRow+=h;const b={tl:[x,u],br:[g,0]};return this.positions[a]=b,b}}rn(L2,"LineAtlas");const $2=1*xh;class B2{constructor(e){const i={},a=[];for(const g in e){const x=e[g],b=i[g]={};for(const T in x.glyphs){const M=x.glyphs[+T];if(!M||M.bitmap.width===0||M.bitmap.height===0)continue;const A=M.metrics.localGlyph?$2:1,O={x:0,y:0,w:M.bitmap.width+2*A,h:M.bitmap.height+2*A};a.push(O),b[T]=O}}const{w:l,h:u}=g3(a),h=new xf({width:l||1,height:u||1});for(const g in e){const x=e[g];for(const b in x.glyphs){const T=x.glyphs[+b];if(!T||T.bitmap.width===0||T.bitmap.height===0)continue;const M=i[g][b],A=T.metrics.localGlyph?$2:1;xf.copy(T.bitmap,h,{x:0,y:0},{x:M.x+A,y:M.y+A},T.bitmap)}}this.image=h,this.positions=i}}rn(B2,"GlyphAtlas");class GJ{constructor(e){this.tileID=new xr(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.scope=e.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.promoteId=e.promoteId,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Lg(e.tileID.canonical,e.projection),this.projection=e.projection,this.brightness=e.brightness,this.extraShadowCaster=!!e.extraShadowCaster}parse(e,i,a,l,u){this.status="parsing",this.data=e,this.collisionBoxArray=new pf;const h=new MD(Object.keys(e.layers).sort()),g=new f3(this.tileID,this.promoteId);g.bucketLayerIDs=[];const x={},b=new L2(256,256),T={featureIndex:g,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:b,availableImages:a,brightness:this.brightness},M=i.familiesBySource[this.source];for(const ne in M){const ae=e.layers[ne];if(!ae)continue;let le=!1,ie=!1,ue=!1;for(const je of M[ne])je[0].type==="symbol"?le=!0:ie=!0,je[0].is3D()&&je[0].type!=="model"&&(ue=!0);if(this.extraShadowCaster&&!ue||this.isSymbolTile===!0&&!le||this.isSymbolTile===!1&&!ie)continue;ae.version===1&&ve(`Vector tile source "${this.source}" layer "${ne}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ee=h.encode(ne),Be=[];for(let je=0;je<ae.length;je++){const Ge=ae.feature(je),tt=g.getId(Ge,ne);Be.push({feature:Ge,id:tt,index:je,sourceLayerIndex:Ee})}for(const je of M[ne]){const Ge=je[0];(!this.extraShadowCaster||Ge.is3D()&&Ge.type!=="model")&&(this.isSymbolTile!==void 0&&Ge.type==="symbol"!==this.isSymbolTile||Ge.minzoom&&this.zoom<Math.floor(Ge.minzoom)||Ge.maxzoom&&this.zoom>=Ge.maxzoom||Ge.visibility!=="none"&&(V3(je,this.zoom,T.brightness,a),(x[Ge.id]=Ge.createBucket({index:g.bucketLayerIDs.length,layers:je,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ee,sourceID:this.source,projection:this.projection.spec})).populate(Be,T,this.tileID.canonical,this.tileTransform),g.bucketLayerIDs.push(je.map(tt=>tt.id))))}}let A,O,B,V;b.trim();const W={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},q=()=>{if(A)return u(A);if(this.extraShadowCaster)this.status="done",u(null,{buckets:Tt(x).filter(ne=>!ne.isEmpty()),featureIndex:g,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:T.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(O&&B&&V){const ne=new B2(O),ae=new qD(B,V);for(const le in x){const ie=x[le];ie instanceof rx?(V3(ie.layers,this.zoom,T.brightness,a),jX(ie,O,ne.positions,B,ae.iconPositions,this.showCollisionBoxes,a,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):ie.hasPattern&&(ie instanceof GS||ie instanceof SS||ie instanceof ux)&&(V3(ie.layers,this.zoom,T.brightness,a),ie.addFeatures(T,this.tileID.canonical,ae.patternPositions,a,this.tileTransform,this.brightness))}this.status="done",u(null,{buckets:Tt(x).filter(le=>!le.isEmpty()),featureIndex:g,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ne.image,lineAtlas:b,imageAtlas:ae,brightness:T.brightness})}};if(!this.extraShadowCaster){const ne=sr(T.glyphDependencies,ie=>Object.keys(ie).map(Number));Object.keys(ne).length?l.send("getGlyphs",{uid:this.uid,stacks:ne,scope:this.scope},(ie,ue)=>{A||(A=ie,O=ue,q())},void 0,!1,W):O={};const ae=Object.keys(T.iconDependencies);ae.length?l.send("getImages",{icons:ae,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(ie,ue)=>{A||(A=ie,B=ue,q())},void 0,!1,W):B={};const le=Object.keys(T.patternDependencies);le.length?l.send("getImages",{icons:le,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(ie,ue)=>{A||(A=ie,V=ue,q())},void 0,!1,W):V={}}q()}}function V3(r,e,i,a){const l=new uo(e,{brightness:i});for(const u of r)u.recalculate(l,a)}class F2{constructor(e){this.entries={},this.scheduler=e}request(e,i,a,l){const u=this.entries[e]=this.entries[e]||{callbacks:[]};if(u.result){const[h,g]=u.result;return this.scheduler?this.scheduler.add(()=>{l(h,g)},i):l(h,g),()=>{}}return u.callbacks.push(l),u.cancel||(u.cancel=a((h,g)=>{u.result=[h,g];for(const x of u.callbacks)this.scheduler?this.scheduler.add(()=>{x(h,g)},i):x(h,g);setTimeout(()=>delete this.entries[e],3e3)})),()=>{u.result||(u.callbacks=u.callbacks.filter(h=>h!==l),u.callbacks.length||(u.cancel(),delete this.entries[e]))}}}function N2(r,e,i){const a=JSON.stringify(r.request);return r.data&&(this.deduped.entries[a]={result:[null,r.data]}),this.deduped.request(a,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},l=>{const u=ke(r.request,(h,g,x,b)=>{h?l(h):g&&l(null,{vectorTile:i?void 0:new c3(new PS(g)),rawData:g,cacheControl:x,expires:b})});return()=>{u.cancel(),l()}},e)}class j2 extends mo{constructor(e,i,a,l){if(super(),this.id=e,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,ct(this,Ct(i,["url","scheme","tileSize","promoteId"])),this._options=ct({type:"vector"},i),this._collectResourceTiming=!!i.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(l),this._tileWorkers={},this._deduped=new F2}load(e){this._loaded=!1,this.fire(new vr("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,a=this.map._worldview;this._tileJSONRequest=j3(this._options,this.map._requestManager,i,a,(l,u)=>{this._tileJSONRequest=null,this._loaded=!0,l?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),a&&a.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${a}`),this.fire(new kn(l))):u&&(ct(this,u),u.bounds&&(this.tileBounds=new oC(u.bounds,this.minzoom,this.maxzoom)),Li(u.tiles,this.map._requestManager._customAccessToken),this.fire(new vr("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new vr("data",{dataType:"source",sourceDataType:"content"}))),e&&e(l)})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest();const e=us(this.id,this.scope);this.load(()=>this.map.style.clearSource(e))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return ct({},this._options)}loadTile(e,i){const a=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),l={request:this.map._requestManager.transformRequest(a,Pe.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:Qr.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:e.isExtraShadowCaster};if(l.request.collectResourceTiming=this._collectResourceTiming,e.actor&&e.state!=="expired")e.state==="loading"?e.reloadCallback=i:e.request=e.actor.send("reloadTile",l,u.bind(this));else if(e.actor=this._tileWorkers[a]=this._tileWorkers[a]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",l,u.bind(this),void 0,!0);else{const h=N2.call({deduped:this._deduped},l,(g,x)=>{g||!x?u.call(this,g):(l.data={cacheControl:x.cacheControl,expires:x.expires,rawData:x.rawData.slice(0)},e.actor&&e.actor.send("loadTile",l,u.bind(this),void 0,!0))},!0);e.request={cancel:h}}function u(h,g){return delete e.request,e.aborted?i(null):h&&h.status!==404?i(h):(g&&g.resourceTiming&&(e.resourceTiming=g.resourceTiming),this.map._refreshExpiredTiles&&g&&e.setExpiryData(g),e.loadVectorData(g,this.map.painter),ii(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class fx extends mo{constructor(e,i,a,l){super(),this.id=e,this.dispatcher=a,this.setEventedParent(l),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=ct({type:"raster"},i),ct(this,Ct(i,["url","scheme","tileSize"]))}load(e){this._loaded=!1,this.fire(new vr("dataloading",{dataType:"source"})),this._tileJSONRequest=j3(this._options,this.map._requestManager,null,null,(i,a)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new kn(i)):a&&(ct(this,a),a.bounds&&(this.tileBounds=new oC(a.bounds,this.minzoom,this.maxzoom)),Li(a.tiles),this.fire(new vr("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new vr("data",{dataType:"source",sourceDataType:"content"}))),e&&e(i)})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest();const e=us(this.id,this.scope);this.load(()=>this.map.style.clearSource(e))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return ct({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e,i){const a=Qr.devicePixelRatio>=2,l=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),a,this.tileSize);e.request=Et(this.map._requestManager.transformRequest(l,Pe.Tile),(u,h,g,x)=>(delete e.request,e.aborted?(e.state="unloaded",i(null)):u?(e.state="errored",i(u)):h?(this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:g,expires:x}),e.setTexture(h,this.map.painter),e.state="loaded",ii(this.dispatcher),void i(null)):i(null)))}static loadTileData(e,i,a){e.setTexture(i,a)}static unloadTileData(e,i){e.texture&&i.saveTileTexture(e.texture)}abortTile(e,i){e.request&&(e.request.cancel(),delete e.request),i()}unloadTile(e,i){e.texture&&this.map.painter.saveTileTexture(e.texture),i()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let U3;function qJ(){return MC.workerClass!=null?new MC.workerClass:new S.Worker(MC.workerUrl)}const H3="mapboxgl_preloaded_worker_pool";class Nv{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Nv.workerCount;)this.workers.push(new qJ);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&this.numActive()===0&&(this.workers.forEach(i=>{i.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[H3]}numActive(){return Object.keys(this.active).length}}let px;function mx(){return px||(px=new Nv),px}Nv.workerCount=2;let aC,G3,Sh,q3=null;function V2(){return Mt()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:G3||$.DRACO_URL}const W3=5123,K3=5126,Z3={5120:Int8Array,5121:Uint8Array,5122:Int16Array,[W3]:Uint16Array,5125:Uint32Array,[K3]:Float32Array},WJ={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",[W3]:"DT_UINT16",5125:"DT_UINT32",[K3]:"DT_FLOAT32"},X3={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function U2(r,e,i){const a=i.json.bufferViews.length,l=i.buffers.length;e.bufferView=a,i.json.bufferViews[a]={buffer:l,byteLength:r.byteLength},i.buffers[l]=r}const Y3="KHR_draco_mesh_compression";function KJ(r,e){const i=r.extensions&&r.extensions[Y3];if(!i)return;const a=new Sh.Decoder,l=W2(e,i.bufferView),u=new Sh.Mesh;if(!a.DecodeArrayToMesh(l,l.byteLength,u))throw new Error("Failed to decode Draco mesh");const h=e.json.accessors[r.indices],g=Z3[h.componentType],x=h.count*g.BYTES_PER_ELEMENT,b=Sh._malloc(x);g===Uint16Array?a.GetTrianglesUInt16Array(u,x,b):a.GetTrianglesUInt32Array(u,x,b),U2(Sh.memory.buffer.slice(b,b+x),h,e),Sh._free(b);for(const T of Object.keys(i.attributes)){const M=a.GetAttributeByUniqueId(u,i.attributes[T]),A=e.json.accessors[r.attributes[T]],O=WJ[A.componentType],B=A.count*X3[A.type]*Z3[A.componentType].BYTES_PER_ELEMENT,V=Sh._malloc(B);a.GetAttributeDataArrayForAllPoints(u,M,Sh[O],B,V),U2(Sh.memory.buffer.slice(V,V+B),A,e),Sh._free(V)}a.destroy(),u.destroy(),delete r.extensions[Y3]}const H2=1179937895,G2=new TextDecoder("utf8");function q2(r,e){return new URL(r,e).href}function ZJ(r,e,i,a){return fetch(q2(r.uri,a)).then(l=>l.arrayBuffer()).then(l=>{e.buffers[i]=l})}function W2(r,e){const i=r.json.bufferViews[e];return new Uint8Array(r.buffers[i.buffer],i.byteOffset||0,i.byteLength)}function XJ(r,e,i,a){if(r.uri){const l=q2(r.uri,a);return fetch(l).then(u=>u.blob()).then(u=>S.createImageBitmap(u)).then(u=>{e.images[i]=u})}if(r.bufferView!==void 0){const l=W2(e,r.bufferView),u=new S.Blob([l],{type:r.mimeType});return S.createImageBitmap(u).then(h=>{e.images[i]=h})}}function K2(r,e=0,i){const a={json:null,images:[],buffers:[]};if(new Uint32Array(r,e,1)[0]===H2){const b=new Uint32Array(r,e);let T=2;const M=(b[T++]>>2)-3,A=b[T++]>>2;if(T++,a.json=JSON.parse(G2.decode(b.subarray(T,T+A))),T+=A,T<M){const O=b[T++];T++;const B=e+(T<<2);a.buffers[0]=r.slice(B,B+O)}}else a.json=JSON.parse(G2.decode(new Uint8Array(r,e)));const{buffers:l,images:u,meshes:h,extensionsUsed:g}=a.json;let x=Promise.resolve();if(l){const b=[];for(let T=0;T<l.length;T++){const M=l[T];M.uri?b.push(ZJ(M,a,T,i)):a.buffers[T]||(a.buffers[T]=null)}x=Promise.all(b)}return x.then(()=>{const b=[],T=g&&g.includes(Y3);if(T&&b.push(function(){if(!Sh)return aC||(aC=function(M){let A,O=null;function B(){A=new Uint8Array(O.buffer)}function V(){throw new Error("Unexpected Draco error.")}const W={a:{a:V,d:function(q,ne,ae){return A.copyWithin(q,ne,ne+ae)},c:function(q){const ne=A.length,ae=Math.max(q>>>0,Math.ceil(1.2*ne)),le=Math.ceil((ae-ne)/65536);try{return O.grow(le),B(),!0}catch{return!1}},b:V}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(M,W):M.then(q=>q.arrayBuffer()).then(q=>WebAssembly.instantiate(q,W))).then(q=>{const{Rb:ne,Qb:ae,P:le,T:ie,X:ue,Ja:Ee,La:Be,Qa:je,Va:Ge,Wa:tt,eb:Ze,jb:nt,f:Xe,e:ut,yb:bt,zb:At,Ab:lt,Bb:ft,Db:Ft,Gb:Jt}=q.instance.exports;O=ut;const tr=(()=>{let lr=0,pr=0,er=0,or=0;return kr=>{er&&(ne(or),ne(lr),pr+=er,er=lr=0),lr||(pr+=128,lr=ae(pr));const Hr=kr.length+7&-8;let Ur=lr;Hr>=pr&&(er=Hr,Ur=or=ae(Hr));for(let qr=0;qr<kr.length;qr++)A[Ur+qr]=kr[qr];return Ur}})();return B(),Xe(),{memory:ut,_free:ne,_malloc:ae,Mesh:class{constructor(){this.ptr=le()}destroy(){ie(this.ptr)}},Decoder:class{constructor(){this.ptr=Ee()}destroy(){nt(this.ptr)}DecodeArrayToMesh(lr,pr,er){const or=tr(lr),kr=Be(this.ptr,or,pr,er.ptr);return!!ue(kr)}GetAttributeByUniqueId(lr,pr){return{ptr:je(this.ptr,lr.ptr,pr)}}GetTrianglesUInt16Array(lr,pr,er){Ge(this.ptr,lr.ptr,pr,er)}GetTrianglesUInt32Array(lr,pr,er){tt(this.ptr,lr.ptr,pr,er)}GetAttributeDataArrayForAllPoints(lr,pr,er,or,kr){Ze(this.ptr,lr.ptr,pr.ptr,er,or,kr)}},DT_INT8:bt(),DT_UINT8:At(),DT_INT16:lt(),DT_UINT16:ft(),DT_UINT32:Ft(),DT_FLOAT32:Jt()}})}(fetch(V2())),aC.then(M=>{Sh=M,aC=void 0}))}()),u)for(let M=0;M<u.length;M++)b.push(XJ(u[M],a,M,i));return(b.length?Promise.all(b):Promise.resolve()).then(()=>{if(T&&h)for(const{primitives:M}of h)for(const A of M)KJ(A,a);return a})})}function Z2(r){return fetch(r).then(e=>e.arrayBuffer()).then(e=>K2(e,0,r))}class X2{constructor(e,i,a){if(this.triangleCount=i.length/3,this.min=new oe(0,0),this.max=new oe(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||e.length===0||a===0)return;const l=e.map(T=>T.x),u=e.map(T=>T.y);this.min=new oe(Math.min(...l),Math.min(...u)),this.max=new oe(Math.max(...l),Math.max(...u));const h=this.max.sub(this.min);h.x=Math.max(h.x,1),h.y=Math.max(h.y,1);const g=Math.max(h.x,h.y)/a;this.cellsX=Math.max(1,Math.ceil(h.x/g)),this.cellsY=Math.max(1,Math.ceil(h.y/g)),this.xScale=1/g,this.yScale=1/g;const x=[];for(let T=0;T<this.triangleCount;T++){const M=e[i[3*T+0]].sub(this.min),A=e[i[3*T+1]].sub(this.min),O=e[i[3*T+2]].sub(this.min),B=rm(Math.floor(Math.min(M.x,A.x,O.x)),this.xScale,this.cellsX),V=rm(Math.floor(Math.max(M.x,A.x,O.x)),this.xScale,this.cellsX),W=rm(Math.floor(Math.min(M.y,A.y,O.y)),this.yScale,this.cellsY),q=rm(Math.floor(Math.max(M.y,A.y,O.y)),this.yScale,this.cellsY),ne=new oe(0,0),ae=new oe(0,0),le=new oe(0,0),ie=new oe(0,0);for(let ue=W;ue<=q;++ue){ne.y=ae.y=ue*g,le.y=ie.y=(ue+1)*g;for(let Ee=B;Ee<=V;++Ee)ne.x=le.x=Ee*g,ae.x=ie.x=(Ee+1)*g,(e3(M,A,O,ne,ae,ie)||e3(M,A,O,ne,ie,le))&&x.push({cellIdx:ue*this.cellsX+Ee,triIdx:T})}}if(x.length===0)return;x.sort((T,M)=>T.cellIdx-M.cellIdx||T.triIdx-M.triIdx);let b=0;for(;b<x.length;){const T=x[b].cellIdx,M={start:this.payload.length,len:0};for(;b<x.length&&x[b].cellIdx===T;)++M.len,this.payload.push(x[b++].triIdx);this.cells[T]=M}}query(e,i,a){if(this.triangleCount===0||this.cells.length===0||e.x>this.max.x||this.min.x>i.x||e.y>this.max.y||this.min.y>i.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let x=0;x<this.lookup.length;x++)this.lookup[x]=0;const l=rm(e.x-this.min.x,this.xScale,this.cellsX),u=rm(i.x-this.min.x,this.xScale,this.cellsX),h=rm(e.y-this.min.y,this.yScale,this.cellsY),g=rm(i.y-this.min.y,this.yScale,this.cellsY);for(let x=h;x<=g;x++)for(let b=l;b<=u;b++){const T=this.cells[x*this.cellsX+b];if(T)for(let M=0;M<T.len;M++){const A=this.payload[T.start+M],O=Math.floor(A/8),B=1<<A%8;if(!(this.lookup[O]&B)&&(this.lookup[O]|=B,a.push(A),a.length===this.triangleCount))return}}}}function rm(r,e,i){return Math.max(0,Math.min(i-1,Math.floor(r*e)))}function Vg(r,e){const i=r.json.bufferViews[e.bufferView];return new Z3[e.componentType](r.buffers[i.buffer],(e.byteOffset||0)+(i.byteOffset||0),e.count*X3[e.type])}function YJ(r,e,i){const a=r.indices,l=r.attributes,u={};u.indexArray=new Ca;const h=e.json.accessors[a],g=h.count/3;u.indexArray.reserve(g);const x=Vg(e,h);for(let A=0;A<g;A++)u.indexArray.emplaceBack(x[3*A],x[3*A+1],x[3*A+2]);u.indexArray._trim(),u.vertexArray=new yl;const b=e.json.accessors[l.POSITION];u.vertexArray.reserve(b.count);const T=Vg(e,b);for(let A=0;A<b.count;A++)u.vertexArray.emplaceBack(T[3*A],T[3*A+1],T[3*A+2]);if(u.vertexArray._trim(),u.aabb=new Xn(b.min,b.max),u.centroid=function(A,O){const B=[0,0,0],V=A.length;if(V>0){for(let W=0;W<V;W++){const q=3*A[W];B[0]+=O[q],B[1]+=O[q+1],B[2]+=O[q+2]}B[0]/=V,B[1]/=V,B[2]/=V}return B}(x,T),l.COLOR_0!==void 0){const A=e.json.accessors[l.COLOR_0],O=X3[A.type];if(A.componentType===K3){u.colorArray=O===3?new yl:new $u,u.colorArray.reserve(A.count);const B=Vg(e,A);if(O===3)for(let V=0;V<A.count;V++)u.colorArray.emplaceBack(B[3*V],B[3*V+1],B[3*V+2]);else for(let V=0;V<A.count;V++)u.colorArray.emplaceBack(B[4*V],B[4*V+1],B[4*V+2],B[4*V+3]);u.colorArray._trim()}else if(A.componentType===W3&&O===4){u.colorArray=new $u,u.colorArray.resize(A.count);const B=Vg(e,A),V=1/65535,W=u.colorArray.float32;for(let q=0;q<4*B.length;++q)W[q]=B[q]*V}else ve(`glTF color buffer parsing for accessor ${JSON.stringify(A)} is not supported`)}if(l.NORMAL!==void 0){u.normalArray=new yl;const A=e.json.accessors[l.NORMAL];u.normalArray.reserve(A.count);const O=Vg(e,A);for(let B=0;B<A.count;B++)u.normalArray.emplaceBack(O[3*B],O[3*B+1],O[3*B+2]);u.normalArray._trim()}if(l.TEXCOORD_0!==void 0&&i.length>0){u.texcoordArray=new wg;const A=e.json.accessors[l.TEXCOORD_0];u.texcoordArray.reserve(A.count);const O=Vg(e,A);for(let B=0;B<A.count;B++)u.texcoordArray.emplaceBack(O[2*B],O[2*B+1]);u.texcoordArray._trim()}const M=r.material;return u.material=function(A,O){const{emissiveFactor:B=[0,0,0],alphaMode:V="OPAQUE",alphaCutoff:W=.5,normalTexture:q,occlusionTexture:ne,emissiveTexture:ae,doubleSided:le}=A,{baseColorFactor:ie=[1,1,1,1],metallicFactor:ue=1,roughnessFactor:Ee=1,baseColorTexture:Be,metallicRoughnessTexture:je}=A.pbrMetallicRoughness||{};return{pbrMetallicRoughness:{baseColorFactor:new Qn(...ie),metallicFactor:ue,roughnessFactor:Ee,baseColorTexture:Be?O[Be.index]:void 0,metallicRoughnessTexture:je?O[je.index]:void 0},doubleSided:le,emissiveFactor:B,alphaMode:V,alphaCutoff:W,normalTexture:q?O[q.index]:void 0,occlusionTexture:ne?O[ne.index]:void 0,emissionTexture:ae?O[ae.index]:void 0,defined:A.defined===void 0}}(M!==void 0?e.json.materials[M]:{defined:!1},i),l._FEATURE_RGBA4444!==void 0&&(u.featureData=new Uint32Array(Vg(e,e.json.accessors[l._FEATURE_RGBA4444]).buffer)),u}function Y2(r,e,i){const{matrix:a,rotation:l,translation:u,scale:h,mesh:g,extras:x,children:b}=r,T={};if(T.matrix=a||U.fromRotationTranslationScale([],l||[0,0,0,1],u||[0,0,0],h||[1,1,1]),g!==void 0){T.meshes=i[g];const M=T.anchor=[0,0];for(const A of T.meshes){const{min:O,max:B}=A.aabb;M[0]+=O[0]+B[0],M[1]+=O[1]+B[1]}M[0]=Math.floor(M[0]/T.meshes.length/2),M[1]=Math.floor(M[1]/T.meshes.length/2)}if(x&&(x.id&&(T.id=x.id),x.lights&&(T.lights=function(M){if(!M.length)return[];const A=function(q){const ne=atob(q),ae=new Uint8Array(ne.length);for(let le=0;le<ne.length;le++)ae[le]=ne.codePointAt(le);return ae}(M),O=[],B=A.length/24,V=new Uint16Array(A.buffer),W=new Float32Array(A.buffer);for(let q=0;q<B;q++){const ne=V[2*q*6]/30,ae=V[2*q*6+1]/30,le=V[2*q*6+10]/100,ie=W[6*q+1],ue=W[6*q+2],Ee=W[6*q+3],Be=W[6*q+4],je=Ee-ie,Ge=Be-ue,tt=Math.hypot(je,Ge);O.push({pos:[ie+.5*je,ue+.5*Ge,ae],normal:[Ge/tt,-je/tt,0],width:tt,height:ne,depth:le,points:[ie,ue,Ee,Be]})}return O}(x.lights))),b){const M=[];for(const A of b)M.push(Y2(e.json.nodes[A],e,i));T.children=M}return T}function JJ(r){if(r.vertices.length===0||r.indices.length===0)return null;const[e,i]=[r.vertices[0].clone(),r.vertices[0].clone()];for(let h=1;h<r.vertices.length;++h){const g=r.vertices[h];e.x=Math.min(e.x,g.x),e.y=Math.min(e.y,g.y),i.x=Math.max(i.x,g.x),i.y=Math.max(i.y,g.y)}const a=Math.ceil(Math.max(i.x-e.x,i.y-e.y)/256),l=Math.max(8,a),u=new X2(r.vertices,r.indices,l);return{vertices:r.vertices,indices:r.indices,grid:u,min:e,max:i}}function QJ(r){if(!r.extras||!r.extras.ground)return null;const e=r.extras.ground;if(!e||!Array.isArray(e)||e.length===0)return null;const i=e[0];if(!i||!Array.isArray(i)||i.length===0)return null;const a=[];for(const h of i){if(!Array.isArray(h)||h.length!==2)continue;const g=h[0],x=h[1];typeof g=="number"&&typeof x=="number"&&a.push(new oe(g,x))}if(a.length<3)return null;a.length>1&&a[a.length-1].equals(a[0])&&a.pop();let l=0;for(let h=0;h<a.length;h++){const g=a[h],x=a[(h+1)%a.length],b=a[(h+2)%a.length];l+=(g.x-x.x)*(b.y-x.y)-(b.x-x.x)*(g.y-x.y)}l>0&&a.reverse();const u=wS(a.flatMap(h=>[h.x,h.y]),[]);return u.length===0?null:{vertices:a,indices:u}}function eQ(r){const e=[],i=[];let a=0;for(const l of r){a=e.length;const u=l.vertexArray.float32,h=l.indexArray.uint16;for(let g=0;g<l.vertexArray.length;g++)e.push(new oe(u[3*g+0],u[3*g+1]));for(let g=0;g<3*l.indexArray.length;g++)i.push(h[g]+a)}if(i.length%3!=0)return null;for(let l=0;l<i.length;l+=3){const u=e[i[l+0]],h=e[i[l+1]],g=e[i[l+2]];(u.x-h.x)*(g.y-h.y)-(g.x-h.x)*(u.y-h.y)>0&&([i[l+1],i[l+2]]=[i[l+2],i[l+1]])}return{vertices:e,indices:i}}function J3(r){const e=function(x,b){const T=[],M=S.WebGL2RenderingContext;if(x.json.textures)for(const A of x.json.textures){const O={magFilter:M.LINEAR,minFilter:M.NEAREST,wrapS:M.REPEAT,wrapT:M.REPEAT};A.sampler!==void 0&&Object.assign(O,x.json.samplers[A.sampler]),T.push({image:b[A.source],sampler:O,uploaded:!1})}return T}(r,r.images),i=function(x,b){const T=[];for(const M of x.json.meshes){const A=[];for(const O of M.primitives)A.push(YJ(O,x,b));T.push(A)}return T}(r,e),{scenes:a,scene:l,nodes:u}=r.json,h=a?a[l||0].nodes:u,g=[];for(const x of h)g.push(Y2(u[x],r,i));return function(x,b,T){const M={},A=new Set;for(let O=0;O<x.length;O++){const B=T[b[O]];if(!B.extras)continue;const V=B.extras["mapbox:footprint:version"],W=B.extras["mapbox:footprint:id"];(V||W)&&A.add(O),V==="1.0.0"&&W&&(M[W]=O)}for(let O=0;O<x.length;O++){if(A.has(O))continue;const B=x[O],V=T[b[O]];if(!V.extras)continue;let W=null;B.id in M&&(W=eQ(x[M[B.id]].meshes)),W||(W=QJ(V)),W&&(B.footprint=JJ(W))}if(A.size>0){const O=Array.from(A.values()).sort((B,V)=>B-V);for(let B=O.length-1;B>=0;B--)x.splice(O[B],1)}}(g,h,r.json.nodes),g}function tQ(r){r.heightmap=new Float32Array(4096),r.heightmap.fill(-1);const e=r.vertexArray.float32,i=r.aabb.min[0]-1,a=r.aabb.min[1]-1,l=Bg/(r.aabb.max[0]-i+2),u=Bg/(r.aabb.max[1]-a+2);for(let h=0;h<e.length;h+=3){const g=e[h+2],x=(e[h+0]-i)*l|0,b=(e[h+1]-a)*u|0;g>r.heightmap[b*Bg+x]&&(r.heightmap[b*Bg+x]=g)}}function rQ(r,e){const i={};i.indexArray=new Ca,i.indexArray.reserve(4*r.length),i.vertexArray=new yl,i.vertexArray.reserve(10*r.length),i.colorArray=new $u,i.vertexArray.reserve(10*r.length);let a=0;for(const h of r){const g=Math.min(10,Math.max(4,1.3*h.height))*e,x=[-h.normal[1],h.normal[0],0],b=Math.min(.29,.1*h.width/h.depth),T=h.width-2*h.depth*e*(b+.01),M=ce.scaleAndAdd([],h.pos,x,T/2),A=ce.scaleAndAdd([],h.pos,x,-T/2),O=[M[0],M[1],M[2]+h.height],B=[A[0],A[1],A[2]+h.height],V=ce.scaleAndAdd([],h.normal,x,b);ce.scale(V,V,g);const W=ce.scaleAndAdd([],h.normal,x,-b);ce.scale(W,W,g),ce.add(V,M,V),ce.add(W,A,W),M[2]+=.1,A[2]+=.1,i.vertexArray.emplaceBack(V[0],V[1],V[2]),i.vertexArray.emplaceBack(W[0],W[1],W[2]),i.vertexArray.emplaceBack(M[0],M[1],M[2]),i.vertexArray.emplaceBack(A[0],A[1],A[2]),i.vertexArray.emplaceBack(O[0],O[1],O[2]),i.vertexArray.emplaceBack(B[0],B[1],B[2]),i.vertexArray.emplaceBack(M[0],M[1],M[2]),i.vertexArray.emplaceBack(A[0],A[1],A[2]),i.vertexArray.emplaceBack(V[0],V[1],V[2]),i.vertexArray.emplaceBack(W[0],W[1],W[2]);const q=T/g/2;i.colorArray.emplaceBack(-q-b,-1,q,.8),i.colorArray.emplaceBack(q+b,-1,q,.8),i.colorArray.emplaceBack(-q,0,q,1.3),i.colorArray.emplaceBack(q,0,q,1.3),i.colorArray.emplaceBack(q+b,-.8,q,.7),i.colorArray.emplaceBack(q+b,-.8,q,.7),i.colorArray.emplaceBack(0,0,q,1.3),i.colorArray.emplaceBack(0,0,q,1.3),i.colorArray.emplaceBack(q+b,-1.2,q,.8),i.colorArray.emplaceBack(q+b,-1.2,q,.8),i.indexArray.emplaceBack(6+a,4+a,8+a),i.indexArray.emplaceBack(7+a,9+a,5+a),i.indexArray.emplaceBack(0+a,1+a,2+a),i.indexArray.emplaceBack(1+a,3+a,2+a),a+=10}const l={defined:!0,emissiveFactor:[0,0,0]},u={};return u.baseColorFactor=Qn.white,l.pbrMetallicRoughness=u,i.material=l,i.aabb=new Xn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),i}rn(X2,"TriangleGridIndex");const Q3={vector:j2,raster:fx,"raster-dem":class extends fx{constructor(r,e,i,a){super(r,e,i,a),this.type="raster-dem",this.maxzoom=22,this._options=ct({type:"raster-dem"},e),this.encoding=e.encoding||"mapbox"}loadTile(r,e){const i=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);r.request=Et(this.map._requestManager.transformRequest(i,Pe.Tile),function(u,h,g,x){if(delete r.request,r.aborted)r.state="unloaded",e(null);else if(u)r.state="errored",e(u);else if(h){this.map._refreshExpiredTiles&&r.setExpiryData({cacheControl:g,expires:x});const T=S.ImageBitmap&&h instanceof S.ImageBitmap&&(U3==null&&(U3=S.OffscreenCanvas&&new S.OffscreenCanvas(1,1).getContext("2d")&&typeof S.createImageBitmap=="function"),U3),M=1-(h.width-((b=h.width)<=1?1:Math.pow(2,Math.floor(Math.log(b)/Math.LN2))))/2;M<1||r.neighboringTiles||(r.neighboringTiles=this._getNeighboringTiles(r.tileID));const A=T?h:Qr.getImageData(h,M),O={uid:r.uid,coord:r.tileID,source:this.id,scope:this.scope,rawImageData:A,encoding:this.encoding,padding:M,convertToFloat:a};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",O,l.bind(this),void 0,!0))}var b}.bind(this));const a=this.map?.painter?.terrainUseFloatDEM();function l(u,h){u&&(r.state="errored",e(u)),h&&(r.dem=h,r.dem.onDeserialize(),r.needsHillshadePrepare=!0,r.needsDEMTextureUpload=!0,r.state="loaded",e(null))}}_getNeighboringTiles(r){const e=r.canonical,i=Math.pow(2,e.z),a=(e.x-1+i)%i,l=e.x===0?r.wrap-1:r.wrap,u=(e.x+1+i)%i,h=e.x+1===i?r.wrap+1:r.wrap,g={};return g[new xr(r.overscaledZ,l,e.z,a,e.y).key]={backfilled:!1},g[new xr(r.overscaledZ,h,e.z,u,e.y).key]={backfilled:!1},e.y>0&&(g[new xr(r.overscaledZ,l,e.z,a,e.y-1).key]={backfilled:!1},g[new xr(r.overscaledZ,r.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},g[new xr(r.overscaledZ,h,e.z,u,e.y-1).key]={backfilled:!1}),e.y+1<i&&(g[new xr(r.overscaledZ,l,e.z,a,e.y+1).key]={backfilled:!1},g[new xr(r.overscaledZ,r.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},g[new xr(r.overscaledZ,h,e.z,u,e.y+1).key]={backfilled:!1}),g}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.hillshadeFBO&&(r.hillshadeFBO.destroy(),delete r.hillshadeFBO),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded"}},geojson:class extends mo{constructor(r,e,i,a){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(a),this._data=e.data,this._options=ct({},e),this._collectResourceTiming=e.collectResourceTiming,e.maxzoom!==void 0&&(this.maxzoom=e.maxzoom),e.type&&(this.type=e.type),e.attribution&&(this.attribution=e.attribution),this.promoteId=e.promoteId;const l=Zt/this.tileSize;this.workerOptions=ct({source:this.id,scope:this.scope,cluster:e.cluster||!1,geojsonVtOptions:{buffer:(e.buffer!==void 0?e.buffer:128)*l,tolerance:(e.tolerance!==void 0?e.tolerance:.375)*l,extent:Zt,maxZoom:this.maxzoom,lineMetrics:e.lineMetrics||!1,generateId:e.generateId||!1},superclusterOptions:{maxZoom:e.clusterMaxZoom!==void 0?e.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,e.clusterMinPoints||2),extent:Zt,radius:(e.clusterRadius!==void 0?e.clusterRadius:50)*l,log:!1,generateId:e.generateId||!1},clusterProperties:e.clusterProperties,filter:e.filter},e.workerOptions)}onAdd(r){this.map=r,this.setData(this._data)}setData(r){return this._data=r,this._updateWorkerData(),this}getClusterExpansionZoom(r,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id,scope:this.scope},e),this}getClusterChildren(r,e){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id,scope:this.scope},e),this}getClusterLeaves(r,e,i,a){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:r,limit:e,offset:i},a),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new vr("dataloading",{dataType:"source"})),this._loaded=!1;const r=ct({},this.workerOptions);r.scope=this.scope;const e=this._data;typeof e=="string"?(r.request=this.map._requestManager.transformRequest(Qr.resolveURL(e),Pe.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(e),this._pendingLoad=this.actor.send(`${this.type}.loadData`,r,(i,a)=>{if(this._loaded=!0,this._pendingLoad=null,i)this.fire(new kn(i));else{const l={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&a&&a.resourceTiming&&a.resourceTiming[this.id]&&(l.resourceTiming=a.resourceTiming[this.id]),this.fire(new vr("data",l)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(r,e){const i=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const a={type:this.type,uid:r.uid,tileID:r.tileID,tileZoom:r.tileZoom,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:Qr.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};r.request=this.actor.send(i,a,(l,u)=>(delete r.request,r.unloadVectorData(),r.aborted?e(null):l?e(l):(r.loadVectorData(u,this.map.painter,i==="reloadTile"),e(null))),void 0,i==="loadTile")}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id,scope:this.scope})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return ct({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ed{constructor(r,e,i,a){super(r,e,i,a),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const r=this.options;this.urls=[];for(const e of r.urls)this.urls.push(this.map._requestManager.transformRequest(e,Pe.Source).url);(function(e,i){const a=S.document.createElement("video");a.muted=!0,a.onloadstart=function(){i(null,a)};for(let l=0;l<e.length;l++){const u=S.document.createElement("source");Ke(e[l])||(a.crossOrigin="Anonymous"),u.src=e[l],a.appendChild(u)}})(this.urls,(e,i)=>{this._loaded=!0,e?this.fire(new kn(e)):i&&(this.video=i,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const e=this.video.seekable;r<e.start(0)||r>e.end(0)?this.fire(new kn(new Zr(`sources.${this.id}`,null,`Playback for this video can be set only between the ${e.start(0)} and ${e.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,e=r.gl;this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new ja(r,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(r)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ed,model:class extends mo{constructor(r,e,i,a){super(),this.id=r,this.type="model",this.models=[],this._loaded=!1,this._options=e}load(){const r=[];for(const e in this._options.models){const i=this._options.models[e],a=Z2(this.map._requestManager.transformRequest(i.uri,Pe.Model).url).then(l=>{if(!l)return;const u=J3(l),h=new G6(e,i.position,i.orientation,u);h.computeBoundsAndApplyParent(),this.models.push(h)}).catch(l=>{this.fire(new kn(new Error(`Could not load model ${e} from ${i.uri}: ${l.message}`)))});r.push(a)}return Promise.allSettled(r).then(()=>{this._loaded=!0,this.fire(new vr("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(e=>{this.fire(new kn(new Error(`Could not load models: ${e.message}`)))})}onAdd(r){this.map=r,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(r,e){}serialize(){return{type:"model"}}},"batched-model":class extends mo{constructor(r,e,i,a){super(),this.type="batched-model",this.id=r,this.tileSize=512,this._options=e,this.tiles=this._options.tiles,this.maxzoom=e.maxzoom||19,this.minzoom=e.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=i,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(a)}onAdd(r){this.map=r,this.load()}load(r){this._loaded=!1,this.fire(new vr("dataloading",{dataType:"source"}));const e=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=j3(this._options,this.map._requestManager,e,i,(a,l)=>{this._tileJSONRequest=null,this._loaded=!0,a?(e&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${e}`),i&&i.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${i}`),this.fire(new kn(a))):l&&(ct(this,l),l.bounds&&(this.tileBounds=new oC(l.bounds,this.minzoom,this.maxzoom)),Li(l.tiles,this.map._requestManager._customAccessToken),this.fire(new vr("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new vr("data",{dataType:"source",sourceDataType:"content"}))),r&&r(a)})}hasTransition(){return!1}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loaded(){return this._loaded}loadTile(r,e){const i=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(i,Pe.Tile),data:void 0,uid:r.uid,tileID:r.tileID,tileZoom:r.tileZoom,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:r.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(r.actor&&r.state!=="expired")if(r.state==="loading")r.reloadCallback=e;else{if(r.buckets){const u=Object.values(r.buckets);for(const h of u)h.dirty=!0;return void(r.state="loaded")}r.request=r.actor.send("reloadTile",a,l.bind(this))}else r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",a,l.bind(this),void 0,!0);function l(u,h){return r.aborted?e(null):u&&u.status!==404?e(u):(h&&(h.resourceTiming&&(r.resourceTiming=h.resourceTiming),this.map._refreshExpiredTiles&&r.setExpiryData(h),r.buckets={...r.buckets,...h.buckets}),r.state="loaded",void e(null))}}serialize(){return ct({},this._options)}},canvas:class extends Ed{constructor(r,e,i,a){super(r,e,i,a),e.coordinates?Array.isArray(e.coordinates)&&e.coordinates.length===4&&!e.coordinates.some(l=>!Array.isArray(l)||l.length!==2||l.some(u=>typeof u!="number"))||this.fire(new kn(new Zr(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new kn(new Zr(`sources.${r}`,null,'missing required property "coordinates"'))),e.animate&&typeof e.animate!="boolean"&&this.fire(new kn(new Zr(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),e.canvas?typeof e.canvas=="string"||e.canvas instanceof S.HTMLCanvasElement||this.fire(new kn(new Zr(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new kn(new Zr(`sources.${r}`,null,'missing required property "canvas"'))),this.options=e,this.animate=e.animate===void 0||e.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof S.HTMLCanvasElement?this.options.canvas:S.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new kn(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const e=this.map.painter.context;this.texture?!r&&!this._playing||this.texture instanceof qS||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ja(e,this.canvas,e.gl.RGBA,{premultiply:!0}),this._prepareData(e)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}},custom:class extends mo{constructor(r,e,i,a){super(),this.id=r,this.type="custom",this._dataType="raster",this._dispatcher=i,this._implementation=e,this.setEventedParent(a),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new kn(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new kn(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new oC(this._implementation.bounds,this.minzoom,this.maxzoom)),e.update=this._update.bind(this),e.clearTiles=this._clearTiles.bind(this),e.coveringTiles=this._coveringTiles.bind(this),ct(this,Ct(e,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return Ct(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new vr("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new vr("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(r){this._map=r,this._loaded=!1,this.fire(new vr("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(r),this.load()}onRemove(r){this._implementation.onRemove&&this._implementation.onRemove(r)}hasTile(r){if(this._implementation.hasTile){const{x:e,y:i,z:a}=r.canonical;return this._implementation.hasTile({x:e,y:i,z:a})}return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,e){const{x:i,y:a,z:l}=r.tileID.canonical,u=new S.AbortController;r.request=Promise.resolve(this._implementation.loadTile({x:i,y:a,z:l},{signal:u.signal})).then(function(h){return delete r.request,r.aborted?(r.state="unloaded",e(null)):h===void 0?(r.state="errored",e(null)):h===null?(this.loadTileData(r,{width:this.tileSize,height:this.tileSize,data:null}),r.state="loaded",e(null)):function(g){return g instanceof S.ImageData||g instanceof S.HTMLCanvasElement||g instanceof S.ImageBitmap||g instanceof S.HTMLImageElement}(h)?(this.loadTileData(r,h),r.state="loaded",void e(null)):(r.state="errored",e(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(h=>{h.code!==20&&(r.state="errored",e(h))}),r.request.cancel=()=>u.abort()}loadTileData(r,e){fx.loadTileData(r,e,this._map.painter)}unloadTileData(r){fx.unloadTileData(r,this._map.painter)}unloadTile(r,e){if(this.unloadTileData(r),this._implementation.unloadTile){const{x:i,y:a,z:l}=r.tileID.canonical;this._implementation.unloadTile({x:i,y:a,z:l})}e()}abortTile(r,e){r.request&&r.request.cancel&&(r.request.cancel(),delete r.request),e()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(r=>({x:r.canonical.x,y:r.canonical.y,z:r.canonical.z}))}_clearTiles(){const r=us(this.id,this.scope);this._map.style.clearSource(r)}_update(){this.fire(new vr("data",{dataType:"source",sourceDataType:"content"}))}}},e4=function(r,e,i,a){const l=new Q3[e.type](r,e,i,a);if(l.id!==r)throw new Error(`Expected Source id to be ${r} instead of ${l.id}`);return Dt(["load","abort","unload","serialize","prepare"],l),l};function nQ(r,e){const i=U.identity([]);return U.scale(i,i,[.5*r.width,.5*-r.height,1]),U.translate(i,i,[1,-1,0]),U.multiply(i,i,r.calculateProjMatrix(e.toUnwrapped())),Float32Array.from(i)}function iQ(r,e,i,a,l,u,h,g=!1){const x=r.tilesIn(a,h,g);x.sort(J2);const b=[];for(const M of x)b.push({wrappedTileID:M.tile.tileID.wrapped().key,queryResults:M.tile.queryRenderedFeatures(e,i,r._state,M,l,u,nQ(r.transform,M.tile.tileID),g)});const T=function(M){const A={},O={};for(const B of M){const V=B.queryResults,W=B.wrappedTileID,q=O[W]=O[W]||{};for(const ne in V){const ae=V[ne],le=q[ne]=q[ne]||{},ie=A[ne]=A[ne]||[];for(const ue of ae)le[ue.featureIndex]||(le[ue.featureIndex]=!0,ie.push(ue))}}return A}(b);for(const M in T)T[M].forEach(A=>{const O=A.feature,B=O.layer;B&&B.type!=="background"&&B.type!=="sky"&&B.type!=="slot"&&(O.source=B.source,B["source-layer"]&&(O.sourceLayer=B["source-layer"]),O.state=O.id!==void 0?r.getFeatureState(B["source-layer"],O.id):{})});return T}function oQ(r,e){const i=r.getRenderableIds().map(u=>r.getTileByID(u)),a=[],l={};for(let u=0;u<i.length;u++){const h=i[u],g=h.tileID.canonical.key;l[g]||(l[g]=!0,h.querySourceFeatures(a,e))}return a}function J2(r,e){const i=r.tileID,a=e.tileID;return i.overscaledZ-a.overscaledZ||i.canonical.y-a.canonical.y||i.wrap-a.wrap||i.canonical.x-a.canonical.x}class aQ{constructor(e){this.style=e}processLayersChanged(){this.layers=[];for(const e in this.style._mergedLayers){const i=this.style._mergedLayers[e];if(i.type==="fill-extrusion")this.layers.push(i);else if(i.type==="model"){const a=this.style.getLayerSource(i);a&&a.type==="batched-model"&&this.layers.push(i)}}}updateZOffset(e,i){this.currentBuildingBuckets=[];for(let l=0;l<this.layers.length;++l){const u=this.layers[l],h=this.style.getLayerSourceCache(u);let g=1;u.type==="fill-extrusion"&&(g=u.paint.get("fill-extrusion-opacity")>0?u.paint.get("fill-extrusion-vertical-scale"):0);let x=h?h.getTile(i):null;if(!x&&h&&i.canonical.z>h.getSource().minzoom){let b=i.scaledTo(Math.min(h.getSource().maxzoom,i.overscaledZ-1));for(;b.overscaledZ>=h.getSource().minzoom&&(x=h.getTile(b),!x&&b.overscaledZ!==0);)b=b.scaledTo(b.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:x?x.getBucket(u):null,tileID:x?x.tileID:i,verticalScale:g})}e.hasAnyZOffset=!1;let a=!1;for(let l=0;l<e.symbolInstances.length;l++){const u=e.symbolInstances.get(l),h=u.zOffset,g=this._getHeightAtTileOffset(i,u.tileAnchorX,u.tileAnchorY);u.zOffset=g!==-1?g:h,a||h===u.zOffset||(a=!0),e.hasAnyZOffset||u.zOffset===0||(e.hasAnyZOffset=!0)}a&&(e.zOffsetBuffersNeedUpload=!0,e.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(e,i,a,l){let u=i,h=a;if(e.canonical.z!==l.canonical.z){const g=l.canonical,x=1/(1<<e.canonical.z-g.z);u=(i+e.canonical.x*Zt)*x-g.x*Zt|0,h=(a+e.canonical.y*Zt)*x-g.y*Zt|0}return{tileX:u,tileY:h}}_getHeightAtTileOffset(e,i,a){let l;for(let u=0;u<this.layers.length;++u){if(this.layers[u].type!=="fill-extrusion")continue;const{bucket:h,tileID:g,verticalScale:x}=this.currentBuildingBuckets[u];if(!h)continue;const{tileX:b,tileY:T}=this._mapCoordToOverlappingTile(e,i,a,g),M=h.getHeightAtTileCoord(b,T);if(M&&M.height!==void 0){if(!M.hidden)return M.height*x;l=M.height}}for(let u=0;u<this.layers.length;++u){if(this.layers[u].type!=="model")continue;const{bucket:h,tileID:g}=this.currentBuildingBuckets[u];if(!h)continue;const{tileX:x,tileY:b}=this._mapCoordToOverlappingTile(e,i,a,g),T=h.getHeightAtTileCoord(x,b);if(T&&!T.hidden)return T.height===void 0&&l!==void 0?Math.min(T.maxHeight,l)*T.verticalScale:(T.height||0)*T.verticalScale}return-1}}var Q2=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function sQ(r,e){const i={};for(const a in r)a!=="ref"&&(i[a]=r[a]);return Q2.forEach(a=>{a in e&&(i[a]=e[a])}),i}function eL(r){r=r.slice();const e=Object.create(null);for(let i=0;i<r.length;i++)e[r[i].id]=r[i];for(let i=0;i<r.length;i++)"ref"in r[i]&&(r[i]=sQ(r[i],e[r[i].ref]));return r}const Ni={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",setImportUrl:"setImportUrl",setImportData:"setImportData",setImportConfig:"setImportConfig"};function tL(r,e,i){i.push({command:Ni.addSource,args:[r,e[r]]})}function rL(r,e,i){e.push({command:Ni.removeSource,args:[r]}),i[r]=!0}function lQ(r,e,i,a){rL(r,i,a),tL(r,e,i)}function cQ(r,e,i){let a;for(a in r[i])if(r[i].hasOwnProperty(a)&&a!=="data"&&!Re(r[i][a],e[i][a]))return!1;for(a in e[i])if(e[i].hasOwnProperty(a)&&a!=="data"&&!Re(r[i][a],e[i][a]))return!1;return!0}function sC(r,e,i,a,l,u){let h;for(h in e=e||{},r=r||{})r.hasOwnProperty(h)&&(Re(r[h],e[h])||i.push({command:u,args:[a,h,e[h],l]}));for(h in e)e.hasOwnProperty(h)&&!r.hasOwnProperty(h)&&(Re(r[h],e[h])||i.push({command:u,args:[a,h,e[h],l]}))}function lC(r){return r.id}function cC(r,e){return r[e.id]=e,r}class uQ{constructor(e,i){this.reset(e,i)}reset(e,i){this.points=e||[],this._distances=[0];for(let a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(i||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=Qe(e,0,1);let i=1,a=this._distances[i];const l=e*this.paddedLength+this.padding;for(;a<l&&i<this._distances.length;)a=this._distances[++i];const u=i-1,h=this._distances[u],g=a-h,x=g>0?(l-h)/g:0;return this.points[u].mult(1-x).add(this.points[i].mult(x))}}class nL{constructor(e,i,a){const l=this.boxCells=[],u=this.circleCells=[];this.xCellCount=Math.ceil(e/a),this.yCellCount=Math.ceil(i/a);for(let h=0;h<this.xCellCount*this.yCellCount;h++)l.push([]),u.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=i,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,i,a,l,u){this._forEachCell(i,a,l,u,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(l),this.bboxes.push(u)}insertCircle(e,i,a,l){this._forEachCell(i-l,a-l,i+l,a+l,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(i),this.circles.push(a),this.circles.push(l)}_insertBoxCell(e,i,a,l,u,h){this.boxCells[u].push(h)}_insertCircleCell(e,i,a,l,u,h){this.circleCells[u].push(h)}_query(e,i,a,l,u,h){if(a<0||e>this.width||l<0||i>this.height)return!u&&[];const g=[];if(e<=0&&i<=0&&this.width<=a&&this.height<=l){if(u)return!0;for(let x=0;x<this.boxKeys.length;x++)g.push({key:this.boxKeys[x],x1:this.bboxes[4*x],y1:this.bboxes[4*x+1],x2:this.bboxes[4*x+2],y2:this.bboxes[4*x+3]});for(let x=0;x<this.circleKeys.length;x++){const b=this.circles[3*x],T=this.circles[3*x+1],M=this.circles[3*x+2];g.push({key:this.circleKeys[x],x1:b-M,y1:T-M,x2:b+M,y2:T+M})}return h?g.filter(h):g}return this._forEachCell(e,i,a,l,this._queryCell,g,{hitTest:u,seenUids:{box:{},circle:{}}},h),u?g.length>0:g}_queryCircle(e,i,a,l,u){const h=e-a,g=e+a,x=i-a,b=i+a;if(g<0||h>this.width||b<0||x>this.height)return!l&&[];const T=[];return this._forEachCell(h,x,g,b,this._queryCellCircle,T,{hitTest:l,circle:{x:e,y:i,radius:a},seenUids:{box:{},circle:{}}},u),l?T.length>0:T}query(e,i,a,l,u){return this._query(e,i,a,l,!1,u)}hitTest(e,i,a,l,u){return this._query(e,i,a,l,!0,u)}hitTestCircle(e,i,a,l){return this._queryCircle(e,i,a,!0,l)}_queryCell(e,i,a,l,u,h,g,x){const b=g.seenUids,T=this.boxCells[u];if(T!==null){const A=this.bboxes;for(const O of T)if(!b.box[O]){b.box[O]=!0;const B=4*O;if(e<=A[B+2]&&i<=A[B+3]&&a>=A[B+0]&&l>=A[B+1]&&(!x||x(this.boxKeys[O]))){if(g.hitTest)return h.push(!0),!0;h.push({key:this.boxKeys[O],x1:A[B],y1:A[B+1],x2:A[B+2],y2:A[B+3]})}}}const M=this.circleCells[u];if(M!==null){const A=this.circles;for(const O of M)if(!b.circle[O]){b.circle[O]=!0;const B=3*O;if(this._circleAndRectCollide(A[B],A[B+1],A[B+2],e,i,a,l)&&(!x||x(this.circleKeys[O]))){if(g.hitTest)return h.push(!0),!0;{const V=A[B],W=A[B+1],q=A[B+2];h.push({key:this.circleKeys[O],x1:V-q,y1:W-q,x2:V+q,y2:W+q})}}}}}_queryCellCircle(e,i,a,l,u,h,g,x){const b=g.circle,T=g.seenUids,M=this.boxCells[u];if(M!==null){const O=this.bboxes;for(const B of M)if(!T.box[B]){T.box[B]=!0;const V=4*B;if(this._circleAndRectCollide(b.x,b.y,b.radius,O[V+0],O[V+1],O[V+2],O[V+3])&&(!x||x(this.boxKeys[B])))return h.push(!0),!0}}const A=this.circleCells[u];if(A!==null){const O=this.circles;for(const B of A)if(!T.circle[B]){T.circle[B]=!0;const V=3*B;if(this._circlesCollide(O[V],O[V+1],O[V+2],b.x,b.y,b.radius)&&(!x||x(this.circleKeys[B])))return h.push(!0),!0}}}_forEachCell(e,i,a,l,u,h,g,x){const b=this._convertToXCellCoord(e),T=this._convertToYCellCoord(i),M=this._convertToXCellCoord(a),A=this._convertToYCellCoord(l);for(let O=b;O<=M;O++)for(let B=T;B<=A;B++)if(u.call(this,e,i,a,l,this.xCellCount*B+O,h,g,x))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,i,a,l,u,h){const g=l-e,x=u-i,b=a+h;return b*b>g*g+x*x}_circleAndRectCollide(e,i,a,l,u,h,g){const x=(h-l)/2,b=Math.abs(e-(l+x));if(b>x+a)return!1;const T=(g-u)/2,M=Math.abs(i-(u+T));if(M>T+a)return!1;if(b<=x||M<=T)return!0;const A=b-x,O=M-T;return A*A+O*O<=a*a}}const Td=100;class hQ{constructor(e,i,a=new nL(e.width+200,e.height+200,25),l=new nL(e.width+200,e.height+200,25)){this.transform=e,this.grid=a,this.ignoredGrid=l,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Td,this.screenBottomBoundary=e.height+Td,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=i}placeCollisionBox(e,i,a,l,u,h,g,x){let b=a.projectedAnchorX,T=a.projectedAnchorY,M=a.projectedAnchorZ;const A=a.elevation,O=a.tileID,B=e.getProjection();if(A&&O){const[ue,Ee,Be]=B.upVector(O.canonical,a.tileAnchorX,a.tileAnchorY),je=B.upVectorScale(O.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;b+=ue*A*je,T+=Ee*A*je,M+=Be*A*je}const V=this.projectAndGetPerspectiveRatio(g,b,T,M,a.tileID,B.name==="globe"||!!A||this.transform.pitch>0,B),W=h*V.perspectiveRatio,q=(a.x1*i+l.x-a.padding)*W+V.point.x,ne=(a.y1*i+l.y-a.padding)*W+V.point.y,ae=(a.x2*i+l.x+a.padding)*W+V.point.x,le=(a.y2*i+l.y+a.padding)*W+V.point.y,ie=V.perspectiveRatio<=.55||V.occluded;return!this.isInsideGrid(q,ne,ae,le)||!u&&this.grid.hitTest(q,ne,ae,le,x)||ie?{box:[],offscreen:!1,occluded:V.occluded}:{box:[q,ne,ae,le],offscreen:this.isOffscreen(q,ne,ae,le),occluded:!1}}placeCollisionCircles(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V){const W=[],q=this.transform.elevation,ne=e.getProjection(),ae=q?q.getAtTileOffsetFunc(V,this.transform.center.lat,this.transform.worldSize,ne):null,le=new oe(a.tileAnchorX,a.tileAnchorY);let{x:ie,y:ue,z:Ee}=ne.projectTilePoint(le.x,le.y,V.canonical);if(ae){const[At,lt,ft]=ae(le);ie+=At,ue+=lt,Ee+=ft}const Be=ne.name==="globe",je=this.projectAndGetPerspectiveRatio(g,ie,ue,Ee,V,Be||!!q||this.transform.pitch>0,ne),{perspectiveRatio:Ge}=je,tt=(M?h/Ge:h*Ge)/_s,Ze=wh(ie,ue,Ee,x),nt=je.signedDistanceFromCamera>0?D6(tt,u,a.lineOffsetX*tt,a.lineOffsetY*tt,!1,Ze,le,a,l,x,{},q&&!M?ae:null,M&&!!q,ne,V,M):null;let Xe=!1,ut=!1,bt=!0;if(nt&&!je.occluded){const At=.5*O*Ge+B,lt=new oe(-100,-100),ft=new oe(this.screenRightBoundary,this.screenBottomBoundary),Ft=new uQ,{first:Jt,last:tr}=nt,lr=Jt.path.length;let pr=[];for(let kr=lr-1;kr>=1;kr--)pr.push(Jt.path[kr]);for(let kr=1;kr<tr.path.length;kr++)pr.push(tr.path[kr]);const er=2.5*At;b&&(pr=pr.map(([kr,Hr,Ur],qr)=>(ae&&!Be&&(Ur=ae(qr<lr-1?Jt.tilePath[lr-1-qr]:tr.tilePath[qr-lr+2])[2]),wh(kr,Hr,Ur,b))),pr.some(kr=>kr[3]<=0)&&(pr=[]));let or=[];if(pr.length>0){let kr=1/0,Hr=-1/0,Ur=1/0,qr=-1/0;for(const yn of pr)kr=Math.min(kr,yn[0]),Ur=Math.min(Ur,yn[1]),Hr=Math.max(Hr,yn[0]),qr=Math.max(qr,yn[1]);Hr>=lt.x&&kr<=ft.x&&qr>=lt.y&&Ur<=ft.y&&(or=[pr.map(yn=>new oe(yn[0],yn[1]))],(kr<lt.x||Hr>ft.x||Ur<lt.y||qr>ft.y)&&(or=o6(or,lt.x,lt.y,ft.x,ft.y)))}for(const kr of or){Ft.reset(kr,.25*At);let Hr=0;Hr=Ft.length<=.5*At?1:Math.ceil(Ft.paddedLength/er)+1;for(let Ur=0;Ur<Hr;Ur++){const qr=Ur/Math.max(Hr-1,1),yn=Ft.lerp(qr),Dn=yn.x+Td,ui=yn.y+Td;W.push(Dn,ui,At,0);const Mi=Dn-At,Yn=ui-At,Un=Dn+At,On=ui+At;if(bt=bt&&this.isOffscreen(Mi,Yn,Un,On),ut=ut||this.isInsideGrid(Mi,Yn,Un,On),!i&&this.grid.hitTestCircle(Dn,ui,At,A)&&(Xe=!0,!T))return{circles:[],offscreen:!1,collisionDetected:Xe,occluded:!1}}}}return{circles:!T&&Xe||!ut?[]:W,offscreen:bt,collisionDetected:Xe,occluded:je.occluded}}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const i=[];let a=1/0,l=1/0,u=-1/0,h=-1/0;for(const T of e){const M=new oe(T.x+Td,T.y+Td);a=Math.min(a,M.x),l=Math.min(l,M.y),u=Math.max(u,M.x),h=Math.max(h,M.y),i.push(M)}const g=this.grid.query(a,l,u,h).concat(this.ignoredGrid.query(a,l,u,h)),x={},b={};for(const T of g){const M=T.key;x[M.bucketInstanceId]===void 0&&(x[M.bucketInstanceId]={}),x[M.bucketInstanceId][M.featureIndex]||sD(i,[new oe(T.x1,T.y1),new oe(T.x2,T.y1),new oe(T.x2,T.y2),new oe(T.x1,T.y2)])&&(x[M.bucketInstanceId][M.featureIndex]=!0,b[M.bucketInstanceId]===void 0&&(b[M.bucketInstanceId]=[]),b[M.bucketInstanceId].push(M.featureIndex))}return b}insertCollisionBox(e,i,a,l,u){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:l,collisionGroupID:u},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,i,a,l,u){const h=i?this.ignoredGrid:this.grid,g={bucketInstanceId:a,featureIndex:l,collisionGroupID:u};for(let x=0;x<e.length;x+=4)h.insertCircle(g,e[x],e[x+1],e[x+2])}projectAndGetPerspectiveRatio(e,i,a,l,u,h,g){const x=[i,a,l,1];let b=!1;l||this.transform.pitch>0?(Hi.transformMat4(x,x,e),this.fogState&&u&&g.name!=="globe"&&(b=function(A,O,B,V,W,q){const ne=q.calculateFogTileMatrix(W),ae=[O,B,V];return ce.transformMat4(ae,ae,ne),iC(A,ce.length(ae),q.pitch,q._fov)}(this.fogState,i,a,l,u.toUnwrapped(),this.transform)>.9)):N6(x,x,e);const T=x[3];return{point:new oe((x[0]/T+1)/2*this.transform.width+Td,(-x[1]/T+1)/2*this.transform.height+Td),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(g)/T*.5,1.5),signedDistanceFromCamera:T,occluded:h&&x[2]>T||b}}isOffscreen(e,i,a,l){return a<Td||e>=this.screenRightBoundary||l<Td||i>this.screenBottomBoundary}isInsideGrid(e,i,a,l){return a>=0&&e<this.gridRightBoundary&&l>=0&&i<this.gridBottomBoundary}getViewportMatrix(){const e=U.identity([]);return U.translate(e,e,[-100,-100,0]),e}}function t4(r,e,i){const a=e.createTileMatrix(r,r.worldSize,i.toUnwrapped());return U.multiply(new Float32Array(16),r.projMatrix,a)}function dQ(r,e,i){if(e.projection.name===i.projection.name)return r.projMatrix;const a=i.clone();return a.setProjection(e.projection),t4(a,e.getProjection(),r)}function r4(r,e,i){return e.name===i.projection.name?r.projMatrix:t4(i,e,r)}class iL{constructor(e,i,a,l){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?i:-i))):l&&a?1:0,this.placed=a}isHidden(){return this.opacity===0&&!this.placed}}class gx{constructor(e,i,a,l,u,h=!1){this.text=new iL(e?e.text:null,i,a,u),this.icon=new iL(e?e.icon:null,i,l,u),this.clipped=h}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class n4{constructor(e,i,a,l=!1){this.text=e,this.icon=i,this.skipFade=a,this.clipped=l}}class fQ{constructor(){this.invProjMatrix=U.create(),this.viewportMatrix=U.create(),this.circles=[]}}class pQ{constructor(e,i,a,l,u){this.bucketInstanceId=e,this.featureIndex=i,this.sourceLayerIndex=a,this.bucketIndex=l,this.tileID=u}}class mQ{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const i=++this.maxGroupID;this.collisionGroups[e]={ID:i,predicate:a=>a.collisionGroupID===i}}return this.collisionGroups[e]}}function oL(r,e,i,a,l){const{horizontalAlign:u,verticalAlign:h}=RS(r),g=-(u-.5)*e,x=-(h-.5)*i,b=x3(r,a);return new oe(g+b[0]*l,x+b[1]*l)}function i4(r,e,i,a,l){const u=new oe(r,e);return i&&u._rotate(a?l:-l),u}class gQ{constructor(e,i,a,l,u,h){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new hQ(this.transform,u),this.buildingIndex=h,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new mQ(a),this.collisionCircleArrays={},this.prevPlacement=l,l&&(l.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,i,a,l){const u=a.getBucket(i),h=a.latestFeatureIndex;if(!u||!h||i.fqid!==u.layerIds[0])return;const g=u.layers[0].layout,x=a.collisionBoxArray,b=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),T=a.tileSize/Zt,M=a.tileID.toUnwrapped();this.transform.setProjection(u.projection);const A=(O=a.tileID,B=u.getProjection(),V=this.transform,B.name===this.projection?V.calculateProjMatrix(O.toUnwrapped()):t4(V,B,O));var O,B,V;const W=g.get("text-pitch-alignment")==="map",q=g.get("text-rotation-alignment")==="map";i.compileFilter();const ne=i.dynamicFilter(),ae=i.dynamicFilterNeedsFeature(),le=this.transform.calculatePixelsToTileUnitsMatrix(a),ie=k6(A,a.tileID.canonical,W,q,this.transform,u.getProjection(),le);let ue=null;if(W){const je=O6(A,a.tileID.canonical,W,q,this.transform,u.getProjection(),le);ue=U.multiply([],this.transform.labelPlaneMatrix,je)}let Ee=null;ne&&a.latestFeatureIndex&&(Ee={unwrappedTileID:M,dynamicFilter:ne,dynamicFilterNeedsFeature:ae,featureIndex:a.latestFeatureIndex}),this.retainedQueryData[u.bucketInstanceId]=new pQ(u.bucketInstanceId,h,u.sourceLayerIndex,u.index,a.tileID);const Be={bucket:u,layout:g,posMatrix:A,textLabelPlaneMatrix:ie,labelToScreenMatrix:ue,clippingData:Ee,scale:b,textPixelRatio:T,holdingForFade:a.holdingForFade(),collisionBoxArray:x,partiallyEvaluatedTextSize:bd(u.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:bd(u.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(u.sourceID)};if(l)for(const je of u.sortKeyRanges){const{sortKey:Ge,symbolInstanceStart:tt,symbolInstanceEnd:Ze}=je;e.push({sortKey:Ge,symbolInstanceStart:tt,symbolInstanceEnd:Ze,parameters:Be})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:u.symbolInstances.length,parameters:Be})}attemptAnchorPlacement(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne){const{textOffset0:ae,textOffset1:le,crossTileID:ie}=A,ue=[ae,le],Ee=oL(e,a,l,ue,u),Be=this.collisionIndex.placeCollisionBox(B,u,i,i4(Ee.x,Ee.y,h,g,this.transform.angle),M,x,b,T.predicate);if(W){const je=B.getSymbolInstanceIconSize(ne,this.transform.zoom,A.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(B,je,W,i4(Ee.x,Ee.y,h,g,this.transform.angle),M,x,b,T.predicate).box.length===0)return}if(Be.box.length>0){let je;return this.prevPlacement&&this.prevPlacement.variableOffsets[ie]&&this.prevPlacement.placements[ie]&&this.prevPlacement.placements[ie].text&&(je=this.prevPlacement.variableOffsets[ie].anchor),this.variableOffsets[ie]={textOffset:ue,width:a,height:l,anchor:e,textScale:u,prevAnchor:je},this.markUsedJustification(B,e,A,V),B.allowVerticalPlacement&&(this.markUsedOrientation(B,V,A),this.placedOrientations[ie]=V),{shift:Ee,placedGlyphBoxes:Be}}}placeLayerBucketPart(e,i,a,l){const{bucket:u,layout:h,posMatrix:g,textLabelPlaneMatrix:x,labelToScreenMatrix:b,clippingData:T,textPixelRatio:M,holdingForFade:A,collisionBoxArray:O,partiallyEvaluatedTextSize:B,partiallyEvaluatedIconSize:V,collisionGroup:W}=e.parameters,q=h.get("text-optional"),ne=h.get("icon-optional"),ae=h.get("text-allow-overlap"),le=h.get("icon-allow-overlap"),ie=h.get("text-rotation-alignment")==="map",ue=h.get("text-pitch-alignment")==="map",Ee=h.get("symbol-z-order")==="viewport-y",Be=h.get("symbol-z-elevate");this.transform.setProjection(u.projection);let je=ae&&(le||!u.hasIconData()||ne),Ge=le&&(ae||!u.hasTextData()||q);!u.collisionArrays&&O&&u.deserializeCollisionBoxes(O),a&&l&&u.updateCollisionDebugBuffers(this.transform.zoom,O);const tt=(Ze,nt,Xe)=>{const{crossTileID:ut,numVerticalGlyphVertices:bt}=Ze;if(T){const Un={zoom:this.transform.zoom,pitch:this.transform.pitch};let On=null;if(T.dynamicFilterNeedsFeature){const Tn=this.retainedQueryData[u.bucketInstanceId];On=T.featureIndex.loadFeature({featureIndex:Ze.featureIndex,bucketIndex:Tn.bucketIndex,sourceLayerIndex:Tn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,T.dynamicFilter)(Un,On,this.retainedQueryData[u.bucketInstanceId].tileID.canonical,new oe(Ze.tileAnchorX,Ze.tileAnchorY),this.transform.calculateDistanceTileData(T.unwrappedTileID)))return this.placements[ut]=new n4(!1,!1,!1,!0),void i.add(ut)}if(i.has(ut))return;if(A)return void(this.placements[ut]=new n4(!1,!1,!1));let At=!1,lt=!1,ft=!0,Ft=!1,Jt=!1,tr=null,lr={box:null,offscreen:null,occluded:null},pr={box:null,offscreen:null,occluded:null},er=null,or=null,kr=null,Hr=0,Ur=0,qr=0;Xe.textFeatureIndex?Hr=Xe.textFeatureIndex:Ze.useRuntimeCollisionCircles&&(Hr=Ze.featureIndex),Xe.verticalTextFeatureIndex&&(Ur=Xe.verticalTextFeatureIndex);const yn=Un=>{Un.tileID=this.retainedQueryData[u.bucketInstanceId].tileID;const On=this.transform.elevation;Un.elevation=Ze.zOffset+(On?On.getAtTileOffset(Un.tileID,Un.tileAnchorX,Un.tileAnchorY):0)},Dn=Xe.textBox;if(Dn){yn(Dn);const Un=Tn=>{let _i=jo.horizontal;if(u.allowVerticalPlacement&&!Tn&&this.prevPlacement){const Di=this.prevPlacement.placedOrientations[ut];Di&&(this.placedOrientations[ut]=Di,_i=Di,this.markUsedOrientation(u,_i,Ze))}return _i},On=(Tn,_i)=>{if(u.allowVerticalPlacement&&bt>0&&Xe.verticalTextBox){for(const Di of u.writingModes)if(Di===jo.vertical?(lr=_i(),pr=lr):lr=Tn(),lr&&lr.box&&lr.box.length)break}else lr=Tn()};if(h.get("text-variable-anchor")){let Tn=h.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ut]){const ri=this.prevPlacement.variableOffsets[ut];Tn.indexOf(ri.anchor)>0&&(Tn=Tn.filter(oo=>oo!==ri.anchor),Tn.unshift(ri.anchor))}const _i=(ri,oo,Vo)=>{const To=u.getSymbolInstanceTextSize(B,Ze,this.transform.zoom,nt),yo=(ri.x2-ri.x1)*To+2*ri.padding,Pa=(ri.y2-ri.y1)*To+2*ri.padding,Uo=Ze.hasIconTextFit&&!le?oo:null;Uo&&yn(Uo);let Qo={box:[],offscreen:!1,occluded:!1};const ao=ae?2*Tn.length:Tn.length;for(let jl=0;jl<ao;++jl){const Md=this.attemptAnchorPlacement(Tn[jl%Tn.length],ri,yo,Pa,To,ie,ue,M,g,W,jl>=Tn.length,Ze,nt,u,Vo,Uo,B,V);if(Md&&(Qo=Md.placedGlyphBoxes,Qo&&Qo.box&&Qo.box.length)){At=!0,tr=Md.shift;break}}return Qo};On(()=>_i(Dn,Xe.iconBox,jo.horizontal),()=>{const ri=Xe.verticalTextBox;return ri&&yn(ri),u.allowVerticalPlacement&&!(lr&&lr.box&&lr.box.length)&&bt>0&&ri?_i(ri,Xe.verticalIconBox,jo.vertical):{box:null,offscreen:null,occluded:null}}),lr&&(At=lr.box,ft=lr.offscreen,Ft=lr.occluded);const Di=Un(!(!lr||!lr.box));if(!At&&this.prevPlacement){const ri=this.prevPlacement.variableOffsets[ut];ri&&(this.variableOffsets[ut]=ri,this.markUsedJustification(u,ri.anchor,Ze,Di))}}else{const Tn=(_i,Di)=>{const ri=u.getSymbolInstanceTextSize(B,Ze,this.transform.zoom,nt),oo=this.collisionIndex.placeCollisionBox(u,ri,_i,new oe(0,0),ae,M,g,W.predicate);return oo&&oo.box&&oo.box.length&&(this.markUsedOrientation(u,Di,Ze),this.placedOrientations[ut]=Di),oo};On(()=>Tn(Dn,jo.horizontal),()=>{const _i=Xe.verticalTextBox;return u.allowVerticalPlacement&&bt>0&&_i?(yn(_i),Tn(_i,jo.vertical)):{box:null,offscreen:null,occluded:null}}),Un(!!(lr&&lr.box&&lr.box.length))}}if(er=lr,At=er&&er.box&&er.box.length>0,ft=er&&er.offscreen,Ft=er&&er.occluded,Ze.useRuntimeCollisionCircles){const Un=u.text.placedSymbolArray.get(Ze.centerJustifiedTextSymbolIndex>=0?Ze.centerJustifiedTextSymbolIndex:Ze.verticalPlacedTextSymbolIndex),On=W1(u.textSizeData,B,Un),Tn=h.get("text-padding");or=this.collisionIndex.placeCollisionCircles(u,ae,Un,u.lineVertexArray,u.glyphOffsetArray,On,g,x,b,a,ue,W.predicate,Ze.collisionCircleDiameter*On/_s,Tn,this.retainedQueryData[u.bucketInstanceId].tileID),At=ae||or.circles.length>0&&!or.collisionDetected,ft=ft&&or.offscreen,Ft=or.occluded}if(Xe.iconFeatureIndex&&(qr=Xe.iconFeatureIndex),Xe.iconBox){const Un=On=>{yn(On);const Tn=Ze.hasIconTextFit&&tr?i4(tr.x,tr.y,ie,ue,this.transform.angle):new oe(0,0),_i=u.getSymbolInstanceIconSize(V,this.transform.zoom,Ze.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(u,_i,On,Tn,le,M,g,W.predicate)};pr&&pr.box&&pr.box.length&&Xe.verticalIconBox?(kr=Un(Xe.verticalIconBox),lt=kr.box.length>0):(kr=Un(Xe.iconBox),lt=kr.box.length>0),ft=ft&&kr.offscreen,Jt=kr.occluded}const ui=q||Ze.numHorizontalGlyphVertices===0&&bt===0,Mi=ne||Ze.numIconVertices===0;if(ui||Mi?Mi?ui||(lt=lt&&At):At=lt&&At:lt=At=lt&&At,At&&er&&er.box&&this.collisionIndex.insertCollisionBox(er.box,h.get("text-ignore-placement"),u.bucketInstanceId,pr&&pr.box&&Ur?Ur:Hr,W.ID),lt&&kr&&this.collisionIndex.insertCollisionBox(kr.box,h.get("icon-ignore-placement"),u.bucketInstanceId,qr,W.ID),or&&(At&&this.collisionIndex.insertCollisionCircles(or.circles,h.get("text-ignore-placement"),u.bucketInstanceId,Hr,W.ID),a)){const Un=u.bucketInstanceId;let On=this.collisionCircleArrays[Un];On===void 0&&(On=this.collisionCircleArrays[Un]=new fQ);for(let Tn=0;Tn<or.circles.length;Tn+=4)On.circles.push(or.circles[Tn+0]),On.circles.push(or.circles[Tn+1]),On.circles.push(or.circles[Tn+2]),On.circles.push(or.collisionDetected?1:0)}const Yn=u.projection.name!=="globe";je=je&&(Yn||!Ft),Ge=Ge&&(Yn||!Jt),this.placements[ut]=new n4(At||je,lt||Ge,ft||u.justReloaded),i.add(ut)};if(Be&&this.buildingIndex&&(this.buildingIndex.updateZOffset(u,this.retainedQueryData[u.bucketInstanceId].tileID),u.updateZOffset()),Ee){const Ze=u.getSortedSymbolIndexes(this.transform.angle);for(let nt=Ze.length-1;nt>=0;--nt){const Xe=Ze[nt];tt(u.symbolInstances.get(Xe),Xe,u.collisionArrays[Xe])}u.hasAnyZOffset&&ve(`${u.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(u.hasAnyZOffset){const Ze=u.getSortedIndexesByZOffset();for(let nt=0;nt<Ze.length;++nt){const Xe=Ze[nt];tt(u.symbolInstances.get(Xe),Xe,u.collisionArrays[Xe])}}else for(let Ze=e.symbolInstanceStart;Ze<e.symbolInstanceEnd;Ze++)tt(u.symbolInstances.get(Ze),Ze,u.collisionArrays[Ze]);if(a&&u.bucketInstanceId in this.collisionCircleArrays){const Ze=this.collisionCircleArrays[u.bucketInstanceId];U.invert(Ze.invProjMatrix,g),Ze.viewportMatrix=this.collisionIndex.getViewportMatrix()}u.justReloaded=!1}markUsedJustification(e,i,a,l){const{leftJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:h,rightJustifiedTextSymbolIndex:g,verticalPlacedTextSymbolIndex:x,crossTileID:b}=a,T=b3(i),M=l===jo.vertical?x:T==="left"?u:T==="center"?h:T==="right"?g:-1;u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=M>=0&&u!==M?0:b),h>=0&&(e.text.placedSymbolArray.get(h).crossTileID=M>=0&&h!==M?0:b),g>=0&&(e.text.placedSymbolArray.get(g).crossTileID=M>=0&&g!==M?0:b),x>=0&&(e.text.placedSymbolArray.get(x).crossTileID=M>=0&&x!==M?0:b)}markUsedOrientation(e,i,a){const l=i===jo.horizontal||i===jo.horizontalOnly?i:0,u=i===jo.vertical?i:0,{leftJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:g,rightJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:b}=a,T=e.text.placedSymbolArray;h>=0&&(T.get(h).placedOrientation=l),g>=0&&(T.get(g).placedOrientation=l),x>=0&&(T.get(x).placedOrientation=l),b>=0&&(T.get(b).placedOrientation=u)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const i=this.prevPlacement;let a=!1;this.prevZoomAdjustment=i?i.zoomAdjustment(this.transform.zoom):0;const l=i?i.symbolFadeChange(e):1,u=i?i.opacities:{},h=i?i.variableOffsets:{},g=i?i.placedOrientations:{};for(const x in this.placements){const b=this.placements[x],T=u[x];T?(this.opacities[x]=new gx(T,l,b.text,b.icon,null,b.clipped),a=a||b.text!==T.text.placed||b.icon!==T.icon.placed):(this.opacities[x]=new gx(null,l,b.text,b.icon,b.skipFade,b.clipped),a=a||b.text||b.icon)}for(const x in u){const b=u[x];if(!this.opacities[x]){const T=new gx(b,l,!1,!1);T.isHidden()||(this.opacities[x]=T,a=a||b.text.placed||b.icon.placed)}}for(const x in h)this.variableOffsets[x]||!this.opacities[x]||this.opacities[x].isHidden()||(this.variableOffsets[x]=h[x]);for(const x in g)this.placedOrientations[x]||!this.opacities[x]||this.opacities[x].isHidden()||(this.placedOrientations[x]=g[x]);a?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=i?i.lastPlacementChangeTime:e)}updateLayerOpacities(e,i){const a=new Set;for(const l of i){const u=l.getBucket(e);u&&l.latestFeatureIndex&&e.fqid===u.layerIds[0]&&(this.updateBucketOpacities(u,a,l.collisionBoxArray),u.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(u,l.tileID),u.updateZOffset()))}}updateBucketOpacities(e,i,a){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const l=e.layers[0].layout,u=!!e.layers[0].dynamicFilter(),h=new gx(null,0,!1,!1,!0),g=l.get("text-allow-overlap"),x=l.get("icon-allow-overlap"),b=l.get("text-variable-anchor"),T=l.get("text-rotation-alignment")==="map",M=l.get("text-pitch-alignment")==="map",A=new gx(null,0,g&&(x||!e.hasIconData()||l.get("icon-optional")),x&&(g||!e.hasTextData()||l.get("text-optional")),!0);!e.collisionArrays&&a&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(a);const O=(V,W,q)=>{for(let ne=0;ne<W/4;ne++)V.opacityVertexArray.emplaceBack(q)};let B=0;for(let V=0;V<e.symbolInstances.length;V++){const W=e.symbolInstances.get(V),{numHorizontalGlyphVertices:q,numVerticalGlyphVertices:ne,crossTileID:ae,numIconVertices:le}=W,ie=i.has(ae);let ue=this.opacities[ae];ie?ue=h:ue||(ue=A,this.opacities[ae]=ue),i.add(ae);const Ee=q>0||ne>0,Be=le>0,je=this.placedOrientations[ae],Ge=je===jo.vertical,tt=je===jo.horizontal||je===jo.horizontalOnly;if(!Ee&&!Be||ue.isHidden()||B++,Ee){const Ze=aL(ue.text);O(e.text,q,Ge?hC:Ze),O(e.text,ne,tt?hC:Ze);const nt=ue.text.isHidden(),{leftJustifiedTextSymbolIndex:Xe,centerJustifiedTextSymbolIndex:ut,rightJustifiedTextSymbolIndex:bt,verticalPlacedTextSymbolIndex:At}=W,lt=e.text.placedSymbolArray,ft=nt||Ge?1:0;Xe>=0&&(lt.get(Xe).hidden=ft),ut>=0&&(lt.get(ut).hidden=ft),bt>=0&&(lt.get(bt).hidden=ft),At>=0&&(lt.get(At).hidden=nt||tt?1:0);const Ft=this.variableOffsets[ae];Ft&&this.markUsedJustification(e,Ft.anchor,W,je);const Jt=this.placedOrientations[ae];Jt&&(this.markUsedJustification(e,"left",W,Jt),this.markUsedOrientation(e,Jt,W))}if(Be){const Ze=aL(ue.icon),{placedIconSymbolIndex:nt,verticalPlacedIconSymbolIndex:Xe}=W,ut=e.icon.placedSymbolArray,bt=ue.icon.isHidden()?1:0;nt>=0&&(O(e.icon,le,Ge?hC:Ze),ut.get(nt).hidden=bt),Xe>=0&&(O(e.icon,W.numVerticalIconVertices,tt?hC:Ze),ut.get(Xe).hidden=bt)}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Ze=e.collisionArrays[V];if(Ze){let nt=new oe(0,0),Xe=!0;if(Ze.textBox||Ze.verticalTextBox){if(b){const bt=this.variableOffsets[ae];bt?(nt=oL(bt.anchor,bt.width,bt.height,bt.textOffset,bt.textScale),T&&nt._rotate(M?this.transform.angle:-this.transform.angle)):Xe=!1}u&&(Xe=!ue.clipped),Ze.textBox&&uC(e.textCollisionBox.collisionVertexArray,ue.text.placed,!Xe||Ge,nt.x,nt.y),Ze.verticalTextBox&&uC(e.textCollisionBox.collisionVertexArray,ue.text.placed,!Xe||tt,nt.x,nt.y)}const ut=Xe&&!!(!tt&&Ze.verticalIconBox);Ze.iconBox&&uC(e.iconCollisionBox.collisionVertexArray,ue.icon.placed,ut,W.hasIconTextFit?nt.x:0,W.hasIconTextFit?nt.y:0),Ze.verticalIconBox&&uC(e.iconCollisionBox.collisionVertexArray,ue.icon.placed,!ut,W.hasIconTextFit?nt.x:0,W.hasIconTextFit?nt.y:0)}}}if(e.fullyClipped=B===0,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const V=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=V.invProjMatrix,e.placementViewportMatrix=V.viewportMatrix,e.collisionCircleArray=V.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,i){const a=this.zoomAtLastRecencyCheck===i?1-this.zoomAdjustment(i):1;return this.zoomAtLastRecencyCheck=i,this.commitTime+this.fadeDuration*a>e}setStale(){this.stale=!0}}function uC(r,e,i,a,l){r.emplaceBack(e?1:0,i?1:0,a||0,l||0),r.emplaceBack(e?1:0,i?1:0,a||0,l||0),r.emplaceBack(e?1:0,i?1:0,a||0,l||0),r.emplaceBack(e?1:0,i?1:0,a||0,l||0)}const yQ=Math.pow(2,25),vQ=Math.pow(2,24),_Q=Math.pow(2,17),xQ=Math.pow(2,16),bQ=Math.pow(2,9),wQ=Math.pow(2,8),SQ=Math.pow(2,1);function aL(r){if(r.opacity===0&&!r.placed)return 0;if(r.opacity===1&&r.placed)return 4294967295;const e=r.placed?1:0,i=Math.floor(127*r.opacity);return i*yQ+e*vQ+i*_Q+e*xQ+i*bQ+e*wQ+i*SQ+e}const hC=0;class CQ{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&e.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,i,a,l,u){const h=this._bucketParts;for(;this._currentTileIndex<e.length;)if(i.getBucketParts(h,l,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,u())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,h.sort((g,x)=>g.sortKey-x.sortKey));this._currentPartIndex<h.length;){const g=h[this._currentPartIndex];if(i.placeLayerBucketPart(g,this._seenCrossTileIDs,a,g.symbolInstanceStart===0),this._currentPartIndex++,u())return!0}return!1}}class EQ{constructor(e,i,a,l,u,h,g,x,b){this.placement=new gQ(e,u,h,g,x,b),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=l,this._done=!1}isDone(){return this._done}continuePlacement(e,i,a,l){const u=Qr.now(),h=()=>{const g=Qr.now()-u;return!this._forceFullPlacement&&g>2};for(;this._currentPlacementIndex>=0;){const g=i[e[this._currentPlacementIndex]],x=this.placement.collisionIndex.transform.zoom;if(g.type==="symbol"&&(!g.minzoom||g.minzoom<=x)&&(!g.maxzoom||g.maxzoom>x)){const b=g,T=b.layout.get("symbol-z-elevate"),M=this._inProgressLayer=this._inProgressLayer||new CQ(b),A=us(g.source,g.scope);if(M.continuePlacement(T?l[A]:a[A],this.placement,this._showCollisionBoxes,g,h))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const sL=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class dC{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,a]=new Uint8Array(e,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const l=a>>4;if(l!==1)throw new Error(`Got v${l} data when expected v1.`);const u=sL[15&a];if(!u)throw new Error("Unrecognized array type.");const[h]=new Uint16Array(e,2,1),[g]=new Uint32Array(e,4,1);return new dC(g,h,u,e)}constructor(e,i=64,a=Float64Array,l){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=a,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const u=sL.indexOf(this.ArrayType),h=2*e*this.ArrayType.BYTES_PER_ELEMENT,g=e*this.IndexArrayType.BYTES_PER_ELEMENT,x=(8-g%8)%8;if(u<0)throw new Error(`Unexpected typed array class: ${a}.`);l&&l instanceof ArrayBuffer?(this.data=l,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+g+x,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+h+g+x),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+g+x,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+u]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=e)}add(e,i){const a=this._pos>>1;return this.ids[a]=a,this.coords[this._pos++]=e,this.coords[this._pos++]=i,a}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return o4(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,i,a,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:h,nodeSize:g}=this,x=[0,u.length-1,0],b=[];for(;x.length;){const T=x.pop()||0,M=x.pop()||0,A=x.pop()||0;if(M-A<=g){for(let W=A;W<=M;W++){const q=h[2*W],ne=h[2*W+1];q>=e&&q<=a&&ne>=i&&ne<=l&&b.push(u[W])}continue}const O=A+M>>1,B=h[2*O],V=h[2*O+1];B>=e&&B<=a&&V>=i&&V<=l&&b.push(u[O]),(T===0?e<=B:i<=V)&&(x.push(A),x.push(O-1),x.push(1-T)),(T===0?a>=B:l>=V)&&(x.push(O+1),x.push(M),x.push(1-T))}return b}within(e,i,a){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:l,coords:u,nodeSize:h}=this,g=[0,l.length-1,0],x=[],b=a*a;for(;g.length;){const T=g.pop()||0,M=g.pop()||0,A=g.pop()||0;if(M-A<=h){for(let W=A;W<=M;W++)cL(u[2*W],u[2*W+1],e,i)<=b&&x.push(l[W]);continue}const O=A+M>>1,B=u[2*O],V=u[2*O+1];cL(B,V,e,i)<=b&&x.push(l[O]),(T===0?e-a<=B:i-a<=V)&&(g.push(A),g.push(O-1),g.push(1-T)),(T===0?e+a>=B:i+a>=V)&&(g.push(O+1),g.push(M),g.push(1-T))}return x}}function o4(r,e,i,a,l,u){if(l-a<=i)return;const h=a+l>>1;lL(r,e,h,a,l,u),o4(r,e,i,a,h-1,1-u),o4(r,e,i,h+1,l,1-u)}function lL(r,e,i,a,l,u){for(;l>a;){if(l-a>600){const b=l-a+1,T=i-a+1,M=Math.log(b),A=.5*Math.exp(2*M/3),O=.5*Math.sqrt(M*A*(b-A)/b)*(T-b/2<0?-1:1);lL(r,e,i,Math.max(a,Math.floor(i-T*A/b+O)),Math.min(l,Math.floor(i+(b-T)*A/b+O)),u)}const h=e[2*i+u];let g=a,x=l;for(yx(r,e,a,i),e[2*l+u]>h&&yx(r,e,a,l);g<x;){for(yx(r,e,g,x),g++,x--;e[2*g+u]<h;)g++;for(;e[2*x+u]>h;)x--}e[2*a+u]===h?yx(r,e,a,x):(x++,yx(r,e,x,l)),x<=i&&(a=x+1),i<=x&&(l=x-1)}}function yx(r,e,i,a){a4(r,i,a),a4(e,2*i,2*a),a4(e,2*i+1,2*a+1)}function a4(r,e,i){const a=r[e];r[e]=r[i],r[i]=a}function cL(r,e,i,a){const l=r-i,u=e-a;return l*l+u*u}const s4=512/Zt/2;class TQ{constructor(e,i,a){this.tileID=e,this.bucketInstanceId=a,this.index=new dC(i.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const l=e.canonical.x*Zt,u=e.canonical.y*Zt;for(let h=0;h<i.length;h++){const{key:g,crossTileID:x,tileAnchorX:b,tileAnchorY:T}=i.get(h),M=Math.floor((l+b)*s4),A=Math.floor((u+T)*s4);this.index.add(M,A),this.keys.push(g),this.crossTileIDs.push(x)}this.index.finish()}findMatches(e,i,a){const l=this.tileID.canonical.z<i.canonical.z?1:Math.pow(2,this.tileID.canonical.z-i.canonical.z),u=s4/Math.pow(2,i.canonical.z-this.tileID.canonical.z),h=i.canonical.x*Zt,g=i.canonical.y*Zt;for(let x=0;x<e.length;x++){const b=e.get(x);if(b.crossTileID)continue;const{key:T,tileAnchorX:M,tileAnchorY:A}=b,O=Math.floor((h+M)*u),B=Math.floor((g+A)*u),V=this.index.range(O-l,B-l,O+l,B+l);for(const W of V){const q=this.crossTileIDs[W];if(this.keys[W]===T&&!a.has(q)){a.add(q),b.crossTileID=q;break}}}}}class IQ{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class MQ{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const i=Math.round((e-this.lng)/360);if(i!==0)for(const a in this.indexes){const l=this.indexes[a],u={};for(const h in l){const g=l[h];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+i),u[g.tileID.key]=g}this.indexes[a]=u}this.lng=e}addBucket(e,i,a){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===i.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let u=0;u<i.symbolInstances.length;u++)i.symbolInstances.get(u).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const l=this.usedCrossTileIDs[e.overscaledZ];for(const u in this.indexes){const h=this.indexes[u];if(Number(u)>e.overscaledZ)for(const g in h){const x=h[g];x.tileID.isChildOf(e)&&x.findMatches(i.symbolInstances,e,l)}else{const g=h[e.scaledTo(Number(u)).key];g&&g.findMatches(i.symbolInstances,e,l)}}for(let u=0;u<i.symbolInstances.length;u++){const h=i.symbolInstances.get(u);h.crossTileID||(h.crossTileID=a.generate(),l.add(h.crossTileID))}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new TQ(e,i.symbolInstances,i.bucketInstanceId),!0}removeBucketCrossTileIDs(e,i){for(const a of i.crossTileIDs)this.usedCrossTileIDs[e].delete(a)}removeStaleBuckets(e){let i=!1;for(const a in this.indexes){const l=this.indexes[a];for(const u in l)e[l[u].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,l[u]),delete l[u],i=!0)}return i}}class PQ{constructor(){this.layerIndexes={},this.crossTileIDs=new IQ,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,i,a,l){let u=this.layerIndexes[e.fqid];u===void 0&&(u=this.layerIndexes[e.fqid]=new MQ);let h=!1;const g={};l.name!=="globe"&&u.handleWrapJump(a);for(const x of i){const b=x.getBucket(e);b&&e.fqid===b.layerIds[0]&&(b.bucketInstanceId||(b.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(x.tileID,b,this.crossTileIDs)&&(h=!0),g[b.bucketInstanceId]=!0)}return u.removeStaleBuckets(g)&&(h=!0),h}pruneUnusedLayers(e){const i={};e.forEach(a=>{i[a]=!0});for(const a in this.layerIndexes)i[a]||delete this.layerIndexes[a]}}var uL=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
vec3 linearTosRGB(vec3 color)
{return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn)
{return pow(srgbIn,vec3(2.2));}vec3 linearProduct(vec3 srgbIn,vec3 k)
{return srgbIn*pow(k,vec3(1./2.2));}
#if __VERSION__ >=300
#define _HANDLE_WIREFRAME_DEPTH gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define _HANDLE_WIREFRAME_DEPTH
#endif
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
gl_FragColor=vec4(0.7,0.0,0.0,0.7); \\
_HANDLE_WIREFRAME_DEPTH;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w-0.0001;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,hL="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",dL=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,fL=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,pL=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,mL=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,gL=`#ifdef RENDER_SHADOWS
#if defined(NATIVE) && __VERSION__ >=300
#define TEXTURE_GATHER
#endif
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture2D(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture2D(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture2D(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture2D(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const yL=[];mC(uL,yL);const fC={"_prelude_fog.vertex.glsl":fL,"_prelude_terrain.vertex.glsl":dL,"_prelude_shadow.vertex.glsl":mL,"_prelude_fog.fragment.glsl":pL,"_prelude_shadow.fragment.glsl":gL,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`},pC={};Ki("",dL),Ki(pL,fL),Ki(gL,mL);const vL=Ki(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;varying float v_cutoff_opacity;
#endif`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;varying float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),_L=uL;var xL={background:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;varying vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Ki("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ki(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Ki(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ki("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Ki("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Ki("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
varying vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
varying highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
varying float v_flood_radius;varying float v_has_floodlight;
#endif
varying float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef RENDER_CUTOFF
color*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
#if __VERSION__ >=300
#ifdef RENDER_CUTOFF
invariant gl_Position;
#endif
#endif
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
varying float v_flood_radius;varying float v_has_floodlight;
#endif
varying float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),fillExtrusionDepth:Ki(`varying highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
gl_FragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
varying highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying vec3 v_normal;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Ki(`#include "_prelude_shadow.fragment.glsl"
#ifdef GL_ES
precision highp float;
#endif
uniform vec3 u_ground_shadow_factor;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#ifdef FOG
varying float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,v_depth));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
gl_FragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;attribute vec2 a_pos;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#ifdef FOG
varying float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);v_depth=gl_Position.w;
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Ki(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
varying highp vec2 v_pos;varying highp vec4 v_line_segment;varying highp float v_flood_light_radius_tile;varying highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
varying highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture2D(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
gl_FragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
gl_FragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
gl_FragColor=color;HANDLE_WIREFRAME_DEBUG;
#endif
#endif
}`,`#include "_prelude_fog.vertex.glsl"
attribute highp vec4 a_pos_end;attribute highp float a_angular_offset_factor;attribute highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
varying highp vec2 v_pos;varying highp vec4 v_line_segment;varying highp float v_flood_light_radius_tile;varying highp vec2 v_ao;
#ifdef FOG
varying highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;
#ifdef FORCE_ABS_FL_GROUND_RADIUS
fl_ground_radius=abs(flood_light_ground_radius);
#endif
float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Ki(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture(u_image,coord).r/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting_with_emission_ground(gl_FragColor,u_emissive_strength);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec2 u_colorization_scale;uniform highp vec4 u_colorization_mix;highp vec4 colormap (highp float value) {highp float scaled_value=value*u_colorization_scale.y+u_colorization_scale.x;highp vec2 coords=vec2(scaled_value,0.5);return texture2D(u_color_ramp,coords);}
#endif
void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);vec4 color;
#ifdef RASTER_COLOR
highp vec4 fadedColor=mix(color0,color1,u_fade_t);color=colormap(dot(vec4(fadedColor.rgb,1),u_colorization_mix));color.a*=fadedColor.a;if (color.a > 0.0) {color.rgb/=color.a;}
#else
if (color0.a > 0.0) {color0.rgb/=color0.a;}if (color1.a > 0.0) {color1.rgb/=color1.a;}color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_ground(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;attribute vec2 a_texture_pos;
#endif
varying vec2 v_pos0;varying vec2 v_pos1;void main() {vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*u_globe_matrix*vec4(a_globe_pos,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
uv=a_texture_pos/8192.0;
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ki(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
varying float v_fade_opacity;varying vec2 v_tex_a;
#ifdef ICON_TRANSITION
varying vec2 v_tex_b;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture2D(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture2D(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture2D(u_texture,v_tex_a)*alpha;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef Z_OFFSET
attribute float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
attribute vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex_a;
#ifdef ICON_TRANSITION
varying vec2 v_tex_b;
#endif
varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:Ki(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;
#if __VERSION__ >=300
flat varying float v_draw_halo;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo;
#if __VERSION__ >=300
draw_halo=v_draw_halo > 0.0;
#else
draw_halo=u_is_halo;
#endif
if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef Z_OFFSET
attribute float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
#if __VERSION__ >=300
flat varying float v_draw_halo;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;
#if __VERSION__ >=300
v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;
#endif
v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:Ki(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;
#if __VERSION__ >=300
flat varying float v_draw_halo;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo;
#if __VERSION__ >=300
draw_halo=v_draw_halo > 0.0;
#else
draw_halo=u_is_halo;
#endif
if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef Z_OFFSET
attribute float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
#if __VERSION__ >=300
flat varying float v_draw_halo;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;
#if __VERSION__ >=300
v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture2D(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,v_depth,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Ki(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Ki(`#include "_prelude_fog.fragment.glsl"
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hL),skyboxGradient:Ki(`#include "_prelude_fog.fragment.glsl"
varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hL),skyboxCapture:Ki(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture2D(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Ki(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
gl_FragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
gl_FragColor=vec4(1,1,1,1);
#else
gl_FragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);gl_FragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
gl_FragColor=vec4(c*t,t);
#endif
}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Ki(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;varying highp vec4 v_position_height;varying lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth_shadows;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
varying lowp vec4 v_roughness_metallic_emissive_alpha;varying mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
varying highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture2D(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
const float M_PI=3.141592653589793;
#define saturate(_x) clamp(_x,0.,1.)
float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture2D(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
texColor.rgb=sRGBToLinear(texColor.rgb);if(u_baseTextureIsAlpha) {if (texColor.w < 0.5) {discard;}albedo*=mix(vec4(texColor.rgb,texColor.a),vec4(texColor.a),float(u_baseTextureIsAlpha));} else {albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture2D( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture2D(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(M_PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/M_PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/M_PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 diffuse=getDiffuseShadedColor(getBaseColor().rgb,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture2D(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(diffuse,1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
float ao=(texture2D(u_occlusionTexture,uv_2f).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture2D(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
color=mix(color,mat.baseColor.rgb,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
gl_FragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
attribute vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
attribute vec4 a_normal_matrix0;attribute vec4 a_normal_matrix1;attribute vec4 a_normal_matrix2;attribute vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth_shadows;
#endif
varying vec4 v_position_height;varying lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
varying highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
varying lowp vec4 v_roughness_metallic_emissive_alpha;varying mediump vec4 v_height_based_emission_params;
#endif
void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Ki(`varying highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
gl_FragColor=pack_depth(v_depth);
#endif
}`,`attribute vec3 a_pos_3f;uniform mat4 u_matrix;varying highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
attribute vec4 a_normal_matrix0;attribute vec4 a_normal_matrix1;attribute vec4 a_normal_matrix2;attribute vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Ki(`varying highp vec2 v_uv;varying mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;gl_FragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
attribute vec3 a_pos_3f;attribute vec2 a_uv;attribute float a_size_scale;attribute float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;varying highp vec2 v_uv;varying mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function mC(r,e){const i=r.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let a of i)if(a=a.trim(),a[0]==="#"&&a.includes("if")&&!a.includes("endif")){a=a.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const l=a.split(" ");for(const u of l)e.includes(u)||e.push(u)}}function Ki(r,e){const i=/#include\s+"([^"]+)"/g,a=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let l=e.match(/attribute(\S*) (highp |mediump |lowp )?([\w]+) ([\w]+)/g);l&&(l=l.filter((b,T)=>l.indexOf(b)===T));const u={},h=[],g=[];r=r.replace(i,(b,T)=>(g.push(T),"")),e=e.replace(i,(b,T)=>(h.push(T),""));let x=[...yL];mC(r,x),mC(e,x);for(const b of[...h,...g])fC[b]||console.error(`Undefined include: ${b}`),pC[b]||(pC[b]=[],mC(fC[b],pC[b])),x=[...x,...pC[b]];return{fragmentSource:r=r.replace(a,(b,T,M,A,O)=>(u[O]=!0,T==="define"?`
#ifndef HAS_UNIFORM_u_${O}
varying ${M} ${A} ${O};
#else
uniform ${M} ${A} u_${O};
#endif
`:T==="initialize"?`
#ifdef HAS_UNIFORM_u_${O}
    ${M} ${A} ${O} = u_${O};
#endif
`:T==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${O}
    varying ${M} ${A} ${O};
#endif
`:T==="initialize-attribute"?"":void 0)),vertexSource:e=e.replace(a,(b,T,M,A,O)=>{const B=A==="float"?"vec2":A,V=O.match(/color/)?"color":B;return T==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${O}
attribute ${M} ${A} a_${O};
#endif
`:u[O]?T==="define"?`
#ifndef HAS_UNIFORM_u_${O}
uniform lowp float u_${O}_t;
attribute ${M} ${B} a_${O};
varying ${M} ${A} ${O};
#else
uniform ${M} ${A} u_${O};
#endif
`:T==="initialize"?V==="vec4"?`
#ifndef HAS_UNIFORM_u_${O}
    ${O} = a_${O};
#else
    ${M} ${A} ${O} = u_${O};
#endif
`:`
#ifndef HAS_UNIFORM_u_${O}
    ${O} = unpack_mix_${V}(a_${O}, u_${O}_t);
#else
    ${M} ${A} ${O} = u_${O};
#endif
`:T==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${O}
    attribute ${M} ${A} a_${O};
    varying ${M} ${A} ${O};
#endif
`:T==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${O}
    ${O} = a_${O};
#endif
`:void 0:T==="define"?`
#ifndef HAS_UNIFORM_u_${O}
uniform lowp float u_${O}_t;
attribute ${M} ${B} a_${O};
#else
uniform ${M} ${A} u_${O};
#endif
`:T==="define-instanced"?V==="mat4"?`
#ifdef INSTANCED_ARRAYS
attribute vec4 a_${O}0;
attribute vec4 a_${O}1;
attribute vec4 a_${O}2;
attribute vec4 a_${O}3;
#else
uniform ${M} ${A} u_${O};
#endif
`:`
#ifdef INSTANCED_ARRAYS
attribute ${M} ${B} a_${O};
#else
uniform ${M} ${A} u_${O};
#endif
`:T==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${O}
    ${M} ${A} ${O} = a_${O};
#endif
`:V==="vec4"?`
#ifndef HAS_UNIFORM_u_${O}
    ${M} ${A} ${O} = a_${O};
#else
    ${M} ${A} ${O} = u_${O};
#endif
`:`
#ifndef HAS_UNIFORM_u_${O}
    ${M} ${A} ${O} = unpack_mix_${V}(a_${O}, u_${O}_t);
#else
    ${M} ${A} ${O} = u_${O};
#endif
`}),staticAttributes:l,usedDefines:x,vertexIncludes:h,fragmentIncludes:g}}class AQ{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,i,a,l,u,h,g,x){this.context=e;let b=this.boundPaintVertexBuffers.length!==l.length;for(let M=0;!b&&M<l.length;M++)this.boundPaintVertexBuffers[M]!==l[M]&&(b=!0);let T=this.boundDynamicVertexBuffers.length!==g.length;for(let M=0;!T&&M<g.length;M++)this.boundDynamicVertexBuffers[M]!==g[M]&&(T=!0);if(!this.vao||this.boundProgram!==i||this.boundLayoutVertexBuffer!==a||b||T||this.boundIndexBuffer!==u||this.boundVertexOffset!==h)this.freshBind(i,a,l,u,h,g,x);else{e.bindVertexArrayOES.set(this.vao);for(const M of g)M&&(M.bind(),x&&M.instanceCount&&M.setVertexAttribDivisor(e.gl,i,x));u&&u.dynamicDraw&&u.bind()}}freshBind(e,i,a,l,u,h,g){const x=e.numAttributes,b=this.context,T=b.gl;this.vao&&this.destroy(),this.vao=b.gl.createVertexArray(),b.bindVertexArrayOES.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=i,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=l,this.boundVertexOffset=u,this.boundDynamicVertexBuffers=h,i.enableAttributes(T,e),i.bind(),i.setVertexAttribPointers(T,e,u);for(const M of a)M.enableAttributes(T,e),M.bind(),M.setVertexAttribPointers(T,e,u);for(const M of h)M&&(M.enableAttributes(T,e),M.bind(),M.setVertexAttribPointers(T,e,u),g&&M.instanceCount&&M.setVertexAttribDivisor(T,e,g));l&&l.bind(),b.currentNumAttributes=x}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function RQ(r,e){const i=Math.pow(2,e.canonical.z),a=e.canonical.y;return[new Si(0,a/i).toLngLat().lat,new Si(0,(a+1)/i).toLngLat().lat]}function kQ(r,e,i,a,l,u,h){const g=r.context,x=g.gl,b=i.hillshadeFBO;if(!b)return;r.prepareDrawTile();const T=r.isTileAffectedByFog(e),M=r.getOrCreateProgram("hillshade",{overrideFog:T});g.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,b.colorAttachment.get());const A=((W,q,ne,ae)=>{const le=ne.paint.get("hillshade-shadow-color"),ie=ne.paint.get("hillshade-highlight-color"),ue=ne.paint.get("hillshade-accent-color"),Ee=ne.paint.get("hillshade-emissive-strength");let Be=_e(ne.paint.get("hillshade-illumination-direction"));if(ne.paint.get("hillshade-illumination-anchor")==="viewport")Be-=W.transform.angle;else if(W.style&&W.style.enable3dLights()&&W.style.directionalLight){const Ge=W.style.directionalLight.properties.get("direction");Be=_e(It(Ge.x,Ge.y,Ge.z)[1])}const je=!W.options.moving;return{u_matrix:ae||W.transform.calculateProjMatrix(q.tileID.toUnwrapped(),je),u_image:0,u_latrange:RQ(0,q.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),Be],u_shadow:le,u_highlight:ie,u_emissive_strength:Ee,u_accent:ue}})(r,i,a,r.terrain?e.projMatrix:null);r.uploadCommonUniforms(g,M,e.toUnwrapped());const{tileBoundsBuffer:O,tileBoundsIndexBuffer:B,tileBoundsSegments:V}=r.getTileBoundsBuffers(i);M.draw(r,x.TRIANGLES,l,u,h,yi.disabled,A,a.id,O,B,V)}function bL(r,e,i){if(!e.needsDEMTextureUpload)return;const a=r.context,l=a.gl;a.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||r.getTileTexture(i.stride);const u=i.getPixels();e.demTexture?e.demTexture.update(u,{premultiply:!1}):e.demTexture=new ja(a,u,r.terrainUseFloatDEM()?l.R32F:l.RGBA,{premultiply:!1}),e.needsDEMTextureUpload=!1}function OQ(r,e,i){const a=r.context,l=a.gl;if(!e.dem)return;const u=e.dem;if(a.activeTexture.set(l.TEXTURE1),bL(r,e,u),!e.demTexture)return;e.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const h=u.dim;a.activeTexture.set(l.TEXTURE0);let g=e.hillshadeFBO;if(!g){const A=new ja(a,{width:h,height:h,data:null},l.RGBA);A.bind(l.LINEAR,l.CLAMP_TO_EDGE),g=e.hillshadeFBO=a.createFramebuffer(h,h,!0,"renderbuffer"),g.colorAttachment.set(A.texture)}a.bindFramebuffer.set(g.framebuffer),a.viewport.set([0,0,h,h]);const{tileBoundsBuffer:x,tileBoundsIndexBuffer:b,tileBoundsSegments:T}=r.getMercatorTileBoundsBuffers(),M=[];r.terrainUseFloatDEM()&&M.push("TERRAIN_DEM_FLOAT_FORMAT"),r.getOrCreateProgram("hillshadePrepare",{defines:M}).draw(r,l.TRIANGLES,Bn.disabled,mi.disabled,zi.unblended,yi.disabled,((A,O)=>{const B=O.stride,V=U.create();return U.ortho(V,0,Zt,-Zt,0,0,1),U.translate(V,V,[0,-Zt,0]),{u_matrix:V,u_image:1,u_dimension:[B,B],u_zoom:A.overscaledZ,u_unpack:O.unpackVector}})(e.tileID,u),i.id,x,b,T),e.needsHillshadePrepare=!1}const wL=r=>({u_matrix:new dn(r),u_image0:new ci(r),u_skirt_height:new Er(r),u_ground_shadow_factor:new xn(r)}),SL=(r,e,i)=>({u_matrix:r,u_image0:0,u_skirt_height:e,u_ground_shadow_factor:i}),CL=(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B)=>({u_proj_matrix:Float32Array.from(r),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(a),u_merc_matrix:i,u_zoom_transition:l,u_merc_center:u,u_image0:0,u_frustum_tl:h,u_frustum_tr:g,u_frustum_br:x,u_frustum_bl:b,u_globe_pos:T,u_globe_radius:M,u_viewport:A,u_grid_matrix:B?Float32Array.from(B):new Float32Array(9),u_skirt_height:O}),jv=(r,e)=>{if(e>0&&r.terrain&&ve("Cutoff is currently disabled on terrain"),e<=0||r.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,0]}};const i=r.transform,a=Math.max(Math.abs(i._zoom-(r.minCutoffZoom-1)),1),l=i.isLODDisabled(!1)?St(60,45,i.pitch):St(30,15,i.pitch),u=i._farZ-i._nearZ,h=e*i.height,g=((1-(x=l))*(.75*i.cameraToCenterDistance)+x*(i._farZ+h))*a;var x;return{shouldRenderCutoff:l<1,uniformValues:{u_cutoff_params:[i._nearZ,i._farZ,(g-i._nearZ)/u,(g-h-i._nearZ)/u]}}};function EL(r,e){return r!=null&&e!=null&&!(!r.hasData()||!e.hasData())&&r.demTexture!=null&&e.demTexture!=null&&r.tileID.key!==e.tileID.key}const Vv=new class{constructor(){this.operations={}}newMorphing(r,e,i,a,l){if(r in this.operations){const u=this.operations[r];u.to.tileID.key!==i.tileID.key&&(u.queued=i)}else this.operations[r]={startTime:a,phase:0,duration:l,from:e,to:i,queued:null}}getMorphValuesForProxy(r){if(!(r in this.operations))return null;const e=this.operations[r];return{from:e.from,to:e.to,phase:e.phase}}update(r){for(const e in this.operations){const i=this.operations[e];for(i.phase=(r-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,r)){delete this.operations[e];break}}}_nextOp(r,e){return!!r.queued&&(r.from=r.to,r.to=r.queued,r.queued=null,r.phase=0,r.startTime=e,!0)}_validOp(r){return r.from.hasData()&&r.to.hasData()}},TL={0:null,1:"TERRAIN_VERTEX_MORPHING"};function IL(r,e,i){if(e===0)return 0;const a=e<1&&i===514?.25/e:1;return 6*Math.pow(1.5,22-r)*Math.max(e,1)*a}function zQ(r,e){const i=1<<r.z;return!e&&(r.x===0||r.x===i-1)||r.y===0||r.y===i-1}const l4=r=>({u_matrix:r});function ML(r,e,i,a,l){if(l>0){const u=Qr.now(),h=(u-r.timeAdded)/l,g=e?(u-e.timeAdded)/l:-1,x=i.getSource(),b=a.coveringZoomLevel({tileSize:x.tileSize,roundZoom:x.roundZoom}),T=!e||Math.abs(e.tileID.overscaledZ-b)>Math.abs(r.tileID.overscaledZ-b),M=T&&r.refreshedUponExpiration?1:Qe(T?h:1-g,0,1);return r.refreshedUponExpiration&&h>=1&&(r.refreshedUponExpiration=!1),e?{opacity:1,mix:1-M}:{opacity:M,mix:0}}return{opacity:1,mix:0}}class DQ extends bh{constructor(e){const i={type:"raster-dem",maxzoom:e.transform.maxZoom},a=new jg(mx(),null),l=e4("mock-dem",i,a,e.style);super("mock-dem",l,!1),l.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,i){e.state="loaded",i(null)}}class LQ extends bh{constructor(e){const i=e4("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new jg(mx(),null),e.style);super("proxy",i,!1),i.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,i,a){if(e.freezeTileCoverage)return;this.transform=e;const l=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((u,h)=>{if(u[h.key]="",!this._tiles[h.key]){const g=new nx(h,this._source.tileSize*h.overscaleFactor(),e.tileZoom);g.state="loaded",this._tiles[h.key]=g}return u},{});for(const u in this._tiles)u in l||(this.freeFBO(u),this._tiles[u].unloadVectorData(),delete this._tiles[u])}freeFBO(e){const i=this.proxyCachedFBO[e];if(i!==void 0){const a=Object.values(i);this.renderCachePool.push(...a),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach(e=>e.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class PL extends xr{constructor(e,i,a){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=i,this.projMatrix=a}}class $Q extends mX{constructor(e,i){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[a,l,u]=function(x){const b=new gl,T=new Ca,M=131;b.reserve(17161),T.reserve(33800);const A=Zt/128,O=Zt+A/2,B=O+A;for(let W=-A;W<B;W+=A)for(let q=-A;q<B;q+=A){const ne=q<0||q>O||W<0||W>O?24575:0,ae=Qe(Math.round(q),0,Zt),le=Qe(Math.round(W),0,Zt);b.emplaceBack(ae+ne,le)}const V=(W,q)=>{const ne=q*M+W;T.emplaceBack(ne+1,ne,ne+M),T.emplaceBack(ne+M,ne+M+1,ne+1)};for(let W=1;W<129;W++)for(let q=1;q<129;q++)V(q,W);return[0,129].forEach(W=>{for(let q=0;q<130;q++)V(q,W),V(W,q)}),[b,T,32768]}(),h=e.context;this.gridBuffer=h.createVertexBuffer(a,Kt.members),this.gridIndexBuffer=h.createIndexBuffer(l),this.gridSegments=qi.simpleSegment(0,0,a.length,l.length),this.gridNoSkirtSegments=qi.simpleSegment(0,0,a.length,u),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new LQ(i.map),this.orthoMatrix=U.create(),U.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,Zt,0,Zt,0,1);const g=h.gl;this._overlapStencilMode=new mi({func:g.GEQUAL,mask:255},0,255,g.KEEP,g.KEEP,g.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new DQ(i.map),this._pendingGroundEffectLayers=[]}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),this._style=e,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(e,i,a){if(e&&e.terrain){this._style!==e&&(this.style=e,this._evaluationZoom=void 0);const l=e.terrain.properties,u=e.terrain.drapeRenderMode===0,h=e.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=Qr.now();const g=e.terrain&&e.terrain.scope,x=l.get("source"),b=u?this._mockSourceCache:e.getSourceCache(x,g);if(!b)return void ve(`Couldn't find terrain source "${x}".`);if(this.sourceCache=b,this._exaggeration=h?this.calculateExaggeration(i):l.get("exaggeration"),!i.projection.requiresDraping&&h&&this._exaggeration===0)return void this._disable();this.enabled=!0;const T=()=>{this.sourceCache.used&&ve(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const M=this.getScaledDemTileSize();this.sourceCache.update(i,M,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,T(),this._initializing=!0),T(),i.updateElevation(!0,a),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0,this._previousZoom=i.zoom}else this._disable()}calculateExaggeration(e){const i=this._previousCameraAltitude,a=e.getFreeCameraOptions().position.z/e.pixelsPerMeter*e.worldSize;this._previousCameraAltitude=a;const l=i!=null?a-i:Number.MAX_VALUE;if(Math.abs(l)<2)return this._exaggeration;const u=e.zoom,h=this._style.terrain;if(!this._previousUpdateTimestamp)return h.getExaggeration(u);let g=u-this._previousZoom;const x=this._previousUpdateTimestamp;let b=u;this._evaluationZoom!=null&&(b=this._evaluationZoom,Math.abs(u-b)>.5&&(g=.5*(u-b+g)),g*l<0&&(b+=g)),this._evaluationZoom=b;const T=h.getExaggeration(b),M=T===h.getExaggeration(Math.max(0,b-.1));if(M&&Math.abs(T-this._exaggeration)<.01)return T;let A=Math.min(.1,.00375*(this._updateTimestamp-x));return(M||T<.1||Math.abs(g)<1e-4)&&(A=Math.min(.2,4*A)),Mn(this._exaggeration,T,A)}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(e){e.coord&&e.dataType==="source"?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):e.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._mergedSourceCaches)this._style._mergedSourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(e=>e.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,a=this.painter.transform;this._initializing&&(this._initializing=a._centerAltitude===0&&this.getAtPointOrZero(Si.fromLngLat(a.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const l=this.proxyCoords=i.getIds().map(x=>{const b=i.getTileByID(x).tileID;return b.projMatrix=a.calculateProjMatrix(b.toUnwrapped()),b});(function(x,b){const T=b.transform.pointCoordinate(b.transform.getCameraPoint()),M=new oe(T.x,T.y);x.sort((A,O)=>{if(O.overscaledZ-A.overscaledZ)return O.overscaledZ-A.overscaledZ;const B=new oe(A.canonical.x+(1<<A.canonical.z)*A.wrap,A.canonical.y),V=new oe(O.canonical.x+(1<<O.canonical.z)*O.wrap,O.canonical.y),W=M.mult(1<<A.canonical.z);return W.x-=.5,W.y-=.5,W.distSqr(B)-W.distSqr(V)})})(l,this.painter);const u=this.proxyToSource||{};this.proxyToSource={},l.forEach(x=>{this.proxyToSource[x.key]={}}),this.terrainTileForTile={};const h=this._style._mergedSourceCaches;for(const x in h){const b=h[x];if(!b.used||(b!==this.sourceCache&&this.resetTileLookupCache(b.id),this._setupProxiedCoordsForOrtho(b,e[x],u),b.usedForTerrain))continue;const T=e[x];b.getSource().reparseOverscaled&&this._assignTerrainTiles(T)}this.proxiedCoords[i.id]=l.map(x=>new PL(x,x.key,this.orthoMatrix)),this._assignTerrainTiles(l),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(u),this.renderingToTexture=!1;const g={};this._visibleDemTiles=[];for(const x of this.proxyCoords){const b=this.terrainTileForTile[x.key];if(!b)continue;const T=b.tileID.key;T in g||(this._visibleDemTiles.push(b),g[T]=T)}}_assignTerrainTiles(e){this._initializing||e.forEach(i=>{if(this.terrainTileForTile[i.key])return;const a=this._findTileCoveringTileID(i,this.sourceCache);a&&(this.terrainTileForTile[i.key]=a)})}_prepareDEMTextures(){const e=this.painter.context,i=e.gl;for(const a in this.terrainTileForTile){const l=this.terrainTileForTile[a],u=l.dem;!u||l.demTexture&&!l.needsDEMTextureUpload||(e.activeTexture.set(i.TEXTURE1),bL(this.painter,l,u))}}_prepareDemTileUniforms(e,i,a,l){if(!i||i.demTexture==null)return!1;const u=e.tileID.canonical,h=Math.pow(2,i.tileID.canonical.z-u.z),g=l||"";return a[`u_dem_tl${g}`]=[u.x*h%1,u.y*h%1],a[`u_dem_scale${g}`]=h,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const e=this.painter.context,i=e.gl;if(!this._emptyDepthBufferTexture){const a=new da({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new ja(e,a,i.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const i=this._visibleDemTiles.reduce((a,l)=>{if(!l.dem)return a;const u=l.dem.tree.minimums[0];return u>0&&e++,a+u},0);return e?i/e:0}_updateEmptyDEMTexture(){const e=this.painter.context,i=e.gl;e.activeTexture.set(i.TEXTURE2);const a=this._getLoadedAreaMinimum(),[l,u]=(()=>{if(this.painter.terrainUseFloatDEM()){const g=new xD({width:1,height:1},new Float32Array([a]));return[i.R32F,g]}{const g=new da({width:1,height:1},new Uint8Array(Dg.pack(a,this.sourceCache.getSource().encoding)));return[i.RGBA,g]}})();this._emptyDEMTextureDirty=!1;let h=this._emptyDEMTexture;return h?h.update(u,{premultiply:!1}):h=this._emptyDEMTexture=new ja(e,u,l,{premultiply:!1}),h}setupElevationDraw(e,i,a){const l=this.painter.context,u=l.gl,h=(g=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:Dg.getUnpackVector(g),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var g;h.u_exaggeration=this.exaggeration();let x=null,b=null,T=1;if(a&&a.morphing&&this._useVertexMorphing){const O=a.morphing.srcDemTile,B=a.morphing.dstDemTile;T=a.morphing.phase,O&&B&&(this._prepareDemTileUniforms(e,O,h,"_prev")&&(b=O),this._prepareDemTileUniforms(e,B,h)&&(x=B))}const M=O=>O&&O.demTexture&&this.painter.terrainUseFloatDEM()?u.LINEAR:u.NEAREST,A=O=>{h.u_dem_size=O.size[0]===1?1:O.size[0]-2};if(b&&x)l.activeTexture.set(u.TEXTURE2),x.demTexture.bind(M(x),u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE4),b.demTexture.bind(M(b),u.CLAMP_TO_EDGE),x.demTexture&&A(x.demTexture),h.u_dem_lerp=T;else{x=this.terrainTileForTile[e.tileID.key],l.activeTexture.set(u.TEXTURE2);const O=this._prepareDemTileUniforms(e,x,h)?x.demTexture:this.emptyDEMTexture;O.bind(M(x),u.CLAMP_TO_EDGE),A(O)}if(l.activeTexture.set(u.TEXTURE3),a&&a.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE),this._depthFBO&&(h.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE),h.u_depth_size_inv=[1,1]),a&&a.useMeterToDem&&x){const O=(1<<x.tileID.canonical.z)*Oi(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;h.u_meter_to_dem=O}if(a&&a.labelPlaneMatrixInv&&(h.u_label_plane_matrix_inv=a.labelPlaneMatrixInv),i.setTerrainUniformValues(l,h),this.painter.transform.projection.name==="globe"){const O=this.globeUniformValues(this.painter.transform,e.tileID.canonical,a&&a.useDenormalizedUpVectorScale);i.setGlobeUniformValues(l,O)}}globeUniformValues(e,i,a){const l=e.projection;return{u_tile_tl_up:l.upVector(i,0,0),u_tile_tr_up:l.upVector(i,Zt,0),u_tile_br_up:l.upVector(i,Zt,Zt),u_tile_bl_up:l.upVector(i,0,Zt),u_tile_up_scale:a?ya(1):l.upVectorScale(i,e.center.lat,e.worldSize).metersToTile}}renderToBackBuffer(e){const i=this.painter,a=this.painter.context;e.length!==0&&(a.bindFramebuffer.set(null),a.viewport.set([0,0,i.width,i.height]),i.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(l,u,h,g,x){if(l.transform.projection.name==="globe")(function(b,T,M,A,O){const B=b.context,V=B.gl;let W,q;const ne=b.transform,ae=Nu(b,B,ne),le=(nt,Xe)=>{if(q===Xe)return;const ut=[TL[Xe],"PROJECTION_GLOBE_VIEW"];ae&&ut.push("CUSTOM_ANTIALIASING");const bt=b.isTileAffectedByFog(nt);W=b.getOrCreateProgram("globeRaster",{defines:ut,overrideFog:bt}),q=Xe},ie=b.colorModeForRenderPass(),ue=new Bn(V.LEQUAL,Bn.ReadWrite,b.depthRangeFor3D);Vv.update(O);const Ee=function(nt){const Xe=nt.pixelsPerMeter,ut=Xe/Oi(1,nt.center.lat),bt=U.identity(new Float64Array(16));return U.translate(bt,bt,[nt.point.x,nt.point.y,0]),U.scale(bt,bt,[ut,ut,Xe]),Float32Array.from(bt)}(ne),Be=[ro(ne.center.lng),Eo(ne.center.lat)],je=b.globeSharedBuffers,Ge=[ne.width*Qr.devicePixelRatio,ne.height*Qr.devicePixelRatio],tt=Float32Array.from(ne.globeMatrix),Ze={useDenormalizedUpVectorScale:!0};{const nt=b.transform,Xe=IL(nt.zoom,T.exaggeration(),T.sourceCache._source.tileSize);q=-1;const ut=V.TRIANGLES;for(const bt of A){const At=M.getTile(bt),lt=mi.disabled,ft=T.prevTerrainTileForTile[bt.key],Ft=T.terrainTileForTile[bt.key];EL(ft,Ft)&&Vv.newMorphing(bt.key,ft,Ft,O,250),B.activeTexture.set(V.TEXTURE0),At.texture.bind(V.LINEAR,V.CLAMP_TO_EDGE);const Jt=Vv.getMorphValuesForProxy(bt.key),tr=Jt?1:0;Jt&&Wn(Ze,{morphing:{srcDemTile:Jt.from,dstDemTile:Jt.to,phase:Me(Jt.phase)}});const lr=Qa(bt.canonical),pr=uS(lr.getCenter().lat),er=cS(bt.canonical,lr,pr,nt.worldSize/nt._pixelsPerMercatorPixel),or=vs(ia(bt.canonical)),kr=CL(nt.projMatrix,tt,Ee,or,Na(nt.zoom),Be,nt.frustumCorners.TL,nt.frustumCorners.TR,nt.frustumCorners.BR,nt.frustumCorners.BL,nt.globeCenterInViewSpace,nt.globeRadius,Ge,Xe,er);if(le(bt,tr),W&&(T.setupElevationDraw(At,W,Ze),b.uploadCommonUniforms(B,W,bt.toUnwrapped()),je)){const[Hr,Ur,qr]=je.getGridBuffers(pr,Xe!==0);W.draw(b,ut,ue,lt,ie,yi.backCCW,kr,"globe_raster",Hr,Ur,qr)}}}if(je&&(b.renderDefaultNorthPole||b.renderDefaultSouthPole)){const nt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ae&&nt.push("CUSTOM_ANTIALIASING"),W=b.getOrCreateProgram("globeRaster",{defines:nt});for(const Xe of A){const{x:ut,y:bt,z:At}=Xe.canonical,lt=bt===0,ft=bt===(1<<At)-1,[Ft,Jt,tr,lr]=je.getPoleBuffers(At,!1);if(lr&&(lt||ft)){const pr=M.getTile(Xe);B.activeTexture.set(V.TEXTURE0),pr.texture.bind(V.LINEAR,V.CLAMP_TO_EDGE);let er=bv(At,ut,ne);const or=vs(ia(Xe.canonical)),kr=(Hr,Ur)=>Hr.draw(b,V.TRIANGLES,ue,mi.disabled,ie,yi.disabled,CL(ne.projMatrix,er,er,or,0,Be,ne.frustumCorners.TL,ne.frustumCorners.TR,ne.frustumCorners.BR,ne.frustumCorners.BL,ne.globeCenterInViewSpace,ne.globeRadius,Ge,0),"globe_pole_raster",Ur,tr,lr);T.setupElevationDraw(pr,W,Ze),b.uploadCommonUniforms(B,W,Xe.toUnwrapped()),lt&&b.renderDefaultNorthPole&&kr(W,Ft),ft&&b.renderDefaultSouthPole&&(er=U.scale(U.create(),er,[1,-1,1]),kr(W,Jt))}}}})(l,u,h,g,x);else{const b=l.context,T=b.gl;let M,A;const O=l.shadowRenderer,B=jv(l,l.longestCutoffRange),V=ie=>{if(A===ie)return;const ue=[];ue.push(TL[ie]),B.shouldRenderCutoff&&ue.push("RENDER_CUTOFF"),M=l.getOrCreateProgram("terrainRaster",{defines:ue}),A=ie},W=l.colorModeForRenderPass(),q=new Bn(T.LEQUAL,Bn.ReadWrite,l.depthRangeFor3D);Vv.update(x);const ne=l.transform,ae=IL(ne.zoom,u.exaggeration(),u.sourceCache._source.tileSize);let le=[0,0,0];if(O){const ie=l.style.directionalLight,ue=l.style.ambientLight;ie&&ue&&(le=f4(ie,ue))}{A=-1;const ie=T.TRIANGLES,[ue,Ee]=[u.gridIndexBuffer,u.gridSegments];for(const Be of g){const je=h.getTile(Be),Ge=mi.disabled,tt=u.prevTerrainTileForTile[Be.key],Ze=u.terrainTileForTile[Be.key];EL(tt,Ze)&&Vv.newMorphing(Be.key,tt,Ze,x,250),b.activeTexture.set(T.TEXTURE0),je.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST);const nt=Vv.getMorphValuesForProxy(Be.key),Xe=nt?1:0;let ut;nt&&(ut={morphing:{srcDemTile:nt.from,dstDemTile:nt.to,phase:Me(nt.phase)}});const bt=SL(Be.projMatrix,zQ(Be.canonical,ne.renderWorldCopies)?ae/10:ae,le);if(V(Xe),!M)continue;u.setupElevationDraw(je,M,ut);const At=Be.toUnwrapped();O&&O.setupShadows(At,M),l.uploadCommonUniforms(b,M,At,null,B),M.draw(l,ie,q,Ge,W,yi.backCCW,bt,"terrain_raster",u.gridBuffer,ue,Ee)}}}}(i,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,i.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}renderBatch(e){if(this._drapedRenderBatches.length===0)return e+1;this.renderingToTexture=!0;const i=this.painter,a=this.painter.context,l=this.proxySourceCache,u=this.proxiedCoords[l.id],h=this._drapedRenderBatches.shift(),g=i.style.order,x=[];let b=0;for(const T of u){const M=l.getTileByID(T.proxyTileKey),A=l.proxyCachedFBO[T.key]?l.proxyCachedFBO[T.key][e]:void 0,O=A!==void 0?l.renderCache[A]:this.pool[b++],B=A!==void 0;if(M.texture=O.tex,B&&!O.dirty){x.push(M.tileID);continue}let V;a.bindFramebuffer.set(O.fb.framebuffer),this.renderedToTile=!1,O.dirty&&(a.clear({color:Qn.transparent,stencil:0}),O.dirty=!1);for(let W=h.start;W<=h.end;++W){const q=i.style._mergedLayers[g[W]];if(q.isHidden(i.transform.zoom))continue;const ne=i.style.getLayerSourceCache(q),ae=ne?this.proxyToSource[T.key][ne.id]:[T];if(!ae)continue;const le=ae;a.viewport.set([0,0,O.fb.width,O.fb.height]),V!==(ne?ne.id:null)&&(this._setupStencil(O,ae,q,ne),V=ne?ne.id:null),i.renderLayer(i,ne,q,le)}if(this._drapedRenderBatches.length===0)for(const W of this._pendingGroundEffectLayers){const q=i.style._mergedLayers[g[W]];if(q.isHidden(i.transform.zoom))continue;const ne=i.style.getLayerSourceCache(q),ae=ne?this.proxyToSource[T.key][ne.id]:[T];if(!ae)continue;const le=ae;a.viewport.set([0,0,O.fb.width,O.fb.height]),V!==(ne?ne.id:null)&&(this._setupStencil(O,ae,q,ne),V=ne?ne.id:null),i.renderLayer(i,ne,q,le)}this.renderedToTile?(O.dirty=!0,x.push(M.tileID)):B||--b,b===5&&(b=0,this.renderToBackBuffer(x))}return this.renderToBackBuffer(x),this.renderingToTexture=!1,a.bindFramebuffer.set(null),a.viewport.set([0,0,i.width,i.height]),h.end+1}postRender(){}isLayerOrderingCorrect(e){const i=e.order.length;let a=-1,l=i;for(let u=0;u<i;++u)this._style.isLayerDraped(e._mergedLayers[e.order[u]])?a=Math.max(a,u):l=Math.min(l,u);return l>a}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter(i=>i.dem).forEach(i=>{e=Math.min(e,i.dem.tree.minimums[0])}),e===0?e:(e-30)*this._exaggeration}raycast(e,i,a){if(!this._visibleDemTiles)return null;const l=this._visibleDemTiles.filter(u=>u.dem).map(u=>{const h=u.tileID,g=1<<h.overscaledZ,{x,y:b}=h.canonical,T=x/g,M=(x+1)/g,A=b/g,O=(b+1)/g;return{minx:T,miny:A,maxx:M,maxy:O,t:u.dem.tree.raycastRoot(T,A,M,O,e,i,a),tile:u}});l.sort((u,h)=>(u.t!==null?u.t:Number.MAX_VALUE)-(h.t!==null?h.t:Number.MAX_VALUE));for(const u of l){if(u.t==null)return null;const h=u.tile.dem.tree.raycast(u.minx,u.miny,u.maxx,u.maxy,e,i,a);if(h!=null)return h}return null}_createFBO(){const e=this.painter.context,i=e.gl,a=this.drapeBufferSize;e.activeTexture.set(i.TEXTURE0);const l=new ja(e,{width:a[0],height:a[1],data:null},i.RGBA);l.bind(i.LINEAR,i.CLAMP_TO_EDGE);const u=e.createFramebuffer(a[0],a[1],!0,null);return u.colorAttachment.set(l.texture),u.depthAttachment=new HY(e,u.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,a[0],a[1]),this._stencilRef=0,u.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):u.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:u,tex:l,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.hasLightTransitions())return!0;for(const e in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[e].hasTransition())return!0;return this._style.order.some(e=>{const i=this._style._mergedLayers[e],a=i.isHidden(this.painter.transform.zoom);return i.type==="custom"?!a&&i.shouldRedrape():!a&&i.hasTransition()})}_clearLineLayersFromRenderCache(){let e=!1;for(const a of this._style.getSources())if(a instanceof j2){e=!0;break}if(!e)return;const i={};for(let a=0;a<this._style.order.length;++a){const l=this._style._mergedLayers[this._style.order[a]],u=this._style.getLayerSourceCache(l);if(u&&!i[u.id]&&!l.isHidden(this.painter.transform.zoom)&&l.type==="line"&&l.widthExpression()instanceof bo){i[u.id]=!0;for(const h of this.proxyCoords){const g=this.proxyToSource[h.key][u.id];if(g)for(const x of g)this._clearRenderCacheForTile(u.id,x)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const a in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[a]._source instanceof fx){e=!0;break}if(!e)return;const i={};for(let a=0;a<this._style.order.length;++a){const l=this._style._mergedLayers[this._style.order[a]],u=this._style.getLayerSourceCache(l);if(!u||i[u.id]||l.isHidden(this.painter.transform.zoom)||l.type!=="raster")continue;const h=l.paint.get("raster-fade-duration");for(const g of this.proxyCoords){const x=this.proxyToSource[g.key][u.id];if(x)for(const b of x){const T=ML(u.getTile(b),u.findLoadedParent(b,0),u,this.painter.transform,h);(T.opacity!==1||T.mix!==0)&&this._clearRenderCacheForTile(u.id,b)}}}}_setupDrapedRenderBatches(){const e=this._style.order,i=e.length;if(i===0)return;const a=[];this._pendingGroundEffectLayers=[];let l,u=0,h=this._style._mergedLayers[e[u]];for(;!this._style.isLayerDraped(h)&&h.isHidden(this.painter.transform.zoom)&&++u<i;)h=this._style._mergedLayers[e[u]];for(;u<i;++u){const g=this._style._mergedLayers[e[u]];g.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(g)?l===void 0&&(l=u):(g.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(u),l!==void 0&&(a.push({start:l,end:u-1}),l=void 0)))}if(l!==void 0&&a.push({start:l,end:u-1}),a.length!==0){const g=a[a.length-1];this._pendingGroundEffectLayers.every(b=>b>g.end)||ve("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=a}_setupRenderCache(e){const i=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,i.renderCache.length>i.renderCachePool.length){const h=Object.values(i.proxyCachedFBO);i.proxyCachedFBO={};for(let g=0;g<h.length;++g){const x=Object.values(h[g]);i.renderCachePool.push(...x)}}return}this._clearRasterLayersFromRenderCache();const a=this.proxyCoords,l=this._tilesDirty;for(let h=a.length-1;h>=0;h--){const g=a[h];if(i.getTileByID(g.key),i.proxyCachedFBO[g.key]!==void 0){const x=e[g.key],b=this.proxyToSource[g.key];let T=0;for(const M in b){const A=b[M],O=x[M];if(!O||O.length!==A.length||A.some((B,V)=>B!==O[V]||l[M]&&l[M].hasOwnProperty(B.key))){T=-1;break}++T}for(const M in i.proxyCachedFBO[g.key])i.renderCache[i.proxyCachedFBO[g.key][M]].dirty=T<0||T!==Object.values(x).length}}const u=[...this._drapedRenderBatches];u.sort((h,g)=>g.end-g.start-(h.end-h.start));for(const h of u)for(const g of a){if(i.proxyCachedFBO[g.key])continue;let x=i.renderCachePool.pop();x===void 0&&i.renderCache.length<50&&(x=i.renderCache.length,i.renderCache.push(this._createFBO())),x!==void 0&&(i.proxyCachedFBO[g.key]={},i.proxyCachedFBO[g.key][h.start]=x,i.renderCache[x].dirty=!0)}this._tilesDirty={}}_setupStencil(e,i,a,l){if(!l||!this._sourceTilesOverlap[l.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const u=this.painter.context,h=u.gl;if(i.length<=1)return void(this._overlapStencilType=!1);let g;if(a.isTileClipped())g=i.length,this._overlapStencilMode.test={func:h.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(i[0].overscaledZ>i[i.length-1].overscaledZ))return void(this._overlapStencilType=!1);g=1,this._overlapStencilMode.test={func:h.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+g>255&&(u.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=g,this._overlapStencilMode.ref=this._stencilRef,a.isTileClipped()&&this._renderTileClippingMasks(i,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):mi.disabled}_renderTileClippingMasks(e,i){const a=this.painter,l=this.painter.context,u=l.gl;a._tileClippingMaskIDs={},l.setColorMode(zi.disabled),l.setDepthMode(Bn.disabled);const h=a.getOrCreateProgram("clippingMask");for(const g of e){const x=a._tileClippingMaskIDs[g.key]=--i;h.draw(a,u.TRIANGLES,Bn.disabled,new mi({func:u.ALWAYS,mask:0},x,255,u.KEEP,u.KEEP,u.REPLACE),zi.disabled,yi.disabled,l4(g.projMatrix),"$clipping",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments)}}pointCoordinate(e){const i=this.painter.transform;if(e.x<0||e.x>i.width||e.y<0||e.y>i.height)return null;const a=[e.x,e.y,1,1];Hi.transformMat4(a,a,i.pixelMatrixInverse),Hi.scale(a,a,1/a[3]),a[0]/=i.worldSize,a[1]/=i.worldSize;const l=i._camera.position,u=Oi(1,i.center.lat),h=[l[0],l[1],l[2]/u,0],g=ce.subtract([],a.slice(0,3),h);ce.normalize(g,g);const x=this.raycast(h,g,this._exaggeration);return x!==null&&x?(ce.scaleAndAdd(h,h,g,x),h[3]=h[2],h[2]*=u,h):null}drawDepth(){const e=this.painter,i=e.context,a=this.proxySourceCache,l=Math.ceil(e.width),u=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===l&&this._depthFBO.height===u||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const h=i.gl,g=i.createFramebuffer(l,u,!0,"renderbuffer");i.activeTexture.set(h.TEXTURE0);const x=new ja(i,{width:l,height:u,data:null},h.RGBA);x.bind(h.NEAREST,h.CLAMP_TO_EDGE),g.colorAttachment.set(x.texture);const b=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,l,u);g.depthAttachment.set(b),this._depthFBO=g,this._depthTexture=x}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,l,u]),function(h,g,x,b){if(h.transform.projection.name==="globe")return;const T=h.context,M=T.gl;T.clear({depth:1});const A=h.getOrCreateProgram("terrainDepth"),O=new Bn(M.LESS,Bn.ReadWrite,h.depthRangeFor3D);for(const B of b){const V=x.getTile(B),W=SL(B.projMatrix,0,[0,0,0]);g.setupElevationDraw(V,A),A.draw(h,M.TRIANGLES,O,mi.disabled,zi.unblended,yi.backCCW,W,"terrain_depth",g.gridBuffer,g.gridIndexBuffer,g.gridNoSkirtSegments)}}(e,this,a,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,i,a){if(e.getSource()instanceof Ed)return this._setupProxiedCoordsForImageSource(e,i,a);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const l=this.proxiedCoords[e.id]=[],u=this.proxyCoords;for(let g=0;g<u.length;g++){const x=u[g],b=this._findTileCoveringTileID(x,e);if(b){const T=this._createProxiedId(x,b,a[x.key]&&a[x.key][e.id]);l.push(T),this.proxyToSource[x.key][e.id]=[T]}}let h=!1;for(let g=0;g<i.length;g++){const x=e.getTile(i[g]);if(!x||!x.hasData())continue;const b=this._findTileCoveringTileID(x.tileID,this.proxySourceCache);if(b&&b.tileID.canonical.z!==x.tileID.canonical.z){const T=this.proxyToSource[b.tileID.key][e.id],M=this._createProxiedId(b.tileID,x,a[b.tileID.key]&&a[b.tileID.key][e.id]);T?T.splice(T.length-1,0,M):this.proxyToSource[b.tileID.key][e.id]=[M],l.push(M),h=!0}}this._sourceTilesOverlap[e.id]=h}_setupProxiedCoordsForImageSource(e,i,a){if(!e.getSource().loaded())return;const l=this.proxiedCoords[e.id]=[],u=this.proxyCoords,h=e.getSource(),g=h.tileID;if(!g)return;const x=new oe(g.x,g.y)._div(1<<g.z),b=h.coordinates.map(Si.fromLngLat).reduce((M,A)=>(M.min.x=Math.min(M.min.x,A.x-x.x),M.min.y=Math.min(M.min.y,A.y-x.y),M.max.x=Math.max(M.max.x,A.x-x.x),M.max.y=Math.max(M.max.y,A.y-x.y),M),{min:new oe(Number.MAX_VALUE,Number.MAX_VALUE),max:new oe(-Number.MAX_VALUE,-Number.MAX_VALUE)}),T=(M,A)=>{const O=M.wrap+M.canonical.x/(1<<M.canonical.z),B=M.canonical.y/(1<<M.canonical.z),V=Zt/(1<<M.canonical.z),W=A.wrap+A.canonical.x/(1<<A.canonical.z),q=A.canonical.y/(1<<A.canonical.z);return O+V<W+b.min.x||O>W+b.max.x||B+V<q+b.min.y||B>q+b.max.y};for(let M=0;M<u.length;M++){const A=u[M];for(let O=0;O<i.length;O++){const B=e.getTile(i[O]);if(!B||!B.hasData()||T(A,B.tileID))continue;const V=this._createProxiedId(A,B,a[A.key]&&a[A.key][e.id]),W=this.proxyToSource[A.key][e.id];W?W.push(V):this.proxyToSource[A.key][e.id]=[V],l.push(V)}}}_createProxiedId(e,i,a){let l=this.orthoMatrix;if(a){const u=a.find(h=>h.key===i.tileID.key);if(u)return u}if(i.tileID.key!==e.key){const u=e.canonical.z-i.tileID.canonical.z;let h,g,x;l=U.create();const b=i.tileID.wrap-e.wrap<<e.overscaledZ;u>0?(h=Zt>>u,g=h*((i.tileID.canonical.x<<u)-e.canonical.x+b),x=h*((i.tileID.canonical.y<<u)-e.canonical.y)):(h=Zt<<-u,g=Zt*(i.tileID.canonical.x-(e.canonical.x+b<<-u)),x=Zt*(i.tileID.canonical.y-(e.canonical.y<<-u))),U.ortho(l,0,h,0,h,0,1),U.translate(l,l,[g,x,0])}return new PL(i.tileID,e.key,l)}_findTileCoveringTileID(e,i){let a=i.getTile(e);if(a&&a.hasData())return a;const l=this._findCoveringTileCache[i.id],u=l[e.key];if(a=u?i.getTileByID(u):null,a&&a.hasData()||u===null)return a;let h=a?a.tileID:e,g=h.overscaledZ;const x=i.getSource().minzoom,b=[];if(!u){const M=i.getSource().maxzoom;if(e.canonical.z>=M){const A=e.canonical.z-M;i.getSource().reparseOverscaled?(g=Math.max(e.canonical.z+2,i.transform.tileZoom),h=new xr(g,e.wrap,M,e.canonical.x>>A,e.canonical.y>>A)):A!==0&&(g=M,h=new xr(g,e.wrap,M,e.canonical.x>>A,e.canonical.y>>A))}h.key!==e.key&&(b.push(h.key),a=i.getTile(h))}const T=M=>{b.forEach(A=>{l[A]=M}),b.length=0};for(g-=1;g>=x&&(!a||!a.hasData());g--){a&&T(a.tileID.key);const M=h.calculateScaledKey(g);if(a=i.getTileByID(M),a&&a.hasData())break;const A=l[M];if(A===null)break;A===void 0?b.push(M):a=i.getTileByID(A)}return T(a?a.tileID.key:null),a&&a.hasData()?a:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,i){let a=this._tilesDirty[e];a||(a=this._tilesDirty[e]={}),a[i.key]=!0}}function BQ(r,e,i){const a=function(g,x,b){const T=ce.dot(x,g),M=ce.dot(b,[.2126,.7152,.0722]),A=(B,V,W)=>(1-W)*B+W*V,O=A(1-.3*Math.min(M,1),1,Math.min(T+1,1));return A(.92,1,Math.asin(Qe(x[2],-1,1))/Math.PI+.5)*O}(r,[0,0,1],e),l=[0,0,0];ce.scale(l,i.slice(0,3),a);const u=[0,0,0];ce.scale(u,e.slice(0,3),r[2]);const h=[0,0,0];return ce.add(h,l,u),Wr(h)}const FQ=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],NQ=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class AL{static cacheKey(e,i,a,l){let u=`${i}${l?l.cacheKey:""}`;for(const h of a)e.usedDefines.includes(h)&&(u+=`/${h}`);return u}constructor(e,i,a,l,u,h){const g=e.gl;this.program=g.createProgram(),this.configuration=l,this.name=i,this.fixedDefines=[...h];const x=function(q){const ne=[];for(let ae=0;ae<q.length;ae++){if(q[ae]===null)continue;const le=q[ae].split(" ");ne.push(le.pop())}return ne}(a.staticAttributes),b=l?l.getBinderAttributes():[],T=x.concat(b);let M=l?l.defines():[];M=M.concat(h.map(q=>`#define ${q}`));const A=`#version 300 es
`;let O=A+M.concat(`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,_L,vL.fragmentSource).join(`
`);for(const q of a.fragmentIncludes)O+=`
${fC[q]}`;O+=`
${a.fragmentSource}`;let B=A+M.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,_L,vL.vertexSource).join(`
`);for(const q of a.vertexIncludes)B+=`
${fC[q]}`;B+=`
${a.vertexSource}`;const V=g.createShader(g.FRAGMENT_SHADER);if(g.isContextLost())return void(this.failedToCreate=!0);g.shaderSource(V,O),g.compileShader(V),g.attachShader(this.program,V);const W=g.createShader(g.VERTEX_SHADER);if(g.isContextLost())this.failedToCreate=!0;else{g.shaderSource(W,B),g.compileShader(W),g.attachShader(this.program,W),this.attributes={},this.numAttributes=T.length;for(let q=0;q<this.numAttributes;q++)if(T[q]){const ne=T[q].startsWith("a_")?T[q]:`a_${T[q]}`;g.bindAttribLocation(this.program,q,ne),this.attributes[ne]=q}g.linkProgram(this.program),g.deleteShader(W),g.deleteShader(V),this.fixedUniforms=u(e),this.binderUniforms=l?l.getUniforms(e):[],h.includes("TERRAIN")&&(this.terrainUniforms=(q=>({u_dem:new ci(q),u_dem_prev:new ci(q),u_dem_unpack:new vl(q),u_dem_tl:new ei(q),u_dem_scale:new Er(q),u_dem_tl_prev:new ei(q),u_dem_scale_prev:new Er(q),u_dem_size:new Er(q),u_dem_lerp:new Er(q),u_exaggeration:new Er(q),u_depth:new ci(q),u_depth_size_inv:new ei(q),u_meter_to_dem:new Er(q),u_label_plane_matrix_inv:new dn(q)}))(e)),h.includes("GLOBE")&&(this.globeUniforms=(q=>({u_tile_tl_up:new xn(q),u_tile_tr_up:new xn(q),u_tile_br_up:new xn(q),u_tile_bl_up:new xn(q),u_tile_up_scale:new Er(q)}))(e)),h.includes("FOG")&&(this.fogUniforms=(q=>({u_fog_matrix:new dn(q),u_fog_range:new ei(q),u_fog_color:new vl(q),u_fog_horizon_blend:new Er(q),u_fog_vertical_limit:new ei(q),u_fog_temporal_offset:new Er(q),u_frustum_tl:new xn(q),u_frustum_tr:new xn(q),u_frustum_br:new xn(q),u_frustum_bl:new xn(q),u_globe_pos:new xn(q),u_globe_radius:new Er(q),u_globe_transition:new Er(q),u_is_globe:new ci(q),u_viewport:new ei(q)}))(e)),h.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(q=>({u_cutoff_params:new vl(q)}))(e)),h.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(q=>({u_lighting_ambient_color:new xn(q),u_lighting_directional_dir:new xn(q),u_lighting_directional_color:new xn(q),u_ground_radiance:new xn(q)}))(e)),h.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(q=>({u_light_matrix_0:new dn(q),u_light_matrix_1:new dn(q),u_fade_range:new ei(q),u_shadow_normal_offset:new xn(q),u_shadow_intensity:new Er(q),u_shadow_texel_size:new Er(q),u_shadow_map_resolution:new Er(q),u_shadow_direction:new xn(q),u_shadow_bias:new xn(q),u_shadowmap_0:new ci(q),u_shadowmap_1:new ci(q)}))(e))}}setTerrainUniformValues(e,i){if(!this.terrainUniforms)return;const a=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const l in i)a[l]&&a[l].set(this.program,l,i[l])}}setGlobeUniformValues(e,i){if(!this.globeUniforms)return;const a=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const l in i)a[l]&&a[l].set(this.program,l,i[l])}}setFogUniformValues(e,i){if(!this.fogUniforms)return;const a=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const l in i)a[l].set(this.program,l,i[l])}}setCutoffUniformValues(e,i){if(!this.cutoffUniforms)return;const a=this.cutoffUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const l in i)a[l].set(this.program,l,i[l])}}setLightsUniformValues(e,i){if(!this.lightsUniforms)return;const a=this.lightsUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const l in i)a[l].set(this.program,l,i[l])}}setShadowUniformValues(e,i){if(this.failedToCreate||!this.shadowUniforms)return;const a=this.shadowUniforms;e.program.set(this.program);for(const l in i)a[l].set(this.program,l,i[l])}_drawDebugWireframe(e,i,a,l,u,h,g,x,b,T){const M=e.options.wireframe;if(M.terrain===!1&&M.layers2D===!1&&M.layers3D===!1)return;const A=e.context;if(!(!(!M.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!M.layers2D||e._terrain&&e._terrain.renderingToTexture||!FQ.includes(this.name))||!(!M.layers3D||!NQ.includes(this.name))))return;const O=A.gl,B=e.wireframeDebugCache.getLinesFromTrianglesBuffer(e.frameCounter,u,A);if(!B)return;const V=[...this.fixedDefines];V.push("DEBUG_WIREFRAME");const W=e.getOrCreateProgram(this.name,{config:this.configuration,defines:V});A.program.set(W.program);const q=(le,ie,ue)=>{if(ie[le]&&ue[le])for(const Ee in ie[le])ue[le][Ee]&&ue[le][Ee].set(ue.program,Ee,ie[le][Ee].current)};b&&b.setUniforms(W.program,A,W.binderUniforms,g,{zoom:x}),q("fixedUniforms",this,W),q("terrainUniforms",this,W),q("globeUniforms",this,W),q("fogUniforms",this,W),q("lightsUniforms",this,W),q("shadowUniforms",this,W),B.bind(),A.setColorMode(new zi([O.ONE,O.ONE_MINUS_SRC_ALPHA,O.ZERO,O.ONE],Qn.transparent,[!0,!0,!0,!1])),A.setDepthMode(new Bn(i.func===O.LESS?O.LEQUAL:i.func,Bn.ReadOnly,i.range)),A.setStencilMode(mi.disabled);const ne=3*h.primitiveLength*2,ae=3*h.primitiveOffset*2*2;T&&T>1?O.drawElementsInstanced(O.LINES,ne,O.UNSIGNED_SHORT,ae,T):O.drawElements(O.LINES,ne,O.UNSIGNED_SHORT,ae),u.bind(),A.program.set(this.program),A.setDepthMode(i),A.setStencilMode(a),A.setColorMode(l)}draw(e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W){const q=e.context,ne=q.gl;if(this.failedToCreate)return;q.program.set(this.program),q.setDepthMode(a),q.setStencilMode(l),q.setColorMode(u),q.setCullFace(h);for(const ie of Object.keys(this.fixedUniforms))this.fixedUniforms[ie].set(this.program,ie,g[ie]);B&&B.setUniforms(this.program,q,this.binderUniforms,A,{zoom:O});const ae={[ne.LINES]:2,[ne.TRIANGLES]:3,[ne.LINE_STRIP]:1}[i],le=W&&W>0?1:void 0;for(const ie of M.get()){const ue=ie.vaos||(ie.vaos={});(ue[x]||(ue[x]=new AQ)).bind(q,this,b,B?B.getPaintVertexBuffers():[],T,ie.vertexOffset,V||[],le),W&&W>1?ne.drawElementsInstanced(i,ie.primitiveLength*ae,ne.UNSIGNED_SHORT,ie.primitiveOffset*ae*2,W):ne.drawElements(i,ie.primitiveLength*ae,ne.UNSIGNED_SHORT,ie.primitiveOffset*ae*2),i===ne.TRIANGLES&&this._drawDebugWireframe(e,a,l,u,T,ie,A,O,B,W)}}}function RL(r,e){const i=Math.pow(2,e.tileID.overscaledZ),a=e.tileSize*Math.pow(2,r.transform.tileZoom)/i,l=a*(e.tileID.canonical.x+e.tileID.wrap*i),u=a*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_tile_units_to_pixels:1/$g(e,1,r.transform.tileZoom),u_pixel_coord_upper:[l>>16,u>>16],u_pixel_coord_lower:[65535&l,65535&u]}}const jQ=U.create(),kL=(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B)=>{const V=e.style.light,W=V.properties.get("position"),q=[W.x,W.y,W.z],ne=F.create();V.properties.get("anchor")==="viewport"&&(F.fromRotation(ne,-e.transform.angle),ce.transformMat3(q,q,ne));const ae=V.properties.get("color"),le=e.transform,ie={u_matrix:r,u_lightpos:q,u_lightintensity:V.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+i,u_opacity:a,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:jQ,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:l,u_edge_radius:u,u_flood_light_color:M,u_vertical_scale:A,u_flood_light_intensity:O,u_ground_shadow_factor:B};return le.projection.name==="globe"&&(ie.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],ie.u_zoom_transition=x,ie.u_inv_rot_matrix=T,ie.u_merc_center=b,ie.u_up_dir=le.projection.upVector(new sn(0,0,0),b[0]*Zt,b[1]*Zt),ie.u_height_lift=g),ie},VQ=(r,e,i)=>({u_matrix:r,u_edge_radius:e,u_vertical_scale:i}),UQ=(r,e,i,a,l,u,h,g,x,b,T,M,A,O)=>{const B=kL(r,e,i,a,l,u,h,x,b,T,M,A,O,1,[0,0,0]),V={u_height_factor:-Math.pow(2,h.overscaledZ)/g.tileSize/8};return ct(B,RL(e,g),V)},OL=(r,e)=>({u_matrix:r,u_emissive_strength:e}),zL=(r,e,i,a)=>ct(OL(r,e),RL(i,a)),HQ=(r,e,i)=>({u_matrix:r,u_world:i,u_emissive_strength:e}),GQ=(r,e,i,a,l)=>ct(zL(r,e,i,a),{u_world:l}),qQ=(r,e,i,a)=>{const l=Zt/i.tileSize;return{u_matrix:r,u_camera_to_center_distance:e.getCameraToCenterDistance(a),u_extrude_scale:[e.pixelsToGLUnits[0]/l,e.pixelsToGLUnits[1]/l]}},DL=(r,e,i=1)=>({u_matrix:r,u_color:e,u_overlay:0,u_overlay_scale:i}),WQ=U.create(),KQ=(r,e,i,a,l,u,h)=>{const g=r.transform,x=g.projection.name==="globe",b=x?Up(g.zoom,e.canonical)*g._pixelsPerMercatorPixel:$g(i,1,u),T={u_matrix:e.projMatrix,u_extrude_scale:b,u_intensity:h,u_inv_rot_matrix:WQ,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(x){T.u_inv_rot_matrix=a,T.u_merc_center=l,T.u_tile_id=[e.canonical.x,e.canonical.y,1<<e.canonical.z],T.u_zoom_transition=Na(g.zoom);const M=l[0]*Zt,A=l[1]*Zt;T.u_up_dir=g.projection.upVector(new sn(0,0,0),M,A)}return T},LL=(r,e,i,a,l,u,h,g,x,b,T)=>{return{u_matrix:r,u_normalize_matrix:e,u_globe_matrix:i,u_tl_parent:a,u_scale_parent:l,u_fade_t:u.mix,u_opacity:u.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(A=h.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(M=h.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:ZQ(h.paint.get("raster-hue-rotate")),u_perspective_transform:g,u_colorization_mix:b,u_colorization_scale:XQ(T),u_color_ramp:x};var M,A};function ZQ(r){r*=Math.PI/180;const e=Math.sin(r),i=Math.cos(r);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}function XQ([r,e]){if(r===e)return[r,e];const i=(e+r)/2,a=(e-r)/2*256/255;return[-(r=i-a)/((e=i+a)-r),1/(e-r)]}const $L=U.create(),BL=(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W)=>{const q=l.transform,ne={u_is_size_zoom_constant:+(r==="constant"||r==="source"),u_is_size_feature_constant:+(r==="constant"||r==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:q.getCameraToCenterDistance(V),u_rotate_symbol:+i,u_aspect_ratio:q.width/q.height,u_fade_change:l.options.fadeDuration?l.symbolFadeChange:1,u_matrix:u,u_label_plane_matrix:h,u_coord_matrix:g,u_is_text:+x,u_pitch_with_map:+a,u_texsize:b,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:$L,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:$L,u_up_vector:[0,-1,0],u_icon_transition:W||0};return V.name==="globe"&&(ne.u_tile_id=[T.canonical.x,T.canonical.y,1<<T.canonical.z],ne.u_zoom_transition=M,ne.u_inv_rot_matrix=O,ne.u_merc_center=A,ne.u_camera_forward=q._camera.forward(),ne.u_ecef_origin=function(ae,le){const ie=[0,0,0],ue=vs(ia(le.canonical));return ce.transformMat4(ie,ie,ue),ce.transformMat4(ie,ie,ae),ie}(q.globeMatrix,T.toUnwrapped()),ne.u_tile_matrix=Float32Array.from(q.globeMatrix),ne.u_up_vector=B),ne},FL=(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W)=>ct(BL(r,e,i,a,l,u,h,g,x,b,M,A,O,B,V,W),{u_gamma_scale:a?l.transform.getCameraToCenterDistance(W)*Math.cos(l.terrain?0:l.transform._pitch):1,u_device_pixel_ratio:Qr.devicePixelRatio,u_is_halo:+T,undefined:void 0}),YQ=(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V)=>ct(FL(r,e,i,a,l,u,h,g,!0,x,!0,T,M,A,O,B,V),{u_texsize_icon:b,u_texture_icon:1}),JQ=(r,e,i,a)=>({u_matrix:r,u_emissive_strength:e,u_opacity:i,u_color:a}),QQ=(r,e,i,a,l,u,h)=>ct(function(g,x,b,T){const M=b.imageManager.getPattern(g.toString(),x),{width:A,height:O}=b.imageManager.getPixelSize(x),B=Math.pow(2,T.tileID.overscaledZ),V=T.tileSize*Math.pow(2,b.transform.tileZoom)/B,W=V*(T.tileID.canonical.x+T.tileID.wrap*B),q=V*T.tileID.canonical.y;return{u_image:0,u_pattern_tl:M.tl,u_pattern_br:M.br,u_texsize:[A,O],u_pattern_size:M.displaySize,u_tile_units_to_pixels:1/$g(T,1,b.transform.tileZoom),u_pixel_coord_upper:[W>>16,q>>16],u_pixel_coord_lower:[65535&W,65535&q]}}(l,u,a,h),{u_matrix:r,u_emissive_strength:e,u_opacity:i}),Ic={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},c4=(r,e,i,a,l,u,h,g,x,b,T,M=[0,0,0])=>{const A=a.style.light,O=A.properties.get("position"),B=[-O.x,-O.y,O.z],V=F.create();A.properties.get("anchor")==="viewport"&&(F.fromRotation(V,-a.transform.angle),ce.transformMat3(B,B,V));const W=b.alphaMode==="MASK",q=A.properties.get("color"),ne=T.paint.get("model-ambient-occlusion-intensity"),ae=T.paint.get("model-color").constantOr(Qn.white),le=T.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:r,u_lighting_matrix:e,u_normal_matrix:i,u_lightpos:B,u_lightintensity:A.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_camera_pos:M,u_opacity:l,u_baseTextureIsAlpha:0,u_alphaMask:+W,u_alphaCutoff:b.alphaCutoff,u_baseColorFactor:[u.r,u.g,u.b,u.a],u_emissiveFactor:[h[0],h[1],h[2],1],u_metallicFactor:g,u_roughnessFactor:x,u_baseColorTexture:Ic.BaseColor,u_metallicRoughnessTexture:Ic.MetallicRoughness,u_normalTexture:Ic.Normal,u_occlusionTexture:Ic.Occlusion,u_emissionTexture:Ic.Emission,u_color_mix:[ae.r,ae.g,ae.b,le],u_aoIntensity:ne}},NL=new Float32Array(16),jL=(r,e=NL,i=NL)=>({u_matrix:r,u_instance:e,u_node_matrix:i}),eee={fillExtrusion:r=>({u_matrix:new dn(r),u_lightpos:new xn(r),u_lightintensity:new Er(r),u_lightcolor:new xn(r),u_vertical_gradient:new Er(r),u_opacity:new Er(r),u_edge_radius:new Er(r),u_ao:new ei(r),u_tile_id:new xn(r),u_zoom_transition:new Er(r),u_inv_rot_matrix:new dn(r),u_merc_center:new ei(r),u_up_dir:new xn(r),u_height_lift:new Er(r),u_flood_light_color:new xn(r),u_vertical_scale:new Er(r),u_flood_light_intensity:new Er(r),u_ground_shadow_factor:new xn(r)}),fillExtrusionDepth:r=>({u_matrix:new dn(r),u_edge_radius:new Er(r),u_vertical_scale:new Er(r)}),fillExtrusionPattern:r=>({u_matrix:new dn(r),u_lightpos:new xn(r),u_lightintensity:new Er(r),u_lightcolor:new xn(r),u_vertical_gradient:new Er(r),u_height_factor:new Er(r),u_edge_radius:new Er(r),u_ao:new ei(r),u_tile_id:new xn(r),u_zoom_transition:new Er(r),u_inv_rot_matrix:new dn(r),u_merc_center:new ei(r),u_up_dir:new xn(r),u_height_lift:new Er(r),u_image:new ci(r),u_texsize:new ei(r),u_pixel_coord_upper:new ei(r),u_pixel_coord_lower:new ei(r),u_tile_units_to_pixels:new Er(r),u_opacity:new Er(r)}),fillExtrusionGroundEffect:r=>({u_matrix:new dn(r),u_opacity:new Er(r),u_ao_pass:new Er(r),u_meter_to_tile:new Er(r),u_ao:new ei(r),u_flood_light_intensity:new Er(r),u_flood_light_color:new xn(r),u_attenuation:new Er(r),u_edge_radius:new Er(r),u_fb:new ci(r),u_fb_size:new Er(r)}),fill:r=>({u_matrix:new dn(r),u_emissive_strength:new Er(r)}),fillPattern:r=>({u_matrix:new dn(r),u_emissive_strength:new Er(r),u_image:new ci(r),u_texsize:new ei(r),u_pixel_coord_upper:new ei(r),u_pixel_coord_lower:new ei(r),u_tile_units_to_pixels:new Er(r)}),fillOutline:r=>({u_matrix:new dn(r),u_emissive_strength:new Er(r),u_world:new ei(r)}),fillOutlinePattern:r=>({u_matrix:new dn(r),u_emissive_strength:new Er(r),u_world:new ei(r),u_image:new ci(r),u_texsize:new ei(r),u_pixel_coord_upper:new ei(r),u_pixel_coord_lower:new ei(r),u_tile_units_to_pixels:new Er(r)}),circle:r=>({u_camera_to_center_distance:new Er(r),u_extrude_scale:new Jc(r),u_device_pixel_ratio:new Er(r),u_matrix:new dn(r),u_inv_rot_matrix:new dn(r),u_merc_center:new ei(r),u_tile_id:new xn(r),u_zoom_transition:new Er(r),u_up_dir:new xn(r),u_emissive_strength:new Er(r)}),collisionBox:r=>({u_matrix:new dn(r),u_camera_to_center_distance:new Er(r),u_extrude_scale:new ei(r)}),collisionCircle:r=>({u_matrix:new dn(r),u_inv_matrix:new dn(r),u_camera_to_center_distance:new Er(r),u_viewport_size:new ei(r)}),debug:r=>({u_color:new mf(r),u_matrix:new dn(r),u_overlay:new ci(r),u_overlay_scale:new Er(r)}),clippingMask:r=>({u_matrix:new dn(r)}),heatmap:r=>({u_extrude_scale:new Er(r),u_intensity:new Er(r),u_matrix:new dn(r),u_inv_rot_matrix:new dn(r),u_merc_center:new ei(r),u_tile_id:new xn(r),u_zoom_transition:new Er(r),u_up_dir:new xn(r)}),heatmapTexture:r=>({u_image:new ci(r),u_color_ramp:new ci(r),u_opacity:new Er(r)}),hillshade:r=>({u_matrix:new dn(r),u_image:new ci(r),u_latrange:new ei(r),u_light:new ei(r),u_shadow:new mf(r),u_highlight:new mf(r),u_emissive_strength:new Er(r),u_accent:new mf(r)}),hillshadePrepare:r=>({u_matrix:new dn(r),u_image:new ci(r),u_dimension:new ei(r),u_zoom:new Er(r),u_unpack:new vl(r)}),line:r=>({u_matrix:new dn(r),u_pixels_to_tile_units:new Jc(r),u_device_pixel_ratio:new Er(r),u_units_to_pixels:new ei(r),u_dash_image:new ci(r),u_gradient_image:new ci(r),u_image_height:new Er(r),u_texsize:new ei(r),u_tile_units_to_pixels:new Er(r),u_alpha_discard_threshold:new Er(r),u_trim_offset:new ei(r),u_emissive_strength:new Er(r)}),linePattern:r=>({u_matrix:new dn(r),u_texsize:new ei(r),u_pixels_to_tile_units:new Jc(r),u_device_pixel_ratio:new Er(r),u_image:new ci(r),u_units_to_pixels:new ei(r),u_tile_units_to_pixels:new Er(r),u_alpha_discard_threshold:new Er(r)}),raster:r=>({u_matrix:new dn(r),u_normalize_matrix:new dn(r),u_globe_matrix:new dn(r),u_tl_parent:new ei(r),u_scale_parent:new Er(r),u_fade_t:new Er(r),u_opacity:new Er(r),u_image0:new ci(r),u_image1:new ci(r),u_brightness_low:new Er(r),u_brightness_high:new Er(r),u_saturation_factor:new Er(r),u_contrast_factor:new Er(r),u_spin_weights:new xn(r),u_perspective_transform:new ei(r),u_colorization_mix:new vl(r),u_colorization_scale:new ei(r),u_color_ramp:new ci(r)}),symbolIcon:r=>({u_is_size_zoom_constant:new ci(r),u_is_size_feature_constant:new ci(r),u_size_t:new Er(r),u_size:new Er(r),u_camera_to_center_distance:new Er(r),u_rotate_symbol:new ci(r),u_aspect_ratio:new Er(r),u_fade_change:new Er(r),u_matrix:new dn(r),u_label_plane_matrix:new dn(r),u_coord_matrix:new dn(r),u_is_text:new ci(r),u_pitch_with_map:new ci(r),u_texsize:new ei(r),u_tile_id:new xn(r),u_zoom_transition:new Er(r),u_inv_rot_matrix:new dn(r),u_merc_center:new ei(r),u_camera_forward:new xn(r),u_tile_matrix:new dn(r),u_up_vector:new xn(r),u_ecef_origin:new xn(r),u_texture:new ci(r),u_icon_transition:new Er(r)}),symbolSDF:r=>({u_is_size_zoom_constant:new ci(r),u_is_size_feature_constant:new ci(r),u_size_t:new Er(r),u_size:new Er(r),u_camera_to_center_distance:new Er(r),u_rotate_symbol:new ci(r),u_aspect_ratio:new Er(r),u_fade_change:new Er(r),u_matrix:new dn(r),u_label_plane_matrix:new dn(r),u_coord_matrix:new dn(r),u_is_text:new ci(r),u_pitch_with_map:new ci(r),u_texsize:new ei(r),u_texture:new ci(r),u_gamma_scale:new Er(r),u_device_pixel_ratio:new Er(r),u_tile_id:new xn(r),u_zoom_transition:new Er(r),u_inv_rot_matrix:new dn(r),u_merc_center:new ei(r),u_camera_forward:new xn(r),u_tile_matrix:new dn(r),u_up_vector:new xn(r),u_ecef_origin:new xn(r),u_is_halo:new ci(r)}),symbolTextAndIcon:r=>({u_is_size_zoom_constant:new ci(r),u_is_size_feature_constant:new ci(r),u_size_t:new Er(r),u_size:new Er(r),u_camera_to_center_distance:new Er(r),u_rotate_symbol:new ci(r),u_aspect_ratio:new Er(r),u_fade_change:new Er(r),u_matrix:new dn(r),u_label_plane_matrix:new dn(r),u_coord_matrix:new dn(r),u_is_text:new ci(r),u_pitch_with_map:new ci(r),u_texsize:new ei(r),u_texsize_icon:new ei(r),u_texture:new ci(r),u_texture_icon:new ci(r),u_gamma_scale:new Er(r),u_device_pixel_ratio:new Er(r),u_is_halo:new ci(r)}),background:r=>({u_matrix:new dn(r),u_emissive_strength:new Er(r),u_opacity:new Er(r),u_color:new mf(r)}),backgroundPattern:r=>({u_matrix:new dn(r),u_emissive_strength:new Er(r),u_opacity:new Er(r),u_image:new ci(r),u_pattern_tl:new ei(r),u_pattern_br:new ei(r),u_texsize:new ei(r),u_pattern_size:new ei(r),u_pixel_coord_upper:new ei(r),u_pixel_coord_lower:new ei(r),u_tile_units_to_pixels:new Er(r)}),terrainRaster:wL,terrainDepth:wL,skybox:r=>({u_matrix:new dn(r),u_sun_direction:new xn(r),u_cubemap:new ci(r),u_opacity:new Er(r),u_temporal_offset:new Er(r)}),skyboxGradient:r=>({u_matrix:new dn(r),u_color_ramp:new ci(r),u_center_direction:new xn(r),u_radius:new Er(r),u_opacity:new Er(r),u_temporal_offset:new Er(r)}),skyboxCapture:r=>({u_matrix_3f:new a1(r),u_sun_direction:new xn(r),u_sun_intensity:new Er(r),u_color_tint_r:new vl(r),u_color_tint_m:new vl(r),u_luminance:new Er(r)}),globeRaster:r=>({u_proj_matrix:new dn(r),u_globe_matrix:new dn(r),u_normalize_matrix:new dn(r),u_merc_matrix:new dn(r),u_zoom_transition:new Er(r),u_merc_center:new ei(r),u_image0:new ci(r),u_grid_matrix:new a1(r),u_skirt_height:new Er(r),u_frustum_tl:new xn(r),u_frustum_tr:new xn(r),u_frustum_br:new xn(r),u_frustum_bl:new xn(r),u_globe_pos:new xn(r),u_globe_radius:new Er(r),u_viewport:new ei(r)}),globeAtmosphere:r=>({u_frustum_tl:new xn(r),u_frustum_tr:new xn(r),u_frustum_br:new xn(r),u_frustum_bl:new xn(r),u_horizon:new Er(r),u_transition:new Er(r),u_fadeout_range:new Er(r),u_color:new vl(r),u_high_color:new vl(r),u_space_color:new vl(r),u_temporal_offset:new Er(r),u_horizon_angle:new Er(r)}),model:r=>({u_matrix:new dn(r),u_lighting_matrix:new dn(r),u_normal_matrix:new dn(r),u_lightpos:new xn(r),u_lightintensity:new Er(r),u_lightcolor:new xn(r),u_camera_pos:new xn(r),u_opacity:new Er(r),u_baseColorFactor:new vl(r),u_emissiveFactor:new vl(r),u_metallicFactor:new Er(r),u_roughnessFactor:new Er(r),u_baseTextureIsAlpha:new ci(r),u_alphaMask:new ci(r),u_alphaCutoff:new Er(r),u_baseColorTexture:new ci(r),u_metallicRoughnessTexture:new ci(r),u_normalTexture:new ci(r),u_occlusionTexture:new ci(r),u_emissionTexture:new ci(r),u_color_mix:new vl(r),u_aoIntensity:new Er(r)}),modelDepth:r=>({u_matrix:new dn(r),u_instance:new dn(r),u_node_matrix:new dn(r)}),groundShadow:r=>({u_matrix:new dn(r),u_ground_shadow_factor:new xn(r)}),stars:r=>({u_matrix:new dn(r),u_up:new xn(r),u_right:new xn(r),u_intensity_multiplier:new Er(r)})};let gC;function VL(r,e,i,a,l,u,h){const g=r.context,x=g.gl,b=r.transform,T=r.getOrCreateProgram("collisionBox"),M=[];let A=0,O=0;for(let le=0;le<a.length;le++){const ie=a[le],ue=e.getTile(ie),Ee=ue.getBucket(i);if(!Ee)continue;const Be=dQ(ie,Ee,b);let je=Be;l[0]===0&&l[1]===0||(je=r.translatePosMatrix(Be,ue,l,u));const Ge=h?Ee.textCollisionBox:Ee.iconCollisionBox,tt=Ee.collisionCircleArray;if(tt.length>0){const Ze=U.create(),nt=je;U.mul(Ze,Ee.placementInvProjMatrix,b.glCoordMatrix),U.mul(Ze,Ze,Ee.placementViewportMatrix),M.push({circleArray:tt,circleOffset:O,transform:nt,invTransform:Ze,projection:Ee.getProjection()}),A+=tt.length/4,O=A}Ge&&(r.terrain&&r.terrain.setupElevationDraw(ue,T),T.draw(r,x.LINES,Bn.disabled,mi.disabled,r.colorModeForRenderPass(),yi.disabled,qQ(je,b,ue,Ee.getProjection()),i.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,null,b.zoom,null,[Ge.collisionVertexBuffer,Ge.collisionVertexBufferExt]))}if(!h||!M.length)return;const B=r.getOrCreateProgram("collisionCircle"),V=new K0;V.resize(4*A),V._trim();let W=0;for(const le of M)for(let ie=0;ie<le.circleArray.length/4;ie++){const ue=4*ie,Ee=le.circleArray[ue+0],Be=le.circleArray[ue+1],je=le.circleArray[ue+2],Ge=le.circleArray[ue+3];V.emplace(W++,Ee,Be,je,Ge,0),V.emplace(W++,Ee,Be,je,Ge,1),V.emplace(W++,Ee,Be,je,Ge,2),V.emplace(W++,Ee,Be,je,Ge,3)}(!gC||gC.length<2*A)&&(gC=function(le){const ie=2*le,ue=new Ca;ue.resize(ie),ue._trim();for(let Ee=0;Ee<ie;Ee++){const Be=6*Ee;ue.uint16[Be+0]=4*Ee+0,ue.uint16[Be+1]=4*Ee+1,ue.uint16[Be+2]=4*Ee+2,ue.uint16[Be+3]=4*Ee+2,ue.uint16[Be+4]=4*Ee+3,ue.uint16[Be+5]=4*Ee+0}return ue}(A));const q=g.createIndexBuffer(gC,!0),ne=g.createVertexBuffer(V,CX.members,!0);for(const le of M){const ie={u_matrix:le.transform,u_inv_matrix:le.invTransform,u_camera_to_center_distance:(ae=b).getCameraToCenterDistance(le.projection),u_viewport_size:[ae.width,ae.height]};B.draw(r,x.TRIANGLES,Bn.disabled,mi.disabled,r.colorModeForRenderPass(),yi.disabled,ie,i.id,ne,q,qi.simpleSegment(0,2*le.circleOffset,le.circleArray.length,le.circleArray.length/2),null,b.zoom)}var ae;ne.destroy(),q.destroy()}const UL=U.create();function tee({width:r,height:e,anchor:i,textOffset:a,textScale:l},u){const{horizontalAlign:h,verticalAlign:g}=RS(i),x=-(h-.5)*r,b=-(g-.5)*e,T=x3(i,a);return new oe((x/l+T[0])*u,(b/l+T[1])*u)}function ree(r,e,i,a,l,u,h,g,x,b,T){const M=r.text.placedSymbolArray,A=r.text.dynamicLayoutVertexArray,O=r.icon.dynamicLayoutVertexArray,B={},V=r.getProjection(),W=r4(g,V,u),q=u.elevation,ne=V.upVectorScale(g.canonical,u.center.lat,u.worldSize).metersToTile;A.clear();for(let ae=0;ae<M.length;ae++){const le=M.get(ae),{tileAnchorX:ie,tileAnchorY:ue,numGlyphs:Ee}=le,Be=le.hidden||!le.crossTileID||r.allowVerticalPlacement&&!le.placedOrientation?null:a[le.crossTileID];if(Be){let je=0,Ge=0,tt=0;if(q){const Ft=q?q.getAtTileOffset(g,ie,ue):0,[Jt,tr,lr]=V.upVector(g.canonical,ie,ue);je=Ft*Jt*ne,Ge=Ft*tr*ne,tt=Ft*lr*ne}let[Ze,nt,Xe,ut]=wh(le.projectedAnchorX+je,le.projectedAnchorY+Ge,le.projectedAnchorZ+tt,i?W:h);const bt=z6(u.getCameraToCenterDistance(V),ut);let At=l.evaluateSizeForFeature(r.textSizeData,b,le)*bt/_s;i&&(At*=r.tilePixelRatio/x);const lt=tee(Be,At);i?({x:Ze,y:nt,z:Xe}=V.projectTilePoint(ie+lt.x,ue+lt.y,g.canonical),[Ze,nt,Xe]=wh(Ze+je,nt+Ge,Xe+tt,h)):(e&&lt._rotate(-u.angle),Ze+=lt.x,nt+=lt.y,Xe=0);const ft=r.allowVerticalPlacement&&le.placedOrientation===jo.vertical?Math.PI/2:0;for(let Ft=0;Ft<Ee;Ft++)Lv(A,Ze,nt,Xe,ft);T&&le.associatedIconIndex>=0&&(B[le.associatedIconIndex]={x:Ze,y:nt,z:Xe,angle:ft})}else Bv(Ee,A)}if(T){O.clear();const ae=r.icon.placedSymbolArray;for(let le=0;le<ae.length;le++){const ie=ae.get(le),{numGlyphs:ue}=ie,Ee=B[le];if(ie.hidden||!Ee)Bv(ue,O);else{const{x:Be,y:je,z:Ge,angle:tt}=Ee;for(let Ze=0;Ze<ue;Ze++)Lv(O,Be,je,Ge,tt)}}r.icon.dynamicLayoutVertexBuffer.updateData(O)}r.text.dynamicLayoutVertexBuffer.updateData(A)}function nee(r,e,i){return i.iconsInText&&e?"symbolTextAndIcon":r?"symbolSDF":"symbolIcon"}function HL(r,e,i,a,l,u,h,g,x,b,T,M){const A=r.context,O=A.gl,B=r.transform,V=g==="map",W=x==="map",q=V&&i.layout.get("symbol-placement")!=="point",ne=V&&!W&&!q,ae=i.layout.get("symbol-sort-key").constantOr(1)!==void 0;let le=!1;const ie=r.depthModeForSublayer(0,Bn.ReadOnly),ue=[ro(B.center.lng),Eo(B.center.lat)],Ee=i.layout.get("text-variable-anchor"),Be=B.projection.name==="globe",je=[],Ge=[0,-1,0];let tt=Ge;!Be&&!B.mercatorFromTransition||V||(tt=function(Ze){const nt=Ze._camera.getWorldToCamera(Ze.worldSize,1),Xe=U.multiply([],nt,Ze.globeMatrix);U.invert(Xe,Xe);const ut=[0,0,0],bt=[0,1,0,0];return Hi.transformMat4(bt,bt,Xe),ut[0]=bt[0],ut[1]=bt[1],ut[2]=bt[2],ce.normalize(ut,ut),ut}(B));for(const Ze of a){const nt=e.getTile(Ze),Xe=nt.getBucket(i);if(!Xe||Xe.projection.name==="mercator"&&Be)continue;const ut=l?Xe.text:Xe.icon;if(!ut||Xe.fullyClipped||!ut.segments.get().length)continue;const bt=ut.programConfigurations.get(i.id),At=l||Xe.sdfIcons,lt=l?Xe.textSizeData:Xe.iconSizeData,ft=W||B.pitch!==0,Ft=bd(lt,B.zoom);let Jt,tr,lr,pr,er=[0,0],or=null;if(l)tr=nt.glyphAtlasTexture,lr=O.LINEAR,Jt=nt.glyphAtlasTexture.size,Xe.iconsInText&&(er=nt.imageAtlasTexture.size,or=nt.imageAtlasTexture,pr=ft||r.options.rotating||r.options.zooming||lt.kind==="composite"||lt.kind==="camera"?O.LINEAR:O.NEAREST);else{const Uo=i.layout.get("icon-size").constantOr(0)!==1||Xe.iconsNeedLinear;tr=nt.imageAtlasTexture,lr=At||r.options.rotating||r.options.zooming||Uo||ft?O.LINEAR:O.NEAREST,Jt=nt.imageAtlasTexture.size}const kr=Xe.projection.name==="globe",Hr=kr?tt:Ge,Ur=kr?Na(B.zoom):0,qr=r4(Ze,Xe.getProjection(),B),yn=B.calculatePixelsToTileUnitsMatrix(nt),Dn=XS(qr,nt.tileID.canonical,W,V,B,Xe.getProjection(),yn),ui=r.terrain&&W&&q?U.invert(U.create(),Dn):UL,Mi=O6(qr,nt.tileID.canonical,W,V,B,Xe.getProjection(),yn),Yn=Ee&&Xe.hasTextData(),Un=Xe.hasIconTextFit()&&Yn&&Xe.hasIconData();if(q){const Uo=B.elevation,Qo=Uo?Uo.getAtTileOffsetFunc(Ze,B.center.lat,B.worldSize,Xe.getProjection()):null,ao=k6(qr,nt.tileID.canonical,W,V,B,Xe.getProjection(),yn);rJ(Xe,qr,r,l,ao,Mi,W,b,Qo,Ze)}const On=q||l&&Ee||Un,Tn=r.translatePosMatrix(qr,nt,u,h),_i=On?UL:Dn,Di=r.translatePosMatrix(Mi,nt,u,h,!0),ri=Xe.getProjection().createInversionMatrix(B,Ze.canonical),oo=i.paint.get("icon-image-cross-fade").constantOr(0),Vo=[];r.terrainRenderModeElevated()&&W&&Vo.push("PITCH_WITH_MAP_TERRAIN"),kr&&(Vo.push("PROJECTION_GLOBE_VIEW"),On&&Vo.push("PROJECTED_POS_ON_VIEWPORT")),oo>0&&Vo.push("ICON_TRANSITION"),ut.zOffsetVertexBuffer&&Vo.push("Z_OFFSET");const To=At&&i.paint.get(l?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let yo;yo=At?Xe.iconsInText?YQ(lt.kind,Ft,ne,W,r,Tn,_i,Di,Jt,er,Ze,Ur,ue,ri,Hr,Xe.getProjection()):FL(lt.kind,Ft,ne,W,r,Tn,_i,Di,l,Jt,!0,Ze,Ur,ue,ri,Hr,Xe.getProjection()):BL(lt.kind,Ft,ne,W,r,Tn,_i,Di,l,Jt,Ze,Ur,ue,ri,Hr,Xe.getProjection(),oo);const Pa={program:r.getOrCreateProgram(nee(At,l,Xe),{config:bt,defines:Vo}),buffers:ut,uniformValues:yo,atlasTexture:tr,atlasTextureIcon:or,atlasInterpolation:lr,atlasInterpolationIcon:pr,isSDF:At,hasHalo:To,tile:nt,labelPlaneMatrixInv:ui};if(ae&&Xe.canOverlap){le=!0;const Uo=ut.segments.get();for(const Qo of Uo)je.push({segments:new qi([Qo]),sortKey:Qo.sortKey,state:Pa})}else je.push({segments:ut.segments,sortKey:0,state:Pa})}le&&je.sort((Ze,nt)=>Ze.sortKey-nt.sortKey);for(const Ze of je){const nt=Ze.state;if(r.terrain&&r.terrain.setupElevationDraw(nt.tile,nt.program,{useDepthForOcclusion:B.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:nt.labelPlaneMatrixInv}),A.activeTexture.set(O.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,O.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(A.activeTexture.set(O.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,O.CLAMP_TO_EDGE)),r.uploadCommonLightUniforms(r.context,nt.program),nt.hasHalo){const Xe=nt.uniformValues;Xe.u_is_halo=1,u4(nt.buffers,Ze.segments,i,r,nt.program,ie,T,M,Xe,2),Xe.u_is_halo=0}else{if(nt.isSDF){const Xe=nt.uniformValues;nt.hasHalo&&(Xe.u_is_halo=1,u4(nt.buffers,Ze.segments,i,r,nt.program,ie,T,M,Xe,1)),Xe.u_is_halo=0}u4(nt.buffers,Ze.segments,i,r,nt.program,ie,T,M,nt.uniformValues,1)}}}function u4(r,e,i,a,l,u,h,g,x,b){const T=[r.dynamicLayoutVertexBuffer,r.opacityVertexBuffer,r.iconTransitioningVertexBuffer,r.globeExtVertexBuffer,r.zOffsetVertexBuffer];l.draw(a,a.context.gl.TRIANGLES,u,h,g,yi.disabled,x,i.id,r.layoutVertexBuffer,r.indexBuffer,e,i.paint,a.transform.zoom,r.programConfigurations.get(i.id),T,b)}function GL(r,e,i,a,l,u,h){const g=r.context.gl,x=i.paint.get("fill-pattern"),b=x&&x.constantOr(1);let T,M,A,O,B;h?(M=b&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",T=g.LINES):(M=b?"fillPattern":"fill",T=g.TRIANGLES);for(const V of a){const W=e.getTile(V);if(b&&!W.patternsLoaded())continue;const q=W.getBucket(i);if(!q)continue;r.prepareDrawTile();const ne=q.programConfigurations.get(i.id),ae=r.isTileAffectedByFog(V),le=r.getOrCreateProgram(M,{config:ne,overrideFog:ae});b&&(r.context.activeTexture.set(g.TEXTURE0),W.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),ne.updatePaintBuffers());const ie=x.constantOr(null);if(ie&&W.imageAtlas){const Be=W.imageAtlas.patternPositions[ie.toString()];Be&&ne.setConstantPatternPositions(Be)}const ue=r.translatePosMatrix(V.projMatrix,W,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor")),Ee=i.paint.get("fill-emissive-strength");if(h){O=q.indexBuffer2,B=q.segments2;const Be=r.terrain&&r.terrain.renderingToTexture?r.terrain.drapeBufferSize:[g.drawingBufferWidth,g.drawingBufferHeight];A=M==="fillOutlinePattern"&&b?GQ(ue,Ee,r,W,Be):HQ(ue,Ee,Be)}else O=q.indexBuffer,B=q.segments,A=b?zL(ue,Ee,r,W):OL(ue,Ee);r.uploadCommonUniforms(r.context,le,V.toUnwrapped()),le.draw(r,T,l,r.stencilModeForClipping(V),u,yi.disabled,A,i.id,q.layoutVertexBuffer,O,B,i.paint,r.transform.zoom,ne,void 0)}}function yC(r,e,i,a,l,u,h,g){const x=r.context,b=x.gl,T=r.transform,M=i.paint.get("fill-extrusion-pattern"),A=M.constantOr(1),O=i.paint.get("fill-extrusion-opacity"),B=r.style.enable3dLights(),V=i.paint.get(B&&!A?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),W=[i.paint.get("fill-extrusion-ambient-occlusion-intensity"),V],q=i.layout.get("fill-extrusion-edge-radius"),ne=q>0&&!i.paint.get("fill-extrusion-rounded-roof"),ae=ne?0:q,le=T.projection.name==="globe"?m2():0,ie=T.projection.name==="globe",ue=ie?Na(T.zoom):0,Ee=[ro(T.center.lng),Eo(T.center.lat)],Be=i.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),je=i.paint.get("fill-extrusion-flood-light-intensity"),Ge=i.paint.get("fill-extrusion-vertical-scale"),tt=jv(r,i.paint.get("fill-extrusion-cutoff-fade-range")),Ze=[];let nt;ie&&Ze.push("PROJECTION_GLOBE_VIEW"),W[0]>0&&Ze.push("FAUX_AO"),ne&&Ze.push("ZERO_ROOF_RADIUS"),g&&Ze.push("HAS_CENTROID"),je>0&&Ze.push("FLOOD_LIGHT"),tt.shouldRenderCutoff&&Ze.push("RENDER_CUTOFF");const Xe=r.renderPass==="shadow",ut=r.shadowRenderer,bt=Xe&&!!ut;r.shadowRenderer&&(r.shadowRenderer.useNormalOffset=!0);let At=[0,0,0];if(ut){const ft=r.style.directionalLight,Ft=r.style.ambientLight;ft&&Ft&&(At=f4(ft,Ft)),nt=Ze.concat(["SHADOWS_SINGLE_CASCADE"])}const lt=bt?"fillExtrusionDepth":A?"fillExtrusionPattern":"fillExtrusion";for(const ft of a){const Ft=e.getTile(ft),Jt=Ft.getBucket(i);if(!Jt||Jt.projection.name!==T.projection.name)continue;let tr=!1;ut&&(tr=ut.getMaxCascadeForTile(ft.toUnwrapped())===0);const lr=r.isTileAffectedByFog(ft),pr=Jt.programConfigurations.get(i.id),er=r.getOrCreateProgram(lt,{config:pr,defines:tr?nt:Ze,overrideFog:lr});if(r.terrain){const qr=r.terrain;r.style.terrainSetForDrapingOnly(),qr.setupElevationDraw(Ft,er,{useMeterToDem:!0})}if(!Jt.centroidVertexBuffer){const qr=er.attributes.a_centroid_pos;qr!==void 0&&b.vertexAttrib2f(qr,0,0)}!Xe&&ut&&ut.setupShadows(Ft.tileID.toUnwrapped(),er,"vector-tile",Ft.tileID.overscaledZ),A&&(r.context.activeTexture.set(b.TEXTURE0),Ft.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),pr.updatePaintBuffers());const or=M.constantOr(null);if(or&&Ft.imageAtlas){const qr=Ft.imageAtlas.patternPositions[or.toString()];qr&&pr.setConstantPatternPositions(qr)}const kr=i.paint.get("fill-extrusion-vertical-gradient");let Hr;if(Xe&&ut){if(lee(Ft.tileID,Jt,r))continue;const qr=ut.calculateShadowPassMatrixFromTile(Ft.tileID.toUnwrapped());Hr=VQ(qr,ae,Ge)}else{const qr=r.translatePosMatrix(ft.projMatrix,Ft,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),yn=T.projection.createInversionMatrix(T,ft.canonical);Hr=A?UQ(qr,r,kr,O,W,ae,ft,Ft,le,ue,Ee,yn,Be,Ge):kL(qr,r,kr,O,W,ae,ft,le,ue,Ee,yn,Be,Ge,je,At)}r.uploadCommonUniforms(x,er,ft.toUnwrapped(),null,tt);const Ur=[];(r.terrain||g)&&Ur.push(Jt.centroidVertexBuffer),ie&&Ur.push(Jt.layoutVertexExtBuffer),er.draw(r,x.gl.TRIANGLES,l,u,h,yi.backCCW,Hr,i.id,Jt.layoutVertexBuffer,Jt.indexBuffer,Jt.segments,i.paint,r.transform.zoom,pr,Ur)}r.shadowRenderer&&(r.shadowRenderer.useNormalOffset=!1)}function Uv(r,e,i,a,l,u,h,g,x,b,T,M,A,O,B,V,W,q,ne){const ae=r.context,le=ae.gl,ie=r.transform,ue=r.transform.zoom,Ee=[],Be=jv(r,i.paint.get("fill-extrusion-cutoff-fade-range"));b==="clear"?(Ee.push("CLEAR_SUBPASS"),ne&&(Ee.push("CLEAR_FROM_TEXTURE"),ae.activeTexture.set(le.TEXTURE0),ne.bind(le.LINEAR,le.CLAMP_TO_EDGE))):b==="sdf"&&Ee.push("SDF_SUBPASS"),W&&Ee.push("HAS_CENTROID"),Be.shouldRenderCutoff&&Ee.push("RENDER_CUTOFF");const je=i.layout.get("fill-extrusion-edge-radius"),Ge=(tt,Ze,nt,Xe,ut)=>{const bt=Ze.programConfigurations.get(i.id),At=r.isTileAffectedByFog(tt),lt=r.getOrCreateProgram("fillExtrusionGroundEffect",{config:bt,defines:Ee,overrideFog:At}),ft=((Jt,tr,lr,pr,er,or,kr,Hr,Ur,qr,yn)=>({u_matrix:tr,u_opacity:lr,u_ao_pass:pr?1:0,u_meter_to_tile:er,u_ao:or,u_flood_light_intensity:kr,u_flood_light_color:Hr,u_attenuation:Ur,u_edge_radius:qr,u_fb:0,u_fb_size:yn}))(0,Xe,T,x,ut,[M,A*ut],O,B,V,ue>=17?0:je*ut,ne?ne.size[0]:0),Ft=[];W&&Ft.push(Ze.hiddenByLandmarkVertexBuffer),r.uploadCommonUniforms(ae,lt,tt.toUnwrapped(),null,Be),lt.draw(r,ae.gl.TRIANGLES,l,u,h,g,ft,i.id,Ze.vertexBuffer,Ze.indexBuffer,nt,i.paint,ue,bt,Ft)};for(const tt of a){const Ze=e.getTile(tt),nt=Ze.getBucket(i);if(!nt||nt.projection.name!==ie.projection.name||!nt.groundEffect||nt.groundEffect&&!nt.groundEffect.hasData())continue;const Xe=nt.groundEffect,ut=1/nt.tileToMeter;{const bt=r.translatePosMatrix(tt.projMatrix,Ze,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),At=Xe.getDefaultSegment();Ge(tt,Xe,At,bt,ut)}if(q)for(let bt=0;bt<4;bt++){const At=nn[bt](tt),lt=e.getTile(At);if(!lt)continue;const ft=lt.getBucket(i);if(!ft||ft.projection.name!==ie.projection.name||!ft.groundEffect||ft.groundEffect&&!ft.groundEffect.hasData())continue;const Ft=ft.groundEffect;let Jt,tr;bt===0?(Jt=[-Zt,0,0],tr=1):bt===1?(Jt=[Zt,0,0],tr=0):bt===2?(Jt=[0,-Zt,0],tr=3):(Jt=[0,Zt,0],tr=2);const lr=Ft.regionSegments[tr];if(!lr)continue;const pr=new Float32Array(16);U.translate(pr,tt.projMatrix,Jt),Ge(tt,Ft,lr,r.translatePosMatrix(pr,Ze,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),ut)}}}function iee(r,e,i,a,l,u,h){a.centroidVertexArray.length===0&&a.createCentroidsBuffer();const g=u?u.findDEMTileFor(i):null;if(!(g&&g.dem||h))return;const x=q=>{const ne=e.getSource().minzoom,ae=ie=>{const ue=e.getTileByID(ie);if(ue&&ue.hasData())return ue.getBucket(l)},le=[0,-1,1];for(const ie of le){if(q.overscaledZ+ie<ne)continue;const ue=ae(q.calculateScaledKey(q.overscaledZ+ie));if(ue)return ue}},b=[0,0,0],T=(q,ne)=>(b[0]=Math.min(q.min.y,ne.min.y),b[1]=Math.max(q.max.y,ne.max.y),b[2]=Zt-ne.min.x>q.max.x?ne.min.x-Zt:q.max.x,b),M=(q,ne)=>(b[0]=Math.min(q.min.x,ne.min.x),b[1]=Math.max(q.max.x,ne.max.x),b[2]=Zt-ne.min.y>q.max.y?ne.min.y-Zt:q.max.y,b),A=[(q,ne)=>T(q,ne),(q,ne)=>T(ne,q),(q,ne)=>M(q,ne),(q,ne)=>M(ne,q)],O=(q,ne,ae,le,ie,ue,Ee)=>{if(!u)return 0;const Be=[[ue?ae:q,ue?q:ae,0],[ue?ae:ne,ue?ne:ae,0]],je=Ee<0?Zt+Ee:Ee,Ge=[ue?je:(q+ne)/2,ue?(q+ne)/2:je,0];return ae===0&&Ee<0||ae!==0&&Ee>0?u.getForTilePoints(ie,[Ge],!0,le):Be.push(Ge),u.getForTilePoints(i,Be,!0,g),Math.max(Be[0][2],Be[1][2],Ge[2])/u.exaggeration()};for(let q=0;q<4;q++){const ne=a.borderFeatureIndices[q];if(ne.length===0)continue;const ae=nn[q](i),le=x(ae);if(!(le&&le instanceof ux)||a.borderDoneWithNeighborZ[q]===le.canonical.z)continue;le.centroidVertexArray.length===0&&le.createCentroidsBuffer();const ie=u?u.findDEMTileFor(ae):null;if(!(ie&&ie.dem||h))continue;const ue=(q<2?1:5)-q,Ee=le.borderDoneWithNeighborZ[ue]!==a.canonical.z,Be=le.borderFeatureIndices[ue];let je=0;if(a.canonical.z!==le.canonical.z){for(const Ge of ne)a.showCentroid(a.featuresOnBorder[Ge]);if(Ee)for(const Ge of Be)le.showCentroid(le.featuresOnBorder[Ge]);a.borderDoneWithNeighborZ[q]=le.canonical.z,le.borderDoneWithNeighborZ[ue]=a.canonical.z}for(const Ge of ne){const tt=a.featuresOnBorder[Ge],Ze=a.centroidData[tt.centroidDataIndex],nt=tt.borders[q];let Xe;for(;je<Be.length;){Xe=le.featuresOnBorder[Be[je]];const ut=Xe.borders[ue];if(ut[1]>nt[0]+3||ut[0]>nt[0]-3)break;le.showCentroid(Xe),je++}if(Xe&&je<Be.length){const ut=je;let bt=0;for(;!(Xe.borders[ue][0]>nt[1]-3)&&(bt++,++je!==Be.length);)Xe=le.featuresOnBorder[Be[je]];if(Xe=le.featuresOnBorder[Be[ut]],bt>1){const ft=Xe.borders[ue];Math.abs(nt[0]-ft[0])<3&&Math.abs(nt[1]-ft[1])<3&&(bt=1,je=ut+1)}else if(bt===0){a.showCentroid(tt);continue}const At=le.centroidData[Xe.centroidDataIndex];h&&bt===1&&(((V=Ze).flags|(W=At).flags)&Cd?(V.flags|=Cd,W.flags|=Cd):(V.flags&=2147483647,W.flags&=2147483647));let lt=new oe(0,0);if(bt>1)je=ut;else if(ie&&ie.dem&&!(tt.intersectsCount()>1||Xe.intersectsCount()>1)){const ft=A[q](Ze,At),Ft=q%2?Zt-1:0;B=O(ft[0],Math.min(Zt-1,ft[1]),Ft,ie,ae,q<2,ft[2]),lt=new oe(Math.ceil(7*(B+450)),0)}Ze.centroidXY=At.centroidXY=lt,a.writeCentroidToBuffer(Ze),le.writeCentroidToBuffer(At)}else a.showCentroid(tt)}a.borderDoneWithNeighborZ[q]=le.canonical.z,le.borderDoneWithNeighborZ[ue]=a.canonical.z}var B,V,W;(a.needsCentroidUpdate||!a.centroidVertexBuffer&&a.centroidVertexArray.length!==0)&&a.uploadCentroid(r)}const oee=[1,0,0],aee=[0,1,0],see=[0,0,1];function lee(r,e,i){const a=i.transform,l=i.shadowRenderer;if(!l)return!0;const u=r.toUnwrapped(),h=a.tileSize*l._cascades[i.currentShadowCascade].scale;let g=e.maxHeight;if(a.elevation){const V=a.elevation.getMinMaxForTile(r);V&&(g+=V.max)}const x=[...l.shadowDirection];x[2]=-x[2];const b=l.computeSimplifiedTileShadowVolume(u,g,h,x);if(!b)return!1;const T=[oee,aee,see,x,[x[0],0,x[2]],[0,x[1],x[2]]],M=a.projection.name==="globe",A=a.scaleZoom(h),O=to.fromInvProjectionMatrix(a.invProjMatrix,a.worldSize,A,!M),B=l.getCurrentCascadeFrustum();return O.intersectsPrecise(b.vertices,b.planes,T)===0||B.intersectsPrecise(b.vertices,b.planes,T)===0}const cee=new Qn(1,0,0,1),uee=new Qn(0,1,0,1),hee=new Qn(0,0,1,1),dee=new Qn(1,0,1,1),fee=new Qn(0,1,1,1);function pee(r,e,i){const a=r.context,l=r.transform,u=a.gl,h=l.projection.name==="globe",g=h?["PROJECTION_GLOBE_VIEW"]:[];let x=i.projMatrix;if(h&&Na(l.zoom)>0){const Ge=Us(Fa(i.canonical,l));x=U.multiply(new Float32Array(16),l.globeMatrix,Ge),U.multiply(x,l.projMatrix,x)}const b=r.getOrCreateProgram("debug",{defines:g}),T=e.getTileByID(i.key);r.terrain&&r.terrain.setupElevationDraw(T,b);const M=Bn.disabled,A=mi.disabled,O=r.colorModeForRenderPass(),B="$debug";a.activeTexture.set(u.TEXTURE0),r.emptyTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),h?T._makeGlobeTileDebugBuffers(r.context,l):T._makeDebugTileBoundsBuffers(r.context,l.projection);const V=T._tileDebugBuffer||r.debugBuffer,W=T._tileDebugIndexBuffer||r.debugIndexBuffer,q=T._tileDebugSegments||r.debugSegments;b.draw(r,u.LINE_STRIP,M,A,O,yi.disabled,DL(x,Qn.red),B,V,W,q,null,null,null,[T._globeTileDebugBorderBuffer]);const ne=T.latestRawTileData,ae=Math.floor((ne&&ne.byteLength||0)/1024),le=e.getTile(i).tileSize,ie=512/Math.min(le,512)*(i.overscaledZ/l.zoom)*.5;let ue=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(ue+=` => ${i.overscaledZ}`),ue+=` ${ae}kb`,function(Ge,tt){Ge.initDebugOverlayCanvas();const Ze=Ge.debugOverlayCanvas,nt=Ge.context.gl,Xe=Ge.debugOverlayCanvas.getContext("2d");Xe.clearRect(0,0,Ze.width,Ze.height),Xe.shadowColor="white",Xe.shadowBlur=2,Xe.lineWidth=1.5,Xe.strokeStyle="white",Xe.textBaseline="top",Xe.font="bold 36px Open Sans, sans-serif",Xe.fillText(tt,5,5),Xe.strokeText(tt,5,5),Ge.debugOverlayTexture.update(Ze),Ge.debugOverlayTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}(r,ue);const Ee=T._tileDebugTextBuffer||r.debugBuffer,Be=T._tileDebugTextIndexBuffer||r.quadTriangleIndexBuffer,je=T._tileDebugTextSegments||r.debugSegments;b.draw(r,u.TRIANGLES,M,A,zi.alphaBlended,yi.disabled,DL(x,Qn.transparent,ie),B,Ee,Be,je,null,null,null,[T._globeTileDebugTextBuffer])}function qL(r,e,i,a){vC(r,0,e+i/2,r.transform.width,i,a)}function WL(r,e,i,a){vC(r,e-i/2,0,i,r.transform.height,a)}function vC(r,e,i,a,l,u){const h=r.context,g=h.gl;g.enable(g.SCISSOR_TEST),g.scissor(e*Qr.devicePixelRatio,i*Qr.devicePixelRatio,a*Qr.devicePixelRatio,l*Qr.devicePixelRatio),h.clear({color:u}),g.disable(g.SCISSOR_TEST)}const mee=ki([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:gee}=mee;function nm(r,e,i,a){r.emplaceBack(e,i,a)}class KL{constructor(e){this.vertexArray=new yl,this.indices=new Ca,nm(this.vertexArray,-1,-1,1),nm(this.vertexArray,1,-1,1),nm(this.vertexArray,-1,1,1),nm(this.vertexArray,1,1,1),nm(this.vertexArray,-1,-1,-1),nm(this.vertexArray,1,-1,-1),nm(this.vertexArray,-1,1,-1),nm(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,gee),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=qi.simpleSegment(0,0,36,12)}}function Hv(r,e,i,a,l,u){const h=r.context.gl,g=e.paint.get("sky-atmosphere-color"),x=e.paint.get("sky-atmosphere-halo-color"),b=e.paint.get("sky-atmosphere-sun-intensity"),T=((M,A,O,B,V)=>({u_matrix_3f:M,u_sun_direction:A,u_sun_intensity:O,u_color_tint_r:[B.r,B.g,B.b,B.a],u_color_tint_m:[V.r,V.g,V.b,V.a],u_luminance:5e-5}))(F.fromMat4(F.create(),a),l,b,g,x);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_CUBE_MAP_POSITIVE_X+u,e.skyboxTexture,0),i.draw(r,h.TRIANGLES,Bn.disabled,mi.disabled,zi.unblended,yi.frontCW,T,"skyboxCapture",e.skyboxGeometry.vertexBuffer,e.skyboxGeometry.indexBuffer,e.skyboxGeometry.segment)}const yee=ki([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class vee{constructor(e){const i=new ff;i.emplaceBack(-1,1,1,0,0),i.emplaceBack(1,1,1,1,0),i.emplaceBack(1,-1,1,1,1),i.emplaceBack(-1,-1,1,0,1);const a=new Ca;a.emplaceBack(0,1,2),a.emplaceBack(2,3,0),this.vertexBuffer=e.createVertexBuffer(i,yee.members),this.indexBuffer=e.createIndexBuffer(a),this.segments=qi.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const _ee=ki([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class xee{constructor(){this.colorModeAlphaBlendedWriteRGB=new zi([1,KS,1,KS],Qn.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new zi([1,0,1,0],Qn.transparent,[!1,!1,!1,!0])}update(e){const i=e.context;if(!this.atmosphereBuffer){this.atmosphereBuffer=new vee(i);const a=100,l=200,u=function(T){const M=se(30),A=[];for(let O=0;O<16e3;++O){const B=2*Math.PI*M(),V=Math.acos(1-2*M())-.5*Math.PI;A.push(ce.fromValues(Math.cos(V)*Math.cos(B),Math.cos(V)*Math.sin(B),Math.sin(V)))}return A}(),h=se(300),g=new X0,x=new Ca;let b=0;for(let T=0;T<u.length;++T){const M=ce.scale([],u[T],200),A=Math.max(0,1+.01*a*(1*h()-.5)),O=Math.max(0,1+.01*l*(1*h()-.5));g.emplaceBack(M[0],M[1],M[2],-1,-1,A,O),g.emplaceBack(M[0],M[1],M[2],1,-1,A,O),g.emplaceBack(M[0],M[1],M[2],1,1,A,O),g.emplaceBack(M[0],M[1],M[2],-1,1,A,O),x.emplaceBack(b+0,b+1,b+2),x.emplaceBack(b+0,b+2,b+3),b+=4}this.starsVx=i.createVertexBuffer(g,_ee.members),this.starsIdx=i.createIndexBuffer(x),this.starsSegments=qi.simpleSegment(0,0,g.length,x.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(e,i){const a=e.context,l=a.gl,u=e.transform,h=new Bn(l.LEQUAL,Bn.ReadOnly,[0,1]),g=Na(u.zoom),x=i.properties.get("color").toArray01(),b=i.properties.get("high-color").toArray01(),T=i.properties.get("space-color").toArray01PremultipliedAlpha(),M=5e-4,A=Qe((i.properties.get("horizon-blend")-0)/1*.2495+M,5e-4,.25),O=Nu(e,a,u)&&A===M?u.worldSize/(2*Math.PI*1.025)-1:u.globeRadius,B=e.frameCounter/1e3%1,V=ce.length(u.globeCenterInViewSpace),W=Math.sqrt(Math.pow(V,2)-Math.pow(O,2)),q=Math.acos(W/V),ne=ae=>{const le=u.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ae&&le.push("ALPHA_PASS");const ie=e.getOrCreateProgram("globeAtmosphere",{defines:le}),ue=((Be,je,Ge,tt,Ze,nt,Xe,ut,bt,At,lt,ft)=>({u_frustum_tl:Be,u_frustum_tr:je,u_frustum_br:Ge,u_frustum_bl:tt,u_horizon:Ze,u_transition:nt,u_fadeout_range:Xe,u_color:ut,u_high_color:bt,u_space_color:At,u_temporal_offset:lt,u_horizon_angle:ft}))(u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.frustumCorners.horizon,g,A,x,b,T,B,q);e.uploadCommonUniforms(a,ie);const Ee=this.atmosphereBuffer;Ee&&ie.draw(e,l.TRIANGLES,h,mi.disabled,ae?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,yi.backCW,ue,ae?"atmosphere_glow_alpha":"atmosphere_glow",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)};ne(!1),ne(!0)}drawStars(e,i){const a=Qe(i.properties.get("star-intensity"),0,1);if(a===0)return;const l=e.context,u=l.gl,h=e.transform,g=e.getOrCreateProgram("stars"),x=de.identity([]);de.rotateX(x,x,-h._pitch),de.rotateZ(x,x,-h.angle),de.rotateX(x,x,_e(h._center.lat)),de.rotateY(x,x,-_e(h._center.lng));const b=U.fromQuat(new Float32Array(16),x),T=U.multiply([],h.starsProjMatrix,b),M=F.fromMat4([],b),A=F.invert([],M),O=[0,1,0];ce.transformMat3(O,O,A),ce.scale(O,O,.15);const B=[1,0,0];ce.transformMat3(B,B,A),ce.scale(B,B,.15);const V=((W,q,ne,ae)=>({u_matrix:Float32Array.from(W),u_up:q,u_right:ne,u_intensity_multiplier:ae}))(T,O,B,a);e.uploadCommonUniforms(l,g),this.starsVx&&this.starsIdx&&g.draw(e,u.TRIANGLES,Bn.disabled,mi.disabled,this.colorModeAlphaBlendedWriteRGB,yi.disabled,V,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function ZL(r,e){const i=[...r],a=e.cameraWorldSizeForFog/e.worldSize,l=U.identity([]);return U.scale(l,l,[a,a,1]),U.multiply(i,l,i),U.multiply(i,e.worldToFogMatrix,i),i}function h4(r,e,i,a){const l=i.material,u=a.context,{baseColorTexture:h,metallicRoughnessTexture:g}=l.pbrMetallicRoughness,{normalTexture:x,occlusionTexture:b,emissionTexture:T}=l;function M(A,O,B){if(A&&(r.push(O),u.activeTexture.set(u.gl.TEXTURE0+B),A.gfxTexture)){const{minFilter:V,magFilter:W,wrapS:q,wrapT:ne}=A.sampler;A.gfxTexture.bindExtraParam(V,W,q,ne)}}M(h,"HAS_TEXTURE_u_baseColorTexture",Ic.BaseColor),M(g,"HAS_TEXTURE_u_metallicRoughnessTexture",Ic.MetallicRoughness),M(x,"HAS_TEXTURE_u_normalTexture",Ic.Normal),M(b,"HAS_TEXTURE_u_occlusionTexture",Ic.Occlusion),M(T,"HAS_TEXTURE_u_emissionTexture",Ic.Emission),i.texcoordBuffer&&(r.push("HAS_ATTRIBUTE_a_uv_2f"),e.push(i.texcoordBuffer)),i.colorBuffer&&(r.push(i.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),e.push(i.colorBuffer)),i.normalBuffer&&(r.push("HAS_ATTRIBUTE_a_normal_3f"),e.push(i.normalBuffer)),i.pbrBuffer&&(r.push("HAS_ATTRIBUTE_a_pbr"),r.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),e.push(i.pbrBuffer)),l.alphaMode!=="OPAQUE"&&l.alphaMode!=="MASK"||r.push("UNPREMULT_TEXTURE_IN_SHADER"),l.defined||r.push("DIFFUSE_SHADED"),r.push("USE_STANDARD_DERIVATIVES")}function _C(r,e,i,a,l,u){const h=i.paint.get("model-opacity"),g=e.context,x=new Bn(e.context.gl.LEQUAL,Bn.ReadWrite,e.depthRangeFor3D),b=e.transform,T=r.mesh,M=T.material,A=M.pbrMetallicRoughness,O=e.style.fog;let B;B=e.transform.projection.zAxisUnit==="pixels"?[...r.nodeModelMatrix]:U.multiply([],a.zScaleMatrix,r.nodeModelMatrix),U.multiply(B,a.negCameraPosMatrix,B);const V=U.invert([],B);U.transpose(V,V);const W=c4(new Float32Array(r.worldViewProjection),new Float32Array(B),new Float32Array(V),e,h,A.baseColorFactor,M.emissiveFactor,A.metallicFactor,A.roughnessFactor,M,i),q={defines:[]},ne=[];h4(q.defines,ne,T,e);const ae=e.shadowRenderer;ae&&(ae.useNormalOffset=!1);let le=null;if(O){const Ee=ZL(r.nodeModelMatrix,e.transform);if(le=new Float32Array(Ee),b.projection.name!=="globe"){const Be=T.aabb.min,je=T.aabb.max,[Ge,tt]=O.getOpacityForBounds(Ee,Be[0],Be[1],je[0],je[1]);q.overrideFog=Ge>=Ng||tt>=Ng}}const ie=jv(e,i.paint.get("model-cutoff-fade-range"));ie.shouldRenderCutoff&&q.defines.push("RENDER_CUTOFF");const ue=e.getOrCreateProgram("model",q);e.uploadCommonUniforms(g,ue,null,le,ie),e.renderPass!=="shadow"&&ae&&ae.setupShadowsFromMatrix(r.nodeModelMatrix,ue),ue.draw(e,g.gl.TRIANGLES,x,l,u,T.material.doubleSided?yi.disabled:yi.backCCW,W,i.id,T.vertexBuffer,T.indexBuffer,T.segments,i.paint,e.transform.zoom,void 0,ne)}function XL(r,e,i,a,l,u,h){let g;g=r.projection.name==="globe"?H6(i,r):[...i],U.multiply(g,g,e.matrix);const x=U.multiply([],a,g);if(e.meshes)for(const b of e.meshes){if(b.material.alphaMode!=="BLEND"){h.push({mesh:b,depth:0,modelIndex:l,worldViewProjection:x,nodeModelMatrix:g});continue}const T=ce.transformMat4([],b.centroid,x);T[2]>0&&u.push({mesh:b,depth:T[2],modelIndex:l,worldViewProjection:x,nodeModelMatrix:g})}if(e.children)for(const b of e.children)XL(r,b,i,a,l,u,h)}function d4(r,e,i,a){const l=i.shadowRenderer;if(!l)return;const u=l.getShadowPassDepthMode(),h=l.getShadowPassColorMode(),g=l.calculateShadowPassMatrixFromMatrix(e),x=jL(g);i.getOrCreateProgram("modelDepth",{defines:["DEPTH_TEXTURE"]}).draw(i,i.context.gl.TRIANGLES,u,mi.disabled,h,yi.backCCW,x,a.id,r.vertexBuffer,r.indexBuffer,r.segments,a.paint,i.transform.zoom,void 0,void 0)}function bee(r,e,i){const a=e.updateZoomBasedPaintProperties(),l=function(u,h,g){let x,b,T,M=u.terrain?u.terrain.exaggeration():0;if(u.terrain&&M>0){const A=u.terrain,O=A.findDEMTileFor(g);O&&O.dem?x=Av.create(A,g,O):M=0}if(M===0&&(h.terrainElevationMin=0,h.terrainElevationMax=0),M===h.validForExaggeration&&(M===0||x&&x._demTile&&x._demTile.tileID===h.validForDEMTile.id&&x._dem._timestamp===h.validForDEMTile.timestamp))return!1;for(const A in h.instancesPerModel){const O=h.instancesPerModel[A];for(let B=0;B<O.instancedDataArray.length;++B){const V=(x?M*x.getElevationAt(0|O.instancedDataArray.float32[16*B],0|O.instancedDataArray.float32[16*B+1],!0,!0):0)+O.instancesEvaluatedElevation[B];O.instancedDataArray.float32[16*B+6]=V,b=b?Math.min(h.terrainElevationMin,V):V,T=T?Math.max(h.terrainElevationMax,V):V}}return h.terrainElevationMin=b||0,h.terrainElevationMax=T||0,h.validForExaggeration=M,h.validForDEMTile=x&&x._demTile?{id:x._demTile.tileID,timestamp:x._dem._timestamp}:{id:void 0,timestamp:0},!0}(r,e,i);(a||l)&&(e.uploaded=!1,e.upload(r.context))}const Id={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new Xn([0,0,0],[Zt,Zt,0])};function wee(r,e){const i=1<<r.canonical.z,a=e.getFreeCameraOptions().position,l=e.elevation,u=r.canonical.x/i,h=(r.canonical.x+1)/i,g=r.canonical.y/i,x=(r.canonical.y+1)/i;let b=e._centerAltitude;if(l){const O=l.getMinMaxForTile(r);O&&O.max>b&&(b=O.max)}const T=Qe(a.x,u,h)-a.x,M=Qe(a.y,g,x)-a.y,A=Oi(b,e.center.lat)-a.z;return e._zoomFromMercatorZ(Math.sqrt(T*T+M*M+A*A))}function YL(r,e,i,a,l,u,h){const g=r.context,x=r.renderPass==="shadow",b=r.shadowRenderer,T=x&&b?b.getShadowPassDepthMode():new Bn(g.gl.LEQUAL,Bn.ReadWrite,r.depthRangeFor3D),M=r.isTileAffectedByFog(u);if(i.meshes)for(const A of i.meshes){const O=["MODEL_POSITION_ON_GPU"],B=[];let V,W,q;a.instancedDataArray.length>20&&O.push("INSTANCED_ARRAYS");const ne=jv(r,e.paint.get("model-cutoff-fade-range"));if(ne.shouldRenderCutoff&&O.push("RENDER_CUTOFF"),x&&b)V=r.getOrCreateProgram("modelDepth",{defines:O}),W=jL(h.shadowTileMatrix,h.shadowTileMatrix,Float32Array.from(i.matrix)),q=b.getShadowPassColorMode();else{h4(O,B,A,r),V=r.getOrCreateProgram("model",{defines:O,overrideFog:M});const le=A.material,ie=le.pbrMetallicRoughness,ue=e.paint.get("model-opacity");W=c4(u.projMatrix,Float32Array.from(i.matrix),new Float32Array(16),r,ue,ie.baseColorFactor,le.emissiveFactor,ie.metallicFactor,ie.roughnessFactor,le,e,l),b&&(h.shadowUniformsInitialized?V.setShadowUniformValues(g,b.getShadowUniformValues()):(b.setupShadows(u.toUnwrapped(),V,"model-tile",u.overscaledZ),h.shadowUniformsInitialized=!0)),q=ne.shouldRenderCutoff||ue<1||le.alphaMode!=="OPAQUE"?zi.alphaBlended:zi.unblended}r.uploadCommonUniforms(g,V,u.toUnwrapped(),null,ne);const ae=A.material.doubleSided?yi.disabled:yi.backCCW;if(a.instancedDataArray.length>20)B.push(a.instancedDataBuffer),V.draw(r,g.gl.TRIANGLES,T,mi.disabled,q,ae,W,e.id,A.vertexBuffer,A.indexBuffer,A.segments,e.paint,r.transform.zoom,void 0,B,a.instancedDataArray.length);else{const le=x?"u_instance":"u_normal_matrix";for(let ie=0;ie<a.instancedDataArray.length;++ie)W[le]=new Float32Array(a.instancedDataArray.arrayBuffer,64*ie,16),V.draw(r,g.gl.TRIANGLES,T,mi.disabled,q,ae,W,e.id,A.vertexBuffer,A.indexBuffer,A.segments,e.paint,r.transform.zoom,void 0,B)}}if(i.children)for(const A of i.children)YL(r,e,A,a,l,u,h)}const See=[1,-1,1];function Cee(r,e,i,a){if(!i.modelManager)return!0;const l=i.modelManager;if(!i.shadowRenderer)return!0;const u=i.shadowRenderer,h=e.aabb;let g=!0,x=r.maxHeight;if(x===0){let T=0;for(const M in r.instancesPerModel){const A=l.getModel(M,a);A?T=Math.max(T,Math.max(Math.max(A.aabb.max[0],A.aabb.max[1]),A.aabb.max[2])):g=!1}x=r.maxScale*T*1.41+r.maxVerticalOffset,g&&(r.maxHeight=x)}h.max[2]=x,h.min[2]+=r.terrainElevationMin,h.max[2]+=r.terrainElevationMax,ce.transformMat4(h.min,h.min,e.tileMatrix),ce.transformMat4(h.max,h.max,e.tileMatrix);const b=h.intersects(u.getCurrentCascadeFrustum());return i.currentShadowCascade===0&&(r.isInsideFirstShadowMapFrustum=b===2),b===0}class Eee{}class Tee{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(e,i,a){{const M=this._storage.get(i.id);if(M)return M.lastUsedFrameIdx=e,M.buf}const l=a.gl,u=l.getBufferParameter(l.ELEMENT_ARRAY_BUFFER,l.BUFFER_SIZE),h=new ArrayBuffer(u),g=new Int16Array(h);l.getBufferSubData(l.ELEMENT_ARRAY_BUFFER,0,new Int16Array(h));const x=new fd;for(let M=0;M<u/2;M+=3){const A=g[M],O=g[M+1],B=g[M+2];x.emplaceBack(A,O),x.emplaceBack(O,B),x.emplaceBack(B,A)}const b=a.bindVertexArrayOES.current,T=new Eee;return T.buf=new em(a,x),T.lastUsedFrameIdx=e,this._storage.set(i.id,T),a.bindVertexArrayOES.set(b),T.buf}update(e){for(const[i,a]of this._storage)e-a.lastUsedFrameIdx>30&&(a.buf.destroy(),this._storage.delete(i))}destroy(){for(const[e,i]of this._storage)i.buf.destroy(),this._storage.delete(e)}}const JL={symbol:function(r,e,i,a,l){if(r.renderPass!=="translucent")return;const u=mi.disabled,h=r.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(g,x,b,T,M,A,O){const B=x.transform,V=M==="map",W=A==="map";for(const q of g){const ne=T.getTile(q),ae=ne.getBucket(b);if(!ae||!ae.text||!ae.text.segments.get().length)continue;const le=bd(ae.textSizeData,B.zoom),ie=r4(q,ae.getProjection(),B),ue=B.calculatePixelsToTileUnitsMatrix(ne),Ee=XS(ie,ne.tileID.canonical,W,V,B,ae.getProjection(),ue),Be=ae.hasIconTextFit()&&ae.hasIconData();if(le){const je=Math.pow(2,B.zoom-ne.tileID.overscaledZ);ree(ae,V,W,O,EX,B,Ee,q,je,le,Be)}}}(a,r,i,e,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),l),i.paint.get("icon-opacity").constantOr(1)!==0&&HL(r,e,i,a,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),u,h),i.paint.get("text-opacity").constantOr(1)!==0&&HL(r,e,i,a,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),u,h),e.map.showCollisionBoxes&&(VL(r,e,i,a,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),VL(r,e,i,a,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(r,e,i,a){if(r.renderPass!=="translucent")return;const l=i.paint.get("circle-opacity"),u=i.paint.get("circle-stroke-width"),h=i.paint.get("circle-stroke-opacity"),g=i.layout.get("circle-sort-key").constantOr(1)!==void 0,x=i.paint.get("circle-emissive-strength");if(l.constantOr(1)===0&&(u.constantOr(1)===0||h.constantOr(1)===0))return;const b=r.context,T=b.gl,M=r.transform,A=r.depthModeForSublayer(0,Bn.ReadOnly),O=mi.disabled,B=r.colorModeForDrapableLayerRenderPass(x),V=M.projection.name==="globe",W=[ro(M.center.lng),Eo(M.center.lat)],q=[];for(let ae=0;ae<a.length;ae++){const le=a[ae],ie=e.getTile(le),ue=ie.getBucket(i);if(!ue||ue.projection.name!==M.projection.name)continue;const Ee=ue.programConfigurations.get(i.id),Be=pD(i),je=r.isTileAffectedByFog(le);V&&Be.push("PROJECTION_GLOBE_VIEW");const Ge=r.getOrCreateProgram("circle",{config:Ee,defines:Be,overrideFog:je}),tt=ue.layoutVertexBuffer,Ze=ue.globeExtVertexBuffer,nt=ue.indexBuffer,Xe=M.projection.createInversionMatrix(M,le.canonical),ut={programConfiguration:Ee,program:Ge,layoutVertexBuffer:tt,globeExtVertexBuffer:Ze,indexBuffer:nt,uniformValues:wZ(r,le,ie,Xe,W,i),tile:ie};if(g){const bt=ue.segments.get();for(const At of bt)q.push({segments:new qi([At]),sortKey:At.sortKey,state:ut})}else q.push({segments:ue.segments,sortKey:0,state:ut})}g&&q.sort((ae,le)=>ae.sortKey-le.sortKey);const ne={useDepthForOcclusion:M.depthOcclusionForSymbolsAndCircles};for(const ae of q){const{programConfiguration:le,program:ie,layoutVertexBuffer:ue,globeExtVertexBuffer:Ee,indexBuffer:Be,uniformValues:je,tile:Ge}=ae.state,tt=ae.segments;r.terrain&&r.terrain.setupElevationDraw(Ge,ie,ne),r.uploadCommonUniforms(b,ie,Ge.tileID.toUnwrapped()),ie.draw(r,T.TRIANGLES,A,O,B,yi.disabled,je,i.id,ue,Be,tt,i.paint,M.zoom,le,[Ee])}},heatmap:function(r,e,i,a){if(i.paint.get("heatmap-opacity")!==0)if(r.renderPass==="offscreen"){const l=r.context,u=l.gl,h=mi.disabled,g=new zi([u.ONE,u.ONE,u.ONE,u.ONE],Qn.transparent,[!0,!0,!0,!0]);(function(O,B,V,W){const q=O.gl,ne=B.width*W,ae=B.height*W;O.activeTexture.set(q.TEXTURE1),O.viewport.set([0,0,ne,ae]);let le=V.heatmapFbo;if(!le||le&&(le.width!==ne||le.height!==ae)){le&&le.destroy();const ie=q.createTexture();q.bindTexture(q.TEXTURE_2D,ie),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),le=V.heatmapFbo=O.createFramebuffer(ne,ae,!0,null),function(ue,Ee,Be,je,Ge,tt){const Ze=ue.gl;Ze.texImage2D(Ze.TEXTURE_2D,0,ue.extRenderToTextureHalfFloat?Ze.RGBA16F:Ze.RGBA,Ge,tt,0,Ze.RGBA,ue.extRenderToTextureHalfFloat?Ze.HALF_FLOAT:Ze.UNSIGNED_BYTE,null),je.colorAttachment.set(Be)}(O,0,ie,le,ne,ae)}else q.bindTexture(q.TEXTURE_2D,le.colorAttachment.get()),O.bindFramebuffer.set(le.framebuffer)})(l,r,i,r.transform.projection.name==="globe"?.5:.25),l.clear({color:Qn.transparent});const x=r.transform,b=x.projection.name==="globe",T=b?["PROJECTION_GLOBE_VIEW"]:[],M=b?yi.frontCCW:yi.disabled,A=[ro(x.center.lng),Eo(x.center.lat)];for(let O=0;O<a.length;O++){const B=a[O];if(e.hasRenderableParent(B))continue;const V=e.getTile(B),W=V.getBucket(i);if(!W||W.projection.name!==x.projection.name)continue;const q=r.isTileAffectedByFog(B),ne=W.programConfigurations.get(i.id),ae=r.getOrCreateProgram("heatmap",{config:ne,defines:T,overrideFog:q}),{zoom:le}=r.transform;r.terrain&&r.terrain.setupElevationDraw(V,ae),r.uploadCommonUniforms(l,ae,B.toUnwrapped());const ie=x.projection.createInversionMatrix(x,B.canonical);ae.draw(r,u.TRIANGLES,Bn.disabled,h,g,M,KQ(r,B,V,ie,A,le,i.paint.get("heatmap-intensity")),i.id,W.layoutVertexBuffer,W.indexBuffer,W.segments,i.paint,r.transform.zoom,ne,b?[W.globeExtVertexBuffer]:null)}l.viewport.set([0,0,r.width,r.height])}else r.renderPass==="translucent"&&(r.context.setColorMode(r.colorModeForRenderPass()),function(l,u){const h=l.context,g=h.gl,x=u.heatmapFbo;if(!x)return;h.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,x.colorAttachment.get()),h.activeTexture.set(g.TEXTURE1);let b=u.colorRampTexture;b||(b=u.colorRampTexture=new ja(h,u.colorRamp,g.RGBA)),b.bind(g.LINEAR,g.CLAMP_TO_EDGE),l.getOrCreateProgram("heatmapTexture").draw(l,g.TRIANGLES,Bn.disabled,mi.disabled,l.colorModeForRenderPass(),yi.disabled,((T,M,A,O)=>({u_image:0,u_color_ramp:1,u_opacity:M.paint.get("heatmap-opacity")}))(0,u),u.id,l.viewportBuffer,l.quadTriangleIndexBuffer,l.viewportSegments,u.paint,l.transform.zoom)}(r,i))},line:function(r,e,i,a){if(r.renderPass!=="translucent")return;const l=i.paint.get("line-opacity"),u=i.paint.get("line-width");if(l.constantOr(1)===0||u.constantOr(1)===0)return;const h=i.paint.get("line-emissive-strength"),g=r.depthModeForSublayer(0,Bn.ReadOnly),x=r.colorModeForDrapableLayerRenderPass(h),b=r.terrain&&r.terrain.renderingToTexture?1:Qr.devicePixelRatio,T=i.paint.get("line-dasharray"),M=T.constantOr(1),A=i.layout.get("line-cap"),O=i.paint.get("line-pattern"),B=O.constantOr(1),V=i.paint.get("line-pattern").constantOr(1),W=i.paint.get("line-opacity").constantOr(1)!==1;let q=!V&&W;const ne=i.paint.get("line-gradient"),ae=B?"linePattern":"line",le=r.context,ie=le.gl,ue=w2(i);r.terrain&&r.terrain.clipOrMaskOverlapStencilType()&&(q=!1);for(const Ee of a){const Be=e.getTile(Ee);if(B&&!Be.patternsLoaded())continue;const je=Be.getBucket(i);if(!je)continue;r.prepareDrawTile();const Ge=je.programConfigurations.get(i.id),tt=r.isTileAffectedByFog(Ee),Ze=r.getOrCreateProgram(ae,{config:Ge,defines:ue,overrideFog:tt}),nt=O.constantOr(null);if(nt&&Be.imageAtlas){const Jt=Be.imageAtlas.patternPositions[nt.toString()];Jt&&Ge.setConstantPatternPositions(Jt)}const Xe=T.constantOr(null),ut=A.constantOr(null);if(!B&&Xe&&ut&&Be.lineAtlas){const Jt=Be.lineAtlas.getDash(Xe,ut);Jt&&Ge.setConstantPatternPositions(Jt)}let[bt,At]=i.paint.get("line-trim-offset");(ut==="round"||ut==="square")&&bt!==At&&(bt===0&&(bt-=1),At===1&&(At+=1));const lt=r.terrain?Ee.projMatrix:null,ft=B?CJ(r,Be,i,lt,b):SJ(r,Be,i,lt,je.lineClipsArray.length,b,[bt,At]);if(ne){const Jt=je.gradients[i.id];let tr=Jt.texture;if(i.gradientVersion!==Jt.version){let lr=256;if(i.stepInterpolant){const pr=e.getSource().maxzoom,er=Ee.canonical.z===pr?Math.ceil(1<<r.transform.maxZoom-Ee.canonical.z):1;lr=Qe(Rt(je.maxLineLength/Zt*1024*er),256,le.maxTextureSize)}Jt.gradient=yS({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:lr,image:Jt.gradient||void 0,clips:je.lineClipsArray}),Jt.texture?Jt.texture.update(Jt.gradient):Jt.texture=new ja(le,Jt.gradient,ie.RGBA),Jt.version=i.gradientVersion,tr=Jt.texture}le.activeTexture.set(ie.TEXTURE1),tr.bind(i.stepInterpolant?ie.NEAREST:ie.LINEAR,ie.CLAMP_TO_EDGE)}M&&(le.activeTexture.set(ie.TEXTURE0),Be.lineAtlasTexture.bind(ie.LINEAR,ie.REPEAT),Ge.updatePaintBuffers()),B&&(le.activeTexture.set(ie.TEXTURE0),Be.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),Ge.updatePaintBuffers()),r.uploadCommonUniforms(le,Ze,Ee.toUnwrapped());const Ft=Jt=>{Ze.draw(r,ie.TRIANGLES,g,Jt,x,yi.disabled,ft,i.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,i.paint,r.transform.zoom,Ge,[je.layoutVertexBuffer2])};if(q){const Jt=r.stencilModeForClipping(Ee).ref;Jt===0&&r.terrain&&le.clear({stencil:0});const tr={func:ie.EQUAL,mask:255};ft.u_alpha_discard_threshold=.8,Ft(new mi(tr,Jt,255,ie.KEEP,ie.KEEP,ie.INVERT)),ft.u_alpha_discard_threshold=0,Ft(new mi(tr,Jt,255,ie.KEEP,ie.KEEP,ie.KEEP))}else Ft(r.stencilModeForClipping(Ee))}q&&(r.resetStencilClippingMasks(),r.terrain&&le.clear({stencil:0}))},fill:function(r,e,i,a){const l=i.paint.get("fill-color"),u=i.paint.get("fill-opacity");if(u.constantOr(1)===0)return;const h=i.paint.get("fill-emissive-strength"),g=r.colorModeForDrapableLayerRenderPass(h),x=i.paint.get("fill-pattern"),b=r.opaquePassEnabledForLayer()&&!x.constantOr(1)&&l.constantOr(Qn.transparent).a===1&&u.constantOr(0)===1?"opaque":"translucent";if(r.renderPass===b){const T=r.depthModeForSublayer(1,r.renderPass==="opaque"?Bn.ReadWrite:Bn.ReadOnly);GL(r,e,i,a,T,g,!1)}if(r.renderPass==="translucent"&&i.paint.get("fill-antialias")){const T=r.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Bn.ReadOnly);GL(r,e,i,a,T,g,!0)}},"fill-extrusion":function(r,e,i,a){const l=i.paint.get("fill-extrusion-opacity"),u=r.context,h=u.gl,g=r.terrain,x=g&&g.renderingToTexture,b=i.paint.get("fill-extrusion-cutoff-fade-range");if(l===0)return;const T=r.conflationActive&&r.layerUsedInConflation(i,e.getSource());if(T&&function(M,A,O,B){for(const V of B){const W=A.getTile(V).getBucket(O);W&&(W.updateReplacement(V,M.replacementSource),W.uploadCentroid(M.context))}}(r,e,i,a),g||T)for(const M of a){const A=e.getTile(M).getBucket(i);A&&iee(r.context,e,M,A,i,g,T)}if(r.renderPass==="shadow"&&r.shadowRenderer){const M=r.shadowRenderer;if(g&&l<.65&&i._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof bo)return;const A=M.getShadowPassDepthMode(),O=M.getShadowPassColorMode();yC(r,e,i,a,A,mi.disabled,O,T)}else if(r.renderPass==="translucent"){const M=!i.paint.get("fill-extrusion-pattern").constantOr(1);if(!x){const A=new Bn(r.context.gl.LEQUAL,Bn.ReadWrite,r.depthRangeFor3D);b===0&&l===1&&M?yC(r,e,i,a,A,mi.disabled,zi.unblended,T):(yC(r,e,i,a,A,mi.disabled,zi.disabled,T),yC(r,e,i,a,A,r.stencilModeFor3D(),r.colorModeForRenderPass(),T),r.resetStencilClippingMasks())}if(r.style.enable3dLights()&&M&&(!g&&r.transform.projection.name!=="globe"||x)){const A=i.paint.get("fill-extrusion-opacity"),O=i.paint.get("fill-extrusion-ambient-occlusion-intensity"),B=i.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),V=i.paint.get("fill-extrusion-flood-light-intensity"),W=i.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),q=O>0&&B>0,ne=V>0,ae=(ie,ue,Ee)=>(1-Ee)*ie+Ee*ue,le=ie=>{const ue=r.depthModeForSublayer(1,Bn.ReadOnly,h.LEQUAL,!0),Ee=i.paint.get(ie?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Be=ae(.1,3,Ee),je=r._showOverdrawInspector;if(!je){const Ge=new mi({func:h.ALWAYS,mask:255},255,255,h.KEEP,h.KEEP,h.REPLACE),tt=new zi([h.ONE,h.ONE,h.ONE,h.ONE],Qn.transparent,[!1,!1,!1,!0],h.MIN);Uv(r,e,i,a,ue,Ge,tt,yi.disabled,ie,"sdf",A,O,B,V,W,Be,T,!1)}{const Ge=je?mi.disabled:new mi({func:h.EQUAL,mask:255},255,255,h.KEEP,h.DECR,h.DECR),tt=je?r.colorModeForRenderPass():new zi([h.ONE_MINUS_DST_ALPHA,h.DST_ALPHA,h.ONE,h.ONE],Qn.transparent,[!0,!0,!0,!0]);Uv(r,e,i,a,ue,Ge,tt,yi.disabled,ie,"color",A,O,B,V,W,Be,T,!1)}};if(x){const ie=(ue,Ee,Be)=>{const je=r.depthModeForSublayer(1,Bn.ReadOnly,h.LEQUAL,!1),Ge=i.paint.get(ue?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),tt=ae(.1,3,Ge);{const Ze=new zi([h.ONE,h.ONE,h.ONE,h.ONE],Qn.transparent,[!1,!1,!1,!0]);Uv(r,e,i,a,je,mi.disabled,Ze,yi.disabled,ue,"clear",A,O,B,V,W,tt,T,Ee)}{const Ze=new mi({func:h.ALWAYS,mask:255},255,255,h.KEEP,h.KEEP,h.REPLACE),nt=new zi([h.ONE,h.ONE,h.ONE,h.ONE],Qn.transparent,[!1,!1,!1,!0],h.MIN);Uv(r,e,i,a,je,Ze,nt,yi.disabled,ue,"sdf",A,O,B,V,W,tt,T,Ee)}{const Ze=ue?h.ZERO:h.ONE_MINUS_DST_ALPHA,nt=new mi({func:h.EQUAL,mask:255},255,255,h.KEEP,h.DECR,h.DECR),Xe=new zi([Ze,h.DST_ALPHA,h.ONE_MINUS_DST_ALPHA,h.ZERO],Qn.transparent,[!0,!0,!0,!0]);Uv(r,e,i,a,je,nt,Xe,yi.disabled,ue,"color",A,O,B,V,W,tt,T,Ee)}{const Ze=new zi([h.ONE,h.ONE,h.ONE,ue?h.ZERO:h.ONE],Qn.transparent,[!1,!1,!1,!0],ue?h.FUNC_ADD:h.MAX);Uv(r,e,i,a,je,mi.disabled,Ze,yi.disabled,ue,"clear",A,O,B,V,W,tt,T,Ee,Be)}};if(q||ne){let ue;if(r.prepareDrawTile(),g){const Ee=g.drapeBufferSize[0],Be=g.drapeBufferSize[1];ue=g.framebufferCopyTexture,ue&&(!ue||ue.size[0]===Ee&&ue.size[1]===Be)||(ue&&ue.destroy(),ue=g.framebufferCopyTexture=new ja(u,new da({width:Ee,height:Be}),h.RGBA)),ue.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,0,0,Ee,Be,0)}q&&ie(!0,!1,ue),ne&&ie(!1,!0,ue)}}else q&&le(!0),ne&&le(!1)}}},hillshade:function(r,e,i,a){if(r.renderPass!=="offscreen"&&r.renderPass!=="translucent")return;const l=r.context,u=r.terrain&&r.terrain.renderingToTexture,[h,g]=r.renderPass!=="translucent"||u?[{},a]:r.stencilConfigForOverlap(a);for(const x of g){const b=e.getTile(x);if(b.needsHillshadePrepare&&r.renderPass==="offscreen")OQ(r,b,i);else if(r.renderPass==="translucent"){const T=r.depthModeForSublayer(0,Bn.ReadOnly),M=i.paint.get("hillshade-emissive-strength"),A=r.colorModeForDrapableLayerRenderPass(M),O=u&&r.terrain?r.terrain.stencilModeForRTTOverlap(x):h[x.overscaledZ];kQ(r,x,b,i,T,O,A)}}l.viewport.set([0,0,r.width,r.height]),r.resetStencilClippingMasks()},raster:function(r,e,i,a,l,u){if(r.renderPass!=="translucent"||i.paint.get("raster-opacity")===0)return;const h=r.context,g=h.gl,x=e.getSource(),b=function(ae,le,ie){const ue=[];let Ee,Be;if(ae.paint.get("raster-color")){ue.push("RASTER_COLOR"),Ee=ae.paint.get("raster-color-mix"),Be=ae.paint.get("raster-color-range"),le.activeTexture.set(ie.TEXTURE2);let je=ae.colorRampTexture;je||(je=ae.colorRampTexture=new ja(le,ae.colorRamp,ie.RGBA)),je.bind(ie.LINEAR,ie.CLAMP_TO_EDGE)}return{mix:Ee,range:Be,defines:ue}}(i,h,g),T=b.defines;let M=!1;if(x instanceof Ed&&!a.length){if(r.transform.projection.name!=="globe")return;if(x.onNorthPole)M=!0,T.push("PROJECTION_GLOBE_VIEW");else{if(!x.onSouthPole)return;M=!0,T.push("PROJECTION_GLOBE_VIEW")}}const A=r.colorModeForDrapableLayerRenderPass(),O=r.terrain&&r.terrain.renderingToTexture,B=!r.options.moving,V=i.paint.get("raster-resampling")==="nearest"?g.NEAREST:g.LINEAR;if(M){const ae=e.getSource();if(!(ae instanceof Ed))return;const le=ae.texture;if(!le)return;const ie=r.globeSharedBuffers;if(!ie)return;const ue=new Bn(g.LEQUAL,Bn.ReadWrite,r.depthRangeFor3D),Ee=Float32Array.from(r.transform.projMatrix);let Be=bv(0,0,r.transform);const je=Float32Array.from(vs(ia(new sn(0,0,0)))),Ge={opacity:1,mix:0};r.terrain&&r.terrain.prepareDrawTile(),h.activeTexture.set(g.TEXTURE0),le.bind(V,g.CLAMP_TO_EDGE),h.activeTexture.set(g.TEXTURE1),le.bind(V,g.CLAMP_TO_EDGE),le.useMipmap&&h.extTextureFilterAnisotropic&&r.transform.pitch>20&&g.texParameterf(g.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax);const[tt,Ze,nt,Xe]=ie.getPoleBuffers(0,!0);let ut;ae.onNorthPole?(ut=tt,r.renderDefaultNorthPole=!1):(Be=U.scale(U.create(),Be,[1,-1,1]),ut=Ze,r.renderDefaultSouthPole=!1);const bt=LL(Ee,je,Be,[0,0],1,Ge,i,ae.perspectiveTransform||[0,0],2,b.mix||[0,0,0,0],b.range||[0,0]),At=r.getOrCreateProgram("raster",{defines:b.defines});return r.uploadCommonUniforms(h,At,null),void At.draw(r,g.TRIANGLES,ue,mi.disabled,A,yi.disabled,bt,i.id,ut,nt,Xe)}if(!a.length)return;const[W,q]=x instanceof Ed||O?[{},a]:r.stencilConfigForOverlap(a),ne=q[q.length-1].overscaledZ;for(const ae of q){const le=O?Bn.disabled:r.depthModeForSublayer(ae.overscaledZ-ne,i.paint.get("raster-opacity")===1?Bn.ReadWrite:Bn.ReadOnly,g.LESS),ie=ae.toUnwrapped(),ue=e.getTile(ae);if(O&&(!ue||!ue.hasData())||!ue.texture)continue;const Ee=O?ae.projMatrix:r.transform.calculateProjMatrix(ie,B),Be=r.terrain&&O?r.terrain.stencilModeForRTTOverlap(ae):W[ae.overscaledZ],je=u?0:i.paint.get("raster-fade-duration");ue.registerFadeDuration(je);const Ge=e.findLoadedParent(ae,0),tt=ML(ue,Ge,e,r.transform,je);let Ze,nt;r.terrain&&r.terrain.prepareDrawTile(),h.activeTexture.set(g.TEXTURE0),ue.texture.bind(V,g.CLAMP_TO_EDGE),h.activeTexture.set(g.TEXTURE1),Ge?(Ge.texture.bind(V,g.CLAMP_TO_EDGE),Ze=Math.pow(2,Ge.tileID.overscaledZ-ue.tileID.overscaledZ),nt=[ue.tileID.canonical.x*Ze%1,ue.tileID.canonical.y*Ze%1]):ue.texture.bind(V,g.CLAMP_TO_EDGE),ue.texture.useMipmap&&h.extTextureFilterAnisotropic&&r.transform.pitch>20&&g.texParameterf(g.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax);const Xe=x instanceof Ed?x.perspectiveTransform:[0,0],ut=new Float32Array(16),bt=LL(Ee,ut,ut,nt||[0,0],Ze||1,tt,i,Xe,2,b.mix||[0,0,0,0],b.range||[0,0]),At=r.isTileAffectedByFog(ae),lt=r.getOrCreateProgram("raster",{defines:b.defines,overrideFog:At});if(r.uploadCommonUniforms(h,lt,ie),x instanceof Ed)x.boundsBuffer&&x.boundsSegments&&lt.draw(r,g.TRIANGLES,le,mi.disabled,A,yi.disabled,bt,i.id,x.boundsBuffer,r.quadTriangleIndexBuffer,x.boundsSegments);else{const{tileBoundsBuffer:ft,tileBoundsIndexBuffer:Ft,tileBoundsSegments:Jt}=r.getTileBoundsBuffers(ue);lt.draw(r,g.TRIANGLES,le,Be,A,yi.disabled,bt,i.id,ft,Ft,Jt)}}r.resetStencilClippingMasks()},background:function(r,e,i,a){const l=i.paint.get("background-color"),u=i.paint.get("background-opacity"),h=i.paint.get("background-emissive-strength");if(u===0)return;const g=r.context,x=g.gl,b=r.transform,T=b.tileSize,M=i.paint.get("background-pattern");if(r.isPatternMissing(M,i.scope))return;const A=!M&&l.a===1&&u===1&&r.opaquePassEnabledForLayer()?"opaque":"translucent";if(r.renderPass!==A)return;const O=mi.disabled,B=r.depthModeForSublayer(0,A==="opaque"?Bn.ReadWrite:Bn.ReadOnly),V=r.colorModeForDrapableLayerRenderPass(h),W=M?"backgroundPattern":"background";let q,ne=a;ne||(q=r.getBackgroundTiles(),ne=Object.values(q).map(ae=>ae.tileID)),M&&(g.activeTexture.set(x.TEXTURE0),r.imageManager.bind(r.context,i.scope));for(const ae of ne){const le=r.isTileAffectedByFog(ae),ie=r.getOrCreateProgram(W,{overrideFog:le}),ue=ae.toUnwrapped(),Ee=a?ae.projMatrix:r.transform.calculateProjMatrix(ue);r.prepareDrawTile();const Be=e?e.getTile(ae):q?q[ae.key]:new nx(ae,T,b.zoom,r),je=M?QQ(Ee,h,u,r,M,i.scope,{tileID:ae,tileSize:T}):JQ(Ee,h,u,l);r.uploadCommonUniforms(g,ie,ue);const{tileBoundsBuffer:Ge,tileBoundsIndexBuffer:tt,tileBoundsSegments:Ze}=r.getTileBoundsBuffers(Be);ie.draw(r,x.TRIANGLES,B,O,V,yi.disabled,je,i.id,Ge,tt,Ze)}},sky:function(r,e,i){const a=r._atmosphere?Na(r.transform.zoom):1,l=i.paint.get("sky-opacity")*a;if(l===0)return;const u=r.context,h=i.paint.get("sky-type"),g=new Bn(u.gl.LEQUAL,Bn.ReadOnly,[0,1]),x=r.frameCounter/1e3%1;h==="atmosphere"?r.renderPass==="offscreen"?i.needsSkyboxCapture(r)&&(function(b,T,M,A){const O=b.context,B=O.gl;let V=T.skyboxFbo;if(!V){V=T.skyboxFbo=O.createFramebuffer(32,32,!0,null),T.skyboxGeometry=new KL(O),T.skyboxTexture=O.gl.createTexture(),B.bindTexture(B.TEXTURE_CUBE_MAP,T.skyboxTexture),B.texParameteri(B.TEXTURE_CUBE_MAP,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_CUBE_MAP,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_CUBE_MAP,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_CUBE_MAP,B.TEXTURE_MAG_FILTER,B.LINEAR);for(let ae=0;ae<6;++ae)B.texImage2D(B.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0,B.RGBA,32,32,0,B.RGBA,B.UNSIGNED_BYTE,null)}O.bindFramebuffer.set(V.framebuffer),O.viewport.set([0,0,32,32]);const W=T.getCenter(b,!0),q=b.getOrCreateProgram("skyboxCapture"),ne=new Float64Array(16);U.identity(ne),U.rotateY(ne,ne,.5*-Math.PI),Hv(b,T,q,ne,W,0),U.identity(ne),U.rotateY(ne,ne,.5*Math.PI),Hv(b,T,q,ne,W,1),U.identity(ne),U.rotateX(ne,ne,.5*-Math.PI),Hv(b,T,q,ne,W,2),U.identity(ne),U.rotateX(ne,ne,.5*Math.PI),Hv(b,T,q,ne,W,3),U.identity(ne),Hv(b,T,q,ne,W,4),U.identity(ne),U.rotateY(ne,ne,Math.PI),Hv(b,T,q,ne,W,5),O.viewport.set([0,0,b.width,b.height])}(r,i),i.markSkyboxValid(r)):r.renderPass==="sky"&&function(b,T,M,A,O){const B=b.context,V=B.gl,W=b.transform,q=b.getOrCreateProgram("skybox");B.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_CUBE_MAP,T.skyboxTexture);const ne=((ae,le,ie,ue,Ee)=>({u_matrix:ae,u_sun_direction:le,u_cubemap:0,u_opacity:ue,u_temporal_offset:Ee}))(W.skyboxMatrix,T.getCenter(b,!1),0,A,O);b.uploadCommonUniforms(B,q),q.draw(b,V.TRIANGLES,M,mi.disabled,b.colorModeForRenderPass(),yi.backCW,ne,"skybox",T.skyboxGeometry.vertexBuffer,T.skyboxGeometry.indexBuffer,T.skyboxGeometry.segment)}(r,i,g,l,x):h==="gradient"&&r.renderPass==="sky"&&function(b,T,M,A,O){const B=b.context,V=B.gl,W=b.transform,q=b.getOrCreateProgram("skyboxGradient");T.skyboxGeometry||(T.skyboxGeometry=new KL(B)),B.activeTexture.set(V.TEXTURE0);let ne=T.colorRampTexture;ne||(ne=T.colorRampTexture=new ja(B,T.colorRamp,V.RGBA)),ne.bind(V.LINEAR,V.CLAMP_TO_EDGE);const ae=((le,ie,ue,Ee,Be)=>({u_matrix:le,u_color_ramp:0,u_center_direction:ie,u_radius:_e(ue),u_opacity:Ee,u_temporal_offset:Be}))(W.skyboxMatrix,T.getCenter(b,!1),T.paint.get("sky-gradient-radius"),A,O);b.uploadCommonUniforms(B,q),q.draw(b,V.TRIANGLES,M,mi.disabled,b.colorModeForRenderPass(),yi.backCW,ae,"skyboxGradient",T.skyboxGeometry.vertexBuffer,T.skyboxGeometry.indexBuffer,T.skyboxGeometry.segment)}(r,i,g,l,x)},debug:function(r,e,i){for(let a=0;a<i.length;a++)pee(r,e,i[a])},custom:function(r,e,i,a){const l=r.context,u=i.implementation;if(!r.transform.projection.unsupportedLayers||!r.transform.projection.unsupportedLayers.includes("custom")||r.terrain&&(r.terrain.renderingToTexture||r.renderPass==="offscreen")&&i.isLayerDraped(e)){if(r.renderPass==="offscreen"){const h=u.prerender;if(h){if(r.setCustomLayerDefaults(),l.setColorMode(r.colorModeForRenderPass()),r.transform.projection.name==="globe"){const g=r.transform.pointMerc;h.call(u,l.gl,r.transform.customLayerMatrix(),r.transform.getProjection(),r.transform.globeToMercatorMatrix(),Na(r.transform.zoom),[g.x,g.y],r.transform.pixelsPerMeterRatio)}else h.call(u,l.gl,r.transform.customLayerMatrix());l.setDirty(),r.setBaseState()}}else if(r.renderPass==="translucent"){if(r.terrain&&r.terrain.renderingToTexture){const g=u.renderToTile;if(g){const x=a[0].canonical,b=new Si(x.x+a[0].wrap*(1<<x.z),x.y,x.z);l.setDepthMode(Bn.disabled),l.setStencilMode(mi.disabled),l.setColorMode(r.colorModeForRenderPass()),r.setCustomLayerDefaults(),g.call(u,l.gl,b),l.setDirty(),r.setBaseState()}return}r.setCustomLayerDefaults(),l.setColorMode(r.colorModeForRenderPass()),l.setStencilMode(mi.disabled);const h=u.renderingMode==="3d"?new Bn(r.context.gl.LEQUAL,Bn.ReadWrite,r.depthRangeFor3D):r.depthModeForSublayer(0,Bn.ReadOnly);if(l.setDepthMode(h),r.transform.projection.name==="globe"){const g=r.transform.pointMerc;u.render(l.gl,r.transform.customLayerMatrix(),r.transform.getProjection(),r.transform.globeToMercatorMatrix(),Na(r.transform.zoom),[g.x,g.y],r.transform.pixelsPerMeterRatio)}else u.render(l.gl,r.transform.customLayerMatrix());l.setDirty(),r.setBaseState(),l.bindFramebuffer.set(null)}}else ve("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(r,e,i,a){if(r.renderPass==="opaque")return;const l=i.paint.get("model-opacity");if(l===0)return;const u=i.paint.get("model-cast-shadows");if(r.renderPass==="shadow"&&(!u||r.terrain&&l<.65&&i._transitionablePaint._values["model-opacity"].value.expression instanceof bo))return;const h=r.shadowRenderer,g=i.paint.get("model-receive-shadows");h&&(h.useNormalOffset=!0,g||(h.enabled=!1));const x=()=>{h&&(h.useNormalOffset=!0,g||(h.enabled=!0))},b=e.getSource();if(r.renderPass==="light-beam"&&b.type!=="batched-model")return;if(b.type==="vector"||b.type==="geojson")return function(q,ne,ae,le){const ie=q.transform;if(ie.projection.name!=="mercator")return void ve(`Drawing 3D models for ${ie.projection.name} projection is not yet implemented`);const ue=ie.getFreeCameraOptions().position;if(!q.modelManager)return;const Ee=q.modelManager,Be=q.shadowRenderer;if(!ae._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const je=ae._unevaluatedLayout._values["model-id"],Ge={...ae.layout.get("model-id").parameters};for(const tt of le){const Ze=ne.getTile(tt).getBucket(ae);if(!Ze||Ze.projection.name!==ie.projection.name)continue;const nt=wee(tt,ie);Ge.zoom=nt;const Xe=je.possiblyEvaluate(Ge);if(bee(q,Ze,tt),Id.shadowUniformsInitialized=!1,Id.useSingleShadowCascade=!!Be&&Be.getMaxCascadeForTile(tt.toUnwrapped())===0,q.renderPass==="shadow"&&Be){if(q.currentShadowCascade===1&&Ze.isInsideFirstShadowMapFrustum)continue;const At=ie.calculatePosMatrix(tt.toUnwrapped(),ie.worldSize);if(Id.tileMatrix.set(At),Id.shadowTileMatrix=Float32Array.from(Be.calculateShadowPassMatrixFromMatrix(At)),Id.aabb.min.fill(0),Id.aabb.max[0]=Id.aabb.max[1]=Zt,Id.aabb.max[2]=0,Cee(Ze,Id,q,ae.scope))continue}const ut=1<<tt.canonical.z,bt=[((ue.x-tt.wrap)*ut-tt.canonical.x)*Zt,(ue.y*ut-tt.canonical.y)*Zt,ue.z*ut*Zt];for(let At in Ze.instancesPerModel){const lt=Ze.instancesPerModel[At];lt.features.length>0&&(At=Xe.evaluate(lt.features[0].feature,{}));const ft=Ee.getModel(At,ae.scope);if(ft&&ft.uploaded)for(const Ft of ft.nodes)YL(q,ae,Ft,lt,bt,tt,Id)}}}(r,e,i,a),void x();if(!b.loaded())return;if(b.type==="batched-model")return function(q,ne,ae,le){const ie=q.context,ue=q.transform,Ee=q.style.fog,Be=q.shadowRenderer;if(ue.projection.name!=="mercator")return void ve(`Drawing 3D landmark models for ${ue.projection.name} projection is not yet implemented`);const je=q.transform.getFreeCameraOptions().position,Ge=ce.scale([],[je.x,je.y,je.z],q.transform.worldSize);ce.negate(Ge,Ge);const tt=U.identity([]),Ze=Gp(ue.center.lat,ue.zoom),nt=U.fromScaling([],[1,1,1/Ze]);U.translate(tt,tt,Ge);const Xe=ae.paint.get("model-opacity"),ut=new Bn(ie.gl.LEQUAL,Bn.ReadWrite,q.depthRangeFor3D),bt=new Bn(ie.gl.LEQUAL,Bn.ReadOnly,q.depthRangeFor3D),At=function(lt,ft){for(const Ft of le){const Jt=ne.getTile(Ft).getBucket(ae);if(!Jt||!Jt.uploaded)continue;let tr=!1;Be&&(tr=Be.getMaxCascadeForTile(Ft.toUnwrapped())===0);const lr=ue.calculatePosMatrix(Ft.toUnwrapped(),ue.worldSize),pr=Jt.modelTraits;for(const er of Jt.getNodesInfo()){if(er.hiddenByReplacement||!er.node.meshes)continue;const or=er.node,kr=q.renderPass==="light-beam",Hr=[...lr],Ur=er.evaluatedScale;let qr=0;q.terrain&&or.elevation&&(qr=or.elevation*q.terrain.exaggeration()),U.translate(Hr,Hr,[(or.anchor?or.anchor[0]:0)*(Ur[0]-1),(or.anchor?or.anchor[1]:0)*(Ur[1]-1),qr]),Ur!==nJ&&U.scale(Hr,Hr,Ur),U.multiply(Hr,Hr,or.matrix);const yn=U.multiply([],nt,Hr);U.multiply(yn,tt,yn);const Dn=U.invert([],yn);U.transpose(Dn,Dn),U.scale(Dn,Dn,See);const ui=U.multiply([],ue.projMatrix,Hr);for(let Mi=0;Mi<or.meshes.length;++Mi){const Yn=or.meshes[Mi],Un=Mi===or.lightMeshIndex;if(Un){if(!kr&&!q.terrain&&q.shadowRenderer){q.currentLayer<q.firstLightBeamLayer&&(q.firstLightBeamLayer=q.currentLayer);continue}}else if(kr)continue;const On={defines:[]},Tn=[];h4(On.defines,Tn,Yn,q),4&pr||On.defines.push("DIFFUSE_SHADED"),tr&&On.defines.push("SHADOWS_SINGLE_CASCADE");const _i=q.renderPass==="shadow";if(_i){d4(Yn,Hr,q,ae);continue}let Di=null;if(Ee){const yo=ZL(Hr,q.transform);if(Di=new Float32Array(yo),ue.projection.name!=="globe"){const Pa=Yn.aabb.min,Uo=Yn.aabb.max,[Qo,ao]=Ee.getOpacityForBounds(yo,Pa[0],Pa[1],Uo[0],Uo[1]);On.overrideFog=Qo>=Ng||ao>=Ng}}const ri=q.getOrCreateProgram("model",On);!_i&&Be&&(Be.useNormalOffset=!!Yn.normalBuffer,Be.setupShadowsFromMatrix(Hr,ri,Be.useNormalOffset)),q.uploadCommonUniforms(ie,ri,Ft.toUnwrapped(),Di);const oo=Yn.material,Vo=oo.pbrMetallicRoughness;Vo.metallicFactor=.9,Vo.roughnessFactor=.5;const To=c4(new Float32Array(ui),new Float32Array(yn),new Float32Array(Dn),q,Xe,Vo.baseColorFactor,oo.emissiveFactor,Vo.metallicFactor,Vo.roughnessFactor,oo,ae);ri.draw(q,ie.gl.TRIANGLES,ft&&!Un?ut:bt,mi.disabled,lt?Un||Xe<1||er.hasTranslucentParts?zi.alphaBlended:zi.unblended:zi.disabled,yi.backCCW,To,ae.id,Yn.vertexBuffer,Yn.indexBuffer,Yn.segments,ae.paint,q.transform.zoom,void 0,Tn)}}}};(function(lt,ft,Ft,Jt){const tr=lt.terrain?lt.terrain.exaggeration():0,lr=lt.transform.zoom;for(const pr of Jt){const er=ft.getTile(pr).getBucket(Ft);er&&(lt.conflationActive&&er.updateReplacement(pr,lt.replacementSource),er.evaluateScale(lt,Ft),lt.terrain&&tr>0&&er.elevationUpdate(lt.terrain,tr,pr,Ft.source),er.needsReEvaluation(lt,lr,Ft)&&er.evaluate(Ft))}})(q,ne,ae,le),Xe===1?At(!0,!0):(At(!1,!0),At(!0,!1))}(r,e,i,a),void x();const T=b.getModels(),M=[],A=r.transform.getFreeCameraOptions().position,O=ce.scale([],[A.x,A.y,A.z],r.transform.worldSize);ce.negate(O,O);const B=[],V=[];let W=0;for(const q of T){const ne=i.paint.get("model-rotation").constantOr(null),ae=i.paint.get("model-scale").constantOr(null),le=i.paint.get("model-translation").constantOr(null);q.computeModelMatrix(r,ne,ae,le,!0,!0,!1);const ie=U.identity([]),ue=Gp(q.position.lat,r.transform.zoom),Ee=U.fromScaling([],[1,1,1/ue]);U.translate(ie,ie,O),M.push({zScaleMatrix:Ee,negCameraPosMatrix:ie});for(const Be of q.nodes)XL(r.transform,Be,q.matrix,r.transform.projMatrix,W,B,V);W++}if(B.sort((q,ne)=>ne.depth-q.depth),r.renderPass!=="shadow"){if(l===1)for(const q of V)_C(q,r,i,M[q.modelIndex],mi.disabled,r.colorModeForRenderPass());else{for(const q of V)_C(q,r,i,M[q.modelIndex],mi.disabled,zi.disabled);for(const q of V)_C(q,r,i,M[q.modelIndex],r.stencilModeFor3D(),r.colorModeForRenderPass());r.resetStencilClippingMasks()}for(const q of B)_C(q,r,i,M[q.modelIndex],mi.disabled,r.colorModeForRenderPass());x()}else{for(const q of V)d4(q.mesh,q.nodeModelMatrix,r,i);for(const q of B)d4(q.mesh,q.nodeModelMatrix,r,i);x()}}},QL={modelUpload:function(r,e,i){const a=e.getSource();if(!a.loaded())return;if(a.type==="vector"||a.type==="geojson")return void(r.modelManager&&r.modelManager.upload(r,i));if(a.type==="batched-model")return;const l=a.getModels();for(const u of l)u.upload(r.context)}};class Iee{constructor(e,i){this.context=new qY(e),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=bh.maxUnderzooming+bh.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new cJ,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Aee(this),this._wireframeDebugCache=new Tee,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(e,i){const a=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(a||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new $Q(this,e));const l=this._terrain;this.transform.elevation=a?l:null,l.update(e,this.transform,i),this.transform.elevation&&!l.enabled&&(this.transform.elevation=null)}_updateFog(e){const i=e.fog;if(!i||this.transform.projection.name==="globe"||i.getOpacity(this.transform.pitch)<1||i.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[a,l]=i.getFovAdjustedRange(this.transform._fov);if(a>l)return void(this.transform.fogCullDistSq=null);const u=a+.78*(l-a);this.transform.fogCullDistSq=u*u}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(e,i){if(this.width=e*Qr.devicePixelRatio,this.height=i*Qr.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const a of this.style.order)this.style._mergedLayers[a].resize()}setup(){const e=this.context,i=new gl;i.emplaceBack(0,0),i.emplaceBack(Zt,0),i.emplaceBack(0,Zt),i.emplaceBack(Zt,Zt),this.tileExtentBuffer=e.createVertexBuffer(i,Kt.members),this.tileExtentSegments=qi.simpleSegment(0,0,4,2);const a=new gl;a.emplaceBack(0,0),a.emplaceBack(Zt,0),a.emplaceBack(0,Zt),a.emplaceBack(Zt,Zt),this.debugBuffer=e.createVertexBuffer(a,Kt.members),this.debugSegments=qi.simpleSegment(0,0,4,5);const l=new gl;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(-1,1),l.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(l,Kt.members),this.viewportSegments=qi.simpleSegment(0,0,4,2);const u=new hd;u.emplaceBack(0,0,0,0),u.emplaceBack(Zt,0,Zt,0),u.emplaceBack(0,Zt,0,Zt),u.emplaceBack(Zt,Zt,Zt,Zt),this.mercatorBoundsBuffer=e.createVertexBuffer(u,T3.members),this.mercatorBoundsSegments=qi.simpleSegment(0,0,4,2);const h=new Ca;h.emplaceBack(0,1,2),h.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(h);const g=new kp;for(const b of[0,1,3,2,0])g.emplaceBack(b);this.debugIndexBuffer=e.createIndexBuffer(g),this.emptyTexture=new ja(e,new da({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=U.create();const x=this.context.gl;this.stencilClearMode=new mi({func:x.ALWAYS,mask:0},0,255,x.ZERO,x.ZERO,x.ZERO),this.loadTimeStamps.push(S.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,e.TRIANGLES,Bn.disabled,this.stencilClearMode,zi.disabled,yi.disabled,l4(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,i,a){if(!i||this.currentStencilSource===i.id||!e.isTileClipped()||!a||a.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let g=!1;for(const x of a)if(this._tileClippingMaskIDs[x.key]===void 0){g=!0;break}if(!g)return}this.currentStencilSource=i.id;const l=this.context,u=l.gl;this.nextStencilID+a.length>256&&this.clearStencil(),l.setColorMode(zi.disabled),l.setDepthMode(Bn.disabled);const h=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const g of a){const x=i.getTile(g),b=this._tileClippingMaskIDs[g.key]=this.nextStencilID++,{tileBoundsBuffer:T,tileBoundsIndexBuffer:M,tileBoundsSegments:A}=this.getTileBoundsBuffers(x);h.draw(this,u.TRIANGLES,Bn.disabled,new mi({func:u.ALWAYS,mask:0},b,255,u.KEEP,u.KEEP,u.REPLACE),zi.disabled,yi.disabled,l4(g.projMatrix),"$clipping",T,M,A)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,i=this.context.gl;return new mi({func:i.NOTEQUAL,mask:255},e,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const i=this.context.gl;return new mi({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(e){const i=this.context.gl,a=e.sort((h,g)=>g.overscaledZ-h.overscaledZ),l=a[a.length-1].overscaledZ,u=a[0].overscaledZ-l+1;if(u>1){this.currentStencilSource=void 0,this.nextStencilID+u>256&&this.clearStencil();const h={};for(let g=0;g<u;g++)h[g+l]=new mi({func:i.GEQUAL,mask:255},g+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=u,[h,a]}return[{[l]:mi.disabled},a]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new zi([e.CONSTANT_COLOR,e.ONE,e.CONSTANT_COLOR,e.ONE],new Qn(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?zi.unblended:zi.alphaBlended}colorModeForDrapableLayerRenderPass(e){const i=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new zi([i.ONE,i.ONE_MINUS_SRC_ALPHA,i.CONSTANT_ALPHA,i.ONE_MINUS_SRC_ALPHA],new Qn(0,0,0,e===void 0?0:e),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(e,i,a,l=!1){if(!this.opaquePassEnabledForLayer()&&!l)return Bn.disabled;const u=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Bn(a||this.context.gl.LEQUAL,i,[u,u])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){this._wireframeDebugCache.update(this.frameCounter),this.style=e,this.options=i;const a=this.style._mergedLayers,l=this.style.order,u=l.map(ie=>a[ie]),h=this.style._mergedSourceCaches;this.imageManager=e.imageManager,this.modelManager=e.modelManager,this.symbolFadeChange=e.placement.symbolFadeChange(Qr.now()),this.imageManager.beginFrame();let g=0,x=!1;for(const ie in h){const ue=h[ie];ue.used&&(ue.prepare(this.context),ue.getSource().usedInConflation&&++g)}const b={},T={},M={},A={},O={};for(const ie in h){const ue=h[ie];b[ie]=ue.getVisibleCoordinates(),T[ie]=b[ie].slice().reverse(),M[ie]=ue.getVisibleCoordinates(!0).reverse(),A[ie]=ue.getShadowCasterCoordinates(),O[ie]=ue.sortCoordinatesByDistance(b[ie])}const B=ie=>{const ue=this.style.getLayerSourceCache(ie);return ue&&ue.used?ue.getSource():null};if(g){const ie=[];for(const ue of u)this.layerUsedInConflation(ue,B(ue))&&ie.push(ue);if(ie&&ie.length>1){const ue=[];for(const Ee of ie){const Be=this.style.getLayerSourceCache(Ee);Be&&Be.used&&Be.getSource().usedInConflation&&ue.push({layer:Ee.fqid,cache:Be})}this.replacementSource.setSources(ue),x=!0}}x||this.replacementSource.clear(),this.conflationActive=x,this.minCutoffZoom=0,this.longestCutoffRange=0;for(const ie of u){const ue=ie.cutoffRange();if(this.longestCutoffRange=Math.max(ue,this.longestCutoffRange),ue>0){const Ee=B(ie);Ee&&(this.minCutoffZoom=Math.max(Ee.minzoom,this.minCutoffZoom)),ie.minzoom&&(this.minCutoffZoom=Math.max(ie.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let ie=0;ie<u.length;ie++)if(u[ie].is3D()){this.opaquePassCutoff=ie;break}const V=this.style&&this.style.fog;V?(this._fogVisible=V.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=V.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(M),this.opaquePassCutoff=0);const W=this._shadowRenderer;if(W){W.updateShadowParameters(this.transform,this.style.directionalLight);for(const ie in h)for(const ue of b[ie]){let Ee={min:0,max:0};this.terrain&&(Ee=this.terrain.getMinMaxForTile(ue)||Ee),W.addShadowReceiver(ue.toUnwrapped(),Ee.min,Ee.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new HM(this.context));for(const ie of u){if(ie.isHidden(this.transform.zoom))continue;const ue=e.getLayerSourceCache(ie);this.uploadLayer(this,ie,ue)}if(this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new xee),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!di.has(this.context.gl))return;this.renderPass="offscreen";for(const ie of u){const ue=e.getLayerSourceCache(ie);if(!ie.hasOffscreenPass()||ie.isHidden(this.transform.zoom))continue;const Ee=ue?T[ue.id]:void 0;(ie.type==="custom"||ie.type==="raster"||ie.isSky()||Ee&&Ee.length)&&this.renderLayer(this,ue,ie,Ee)}this.depthRangeFor3D=[0,1-(u.length+2)*this.numSublayers*this.depthEpsilon];const q=this.terrain;q&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&q.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,A)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const ne=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),ae=(()=>{if(i.showOverdrawInspector)return Qn.black;if(this.style.fog&&this.transform.projection.supportsFog&&!ne){const ie=this.style.fog.properties.get("color").toArray01();return new Qn(...ie)}if(this.style.fog&&this.transform.projection.supportsFog&&ne){const ie=this.style.fog.properties.get("space-color").toArray01();return new Qn(...ie)}return Qn.transparent})();if(this.context.clear({color:ae,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&ne&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=l.length-1;this.currentLayer>=0;this.currentLayer--){const ie=u[this.currentLayer],ue=e.getLayerSourceCache(ie);if(ie.isSky())continue;const Ee=ue?(ie.is3D()?O:T)[ue.id]:void 0;this._renderTileClippingMasks(ie,ue,Ee),this.renderLayer(this,ue,ie,Ee)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&ne&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||Na(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<l.length;this.currentLayer++){const ie=u[this.currentLayer],ue=e.getLayerSourceCache(ie);ie.isSky()&&this.renderLayer(this,ue,ie,ue?T[ue.id]:void 0)}this.renderPass="translucent",this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let le=0;for(W&&(le=W.getShadowCastingLayerCount());this.currentLayer<l.length;){const ie=u[this.currentLayer],ue=e.getLayerSourceCache(ie);if(ie.isSky()){++this.currentLayer;continue}if(q&&this.style.isLayerDraped(ie)){if(ie.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=q.renderBatch(this.currentLayer);continue}let Ee;if(ue&&(Ee=(ie.type==="symbol"?M:ie.is3D()?O:T)[ue.id]),this._renderTileClippingMasks(ie,ue,ue?b[ue.id]:void 0),this.renderLayer(this,ue,ie,Ee),!q&&W&&le>0&&ie.hasShadowPass()&&--le==0&&(W.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Be=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Be;this.currentLayer++){const je=u[this.currentLayer];if(!je.hasLightBeamPass())continue;const Ge=e.getLayerSourceCache(je);this.renderLayer(this,Ge,je,Ge?T[Ge.id]:void 0)}this.currentLayer=Be,this.renderPass="translucent"}++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let ie=null;u.forEach(ue=>{const Ee=e.getLayerSourceCache(ue);Ee&&!ue.isHidden(this.transform.zoom)&&Ee.getVisibleCoordinates().length&&(!ie||ie.getSource().maxzoom<Ee.getSource().maxzoom)&&(ie=Ee)}),ie&&this.options.showTileBoundaries&&JL.debug(this,ie,ie.getVisibleCoordinates())}this.options.showPadding&&function(ie){const ue=ie.transform.padding;qL(ie,ie.transform.height-(ue.top||0),3,cee),qL(ie,ue.bottom||0,3,uee),WL(ie,ue.left||0,3,hee),WL(ie,ie.transform.width-(ue.right||0),3,dee);const Ee=ie.transform.centerPoint;(function(Be,je,Ge,tt){vC(Be,je-1,Ge-10,2,20,tt),vC(Be,je-10,Ge-1,20,2,tt)})(ie,Ee.x,ie.transform.height-Ee.y,fee)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(S.performance.now()),this.saveCanvasCopy()),x||(this.conflationActive=!1)}uploadLayer(e,i,a){this.gpuTimingStart(i),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(i.type)||e.terrain&&i.type==="custom")&&QL[`${i.type}Upload`]&&QL[`${i.type}Upload`](e,a,i.scope),this.gpuTimingEnd()}renderLayer(e,i,a,l){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="sky"||a.type==="custom"||a.type==="model"||a.type==="raster"||l&&l.length)&&(this.id=a.id,this.gpuTimingStart(a),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(a.type)||e.terrain&&a.type==="custom")&&JL[a.type](e,i,a,l,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery,a=this.context.gl;let l=this.gpuTimers[e.id];l||(l=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:a.createQuery()}),l.calls++,a.beginQuery(i.TIME_ELAPSED_EXT,l.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,i=this.context.gl,a=i.createQuery();this.deferredRenderGpuTimeQueries.push(a),i.beginQuery(e.TIME_ELAPSED_EXT,a)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const i={};for(const a in e){const l=e[a],u=this.context.extTimerQuery,h=u.getQueryParameter(l.query,this.context.gl.QUERY_RESULT)/1e6;u.deleteQueryEXT(l.query),i[a]=h}return i}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const i=this.context.extTimerQuery,a=this.context.gl;let l=0;for(const u of e)l+=i.getQueryParameter(u,a.QUERY_RESULT)/1e6,i.deleteQueryEXT(u);return l}translatePosMatrix(e,i,a,l,u){if(!a[0]&&!a[1])return e;const h=u?l==="map"?this.transform.angle:0:l==="viewport"?-this.transform.angle:0;if(h){const b=Math.sin(h),T=Math.cos(h);a=[a[0]*T-a[1]*b,a[0]*b+a[1]*T]}const g=[u?a[0]:$g(i,a[0],this.transform.zoom),u?a[1]:$g(i,a[1],this.transform.zoom),0],x=new Float32Array(16);return U.translate(x,e,g),x}saveTileTexture(e){const i=this._tileTextures[e.size[0]];i?i.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const i=this._tileTextures[e];return i&&i.length>0?i.pop():null}isPatternMissing(e,i){return e===null||e!==void 0&&!this.imageManager.getPattern(e.toString(),i)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}terrainUseFloatDEM(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(e,i,a){const l=a===void 0?this.terrain&&this.terrain.renderingToTexture:a,u=this.terrain&&this.terrain.exaggeration()===0,h=[];return this.style&&this.style.enable3dLights()&&(e==="globeRaster"||e==="terrainRaster"?(h.push("LIGHTING_3D_MODE"),h.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):l||h.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||h.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?h.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):h.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(h.push("TERRAIN"),this.terrainUseFloatDEM()&&h.push("TERRAIN_DEM_FLOAT_FORMAT"),u&&h.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&h.push("GLOBE"),!this._fogVisible||l||i!==void 0&&!i||h.push("FOG","FOG_DITHERING"),l&&h.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&h.push("OVERDRAW_INSPECTOR"),h}getOrCreateProgram(e,i){this.cache=this.cache||{};const a=i&&i.defines||[],l=i&&i.config,u=this.currentGlobalDefines(e,i&&i.overrideFog,i&&i.overrideRtt).concat(a),h=AL.cacheKey(xL[e],e,u,l);return this.cache[h]||(this.cache[h]=new AL(this.context,e,xL[e],l,eee[e],u)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=S.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ja(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(e,i){if(this.style.enable3dLights()){const a=this.style.directionalLight,l=this.style.ambientLight;if(a&&l){const u=((h,g)=>{const x=h.properties.get("direction"),b=h.properties.get("color").toArray01(),T=h.properties.get("intensity"),M=g.properties.get("color").toArray01(),A=g.properties.get("intensity"),O=[x.x,x.y,x.z],B=Wt(M,A),V=Wt(b,T);return{u_lighting_ambient_color:B,u_lighting_directional_dir:O,u_lighting_directional_color:V,u_ground_radiance:BQ(O,V,B)}})(a,l);i.setLightsUniformValues(e,u)}}}uploadCommonUniforms(e,i,a,l,u){if(this.uploadCommonLightUniforms(e,i),this.terrain&&this.terrain.renderingToTexture)return;const h=this.style.fog;if(h){const g=h.getOpacity(this.transform.pitch),x=((b,T,M,A,O,B,V,W,q,ne,ae,le)=>{const ie=b.transform,ue=T.properties.get("color").toArray01();ue[3]=A;const Ee=b.frameCounter/1e3%1,[Be,je]=T.properties.get("vertical-range");return{u_fog_matrix:M?ie.calculateFogTileMatrix(M):le||b.identityMat,u_fog_range:T.getFovAdjustedRange(ie._fov),u_fog_color:ue,u_fog_horizon_blend:T.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Be,je),je],u_fog_temporal_offset:Ee,u_frustum_tl:O,u_frustum_tr:B,u_frustum_br:V,u_frustum_bl:W,u_globe_pos:q,u_globe_radius:ne,u_viewport:ae,u_globe_transition:Na(ie.zoom),u_is_globe:+(ie.projection.name==="globe")}})(this,h,a,g,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*Qr.devicePixelRatio,this.transform.height*Qr.devicePixelRatio],l);i.setFogUniformValues(e,x)}u&&i.setCutoffUniformValues(e,u.uniformValues)}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),i}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&e.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const e=this._backgroundTiles,i=this._backgroundTiles={},a=this.transform.coveringTiles({tileSize:512});for(const l of a)i[l.key]=e[l.key]||new nx(l,512,this.transform.tileZoom,this);return i}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(e,i){return!(!e.is3D()||e.minzoom&&e.minzoom>this.transform.zoom||e.sourceLayer!=="building"&&(!i||i.type!=="batched-model"))}isTileAffectedByFog(e){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let i=this._cachedTileFogOpacities[e.key];return i||(this._cachedTileFogOpacities[e.key]=i=this.style.fog.getOpacityForTile(e)),i[0]>=Ng||i[1]>=Ng}}const Ug=2048;class Mee{constructor(e,i){this.aabb=e,this.lastCascade=i}}class Pee{add(e,i){const a=this.receivers[e.key];a!==void 0?(a.aabb.min[0]=Math.min(a.aabb.min[0],i.min[0]),a.aabb.min[1]=Math.min(a.aabb.min[1],i.min[1]),a.aabb.min[2]=Math.min(a.aabb.min[2],i.min[2]),a.aabb.max[0]=Math.max(a.aabb.max[0],i.max[0]),a.aabb.max[1]=Math.max(a.aabb.max[1],i.max[1]),a.aabb.max[2]=Math.max(a.aabb.max[2],i.max[2])):this.receivers[e.key]=new Mee(i,null)}clear(){this.receivers={}}get(e){return this.receivers[e.key]}computeRequiredCascades(e,i,a){const l=Xn.fromPoints(e.points);let u=0;for(const h in this.receivers){const g=this.receivers[h];if(!g||!l.intersectsAabb(g.aabb))continue;g.aabb.min=l.closestPoint(g.aabb.min),g.aabb.max=l.closestPoint(g.aabb.max);const x=g.aabb.getCorners();for(let b=0;b<a.length;b++){let T=!0;for(const M of x){const A=[M[0]*i,M[1]*i,M[2]];if(ce.transformMat4(A,A,a[b].matrix),A[0]<-1||A[0]>1||A[1]<-1||A[1]>1){T=!1;break}}if(g.lastCascade=b,u=Math.max(u,b),T)break}}return u+1}}class Aee{constructor(e){this.painter=e,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Pee,this._depthMode=new Bn(e.context.gl.LEQUAL,Bn.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1}destroy(){for(const e of this._cascades)e.texture.destroy(),e.framebuffer.destroy();this._cascades=[]}updateShadowParameters(e,i){const a=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!i||!i.properties)return;const l=i.properties.get("shadow-intensity");if(!i.shadowsEnabled()||l<=0||(this._shadowLayerCount=a.style.order.reduce((O,B)=>{const V=a.style._mergedLayers[B];return O+(V.hasShadowPass()&&!V.isHidden(e.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;const u=a.context,h=Ug,g=Ug;if(this._cascades.length===0)for(let O=0;O<2;++O){const B=a._shadowMapDebug,V=u.gl,W=u.createFramebuffer(h,g,B,"texture"),q=new ja(u,{width:h,height:g,data:null},V.DEPTH_COMPONENT);if(W.depthAttachment.set(q.texture),B){const ne=new ja(u,{width:h,height:g,data:null},V.RGBA);W.colorAttachment.set(ne.texture)}this._cascades.push({framebuffer:W,texture:q,matrix:[],far:0,boundingSphereRadius:0,frustum:new to,scale:0})}this.shadowDirection=e$(i);let x=0;if(e.elevation){const O=e.elevation,B=[1e4,-1e4];O.visibleDemTiles.filter(V=>V.dem).forEach(V=>{const W=V.dem.tree;B[0]=Math.min(B[0],W.minimums[0]),B[1]=Math.max(B[1],W.maximums[0])}),B[0]!==1e4&&(x=(B[1]-B[0])*O.exaggeration())}const b=1.5*e.cameraToCenterDistance,T=3*b,M=new Float64Array(16);for(let O=0;O<2;++O){const B=this._cascades[O];let V=e.height/50,W=1;O===0?W=b:(V=b,W=T);const[q,ne]=Ree(e,this.shadowDirection,V,W,Ug,x);B.scale=e.scale,B.matrix=q,B.boundingSphereRadius=ne,U.invert(M,B.matrix),B.frustum=to.fromInvProjectionMatrix(M,1,0,!0),B.far=W}this._uniformValues.u_fade_range=[.75*this._cascades[1].far,this._cascades[1].far],this._uniformValues.u_shadow_intensity=l,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=.00048828125,this._uniformValues.u_shadow_map_resolution=Ug,this._uniformValues.u_shadowmap_0=Ic.ShadowMap0,this._uniformValues.u_shadowmap_1=Ic.ShadowMap0+1,this._groundShadowTiles=a.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const A=a.transform.elevation;for(const O of this._groundShadowTiles){let B={min:0,max:0};if(A){const V=A.getMinMaxForTile(O);V&&(B=V)}this.addShadowReceiver(O.toUnwrapped(),B.min,B.max)}}get enabled(){return this._enabled}set enabled(e){this._enabled=e}drawShadowPass(e,i){if(!this._enabled)return;const a=this.painter,l=a.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(a.transform.getFrustum(0),a.transform.worldSize,this._cascades),l.viewport.set([0,0,Ug,Ug]);for(let u=0;u<this._numCascadesToRender;++u){a.currentShadowCascade=u,l.bindFramebuffer.set(this._cascades[u].framebuffer.framebuffer),l.clear({color:Qn.white,depth:1});for(const h of e.order){const g=e._mergedLayers[h];if(!g.hasShadowPass()||g.isHidden(a.transform.zoom))continue;const x=e.getLayerSourceCache(g),b=x?i[x.id]:void 0;(g.type==="model"||b&&b.length)&&a.renderLayer(a,x,g,b)}}a.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;const e=this.painter,i=e.style,a=e.context,l=i.directionalLight,u=i.ambientLight;if(!l||!u)return;const h=[],g=jv(e,e.longestCutoffRange);g.shouldRenderCutoff&&h.push("RENDER_CUTOFF");const x=f4(l,u),b=new Bn(a.gl.LEQUAL,Bn.ReadOnly,e.depthRangeFor3D);for(const T of this._groundShadowTiles){const M=T.toUnwrapped(),A=e.isTileAffectedByFog(T),O=e.getOrCreateProgram("groundShadow",{defines:h,overrideFog:A});this.setupShadows(M,O),e.uploadCommonUniforms(a,O,M,null,g);const B={u_matrix:e.transform.calculateProjMatrix(M),u_ground_shadow_factor:x};O.draw(e,a.gl.TRIANGLES,b,mi.disabled,zi.multiply,yi.disabled,B,"ground_shadow",e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments,{},e.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?zi.unblended:zi.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(e){const i=this.painter.transform,a=i.calculatePosMatrix(e,i.worldSize);return U.multiply(a,this._cascades[this.painter.currentShadowCascade].matrix,a),Float32Array.from(a)}calculateShadowPassMatrixFromMatrix(e){return U.multiply(e,this._cascades[this.painter.currentShadowCascade].matrix,e),Float32Array.from(e)}setupShadows(e,i,a,l=0){if(!this._enabled)return;const u=this.painter.transform,h=this.painter.context,g=h.gl,x=this._uniformValues,b=new Float64Array(16),T=u.calculatePosMatrix(e,u.worldSize);for(let M=0;M<2;M++)U.multiply(b,this._cascades[M].matrix,T),x[M===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(b),h.activeTexture.set(g.TEXTURE0+Ic.ShadowMap0+M),this._cascades[M].texture.bind(g.NEAREST,g.CLAMP_TO_EDGE);if(this.useNormalOffset=!!a,this.useNormalOffset){const M=U1(e.canonical),A=2/u.tileSize*Zt/Ug,O=A*this._cascades[0].boundingSphereRadius,B=A*this._cascades[1].boundingSphereRadius,V=(a==="vector-tile"?1:3)/Math.pow(2,l-e.canonical.z-(1-u.zoom+Math.floor(u.zoom)));x.u_shadow_normal_offset=[M,O*V,B*V],x.u_shadow_bias=[6e-5,.0012,.012]}else x.u_shadow_bias=[36e-5,.0012,.012];i.setShadowUniformValues(h,x)}setupShadowsFromMatrix(e,i,a=!1){if(!this._enabled)return;const l=this.painter.context,u=l.gl,h=this._uniformValues,g=new Float64Array(16);for(let x=0;x<2;x++)U.multiply(g,this._cascades[x].matrix,e),h[x===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(g),l.activeTexture.set(u.TEXTURE0+Ic.ShadowMap0+x),this._cascades[x].texture.bind(u.NEAREST,u.CLAMP_TO_EDGE);this.useNormalOffset=a,a?(h.u_shadow_normal_offset=[1,5,5],h.u_shadow_bias=[6e-5,.0012,.012]):h.u_shadow_bias=[36e-5,.0012,.012],i.setShadowUniformValues(l,h)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(e,i,a,l){if(l[2]>=0)return{};const u=function(x,b,T){const M=T/(1<<x.canonical.z);return new Xn([x.canonical.x*M+x.wrap*T,x.canonical.y*M+x.wrap*T,0],[(x.canonical.x+1)*M+x.wrap*T,(x.canonical.y+1)*M+x.wrap*T,b])}(e,i,a).getCorners(),h=i/-l[2];l[0]<0?(ce.add(u[0],u[0],[l[0]*h,0,0]),ce.add(u[3],u[3],[l[0]*h,0,0])):l[0]>0&&(ce.add(u[1],u[1],[l[0]*h,0,0]),ce.add(u[2],u[2],[l[0]*h,0,0])),l[1]<0?(ce.add(u[0],u[0],[0,l[1]*h,0]),ce.add(u[1],u[1],[0,l[1]*h,0])):l[1]>0&&(ce.add(u[2],u[2],[0,l[1]*h,0]),ce.add(u[3],u[3],[0,l[1]*h,0]));const g={};return g.vertices=u,g.planes=[xC(u[1],u[0],u[4]),xC(u[2],u[1],u[5]),xC(u[3],u[2],u[6]),xC(u[0],u[3],u[7])],g}addShadowReceiver(e,i,a){this._receivers.add(e,Xn.fromTileIdAndHeight(e,i,a))}getMaxCascadeForTile(e){const i=this._receivers.get(e);return i&&i.lastCascade?i.lastCascade:0}}function xC(r,e,i){const a=ce.sub([],i,e),l=ce.sub([],r,e),u=ce.cross([],a,l),h=ce.length(u);return h===0?[0,0,1,0]:(ce.scale(u,u,1/h),[u[0],u[1],u[2],-ce.dot(u,e)])}function e$(r){const e=r.properties.get("direction"),i=It(e.x,e.y,e.z);i[2]=Qe(i[2],0,75);const a=$t([i[0],i[1],i[2]]);return ce.fromValues(a.x,a.y,a.z)}function f4(r,e){const i=r.properties.get("color"),a=r.properties.get("intensity"),l=r.properties.get("direction"),u=[l.x,l.y,l.z],h=e.properties.get("color"),g=e.properties.get("intensity"),x=Math.max(ce.dot([0,0,1],u),0),b=[0,0,0];ce.scale(b,h.toArray01Linear().slice(0,3),g);const T=[0,0,0];return ce.scale(T,i.toArray01Linear().slice(0,3),x*a),Wr([b[0]>0?b[0]/(b[0]+T[0]):0,b[1]>0?b[1]/(b[1]+T[1]):0,b[2]>0?b[2]/(b[2]+T[2]):0])}function Ree(r,e,i,a,l,u){const h=r.zoom,g=r.scale,x=r.worldSize,b=1/x,T=r.aspect,M=Math.sqrt(1+T*T)*Math.tan(.5*r.fovX),A=M*M,O=a-i,B=a+i;let V,W;A>O/B?(V=a,W=a*M):(V=.5*B*(1+A),W=.5*Math.sqrt(O*O+2*(a*a+i*i)*A+B*B*A*A));const q=r.projection.pixelsPerMeter(r.center.lat,x),ne=r._camera.getCameraToWorldMercator(),ae=[0,0,-V*b];ce.transformMat4(ae,ae,ne);let le=W*b;const ie=r._edgeInsets;if(!(ie.left===0&&ie.top===0&&ie.right===0&&ie.bottom===0||ie.left===ie.right&&ie.top===ie.bottom)){const Jt=r._camera.getWorldToCamera(r.worldSize,r.projection.zAxisUnit==="meters"?q:1),tr=r._camera.getCameraToClipPerspective(r._fov,r.width/r.height,i,a);tr[8]=2*-r.centerOffset.x/r.width,tr[9]=2*r.centerOffset.y/r.height;const lr=new Float64Array(16);U.mul(lr,tr,Jt);const pr=new Float64Array(16);U.invert(pr,lr);const er=to.fromInvProjectionMatrix(pr,x,h,!0);for(const or of er.points){const kr=((ue=or)[0]/=g,ue[1]/=g,ue[2]=Oi(ue[2],r._center.lat),ue);le=Math.max(le,ce.len(ce.subtract([],ae,kr)))}}var ue;le*=l/(l-1);const Ee=Math.acos(e[2]),Be=Math.atan2(-e[0],-e[1]),je=new ZS;je.position=ae,je.setPitchBearing(Ee,Be);const Ge=je.getWorldToCamera(x,q),tt=le*x,Ze=Math.min(r._mercatorZfromZoom(17)*x*-2,-2*tt),nt=je.getCameraToClipOrthographic(-tt,tt,-tt,tt,Ze,(tt+u*q)/e[2]),Xe=new Float64Array(16);U.multiply(Xe,nt,Ge);const ut=ce.fromValues(Math.floor(1e6*ae[0])/1e6*x,Math.floor(1e6*ae[1])/1e6*x,0),bt=.5*l,At=[0,0,0];ce.transformMat4(At,ut,Xe),ce.scale(At,At,bt);const lt=[Math.floor(At[0]),Math.floor(At[1]),Math.floor(At[2])],ft=[0,0,0];ce.sub(ft,At,lt),ce.scale(ft,ft,-1/bt);const Ft=new Float64Array(16);return U.identity(Ft),U.translate(Ft,Ft,ft),U.multiply(Xe,Ft,Xe),[Xe,tt]}class kee extends mo{constructor(e){super(),this.requestManager=e,this.models={"":{}},this.numModelsLoading={}}loadModel(e,i){return Z2(this.requestManager.transformRequest(i,Pe.Model).url).then(a=>{if(!a)return;const l=J3(a),u=new G6(e,void 0,void 0,l);return u.computeBoundsAndApplyParent(),u}).catch(a=>{this.fire(new kn(new Error(`Could not load model ${e} from ${i}: ${a.message}`)))})}load(e,i){this.models[i]||(this.models[i]={});const a=Object.keys(e);this.numModelsLoading[i]=(this.numModelsLoading[i]||0)+a.length;const l=[];for(const u of a)l.push(this.loadModel(u,e[u]));Promise.allSettled(l).then(u=>{for(let h=0;h<u.length;h++){const{status:g,value:x}=u[h];g==="fulfilled"&&x&&(this.models[i][a[h]]=x)}this.numModelsLoading[i]-=a.length,this.fire(new vr("data",{dataType:"style"}))}).catch(u=>{this.fire(new kn(new Error(`Could not load models: ${u.message}`)))})}isLoaded(){for(const e in this.numModelsLoading)if(this.numModelsLoading[e]>0)return!1;return!0}hasModel(e,i){return!!this.getModel(e,i)}getModel(e,i){return this.models[i]||(this.models[i]={}),this.models[i][e]}addModel(e,i,a){this.models[a]||(this.models[a]={}),this.hasModel(e,a)&&this.removeModel(e,a),this.load({[e]:this.requestManager.normalizeModelURL(i)},a)}addModels(e,i){const a={};for(const l in e)a[l]=this.requestManager.normalizeModelURL(e[l]);this.load(a,i)}removeModel(e,i){this.models[i]||(this.models[i]={});const a=this.models[i][e];delete this.models[i][e],a.destroy()}listModels(e){return this.models[e]||(this.models[e]={}),Object.keys(this.models[e])}upload(e,i){this.models[i]||(this.models[i]={});for(const a in this.models[i])this.models[i][a].upload(e.context)}}const vx=(r,e)=>uf(r,e&&e.filter(i=>i.identifier!=="source.canvas")),Oee=Ct(Ni,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","setImportUrl","setImportData","setImportConfig"]),zee=Ct(Ni,["setCenter","setZoom","setBearing","setPitch"]),t$={version:8,layers:[],sources:{}},r$={duration:300,delay:0},Dee=new Set(["fill","line","background","hillshade","raster"]);class Ch extends mo{constructor(e,i={}){super(),this.map=e,this.scope=i.scope||"",this.fragments=[],this.importDepth=i.importDepth||0,this.importsCache=i.importsCache||new Map,this.resolvedImports=i.resolvedImports||new Set,this.transition=ct({},r$),this._buildingIndex=new aQ(this),this.crossTileSymbolIndex=new PQ,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=i.styleChanges||new vg,this.dispatcher=i.dispatcher?i.dispatcher:new jg(mx(),this),i.imageManager?this.imageManager=i.imageManager:(this.imageManager=new DJ,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=i.glyphManager?i.glyphManager:new kv(e._requestManager,i.localFontFamily?2:i.localIdeographFontFamily?1:0,i.localFontFamily||i.localIdeographFontFamily),i.modelManager?this.modelManager=i.modelManager:(this.modelManager=new kee(e._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=new Map,this._configDependentLayers=new Set,this.dispatcher.broadcast("setReferrer",ge());const a=this;this._rtlTextPluginCallback=Ch.registerForPluginStateChange(l=>{a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:l.pluginStatus,pluginURL:l.pluginURL},(u,h)=>{if(Dw(u),h&&h.every(g=>g))for(const g in a._sourceCaches){const x=a._sourceCaches[g],b=x.getSource().type;b!=="vector"&&b!=="geojson"||x.reload()}})}),this.on("data",l=>{if(l.dataType!=="source"||l.sourceDataType!=="metadata")return;const u=this.getOwnSource(l.sourceId);if(u&&u.vectorLayerIds)for(const h in this._layers){const g=this._layers[h];g.source===u.id&&this._validateLayer(g)}})}loadURL(e,i={}){this.fire(new vr("dataloading",{dataType:"style"}));const a=typeof i.validate=="boolean"?i.validate:!ir(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken),this.resolvedImports.add(e);const l=this.importsCache.get(e);if(l)return this._load(l,a);const u=this.map._requestManager.transformRequest(e,Pe.Style);this._request=$e(u,(h,g)=>{if(this._request=null,h)this.fire(new kn(h));else if(g)return this.importsCache.set(e,g),this._load(g,a)})}loadJSON(e,i={}){this.fire(new vr("dataloading",{dataType:"style"})),this._request=Qr.frame(()=>{this._request=null,this._load(e,i.validate!==!1)})}loadEmpty(){this.fire(new vr("dataloading",{dataType:"style"})),this._load(t$,!1)}_loadImports(e,i){if(this.importDepth>=4)return ve("Style doesn't support nesting deeper than 5"),this._reloadImports();const a=[];for(const l of e){const u=this._createFragmentStyle(l),h=new Promise(x=>u.on("style.import.load",x));if(a.push(h),this.resolvedImports.has(l.url)){u.loadEmpty();continue}const g=l.data||this.importsCache.get(l.url);g?u.loadJSON(g,{validate:i}):l.url?u.loadURL(l.url,{validate:i}):u.loadEmpty(),this.fragments.push({style:u,id:l.id,config:l.config})}Promise.all(a).then(()=>this._reloadImports())}_createFragmentStyle(e){const i=this.scope?us(e.id,this.scope):e.id,a=new Ch(this.map,{scope:i,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager});return a.setEventedParent(this.map,{style:a}),a.setConfig(e.config),a}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const e=this.isRootStyle();this._shouldPrecompile=e,this.fire(new vr("data",{dataType:"style"})),this.fire(new vr(e?"style.load":"style.import.load"))}_load(e,i){const a=e.schema;if(this.isRootStyle()&&(e.fragment||a&&e.fragment!==!1)){const h=ct({},t$,{imports:[{id:"basemap",data:e,url:""}]});return void this._load(h,i)}if(this.updateSchema(a),i&&vx(this,Cp(e)))return;this._loaded=!0,this.stylesheet=De(e);for(const h in e.sources)this.addSource(h,e.sources[h],{validate:!1});this._changes.changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(e.glyphs,this.scope);const l=eL(this.stylesheet.layers);if(this._order=l.map(h=>h.id),this.stylesheet.light&&ve("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const h=this.stylesheet.lights[0];this.light=new I2(h.properties,h.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new I2(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const h of l){const g=nC(h,this.options);g.setScope(this.scope),g.isConfigDependent&&this._configDependentLayers.add(g.fqid),g.setEventedParent(this,{layer:{id:g.id}}),this._layers[g.id]=g,this._layers[g.id]=g,this._serializedLayers[g.id]=g.serialize();const x=this.getOwnLayerSourceCache(g),b=!!this.directionalLight&&this.directionalLight.shadowsEnabled();x&&g.canCastShadows()&&b&&(x.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const u=this.stylesheet.terrain;if(u&&!this.terrainSetForDrapingOnly()&&this._createTerrain(u,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.mergeAll(),this._updateMapProjection(),this.map._triggerCameraUpdate(this.camera),this.fire(new vr("data",{dataType:"style"})),e.imports)this._loadImports(e.imports,i);else{this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const h=this.isRootStyle();this._shouldPrecompile=h,this.fire(new vr(h?"style.load":"style.import.load"))}}isRootStyle(){return this.importDepth===0}mergeAll(){let e,i,a,l,u,h,g,x;this.forEachFragmentStyle(b=>{if(b.stylesheet){if(b.light!=null&&(e=b.light),b.stylesheet.lights)for(const T of b.stylesheet.lights)T.type==="ambient"&&b.ambientLight!=null&&(i=b.ambientLight),T.type==="directional"&&b.directionalLight!=null&&(a=b.directionalLight);(b.stylesheet.terrain||b.stylesheet.projection&&b.stylesheet.projection.name==="globe")&&b.terrain!=null&&(!l||l&&l.drapeRenderMode===0||b.terrain.drapeRenderMode===1)&&(l=b.terrain),b.stylesheet.fog&&b.fog!=null&&(u=b.fog),b.stylesheet.camera!=null&&(x=b.stylesheet.camera),b.stylesheet.projection!=null&&(h=b.stylesheet.projection),b.stylesheet.transition!=null&&(g=b.stylesheet.transition)}}),this.light=e,this.ambientLight=i,this.directionalLight=a,this.terrain=l,this.fog=u,this.camera=x||{"camera-projection":"perspective"},this.projection=h||{name:"mercator"},this.transition=ct({},r$,g),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(e){const i=a=>{for(const l of a.fragments)i(l.style);e(a)};i(this)}mergeTerrain(){let e;this.forEachFragmentStyle(i=>{i.terrain!=null&&(!e||e&&e.drapeRenderMode===0||i.terrain.drapeRenderMode===1)&&(e=i.terrain)}),this.terrain=e}mergeProjection(){let e;this.forEachFragmentStyle(i=>{i.stylesheet.projection!=null&&(e=i.stylesheet.projection)}),this.projection=e||{name:"mercator"}}mergeSources(){const e={},i={},a={};this.forEachFragmentStyle(l=>{for(const u in l._sourceCaches){const h=us(u,l.scope);e[h]=l._sourceCaches[u]}for(const u in l._otherSourceCaches){const h=us(u,l.scope);i[h]=l._otherSourceCaches[u]}for(const u in l._symbolSourceCaches){const h=us(u,l.scope);a[h]=l._symbolSourceCaches[u]}}),this._mergedSourceCaches=e,this._mergedOtherSourceCaches=i,this._mergedSymbolSourceCaches=a}mergeLayers(){const e={},i=[],a={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(u=>{for(const h of u._order){const g=u._layers[h];if(g.type==="slot"){const x=qy(h);if(e[x])continue;e[x]=[]}g.slot&&e[g.slot]?e[g.slot].push(g):i.push(g)}}),this._mergedOrder=[];const l=(u=[])=>{for(const h of u)if(h.type==="slot"){const g=qy(h.id);e[g]&&l(e[g])}else{const g=us(h.id,h.scope);this._mergedOrder.push(g),a[g]=h,h.is3D()&&(this._has3DLayers=!0),h.type==="circle"&&(this._hasCircleLayers=!0),h.type==="symbol"&&(this._hasSymbolLayers=!0)}};l(i),this._mergedLayers=a,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(e){return this.stylesheet.camera=ct({},this.stylesheet.camera,e),this.camera=this.stylesheet.camera,this}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(e){this._spriteRequest=function(i,a,l){let u,h,g;const x=Qr.devicePixelRatio>1?"@2x":"";let b=$e(a.transformRequest(a.normalizeSpriteURL(i,x,".json"),Pe.SpriteJSON),(A,O)=>{b=null,g||(g=A,u=O,M())}),T=Et(a.transformRequest(a.normalizeSpriteURL(i,x,".png"),Pe.SpriteImage),(A,O)=>{T=null,g||(g=A,h=O,M())});function M(){if(g)l(g);else if(u&&h){const A=Qr.getImageData(h),O={};for(const B in u){const{width:V,height:W,x:q,y:ne,sdf:ae,pixelRatio:le,stretchX:ie,stretchY:ue,content:Ee}=u[B],Be=new da({width:V,height:W});da.copy(A,Be,{x:q,y:ne},{x:0,y:0},{width:V,height:W}),O[B]={data:Be,pixelRatio:le,sdf:ae,stretchX:ie,stretchY:ue,content:Ee}}l(null,O)}}return{cancel(){b&&(b.cancel(),b=null),T&&(T.cancel(),T=null)}}}(e,this.map._requestManager,(i,a)=>{if(this._spriteRequest=null,i)this.fire(new kn(i));else if(a)for(const l in a)this.imageManager.addImage(l,this.scope,a[l]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new vr("data",{dataType:"style"}))})}_validateLayer(e){const i=this.getOwnSource(e.source);if(!i)return;const a=e.sourceLayer;a&&(i.type==="geojson"||i.vectorLayerIds&&i.vectorLayerIds.indexOf(a)===-1)&&this.fire(new kn(new Error(`Source layer "${a}" does not exist on source "${i.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.updatedSourceCaches).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(const{style:e}of this.fragments)if(!e.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((e,i)=>{const a=this.fragments[i];return a&&a.style&&(e.data=a.style.serialize()),e})}_serializeSources(){const e={};for(const i in this._sourceCaches){const a=this._sourceCaches[i].getSource();e[a.id]||(e[a.id]=a.serialize())}return e}_serializeLayers(e){const i=[];for(const a of e){const l=this._layers[a];l&&l.type!=="custom"&&i.push(l.serialize())}return i}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(e){return!!this.terrain&&(typeof e.isLayerDraped=="function"?e.isLayerDraped(this.getLayerSourceCache(e)):Dee.has(e.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(e){const i=this.getOwnLayer(e);if(i)return i;this.fire(new kn(new Error(`The layer '${e}' does not exist in the map's style.`)))}_checkSource(e){const i=this.getOwnSource(e);if(i)return i;this.fire(new kn(new Error(`The source '${e}' does not exist in the map's style.`)))}update(e){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(e),this.directionalLight&&this.directionalLight.recalculate(e);const i=this.calculateLightsBrightness();e.brightness=i||0,i!==this._brightness&&(this._brightness=i,this.dispatcher.broadcast("setBrightness",i));const a=this._changes.changed;if(this._changes.changed){const u=this._changes.getLayerUpdatesByScope();for(const h in u){const{updatedIds:g,removedIds:x}=u[h];(g||x)&&this._updateWorkerLayers(h,g,x)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(e),this.light&&this.light.updateTransitions(e),this.ambientLight&&this.ambientLight.updateTransitions(e),this.directionalLight&&this.directionalLight.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._changes.reset()}const l={};for(const u in this._mergedSourceCaches){const h=this._mergedSourceCaches[u];l[u]=h.used,h.used=!1}for(const u of this._mergedOrder){const h=this._mergedLayers[u];if(h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)){const g=this.getOwnLayerSourceCache(h);g&&(g.used=!0)}if(!this._precompileDone&&this._shouldPrecompile)for(let g=h.minzoom||0;g<(h.maxzoom||25.5);g++){const x=this.map.painter;if(x){const b=h.getProgramIds();if(!b)continue;for(const T of b){const M=h.getDefaultProgramParams(T,e.zoom);M&&(x.style=this,this.fog&&(x._fogVisible=!0,M.overrideFog=!0,x.getOrCreateProgram(T,M)),x._fogVisible=!1,M.overrideFog=!1,x.getOrCreateProgram(T,M),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(M.overrideRtt=!0,x.getOrCreateProgram(T,M)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(const u in l){const h=this._mergedSourceCaches[u];l[u]!==h.used&&h.getSource().fire(new vr("data",{sourceDataType:"visibility",dataType:"source",sourceId:h.getSource().id}))}this.light&&this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),a&&this.fire(new vr("data",{dataType:"style"}));for(const{style:u}of this.fragments)u.update(e)}_updateTilesForChangedImages(){const e=Array.from(this._changes.changedImages.keys());if(e.length){for(const i in this._sourceCaches)this._sourceCaches[i].reloadTilesForDependencies(["icons","patterns"],e);this._changes.changedImages.clear()}}_updateWorkerLayers(e,i,a){const l=this.getFragmentStyle(e);this.dispatcher.broadcast("updateLayers",{layers:i?l._serializeLayers(i):[],scope:e,removedIds:a||[],options:l.options})}setState(e){if(this._checkLoaded(),vx(this,Cp(e)))return!1;(e=De(e)).layers=eL(e.layers);const i=function(l,u){if(!l)return[{command:Ni.setStyle,args:[u]}];let h=[];try{if(!Re(l.version,u.version))return[{command:Ni.setStyle,args:[u]}];Re(l.center,u.center)||h.push({command:Ni.setCenter,args:[u.center]}),Re(l.zoom,u.zoom)||h.push({command:Ni.setZoom,args:[u.zoom]}),Re(l.bearing,u.bearing)||h.push({command:Ni.setBearing,args:[u.bearing]}),Re(l.pitch,u.pitch)||h.push({command:Ni.setPitch,args:[u.pitch]}),Re(l.sprite,u.sprite)||h.push({command:Ni.setSprite,args:[u.sprite]}),Re(l.glyphs,u.glyphs)||h.push({command:Ni.setGlyphs,args:[u.glyphs]}),Re(l.transition,u.transition)||h.push({command:Ni.setTransition,args:[u.transition]}),Re(l.light,u.light)||h.push({command:Ni.setLight,args:[u.light]}),Re(l.fog,u.fog)||h.push({command:Ni.setFog,args:[u.fog]}),Re(l.projection,u.projection)||h.push({command:Ni.setProjection,args:[u.projection]}),Re(l.lights,u.lights)||h.push({command:Ni.setLights,args:[u.lights]}),Re(l.camera,u.camera)||h.push({command:Ni.setCamera,args:[u.camera]});const g={},x=[];(function(M,A,O,B){let V;for(V in A=A||{},M=M||{})M.hasOwnProperty(V)&&(A.hasOwnProperty(V)||rL(V,O,B));for(V in A){if(!A.hasOwnProperty(V))continue;const W=A[V];M.hasOwnProperty(V)?Re(M[V],W)||(M[V].type==="geojson"&&W.type==="geojson"&&cQ(M,A,V)?O.push({command:Ni.setGeoJSONSourceData,args:[V,W.data]}):lQ(V,A,O,B)):tL(V,A,O)}})(l.sources,u.sources,x,g);const b=[];l.layers&&l.layers.forEach(M=>{M.source&&g[M.source]?h.push({command:Ni.removeLayer,args:[M.id]}):b.push(M)});let T=l.terrain;T&&g[T.source]&&(h.push({command:Ni.setTerrain,args:[void 0]}),T=void 0),h=h.concat(x),Re(T,u.terrain)||h.push({command:Ni.setTerrain,args:[u.terrain]}),function(M,A,O){A=A||[];const B=(M=M||[]).map(lC),V=A.map(lC),W=M.reduce(cC,{}),q=A.reduce(cC,{}),ne=B.slice(),ae=Object.create(null);let le,ie,ue,Ee,Be,je,Ge;for(le=0,ie=0;le<B.length;le++)ue=B[le],q.hasOwnProperty(ue)?ie++:(O.push({command:Ni.removeLayer,args:[ue]}),ne.splice(ne.indexOf(ue,ie),1));for(le=0,ie=0;le<V.length;le++)ue=V[V.length-1-le],ne[ne.length-1-le]!==ue&&(W.hasOwnProperty(ue)?(O.push({command:Ni.removeLayer,args:[ue]}),ne.splice(ne.lastIndexOf(ue,ne.length-ie),1)):ie++,je=ne[ne.length-le],O.push({command:Ni.addLayer,args:[q[ue],je]}),ne.splice(ne.length-le,0,ue),ae[ue]=!0);for(le=0;le<V.length;le++)if(ue=V[le],Ee=W[ue],Be=q[ue],!ae[ue]&&!Re(Ee,Be))if(Re(Ee.source,Be.source)&&Re(Ee["source-layer"],Be["source-layer"])&&Re(Ee.type,Be.type)){for(Ge in sC(Ee.layout,Be.layout,O,ue,null,Ni.setLayoutProperty),sC(Ee.paint,Be.paint,O,ue,null,Ni.setPaintProperty),Re(Ee.slot,Be.slot)||O.push({command:Ni.setSlot,args:[ue,Be.slot]}),Re(Ee.filter,Be.filter)||O.push({command:Ni.setFilter,args:[ue,Be.filter]}),Re(Ee.minzoom,Be.minzoom)&&Re(Ee.maxzoom,Be.maxzoom)||O.push({command:Ni.setLayerZoomRange,args:[ue,Be.minzoom,Be.maxzoom]}),Ee)Ee.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&Ge!=="slot"&&(Ge.indexOf("paint.")===0?sC(Ee[Ge],Be[Ge],O,ue,Ge.slice(6),Ni.setPaintProperty):Re(Ee[Ge],Be[Ge])||O.push({command:Ni.setLayerProperty,args:[ue,Ge,Be[Ge]]}));for(Ge in Be)Be.hasOwnProperty(Ge)&&!Ee.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&Ge!=="slot"&&(Ge.indexOf("paint.")===0?sC(Ee[Ge],Be[Ge],O,ue,Ge.slice(6),Ni.setPaintProperty):Re(Ee[Ge],Be[Ge])||O.push({command:Ni.setLayerProperty,args:[ue,Ge,Be[Ge]]}))}else O.push({command:Ni.removeLayer,args:[ue]}),je=ne[ne.lastIndexOf(ue)+1],O.push({command:Ni.addLayer,args:[Be,je]})}(b,u.layers,h),function(M=[],A=[],O){A=A||[];const B=(M=M||[]).map(lC),V=A.map(lC),W=M.reduce(cC,{}),q=A.reduce(cC,{}),ne=B.slice();let ae,le,ie,ue;for(ae=0,le=0;ae<B.length;ae++)ie=B[ae],q.hasOwnProperty(ie)?le++:(O.push({command:Ni.removeImport,args:[ie]}),ne.splice(ne.indexOf(ie,le),1));for(ae=0,le=0;ae<V.length;ae++)ie=V[V.length-1-ae],ne[ne.length-1-ae]!==ie&&(W.hasOwnProperty(ie)?(O.push({command:Ni.removeImport,args:[ie]}),ne.splice(ne.lastIndexOf(ie,ne.length-le),1)):le++,ue=ne[ne.length-ae],O.push({command:Ni.addImport,args:[q[ie],ue]}),ne.splice(ne.length-ae,0,ie));for(const Ee of A){const Be=W[Ee.id];if(!Be||Re(Be,Ee))continue;Re(Be.config,Ee.config)||O.push({command:Ni.setImportConfig,args:[Ee.id,Ee.config]}),Re(Be.url,Ee.url)||O.push({command:Ni.setImportUrl,args:[Ee.id,Ee.url]});const je=Ee.data;Re(Be&&Be.data,je)||O.push({command:Ni.setImportData,args:[Ee.id,je]})}}(l.imports,u.imports,h)}catch(g){console.warn("Unable to compute style diff:",g),h=[{command:Ni.setStyle,args:[u]}]}return h}(this.serialize(),e).filter(l=>!(l.command in zee));if(i.length===0)return!1;const a=i.filter(l=>!(l.command in Oee));if(a.length>0)throw new Error(`Unimplemented: ${a.map(l=>l.command).join(", ")}.`);return i.forEach(l=>{this[l.command].apply(this,l.args)}),this.stylesheet=e,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(e,i){return this.getImage(e)?this.fire(new kn(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,this.scope,i),this._afterImageUpdated(e),this)}updateImage(e,i){this.imageManager.updateImage(e,this.scope,i)}getImage(e){return this.imageManager.getImage(e,this.scope)}removeImage(e){return this.getImage(e)?(this.imageManager.removeImage(e,this.scope),this._afterImageUpdated(e),this):this.fire(new kn(new Error("No image with this name exists.")))}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(this.scope),this._changes.changedImages.add(e),this._changes.changed=!0,this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new vr("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(e,i,a={}){return this._checkLoaded(),this._validate(dg,`models.${e}`,i,null,a)||(this.modelManager.addModel(e,i,this.scope),this._changes.changed=!0),this}hasModel(e){return this.modelManager.hasModel(e,this.scope)}removeModel(e){return this.hasModel(e)?(this.modelManager.removeModel(e,this.scope),this):this.fire(new kn(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(e,i,a={}){if(this._checkLoaded(),this.getOwnSource(e)!==void 0)throw new Error(`There is already a source with ID "${e}".`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(Aw,`sources.${e}`,i,null,a))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const l=e4(e,i,this.dispatcher,this);l.scope=this.scope,l.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l.id),source:l.serialize(),sourceId:l.id}));const u=h=>{const g=(h?"symbol:":"other:")+l.id,x=us(g,this.scope),b=this._sourceCaches[g]=new bh(x,l,h);(h?this._symbolSourceCaches:this._otherSourceCaches)[l.id]=b,b.onAdd(this.map)};u(!1),i.type!=="vector"&&i.type!=="geojson"||u(!0),l.onAdd&&l.onAdd(this.map),this.mergeSources(),this._changes.changed=!0}removeSource(e){this._checkLoaded();const i=this.getOwnSource(e);if(!i)throw new Error("There is no source with this ID");for(const l in this._layers)if(this._layers[l].source===e)return this.fire(new kn(new Error(`Source "${e}" cannot be removed while layer "${l}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new kn(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const a=this.getOwnSourceCaches(e);for(const l of a){const u=qy(l.id);delete this._sourceCaches[u],delete this._changes.updatedSourceCaches[l.id],l.fire(new vr("data",{sourceDataType:"metadata",dataType:"source",sourceId:l.getSource().id})),l.setEventedParent(null),l.clearTiles()}return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],this.mergeSources(),i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changes.changed=!0,this}setGeoJSONSourceData(e,i){this._checkLoaded(),this.getOwnSource(e).setData(i),this._changes.changed=!0}getOwnSource(e){const i=this.getOwnSourceCache(e);return i&&i.getSource()}getOwnSources(){const e=[];for(const i in this._otherSourceCaches){const a=this.getOwnSourceCache(i);a&&e.push(a.getSource())}return e}setLights(e){if(this._checkLoaded(),!e)return delete this.ambientLight,void delete this.directionalLight;const i=this._getTransitionParameters();for(const l of e){if(this._validate(L0,"lights",l))return;switch(l.type){case"ambient":if(this.ambientLight){const u=this.ambientLight;u.set(l),u.updateTransitions(i)}else this.ambientLight=new z2(l,UJ,this.scope,this.options);break;case"directional":if(this.directionalLight){const u=this.directionalLight;u.set(l),u.updateTransitions(i)}else this.directionalLight=new z2(l,HJ,this.scope,this.options)}}const a=new uo(this.z||0,i);this.ambientLight&&this.ambientLight.recalculate(a),this.directionalLight&&this.directionalLight.recalculate(a),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const e=this.directionalLight,i=this.ambientLight;if(!e||!i)return;const a=M=>.2126*(M[0]<=.03928?M[0]/12.92:Math.pow((M[0]+.055)/1.055,2.4))+.7152*(M[1]<=.03928?M[1]/12.92:Math.pow((M[1]+.055)/1.055,2.4))+.0722*(M[2]<=.03928?M[2]/12.92:Math.pow((M[2]+.055)/1.055,2.4)),l=e.properties.get("color").toArray01(),u=e.properties.get("intensity"),h=e.properties.get("direction"),g=1-It(h.x,h.y,h.z)[2]/90,x=a(l)*u*g,b=i.properties.get("color").toArray01(),T=i.properties.get("intensity");return(x+a(b)*T)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const e=[];return this.directionalLight&&e.push(this.directionalLight.get()),this.ambientLight&&e.push(this.ambientLight.get()),e}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(e){if(!e)return this;const i=this.fragments.find(({id:a})=>a===e);if(!i)throw new Error(`Style import not found: ${e}`);return i.style}setConfigProperty(e,i,a){const l=li(a);if(l.result!=="success")return void vx(this,l.value);const u=l.value.expression,h=this.getFragmentStyle(e);h.options.set(i,u),h.updateConfigDependencies()}setConfig(e,i){if(this.options.clear(),e){for(const a in e){const l=li(e[a]);l.result==="success"&&this.options.set(a,l.value.expression)}this.updateSchema(i)}}updateSchema(e){if(e)for(const i in e){if(this.options.has(i))continue;const a=li(e[i].default);a.result==="success"&&this.options.set(i,a.value.expression)}}updateConfigDependencies(){for(const e of this._configDependentLayers){const i=this.getLayer(e);i&&(i.possiblyEvaluateVisibility(),this._updateLayer(i))}this.ambientLight&&this.ambientLight.scope===this.scope&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.scope===this.scope&&this.directionalLight.updateConfig(this.options),this._changes.changed=!0}addLayer(e,i,a={}){this._checkLoaded();const l=e.id;if(this._layers[l])return void this.fire(new kn(new Error(`Layer with id "${l}" already exists on this map`)));let u;if(e.type==="custom"){if(vx(this,function(T){const M=[],A=T.id;return A===void 0&&M.push({message:`layers.${A}: missing required property "id"`}),T.render===void 0&&M.push({message:`layers.${A}: missing required method "render"`}),T.renderingMode&&T.renderingMode!=="2d"&&T.renderingMode!=="3d"&&M.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),M}(e)))return;u=nC(e,this.options)}else{if(typeof e.source=="object"&&(this.addSource(l,e.source),e=ct(e=De(e),{source:l})),this._validate(Rw,`layers.${l}`,e,{arrayIndex:-1},a))return;u=nC(e,this.options),this._validateLayer(u),u.setEventedParent(this,{layer:{id:l}}),this._serializedLayers[u.id]=u.serialize()}u.isConfigDependent&&this._configDependentLayers.add(u.fqid),u.setScope(this.scope);const h=i?this._order.indexOf(i):this._order.length;if(i&&h===-1)return void this.fire(new kn(new Error(`Layer with id "${i}" does not exist on this map.`)));this._order.splice(h,0,l),this._layerOrderChanged=!0,this._layers[l]=u;const g=this.getOwnLayerSourceCache(u),x=!!this.directionalLight&&this.directionalLight.shadowsEnabled();g&&u.canCastShadows()&&x&&(g.castsShadows=!0);const b=this._changes.getRemovedLayer(u);if(b&&u.source&&g&&u.type!=="custom"){this._changes.discardLayerRemoval(u);const T=us(u.source,u.scope);b.type!==u.type?this._changes.updatedSourceCaches[T]="clear":(this._changes.updatedSourceCaches[T]="reload",g.pause())}this._updateLayer(u),u.onAdd&&u.onAdd(this.map),u.scope=this.scope,this.mergeLayers()}moveLayer(e,i){if(this._checkLoaded(),this._changes.changed=!0,!this._checkLayer(e)||e===i)return;const a=this._order.indexOf(e);this._order.splice(a,1);const l=i?this._order.indexOf(i):this._order.length;i&&l===-1?this.fire(new kn(new Error(`Layer with id "${i}" does not exist on this map.`))):(this._order.splice(l,0,e),this._layerOrderChanged=!0,this.mergeLayers())}removeLayer(e){this._checkLoaded();const i=this._checkLayer(e);if(!i)return;i.setEventedParent(null);const a=this._order.indexOf(e);this._order.splice(a,1),delete this._layers[e],delete this._serializedLayers[e],this._changes.changed=!0,this._layerOrderChanged=!0,this._configDependentLayers.delete(i.fqid),this._changes.removeLayer(i);const l=this.getOwnLayerSourceCache(i);if(l&&l.castsShadows){let u=!1;for(const h in this._layers)if(this._layers[h].source===i.source&&this._layers[h].canCastShadows()){u=!0;break}l.castsShadows=u}i.onRemove&&i.onRemove(this.map),this.mergeLayers()}getOwnLayer(e){return this._layers[e]}hasLayer(e){return e in this._mergedLayers}hasLayerType(e){for(const i in this._layers)if(this._layers[i].type===e)return!0;return!1}setLayerZoomRange(e,i,a){this._checkLoaded();const l=this._checkLayer(e);l&&(l.minzoom===i&&l.maxzoom===a||(i!=null&&(l.minzoom=i),a!=null&&(l.maxzoom=a),this._updateLayer(l)))}setSlot(e,i){this._checkLoaded();const a=this._checkLayer(e);a&&a.slot!==i&&(a.slot=i,this._updateLayer(a))}setFilter(e,i,a={}){this._checkLoaded();const l=this._checkLayer(e);if(l&&!Re(l.filter,i))return i==null?(l.filter=void 0,void this._updateLayer(l)):void(this._validate(Ny,`layers.${l.id}.filter`,i,{layerType:l.type},a)||(l.filter=De(i),this._updateLayer(l)))}getFilter(e){const i=this._checkLayer(e);if(i)return De(i.filter)}setLayoutProperty(e,i,a,l={}){this._checkLoaded();const u=this._checkLayer(e);u&&(Re(u.getLayoutProperty(i),a)||(u.setLayoutProperty(i,a,l),u.isConfigDependent&&this._configDependentLayers.add(u.fqid),this._updateLayer(u)))}getLayoutProperty(e,i){const a=this._checkLayer(e);if(a)return a.getLayoutProperty(i)}setPaintProperty(e,i,a,l={}){this._checkLoaded();const u=this._checkLayer(e);if(!u||Re(u.getPaintProperty(i),a))return;const h=u.setPaintProperty(i,a,l);u.isConfigDependent&&this._configDependentLayers.add(u.fqid),h&&this._updateLayer(u),this._changes.changed=!0,this._changes.updatedPaintProps.add(u.fqid)}getPaintProperty(e,i){const a=this._checkLayer(e);if(a)return a.getPaintProperty(i)}setFeatureState(e,i){this._checkLoaded();const a=e.source,l=e.sourceLayer,u=this._checkSource(a);if(!u)return;const h=u.type;if(h==="geojson"&&l)return void this.fire(new kn(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(h==="vector"&&!l)return void this.fire(new kn(new Error("The sourceLayer parameter must be provided for vector source types.")));e.id===void 0&&this.fire(new kn(new Error("The feature id parameter must be provided.")));const g=this.getOwnSourceCaches(a);for(const x of g)x.setFeatureState(l,e.id,i)}removeFeatureState(e,i){this._checkLoaded();const a=e.source,l=this._checkSource(a);if(!l)return;const u=l.type,h=u==="vector"?e.sourceLayer:void 0;if(u==="vector"&&!h)return void this.fire(new kn(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&typeof e.id!="string"&&typeof e.id!="number")return void this.fire(new kn(new Error("A feature id is required to remove its specific state property.")));const g=this.getOwnSourceCaches(a);for(const x of g)x.removeFeatureState(h,e.id,i)}getFeatureState(e){this._checkLoaded();const i=e.source,a=e.sourceLayer,l=this._checkSource(i);if(l){if(l.type!=="vector"||a)return e.id===void 0&&this.fire(new kn(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(i)[0].getFeatureState(a,e.id);this.fire(new kn(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(e){return this.stylesheet.transition=ct({},this.stylesheet.transition,e),this.transition=this.stylesheet.transition,this}getTransition(){return ct({},this.stylesheet.transition)}serialize(){this._checkLoaded();const e=this.getTerrain(),i=e&&this.terrain&&this.terrain.scope===this.scope?e:void 0;return vt({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:i,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},a=>a!==void 0)}_updateLayer(e){this._changes.updateLayer(e);const i=this.getLayerSourceCache(e),a=us(e.source,e.scope);e.source&&!this._changes.updatedSourceCaches[a]&&i&&i.getSource().type!=="raster"&&(this._changes.updatedSourceCaches[a]="reload",i.pause()),this._changes.changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const i=g=>this._mergedLayers[g].type==="fill-extrusion",a=this.order,l={},u=[];for(let g=a.length-1;g>=0;g--){const x=a[g];if(i(x)){l[x]=g;for(const b of e){const T=b[x];if(T)for(const M of T)u.push(M)}}}u.sort((g,x)=>x.intersectionZ-g.intersectionZ);const h=[];for(let g=a.length-1;g>=0;g--){const x=a[g];if(i(x))for(let b=u.length-1;b>=0;b--){const T=u[b].feature;if(l[T.layer.id]<g)break;h.push(T),u.pop()}else for(const b of e){const T=b[x];if(T)for(const M of T)h.push(M.feature)}}return h}queryRenderedFeatures(e,i,a){i&&i.filter&&this._validate(Ny,"queryRenderedFeatures.filter",i.filter,null,i),i.scope=this.scope,i.availableImages=this._availableImages,i.serializedLayers=this._serializedLayers;const l={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new kn(new Error("parameters.layers must be an Array."))),[];for(const b of i.layers){const T=this._mergedLayers[b];if(!T)return this.fire(new kn(new Error(`The layer '${b}' does not exist in the map's style and cannot be queried for features.`))),[];l[T.source]=!0}}const u=[],h=i.serializedLayers||{},g=i&&i.layers?i.layers.some(b=>{const T=this.getLayer(b);return T&&T.is3D()}):this.has3DLayers(),x=F3.createFromScreenPoints(e,a);for(const b in this._mergedSourceCaches){const T=this._mergedSourceCaches[b].getSource();if(!T||T.scope!==i.scope)continue;const M=this._mergedSourceCaches[b].getSource().id;i.layers&&!l[M]||u.push(iQ(this._mergedSourceCaches[b],this._mergedLayers,h,x,i,a,g,!!this.map._showQueryGeometry))}return this.placement&&u.push(function(b,T,M,A,O,B,V){const W={},q=B.queryRenderedSymbols(A),ne=[];for(const ae of Object.keys(q).map(Number))ne.push(V[ae]);ne.sort(J2);for(const ae of ne){const le=ae.featureIndex.lookupSymbolFeatures(q[ae.bucketInstanceId],T,ae.bucketIndex,ae.sourceLayerIndex,O.filter,O.layers,O.availableImages,b);for(const ie in le){const ue=W[ie]=W[ie]||[],Ee=le[ie];Ee.sort((Be,je)=>{const Ge=ae.featureSortOrder;if(Ge){const tt=Ge.indexOf(Be.featureIndex);return Ge.indexOf(je.featureIndex)-tt}return je.featureIndex-Be.featureIndex});for(const Be of Ee)ue.push(Be)}}for(const ae in W)W[ae].forEach(le=>{const ie=le.feature,ue=M(b[ae]);if(!ue)return;const Ee=ue.getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=Ee});return W}(this._mergedLayers,h,this.getLayerSourceCache.bind(this),x.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)}querySourceFeatures(e,i){i&&i.filter&&this._validate(Ny,"querySourceFeatures.filter",i.filter,null,i);const a=this.getOwnSourceCaches(e);let l=[];for(const u of a)l=l.concat(oQ(u,i));return l}addSourceType(e,i,a){return Ch.getSourceType(e)?a(new Error(`A source type called "${e}" already exists.`)):(Ch.setSourceType(e,i),i.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:i.workerSourceURL},a):a(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(e,i,a={}){this._checkLoaded();const l=this.light.getLight();let u=!1;for(const g in e)if(!Re(e[g],l[g])){u=!0;break}if(!u)return;const h=this._getTransitionParameters();this.light.setLight(e,i,a),this.light.updateTransitions(h)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(e,i=1){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let a=e;if(i===1){if(typeof a.source=="object"){const l="terrain-dem-src";this.addSource(l,a.source),a=De(a),a=ct(a,{source:l})}if(this._validate(AM,"terrain",a))return}if(!this.terrain||this.terrain&&i!==this.terrain.drapeRenderMode){if(!a)return;this._createTerrain(a,i),this.fire(new vr("data",{dataType:"style"}))}else{const l=this.terrain,u=l.get();for(const h of Object.keys(Lt.terrain))!a.hasOwnProperty(h)&&Lt.terrain[h].default&&(a[h]=Lt.terrain[h].default);for(const h in e)if(!Re(e[h],u[h])){l.set(e),this.stylesheet.terrain=e;const g=this._getTransitionParameters({duration:0});l.updateTransitions(g),this.fire(new vr("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const i=this.fog=new NJ(e,this.map.transform);this.stylesheet.fog=i.get();const a=this._getTransitionParameters({duration:0});i.updateTransitions(a)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const e of this.map._markers)e._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const i=this.fog;if(!Re(i.get(),e)){i.set(e),this.stylesheet.fog=i.get();const a=this._getTransitionParameters({duration:0});i.updateTransitions(a)}}else this._createFog(e);this._markersNeedUpdate=!0}_getTransitionParameters(e){return{now:Qr.now(),transition:ct(this.transition,e)}}updateDrapeFirstLayers(){if(!this.terrain)return;const e=[],i=[];for(const a in this._mergedLayers)this.isLayerDraped(this._mergedLayers[a])?e.push(a):i.push(a);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...i)}_createTerrain(e,i){const a=this.terrain=new BJ(e,i);a.setScope(this.scope),this.stylesheet.terrain=e,this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const l=this._getTransitionParameters({duration:0});a.updateTransitions(l)}_force3DLayerUpdate(){for(const e in this._layers){const i=this._layers[e];i.type==="fill-extrusion"&&this._updateLayer(i)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const i=this._layers[e];i.type==="symbol"&&this._updateLayer(i)}}_validate(e,i,a,l,u={}){if(u&&u.validate===!1)return!1;const h=ct({},this.serialize());return vx(this,e.call(Cp,ct({key:i,style:h,value:a,styleSpec:Lt},l)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),pg.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._mergedLayers)this._mergedLayers[e].setEventedParent(null);for(const e in this._mergedSourceCaches)this._mergedSourceCaches[e].clearTiles(),this._mergedSourceCaches[e].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(e){const i=this.getSourceCaches(e);for(const a of i)a.clearTiles()}clearSources(){for(const e in this._mergedSourceCaches)this._mergedSourceCaches[e].clearTiles()}reloadSource(e){const i=this.getSourceCaches(e);for(const a of i)a.resume(),a.reload()}updateSources(e){let i;this.directionalLight&&(i=e$(this.directionalLight));for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].update(e,void 0,void 0,i)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const i=this._sourceCaches[e];i.resume(),i.reload()}}_updatePlacement(e,i,a,l,u=!1){let h=!1,g=!1;const x={},b={};for(const T of this._mergedOrder){const M=this._mergedLayers[T];if(M.type!=="symbol")continue;const A=us(M.source,M.scope);let O=x[A];if(!O){const V=this.getLayerSourceCache(M);if(!V)continue;const W=V.getRenderableIds(!0).map(q=>V.getTileByID(q));b[A]=W.slice(),O=x[A]=W.sort((q,ne)=>ne.tileID.overscaledZ-q.tileID.overscaledZ||(q.tileID.isLessThan(ne.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(M,O,e.center.lng,e.projection);h=h||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),u=u||this._layerOrderChanged||a===0,this._layerOrderChanged&&this.fire(new vr("neworder")),(u||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Qr.now(),e.zoom))&&(this.pauseablePlacement=new EQ(e,this._mergedOrder,u,i,a,l,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,x,b),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Qr.now()),g=!0),h&&this.pauseablePlacement.placement.setStale()),g||h)for(const T of this._mergedOrder){const M=this._mergedLayers[T];M.type==="symbol"&&this.placement.updateLayerOpacities(M,x[us(M.source,M.scope)])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Qr.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}addImport(e){this._checkLoaded();const i=this.stylesheet.imports=this.stylesheet.imports||[];return i.findIndex(({id:l})=>l===e.id)!==-1?this.fire(new kn(new Error(`Import with id '${e.id}' already exists in the map's style.`))):(i.push(e),this._loadImports([e],!0),this)}setImportUrl(e,i){this._checkLoaded();const a=this.stylesheet.imports||[],l=this.getImportIndex(e);if(l===-1)return this;a[l].url=i;const u=this.fragments[l];u.style=this._createFragmentStyle({id:e,url:i});const h=new Promise(g=>u.style.on("style.import.load",g));return u.style.loadURL(i),h.then(()=>this._reloadImports()),this}setImportData(e,i){this._checkLoaded();const a=this.getImportIndex(e),l=this.stylesheet.imports||[];return a===-1?this:i?(this.fragments[a].style.setState(i),this._reloadImports(),this):(delete l[a].data,this.setImportUrl(e,l[a].url))}setImportConfig(e,i){this._checkLoaded();const a=this.getImportIndex(e),l=this.stylesheet.imports||[];if(a===-1)return this;i?l[a].config=i:delete l[a].config;const u=this.fragments[a],h=u.style.stylesheet&&u.style.stylesheet.schema;return u.config=i,u.style.setConfig(i,h),u.style.updateConfigDependencies(),this}removeImport(e){this._checkLoaded();const i=this.stylesheet.imports||[],a=this.getImportIndex(e);return a===-1||(i.splice(a,1),this.fragments[a].style._remove(),this.fragments.splice(a,1),this._reloadImports()),this}getImportIndex(e){const i=(this.stylesheet.imports||[]).findIndex(a=>a.id===e);return i===-1&&this.fire(new kn(new Error(`Import '${e}' does not exist in the map's style and cannot be updated.`))),i}getLayer(e){return this._mergedLayers[e]}getSources(){const e=[];for(const i in this._mergedOtherSourceCaches){const a=this._mergedOtherSourceCaches[i];a&&e.push(a.getSource())}return e}getSource(e,i){const a=this.getSourceCache(e,i);return a&&a.getSource()}getLayerSource(e){const i=this.getLayerSourceCache(e);return i&&i.getSource()}getSourceCache(e,i){const a=us(e,i);return this._mergedOtherSourceCaches[a]}getLayerSourceCache(e){const i=us(e.source,e.scope);return e.type==="symbol"?this._mergedSymbolSourceCaches[i]:this._mergedOtherSourceCaches[i]}getSourceCaches(e){const i=[];return this._mergedOtherSourceCaches[e]&&i.push(this._mergedOtherSourceCaches[e]),this._mergedSymbolSourceCaches[e]&&i.push(this._mergedSymbolSourceCaches[e]),i}updateSourceCaches(){for(const e in this._changes.updatedSourceCaches){const i=this._changes.updatedSourceCaches[e];i==="reload"?this.reloadSource(e):i==="clear"&&this.clearSource(e)}}updateLayers(e){for(const i of this._changes.updatedPaintProps){const a=this.getLayer(i);a&&a.updateTransitions(e)}}getImages(e,i,a){this.imageManager.getImages(i.icons,i.scope,a),this._updateTilesForChangedImages();const l=u=>{u&&u.setDependencies(i.tileID.key,i.type,i.icons)};l(this._otherSourceCaches[i.source]),l(this._symbolSourceCaches[i.source])}getGlyphs(e,i,a){this.glyphManager.getGlyphs(i.stacks,i.scope,a)}getResource(e,i,a){return Te(i,a)}getOwnSourceCache(e){return this._otherSourceCaches[e]}getOwnLayerSourceCache(e){return e.type==="symbol"?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}getOwnSourceCaches(e){const i=[];return this._otherSourceCaches[e]&&i.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&i.push(this._symbolSourceCaches[e]),i}_isSourceCacheLoaded(e){const i=this.getOwnSourceCaches(e);return i.length===0?(this.fire(new kn(new Error(`There is no source with ID '${e}'`))),!1):i.every(a=>a.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}function n$(r,e){let i=!1,a=null;const l=()=>{a=null,i&&(r(),a=setTimeout(l,e),i=!1)};return()=>(i=!0,a||l(),a)}Ch.getSourceType=function(r){return Q3[r]},Ch.setSourceType=function(r,e){Q3[r]=e},Ch.registerForPluginStateChange=function(r){return r({pluginStatus:zl,pluginURL:ud}),pg.on("pluginStateChange",r),r};class Lee{constructor(e){this._hashName=e&&encodeURIComponent(e),Dt(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=n$(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,S.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),S.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const i=i$(e);if(this._hashName){const a=this._hashName;let l=!1;const u=S.location.hash.slice(1).split("&").map(h=>{const g=h.split("=")[0];return g===a?(l=!0,`${g}=${i}`):h}).filter(h=>h);return l||u.push(`${a}=${i}`),`#${u.join("&")}`}return`#${i}`}_getCurrentHash(){const e=S.location.hash.replace("#","");if(this._hashName){let i;return e.split("&").map(a=>a.split("=")).forEach(a=>{a[0]===this._hashName&&(i=a)}),(i&&i[1]||"").split("/")}return e.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const i=this._getCurrentHash();if(i.length>=3&&!i.some(a=>isNaN(a))){const a=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(i[3]||0):e.getBearing();return e.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:a,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=S.location.href.replace(/(#.+)?$/,this.getHashString());S.history.replaceState(S.history.state,null,e)}}function i$(r,e){const i=r.getCenter(),a=Math.round(100*r.getZoom())/100,l=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),u=Math.pow(10,l),h=Math.round(i.lng*u)/u,g=Math.round(i.lat*u)/u,x=r.getBearing(),b=r.getPitch();let T=e?`/${h}/${g}/${a}`:`${a}/${g}/${h}`;return(x||b)&&(T+="/"+Math.round(10*x)/10),b&&(T+=`/${Math.round(b)}`),T}const bC={linearity:.3,easing:qe(0,0,.3,1)},$ee=ct({deceleration:2500,maxSpeed:1400},bC),Bee=ct({deceleration:20,maxSpeed:1400},bC),Fee=ct({deceleration:1e3,maxSpeed:360},bC),Nee=ct({deceleration:1e3,maxSpeed:90},bC);class jee{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Qr.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=Qr.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const i={zoom:0,bearing:0,pitch:0,pan:new oe(0,0),pinchAround:void 0,around:void 0};for(const{settings:u}of this._inertiaBuffer)i.zoom+=u.zoomDelta||0,i.bearing+=u.bearingDelta||0,i.pitch+=u.pitchDelta||0,u.panDelta&&i.pan._add(u.panDelta),u.around&&(i.around=u.around),u.pinchAround&&(i.pinchAround=u.pinchAround);const a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,l={};if(i.pan.mag()){const u=SC(i.pan.mag(),a,ct({},$ee,e||{}));l.offset=i.pan.mult(u.amount/i.pan.mag()),l.center=this._map.transform.center,wC(l,u)}if(i.zoom){const u=SC(i.zoom,a,Bee);l.zoom=this._map.transform.zoom+u.amount,wC(l,u)}if(i.bearing){const u=SC(i.bearing,a,Fee);l.bearing=this._map.transform.bearing+Qe(u.amount,-179,179),wC(l,u)}if(i.pitch){const u=SC(i.pitch,a,Nee);l.pitch=this._map.transform.pitch+u.amount,wC(l,u)}if(l.zoom||l.bearing){const u=i.pinchAround===void 0?i.around:i.pinchAround;l.around=u?this._map.unproject(u):this._map.getCenter()}return this.clear(),l.noMoveStart=!0,l}}function wC(r,e){(!r.duration||r.duration<e.duration)&&(r.duration=e.duration,r.easing=e.easing)}function SC(r,e,i){const{maxSpeed:a,linearity:l,deceleration:u}=i,h=Qe(r*l/(e/1e3),-a,a),g=Math.abs(h)/(u*l);return{easing:i.easing,duration:1e3*g,amount:h*(g/2)}}class au extends vr{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,a,l={}){const u=Po(i.getCanvasContainer(),a);super(e,ct({point:u,lngLat:i.unproject(u),originalEvent:a},l)),this._defaultPrevented=!1,this.target=i}}class CC extends vr{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,a){const l=e==="touchend"?a.changedTouches:a.touches,u=Ha(i.getCanvasContainer(),l),h=u.map(x=>i.unproject(x)),g=u.reduce((x,b,T,M)=>x.add(b.div(M.length)),new oe(0,0));super(e,{points:u,point:g,lngLats:h,lngLat:i.unproject(g),originalEvent:a}),this._defaultPrevented=!1}}class Vee extends vr{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,a){super(e,{originalEvent:a}),this._defaultPrevented=!1}}class Uee{constructor(e,i){this._map=e,this._clickTolerance=i.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new Vee(e.type,this._map,e))}mousedown(e,i){return this._mousedownPos=i,this._firePreventable(new au(e.type,this._map,e))}mouseup(e){this._map.fire(new au(e.type,this._map,e))}preclick(e){const i=ct({},e);i.type="preclick",this._map.fire(new au(i.type,this._map,i))}click(e,i){this._mousedownPos&&this._mousedownPos.dist(i)>=this._clickTolerance||(this.preclick(e),this._map.fire(new au(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new au(e.type,this._map,e))}mouseover(e){this._map.fire(new au(e.type,this._map,e))}mouseout(e){this._map.fire(new au(e.type,this._map,e))}touchstart(e){return this._firePreventable(new CC(e.type,this._map,e))}touchmove(e){this._map.fire(new CC(e.type,this._map,e))}touchend(e){this._map.fire(new CC(e.type,this._map,e))}touchcancel(e){this._map.fire(new CC(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hee{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new au(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new au("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new au(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gee{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,i){this.isEnabled()&&e.shiftKey&&e.button===0&&(fi(),this._startPos=this._lastPos=i,this._active=!0)}mousemoveWindow(e,i){if(!this._active)return;const a=i,l=this._startPos,u=this._lastPos;if(!l||!u||u.equals(a)||!this._box&&a.dist(l)<this._clickTolerance)return;this._lastPos=a,this._box||(this._box=Jn("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const h=Math.min(l.x,a.x),g=Math.max(l.x,a.x),x=Math.min(l.y,a.y),b=Math.max(l.y,a.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${h}px,${x}px)`,this._box.style.width=g-h+"px",this._box.style.height=b-x+"px")})}mouseupWindow(e,i){if(!this._active)return;const a=this._startPos,l=i;if(a&&e.button===0){if(this.reset(),xo(),a.x!==l.x||a.y!==l.y)return this._map.fire(new vr("boxzoomend",{originalEvent:e})),{cameraAnimation:u=>u.fitScreenCoordinates(a,l,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),gi(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new vr(e,{originalEvent:i}))}}function p4(r,e){const i={};for(let a=0;a<r.length;a++)i[r[a].identifier]=e[a];return i}class qee{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(e,i,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=e.timeStamp),a.length===this.numTouches&&(this.centroid=function(l){const u=new oe(0,0);for(const h of l)u._add(h);return u.div(l.length)}(i),this.touches=p4(a,i)))}touchmove(e,i,a){if(this.aborted||!this.centroid)return;const l=p4(a,i);for(const u in this.touches){const h=l[u];(!h||h.dist(this.touches[u])>30)&&(this.aborted=!0)}}touchend(e,i,a){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){const l=!this.aborted&&this.centroid;if(this.reset(),l)return l}}}class m4{constructor(e){this.singleTap=new qee(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,i,a){this.singleTap.touchstart(e,i,a)}touchmove(e,i,a){this.singleTap.touchmove(e,i,a)}touchend(e,i,a){const l=this.singleTap.touchend(e,i,a);if(l){const u=e.timeStamp-this.lastTime<500,h=!this.lastTap||this.lastTap.dist(l)<30;if(u&&h||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=l,this.count===this.numTaps)return this.reset(),l}}}class Wee{constructor(){this._zoomIn=new m4({numTouches:1,numTaps:2}),this._zoomOut=new m4({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,i,a){this._zoomIn.touchstart(e,i,a),this._zoomOut.touchstart(e,i,a)}touchmove(e,i,a){this._zoomIn.touchmove(e,i,a),this._zoomOut.touchmove(e,i,a)}touchend(e,i,a){const l=this._zoomIn.touchend(e,i,a),u=this._zoomOut.touchend(e,i,a);return l?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:h=>h.easeTo({duration:300,zoom:h.getZoom()+1,around:h.unproject(l)},{originalEvent:e})}):u?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:h=>h.easeTo({duration:300,zoom:h.getZoom()-1,around:h.unproject(u)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Kee={0:1,2:2};class g4{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,i){return!1}_move(e,i){return{}}mousedown(e,i){if(this._lastPoint)return;const a=Ga(e);this._correctButton(e,a)&&(this._lastPoint=i,this._eventButton=a)}mousemoveWindow(e,i){const a=this._lastPoint;if(a){if(e.preventDefault(),this._eventButton!=null&&function(l,u){const h=Kee[u];return l.buttons===void 0||(l.buttons&h)!==h}(e,this._eventButton))this.reset();else if(this._moved||!(i.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=i,this._move(a,i)}}mouseupWindow(e){this._lastPoint&&Ga(e)===this._eventButton&&(this._moved&&xo(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zee extends g4{mousedown(e,i){super.mousedown(e,i),this._lastPoint&&(this._active=!0)}_correctButton(e,i){return i===0&&!e.ctrlKey}_move(e,i){return{around:i,panDelta:i.sub(e)}}}class o$ extends g4{_correctButton(e,i){return i===0&&e.ctrlKey||i===2}_move(e,i){const a=.8*(i.x-e.x);if(a)return this._active=!0,{bearingDelta:a}}contextmenu(e){e.preventDefault()}}class a$ extends g4{_correctButton(e,i){return i===0&&e.ctrlKey||i===2}_move(e,i){const a=-.5*(i.y-e.y);if(a)return this._active=!0,{pitchDelta:a}}contextmenu(e){e.preventDefault()}}class Xee{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset(),Dt(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new oe(0,0)}touchstart(e,i,a){return this._calculateTransform(e,i,a)}touchmove(e,i,a){if(this._active&&!(a.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(a.length===1&&!br())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,i,a)}}touchend(e,i,a){this._calculateTransform(e,i,a),this._active&&a.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,a){a.length>0&&(this._active=!0);const l=p4(a,i),u=new oe(0,0),h=new oe(0,0);let g=0;for(const b in l){const T=l[b],M=this._touches[b];M&&(u._add(T),h._add(T.sub(M)),g++,l[b]=T)}if(this._touches=l,g<this._minTouches||!h.mag())return;const x=h.div(g);return this._sum._add(x),this._sum.mag()<this._clickTolerance?void 0:{around:u.div(g),panDelta:x}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Jn("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class y4{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,i,a){return{}}touchstart(e,i,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([i[0],i[1]]))}touchmove(e,i,a){const l=this._firstTwoTouches;if(!l)return;e.preventDefault();const[u,h]=l,g=EC(a,i,u),x=EC(a,i,h);if(!g||!x)return;const b=this._aroundCenter?null:g.add(x).div(2);return this._move([g,x],b,e)}touchend(e,i,a){if(!this._firstTwoTouches)return;const[l,u]=this._firstTwoTouches,h=EC(a,i,l),g=EC(a,i,u);h&&g||(this._active&&xo(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function EC(r,e,i){for(let a=0;a<r.length;a++)if(r[a].identifier===i)return e[a]}function s$(r,e){return Math.log(r/e)/Math.LN2}class Yee extends y4{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,i){const a=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(s$(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:s$(this._distance,a),pinchAround:i}}}function l$(r,e){return 180*r.angleWith(e)/Math.PI}class Jee extends y4{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,i){const a=this._vector;if(this._vector=e[0].sub(e[1]),a&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:l$(this._vector,a),pinchAround:i}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const i=25/(Math.PI*this._minDiameter)*360,a=this._startVector;if(!a)return!1;const l=l$(e,a);return Math.abs(l)<i}}function v4(r){return Math.abs(r.y)>Math.abs(r.x)}class Qee extends y4{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,v4(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,i,a){const l=this._lastPoints;if(!l)return;const u=e[0].sub(l[0]),h=e[1].sub(l[1]);return this._map._cooperativeGestures&&!br()&&a.touches.length<3||(this._valid=this.gestureBeginsVertically(u,h,a.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(u.y+h.y)/2*-.5})}gestureBeginsVertically(e,i,a){if(this._valid!==void 0)return this._valid;const l=e.mag()>=2,u=i.mag()>=2;if(!l&&!u)return;if(!l||!u)return this._firstMove==null&&(this._firstMove=a),a-this._firstMove<100&&void 0;const h=e.y>0==i.y>0;return v4(e)&&v4(i)&&h}}const ete={panStep:100,bearingStep:15,pitchStep:10};class tte{constructor(){const e=ete;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let i=0,a=0,l=0,u=0,h=0;switch(e.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:e.shiftKey?a=-1:(e.preventDefault(),u=-1);break;case 39:e.shiftKey?a=1:(e.preventDefault(),u=1);break;case 38:e.shiftKey?l=1:(e.preventDefault(),h=-1);break;case 40:e.shiftKey?l=-1:(e.preventDefault(),h=1);break;default:return}return this._rotationDisabled&&(a=0,l=0),{cameraAnimation:g=>{const x=g.getZoom();g.easeTo({duration:300,easeId:"keyboardHandler",easing:rte,zoom:i?Math.round(x)+i*(e.shiftKey?2:1):x,bearing:g.getBearing()+a*this._bearingStep,pitch:g.getPitch()+l*this._pitchStep,offset:[-u*this._panStep,-h*this._panStep],center:g.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rte(r){return r*(2-r)}const c$=4.000244140625;class nte{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,Dt(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||br()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let i=e.deltaMode===S.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const a=Qr.now(),l=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,i!==0&&i%c$==0?this._type="wheel":i!==0&&Math.abs(i)<4?this._type="trackpad":l>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(l*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=Po(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:i,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._map.transform;this._type==="wheel"&&e.projection.wrap&&(e._center.lng>=180||e._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const i=()=>e._terrainEnabled()&&this._aroundCoord?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(this._delta!==0){const b=this._type==="wheel"&&Math.abs(this._delta)>c$?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*b)));this._delta<0&&T!==0&&(T=1/T);const M=i(),A=Math.pow(2,M),O=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):A;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(O*T))),this._type==="wheel"&&(this._startZoom=M,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:i(),l=this._startZoom,u=this._easing;let h,g=!1;if(this._type==="wheel"&&l&&u){const b=Math.min((Qr.now()-this._lastWheelEventTime)/200,1);h=Mn(l,a,u(b)),b<1?this._frameId||(this._frameId=!0):g=!0}else h=a,g=!0;this._active=!0,g&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let x=h-i();return x*this._lastDelta<0&&(x=0),{noInertia:!0,needsRenderFrame:!g,zoomDelta:x,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=rt;if(this._prevEase){const a=this._prevEase,l=(Qr.now()-a.start)/a.duration,u=a.easing(l+.01)-a.easing(l),h=.27/Math.sqrt(u*u+1e-4)*.01;i=qe(h,Math.sqrt(.0729-h*h),.25,1)}return this._prevEase={start:Qr.now(),duration:e,easing:i},i}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Jn("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(S.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class ite{constructor(e,i){this._clickZoom=e,this._tapZoom=i}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ote{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,i){return e.preventDefault(),{cameraAnimation:a=>{a.easeTo({duration:300,zoom:a.getZoom()+(e.shiftKey?-1:1),around:a.unproject(i)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ate{constructor(){this._tap=new m4({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,i,a){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=i[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(e,i,a))}touchmove(e,i,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;const l=i[0],u=l.y-this._swipePoint.y;return this._swipePoint=l,e.preventDefault(),this._active=!0,{zoomDelta:u/128}}}else this._tap.touchmove(e,i,a)}touchend(e,i,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(e,i,a)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ste{constructor(e,i,a){this._el=e,this._mousePan=i,this._touchPan=a}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class lte{constructor(e,i,a){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=i,this._mousePitch=a}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class cte{constructor(e,i,a,l){this._el=e,this._touchZoom=i,this._touchRotate=a,this._tapDragZoom=l,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const TC=r=>r.zoom||r.drag||r.pitch||r.rotate;class ute extends vr{}class hte{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,i){const a=ce.sub([],i,e);this.radius=ce.length(a[2]<0?ce.div([],a,this.constants):[a[0],a[1],0])}projectRay(e){ce.div(e,e,this.constants),ce.normalize(e,e),ce.mul(e,e,this.constants);const i=ce.scale([],e,this.radius);if(i[2]>0){const a=ce.scale([],[0,0,1],ce.dot(i,[0,0,1])),l=ce.scale([],ce.normalize([],[i[0],i[1],0]),this.radius),u=ce.add([],i,ce.scale([],ce.sub([],ce.add([],l,a),i),2));i[0]=u[0],i[1]=u[1]}return i}}function IC(r){return r.panDelta&&r.panDelta.mag()||r.zoomDelta||r.bearingDelta||r.pitchDelta}class dte{constructor(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jee(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new hte,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),Dt(["handleEvent","handleWindowEvent"],this);const a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[S.document,"mousemove",{capture:!0}],[S.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[S,"blur",void 0]];for(const[l,u,h]of this._listeners)l.addEventListener(u,l===S.document?this.handleWindowEvent:this.handleEvent,h)}destroy(){for(const[e,i,a]of this._listeners)e.removeEventListener(i,e===S.document?this.handleWindowEvent:this.handleEvent,a)}_addDefaultHandlers(e){const i=this._map,a=i.getCanvasContainer();this._add("mapEvent",new Uee(i,e));const l=i.boxZoom=new Gee(i,e);this._add("boxZoom",l);const u=new Wee,h=new ote;i.doubleClickZoom=new ite(h,u),this._add("tapZoom",u),this._add("clickZoom",h);const g=new ate;this._add("tapDragZoom",g);const x=i.touchPitch=new Qee(i);this._add("touchPitch",x);const b=new o$(e),T=new a$(e);i.dragRotate=new lte(e,b,T),this._add("mouseRotate",b,["mousePitch"]),this._add("mousePitch",T,["mouseRotate"]);const M=new Zee(e),A=new Xee(i,e);i.dragPan=new ste(a,M,A),this._add("mousePan",M),this._add("touchPan",A,["touchZoom","touchRotate"]);const O=new Jee,B=new Yee;i.touchZoomRotate=new cte(a,B,O,g),this._add("touchRotate",O,["touchPan","touchZoom"]),this._add("touchZoom",B,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Hee(i));const V=i.scrollZoom=new nte(i,this);this._add("scrollZoom",V,["mousePan"]);const W=i.keyboard=new tte;this._add("keyboard",W);for(const q of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[q]&&i[q].enable(e[q])}_add(e,i,a){this._handlers.push({handlerName:e,handler:i,allowed:a}),this._handlersById[e]=i}stop(e){if(!this._updatingCamera){for(const{handler:i}of this._handlers)i.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!TC(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,i,a){for(const l in e)if(l!==a&&(!i||i.indexOf(l)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const i=[];for(const a of e)this._el.contains(a.target)&&i.push(a);return i}handleEvent(e,i){this._updatingCamera=!0;const a=e.type==="renderFrame",l=a?void 0:e,u={needsRenderFrame:!1},h={},g={},x=e.touches?this._getMapTouches(e.touches):void 0,b=x?Ha(this._el,x):a?void 0:Po(this._el,e);for(const{handlerName:A,handler:O,allowed:B}of this._handlers){if(!O.isEnabled())continue;let V;this._blockedByActive(g,B,A)?O.reset():O[i||e.type]&&(V=O[i||e.type](e,b,x),this.mergeHandlerResult(u,h,V,A,l),V&&V.needsRenderFrame&&this._triggerRenderFrame()),(V||O.isActive())&&(g[A]=O)}const T={};for(const A in this._previousActiveHandlers)g[A]||(T[A]=l);this._previousActiveHandlers=g,(Object.keys(T).length||IC(u))&&(this._changes.push([u,h,T]),this._triggerRenderFrame()),(Object.keys(g).length||IC(u))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:M}=u;M&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],M(this._map))}mergeHandlerResult(e,i,a,l,u){if(!a)return;ct(e,a);const h={handlerName:l,originalEvent:a.originalEvent||u};a.zoomDelta!==void 0&&(i.zoom=h),a.panDelta!==void 0&&(i.drag=h),a.pitchDelta!==void 0&&(i.pitch=h),a.bearingDelta!==void 0&&(i.rotate=h)}_applyChanges(){const e={},i={},a={};for(const[l,u,h]of this._changes)l.panDelta&&(e.panDelta=(e.panDelta||new oe(0,0))._add(l.panDelta)),l.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+l.zoomDelta),l.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+l.bearingDelta),l.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+l.pitchDelta),l.around!==void 0&&(e.around=l.around),l.aroundCoord!==void 0&&(e.aroundCoord=l.aroundCoord),l.pinchAround!==void 0&&(e.pinchAround=l.pinchAround),l.noInertia&&(e.noInertia=l.noInertia),ct(i,u),ct(a,h);this._updateMapTransform(e,i,a),this._changes=[]}_updateMapTransform(e,i,a){const l=this._map,u=l.transform,h=ne=>[ne.x,ne.y,ne.z];if((ne=>{const ae=this._eventsInProgress.drag;return ae&&!this._handlersById[ae.handlerName].isActive()})()&&!IC(e)){const ne=u.zoom;u.cameraElevationReference="sea",this._originalZoom!=null&&u._orthographicProjectionAtLowPitch&&u.projection.name!=="globe"&&u.pitch===0?(u.cameraElevationReference="ground",u.zoom=this._originalZoom):(u.recenterOnTerrain(),u.cameraElevationReference="ground"),ne!==u.zoom&&this._map._update(!0)}if(u._isCameraConstrained&&l._stop(!0),!IC(e))return void this._fireEvents(i,a,!0);let{panDelta:g,zoomDelta:x,bearingDelta:b,pitchDelta:T,around:M,aroundCoord:A,pinchAround:O}=e;u._isCameraConstrained&&(x>0&&(x=0),u._isCameraConstrained=!1),O!==void 0&&(M=O),(x||(ne=>i[ne]&&!this._eventsInProgress[ne])("drag"))&&M&&(this._dragOrigin=h(u.pointCoordinate3D(M)),this._originalZoom=u.zoom,this._trackingEllipsoid.setup(u._camera.position,this._dragOrigin)),u.cameraElevationReference="sea",l._stop(!0),M=M||l.transform.centerPoint,b&&(u.bearing+=b),T&&(u.pitch+=T),u._updateCameraState();const B=[0,0,0];if(g)if(u.projection.name==="mercator"){const ne=this._trackingEllipsoid.projectRay(u.screenPointToMercatorRay(M).dir),ae=this._trackingEllipsoid.projectRay(u.screenPointToMercatorRay(M.sub(g)).dir);B[0]=ae[0]-ne[0],B[1]=ae[1]-ne[1]}else{const ne=u.pointCoordinate(M);if(u.projection.name==="globe"){g=g.rotate(-u.angle);const ae=u._pixelsPerMercatorPixel/u.worldSize;B[0]=-g.x*WM(Ro(ne.y))*ae,B[1]=-g.y*WM(u.center.lat)*ae}else{const ae=u.pointCoordinate(M.sub(g));ne&&ae&&(B[0]=ae.x-ne.x,B[1]=ae.y-ne.y)}}const V=u.zoom,W=[0,0,0];if(x){const ne=h(A||u.pointCoordinate3D(M)),ae={dir:ce.normalize([],ce.sub([],ne,u._camera.position))};if(ae.dir[2]<0){const le=u.zoomDeltaToMovement(ne,x);ce.scale(W,ae.dir,le)}}const q=ce.add(B,B,W);u._translateCameraConstrained(q),x&&Math.abs(u.zoom-V)>1e-4&&u.recenterOnTerrain(),u.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(i,a,!0)}_fireEvents(e,i,a){const l=TC(this._eventsInProgress),u=TC(e),h={};for(const T in e){const{originalEvent:M}=e[T];this._eventsInProgress[T]||(h[`${T}start`]=M),this._eventsInProgress[T]=e[T]}!l&&u&&this._fireEvent("movestart",u.originalEvent);for(const T in h)this._fireEvent(T,h[T]);u&&this._fireEvent("move",u.originalEvent);for(const T in e){const{originalEvent:M}=e[T];this._fireEvent(T,M)}const g={};let x;for(const T in this._eventsInProgress){const{handlerName:M,originalEvent:A}=this._eventsInProgress[T];this._handlersById[M].isActive()||(delete this._eventsInProgress[T],x=i[M]||A,g[`${T}end`]=x)}for(const T in g)this._fireEvent(T,g[T]);const b=TC(this._eventsInProgress);if(a&&(l||u)&&!b){this._updatingCamera=!0;const T=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),M=A=>A!==0&&-this._bearingSnap<A&&A<this._bearingSnap;T?(M(T.bearing||this._map.getBearing())&&(T.bearing=0),this._map.easeTo(T,{originalEvent:x})):(this._map.fire(new vr("moveend",{originalEvent:x})),M(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new vr(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{this._frameId=void 0,this.handleEvent(new ute("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const u$="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class fte extends mo{constructor(e,i){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,this._respectPrefersReducedMotion=i.respectPrefersReducedMotion!==!1,Dt(["_renderFrameCallback"],this)}getCenter(){return new zn(this.transform.center.lng,this.transform.center.lat)}setCenter(e,i){return this.jumpTo({center:e},i)}panBy(e,i,a){return e=oe.convert(e).mult(-1),this.panTo(this.transform.center,ct({offset:e},i),a)}panTo(e,i,a){return this.easeTo(ct({center:e},i),a)}getZoom(){return this.transform.zoom}setZoom(e,i){return this.jumpTo({zoom:e},i),this}zoomTo(e,i,a){return this.easeTo(ct({zoom:e},i),a)}zoomIn(e,i){return this.zoomTo(this.getZoom()+1,e,i),this}zoomOut(e,i){return this.zoomTo(this.getZoom()-1,e,i),this}getBearing(){return this.transform.bearing}setBearing(e,i){return this.jumpTo({bearing:e},i),this}getPadding(){return this.transform.padding}setPadding(e,i){return this.jumpTo({padding:e},i),this}rotateTo(e,i,a){return this.easeTo(ct({bearing:e},i),a)}resetNorth(e,i){return this.rotateTo(0,ct({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(ct({bearing:0,pitch:0,duration:1e3},e),i),this}snapToNorth(e,i){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,i):this}getPitch(){return this.transform.pitch}setPitch(e,i){return this.jumpTo({pitch:e},i),this}cameraForBounds(e,i){e=Dl.convert(e);const a=i&&i.bearing||0,l=i&&i.pitch||0,u=e.getNorthWest(),h=e.getSouthEast();return this._cameraForBounds(this.transform,u,h,a,l,i)}_extendCameraOptions(e){const i={top:0,bottom:0,right:0,left:0};if(typeof(e=ct({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding=="number"){const a=e.padding;e.padding={top:a,bottom:a,right:a,left:a}}return e.padding=ct(i,e.padding),e}_minimumAABBFrustumDistance(e,i){const a=i.max[0]-i.min[0],l=i.max[1]-i.min[1];return a/l>e.aspect?a/(2*Math.tan(.5*e.fovX)*e.aspect):l/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(e,i,a,l,u,h){const g=e.clone(),x=this._extendCameraOptions(h);g.bearing=l,g.pitch=u;const b=zn.convert(i),T=zn.convert(a),M=.5*(b.lat+T.lat),A=.5*(b.lng+T.lng),O=ua(M,A),B=ce.normalize([],O),V=ce.normalize([],ce.cross([],B,[0,1,0])),W=ce.cross([],V,B),q=[V[0],V[1],V[2],0,W[0],W[1],W[2],0,B[0],B[1],B[2],0,0,0,0,1],ne=[O,ua(b.lat,b.lng),ua(T.lat,b.lng),ua(T.lat,T.lng),ua(b.lat,T.lng),ua(M,b.lng),ua(M,T.lng),ua(b.lat,A),ua(T.lat,A)];let ae=Xn.fromPoints(ne.map(ft=>[ce.dot(V,ft),ce.dot(W,ft),ce.dot(B,ft)]));const le=ce.transformMat4([],ae.center,q);ce.squaredLength(le)===0&&ce.set(le,0,0,1),ce.normalize(le,le),ce.scale(le,le,Co),g.center=function([ft,Ft,Jt]){const tr=Math.hypot(ft,Ft,Jt),lr=Math.atan2(ft,Jt),pr=.5*Math.PI-Math.acos(-Ft/tr);return new zn(Fe(lr),Fe(pr))}(le);const ie=g.getWorldToCameraMatrix(),ue=U.invert(new Float64Array(16),ie);ae=Xn.applyTransform(ae,U.multiply([],ie,q)),ce.transformMat4(le,le,ie);const Ee=.5*(ae.max[2]-ae.min[2]),Be=this._minimumAABBFrustumDistance(g,ae),je=ce.scale([],[0,0,1],Ee),Ge=ce.add(je,le,je),tt=Be+(g.pitch===0?0:ce.distance(le,Ge)),Ze=g.globeCenterInViewSpace,nt=ce.sub([],le,[Ze[0],Ze[1],Ze[2]]);ce.normalize(nt,nt),ce.scale(nt,nt,tt);const Xe=ce.add([],le,nt);ce.transformMat4(Xe,Xe,ue);const ut=Hp/Co,bt=ce.length(Xe),At=Oi(Math.max(bt*ut-Hp,Number.EPSILON),0),lt=Math.min(g.zoomFromMercatorZAdjusted(At),x.maxZoom);return lt>.5*(ca+Ya)?(g.setProjection({name:"mercator"}),g.zoom=lt,this._cameraForBounds(g,i,a,l,u,h)):{center:g.center,zoom:lt,bearing:l,pitch:u}}queryTerrainElevation(e,i){const a=this.transform.elevation;return a?(i=ct({},{exaggerated:!0},i),a.getAtPoint(Si.fromLngLat(e),null,i.exaggerated)):null}_cameraForBounds(e,i,a,l,u,h){if(e.projection.name==="globe")return this._cameraForBoundsOnGlobe(e,i,a,l,u,h);const g=e.clone(),x=this._extendCameraOptions(h),b=g.padding;g.bearing=l,g.pitch=u;const T=zn.convert(i),M=zn.convert(a),A=new zn(T.lng,M.lat),O=new zn(M.lng,T.lat),B=g.project(T),V=g.project(M),W=this.queryTerrainElevation(T),q=this.queryTerrainElevation(M),ne=this.queryTerrainElevation(A),ae=this.queryTerrainElevation(O),le=[[B.x,B.y,Math.min(W||0,q||0,ne||0,ae||0)],[V.x,V.y,Math.max(W||0,q||0,ne||0,ae||0)]];let ie=Xn.fromPoints(le);const ue=g.getWorldToCameraMatrix(),Ee=U.invert(new Float64Array(16),ue);ie=Xn.applyTransform(ie,ue);const Be=ce.sub([],ie.max,ie.min),je=b.left||0,Ge=b.right||0,tt=b.bottom||0,Ze=b.top||0,{left:nt,right:Xe,top:ut,bottom:bt}=x.padding,At=.5*(je+Ge),lt=.5*(Ze+tt),ft=Math.min(g.scaleZoom(g.scale*Math.min((g.width-(je+Ge+nt+Xe))/Be[0],(g.height-(tt+Ze+bt+ut))/Be[1])),x.maxZoom),Ft=g.scale/g.zoomScale(ft);ie=new Xn([ie.min[0]-(nt+At)*Ft,ie.min[1]-(bt+lt)*Ft,ie.min[2]],[ie.max[0]+(Xe+At)*Ft,ie.max[1]+(ut+lt)*Ft,ie.max[2]]);const Jt=.5*Be[2],tr=this._minimumAABBFrustumDistance(g,ie),lr=[0,0,1,0];Hi.transformMat4(lr,lr,ue),Hi.normalize(lr,lr);const pr=ce.scale([],lr,tr+Jt),er=ce.add([],ie.center,pr),or=(typeof x.offset.x=="number"&&typeof x.offset.y=="number"?new oe(x.offset.x,x.offset.y):oe.convert(x.offset)).rotate(-_e(l));ie.center[0]-=or.x*Ft,ie.center[1]+=or.y*Ft,ce.transformMat4(ie.center,ie.center,Ee),ce.transformMat4(er,er,Ee);const kr=[ie.center[0],ie.center[1],er[2]*g.pixelsPerMeter];ce.scale(kr,kr,1/g.worldSize);const Hr=va(kr[0]),Ur=Ro(kr[1]),qr=Math.min(g._zoomFromMercatorZ(kr[2]),x.maxZoom),yn=new zn(Hr,Ur);return g.mercatorFromTransition&&qr<.5*(ca+Ya)?(g.setProjection({name:"globe"}),g.zoom=qr,this._cameraForBounds(g,i,a,l,u,h)):{center:yn,zoom:qr,bearing:l,pitch:u}}fitBounds(e,i,a){const l=this.cameraForBounds(e,i);return this._fitInternal(l,i,a)}fitScreenCoordinates(e,i,a,l,u){const h=oe.convert(e),g=oe.convert(i),x=new oe(Math.min(h.x,g.x),Math.min(h.y,g.y)),b=new oe(Math.max(h.x,g.x),Math.max(h.y,g.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(h,g))return this;const T=this.transform.pointLocation3D(x),M=this.transform.pointLocation3D(b),A=this.transform.pointLocation3D(new oe(x.x,b.y)),O=this.transform.pointLocation3D(new oe(b.x,x.y)),B=[Math.min(T.lng,M.lng,A.lng,O.lng),Math.min(T.lat,M.lat,A.lat,O.lat)],V=[Math.max(T.lng,M.lng,A.lng,O.lng),Math.max(T.lat,M.lat,A.lat,O.lat)],W=l&&l.pitch?l.pitch:this.getPitch(),q=this._cameraForBounds(this.transform,B,V,a,W,l);return this._fitInternal(q,l,u)}_fitInternal(e,i,a){return e?(delete(i=ct(e,i)).padding,i.linear?this.easeTo(i,a):this.flyTo(i,a)):this}jumpTo(e,i){this.stop();const a=e.preloadOnly?this.transform.clone():this.transform;let l=!1,u=!1,h=!1;return"zoom"in e&&a.zoom!==+e.zoom&&(l=!0,a.zoom=+e.zoom),e.center!==void 0&&(a.center=zn.convert(e.center)),"bearing"in e&&a.bearing!==+e.bearing&&(u=!0,a.bearing=+e.bearing),"pitch"in e&&a.pitch!==+e.pitch&&(h=!0,a.pitch=+e.pitch),e.padding==null||a.isPaddingEqual(e.padding)||(a.padding=e.padding),e.preloadOnly?(this._preloadTiles(a),this):(this.fire(new vr("movestart",i)).fire(new vr("move",i)),l&&this.fire(new vr("zoomstart",i)).fire(new vr("zoom",i)).fire(new vr("zoomend",i)),u&&this.fire(new vr("rotatestart",i)).fire(new vr("rotate",i)).fire(new vr("rotateend",i)),h&&this.fire(new vr("pitchstart",i)).fire(new vr("pitch",i)).fire(new vr("pitchend",i)),this.fire(new vr("moveend",i)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||ve(u$),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,i){const a=this.transform;if(!a.projection.supportsFreeCamera)return ve(u$),this;this.stop();const l=a.zoom,u=a.pitch,h=a.bearing;a.setFreeCameraOptions(e);const g=l!==a.zoom,x=u!==a.pitch,b=h!==a.bearing;return this.fire(new vr("movestart",i)).fire(new vr("move",i)),g&&this.fire(new vr("zoomstart",i)).fire(new vr("zoom",i)).fire(new vr("zoomend",i)),b&&this.fire(new vr("rotatestart",i)).fire(new vr("rotate",i)).fire(new vr("rotateend",i)),x&&this.fire(new vr("pitchstart",i)).fire(new vr("pitch",i)).fire(new vr("pitchend",i)),this.fire(new vr("moveend",i)),this}easeTo(e,i){this._stop(!1,e.easeId),((e=ct({offset:[0,0],duration:500,easing:rt},e)).animate===!1||this._prefersReducedMotion(e))&&(e.duration=0);const a=this.transform,l=this.getZoom(),u=this.getBearing(),h=this.getPitch(),g=this.getPadding(),x="zoom"in e?+e.zoom:l,b="bearing"in e?this._normalizeBearing(e.bearing,u):u,T="pitch"in e?+e.pitch:h,M="padding"in e?e.padding:a.padding,A=oe.convert(e.offset);let O,B,V;if(a.projection.name==="globe"){const je=Si.fromLngLat(a.center),Ge=A.rotate(-a.angle);je.x+=Ge.x/a.worldSize,je.y+=Ge.y/a.worldSize;const tt=je.toLngLat(),Ze=zn.convert(e.center||tt);this._normalizeCenter(Ze),O=a.centerPoint.add(Ge),B=new oe(je.x,je.y).mult(a.worldSize),V=new oe(ro(Ze.lng),Eo(Ze.lat)).mult(a.worldSize).sub(B)}else{O=a.centerPoint.add(A);const je=a.pointLocation(O),Ge=zn.convert(e.center||je);this._normalizeCenter(Ge),B=a.project(je),V=a.project(Ge).sub(B)}const W=a.zoomScale(x-l);let q,ne;e.around&&(q=zn.convert(e.around),ne=a.locationPoint(q));const ae=this._zooming||x!==l,le=this._rotating||u!==b,ie=this._pitching||T!==h,ue=!a.isPaddingEqual(M),Ee=je=>Ge=>{if(ae&&(je.zoom=Mn(l,x,Ge)),le&&(je.bearing=Mn(u,b,Ge)),ie&&(je.pitch=Mn(h,T,Ge)),ue&&(je.interpolatePadding(g,M,Ge),O=je.centerPoint.add(A)),q)je.setLocationAtPoint(q,ne);else{const tt=je.zoomScale(je.zoom-l),Ze=x>l?Math.min(2,W):Math.max(.5,W),nt=Math.pow(Ze,1-Ge),Xe=je.unproject(B.add(V.mult(Ge*nt)).mult(tt));je.setLocationAtPoint(je.renderWorldCopies?Xe.wrap():Xe,O)}return e.preloadOnly||this._fireMoveEvents(i),je};if(e.preloadOnly){const je=this._emulate(Ee,e.duration,a);return this._preloadTiles(je),this}const Be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ae,this._rotating=le,this._pitching=ie,this._padding=ue,this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,Be),this._ease(Ee(a),je=>{a.cameraElevationReference==="sea"&&a.recenterOnTerrain(),this._afterEase(i,je)},e),this}_prepareEase(e,i,a={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),i||a.moving||this.fire(new vr("movestart",e)),this._zooming&&!a.zooming&&this.fire(new vr("zoomstart",e)),this._rotating&&!a.rotating&&this.fire(new vr("rotatestart",e)),this._pitching&&!a.pitching&&this.fire(new vr("pitchstart",e))}_fireMoveEvents(e){this.fire(new vr("move",e)),this._zooming&&this.fire(new vr("zoom",e)),this._rotating&&this.fire(new vr("rotate",e)),this._pitching&&this.fire(new vr("pitch",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const a=this._zooming,l=this._rotating,u=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,a&&this.fire(new vr("zoomend",e)),l&&this.fire(new vr("rotateend",e)),u&&this.fire(new vr("pitchend",e)),this.fire(new vr("moveend",e))}flyTo(e,i){if(this._prefersReducedMotion(e)){const ft=Ct(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ft,i)}this.stop(),e=ct({offset:[0,0],speed:1.2,curve:1.42,easing:rt},e);const a=this.transform,l=this.getZoom(),u=this.getBearing(),h=this.getPitch(),g=this.getPadding(),x="zoom"in e?Qe(+e.zoom,a.minZoom,a.maxZoom):l,b="bearing"in e?this._normalizeBearing(e.bearing,u):u,T="pitch"in e?+e.pitch:h,M="padding"in e?e.padding:a.padding,A=a.zoomScale(x-l),O=oe.convert(e.offset);let B=a.centerPoint.add(O);const V=a.pointLocation(B),W=zn.convert(e.center||V);this._normalizeCenter(W);const q=a.project(V),ne=a.project(W).sub(q);let ae=e.curve;const le=Math.max(a.width,a.height),ie=le/A,ue=ne.mag();if("minZoom"in e){const ft=Qe(Math.min(e.minZoom,l,x),a.minZoom,a.maxZoom),Ft=le/a.zoomScale(ft-l);ae=Math.sqrt(Ft/ue*2)}const Ee=ae*ae;function Be(ft){const Ft=(ie*ie-le*le+(ft?-1:1)*Ee*Ee*ue*ue)/(2*(ft?ie:le)*Ee*ue);return Math.log(Math.sqrt(Ft*Ft+1)-Ft)}function je(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function Ge(ft){return(Math.exp(ft)+Math.exp(-ft))/2}const tt=Be(0);let Ze=function(ft){return Ge(tt)/Ge(tt+ae*ft)},nt=function(ft){return le*((Ge(tt)*(je(Ft=tt+ae*ft)/Ge(Ft))-je(tt))/Ee)/ue;var Ft},Xe=(Be(1)-tt)/ae;if(Math.abs(ue)<1e-6||!isFinite(Xe)){if(Math.abs(le-ie)<1e-6)return this.easeTo(e,i);const ft=ie<le?-1:1;Xe=Math.abs(Math.log(ie/le))/ae,nt=function(){return 0},Ze=function(Ft){return Math.exp(ft*ae*Ft)}}e.duration="duration"in e?+e.duration:1e3*Xe/("screenSpeed"in e?+e.screenSpeed/ae:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);const ut=u!==b,bt=T!==h,At=!a.isPaddingEqual(M),lt=ft=>Ft=>{const Jt=Ft*Xe,tr=1/Ze(Jt);ft.zoom=Ft===1?x:l+ft.scaleZoom(tr),ut&&(ft.bearing=Mn(u,b,Ft)),bt&&(ft.pitch=Mn(h,T,Ft)),At&&(ft.interpolatePadding(g,M,Ft),B=ft.centerPoint.add(O));const lr=Ft===1?W:ft.unproject(q.add(ne.mult(nt(Jt))).mult(tr));return ft.setLocationAtPoint(ft.renderWorldCopies?lr.wrap():lr,B),ft._updateCameraOnTerrain(),e.preloadOnly||this._fireMoveEvents(i),ft};if(e.preloadOnly){const ft=this._emulate(lt,e.duration,a);return this._preloadTiles(ft),this}return this._zooming=!0,this._rotating=ut,this._pitching=bt,this._padding=At,this._prepareEase(i,!1),this._ease(lt(a),()=>this._afterEase(i),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,i){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const a=this._onEaseEnd;this._onEaseEnd=void 0,a.call(this,i)}if(!e){const a=this.handlers;a&&a.stop(!1)}return this}_ease(e,i,a){a.animate===!1||a.duration===0?(e(1),i()):(this._easeStart=Qr.now(),this._easeOptions=a,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((Qr.now()-this._easeStart)/this._easeOptions.duration,1),i=this._onEaseFrame;i&&i(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,i){e=jt(e,-180,180);const a=Math.abs(e-i);return Math.abs(e-360-i)<a&&(e-=360),Math.abs(e+360-i)<a&&(e+=360),e}_normalizeCenter(e){const i=this.transform;if(!i.renderWorldCopies||i.maxBounds)return;const a=e.lng-i.center.lng;e.lng+=a>180?-360:a<-180?360:0}_prefersReducedMotion(e){return this._respectPrefersReducedMotion&&Qr.prefersReducedMotion&&!(e&&e.essential)}_emulate(e,i,a){const l=Math.ceil(15*i/1e3),u=[],h=e(a.clone());for(let g=0;g<=l;g++){const x=h(g/l);u.push(x.clone())}return u}}class h${constructor(e={}){this.options=e,Dt(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const i=this.options&&this.options.compact;return this._map=e,this._container=Jn("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Jn("button","mapboxgl-ctrl-attrib-button",this._container),Jn("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Jn("div","mapboxgl-ctrl-attrib-inner",this._container),i&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),i===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,i){const a=this._map._getUIString(`AttributionControl.${i}`);e.setAttribute("aria-label",a),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",a)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||$.ACCESS_TOKEN}];if(e){const a=i.reduce((l,u,h)=>(u.value&&(l+=`${u.key}=${u.value}${h<i.length-1?"&":""}`),l),"?");e.href=`${$.FEEDBACK_URL}/${a}#${i$(this._map,!0)}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(e){!e||e.sourceDataType!=="metadata"&&e.sourceDataType!=="visibility"&&e.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const l=this._map.style.stylesheet;this.styleOwner=l.owner,this.styleId=l.id}const i=this._map.style._mergedSourceCaches;for(const l in i){const u=i[l];if(u.used){const h=u.getSource();h.attribution&&e.indexOf(h.attribution)<0&&e.push(h.attribution)}}e.sort((l,u)=>l.length-u.length),e=e.filter((l,u)=>{for(let h=u+1;h<e.length;h++)if(e[h].indexOf(l)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const a=e.join(" | ");a!==this._attribHTML&&(this._attribHTML=a,e.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class d${constructor(){Dt(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=Jn("div","mapboxgl-ctrl");const i=Jn("a","mapboxgl-ctrl-logo");return i.target="_blank",i.rel="noopener nofollow",i.href="https://www.mapbox.com/",i.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),i.setAttribute("rel","noopener nofollow"),this._container.appendChild(i),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&e.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(Object.entries(e).length===0)return!0;for(const i in e){const a=e[i].getSource();if(a.hasOwnProperty("mapbox_logo")&&!a.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const i=e[0];this._map.getCanvasContainer().offsetWidth<250?i.classList.add("mapboxgl-compact"):i.classList.remove("mapboxgl-compact")}}}class f${constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const i=++this._id;return this._queue.push({callback:e,id:i,cancelled:!1}),i}remove(e){const i=this._currentlyRunning,a=i?this._queue.concat(i):this._queue;for(const l of a)if(l.id===e)return void(l.cancelled=!0)}run(e=0){const i=this._currentlyRunning=this._queue;this._queue=[];for(const a of i)if(!a.cancelled&&(a.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function p$(r,e,i){if(r=new zn(r.lng,r.lat),e){const a=new zn(r.lng-360,r.lat),l=new zn(r.lng+360,r.lat),u=360*Math.ceil(Math.abs(r.lng-i.center.lng)/360),h=i.locationPoint(r).distSqr(e),g=e.x<0||e.y<0||e.x>i.width||e.y>i.height;i.locationPoint(a).distSqr(e)<h&&(g||Math.abs(a.lng-i.center.lng)<u)?r=a:i.locationPoint(l).distSqr(e)<h&&(g||Math.abs(l.lng-i.center.lng)<u)&&(r=l)}for(;Math.abs(r.lng-i.center.lng)>180;){const a=i.locationPoint(r);if(a.x>=0&&a.y>=0&&a.x<=i.width&&a.y<=i.height)break;r.lng>i.center.lng?r.lng-=360:r.lng+=360}return r}const _4={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class x4 extends mo{constructor(e,i){if(super(),(e instanceof S.HTMLElement||i)&&(e=ct({element:e},i)),Dt(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=e&&e.occludedOpacity||.2,e&&e.element)this._element=e.element,this._offset=oe.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Jn("div");const u=41,h=27,g=Qi("svg",{display:"block",height:u*this._scale+"px",width:h*this._scale+"px",viewBox:`0 0 ${h} ${u}`},this._element),x=Qi("radialGradient",{id:"shadowGradient"},Qi("defs",{},g));Qi("stop",{offset:"10%","stop-opacity":.4},x),Qi("stop",{offset:"100%","stop-opacity":.05},x),Qi("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},g),Qi("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},g),Qi("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},g),Qi("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},g),this._offset=oe.convert(e&&e.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()});const a=this._element.classList;for(const u in _4)a.remove(`mapboxgl-marker-anchor-${u}`);a.add(`mapboxgl-marker-anchor-${this._anchor}`);const l=e&&e.className?e.className.trim().split(/\s+/):[];a.add(...l),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=zn.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const l=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[l,-1*(38.1-13.5+l)],"bottom-right":[-l,-1*(38.1-13.5+l)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const i=e.code,a=e.charCode||e.keyCode;i!=="Space"&&i!=="Enter"&&a!==32&&a!==13||this.togglePopup()}_onMapClick(e){const i=e.originalEvent.target,a=this._element;this._popup&&(i===a||a.contains(i))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,i=this._pos;if(!e||!i)return!1;const a=e.unproject(i),l=e.getFreeCameraOptions();if(!l.position)return!1;const u=l.position.toLngLat();return u.distanceTo(a)<.9*u.distanceTo(this._lngLat)}_evaluateOpacity(){const e=this._map;if(!e)return;const i=this._pos;if(!i||i.x<0||i.x>e.transform.width||i.y<0||i.y>e.transform.height)return void this._clearFadeTimer();const a=e.unproject(i);let l;e._showingGlobe()&&wv(e.transform,this._lngLat)?l=0:(l=1-e._queryFogOpacity(a),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(l*=this._occludedOpacity)),this._element.style.opacity=`${l}`,this._element.style.pointerEvents=l>0?"auto":"none",this._popup&&this._popup._setOpacity(l),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const i=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${e.x}px,${e.y}px)
            ${_4[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${i.x}px,${i.y}px)
        `}_calculateXYTransform(){const e=this._pos,i=this._map,a=this.getPitchAlignment();if(!i||!e||a!=="map")return"";if(!i._showingGlobe()){const x=i.getPitch();return x?`rotateX(${x}deg)`:""}const l=Fe(dS(i.transform,this._lngLat)),u=e.sub(hS(i.transform)),h=Math.abs(u.x)+Math.abs(u.y);if(h===0)return"";const g=l/h;return`rotateX(${-u.y*g}deg) rotateY(${u.x*g}deg)`}_calculateZTransform(){const e=this._pos,i=this._map;if(!i||!e)return"";let a=0;const l=this.getRotationAlignment();if(l==="map")if(i._showingGlobe()){const u=i.project(new zn(this._lngLat.lng,this._lngLat.lat+.001)),h=i.project(new zn(this._lngLat.lng,this._lngLat.lat-.001)).sub(u);a=Fe(Math.atan2(h.y,h.x))-90}else a=-i.getBearing();else if(l==="horizon"){const u=St(4,6,i.getZoom()),h=hS(i.transform);h.y+=u*i.transform.height;const g=e.sub(h),x=Fe(Math.atan2(g.y,g.x));a=(x>90?x-270:x+90)*(1-u)}return a+=this._rotation,a?`rotateZ(${a}deg)`:""}_update(e){S.cancelAnimationFrame(this._updateFrameId);const i=this._map;i&&(i.transform.renderWorldCopies&&(this._lngLat=p$(this._lngLat,this._pos,i.transform)),this._pos=i.project(this._lngLat),e===!0?this._updateFrameId=S.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),i._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(i._showingGlobe()||i.getTerrain()||i.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(e){return this._offset=oe.convert(e),this._update(),this}addClassName(e){return this._element.classList.add(e),this}removeClassName(e){return this._element.classList.remove(e),this}toggleClassName(e){return this._element.classList.toggle(e)}_onMove(e){const i=this._map;if(!i)return;const a=this._pointerdownPos,l=this._positionDelta;if(a&&l){if(!this._isDragging){const u=this._clickTolerance||i._clickTolerance;if(e.point.dist(a)<u)return;this._isDragging=!0}this._pos=e.point.sub(l),this._lngLat=i.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new vr("dragstart"))),this.fire(new vr("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new vr("dragend")),this._state="inactive"}_addDragHandler(e){const i=this._map,a=this._pos;i&&a&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(a),this._pointerdownPos=e.point,this._state="pending",i.on("mousemove",this._onMove),i.on("touchmove",this._onMove),i.once("mouseup",this._onUp),i.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const i=this._map;return i&&(e?(i.on("mousedown",this._addDragHandler),i.on("touchstart",this._addDragHandler)):(i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const pte={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},mte=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function m$(r=new oe(0,0),e="bottom"){if(typeof r=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(r,2)));switch(e){case"top":return new oe(0,r);case"top-left":return new oe(i,i);case"top-right":return new oe(-i,i);case"bottom":return new oe(0,-r);case"bottom-left":return new oe(i,-i);case"bottom-right":return new oe(-i,-i);case"left":return new oe(r,0);case"right":return new oe(-r,0)}return new oe(0,0)}return r instanceof oe||Array.isArray(r)?oe.convert(r):oe.convert(r[e]||[0,0])}class gte{constructor(e){this.jumpTo(e)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const i=Me((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-i)+this._end*i}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,i,a){this._start=this.getValue(i),this._end=e,this._startTime=i,this._endTime=i+a}}const yte={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},vte={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1},_te={showCompass:!0,showZoom:!0,visualizePitch:!1};class xte{constructor(e,i,a=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new o$({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,a&&(this.mousePitch=new a$({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),Dt(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener("mousedown",this.mousedown),i.addEventListener("touchstart",this.touchstart,{passive:!1}),i.addEventListener("touchmove",this.touchmove),i.addEventListener("touchend",this.touchend),i.addEventListener("touchcancel",this.reset)}down(e,i){this.mouseRotate.mousedown(e,i),this.mousePitch&&this.mousePitch.mousedown(e,i),fi()}move(e,i){const a=this.map,l=this.mouseRotate.mousemoveWindow(e,i),u=l&&l.bearingDelta;if(u&&a.setBearing(a.getBearing()+u),this.mousePitch){const h=this.mousePitch.mousemoveWindow(e,i),g=h&&h.pitchDelta;g&&a.setPitch(a.getPitch()+g)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){gi(),S.removeEventListener("mousemove",this.mousemove),S.removeEventListener("mouseup",this.mouseup)}mousedown(e){this.down(ct({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),Po(this.element,e)),S.addEventListener("mousemove",this.mousemove),S.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,Po(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){e.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ha(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){e.targetTouches.length!==1?this.reset():(this._lastPos=Ha(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){e.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const bte={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},wte={maxWidth:100,unit:"metric"},Ste={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},MC={version:R,supported:za,setRTLTextPlugin:function(r,e,i=!1){if(zl===ml||zl===Uy||zl===V0)throw new Error("setRTLTextPlugin cannot be called multiple times.");ud=Qr.resolveURL(r),zl=ml,Hy=e,U0(),i||H0()},getRTLTextPluginStatus:Mp,Map:class extends fte{constructor(r){if(Ji.mark(Ti.create),(r=ct({},vte,r)).minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(r.antialias&&function(e){const i=e.navigator?e.navigator.userAgent:null;return!!function(a){if(wr==null){const l=a.navigator?a.navigator.userAgent:null;wr=!!a.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return wr}(e)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))}(S)&&(r.antialias=!1,ve("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new z3(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),r),this._interactive=r.interactive,this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=r.preserveDrawingBuffer,this._antialias=r.antialias,this._trackResize=r.trackResize,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles,this._fadeDuration=r.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=r.crossSourceCollisions,this._collectResourceTiming=r.collectResourceTiming,this._language=this._parseLanguage(r.language),this._worldview=r.worldview,this._renderTaskQueue=new f$,this._domRenderTaskQueue=new f$,this._controls=[],this._markers=[],this._popups=[],this._mapId=zt(),this._locale=ct({},yte,r.locale),this._clickTolerance=r.clickTolerance,this._cooperativeGestures=r.cooperativeGestures,this._performanceMetricsCollection=r.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new gte(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new dt(r.transformRequest,r.accessToken,r.testMode),this._silenceAuthErrors=!!r.testMode,typeof r.container=="string"){if(this._container=S.document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container.toString()}' not found.`)}else{if(!(r.container instanceof S.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(this._container.childNodes.length>0&&ve("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),r.maxBounds&&this.setMaxBounds(r.maxBounds),Dt(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),S!==void 0&&(this._fullscreenchangeEvent="onfullscreenchange"in S.document?"fullscreenchange":"webkitfullscreenchange",S.addEventListener("online",this._onWindowOnline,!1),S.addEventListener("resize",this._onWindowResize,!1),S.addEventListener("orientationchange",this._onWindowResize,!1),S.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),S.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new dte(this,r),this._localFontFamily=r.localFontFamily,this._localIdeographFontFamily=r.localIdeographFontFamily,(r.style||!r.testMode)&&this.setStyle(r.style||$.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),r.projection&&this.setProjection(r.projection),r.hash&&(this._hash=new Lee(typeof r.hash=="string"&&r.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch});const e=r.bounds;e&&(this.resize(),this.fitBounds(e,ct({},r.fitBoundsOptions,{duration:0})))}this.resize(),r.attributionControl&&this.addControl(new h$({customAttribution:r.customAttribution})),this._logoControl=new d$,this.addControl(this._logoControl,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",e=>{this._update(e.dataType==="style"),this.fire(new vr(`${e.dataType}data`,e))}),this.on("dataloading",e=>{this.fire(new vr(`${e.dataType}dataloading`,e))})}_getMapId(){return this._mapId}addControl(r,e){if(e===void 0&&(e=r.getDefaultPosition?r.getDefaultPosition():"top-right"),!r||!r.onAdd)return this.fire(new kn(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=r.onAdd(this);this._controls.push(r);const a=this._controlPositions[e];return e.indexOf("bottom")!==-1?a.insertBefore(i,a.firstChild):a.appendChild(i),this}removeControl(r){if(!r||!r.onRemove)return this.fire(new kn(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(r);return e>-1&&this._controls.splice(e,1),r.onRemove(this),this}hasControl(r){return this._controls.indexOf(r)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(r){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const e=!this._moving;return e&&this.fire(new vr("movestart",r)).fire(new vr("move",r)),this.fire(new vr("resize",r)),e&&this.fire(new vr("moveend",r)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(r){return this.transform.setMaxBounds(Dl.convert(r)),this._update()}setMinZoom(r){if((r=r??-2)>=-2&&r<=this.transform.maxZoom)return this.transform.minZoom=r,this._update(),this.getZoom()<r?this.setZoom(r):this.fire(new vr("zoomstart")).fire(new vr("zoom")).fire(new vr("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(r){if((r=r??22)>=this.transform.minZoom)return this.transform.maxZoom=r,this._update(),this.getZoom()>r?this.setZoom(r):this.fire(new vr("zoomstart")).fire(new vr("zoom")).fire(new vr("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(r){if((r=r??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(r>=0&&r<=this.transform.maxPitch)return this.transform.minPitch=r,this._update(),this.getPitch()<r?this.setPitch(r):this.fire(new vr("pitchstart")).fire(new vr("pitch")).fire(new vr("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(r){if((r=r??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(r>=this.transform.minPitch)return this.transform.maxPitch=r,this._update(),this.getPitch()>r?this.setPitch(r):this.fire(new vr("pitchstart")).fire(new vr("pitch")).fire(new vr("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(r){return this.transform.renderWorldCopies=r,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(r){return r==="auto"?S.navigator.language:Array.isArray(r)?r.length===0?void 0:r.map(e=>e==="auto"?S.navigator.language:e):r}setLanguage(r){const e=this._parseLanguage(r);if(!this.style||e===this._language)return this;this._language=e,this.style.clearSources();for(const i of this._controls)i._setLanguage&&i._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(r){return this.style&&r!==this._worldview?(this._worldview=r,this.style.clearSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(r){return this._lazyInitEmptyStyle(),r?typeof r=="string"&&(r={name:r}):r=null,this._useExplicitProjection=!!r,this._prioritizeAndUpdateProjection(r,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const r=this.transform,e=r.projection.name;let i;e==="globe"&&r.zoom>=Ya?(r.setMercatorFromTransition(),i=!0):e==="mercator"&&r.zoom<Ya&&(r.setProjection({name:"globe"}),i=!0),i&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(r,e){return this._updateProjection(r||e||{name:"mercator"})}_updateProjection(r){let e;return e=r.name==="globe"&&this.transform.zoom>=Ya?this.transform.setMercatorFromTransition():this.transform.setProjection(r),this.style.applyProjectionUpdate(),e&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(r){return this.transform.locationPoint3D(zn.convert(r))}unproject(r){return this.transform.pointLocation3D(oe.convert(r))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(r,e,i){if(r==="mouseenter"||r==="mouseover"){let a=!1;const l=h=>{const g=e.filter(b=>this.getLayer(b)),x=g.length?this.queryRenderedFeatures(h.point,{layers:g}):[];x.length?a||(a=!0,i.call(this,new au(r,this,h.originalEvent,{features:x}))):a=!1},u=()=>{a=!1};return{layers:new Set(e),listener:i,delegates:{mousemove:l,mouseout:u}}}if(r==="mouseleave"||r==="mouseout"){let a=!1;const l=h=>{const g=e.filter(x=>this.getLayer(x));(g.length?this.queryRenderedFeatures(h.point,{layers:g}):[]).length?a=!0:a&&(a=!1,i.call(this,new au(r,this,h.originalEvent)))},u=h=>{a&&(a=!1,i.call(this,new au(r,this,h.originalEvent)))};return{layers:new Set(e),listener:i,delegates:{mousemove:l,mouseout:u}}}{const a=l=>{const u=e.filter(g=>this.getLayer(g)),h=u.length?this.queryRenderedFeatures(l.point,{layers:u}):[];h.length&&(l.features=h,i.call(this,l),delete l.features)};return{layers:new Set(e),listener:i,delegates:{[r]:a}}}}on(r,e,i){if(i===void 0)return super.on(r,e);if(Array.isArray(e)||(e=[e]),e){for(const l of e)if(!this._isValidId(l))return this}const a=this._createDelegatedListener(r,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[r]=this._delegatedListeners[r]||[],this._delegatedListeners[r].push(a);for(const l in a.delegates)this.on(l,a.delegates[l]);return this}once(r,e,i){if(i===void 0)return super.once(r,e);if(Array.isArray(e)||(e=[e]),e){for(const l of e)if(!this._isValidId(l))return this}const a=this._createDelegatedListener(r,e,i);for(const l in a.delegates)this.once(l,a.delegates[l]);return this}off(r,e,i){if(i===void 0)return super.off(r,e);e=new Set(Array.isArray(e)?e:[e]);for(const u of e)if(!this._isValidId(u))return this;const a=(u,h)=>{if(u.size!==h.size)return!1;for(const g of u)if(!h.has(g))return!1;return!0},l=this._delegatedListeners?this._delegatedListeners[r]:void 0;return l&&(u=>{for(let h=0;h<u.length;h++){const g=u[h];if(g.listener===i&&a(g.layers,e)){for(const x in g.delegates)this.off(x,g.delegates[x]);return u.splice(h,1),this}}})(l),this}queryRenderedFeatures(r,e){if(!this.style)return[];if(e!==void 0||r===void 0||r instanceof oe||Array.isArray(r)||(e=r,r=void 0),r=r||[[0,0],[this.transform.width,this.transform.height]],(e=e||{}).layers&&Array.isArray(e.layers)){for(const i of e.layers)if(!this._isValidId(i))return[]}return this.style.queryRenderedFeatures(r,e,this.transform)}querySourceFeatures(r,e){return this._isValidId(r)?this.style.querySourceFeatures(r,e):[]}isPointOnSurface(r){const{name:e}=this.transform.projection;return e!=="globe"&&e!=="mercator"&&ve(`${e} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(oe.convert(r))}setStyle(r,e){return(e=ct({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&e.localFontFamily===this._localFontFamily&&this.style&&r?(this._diffStyle(r,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._localFontFamily=e.localFontFamily,this._updateStyle(r,e))}_getUIString(r){const e=this._locale[r];if(e==null)throw new Error(`Missing UI string '${r}'`);return e}_updateStyle(r,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),r&&(this.style=new Ch(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof r=="string"?this.style.loadURL(r):this.style.loadJSON(r)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ch(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(r,e){if(typeof r=="string"){const i=this._requestManager.normalizeStyleURL(r),a=this._requestManager.transformRequest(i,Pe.Style);$e(a,(l,u)=>{l?this.fire(new kn(l)):u&&this._updateDiff(u,e)})}else typeof r=="object"&&this._updateDiff(r,e)}_updateDiff(r,e){try{this.style.setState(r)&&this._update(!0)}catch(i){ve(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(r,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(ve("There is no style added to the map."),!1)}_isValidId(r){return!function(e){return e.indexOf("")>=0}(r)||(this.fire(new kn(new Error(`IDs can't contain special symbols: "${r}".`))),!1)}addSource(r,e){return this._isValidId(r)?(this._lazyInitEmptyStyle(),this.style.addSource(r,e),this._update(!0)):this}isSourceLoaded(r){return!!this._isValidId(r)&&!!this.style&&this.style._isSourceCacheLoaded(r)}areTilesLoaded(){const r=this.style&&this.style._sourceCaches;for(const e in r){const i=r[e]._tiles;for(const a in i){const l=i[a];if(l.state!=="loaded"&&l.state!=="errored")return!1}}return!0}addSourceType(r,e,i){this._lazyInitEmptyStyle(),this.style.addSourceType(r,e,i)}removeSource(r){return this._isValidId(r)?(this.style.removeSource(r),this._updateTerrain(),this._update(!0)):this}getSource(r){return this._isValidId(r)?this.style.getOwnSource(r):null}addImage(r,e,{pixelRatio:i=1,sdf:a=!1,stretchX:l,stretchY:u,content:h}={}){if(this._lazyInitEmptyStyle(),e instanceof S.HTMLImageElement||S.ImageBitmap&&e instanceof S.ImageBitmap){const{width:g,height:x,data:b}=Qr.getImageData(e);this.style.addImage(r,{data:new da({width:g,height:x},b),pixelRatio:i,stretchX:l,stretchY:u,content:h,sdf:a,version:0})}else if(e.width===void 0||e.height===void 0)this.fire(new kn(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:g,height:x}=e,b=e;this.style.addImage(r,{data:new da({width:g,height:x},new Uint8Array(b.data)),pixelRatio:i,stretchX:l,stretchY:u,content:h,sdf:a,version:0,userImage:b}),b.onAdd&&b.onAdd(this,r)}}updateImage(r,e){this._lazyInitEmptyStyle();const i=this.style.getImage(r);if(!i)return void this.fire(new kn(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const a=e instanceof S.HTMLImageElement||S.ImageBitmap&&e instanceof S.ImageBitmap?Qr.getImageData(e):e,{width:l,height:u}=a;l!==void 0&&u!==void 0?l===i.data.width&&u===i.data.height?(i.data.replace(a.data,!(e instanceof S.HTMLImageElement||S.ImageBitmap&&e instanceof S.ImageBitmap)),this.style.updateImage(r,i)):this.fire(new kn(new Error(`The width and height of the updated image (${l}, ${u})
                must be that same as the previous version of the image
                (${i.data.width}, ${i.data.height})`))):this.fire(new kn(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(r){return r?!!this.style&&!!this.style.getImage(r):(this.fire(new kn(new Error("Missing required image id"))),!1)}removeImage(r){this.style.removeImage(r)}loadImage(r,e){Et(this._requestManager.transformRequest(r,Pe.Image),(i,a)=>{e(i,a instanceof S.HTMLImageElement?Qr.getImageData(a):a)})}listImages(){return this.style.listImages()}addModel(r,e){this._lazyInitEmptyStyle(),this.style.addModel(r,e)}hasModel(r){return r?this.style.hasModel(r):(this.fire(new kn(new Error("Missing required model id"))),!1)}removeModel(r){this.style.removeModel(r)}listModels(){return this.style.listModels()}addLayer(r,e){return this._isValidId(r.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(r,e),this._update(!0)):this}moveLayer(r,e){return this._isValidId(r)?(this.style.moveLayer(r,e),this._update(!0)):this}removeLayer(r){return this._isValidId(r)?(this.style.removeLayer(r),this._update(!0)):this}getLayer(r){return this._isValidId(r)?this.style.getOwnLayer(r):null}setLayerZoomRange(r,e,i){return this._isValidId(r)?(this.style.setLayerZoomRange(r,e,i),this._update(!0)):this}setFilter(r,e,i={}){return this._isValidId(r)?(this.style.setFilter(r,e,i),this._update(!0)):this}getFilter(r){return this._isValidId(r)?this.style.getFilter(r):null}setPaintProperty(r,e,i,a={}){return this._isValidId(r)?(this.style.setPaintProperty(r,e,i,a),this._update(!0)):this}getPaintProperty(r,e){return this._isValidId(r)?this.style.getPaintProperty(r,e):null}setLayoutProperty(r,e,i,a={}){return this._isValidId(r)?(this.style.setLayoutProperty(r,e,i,a),this._update(!0)):this}getLayoutProperty(r,e){return this._isValidId(r)?this.style.getLayoutProperty(r,e):null}setConfigProperty(r,e,i){return this.style.setConfigProperty(r,e,i),this._update(!0)}setLights(r){if(this._lazyInitEmptyStyle(),r&&r.length===1&&r[0].type==="flat"){const e=r[0];e.properties?this.style.setFlatLight(e.properties,e.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(r),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const r=this.style.getLights()||[];return r.length===0&&r.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),r}setLight(r,e={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:r}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(r){return this._lazyInitEmptyStyle(),!r&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(r),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(r){return this._lazyInitEmptyStyle(),this.style.setFog(r),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(r){return this.style.setCamera(r),this._triggerCameraUpdate(r)}_triggerCameraUpdate(r){return this._update(this.transform.setOrthographicProjectionAtLowPitch(r["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(r){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(zn.convert(r),this.transform):0}setFeatureState(r,e){return this._isValidId(r.source)?(this.style.setFeatureState(r,e),this._update()):this}removeFeatureState(r,e){return this._isValidId(r.source)?(this.style.removeFeatureState(r,e),this._update()):this}getFeatureState(r){return this._isValidId(r.source)?this.style.getFeatureState(r):null}_updateContainerDimensions(){if(!this._container)return;const r=this._container.getBoundingClientRect().width||400,e=this._container.getBoundingClientRect().height||300;let i,a,l,u=this._container;for(;u&&(!a||!l);){const h=S.getComputedStyle(u).transform;h&&h!=="none"&&(i=h.match(/matrix.*\((.+)\)/)[1].split(", "),i[0]&&i[0]!=="0"&&i[0]!=="1"&&(a=i[0]),i[3]&&i[3]!=="0"&&i[3]!=="1"&&(l=i[3])),u=u.parentElement}this._containerWidth=a?Math.abs(r/a):r,this._containerHeight=l?Math.abs(e/l):e}_detectMissingCSS(){S.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&ve("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const r=this._container;r.classList.add("mapboxgl-map"),(this._missingCSSCanary=Jn("div","mapboxgl-canary",r)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=Jn("div","mapboxgl-canvas-container",r);this._canvas=Jn("canvas","mapboxgl-canvas",e),this._interactive&&(e.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const i=this._controlContainer=Jn("div","mapboxgl-control-container",r),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(l=>{a[l]=Jn("div",`mapboxgl-ctrl-${l}`,i)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(r,e){const i=Qr.devicePixelRatio||1;this._canvas.width=i*Math.ceil(r),this._canvas.height=i*Math.ceil(e),this._canvas.style.width=`${r}px`,this._canvas.style.height=`${e}px`}_addMarker(r){this._markers.push(r)}_removeMarker(r){const e=this._markers.indexOf(r);e!==-1&&this._markers.splice(e,1)}_addPopup(r){this._popups.push(r)}_removePopup(r){const e=this._popups.indexOf(r);e!==-1&&this._popups.splice(e,1)}_setupPainter(){const r=ct({},za.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),e=this._canvas.getContext("webgl2",r);e?(Ai(e,!0),this.painter=new Iee(e,this.transform),this.on("data",i=>{i.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),H.testSupport(e)):this.fire(new kn(new Error("Failed to initialize WebGL")))}_contextLost(r){r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new vr("webglcontextlost",{originalEvent:r}))}_contextRestored(r){this._setupPainter(),this.resize(),this._update(),this.fire(new vr("webglcontextrestored",{originalEvent:r}))}_onMapScroll(r){if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(r){return this.style?(this._styleDirty=this._styleDirty||r,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(r){return this._update(),this._renderTaskQueue.add(r)}_cancelRenderFrame(r){this._renderTaskQueue.remove(r)}_requestDomTask(r){!this.loaded()||this.loaded()&&!this.isMoving()?r():this._domRenderTaskQueue.add(r)}_render(r){let e;this.fire(new vr("renderstart"));const i=this.painter.context.extTimerQuery,a=Qr.now(),l=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(e=l.createQuery(),l.beginQuery(i.TIME_ELAPSED_EXT,e)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],S.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],S.performance.now())),this._renderTaskQueue.run(r),this._domRenderTaskQueue.run(r),this._removed)return;this._updateProjectionTransition();const u=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const x=this.transform.zoom,b=this.transform.pitch,T=Qr.now(),M=new uo(x,{now:T,fadeDuration:u,pitch:b,transition:this.style.transition});this.style.update(M)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let h=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),h=this._updateAverageElevation(a),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):h=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new vr("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new vr("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),e){const x=Qr.now()-a;l.endQuery(i.TIME_ELAPSED_EXT),setTimeout(()=>{const b=l.getQueryParameter(e,l.QUERY_RESULT)/1e6;l.deleteQuery(e),this.fire(new vr("gpu-timing-frame",{cpuTime:x,gpuTime:b})),S.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:b}})},50)}if(this.listens("gpu-timing-layer")){const x=this.painter.collectGpuTimers();setTimeout(()=>{const b=this.painter.queryGpuTimers(x);this.fire(new vr("gpu-timing-layer",{layerTimes:b}))},50)}if(this.listens("gpu-timing-deferred-render")){const x=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const b=this.painter.queryGpuTimeDeferredRender(x);this.fire(new vr("gpu-timing-deferred-render",{gpuTime:b}))},50)}const g=this._sourcesDirty||this._styleDirty||this._placementDirty||h;if(g||this._repaint)this.triggerRepaint();else{const x=!this.isMoving()&&this.loaded();if(x&&(h=this._updateAverageElevation(a,!0)),h)this.triggerRepaint();else if(this._triggerFrame(!1),x&&(this.fire(new vr("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const b=this._calculateSpeedIndex();this.fire(new vr("speedindexcompleted",{speedIndex:b})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,Ji.mark(Ti.fullLoad),this._performanceMetricsCollection&&ra(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(r){for(const e of this._markers)r&&!this.getRenderWorldCopies()&&(e._lngLat=e._lngLat.wrap()),e._update();for(const e of this._popups)!r||this.getRenderWorldCopies()||e._trackPointer||(e._lngLat=e._lngLat.wrap()),e._update()}_updateAverageElevation(r,e=!1){const i=l=>(this.transform.averageElevation=l,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&i(0);const a=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(a||(e||r-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(r)){const l=this.transform.averageElevation;let u=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(u)?u=0:this._averageElevationLastSampledAt=r;const h=Math.abs(l-u);if(h>1){if(this._isInitialLoad||a)return this._averageElevation.jumpTo(u),i(u);this._averageElevation.easeTo(u,r,300)}else if(h>1e-4)return this._averageElevation.jumpTo(u),i(u)}return!!this._averageElevation.isEasing(r)&&i(this._averageElevation.getValue(r))}_authenticate(){Jr(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,r=>{if(r&&(r.message===Yt||r.status===401)){const e=this.painter.context.gl;Ai(e,!1),this._logoControl instanceof d$&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new kn(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),ba(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const r=this._isDragging();this.painter.updateTerrain(this.style,r)}_calculateSpeedIndex(){const r=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const i=this.painter.context.gl,a=i.createFramebuffer();function l(u){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,u,0);const h=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,h),h}return i.bindFramebuffer(i.FRAMEBUFFER,a),this._canvasPixelComparison(l(r),e.canvasCopies.map(l),e.timeStamps)}_canvasPixelComparison(r,e,i){let a=i[1]-i[0];const l=r.length/4;for(let u=0;u<e.length;u++){const h=e[u];let g=0;for(let x=0;x<h.length;x+=4)h[x]===r[x]&&h[x+1]===r[x+1]&&h[x+2]===r[x+2]&&h[x+3]===r[x+3]&&(g+=1);a+=(i[u+2]-i[u+1])*(1-g/l)}return a}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),S!==void 0&&(S.removeEventListener("resize",this._onWindowResize,!1),S.removeEventListener("orientationchange",this._onWindowResize,!1),S.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),S.removeEventListener("online",this._onWindowOnline,!1),S.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),di.delete(this.painter.context.gl),this._removed=!0,this.fire(new vr("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(r){this._renderNextFrame=this._renderNextFrame||r,this.style&&!this._frame&&(this._frame=Qr.frame(e=>{const i=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,i&&this._render(e)}))}_preloadTiles(r){return Ot(this.style?Object.values(this.style._sourceCaches):[],(e,i)=>e._preloadTiles(r,i),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(r){this._trackResize&&this.resize({originalEvent:r})._update()}_onVisibilityChange(){S.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(r){this._showTileBoundaries!==r&&(this._showTileBoundaries=r,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(r){this._showTerrainWireframe!==r&&(this._showTerrainWireframe=r,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(r){this._showLayers2DWireframe!==r&&(this._showLayers2DWireframe=r,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(r){this._showLayers3DWireframe!==r&&(this._showLayers3DWireframe=r,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(r){this._speedIndexTiming!==r&&(this._speedIndexTiming=r,this._update())}get showPadding(){return!!this._showPadding}set showPadding(r){this._showPadding!==r&&(this._showPadding=r,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(r){this._showCollisionBoxes!==r&&(this._showCollisionBoxes=r,r?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(r){this._showOverdrawInspector!==r&&(this._showOverdrawInspector=r,this._update())}get repaint(){return!!this._repaint}set repaint(r){this._repaint!==r&&(this._repaint=r,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(r){this._vertices=r,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(r){this._showTileAABBs!==r&&(this._showTileAABBs=r,r&&this._update())}_setCacheLimits(r,e){(function(i,a){en=i,Yr=a})(r,e)}get version(){return R}},NavigationControl:class{constructor(r){this.options=ct({},_te,r),this._container=Jn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(Dt(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",e=>{this._map&&this._map.zoomIn({},{originalEvent:e})}),Jn("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",e=>{this._map&&this._map.zoomOut({},{originalEvent:e})}),Jn("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(Dt(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",e=>{const i=this._map;i&&(this.options.visualizePitch?i.resetNorthPitch({},{originalEvent:e}):i.resetNorth({},{originalEvent:e}))}),this._compassIcon=Jn("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const r=this._map;if(!r)return;const e=r.getZoom(),i=e===r.getMaxZoom(),a=e===r.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())}_rotateCompassArrow(){const r=this._map;if(!r)return;const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(r.transform.pitch*(Math.PI/180)),.5)}) rotateX(${r.transform.pitch}deg) rotateZ(${r.transform.angle*(180/Math.PI)}deg)`:`rotate(${r.transform.angle*(180/Math.PI)}deg)`;r._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=e)})}onAdd(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),r.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&r.on("pitch",this._rotateCompassArrow),r.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xte(r,this._compass,this.options.visualizePitch)),this._container}onRemove(){const r=this._map;r&&(this._container.remove(),this.options.showZoom&&r.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&r.off("pitch",this._rotateCompassArrow),r.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(r,e){const i=Jn("button",r,this._container);return i.type="button",i.addEventListener("click",e),i}_setButtonTitle(r,e){if(!this._map)return;const i=this._map._getUIString(`NavigationControl.${e}`);r.setAttribute("aria-label",i),r.firstElementChild&&r.firstElementChild.setAttribute("title",i)}},GeolocateControl:class extends mo{constructor(r){super(),this.options=ct({geolocation:S.navigator.geolocation},bte,r),Dt(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=n$(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(r){return this._map=r,this._container=Jn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(r){const e=(i=!!this.options.geolocation)=>{this._supportsGeolocation=i,r(i)};this._supportsGeolocation!==void 0?r(this._supportsGeolocation):S.navigator.permissions!==void 0?S.navigator.permissions.query({name:"geolocation"}).then(i=>e(i.state!=="denied")).catch(()=>e()):e()}_isOutOfMapMaxBounds(r){const e=this._map.getMaxBounds(),i=r.coords;return!!e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(r){if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new vr("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new vr("geolocate",r)),this._finish()}}_updateCamera(r){const e=new zn(r.coords.longitude,r.coords.latitude),i=r.coords.accuracy,a=ct({bearing:this._map.getBearing()},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(i),a,{geolocateSource:!0})}_updateMarker(r){if(r){const e=new zn(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(e).addTo(this._map),this._userLocationDotMarker.setLngLat(e).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const r=this._map.transform,e=Oi(1,r._center.lat)*r.worldSize,i=Math.ceil(2*this._accuracy*e);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(r){if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new vr("error",r)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(r){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=Jn("button","mapboxgl-ctrl-geolocate",this._container),Jn("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){ve("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Jn("div","mapboxgl-user-location"),this._dotElement.appendChild(Jn("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Jn("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new x4({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Jn("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new x4({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",e=>{e.geolocateSource||this._watchState!=="ACTIVE_LOCK"||e.originalEvent&&e.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new vr("trackuserlocationend")))})}}_onDeviceOrientation(r){this._userLocationDotMarker&&(r.webkitCompassHeading?this._heading=r.webkitCompassHeading:r.absolute===!0&&(this._heading=-1*r.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return ve("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new vr("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new vr("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new vr("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let r;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(r={maximumAge:6e5,timeout:0},this._noTimeout=!0):(r=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,r),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const r=()=>{S.addEventListener("ondeviceorientationabsolute"in S?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};S.DeviceMotionEvent!==void 0&&typeof S.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&r()}).catch(console.error):r()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),S.removeEventListener("deviceorientation",this._onDeviceOrientation),S.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:h$,ScaleControl:class{constructor(r){this.options=ct({},wte,r),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),Dt(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const r=this.options.maxWidth||100,e=this._map,i=e._containerHeight/2,a=e._containerWidth/2-r/2,l=e.unproject([a,i]),u=e.unproject([a+r,i]),h=l.distanceTo(u);if(this.options.unit==="imperial"){const g=3.2808*h;g>5280?this._setScale(r,g/5280,"mile"):this._setScale(r,g,"foot")}else this.options.unit==="nautical"?this._setScale(r,h/1852,"nautical-mile"):h>=1e3?this._setScale(r,h/1e3,"kilometer"):this._setScale(r,h,"meter")}_setScale(r,e,i){this._map._requestDomTask(()=>{const a=function(u){const h=Math.pow(10,`${Math.floor(u)}`.length-1);let g=u/h;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:g>=1?1:function(x){const b=Math.pow(10,Math.ceil(-Math.log(x)/Math.LN10));return Math.round(x*b)/b}(g),h*g}(e),l=a/e;this._container.innerHTML=this._isNumberFormatSupported&&i!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:i}).format(a):`${a}&nbsp;${Ste[i]}`,this._container.style.width=r*l+"px"})}onAdd(r){return this._map=r,this._language=r.getLanguage(),this._container=Jn("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(r){this._language=r,this._update()}setUnit(r){this.options.unit=r,this._update()}},FullscreenControl:class{constructor(r){this._fullscreen=!1,r&&r.container&&(r.container instanceof S.HTMLElement?this._container=r.container:ve("Full screen control 'container' must be a DOM element.")),Dt(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in S.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in S.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(r){return this._map=r,this._container||(this._container=this._map.getContainer()),this._controlContainer=Jn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",ve("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,S.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!S.document.fullscreenEnabled&&!S.document.webkitFullscreenEnabled)}_setupUI(){const r=this._fullscreenButton=Jn("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Jn("span","mapboxgl-ctrl-icon",r).setAttribute("aria-hidden","true"),r.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),S.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",r)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(S.document.fullscreenElement||S.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?S.document.exitFullscreen?S.document.exitFullscreen():S.document.webkitCancelFullScreen&&S.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends mo{constructor(r){super(),this.options=ct(Object.create(pte),r),Dt(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(r&&r.className?r.className.trim().split(/\s+/):[])}addTo(r){return this._map&&this.remove(),this._map=r,this.options.closeOnClick&&r.on("preclick",this._onClose),this.options.closeOnMove&&r.on("move",this._onClose),r.on("remove",this.remove),this._update(),r._addPopup(this),this._focusFirstElement(),this._trackPointer?(r.on("mousemove",this._onMouseEvent),r.on("mouseup",this._onMouseEvent),r._canvasContainer.classList.add("mapboxgl-track-pointer")):r.on("move",this._update),this.fire(new vr("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const r=this._map;return r&&(r.off("move",this._update),r.off("move",this._onClose),r.off("preclick",this._onClose),r.off("click",this._onClose),r.off("remove",this.remove),r.off("mousemove",this._onMouseEvent),r.off("mouseup",this._onMouseEvent),r.off("drag",this._onMouseEvent),r._canvasContainer&&r._canvasContainer.classList.remove("mapboxgl-track-pointer"),r._removePopup(this),this._map=void 0),this.fire(new vr("close")),this}getLngLat(){return this._lngLat}setLngLat(r){this._lngLat=zn.convert(r),this._pos=null,this._trackPointer=!1,this._update();const e=this._map;return e&&(e.on("move",this._update),e.off("mousemove",this._onMouseEvent),e._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const r=this._map;return r&&(r.off("move",this._update),r.on("mousemove",this._onMouseEvent),r.on("drag",this._onMouseEvent),r._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(r){return this.setDOMContent(S.document.createTextNode(r))}setHTML(r){const e=S.document.createDocumentFragment(),i=S.document.createElement("body");let a;for(i.innerHTML=r;a=i.firstChild,a;)e.appendChild(a);return this.setDOMContent(e)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(r){return this.options.maxWidth=r,this._update(),this}setDOMContent(r){let e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=Jn("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(r),this.options.closeButton){const i=this._closeButton=Jn("button","mapboxgl-popup-close-button",e);i.type="button",i.setAttribute("aria-label","Close popup"),i.setAttribute("aria-hidden","true"),i.innerHTML="&#215;",i.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(r){return this._classList.add(r),this._updateClassList(),this}removeClassName(r){return this._classList.delete(r),this._updateClassList(),this}setOffset(r){return this.options.offset=r,this._update(),this}toggleClassName(r){let e;return this._classList.delete(r)?e=!1:(this._classList.add(r),e=!0),this._updateClassList(),e}_onMouseEvent(r){this._update(r.point)}_getAnchor(r){if(this.options.anchor)return this.options.anchor;const e=this._map,i=this._container,a=this._pos;if(!e||!i||!a)return"bottom";const l=i.offsetWidth,u=i.offsetHeight,h=a.x<l/2,g=a.x>e.transform.width-l/2;if(a.y+r<u)return h?"top-left":g?"top-right":"top";if(a.y>e.transform.height-u){if(h)return"bottom-left";if(g)return"bottom-right"}return h?"left":g?"right":"bottom"}_updateClassList(){const r=this._container;if(!r)return;const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),r.className=e.join(" ")}_update(r){const e=this._map,i=this._content;if(!e||!this._lngLat&&!this._trackPointer||!i)return;let a=this._container;if(a||(a=this._container=Jn("div","mapboxgl-popup",e.getContainer()),this._tip=Jn("div","mapboxgl-popup-tip",a),a.appendChild(i)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),e.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=p$(this._lngLat,this._pos,e.transform)),!this._trackPointer||r){const l=this._pos=this._trackPointer&&r?r:e.project(this._lngLat),u=m$(this.options.offset),h=this._anchor=this._getAnchor(u.y),g=m$(this.options.offset,h),x=l.add(g).round();e._requestDomTask(()=>{this._container&&h&&(this._container.style.transform=`${_4[h]} translate(${x.x}px,${x.y}px)`)})}if(!this._marker&&e._showingGlobe()){const l=wv(e.transform,this._lngLat)?0:1;this._setOpacity(l)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const r=this._container.querySelector(mte);r&&r.focus()}_onClose(){this.remove()}_setOpacity(r){this._container&&(this._container.style.opacity=`${r}`),this._content&&(this._content.style.pointerEvents=r?"auto":"none")}},Marker:x4,Style:Ch,LngLat:zn,LngLatBounds:Dl,Point:oe,MercatorCoordinate:Si,FreeCameraOptions:I6,Evented:mo,config:$,prewarm:function(){mx().acquire(H3)},clearPrewarmedResources:function(){const r=px;r&&(r.isPreloaded()&&r.numActive()===1?(r.release(H3),px=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return $.ACCESS_TOKEN},set accessToken(r){$.ACCESS_TOKEN=r},get baseApiUrl(){return $.API_URL},set baseApiUrl(r){$.API_URL=r},get workerCount(){return Nv.workerCount},set workerCount(r){Nv.workerCount=r},get maxParallelImageRequests(){return $.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(r){$.MAX_PARALLEL_IMAGE_REQUESTS=r},clearStorage(r){(function(e){if(!Br())return;const i=S.caches.delete(Fr);e&&i.catch(e).then(()=>e())})(r)},workerUrl:"",workerClass:null,get dracoUrl(){return V2()},set dracoUrl(r){(function(e){G3=Qr.resolveURL(e),q3||(q3=new jg(mx(),new mo)),q3.broadcast("setDracoUrl",G3)})(r)},setNow:Qr.setNow,restoreNow:Qr.restoreNow};C.A=O2,C.D=Dg,C.E=Zt,C.F=f3,C.K=dC,C.O=xr,C.P=oe,C.T=J6,C.V=ES,C.a=CS,C.b=PD,C.c=nC,C.d=class extends mo{constructor(r,e,i,a,l,u){super(),this.actor=r,this.layerIndex=e,this.availableImages=i,this.loadVectorData=l||N2,this.loading={},this.loaded={},this.deduped=new F2(r.scheduler),this.isSpriteLoaded=a,this.scheduler=r.scheduler,this.brightness=u}loadTile(r,e){const i=r.uid,a=r&&r.request,l=a&&a.collectResourceTiming,u=this.loading[i]=new GJ(r);u.abort=this.loadVectorData(r,(h,g)=>{const x=!this.loading[i];if(delete this.loading[i],x||h||!g)return u.status="done",x||(this.loaded[i]=u),e(h);const b=g.rawData,T={};g.expires&&(T.expires=g.expires),g.cacheControl&&(T.cacheControl=g.cacheControl),u.vectorTile=g.vectorTile||new c3(new PS(b));const M=()=>{u.parse(u.vectorTile,this.layerIndex,this.availableImages,this.actor,(A,O)=>{if(A||!O)return e(A);const B={};if(l){const V=ji(a);V.length>0&&(B.resourceTiming=JSON.parse(JSON.stringify(V)))}e(null,ct({rawTileData:b.slice(0)},O,T,B))})};this.isSpriteLoaded?M():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(M,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):M()}),this.loaded=this.loaded||{},this.loaded[i]=u})}reloadTile(r,e){const i=this.loaded,a=r.uid,l=this;if(i&&i[a]){const u=i[a];u.showCollisionBoxes=r.showCollisionBoxes,u.projection=r.projection,u.brightness=r.brightness,u.tileTransform=Lg(r.tileID.canonical,r.projection),u.extraShadowCaster=r.extraShadowCaster;const h=(g,x)=>{const b=u.reloadCallback;b&&(delete u.reloadCallback,u.parse(u.vectorTile,l.layerIndex,this.availableImages,l.actor,b)),e(g,x)};u.status==="parsing"?u.reloadCallback=h:u.status==="done"&&(u.vectorTile?u.parse(u.vectorTile,this.layerIndex,this.availableImages,this.actor,h):h())}}abortTile(r,e){const i=r.uid,a=this.loading[i];a&&(a.abort&&a.abort(),delete this.loading[i]),e()}removeTile(r,e){const i=this.loaded,a=r.uid;i&&i[a]&&delete i[a],e()}},C.e=li,C.f=ji,C.g=re,C.h=$e,C.i=ke,C.j=function(r,e){const i=J3(r);for(const a of i){for(const l of a.meshes)tQ(l);a.lights&&(a.lightMeshIndex=a.meshes.length,a.meshes.push(rQ(a.lights,e)))}return i},C.k=uo,C.l=function(r){let e=0;if(new Uint32Array(r,0,1)[0]!==H2){const i=new Uint32Array(r,0,7),[,,a,l,u,h]=i;e=i.byteLength+l+u+h+u,(a!==r.byteLength||e>=r.byteLength)&&ve("Invalid b3dm header information.")}return K2(r,e)},C.m=BS,C.n=Is,C.o=vr,C.p=xe,C.q=function(r){an(),fr&&fr.then(e=>{e.keys().then(i=>{for(let a=0;a<i.length-r;a++)e.delete(i[a])})})},C.r=Q2,C.s=MC,C.t=U1,C.v=Tt,C.w=S}),v(["./shared"],function(C){function S(vt){if(typeof vt=="number"||typeof vt=="boolean"||typeof vt=="string"||vt==null)return JSON.stringify(vt);if(Array.isArray(vt)){let ze="[";for(const ve of vt)ze+=`${S(ve)},`;return`${ze}]`}let De="{";for(const ze of Object.keys(vt).sort())De+=`${ze}:${S(vt[ze])},`;return`${De}}`}function R(vt){let De="";for(const ze of C.r)De+=`/${S(vt[ze])}`;return De}class D{constructor(De){this.keyCache={},De&&this.replace(De)}replace(De,ze){this._layerConfigs={},this._layers={},this.update(De,[],ze)}update(De,ze,ve){this._options=ve;for(const gt of De){this._layerConfigs[gt.id]=gt;const $t=this._layers[gt.id]=C.c(gt,this._options);$t.setScope(this.scope),$t.compileFilter(),this.keyCache[gt.id]&&delete this.keyCache[gt.id]}for(const gt of ze)delete this.keyCache[gt],delete this._layerConfigs[gt],delete this._layers[gt];this.familiesBySource={};const pt=function(gt,$t){const It={};for(let Qt=0;Qt<gt.length;Qt++){const wr=$t&&$t[gt[Qt].id]||R(gt[Qt]);$t&&($t[gt[Qt].id]=wr);let br=It[wr];br||(br=It[wr]=[]),br.push(gt[Qt])}const Mt=[];for(const Qt in It)Mt.push(It[Qt]);return Mt}(C.v(this._layerConfigs),this.keyCache);for(const gt of pt){const $t=gt.map(tn=>this._layers[tn.id]),It=$t[0];if(It.visibility==="none")continue;const Mt=It.source||"";let Qt=this.familiesBySource[Mt];Qt||(Qt=this.familiesBySource[Mt]={});const wr=It.sourceLayer||"_geojsonTileLayer";let br=Qt[wr];br||(br=Qt[wr]=[]),br.push($t)}}}class ${loadTile(De,ze){const{uid:ve,encoding:pt,rawImageData:gt,padding:$t}=De,It=C.w.ImageBitmap&&gt instanceof C.w.ImageBitmap?this.getImageData(gt,$t):gt;ze(null,new C.D(ve,It,pt,De.convertToFloat,$t<1))}getImageData(De,ze){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(De.width,De.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=De.width,this.offscreenCanvas.height=De.height,this.offscreenCanvasContext.drawImage(De,0,0,De.width,De.height);const ve=this.offscreenCanvasContext.getImageData(-ze,-ze,De.width+2*ze,De.height+2*ze);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ve}}function H(vt,De){if(vt.length!==0){Z(vt[0],De);for(var ze=1;ze<vt.length;ze++)Z(vt[ze],!De)}}function Z(vt,De){for(var ze=0,ve=0,pt=0,gt=vt.length,$t=gt-1;pt<gt;$t=pt++){var It=(vt[pt][0]-vt[$t][0])*(vt[$t][1]+vt[pt][1]),Mt=ze+It;ve+=Math.abs(ze)>=Math.abs(It)?ze-Mt+It:It-Mt+ze,ze=Mt}ze+ve>=0!=!!De&&vt.reverse()}var X=C.g(function vt(De,ze){var ve,pt=De&&De.type;if(pt==="FeatureCollection")for(ve=0;ve<De.features.length;ve++)vt(De.features[ve],ze);else if(pt==="GeometryCollection")for(ve=0;ve<De.geometries.length;ve++)vt(De.geometries[ve],ze);else if(pt==="Feature")vt(De.geometry,ze);else if(pt==="Polygon")H(De.coordinates,ze);else if(pt==="MultiPolygon")for(ve=0;ve<De.coordinates.length;ve++)H(De.coordinates[ve],ze);return De});const Q=C.V.prototype.toGeoJSON;var G={exports:{}},K=C.p,Y=C.a.VectorTileFeature,re=fe;function fe(vt,De){this.options=De||{},this.features=vt,this.length=vt.length}function me(vt,De){this.id=typeof vt.id=="number"?vt.id:void 0,this.type=vt.type,this.rawGeometry=vt.type===1?[vt.geometry]:vt.geometry,this.properties=vt.tags,this.extent=De||4096}fe.prototype.feature=function(vt){return new me(this.features[vt],this.options.extent)},me.prototype.loadGeometry=function(){var vt=this.rawGeometry;this.geometry=[];for(var De=0;De<vt.length;De++){for(var ze=vt[De],ve=[],pt=0;pt<ze.length;pt++)ve.push(new K(ze[pt][0],ze[pt][1]));this.geometry.push(ve)}return this.geometry},me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var vt=this.geometry,De=1/0,ze=-1/0,ve=1/0,pt=-1/0,gt=0;gt<vt.length;gt++)for(var $t=vt[gt],It=0;It<$t.length;It++){var Mt=$t[It];De=Math.min(De,Mt.x),ze=Math.max(ze,Mt.x),ve=Math.min(ve,Mt.y),pt=Math.max(pt,Mt.y)}return[De,ve,ze,pt]},me.prototype.toGeoJSON=Y.prototype.toGeoJSON;var pe=C.b,xe=re;function Se(vt){var De=new pe;return function(ze,ve){for(var pt in ze.layers)ve.writeMessage(3,oe,ze.layers[pt])}(vt,De),De.finish()}function oe(vt,De){var ze;De.writeVarintField(15,vt.version||1),De.writeStringField(1,vt.name||""),De.writeVarintField(5,vt.extent||4096);var ve={keys:[],values:[],keycache:{},valuecache:{}};for(ze=0;ze<vt.length;ze++)ve.feature=vt.feature(ze),De.writeMessage(2,Re,ve);var pt=ve.keys;for(ze=0;ze<pt.length;ze++)De.writeStringField(3,pt[ze]);var gt=ve.values;for(ze=0;ze<gt.length;ze++)De.writeMessage(4,Le,gt[ze])}function Re(vt,De){var ze=vt.feature;ze.id!==void 0&&De.writeVarintField(1,ze.id),De.writeMessage(2,Ve,vt),De.writeVarintField(3,ze.type),De.writeMessage(4,Fe,ze)}function Ve(vt,De){var ze=vt.feature,ve=vt.keys,pt=vt.values,gt=vt.keycache,$t=vt.valuecache;for(var It in ze.properties){var Mt=ze.properties[It],Qt=gt[It];if(Mt!==null){Qt===void 0&&(ve.push(It),gt[It]=Qt=ve.length-1),De.writeVarint(Qt);var wr=typeof Mt;wr!=="string"&&wr!=="boolean"&&wr!=="number"&&(Mt=JSON.stringify(Mt));var br=wr+":"+Mt,tn=$t[br];tn===void 0&&(pt.push(Mt),$t[br]=tn=pt.length-1),De.writeVarint(tn)}}}function Oe(vt,De){return(De<<3)+(7&vt)}function _e(vt){return vt<<1^vt>>31}function Fe(vt,De){for(var ze=vt.loadGeometry(),ve=vt.type,pt=0,gt=0,$t=ze.length,It=0;It<$t;It++){var Mt=ze[It],Qt=1;ve===1&&(Qt=Mt.length),De.writeVarint(Oe(1,Qt));for(var wr=ve===3?Mt.length-1:Mt.length,br=0;br<wr;br++){br===1&&ve!==1&&De.writeVarint(Oe(2,wr-1));var tn=Mt[br].x-pt,yr=Mt[br].y-gt;De.writeVarint(_e(tn)),De.writeVarint(_e(yr)),pt+=tn,gt+=yr}ve===3&&De.writeVarint(Oe(7,1))}}function Le(vt,De){var ze=typeof vt;ze==="string"?De.writeStringField(1,vt):ze==="boolean"?De.writeBooleanField(7,vt):ze==="number"&&(vt%1!=0?De.writeDoubleField(3,vt):vt<0?De.writeSVarintField(6,vt):De.writeVarintField(5,vt))}G.exports=Se,G.exports.fromVectorTileJs=Se,G.exports.fromGeojsonVt=function(vt,De){De=De||{};var ze={};for(var ve in vt)ze[ve]=new xe(vt[ve].features,De),ze[ve].name=ve,ze[ve].version=De.version,ze[ve].extent=De.extent;return Se({layers:ze})},G.exports.GeoJSONWrapper=xe;var Me=C.g(G.exports);const Ce={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:vt=>vt},Ye=Math.fround||(qe=new Float32Array(1),vt=>(qe[0]=+vt,qe[0]));var qe;const rt=3,Qe=5,St=6;class jt{constructor(De){this.options=Object.assign(Object.create(Ce),De),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(De){const{log:ze,minZoom:ve,maxZoom:pt}=this.options;ze&&console.time("total time");const gt=`prepare ${De.length} points`;ze&&console.time(gt),this.points=De;const $t=[];for(let Mt=0;Mt<De.length;Mt++){const Qt=De[Mt];if(!Qt.geometry)continue;const[wr,br]=Qt.geometry.coordinates,tn=Ye(ct(wr)),yr=Ye(Ct(br));$t.push(tn,yr,1/0,Mt,-1,1),this.options.reduce&&$t.push(0)}let It=this.trees[pt+1]=this._createTree($t);ze&&console.timeEnd(gt);for(let Mt=pt;Mt>=ve;Mt--){const Qt=+Date.now();It=this.trees[Mt]=this._createTree(this._cluster(It,Mt)),ze&&console.log("z%d: %d clusters in %dms",Mt,It.numItems,+Date.now()-Qt)}return ze&&console.timeEnd("total time"),this}getClusters(De,ze){let ve=((De[0]+180)%360+360)%360-180;const pt=Math.max(-90,Math.min(90,De[1]));let gt=De[2]===180?180:((De[2]+180)%360+360)%360-180;const $t=Math.max(-90,Math.min(90,De[3]));if(De[2]-De[0]>=360)ve=-180,gt=180;else if(ve>gt){const br=this.getClusters([ve,pt,180,$t],ze),tn=this.getClusters([-180,pt,gt,$t],ze);return br.concat(tn)}const It=this.trees[this._limitZoom(ze)],Mt=It.range(ct(ve),Ct($t),ct(gt),Ct(pt)),Qt=It.data,wr=[];for(const br of Mt){const tn=this.stride*br;wr.push(Qt[tn+Qe]>1?Ot(Qt,tn,this.clusterProps):this.points[Qt[tn+rt]])}return wr}getChildren(De){const ze=this._getOriginId(De),ve=this._getOriginZoom(De),pt="No cluster with the specified id.",gt=this.trees[ve];if(!gt)throw new Error(pt);const $t=gt.data;if(ze*this.stride>=$t.length)throw new Error(pt);const It=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),Mt=gt.within($t[ze*this.stride],$t[ze*this.stride+1],It),Qt=[];for(const wr of Mt){const br=wr*this.stride;$t[br+4]===De&&Qt.push($t[br+Qe]>1?Ot($t,br,this.clusterProps):this.points[$t[br+rt]])}if(Qt.length===0)throw new Error(pt);return Qt}getLeaves(De,ze,ve){const pt=[];return this._appendLeaves(pt,De,ze=ze||10,ve=ve||0,0),pt}getTile(De,ze,ve){const pt=this.trees[this._limitZoom(De)],gt=Math.pow(2,De),{extent:$t,radius:It}=this.options,Mt=It/$t,Qt=(ve-Mt)/gt,wr=(ve+1+Mt)/gt,br={features:[]};return this._addTileFeatures(pt.range((ze-Mt)/gt,Qt,(ze+1+Mt)/gt,wr),pt.data,ze,ve,gt,br),ze===0&&this._addTileFeatures(pt.range(1-Mt/gt,Qt,1,wr),pt.data,gt,ve,gt,br),ze===gt-1&&this._addTileFeatures(pt.range(0,Qt,Mt/gt,wr),pt.data,-1,ve,gt,br),br.features.length?br:null}getClusterExpansionZoom(De){let ze=this._getOriginZoom(De)-1;for(;ze<=this.options.maxZoom;){const ve=this.getChildren(De);if(ze++,ve.length!==1)break;De=ve[0].properties.cluster_id}return ze}_appendLeaves(De,ze,ve,pt,gt){const $t=this.getChildren(ze);for(const It of $t){const Mt=It.properties;if(Mt&&Mt.cluster?gt+Mt.point_count<=pt?gt+=Mt.point_count:gt=this._appendLeaves(De,Mt.cluster_id,ve,pt,gt):gt<pt?gt++:De.push(It),De.length===ve)break}return gt}_createTree(De){const ze=new C.K(De.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ve=0;ve<De.length;ve+=this.stride)ze.add(De[ve],De[ve+1]);return ze.finish(),ze.data=De,ze}_addTileFeatures(De,ze,ve,pt,gt,$t){for(const It of De){const Mt=It*this.stride,Qt=ze[Mt+Qe]>1;let wr,br,tn;if(Qt)wr=Tt(ze,Mt,this.clusterProps),br=ze[Mt],tn=ze[Mt+1];else{const Wt=this.points[ze[Mt+rt]];wr=Wt.properties;const[Wr,Fr]=Wt.geometry.coordinates;br=ct(Wr),tn=Ct(Fr)}const yr={type:1,geometry:[[Math.round(this.options.extent*(br*gt-ve)),Math.round(this.options.extent*(tn*gt-pt))]],tags:wr};let dr;dr=Qt||this.options.generateId?ze[Mt+rt]:this.points[ze[Mt+rt]].id,dr!==void 0&&(yr.id=dr),$t.features.push(yr)}}_limitZoom(De){return Math.max(this.options.minZoom,Math.min(Math.floor(+De),this.options.maxZoom+1))}_cluster(De,ze){const{radius:ve,extent:pt,reduce:gt,minPoints:$t}=this.options,It=ve/(pt*Math.pow(2,ze)),Mt=De.data,Qt=[],wr=this.stride;for(let br=0;br<Mt.length;br+=wr){if(Mt[br+2]<=ze)continue;Mt[br+2]=ze;const tn=Mt[br],yr=Mt[br+1],dr=De.within(Mt[br],Mt[br+1],It),Wt=Mt[br+Qe];let Wr=Wt;for(const Fr of dr){const en=Fr*wr;Mt[en+2]>ze&&(Wr+=Mt[en+Qe])}if(Wr>Wt&&Wr>=$t){let Fr,en=tn*Wt,Yr=yr*Wt,fr=-1;const Kr=((br/wr|0)<<5)+(ze+1)+this.points.length;for(const Br of dr){const an=Br*wr;if(Mt[an+2]<=ze)continue;Mt[an+2]=ze;const ni=Mt[an+Qe];en+=Mt[an]*ni,Yr+=Mt[an+1]*ni,Mt[an+4]=Kr,gt&&(Fr||(Fr=this._map(Mt,br,!0),fr=this.clusterProps.length,this.clusterProps.push(Fr)),gt(Fr,this._map(Mt,an)))}Mt[br+4]=Kr,Qt.push(en/Wr,Yr/Wr,1/0,Kr,-1,Wr),gt&&Qt.push(fr)}else{for(let Fr=0;Fr<wr;Fr++)Qt.push(Mt[br+Fr]);if(Wr>1)for(const Fr of dr){const en=Fr*wr;if(!(Mt[en+2]<=ze)){Mt[en+2]=ze;for(let Yr=0;Yr<wr;Yr++)Qt.push(Mt[en+Yr])}}}}return Qt}_getOriginId(De){return De-this.points.length>>5}_getOriginZoom(De){return(De-this.points.length)%32}_map(De,ze,ve){if(De[ze+Qe]>1){const $t=this.clusterProps[De[ze+St]];return ve?Object.assign({},$t):$t}const pt=this.points[De[ze+rt]].properties,gt=this.options.map(pt);return ve&&gt===pt?Object.assign({},gt):gt}}function Ot(vt,De,ze){return{type:"Feature",id:vt[De+rt],properties:Tt(vt,De,ze),geometry:{type:"Point",coordinates:[(ve=vt[De],360*(ve-.5)),kt(vt[De+1])]}};var ve}function Tt(vt,De,ze){const ve=vt[De+Qe],pt=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve,gt=vt[De+St],$t=gt===-1?{}:Object.assign({},ze[gt]);return Object.assign($t,{cluster:!0,cluster_id:vt[De+rt],point_count:ve,point_count_abbreviated:pt})}function ct(vt){return vt/360+.5}function Ct(vt){const De=Math.sin(vt*Math.PI/180),ze=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return ze<0?0:ze>1?1:ze}function kt(vt){const De=(180-360*vt)*Math.PI/180;return 360*Math.atan(Math.exp(De))/Math.PI-90}var zt={exports:{}};zt.exports=function(){function vt(Pe,he,ge,Te){for(var $e,ke=Te,Ke=ge-he>>1,Ue=ge-he,Ne=Pe[he],et=Pe[he+1],Et=Pe[ge],Yt=Pe[ge+1],dt=he+3;dt<ge;dt+=3){var ir=De(Pe[dt],Pe[dt+1],Ne,et,Et,Yt);if(ir>ke)$e=dt,ke=ir;else if(ir===ke){var gr=Math.abs(dt-Ke);gr<Ue&&($e=dt,Ue=gr)}}ke>Te&&($e-he>3&&vt(Pe,he,$e,Te),Pe[$e+2]=ke,ge-$e>3&&vt(Pe,$e,ge,Te))}function De(Pe,he,ge,Te,$e,ke){var Ke=$e-ge,Ue=ke-Te;if(Ke!==0||Ue!==0){var Ne=((Pe-ge)*Ke+(he-Te)*Ue)/(Ke*Ke+Ue*Ue);Ne>1?(ge=$e,Te=ke):Ne>0&&(ge+=Ke*Ne,Te+=Ue*Ne)}return(Ke=Pe-ge)*Ke+(Ue=he-Te)*Ue}function ze(Pe,he,ge,Te){var $e={id:Pe===void 0?null:Pe,type:he,geometry:ge,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Ke=ke.geometry,Ue=ke.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")ve(ke,Ke);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var Ne=0;Ne<Ke.length;Ne++)ve(ke,Ke[Ne]);else if(Ue==="MultiPolygon")for(Ne=0;Ne<Ke.length;Ne++)for(var et=0;et<Ke[Ne].length;et++)ve(ke,Ke[Ne][et])}($e),$e}function ve(Pe,he){for(var ge=0;ge<he.length;ge+=3)Pe.minX=Math.min(Pe.minX,he[ge]),Pe.minY=Math.min(Pe.minY,he[ge+1]),Pe.maxX=Math.max(Pe.maxX,he[ge]),Pe.maxY=Math.max(Pe.maxY,he[ge+1])}function pt(Pe,he,ge,Te){if(he.geometry){var $e=he.geometry.coordinates,ke=he.geometry.type,Ke=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2),Ue=[],Ne=he.id;if(ge.promoteId?Ne=he.properties[ge.promoteId]:ge.generateId&&(Ne=Te||0),ke==="Point")gt($e,Ue);else if(ke==="MultiPoint")for(var et=0;et<$e.length;et++)gt($e[et],Ue);else if(ke==="LineString")$t($e,Ue,Ke,!1);else if(ke==="MultiLineString"){if(ge.lineMetrics){for(et=0;et<$e.length;et++)$t($e[et],Ue=[],Ke,!1),Pe.push(ze(Ne,"LineString",Ue,he.properties));return}It($e,Ue,Ke,!1)}else if(ke==="Polygon")It($e,Ue,Ke,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(et=0;et<he.geometry.geometries.length;et++)pt(Pe,{id:Ne,geometry:he.geometry.geometries[et],properties:he.properties},ge,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(et=0;et<$e.length;et++){var Et=[];It($e[et],Et,Ke,!0),Ue.push(Et)}}Pe.push(ze(Ne,ke,Ue,he.properties))}}function gt(Pe,he){he.push(Mt(Pe[0])),he.push(Qt(Pe[1])),he.push(0)}function $t(Pe,he,ge,Te){for(var $e,ke,Ke=0,Ue=0;Ue<Pe.length;Ue++){var Ne=Mt(Pe[Ue][0]),et=Qt(Pe[Ue][1]);he.push(Ne),he.push(et),he.push(0),Ue>0&&(Ke+=Te?($e*et-Ne*ke)/2:Math.sqrt(Math.pow(Ne-$e,2)+Math.pow(et-ke,2))),$e=Ne,ke=et}var Et=he.length-3;he[2]=1,vt(he,0,Et,ge),he[Et+2]=1,he.size=Math.abs(Ke),he.start=0,he.end=he.size}function It(Pe,he,ge,Te){for(var $e=0;$e<Pe.length;$e++){var ke=[];$t(Pe[$e],ke,ge,Te),he.push(ke)}}function Mt(Pe){return Pe/360+.5}function Qt(Pe){var he=Math.sin(Pe*Math.PI/180),ge=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return ge<0?0:ge>1?1:ge}function wr(Pe,he,ge,Te,$e,ke,Ke,Ue){if(Te/=he,ke>=(ge/=he)&&Ke<Te)return Pe;if(Ke<ge||ke>=Te)return null;for(var Ne=[],et=0;et<Pe.length;et++){var Et=Pe[et],Yt=Et.geometry,dt=Et.type,ir=$e===0?Et.minX:Et.minY,gr=$e===0?Et.maxX:Et.maxY;if(ir>=ge&&gr<Te)Ne.push(Et);else if(!(gr<ge||ir>=Te)){var mr=[];if(dt==="Point"||dt==="MultiPoint")br(Yt,mr,ge,Te,$e);else if(dt==="LineString")tn(Yt,mr,ge,Te,$e,!1,Ue.lineMetrics);else if(dt==="MultiLineString")dr(Yt,mr,ge,Te,$e,!1);else if(dt==="Polygon")dr(Yt,mr,ge,Te,$e,!0);else if(dt==="MultiPolygon")for(var Sr=0;Sr<Yt.length;Sr++){var Gr=[];dr(Yt[Sr],Gr,ge,Te,$e,!0),Gr.length&&mr.push(Gr)}if(mr.length){if(Ue.lineMetrics&&dt==="LineString"){for(Sr=0;Sr<mr.length;Sr++)Ne.push(ze(Et.id,dt,mr[Sr],Et.tags));continue}dt!=="LineString"&&dt!=="MultiLineString"||(mr.length===1?(dt="LineString",mr=mr[0]):dt="MultiLineString"),dt!=="Point"&&dt!=="MultiPoint"||(dt=mr.length===3?"Point":"MultiPoint"),Ne.push(ze(Et.id,dt,mr,Et.tags))}}}return Ne.length?Ne:null}function br(Pe,he,ge,Te,$e){for(var ke=0;ke<Pe.length;ke+=3){var Ke=Pe[ke+$e];Ke>=ge&&Ke<=Te&&(he.push(Pe[ke]),he.push(Pe[ke+1]),he.push(Pe[ke+2]))}}function tn(Pe,he,ge,Te,$e,ke,Ke){for(var Ue,Ne,et=yr(Pe),Et=$e===0?Wr:Fr,Yt=Pe.start,dt=0;dt<Pe.length-3;dt+=3){var ir=Pe[dt],gr=Pe[dt+1],mr=Pe[dt+2],Sr=Pe[dt+3],Gr=Pe[dt+4],Rr=$e===0?ir:gr,Cr=$e===0?Sr:Gr,Lr=!1;Ke&&(Ue=Math.sqrt(Math.pow(ir-Sr,2)+Math.pow(gr-Gr,2))),Rr<ge?Cr>ge&&(Ne=Et(et,ir,gr,Sr,Gr,ge),Ke&&(et.start=Yt+Ue*Ne)):Rr>Te?Cr<Te&&(Ne=Et(et,ir,gr,Sr,Gr,Te),Ke&&(et.start=Yt+Ue*Ne)):Wt(et,ir,gr,mr),Cr<ge&&Rr>=ge&&(Ne=Et(et,ir,gr,Sr,Gr,ge),Lr=!0),Cr>Te&&Rr<=Te&&(Ne=Et(et,ir,gr,Sr,Gr,Te),Lr=!0),!ke&&Lr&&(Ke&&(et.end=Yt+Ue*Ne),he.push(et),et=yr(Pe)),Ke&&(Yt+=Ue)}var cn=Pe.length-3;ir=Pe[cn],gr=Pe[cn+1],mr=Pe[cn+2],(Rr=$e===0?ir:gr)>=ge&&Rr<=Te&&Wt(et,ir,gr,mr),cn=et.length-3,ke&&cn>=3&&(et[cn]!==et[0]||et[cn+1]!==et[1])&&Wt(et,et[0],et[1],et[2]),et.length&&he.push(et)}function yr(Pe){var he=[];return he.size=Pe.size,he.start=Pe.start,he.end=Pe.end,he}function dr(Pe,he,ge,Te,$e,ke){for(var Ke=0;Ke<Pe.length;Ke++)tn(Pe[Ke],he,ge,Te,$e,ke,!1)}function Wt(Pe,he,ge,Te){Pe.push(he),Pe.push(ge),Pe.push(Te)}function Wr(Pe,he,ge,Te,$e,ke){var Ke=(ke-he)/(Te-he);return Pe.push(ke),Pe.push(ge+($e-ge)*Ke),Pe.push(1),Ke}function Fr(Pe,he,ge,Te,$e,ke){var Ke=(ke-ge)/($e-ge);return Pe.push(he+(Te-he)*Ke),Pe.push(ke),Pe.push(1),Ke}function en(Pe,he){for(var ge=[],Te=0;Te<Pe.length;Te++){var $e,ke=Pe[Te],Ke=ke.type;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")$e=Yr(ke.geometry,he);else if(Ke==="MultiLineString"||Ke==="Polygon"){$e=[];for(var Ue=0;Ue<ke.geometry.length;Ue++)$e.push(Yr(ke.geometry[Ue],he))}else if(Ke==="MultiPolygon")for($e=[],Ue=0;Ue<ke.geometry.length;Ue++){for(var Ne=[],et=0;et<ke.geometry[Ue].length;et++)Ne.push(Yr(ke.geometry[Ue][et],he));$e.push(Ne)}ge.push(ze(ke.id,Ke,$e,ke.tags))}return ge}function Yr(Pe,he){var ge=[];ge.size=Pe.size,Pe.start!==void 0&&(ge.start=Pe.start,ge.end=Pe.end);for(var Te=0;Te<Pe.length;Te+=3)ge.push(Pe[Te]+he,Pe[Te+1],Pe[Te+2]);return ge}function fr(Pe,he){if(Pe.transformed)return Pe;var ge,Te,$e,ke=1<<Pe.z,Ke=Pe.x,Ue=Pe.y;for(ge=0;ge<Pe.features.length;ge++){var Ne=Pe.features[ge],et=Ne.geometry,Et=Ne.type;if(Ne.geometry=[],Et===1)for(Te=0;Te<et.length;Te+=2)Ne.geometry.push(Kr(et[Te],et[Te+1],he,ke,Ke,Ue));else for(Te=0;Te<et.length;Te++){var Yt=[];for($e=0;$e<et[Te].length;$e+=2)Yt.push(Kr(et[Te][$e],et[Te][$e+1],he,ke,Ke,Ue));Ne.geometry.push(Yt)}}return Pe.transformed=!0,Pe}function Kr(Pe,he,ge,Te,$e,ke){return[Math.round(ge*(Pe*Te-$e)),Math.round(ge*(he*Te-ke))]}function Br(Pe,he,ge,Te,$e){for(var ke=he===$e.maxZoom?0:$e.tolerance/((1<<he)*$e.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ge,y:Te,z:he,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<Pe.length;Ue++){Ke.numFeatures++,an(Ke,Pe[Ue],ke,$e);var Ne=Pe[Ue].minX,et=Pe[Ue].minY,Et=Pe[Ue].maxX,Yt=Pe[Ue].maxY;Ne<Ke.minX&&(Ke.minX=Ne),et<Ke.minY&&(Ke.minY=et),Et>Ke.maxX&&(Ke.maxX=Et),Yt>Ke.maxY&&(Ke.maxY=Yt)}return Ke}function an(Pe,he,ge,Te){var $e=he.geometry,ke=he.type,Ke=[];if(ke==="Point"||ke==="MultiPoint")for(var Ue=0;Ue<$e.length;Ue+=3)Ke.push($e[Ue]),Ke.push($e[Ue+1]),Pe.numPoints++,Pe.numSimplified++;else if(ke==="LineString")ni(Ke,$e,Pe,ge,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(Ue=0;Ue<$e.length;Ue++)ni(Ke,$e[Ue],Pe,ge,ke==="Polygon",Ue===0);else if(ke==="MultiPolygon")for(var Ne=0;Ne<$e.length;Ne++){var et=$e[Ne];for(Ue=0;Ue<et.length;Ue++)ni(Ke,et[Ue],Pe,ge,!0,Ue===0)}if(Ke.length){var Et=he.tags||null;if(ke==="LineString"&&Te.lineMetrics){for(var Yt in Et={},he.tags)Et[Yt]=he.tags[Yt];Et.mapbox_clip_start=$e.start/$e.size,Et.mapbox_clip_end=$e.end/$e.size}var dt={geometry:Ke,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:Et};he.id!==null&&(dt.id=he.id),Pe.features.push(dt)}}function ni(Pe,he,ge,Te,$e,ke){var Ke=Te*Te;if(Te>0&&he.size<($e?Ke:Te))ge.numPoints+=he.length/3;else{for(var Ue=[],Ne=0;Ne<he.length;Ne+=3)(Te===0||he[Ne+2]>Ke)&&(ge.numSimplified++,Ue.push(he[Ne]),Ue.push(he[Ne+1])),ge.numPoints++;$e&&function(et,Et){for(var Yt=0,dt=0,ir=et.length,gr=ir-2;dt<ir;gr=dt,dt+=2)Yt+=(et[dt]-et[gr])*(et[dt+1]+et[gr+1]);if(Yt>0===Et)for(dt=0,ir=et.length;dt<ir/2;dt+=2){var mr=et[dt],Sr=et[dt+1];et[dt]=et[ir-2-dt],et[dt+1]=et[ir-1-dt],et[ir-2-dt]=mr,et[ir-1-dt]=Sr}}(Ue,ke),Pe.push(Ue)}}function Nr(Pe,he){var ge=(he=this.options=function($e,ke){for(var Ke in ke)$e[Ke]=ke[Ke];return $e}(Object.create(this.options),he)).debug;if(ge&&console.time("preprocess data"),he.maxZoom<0||he.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(he.promoteId&&he.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te=function($e,ke){var Ke=[];if($e.type==="FeatureCollection")for(var Ue=0;Ue<$e.features.length;Ue++)pt(Ke,$e.features[Ue],ke,Ue);else pt(Ke,$e.type==="Feature"?$e:{geometry:$e},ke);return Ke}(Pe,he);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",he.indexMaxZoom,he.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Te=function($e,ke){var Ke=ke.buffer/ke.extent,Ue=$e,Ne=wr($e,1,-1-Ke,Ke,0,-1,2,ke),et=wr($e,1,1-Ke,2+Ke,0,-1,2,ke);return(Ne||et)&&(Ue=wr($e,1,-Ke,1+Ke,0,-1,2,ke)||[],Ne&&(Ue=en(Ne,1).concat(Ue)),et&&(Ue=Ue.concat(en(et,-1)))),Ue}(Te,he)).length&&this.splitTile(Te,0,0,0),ge&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ii(Pe,he,ge){return 32*((1<<Pe)*ge+he)+Pe}return Nr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Nr.prototype.splitTile=function(Pe,he,ge,Te,$e,ke,Ke){for(var Ue=[Pe,he,ge,Te],Ne=this.options,et=Ne.debug;Ue.length;){Te=Ue.pop(),ge=Ue.pop(),he=Ue.pop(),Pe=Ue.pop();var Et=1<<he,Yt=ii(he,ge,Te),dt=this.tiles[Yt];if(!dt&&(et>1&&console.time("creation"),dt=this.tiles[Yt]=Br(Pe,he,ge,Te,Ne),this.tileCoords.push({z:he,x:ge,y:Te}),et)){et>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",he,ge,Te,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation"));var ir="z"+he;this.stats[ir]=(this.stats[ir]||0)+1,this.total++}if(dt.source=Pe,$e){if(he===Ne.maxZoom||he===$e)continue;var gr=1<<$e-he;if(ge!==Math.floor(ke/gr)||Te!==Math.floor(Ke/gr))continue}else if(he===Ne.indexMaxZoom||dt.numPoints<=Ne.indexMaxPoints)continue;if(dt.source=null,Pe.length!==0){et>1&&console.time("clipping");var mr,Sr,Gr,Rr,Cr,Lr,cn=.5*Ne.buffer/Ne.extent,oi=.5-cn,Sn=.5+cn,bi=1+cn;mr=Sr=Gr=Rr=null,Cr=wr(Pe,Et,ge-cn,ge+Sn,0,dt.minX,dt.maxX,Ne),Lr=wr(Pe,Et,ge+oi,ge+bi,0,dt.minX,dt.maxX,Ne),Pe=null,Cr&&(mr=wr(Cr,Et,Te-cn,Te+Sn,1,dt.minY,dt.maxY,Ne),Sr=wr(Cr,Et,Te+oi,Te+bi,1,dt.minY,dt.maxY,Ne),Cr=null),Lr&&(Gr=wr(Lr,Et,Te-cn,Te+Sn,1,dt.minY,dt.maxY,Ne),Rr=wr(Lr,Et,Te+oi,Te+bi,1,dt.minY,dt.maxY,Ne),Lr=null),et>1&&console.timeEnd("clipping"),Ue.push(mr||[],he+1,2*ge,2*Te),Ue.push(Sr||[],he+1,2*ge,2*Te+1),Ue.push(Gr||[],he+1,2*ge+1,2*Te),Ue.push(Rr||[],he+1,2*ge+1,2*Te+1)}}},Nr.prototype.getTile=function(Pe,he,ge){var Te=this.options,$e=Te.extent,ke=Te.debug;if(Pe<0||Pe>24)return null;var Ke=1<<Pe,Ue=ii(Pe,he=(he%Ke+Ke)%Ke,ge);if(this.tiles[Ue])return fr(this.tiles[Ue],$e);ke>1&&console.log("drilling down to z%d-%d-%d",Pe,he,ge);for(var Ne,et=Pe,Et=he,Yt=ge;!Ne&&et>0;)et--,Et=Math.floor(Et/2),Yt=Math.floor(Yt/2),Ne=this.tiles[ii(et,Et,Yt)];return Ne&&Ne.source?(ke>1&&console.log("found parent tile z%d-%d-%d",et,Et,Yt),ke>1&&console.time("drilling down"),this.splitTile(Ne.source,et,Et,Yt,Pe,he,ge),ke>1&&console.timeEnd("drilling down"),this.tiles[Ue]?fr(this.tiles[Ue],$e):null):null},function(Pe,he){return new Nr(Pe,he)}}();var Nt=C.g(zt.exports);function Rt(vt,De){const ze=vt.tileID.canonical;if(!this._geoJSONIndex)return De(null,null);const ve=this._geoJSONIndex.getTile(ze.z,ze.x,ze.y);if(!ve)return De(null,null);const pt=new class{constructor($t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=C.E,this.length=$t.length,this._features=$t}feature($t){return new class{constructor(It){this._feature=It,this.extent=C.E,this.type=It.type,this.properties=It.tags,"id"in It&&!isNaN(It.id)&&(this.id=parseInt(It.id,10))}loadGeometry(){if(this._feature.type===1){const It=[];for(const Mt of this._feature.geometry)It.push([new C.P(Mt[0],Mt[1])]);return It}{const It=[];for(const Mt of this._feature.geometry){const Qt=[];for(const wr of Mt)Qt.push(new C.P(wr[0],wr[1]));It.push(Qt)}return It}}toGeoJSON(It,Mt,Qt){return Q.call(this,It,Mt,Qt)}}(this._features[$t])}}(ve.features);let gt=Me(pt);gt.byteOffset===0&&gt.byteLength===gt.buffer.byteLength||(gt=new Uint8Array(gt)),De(null,{vectorTile:pt,rawData:gt.buffer})}class Pt extends C.d{constructor(De,ze,ve,pt,gt,$t){super(De,ze,ve,pt,Rt,$t),gt&&(this.loadGeoJSON=gt)}loadData(De,ze){const ve=De&&De.request,pt=ve&&ve.collectResourceTiming;this.loadGeoJSON(De,(gt,$t)=>{if(gt||!$t)return ze(gt);if(typeof $t!="object")return ze(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`));{X($t,!0);try{if(De.filter){const Mt=C.e(De.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Mt.result==="error")throw new Error(Mt.value.map(wr=>`${wr.key}: ${wr.message}`).join(", "));$t={type:"FeatureCollection",features:$t.features.filter(wr=>Mt.value.evaluate({zoom:0},wr))}}this._geoJSONIndex=De.cluster?new jt(function({superclusterOptions:Mt,clusterProperties:Qt}){if(!Qt||!Mt)return Mt;const wr={},br={},tn={accumulated:null,zoom:0},yr={properties:null},dr=Object.keys(Qt);for(const Wt of dr){const[Wr,Fr]=Qt[Wt],en=C.e(Fr),Yr=C.e(typeof Wr=="string"?[Wr,["accumulated"],["get",Wt]]:Wr);wr[Wt]=en.value,br[Wt]=Yr.value}return Mt.map=Wt=>{yr.properties=Wt;const Wr={};for(const Fr of dr)Wr[Fr]=wr[Fr].evaluate(tn,yr);return Wr},Mt.reduce=(Wt,Wr)=>{yr.properties=Wr;for(const Fr of dr)tn.accumulated=Wt[Fr],Wt[Fr]=br[Fr].evaluate(tn,yr)},Mt}(De)).load($t.features):Nt($t,De.geojsonVtOptions)}catch(Mt){return ze(Mt)}this.loaded={};const It={};if(pt){const Mt=C.f(ve);Mt&&(It.resourceTiming={},It.resourceTiming[De.source]=JSON.parse(JSON.stringify(Mt)))}ze(null,It)}})}reloadTile(De,ze){const ve=this.loaded;return ve&&ve[De.uid]?super.reloadTile(De,ze):this.loadTile(De,ze)}loadGeoJSON(De,ze){if(De.request)C.h(De.request,ze);else{if(typeof De.data!="string")return ze(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`));try{return ze(null,JSON.parse(De.data))}catch{return ze(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(De,ze){try{ze(null,this._geoJSONIndex.getClusterExpansionZoom(De.clusterId))}catch(ve){ze(ve)}}getClusterChildren(De,ze){try{ze(null,this._geoJSONIndex.getChildren(De.clusterId))}catch(ve){ze(ve)}}getClusterLeaves(De,ze){try{ze(null,this._geoJSONIndex.getLeaves(De.clusterId,De.limit,De.offset))}catch(ve){ze(ve)}}}class Dt{constructor(De,ze){this.tileID=new C.O(De.tileID.overscaledZ,De.tileID.wrap,De.tileID.canonical.z,De.tileID.canonical.x,De.tileID.canonical.y),this.tileZoom=De.tileZoom,this.uid=De.uid,this.zoom=De.zoom,this.canonical=De.tileID.canonical,this.pixelRatio=De.pixelRatio,this.tileSize=De.tileSize,this.source=De.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=De.projection,this.brightness=ze}parse(De,ze,ve,pt){this.status="parsing";const gt=new C.O(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),$t={},It=ze.familiesBySource[ve.source],Mt=new C.F(gt,ve.promoteId);return Mt.bucketLayerIDs=[],C.l(De).then(Qt=>{if(!Qt)return pt(new Error("Could not parse tile"));const wr=C.j(Qt,1/C.t(ve.tileID.canonical)),br=Qt.json.extensionsUsed&&Qt.json.extensionsUsed.includes("MAPBOX_mesh_features"),tn=new C.k(this.zoom,{brightness:this.brightness});for(const yr in It)for(const dr of It[yr]){const Wt=dr[0],Wr=Qt.json.extensionsUsed;Wt.recalculate(tn,[]);const Fr=new C.T(wr,gt,Wr&&Wr.includes("MAPBOX_mesh_features"),this.brightness);br||(Fr.needsUpload=!0),$t[Wt.fqid]=Fr,Fr.evaluate(Wt)}this.status="done",pt(null,{buckets:$t,featureIndex:Mt})}).catch(Qt=>pt(new Error(Qt.message)))}}class Ut{constructor(De,ze,ve,pt,gt,$t){this.actor=De,this.layerIndex=ze,this.brightness=$t,this.loading={},this.loaded={}}loadTile(De,ze){const ve=De.uid,pt=this.loading[ve]=new Dt(De,this.brightness);C.i(De.request,(gt,$t)=>{const It=!this.loading[ve];return delete this.loading[ve],It||gt?(pt.status="done",It||(this.loaded[ve]=pt),ze(gt)):$t&&$t.byteLength!==0?void pt.parse($t,this.layerIndex,De,(Mt,Qt)=>{pt.status="done",this.loaded=this.loaded||{},this.loaded[ve]=pt,Mt||!Qt?ze(Mt):ze(null,Qt)}):(pt.status="done",this.loaded[ve]=pt,ze())})}reloadTile(De,ze){const ve=this.loaded,pt=De.uid;if(ve&&ve[pt]){const gt=ve[pt];gt.projection=De.projection,gt.brightness=De.brightness;const $t=(It,Mt)=>{gt.reloadCallback&&(delete gt.reloadCallback,this.loadTile(De,ze)),ze(It,Mt)};gt.status==="parsing"?gt.reloadCallback=$t:gt.status==="done"&&this.loadTile(De,ze)}}abortTile(De,ze){const ve=De.uid;this.loading[ve]&&delete this.loading[ve],ze()}removeTile(De,ze){const ve=this.loaded,pt=De.uid;ve&&ve[pt]&&delete ve[pt],ze()}}class sr{constructor(De){this.self=De,this.actor=new C.A(De,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=C.m({name:"mercator"}),this.workerSourceTypes={vector:C.d,geojson:Pt,"batched-model":Ut},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ze,ve)=>{if(this.workerSourceTypes[ze])throw new Error(`Worker source with name "${ze}" already registered.`);this.workerSourceTypes[ze]=ve},this.self.registerRTLTextPlugin=ze=>{if(C.n.isParsed())throw new Error("RTL text plugin already registered.");C.n.applyArabicShaping=ze.applyArabicShaping,C.n.processBidirectionalText=ze.processBidirectionalText,C.n.processStyledBidirectionalText=ze.processStyledBidirectionalText}}clearCaches(De,ze,ve){delete this.layerIndexes[De],delete this.availableImages[De],delete this.workerSources[De],delete this.demWorkerSources[De],ve()}checkIfReady(De,ze,ve){ve()}setReferrer(De,ze){this.referrer=ze}spriteLoaded(De,{scope:ze,isLoaded:ve}){if(this.isSpriteLoaded[De]||(this.isSpriteLoaded[De]={}),this.isSpriteLoaded[De][ze]=ve,this.workerSources[De]&&this.workerSources[De][ze])for(const pt in this.workerSources[De][ze]){const gt=this.workerSources[De][ze][pt];for(const $t in gt)gt[$t]instanceof C.d&&(gt[$t].isSpriteLoaded=ve,gt[$t].fire(new C.o("isSpriteLoaded")))}}setImages(De,{scope:ze,images:ve},pt){if(this.availableImages[De]||(this.availableImages[De]={}),this.availableImages[De][ze]=ve,this.workerSources[De]&&this.workerSources[De][ze]){for(const gt in this.workerSources[De][ze]){const $t=this.workerSources[De][ze][gt];for(const It in $t)$t[It].availableImages=ve}pt()}else pt()}setProjection(De,ze){this.projections[De]=C.m(ze)}setBrightness(De,ze,ve){this.brightness=ze,ve()}setLayers(De,ze,ve){this.getLayerIndex(De,ze.scope).replace(ze.layers,ze.options),ve()}updateLayers(De,ze,ve){this.getLayerIndex(De,ze.scope).update(ze.layers,ze.removedIds,ze.options),ve()}loadTile(De,ze,ve){ze.projection=this.projections[De]||this.defaultProjection,this.getWorkerSource(De,ze.type,ze.source,ze.scope).loadTile(ze,ve)}loadDEMTile(De,ze,ve){this.getDEMWorkerSource(De,ze.source,ze.scope).loadTile(ze,ve)}reloadTile(De,ze,ve){ze.projection=this.projections[De]||this.defaultProjection,this.getWorkerSource(De,ze.type,ze.source,ze.scope).reloadTile(ze,ve)}abortTile(De,ze,ve){this.getWorkerSource(De,ze.type,ze.source,ze.scope).abortTile(ze,ve)}removeTile(De,ze,ve){this.getWorkerSource(De,ze.type,ze.source,ze.scope).removeTile(ze,ve)}removeSource(De,ze,ve){if(!(this.workerSources[De]&&this.workerSources[De][ze.scope]&&this.workerSources[De][ze.scope][ze.type]&&this.workerSources[De][ze.scope][ze.type][ze.source]))return;const pt=this.workerSources[De][ze.scope][ze.type][ze.source];delete this.workerSources[De][ze.scope][ze.type][ze.source],pt.removeSource!==void 0?pt.removeSource(ze,ve):ve()}loadWorkerSource(De,ze,ve){try{this.self.importScripts(ze.url),ve()}catch(pt){ve(pt.toString())}}syncRTLPluginState(De,ze,ve){try{C.n.setState(ze);const pt=C.n.getPluginURL();if(C.n.isLoaded()&&!C.n.isParsed()&&pt!=null){this.self.importScripts(pt);const gt=C.n.isParsed();ve(gt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${pt}`),gt)}}catch(pt){ve(pt.toString())}}setDracoUrl(De,ze){this.dracoUrl=ze}getAvailableImages(De,ze){this.availableImages[De]||(this.availableImages[De]={});let ve=this.availableImages[De][ze];return ve||(ve=[]),ve}getLayerIndex(De,ze){this.layerIndexes[De]||(this.layerIndexes[De]={});let ve=this.layerIndexes[De][ze];return ve||(ve=this.layerIndexes[De][ze]=new D,ve.scope=ze),ve}getWorkerSource(De,ze,ve,pt){if(this.workerSources[De]||(this.workerSources[De]={}),this.workerSources[De][pt]||(this.workerSources[De][pt]={}),this.workerSources[De][pt][ze]||(this.workerSources[De][pt][ze]={}),this.isSpriteLoaded[De]||(this.isSpriteLoaded[De]={}),!this.workerSources[De][pt][ze][ve]){const gt={send:($t,It,Mt,Qt,wr,br)=>{this.actor.send($t,It,Mt,De,wr,br)},scheduler:this.actor.scheduler};this.workerSources[De][pt][ze][ve]=new this.workerSourceTypes[ze](gt,this.getLayerIndex(De,pt),this.getAvailableImages(De,pt),this.isSpriteLoaded[De][pt],void 0,this.brightness)}return this.workerSources[De][pt][ze][ve]}getDEMWorkerSource(De,ze,ve){return this.demWorkerSources[De]||(this.demWorkerSources[De]={}),this.demWorkerSources[De][ve]||(this.demWorkerSources[De][ve]={}),this.demWorkerSources[De][ve][ze]||(this.demWorkerSources[De][ve][ze]=new $),this.demWorkerSources[De][ve][ze]}enforceCacheSizeLimit(De,ze){C.q(ze)}getWorkerPerformanceMetrics(De,ze,ve){ve(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new sr(self)),sr}),v(["./shared"],function(C){return C.s});var d=m;return d})})(uZ);var dZ=uZ.exports;const t3e=Nd(dZ),r3e=uk({__proto__:null,default:t3e},[dZ]),{Content:gj}=fy;function n3e({children:t}){return $r.jsx(fy,{children:$r.jsxs(gj,{style:{padding:"0 0px"},className:"!bg-[#fff] w-screen min-h-screen",children:[$r.jsx(HK,{}),$r.jsx(fy,{style:{padding:"24px 20px 24px 0",background:"#fff",borderRadius:"8px",margin:"0 auto"},children:$r.jsx(gj,{className:"round",style:{minHeight:280},children:$r.jsx("div",{children:t})})})]})})}const i3e=E.lazy(()=>is(()=>import("./RouterControl-B0ivt0wc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),o3e=E.lazy(()=>is(()=>import("./RouterCreate-iHCiQqhv.js"),__vite__mapDeps([8,4,9,10,7,1,2,11]))),a3e=E.lazy(()=>is(()=>import("./RouterDashboard-E-kA1j2o.js"),__vite__mapDeps([12,2,13])));E.lazy(()=>is(()=>import("./RouterDetail-SqwUU-7u.js"),__vite__mapDeps([])));const s3e=E.lazy(()=>is(()=>import("./RouterEmployee-_TLm2_9V.js"),__vite__mapDeps([]))),l3e=E.lazy(()=>is(()=>import("./SettingDMS-0Goh2fk7.js"),__vite__mapDeps([14,2]))),c3e=E.lazy(()=>is(()=>import("./MonitorAlbum--_WGKIix.js"),__vite__mapDeps([15,2,11,4,9,6,10]))),u3e=E.lazy(()=>is(()=>import("./Progress-Eun-a-JJ.js"),__vite__mapDeps([]))),h3e=E.lazy(()=>is(()=>import("./ReportCustomer-DfhXnZGh.js"),__vite__mapDeps([16,2,3,1,4,17,6,18]))),d3e=E.lazy(()=>is(()=>import("./EmployeeMonitor-ua324uIs.js"),__vite__mapDeps([19,4,20,13]))),f3e=E.lazy(()=>is(()=>import("./EmployeeMonitorDetail-Ru0lCXbG.js"),__vite__mapDeps([21,2,6,11,5,9,20,7]))),p3e=E.lazy(()=>is(()=>import("./ReportKPI-6ZNgCmX0.js"),__vite__mapDeps([22,2,4,9,6,10,17]))),yj=E.lazy(()=>is(()=>import("./ReportSales-mz-d-6Y-.js"),__vite__mapDeps([23,2,4,6,17]))),m3e=E.lazy(()=>is(()=>import("./ReportSalesOrder-AML6Yaw2.js"),__vite__mapDeps([24,2,4,6,17]))),g3e=E.lazy(()=>is(()=>import("./ReportDebt-tU2GNGxy.js"),__vite__mapDeps([25,2,26,27,6,18,17]))),y3e=E.lazy(()=>is(()=>import("./ReportCheckin-ipoyu8Q5.js"),__vite__mapDeps([28,2,4,27,6,17]))),v3e=E.lazy(()=>is(()=>import("./ReportCustomNew-mpYpyUxB.js"),__vite__mapDeps([29,2,26,27,4,17]))),_3e=E.lazy(()=>is(()=>import("./ReportCheckinFirst-is-ys9z0.js"),__vite__mapDeps([30,2,26,27,17]))),x3e=E.lazy(()=>is(()=>import("./EmployeeMonitorKPI-uDVj3aga.js"),__vite__mapDeps([31,2,1,26]))),b3e=E.lazy(()=>is(()=>import("./ReportDistance-P9P27QjW.js"),__vite__mapDeps([32,2,9,6,17]))),w3e=E.lazy(()=>is(()=>import("./CustomersMap-AhaDroiJ.js"),__vite__mapDeps([]))),S3e=[{path:"/",element:$r.jsx(xMe,{children:$r.jsx(E.Suspense,{fallback:$r.jsx(aj,{}),children:$r.jsx(BB,{})})}),children:[{index:!0,element:$r.jsx(a3e,{})},{path:"router-control",element:$r.jsx(i3e,{})},{path:"router-employee",element:$r.jsx(s3e,{})},{path:"dms-router/:type",element:$r.jsx(o3e,{})},{path:"router-detail/:id",element:$r.jsx(u3e,{})},{path:"setting-dms",element:$r.jsx(l3e,{})},{path:"monitor-album",element:$r.jsx(c3e,{})},{path:"report-customer",element:$r.jsx(h3e,{})},{path:"employee-monitor",element:$r.jsx(d3e,{})},{path:"report-kpi",element:$r.jsx(p3e,{})},{path:"report-sales",element:$r.jsx(yj,{})},{path:"report-sales",element:$r.jsx(yj,{})},{path:"report-saleorder",element:$r.jsx(m3e,{})},{path:"report-debt",element:$r.jsx(g3e,{})},{path:"report-checkin",element:$r.jsx(y3e,{})},{path:"report-custom-new",element:$r.jsx(v3e,{})},{path:"report-checkin-first",element:$r.jsx(_3e,{})},{path:"employee-monitor-kpi",element:$r.jsx(x3e,{})},{path:"report-distance",element:$r.jsx(b3e,{})},{path:"customers-map",element:$r.jsx(w3e,{})}]},{path:"/",element:$r.jsx(n3e,{children:$r.jsx(E.Suspense,{fallback:$r.jsx(aj,{}),children:$r.jsx(BB,{})})}),children:[{path:"employee-monitor-detail/:employee_id",element:$r.jsx(f3e,{})}]}],nD="/mbw_desk";console.log(nD);const PA={AUTH:"/#login",DASHBOARD:`${nD}/`},C3e={auth:PA.AUTH,dashboard:{root:PA.DASHBOARD,router_control:`${PA.DASHBOARD}/router-control`}};function E3e(){return $r.jsxs($r.Fragment,{children:[$r.jsx(lle,{children:$r.jsx("title",{children:"NotFound"})}),$r.jsx(kwe,{status:"404",title:"404",subTitle:"Trang không tồn tại."})]})}const T3e=E.lazy(()=>is(()=>import("./Login-NOZiGB3M.js"),__vite__mapDeps([33,9]))),I3e=[{path:"/auth/login",element:$r.jsx(T3e,{})}];function M3e(){return Pie([{path:"/",element:$r.jsx(Vie,{to:C3e.dashboard.root,replace:!0})},...S3e,...I3e,{path:"*",element:$r.jsx(E3e,{})}])}function P3e(){const[t,n]=hwe.useModal(),{data:o,error:s,isValidating:c,mutate:m}=Ose("DMS Router");return o&&console.log("data",o),$r.jsxs(cle,{children:[$r.jsx(M3e,{}),n]})}var A3e={exports:{}};(function(t,n){(function(o,s){t.exports=s(iW)})(sI,function(o){function s(v){return v&&typeof v=="object"&&"default"in v?v:{default:v}}var c=s(o),m={name:"vi",weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),weekStart:1,weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),ordinal:function(v){return v},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"}};return c.default.locale(m,null,!0),m})})(A3e);var R3e={VITE_BASE_PATH:"/mbw_desk",VITE_KEY_MAP:"wtpM0U1ZmE2s87LEZNSHf63Osc1a2sboaozCQNsy",VITE_API_KEY:"w1Dlh2wRon7mE6sL196TgvLS45fw02uon74pJ0rc",BASE_URL:"/assets/mbw_dms/mbw_fe/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};O0e.locale("vi");const k3e=V5.createRoot(document.getElementById("root"));k3e.render($r.jsx(VO,{theme:{token:{fontFamily:"'Inter', sans-serif"}},children:$r.jsx(zU,{children:$r.jsx(Ase,{socketPort:R3e.VITE_SOCKET_PORT??"",children:$r.jsx(Xie,{basename:nD,children:$r.jsx(E.Suspense,{children:$r.jsx(P3e,{})})})})})}));export{LV as $,Eue as A,hu as B,iR as C,s8 as D,nR as E,bue as F,Cue as G,Mue as H,Ud as I,Zhe as J,Mo as K,$r as L,Ahe as M,Zf as N,W3e as O,QT as P,$m as Q,kz as R,L3e as S,iH as T,z3e as U,G3e as V,E as W,U3e as X,H3e as Y,dle as Z,yt as _,nr as a,Jbe as a$,nI as a0,zz as a1,_w as a2,K3e as a3,Hs as a4,O0e as a5,X3e as a6,hwe as a7,lle as a8,hl as a9,uc as aA,Ub as aB,Vb as aC,gme as aD,OH as aE,sz as aF,Q1e as aG,Tq as aH,VT as aI,cc as aJ,YI as aK,xu as aL,Gm as aM,ul as aN,x0 as aO,Uf as aP,Nh as aQ,t3e as aR,e4e as aS,Q3e as aT,t4e as aU,n4e as aV,r4e as aW,_xe as aX,DW as aY,pz as aZ,Z3e as a_,Ei as aa,xi as ab,Mr as ac,Gt as ad,KE as ae,uM as af,os as ag,Yi as ah,Oa as ai,hi as aj,Zs as ak,S0 as al,cw as am,HO as an,ive as ao,_o as ap,Wf as aq,Kf as ar,Il as as,xt as at,Gi as au,Pr as av,Ml as aw,rr as ax,Uh as ay,Iy as az,B3e as b,zCe as b$,J3e as b0,cW as b1,D3e as b2,e_e as b3,Or as b4,Hb as b5,Gh as b6,tM as b7,Vh as b8,Do as b9,Nd as bA,Y3e as bB,UK as bC,fG as bD,Rde as bE,GO as bF,Ty as bG,mG as bH,VO as bI,ide as bJ,QF as bK,xw as bL,dM as bM,h_e as bN,ws as bO,nh as bP,Ey as bQ,iq as bR,i0 as bS,eW as bT,j_ as bU,Az as bV,sge as bW,Hm as bX,Uz as bY,Sye as bZ,Jge as b_,q3e as ba,yE as bb,XO as bc,OG as bd,ZN as be,jme as bf,gw as bg,KT as bh,Zb as bi,Pl as bj,uw as bk,xy as bl,Ay as bm,kwe as bn,XEe as bo,Mbe as bp,mz as bq,o0 as br,wq as bs,swe as bt,rW as bu,Sq as bv,$c as bw,UN as bx,JT as by,sI as bz,nH as c,_W as c0,DCe as c1,nq as c2,fw as c3,eve as c4,bu as c5,hve as c6,N_ as c7,jye as c8,dve as c9,Pve as cA,HT as cB,yz as cC,o8 as cD,gMe as cE,Exe as cF,dz as ca,JCe as cb,zo as cc,CW as cd,Cu as ce,L1e as cf,pW as cg,KO as ch,Mz as ci,fW as cj,X0e as ck,hW as cl,Z0e as cm,KI as cn,mW as co,Gb as cp,RR as cq,_le as cr,dw as cs,sM as ct,HR as cu,uW as cv,iz as cw,rz as cx,oz as cy,nz as cz,X5 as d,F3e as e,oH as f,Cce as g,Xt as h,eue as i,Ece as j,rR as k,xa as l,aE as m,V3e as n,AH as o,l8 as p,wue as q,j3e as r,$3e as s,N3e as t,Ice as u,Sue as v,Ua as w,d_ as x,Tf as y,oR as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/RouterControl-B0ivt0wc.js","assets/index.esm-aHV_uMa1.js","assets/header-page-65ZG63jm.js","assets/index-szBJwhbB.js","assets/useDebount-NFfdr1Q2.js","assets/date-picker-sjGk_LVH.js","assets/index-Y72ZVTi2.js","assets/index-4RJb5GkE.js","assets/RouterCreate-iHCiQqhv.js","assets/index-a63-eoBm.js","assets/index-_PEW1MjP.js","assets/index-iG1WB0w3.js","assets/RouterDashboard-E-kA1j2o.js","assets/index-qUeoEncC.js","assets/SettingDMS-0Goh2fk7.js","assets/MonitorAlbum--_WGKIix.js","assets/ReportCustomer-DfhXnZGh.js","assets/VerticalAlignBottomOutlined-jeSwdxWh.js","assets/index-d-v4vnKq.js","assets/EmployeeMonitor-ua324uIs.js","assets/WrapperCard-lY634Roy.js","assets/EmployeeMonitorDetail-Ru0lCXbG.js","assets/ReportKPI-6ZNgCmX0.js","assets/ReportSales-mz-d-6Y-.js","assets/ReportSalesOrder-AML6Yaw2.js","assets/ReportDebt-tU2GNGxy.js","assets/tableCustom-E6UDMd6B.js","assets/data-71ee2cBp.js","assets/ReportCheckin-ipoyu8Q5.js","assets/ReportCustomNew-mpYpyUxB.js","assets/ReportCheckinFirst-is-ys9z0.js","assets/EmployeeMonitorKPI-uDVj3aga.js","assets/ReportDistance-P9P27QjW.js","assets/Login-NOZiGB3M.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
